//==============================================================================
//
//  Copyright 2021 TOBESOFT Co., Ltd.
//  All Rights Reserved.
//
//  NOTICE: TOBESOFT permits you to use, modify, and distribute this file 
//          in accordance with the terms of the license agreement accompanying it.
//
//  Readme URL: http://www.nexacro.com/legal/license/tobesoft/ko/NexacroN-public-license-readme-1.1.html
//
//==============================================================================
if(!nexacro.FlexibleComponent){nexacro.FlexibleComponent=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._setFlexible();};var _pFlexibleComponent=nexacro._createPrototype(nexacro.Component,nexacro.FlexibleComponent);nexacro.FlexibleComponent.prototype=_pFlexibleComponent;_pFlexibleComponent._p_flexcrossaxisalign="";_pFlexibleComponent._p_flexmainaxisalign="";_pFlexibleComponent._p_flexwrap="";_pFlexibleComponent._layouttype="";_pFlexibleComponent._support_component_flex=true;_pFlexibleComponent._is_simple_control=true;_pFlexibleComponent._properties=[{name:"flexcrossaxisalign"},{name:"flexmainaxisalign"},{name:"flexwrap"},];_pFlexibleComponent.on_create_control_element=function(_a){var _b=new nexacro.FlexibleControlElement(_a);_b.setLinkedControl(this);this._control_element=_b;return _b;};_pFlexibleComponent.on_after_created=function(){this.on_apply_flexcrossaxisalign();this.on_apply_flexmainaxisalign();};_pFlexibleComponent.set_flexwrap=function(_a){if(this._p_flexwrap!==_a){this._p_flexwrap=_a;this.on_apply_flexwrap();}};_pFlexibleComponent.on_apply_flexwrap=function(){var _a=this._control_element;if(_a&&_a._is_flexible){_a.setElementFlexWrap(this._p_flexwrap);}};_pFlexibleComponent.set_flexcrossaxisalign=function(_a){if(this._p_flexcrossaxisalign!==_a){this._p_flexcrossaxisalign=_a;this.on_apply_flexcrossaxisalign();}};_pFlexibleComponent.on_apply_flexcrossaxisalign=function(){var _a=this._control_element;if(_a&&_a._is_flexible){_a.setElementFlexCrossAxisAlign(this._p_flexcrossaxisalign);}};_pFlexibleComponent.set_flexmainaxisalign=function(_a){if(this._p_flexmainaxisalign!==_a){this._p_flexmainaxisalign=_a;this.on_apply_flexmainaxisalign();}};_pFlexibleComponent.on_apply_flexmainaxisalign=function(){var _a=this._control_element;if(_a&&_a._is_flexible){_a.setElementFlexCrossAxisAlign(this._p_flexmainaxisalign);}};_pFlexibleComponent._isSupportFlexDisplay=function(){if(!this._support_component_flex){return false;}var _a;var _b=nexacro._Browser;switch(_b){case "IE":case "Runtime":_a=false;break;case "MobileSafari":if(nexacro._BrowserVersion>14.4){_a=true;}else{_a=false;}break;default:_a=true;break;}return _a;};_pFlexibleComponent._setFlexible=function(){this._is_flexible=this._isSupportFlexDisplay();};_pFlexibleComponent._isFlexible=function(){return this._is_flexible;};nexacro.TextControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Static.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pTextControl=nexacro._createPrototype(nexacro.Static,nexacro.TextControl);nexacro.TextControl.prototype=_pTextControl;_pTextControl._type_name="TextControl";_pTextControl._is_subcontrol=true;_pTextControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b;if(nexacro._Browser=="Runtime"){_b=this._cell_elem=new nexacro.TextBoxElement(_a,"text");}else{_b=this._cell_elem=new nexacro.TextBoxVirtualFlexElement(_a,"text");}_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(_a.client_width,_a.client_height);if(this.textAlign){_b.setElementTextAlign(this.textAlign);}if(this.verticalAlign){_b.setElementVerticalAlign(this.verticalAlign);}var _c=this._getCSSStyleValue("wordWrap");if(_c){_b.setElementCSSMapInfo(_c);}if(this.wordWrap){_b.setElementWordWrap(this.wordWrap);}if(this._textdecoration){_b.setElementTextDecoration(this._textdecoration);}if(this._displaytext){if(this.usedecorate){_b.setElementDecorateText(this._displaytext);}else{_b.setElementText(this._displaytext);}_b.setElementPointerEvents();}}};_pTextControl.on_changeUserStatus=function(_a,_b,_c,_d,_e){if(_b){return _a;}else{return _c;}};_pTextControl._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f;if(this._displaytext&&this._displaytext!==""){_f=this._displaytext;}else{_f=this.text;}if(!_f){_f="gHí•œ";}var _g=this._getCurrentStyleInheritValue("font");var _h=this._getReferenceAbsoluteFont(_g);var _i=this._getCurrentStyleInheritValue("wordSpacing");var _j=this._getCurrentStyleInheritValue("letterSpacing");var _k="none";var _l;var _m=false;if(_f.search("\n")>-1){_m=true;}if(this.fittocontents=="height"){_k=this.wordWrap||this._getCSSStyleValue("wordWrap");if(_k&&_k!="none"){_m=true;}_l=this._adjust_width-_b;}var _n=this.usedecorate;var _o=nexacro._getTextSize(_f,_g,_m,_l,_k,_i,_j,_n,undefined,undefined,_h);_b+=Math.ceil(this.textwidth!=null?this.textwidth:_o[0]);_c+=Math.ceil(_o[1]);if(nexacro._Browser=="Runtime"){_c+=2;}return [_b,_c];}return [0,0];};nexacro.IconControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.TextControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pIconControl=nexacro._createPrototype(nexacro.TextControl,nexacro.IconControl);nexacro.IconControl.prototype=_pIconControl;_pIconControl._type_name="IconControl";_pIconControl._p_semantictag="i";_pIconControl._p_accessibilityrole="icon";_pIconControl._p_tabstop=true;_pIconControl._firstchild=false;_pIconControl._is_focus_accept=true;_pIconControl._cur_ldown_elem=null;_pIconControl._selectstatus=false;_pIconControl._use_pushed_status=true;_pIconControl._use_selected_status=true;_pIconControl._is_eventinfo_control=true;_pIconControl._isFocusAcceptable=function(){return true;};_pIconControl._click=function(_a){if(_a==nexacro.Event.KEY_ESC||_a==nexacro.Event.KEY_RETURN){if(this._isAccessibilityEnable()){this._notifyAccessibility();}}this.click();};_pIconControl.getSelectStatus=function(){return this._selectstatus;};_pIconControl.setSelectStatus=function(_a){var _b=this._selectstatus;this._selectstatus=_a;if(_a){this._changeUserStatus("selected",true);}else{this._changeUserStatus("selected",false);}return _b;};_pIconControl.toggleSelectStatus=function(){var _a=this._selectstatus;this.setSelectStatus(!_a);return _a;};_pIconControl.click=function(){this.on_fire_onclick("none",false,false,false,-1,-1,-1,-1,-1,-1,this,this);};_pIconControl._on_hotkey=function(){this.click();};_pIconControl.on_keydown_basic_action=function(_a){if(this._use_pushed_status){if(_a==13||_a==32){this._changeUserStatus("pushed",true);}}};_pIconControl.on_keyup_basic_action=function(){if(this._use_pushed_status){this._changeUserStatus("pushed",false);}};_pIconControl.on_keydown_default_action=function(_a,_b,_c,_d,_e,_f){var _g=this._getWindow();if(_g){this._cur_ldown_elem=_g._cur_ldown_elem||_g._keydown_element;}};_pIconControl.on_keyup_default_action=function(_a,_b,_c,_d,_e,_f){var _g=this._getWindow();if(_g){var _h=_g._cur_ldown_elem||_g._keydown_element;if(!this._is_subcontrol){if(_h==this._cur_ldown_elem){if(_a==13||(_a==32&&!this._isComponentBlockProcess())){this._click(_a);}}}}this._cur_ldown_elem=null;};nexacro.LabelControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.TextControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pLabelControl=nexacro._createPrototype(nexacro.TextControl,nexacro.LabelControl);nexacro.LabelControl.prototype=_pLabelControl;_pLabelControl._type_name="LabelControl";_pLabelControl._p_semantictag="label";_pLabelControl._p_accessibilityrole="label";_pLabelControl.on_create_normal_control_element=function(_a){var _b=new nexacro.LabelElement(_a);_b.setLinkedControl(this);this._control_element=_b;return _b;};_pLabelControl.For=function(_a){this._control_element.For(_a);};_pLabelControl._on_getFitSize=function(){if(this.text==""){return [0,0];}return nexacro.TextControl.prototype._on_getFitSize.call(this);};nexacro.FieldBaseTextControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.TextControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pFieldBaseTextControl=nexacro._createPrototype(nexacro.TextControl,nexacro.FieldBaseTextControl);nexacro.FieldBaseTextControl.prototype=_pFieldBaseTextControl;_pFieldBaseTextControl._type_name="FieldBaseTextControl";_pFieldBaseTextControl._is_focus_accept=true;nexacro.FieldBaseIconControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.IconControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pFieldBaseIconControl=nexacro._createPrototype(nexacro.IconControl,nexacro.FieldBaseIconControl);nexacro.FieldBaseIconControl.prototype=_pFieldBaseIconControl;_pFieldBaseIconControl._type_name="FieldBaseIconControl";_pFieldBaseIconControl.on_changeUserStatus=function(_a,_b,_c,_d,_e){if(_b){return _a;}else{if(_a=="pushed"&&(_e=="valid"||_e=="invalid")){return _e;}return _c;}};nexacro.FieldBaseLabelControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.LabelControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._userstatus_overlap={floating:false,invalid:false,valid:false};};var _pFieldBaseLabelControl=nexacro._createPrototype(nexacro.LabelControl,nexacro.FieldBaseLabelControl);nexacro.FieldBaseLabelControl.prototype=_pFieldBaseLabelControl;_pFieldBaseLabelControl._type_name="FieldBaseLabelControl";_pFieldBaseLabelControl._p_floating=false;_pFieldBaseLabelControl._excluded_flex=true;_pFieldBaseLabelControl._is_use_transition=true;_pFieldBaseLabelControl._transition="all 0.15s ease-in-out";_pFieldBaseLabelControl._properties=[{name:"floating"},];_pFieldBaseLabelControl.on_destroy_contents=function(){this._userstatus_overlap=null;};_pFieldBaseLabelControl.onApplyProperties=function(){if(this._control_element){this._control_element.setElementPointerEvents("none");}this.on_apply_floating(true);};_pFieldBaseLabelControl.set_floating=function(_a,_b){if(this._p_floating!=_a){this._p_floating=_a;this.on_apply_floating(_b);}};_pFieldBaseLabelControl.on_apply_floating=function(_a){this.transitionON(!_a);this._changeUserStatus("floating",this._p_floating);};_pFieldBaseLabelControl._shake=function(_a){if(_a&&this._p_floating){this.set_cssclass("shake");}else{this.set_cssclass("");}};_pFieldBaseLabelControl.transitionON=function(_a){if(!this._is_use_transition){return;}if(_a){this._control_element._setElementTransition(this._transition);}else{this._control_element._setElementTransition("");}};_pFieldBaseLabelControl._changeUserStatus=function(_a,_b){if(_a=="valid"&&_b==true){this._userstatus_overlap["invalid"]=false;}else if(_a=="invalid"&&_b==true){this._userstatus_overlap["valid"]=false;}this._userstatus_overlap[_a]=_b;if(this._userstatus_overlap.floating&&(this._userstatus_overlap.invalid||this._userstatus_overlap.valid)){if(this._userstatus_overlap.invalid){nexacro.FieldBaseTextControl.prototype._changeUserStatus.call(this,"floatinginvalid",true);}else{nexacro.FieldBaseTextControl.prototype._changeUserStatus.call(this,"floatingvalid",true);}}else{if(this._userstatus_overlap.floating){nexacro.FieldBaseTextControl.prototype._changeUserStatus.call(this,"floating",true);}else if(this._userstatus_overlap.invalid){nexacro.FieldBaseTextControl.prototype._changeUserStatus.call(this,"invalid",true);}else if(this._userstatus_overlap.valid){nexacro.FieldBaseTextControl.prototype._changeUserStatus.call(this,"valid",true);}else{nexacro.FieldBaseTextControl.prototype._changeUserStatus.call(this,"floatinginvalid",false);nexacro.FieldBaseTextControl.prototype._changeUserStatus.call(this,"floatingvalid",false);nexacro.FieldBaseTextControl.prototype._changeUserStatus.call(this,"floating",false);nexacro.FieldBaseTextControl.prototype._changeUserStatus.call(this,"invalid",false);nexacro.FieldBaseTextControl.prototype._changeUserStatus.call(this,"valid",false);}}var _c=this._status;this._status="";this._changeStatus(_c,true);};nexacro.FieldBaseBox=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.FlexibleComponent.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._setControl();};var _pFieldBaseBox=nexacro._createPrototype(nexacro.FlexibleComponent,nexacro.FieldBaseBox);nexacro.FieldBaseBox.prototype=_pFieldBaseBox;_pFieldBaseBox._firstchild=true;_pFieldBaseBox._type_name="FieldBaseBox";_pFieldBaseBox._layouttype="horizontal";_pFieldBaseBox.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_usesoftkeyboard){this._p_usesoftkeyboard=_a;if(!this._initsoftkeyboard){this._initsoftkeyboard=true;}}};_pFieldBaseBox._getWantLabelLeft=function(){return -1;};_pFieldBaseBox._getWantLabelWidth=function(){return this._getClientWidth();};_pFieldBaseBox.on_keydown_default_action=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;if(_g){_g.on_keydown_default_action(_a,_b,_c,_d,_e,_f);}};_pFieldBaseBox.on_keyup_default_action=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;if(_g){_g.on_keyup_default_action(_a,_b,_c,_d,_e,_f);}};_pFieldBaseBox.on_changeUserStatus=function(_a,_b,_c){if(_b){return _a;}else{return _c;}};_pFieldBaseBox._on_beforekeyinput=function(_a,_b,_c,_d,_e,_f){if(!this._is_alive){return false;}return this._p_parent.on_beforekeyinput_basic_action(_b,_c,_d,_e,_f);};_pFieldBaseBox._beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;if(_f){return this._p_parent.on_beforeinput_process_with_HTMLEvent.call(this,_a,_b,_c,_d,_e);}};_pFieldBaseBox._fix_composition=function(_a,_b,_c){var _d=this.parent;if(_d){return _d._fix_composition(_a,_b,_c);}return _a;};_pFieldBaseBox._apply_setfocus=nexacro._emptyFn;_pFieldBaseBox._recalc_box=nexacro._emptyFn;nexacro.FieldBaseScrollableBox=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.FlexibleComponent.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._setControl();};var _pFieldBaseScrollableBox=nexacro._createPrototype(nexacro.FieldBaseBox,nexacro.FieldBaseScrollableBox);nexacro.FieldBaseScrollableBox.prototype=_pFieldBaseScrollableBox;_pFieldBaseScrollableBox._type_name="FieldBaseScrollableBox";_pFieldBaseScrollableBox._support_component_flex=false;_pFieldBaseScrollableBox._is_scrollable=true;_pFieldBaseScrollableBox._use_translate_scroll=false;_pFieldBaseScrollableBox._use_container_move=true;_pFieldBaseScrollableBox._is_simple_control=false;_pFieldBaseScrollableBox.on_create_control_element=function(_a){return nexacro.Component.prototype.on_create_control_element.call(this,_a);};_pFieldBaseScrollableBox._onResetScrollBar=function(){if(!this._is_scrollable){return;}var _a=this._control_element;if(_a){var _b=this._getHScrollBarSize();var _c=this._getVScrollBarSize();var _d=false;var _e=false;var _f=this._getHScrollBarType();var _g=this._getVScrollBarType();var _h=this.scrolltype;if(_h=="none"){}else{if(_h!="vertical"&&_f!="none"){_e=true;}if(_h!="horizontal"&&_g!="none"){_d=true;}if(this._is_form&&this.getStepCount()>0){_e=false;}}var _i=this._p_parent.getAttachClientTop();var _j=_a.client_left;var _k=_a.client_top;var _l=_a.client_width;var _m=_a.client_height;var _n=_a._zclient_width;var _o=_a._zclient_height;var _p=0,_q=0,_r=0,_s=0;var _t=_a.padding?_a.padding:_a._padding_info;var _u=false;var _v=false;if(_a._apply_client_padding&&_t){_p=_t.left;_q=_t.top;_r=_t.right;_s=_t.bottom;}var _w=_j-_p;var _x=_m+_q+_s+_i;var _y=_l+_p+_r;var _z=_l+_p+_r;var _aa=_k-_q-_i;var _ab=_m+_q+_s+_i;if(_e){this._createHScrollBar(_b);if(_b>0){if(_a.hscroll_limit<=0&&_f!="fixed"){_b=0;}if(_f=="autoindicator"){_x-=_b;this._p_hscrollbar.set_visible(false);}else{this._p_hscrollbar.set_visible(true);}}}else{if(this._p_hscrollbar){this._p_hscrollbar.destroy();this._p_hscrollbar=null;}}if(_d){this._createVScrollBar(_c);if(_c>0){if(_a.vscroll_limit<=0&&_g!="fixed"){_c=0;}if(_g=="autoindicator"){_z-=_c;this._p_vscrollbar.set_visible(false);}else{this._p_vscrollbar.set_visible(true);}}}else{if(this._p_vscrollbar){this._p_vscrollbar.destroy();this._p_vscrollbar=null;}}if(this._p_hscrollbar){if(this._isEnable()&&_b>0&&(_h!="none"&&_h!="vertical")&&_a.hscroll_limit>0){_v=true;}this._p_hscrollbar._setScrollInfo(_w,_x,_y,_b,0,_a.hscroll_limit,this._scroll_default_value,_n,_n,_v,_a.scroll_left);if(!this._p_hscrollbar._is_created){this._p_hscrollbar.on_created(this._getWindow());}}if(this._p_vscrollbar){if(this._isEnable()&&_c>0&&(_h!="none"&&_h!="horizontal")&&_a.vscroll_limit>0){_u=true;}this._p_vscrollbar._setScrollInfo(_z,_aa,_c,_ab,0,_a.vscroll_limit,this._scroll_default_value,_o,_o,_u,_a.scroll_top);if(!this._p_vscrollbar._is_created){this._p_vscrollbar.on_created(this._getWindow());}}this._p_parent._p_hscrollbar=this._p_hscrollbar;this._p_parent._p_vscrollbar=this._p_vscrollbar;}};nexacro.FieldBase=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.FlexibleComponent.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._init_size={f_label:[0,0],label:[0,0],helptext:[0,0],chartext:[0,0]};this._custom_err={};};var _pFieldBase=nexacro._createPrototype(nexacro.FlexibleComponent,nexacro.FieldBase);nexacro.FieldBase.prototype=_pFieldBase;_pFieldBase._type_name="FieldBase";_pFieldBase._p_labelposition="overlap";_pFieldBase._p_labelfloatingfixed=false;_pFieldBase._p_labeltext="";_pFieldBase._p_labelgap=undefined;_pFieldBase._p_helpertext="";_pFieldBase._p_invalidtext="";_pFieldBase._p_usehelpertext=false;_pFieldBase._p_usecharcount=false;_pFieldBase._p_displaynulltext="";_pFieldBase._p_headerheight=undefined;_pFieldBase._p_footerheight=undefined;_pFieldBase._p_contentheight=undefined;_pFieldBase._properties=[{name:"labelposition"},{name:"labelfloatingfixed"},{name:"labeltext"},{name:"labelgap"},{name:"helpertext"},{name:"invalidtext"},{name:"usehelpertext"},{name:"usecharcount"},{name:"displaynulltext"},{name:"value"},{name:"headerheight"},{name:"footerheight"},{name:"contentheight"},{name:"usesoftkeyboard"},];_pFieldBase._layouttype="table";_pFieldBase._outside_leftgap=0;_pFieldBase._overlap_leftgap=9;_pFieldBase._normal_label_leftgap=0;_pFieldBase._charcnt_text="0 / 0";_pFieldBase._charcnt_width=50;_pFieldBase._templatearea="\"L L\" \"B B\" \"M C\"";_pFieldBase._boxcontrol_socket={instance_name:"",id:""};_pFieldBase._label=null;_pFieldBase._box=null;_pFieldBase._helptxt_control=null;_pFieldBase._charcnt_control=null;_pFieldBase._nulltext_control=null;_pFieldBase._is_invalid_status=false;_pFieldBase._is_valid_status=false;_pFieldBase._is_creation_over=false;_pFieldBase._is_use_esc_cancelvalue=false;_pFieldBase.on_create_contents=function(_a){var _b=this.getElement();if(_b){var _c=this._boxcontrol_socket.instance_name;if(!_c){return;}var _d=this._boxcontrol_socket.id;var _e=this._box=new nexacro[_c](_d,0,0,this._adjust_width,this._adjust_height,null,null,null,null,null,null,this,_a);if(!this._isFlexible()){_e._excluded_flex=true;}_e.createComponent(true);this._updateHelperText(true);this._updateCharCount(true);var _f=this._label=new nexacro.FieldBaseLabelControl("label",0,0,0,0,null,null,null,null,null,null,this);_f.createComponent(true);if(this._isFlexible()){_b.setElementLayoutType(this._layouttype);_b.setElementTableTemplateArea(this._templatearea);var _g=_e.getElement();_e._update_layoutbasis();_g.setElementTableCellArea("B");}this._refreshLabel();this._initAreaSize();this._recalc_contents("create");}};_pFieldBase._updateHelperText=function(_a){if(this._control_element){if(this._p_usehelpertext&&!this._helptxt_control){var _b=this._helptxt_control=new nexacro.FieldBaseTextControl("helpertext",0,0,0,0,null,null,null,null,null,null,this);if(!this._isFlexible()){_b._excluded_flex=true;}_b.createComponent(_a);if(this._isFlexible()){var _c=_b.getElement();_b._update_layoutbasis();_c.setElementTableCellArea("M");}this._refreshErrorHelper();if(!_a){this._initHelperTextSize();}}else if(this._p_usehelpertext){this._refreshErrorHelper();}else{if(!this._p_usehelpertext){this._destroyHelperText();}this._initHelperTextSize();}}};_pFieldBase._updateCharCount=function(_a){var _b=this.getElement();if(_b){if(this._p_usecharcount&&!this._charcnt_control){var _c=this._charcnt_control=new nexacro.FieldBaseTextControl("charcounttext",0,0,0,0,null,null,null,null,null,null,this);this._charcnt_control._type_name="StaticControl";if(!this._isFlexible()){_c._excluded_flex=true;}_c.createComponent(_a);if(this._isFlexible()){var _d=_c.getElement();_c._update_layoutbasis();_d.setElementTableCellArea("C");}this.on_apply_charcnt();if(!_a){this._initCharCountSize();}}else if(this._p_usecharcount){this._initCharCountSize();}else{if(!this._p_usecharcount){this._destroyCharCount();}this._initCharCountSize();}}};_pFieldBase._updateNullTextControl=function(_a){var _b=this.getElement();if(_b){if(this._p_displaynulltext&&!this._nulltext_control){var _c=this._nulltext_control=new nexacro.FieldBaseTextControl("nulltext",0,0,0,0,null,null,null,null,null,null,this);this._nulltext_control._type_name="StaticControl";_c._excluded_flex=true;_c.set_text(this._getStringResourceProperty(this._p_displaynulltext));_c.createComponent(_a);_c.getElement().setElementPointerEvents("none");}else if(this._p_displaynulltext){this._nulltext_control.set_text(this._getStringResourceProperty(this._p_displaynulltext));}else if(!this._p_displaynulltext){this._destroyNullTextControl();}}};_pFieldBase._destroyHelperText=function(){if(this._helptxt_control){this._helptxt_control.destroy();this._helptxt_control=null;}};_pFieldBase._destroyCharCount=function(){if(this._charcnt_control){this._charcnt_control.destroy();this._charcnt_control=null;}};_pFieldBase._destroyNullTextControl=function(){if(this._nulltext_control){this._nulltext_control.destroy();this._nulltext_control=null;}};_pFieldBase._initAreaSize=function(){this._initLabelTextSize();this._initHelperTextSize();this._initCharCountSize();this._on_init_areasize();};_pFieldBase.getAttachClientTop=function(){var _a;switch(this._p_labelposition){case "inside":_a=this.getFloatingLabelHeight();break;case "overlap":_a=this.getFloatingLabelHeight()/2;break;case "outside":_a=0;break;}return _a;};_pFieldBase._onRecalcScrollSize=function(){this._box._onRecalcScrollSize();};_pFieldBase._onResetScrollBar=function(){this._box._onResetScrollBar();};_pFieldBase._on_init_areasize=function(){if(this._box&&this._box instanceof nexacro.FieldBaseScrollableBox){var _a=this.getAttachClientTop();var _b=this._box.getElement();_b._setAttachCliendTop(_a);this._onRecalcScrollSize();this._onResetScrollBar();}};_pFieldBase._initLabelTextSize=function(){var _a=this._label;var _b=_a._p_floating;if(_b==true){this._init_size.f_label=_a._on_getFitSize();_a.set_floating(false,true);this._init_size.label=_a._on_getFitSize();_a.set_floating(true,true);}else{this._init_size.label=_a._on_getFitSize();_a.set_floating(true,true);this._init_size.f_label=_a._on_getFitSize();_a.set_floating(false,true);}};_pFieldBase._initHelperTextSize=function(){this._init_size.helptext=(this._helptxt_control!=null)?this._helptxt_control._on_getFitSize():[0,0];};_pFieldBase._initCharCountSize=function(){this._init_size.chartext=(this._charcnt_control!=null)?this._charcnt_control._on_getFitSize():[0,0];};_pFieldBase.on_created_contents=function(_a){this._box.on_created(_a);if(this._helptxt_control){this._helptxt_control.on_created(_a);}if(this._charcnt_control){this._charcnt_control.on_created(_a);}this._label.on_created(_a);this.on_apply_usesoftkeyboard();};_pFieldBase.on_after_created=function(){this.on_apply_labelposition();this.on_apply_usehelpertext();this.on_apply_usecharcount();this.on_apply_displaynulltext();this._box._setEventHandler("onclick",this._on_onclick,this);this._refreshValidStatus(true,true,true);this.on_after_created_ext();this._is_creation_over=true;};_pFieldBase.on_after_created_ext=function(){};_pFieldBase.on_create_contents_command=function(){this.on_apply_usesoftkeyboard();var _a=this._box.createCommand();if(this._helptxt_control){_a+=this._helptxt_control.createCommand();}if(this._charcnt_control){_a+=this._charcnt_control.createCommand();}_a+=this._label.createCommand();return _a;};_pFieldBase.on_attach_contents_handle=function(_a){this._box.attachHandle(_a);if(this._helptxt_control){this._helptxt_control.attachHandle(_a);}if(this._charcnt_control){this._charcnt_control.attachHandle(_a);}this._label.attachHandle(_a);this._label._setAccessibilityStatHidden(true);};_pFieldBase.on_destroy_contents=function(){if(this._box){this._box.destroy();this._box=null;}this._destroyCharCount();this._destroyHelperText();this._destroyNullTextControl();if(this._label){this._label.destroy();this._label=null;}this._init_size=null;this._custom_err=null;this._p_hscrollbar=null;this._p_vscrollbar=null;};_pFieldBase._recalc_contents=function(_a){var _b=this.getElement();if(_b){var _c=this._box;var _d=this._helptxt_control;var _e=this._charcnt_control;var _f=0;var _g=this.getFloatingLabelSpace();var _h=this._getHelperLineHeight();if(this._p_usecharcount){_f=(this._charcnt_text!=""?this._charcnt_width:0);if(_e){var _i=_e._on_getFitSize()[0];if(_f<_i){_f=_i;}}}if(this._p_headerheight){_g=this._p_headerheight;}if(this._p_footerheight){_h=this._p_footerheight;}if(this._p_contentheight){this.set_height(this._p_contentheight+_h+_g);}if(this._isFlexible()){_b.setElementTableTemplate(_g+"px 1fr "+_h+"px / 1fr "+_f+"px");if(_c){_c.resize(this._getClientWidth(),this._adjust_height-_h-_g);}if(_d){_d.resize(this._getClientWidth()-_f,_h);}if(_e){_e.resize(_f,_h);}}else{if(_c){_c.move(0,_g,this._getClientWidth(),this._getClientHeight()-_h-_g);}if(_d){_d.move(0,this._getClientHeight()-_h,this._getClientWidth()-_f,_h);}if(_e){_e.move(this._getClientWidth()-_f,this._getClientHeight()-_h,_f,_h);}}this._recalcLabel(_a);}};_pFieldBase._recalcCharCount=function(){var _a=this.getElement();if(_a&&this._p_usecharcount){var _b=this._charcnt_control;var _c=(this._charcnt_text!=""?this._charcnt_width:0);var _d=this._helptxt_control;var _e=this.getFloatingLabelSpace();var _f=this._getHelperLineHeight();if(this._p_headerheight!=null){_e=this._p_headerheight;}if(this._p_footerheight!=null){_f=this._p_footerheight;}if(_b){var _g=_b._on_getFitSize()[0];if(_c<_g){_c=_g;if(this._isFlexible()){_a.setElementTableTemplate(_e+"px 1fr "+_f+"px / 1fr "+_c+"px");if(_d){_d.resize(this._getClientWidth()-_c,_f);}if(_b){_b.resize(_c,_f);}}else{if(_d){_d.move(0,this._getClientHeight()-_f,this._getClientWidth()-_c,_f);}if(_b){_b.move(this._getClientWidth()-_c,this._getClientHeight()-_f,_c,_f);}}}}}};_pFieldBase._recalcLabel=function(_a){var _b=this._label;if(_b){var _c=0,_d=0,_e=0,_f=0;var _g=this._box;var _h=this._nulltext_control;var _i=_g._getCurrentStyleBorder();var _j=_i?_i.left._width:0;var _k=_i?_i.top._width:0;var _l=_i?_i.bottom._width:0;var _m=(this._p_headerheight!=null)?this._p_headerheight:0;if(this._p_labelposition!="inside"){if(this._p_headerheight!=null){_m=this._p_headerheight-this.getFloatingLabelSpace();}}if(_b._p_floating){var _n=this._init_size.f_label;_e=_n[0];_f=_n[1];var _o,_p;var _q=_g._adjust_height-_k-_l;if(this._p_labelposition=="outside"){_d=_m;_c=this._outside_leftgap;_o=_m+this.getFloatingLabelSpace()+_k;_p=_q;}else if(this._p_labelposition=="overlap"){_d=_m;_c=this._overlap_leftgap;_o=_m+this.getFloatingLabelSpace()+_k;_p=_q;}else if(this._p_labelposition=="inside"){_d=_k+_m;_c=this._overlap_leftgap;_o=_d+this.getFloatingLabelHeight();_p=_q-this.getFloatingLabelHeight();}if(this._p_labelgap!=undefined){_c=parseInt(this._p_labelgap);}if(_h){_h.set_visible(this._p_value==null&&!this._isFocused());var _r=_g._getWantLabelLeft();var _s=_o;var _t=_g._getWantLabelWidth();var _u=_p;if(_r==-1){_r=this._normal_label_leftgap;}_h.move(_r,_s,_t,_u);}}else{_c=_g._getWantLabelLeft();_d=_m+this.getFloatingLabelSpace();_e=_g._getWantLabelWidth();if(_e>this._init_size.label[0]){_e=this._init_size.label[0];}_f=_g._adjust_height;}if(_a!="floating"&&_a!="value"){_b.transitionON(false);}if(_c==-1){_c=this._normal_label_leftgap;}_b.move(_c,_d,_e,_f);}};_pFieldBase.on_apply_prop_enable=function(_a){var _b=this._box;if(_b){_b._setEnable(_a);}};_pFieldBase._setLabelFloating=function(_a,_b,_c){if(this._label){while(!_a){if(this._p_labelfloatingfixed){_a=true;break;}if(_b){_a=this._isContainsText();}break;}this._label.set_floating(_a,_c);this._refreshLabel("floating");}};_pFieldBase._isContainsText=function(){return false;};_pFieldBase._setCharCount=function(_a,_b){this._charcnt_text=_a+" / "+_b;this.on_apply_charcnt();};_pFieldBase.on_apply_charcnt=function(){if(this._charcnt_control){var _a=this._charcnt_control.text.length!=this._charcnt_text;this._charcnt_control.set_text(this._charcnt_text);if(_a){this._recalcCharCount();}}};_pFieldBase.set_headerheight=function(_a){_a=parseInt(_a);if(this._p_headerheight!=_a){this._p_headerheight=_a;this.on_apply_headerheight();}};_pFieldBase.on_apply_headerheight=function(){this._recalc_contents();};_pFieldBase.set_footerheight=function(_a){_a=parseInt(_a);if(this._p_footerheight!=_a){this._p_footerheight=_a;this.on_apply_footerheight();}};_pFieldBase.on_apply_footerheight=function(){this._recalc_contents();};_pFieldBase.set_contentheight=function(_a){_a=parseInt(_a);if(this._p_contentheight!=_a){this._p_contentheight=_a;this.on_apply_contentheight();}};_pFieldBase.on_apply_contentheight=function(){this._recalc_contents();};_pFieldBase.set_invalidtext=function(_a){_a=nexacro._toString(_a);this._p_invalidtext=_a;};_pFieldBase._invalidStatus=function(_a,_b){if(!this._is_creation_over){_b=true;}if(this._is_invalid_status!=_a){this._is_invalid_status=_a;var _c=this._label;this._refreshValidStatus(true,true,false);if(_c){_c._shake(false);}this._refreshErrorHelper();this._recalc_contents();if(_c){if(!_b){_c._shake(_a);}}}else if(_a&&!_b){this._label._shake(true);}};_pFieldBase._validStatus=function(_a,_b){if(this._is_valid_status!=_a){this._is_valid_status=_a;var _c=this._label;this._refreshValidStatus(true,true,false);if(_c){_c._shake(false);}this._refreshErrorHelper();this._recalc_contents();if(_c&&!_b){_c._shake(_a);}}else if(_a&&!_b){if(this._label){this._label._shake(true);}}};_pFieldBase.on_invalid=function(_a){var _b="value_invalid";if(_a){this.on_fire_oninvalid();}this._custom_err[_b]=nexacro._getErrorMessge(_b);this._invalidStatus(true,!_a);this.on_invalid_basic_action();};_pFieldBase.on_invalid_basic_action=function(){};_pFieldBase.on_valid=function(_a){this._validStatus(true,true);this.on_valid_basic_action();};_pFieldBase.on_fire_oninvalid=function(){if(this.oninvalid&&this.oninvalid._has_handlers){var _a=new nexacro.EventInfo(this,"oninvalid");this.oninvalid._fireEvent(this,_a);}};_pFieldBase.on_valid_basic_action=function(){};_pFieldBase._changeValidStatusChild=function(_a,_b){};_pFieldBase._detectStatus=function(_a,_b){if(_a=="disabled"){return;}var _c=this._box;var _d=this._label;if(_d){_d._changeStatus(_a,_b);}if(_c){var _e=_c._status;_c._changeStatus(_a,_b);if(_e!=_c._status){this._refreshErrorHelper();this._recalc_contents();}}};_pFieldBase.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){nexacro.FlexibleComponent.prototype.on_focus_basic_action.call(this,_a,_b,_c,_d,_e,_f);this._setLabelFloating(true,true);this._detectStatus(this._status,true);if(this._nulltext_control){this._nulltext_control.set_visible(false);}};_pFieldBase.on_killfocus_basic_action=function(_a,_b){nexacro.FlexibleComponent.prototype.on_killfocus_basic_action.call(this,_a,_b);this._setLabelFloating(false,true);if(this._nulltext_control){this._nulltext_control.set_visible(this._p_value==null);}};_pFieldBase.on_changeStatus=function(_a,_b,_c,_d,_e){this._detectStatus(_a,_b);return _c;};_pFieldBase._refreshErrorHelper=function(){var _a=this._helptxt_control;if(_a){this._refreshValidStatus(false,false,true);if(this._is_invalid_status){_a.set_text(this._getInvalidText("value_invalid"));}else if(this._is_valid_status){_a.set_text("");}else{_a.set_text(this._getStringResourceProperty(this._p_helpertext));}}};_pFieldBase._refreshValidStatus=function(_a,_b,_c){var _d=this._box;var _e=this._label;var _f=this._helptxt_control;if(this._is_invalid_status){if(_a&&_e){_e._changeUserStatus("invalid",true);}if(_b&&_d){_d._changeUserStatus("invalid",true);this._changeValidStatusChild("invalid",true);}if(_c&&_f){_f._changeUserStatus("invalid",true);}}else if(this._is_valid_status){if(_a&&_e){_e._changeUserStatus("valid",true);}if(_b&&_d){_d._changeUserStatus("valid",true);this._changeValidStatusChild("valid",true);}if(_c&&_f){_f._changeUserStatus("valid",true);}}else{if(_a&&_e){_e._changeUserStatus("invalid",false);_e._changeUserStatus("valid",false);}if(_b&&_d){_d._changeUserStatus("invalid",false);_d._changeUserStatus("valid",false);this._changeValidStatusChild("invalid",false);this._changeValidStatusChild("valid",false);}if(_c&&_f){_f._changeUserStatus("invalid",false);_f._changeUserStatus("valid",false);}}};_pFieldBase.getValidStatus=function(){if(this._is_invalid_status){return "invalid";}else if(this._is_valid_status){return "valid";}return "";};_pFieldBase._getInvalidText=function(_a){if(this._p_invalidtext){return this._getStringResourceProperty(this._p_invalidtext);}return this._custom_err[_a]?this._custom_err[_a]:"";};_pFieldBase.on_change_containerRect=function(_a,_b){this._recalc_contents("onsize");};_pFieldBase.LabelFor=function(_a){if(this._label){this._label.For(_a);}};_pFieldBase.getFloatingLabelHeight=function(){var _a=this._init_size.f_label;return _a[1];};_pFieldBase.getFloatingLabelSpace=function(){if(this._p_labelposition!="inside"){var _a=this._init_size.f_label;if(_a[1]>0){if(this._p_labelposition=="outside"){return _a[1];}else{return (_a[1]/2);}}}return 0;};_pFieldBase._getHelperLineHeight=function(){var _a=this._init_size.helptext;var _b=this._init_size.chartext;return Math.max(_a[1],_b[1]);};_pFieldBase.set_labelfloatingfixed=function(_a){_a=nexacro._toBoolean(_a);if(this._p_labelfloatingfixed!=_a){this._p_labelfloatingfixed=_a;this.on_apply_labelfloatingfixed();}};_pFieldBase.on_apply_labelfloatingfixed=function(){if(this._p_labelfloatingfixed){this._setLabelFloating(true,true,true);}else{this._setLabelFloating(false,true,true);}};_pFieldBase.set_labelposition=function(_a){if(this._p_labelposition!=_a){switch(_a){case "overlap":case "outside":case "inside":this._p_labelposition=_a;this.on_apply_labelposition();break;}}};_pFieldBase.on_apply_labelposition=function(){var _a=this.getElement();if(_a){if(this._is_created_contents){this._initAreaSize();}this._refreshAll();}};_pFieldBase.set_usehelpertext=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usehelpertext!=_a){this._p_usehelpertext=_a;this.on_apply_usehelpertext();}};_pFieldBase.on_apply_usehelpertext=function(){this._updateHelperText();this._recalc_contents();};_pFieldBase.set_helpertext=function(_a){_a=nexacro._toString(_a);if(this._p_helpertext!=_a){this._p_helpertext=_a;this.on_apply_usehelpertext();}};_pFieldBase.set_usecharcount=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usecharcount!=_a){this._p_usecharcount=_a;this.on_apply_usecharcount();}};_pFieldBase.on_apply_usecharcount=function(){this._updateCharCount();this._recalc_contents();};_pFieldBase._refreshAll=function(){this._label.on_apply_floating(true);this._recalc_contents();};_pFieldBase.set_labeltext=function(_a){_a=nexacro._toString(_a);if(this._p_labeltext!=_a){this._p_labeltext=_a;this._refreshLabel();}};_pFieldBase.set_labelgap=function(_a){if(this._p_labelgap!=_a){this._p_labelgap=_a;this._recalcLabel();}};_pFieldBase.set_displaynulltext=function(_a){_a=nexacro._toString(_a);if(this._p_displaynulltext!=_a){this._p_displaynulltext=_a;this.on_apply_displaynulltext();}};_pFieldBase.on_apply_displaynulltext=function(){if(this._box){this._updateNullTextControl();this._setLabelFloating(this._isContainsText());this._recalcLabel();}};_pFieldBase.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoskip!=_a){this._p_autoskip=_a;this.on_apply_autoskip(_a);}};_pFieldBase.on_apply_autoskip=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementAutoSkip(_a);}}};_pFieldBase.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_usesoftkeyboard){this._p_usesoftkeyboard=_a;if(!this._initsoftkeyboard){this._initsoftkeyboard=true;}this.on_apply_usesoftkeyboard();}};_pFieldBase.on_apply_usesoftkeyboard=function(){var _a=this._getInputElement();if(_a&&!this._onlydisplay){var _b=_a.parent_elem.linkedcontrol;_b.set_usesoftkeyboard(_b._getUseSoftKeyboardValue(_b._initsoftkeyboard));_a.setElementUseSoftKeyboard(this._getUseSoftKeyboardValue(this._initsoftkeyboard));}};_pFieldBase._refreshLabel=function(_a){var _b=this._label;if(_b){var _c=_b.text;var _d=this._getStringResourceProperty(this._p_labeltext);if(_c!=_d){_b.set_text(_d);this._initLabelTextSize();this._on_init_areasize();}this._recalcLabel(_a);if(!_c){this._recalc_contents();}}};_pFieldBase.set_value=function(_a){if(this._p_value!=_a){this._p_value=_a;this.on_apply_value();}};_pFieldBase.on_apply_value=function(){this._setLabelFloating(this._p_value!=null,undefined,true);this._refreshLabel();};_pFieldBase._isChar=function(_a){switch(_a){case 9:case 25:case 27:case 144:case 145:return false;}if((_a>=16&&_a<=21)||(_a>=33&&_a<=40)||(_a>=91&&_a<=93)||(_a>=112&&_a<=123)){return false;}return true;};_pFieldBase._isFocused=function(){var _a=this._getOwnerFrame();if(!_a){return false;}var _b=false;var _c=this._getWindow()._getLastModalFrame();if(_c&&!_c._contains(this)){_b=true;}if(_b){return false;}if(this._focused!=undefined){return this._focused;}var _d=this._find_lastFocused();if(_d instanceof nexacro.Div){_d=_d._getLastFocused();}var _e=true;if(_d!=this){_e=false;}this._focused=_e;return _e;};_pFieldBase._on_killfocus=function(_a,_b){this._focused=undefined;nexacro.FlexibleComponent.prototype._on_killfocus.call(this,_a,_b);};_pFieldBase._on_focus=function(_a,_b,_c,_d,_e,_f){this._focused=undefined;nexacro.FlexibleComponent.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);};_pFieldBase._on_onclick=function(_a,_b){this.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey);};_pFieldBase.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this.on_apply_displaynulltext(this._getStringResourceProperty(this._p_displaynulltext));this._refreshLabel();this.on_apply_usehelpertext();this._refreshErrorHelper();};var _pEditPtype=nexacro.Edit.prototype;_pFieldBase.on_deactivate_process=_pEditPtype.on_deactivate_process;_pFieldBase.on_keyinput_basic_before_process=_pEditPtype.on_keyinput_basic_before_process;_pFieldBase.on_killfocus_basic_process=_pEditPtype.on_killfocus_basic_process;_pFieldBase.on_keyinput_basic_process=_pEditPtype.on_keyinput_basic_process;_pFieldBase.on_beforekeyinput_basic_action=_pEditPtype.on_beforekeyinput_basic_action;_pFieldBase.on_keyinput_basic_action=_pEditPtype.on_keyinput_basic_action;_pFieldBase._beforeinput_process_with_HTMLEvent=_pEditPtype._beforeinput_process_with_HTMLEvent;_pFieldBase.on_beforeinput_process_with_HTMLEvent=_pEditPtype.on_beforeinput_process_with_HTMLEvent;_pFieldBase._beforeinput_process_with_NexacroInputEvent=_pEditPtype._beforeinput_process_with_NexacroInputEvent;_pFieldBase.on_beforeinput_process_with_NexacroInputEvent=_pEditPtype.on_beforeinput_process_with_NexacroInputEvent;_pEditPtype=null;nexacro._defineProperties(_pFlexibleComponent,_pFlexibleComponent._properties);nexacro._defineProperties(_pFieldBaseLabelControl,_pFieldBaseLabelControl._properties);nexacro._defineProperties(_pFieldBase,_pFieldBase._properties);delete _pFlexibleComponent;delete _pTextControl;delete _pIconControl;delete _pLabelControl;delete _pFieldBaseTextControl;delete _pFieldBaseIconControl;delete _pFieldBaseLabelControl;delete _pFieldBase;delete _pFieldBaseBox;};if(nexacro._Browser!="Runtime"&&!nexacro.FlexibleControlElement){"use strict";var _process=true;nexacro.FlexibleControlElement=function(_a){nexacro.ControlElement.call(this,_a);this.parent=_a;this.parent_elem=_a;};var _pFlexibleControlElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.FlexibleControlElement);nexacro.FlexibleControlElement.prototype=_pFlexibleControlElement;_pFlexibleControlElement._type_name="FlexibleControlElement";_pFlexibleControlElement._is_flexible=true;_pFlexibleControlElement._layoutbasis=null;_pFlexibleControlElement._layouttype="horizontal";_pFlexibleControlElement._layouthorizontalgap=undefined;_pFlexibleControlElement._layoutverticalgap=undefined;_pFlexibleControlElement._flexmainaxisalign="";_pFlexibleControlElement._flexcrossaxisalign="";_pFlexibleControlElement._flexcrossaxiswrapalign="";_pFlexibleControlElement._flexwrap="";_pFlexibleControlElement._tablecellalign="";_pFlexibleControlElement._tablecellhalign="";_pFlexibleControlElement._tablecellvalign="";_pFlexibleControlElement._tablecellincompalign="";_pFlexibleControlElement._tablecellincomphalign="";_pFlexibleControlElement._tablecellincompvalign="";_pFlexibleControlElement._tabletemplate="";_pFlexibleControlElement._tabletemplatearea="";_pFlexibleControlElement._tabledirection="";_pFlexibleControlElement._layoutspacing="";_pFlexibleControlElement._refreshControl=function(_a,_b){nexacro.ControlElement.prototype._refreshControl.call(this,_a,_b);var _a=this.handle;switch(this._layouttype){case "horizontal":case "vertical":nexacro.__setDOMStyle_CompLayoutType(_a.style,this._layouttype);if(this._layouthorizontalgap>-1||this._layoutverticalgap>-1){nexacro.__setDOMStyle_LayoutGap(_a.style,this._layouthorizontalgap,this._layoutverticalgap);}if(this._layoutspacing){nexacro.__setDOMStyle_LayoutSpacing(_a.style,this._layoutspacing,this.rtl);}if(this._flexmainaxisalign){nexacro.__setDOMStyle_FlexMainAxisAlign(_a.style,this._flexmainaxisalign);}if(this._flexcrossaxisalign){nexacro.__setDOMStyle_FlexCrossAxisAlign(_a.style,this._flexcrossaxisalign);}if(this._flexcrossaxiswrapalign){nexacro.__setDOMStyle_FlexCrossAxisWrapAlign(_a.style,this._flexcrossaxiswrapalign);}if(this._flexwrap){nexacro.__setDOMStyle_FlexWrap(_a.style,this._flexwrap);}break;case "table":nexacro.__setDOMStyle_CompLayoutType(_a.style,this._layouttype);if(this._layouthorizontalgap>-1||this._layoutverticalgap>-1){nexacro.__setDOMStyle_LayoutGap(_a.style,this._layouthorizontalgap,this._layoutverticalgap);}if(this._layoutspacing){nexacro.__setDOMStyle_LayoutSpacing(_a.style,this._layoutspacing,this.rtl);}if(this._tablecellhalign){nexacro.__setDOMStyle_TableCellHAlign(_a.style,this._tablecellhalign);}if(this._tablecellvalign){nexacro.__setDOMStyle_TableCellVAlign(_a.style,this._tablecellvalign);}if(this._tablecellincomphalign){nexacro.__setDOMStyle_TableCellinCompHAlign(_a.style,this._tablecellincomphalign);}if(this._tablecellincompvalign){nexacro.__setDOMStyle_TableCellinCompVAlign(_a.style,this._tablecellincompvalign);}if(this._tabletemplate){nexacro.__setDOMStyle_TableTemplate(_a.style,this._tabletemplate);}if(this._tabletemplatearea){nexacro.__setDOMStyle_TableTemplateArea(_a.style,this._tabletemplatearea);}if(this._tabledirection){nexacro.__setDOMStyle_TableDirection(_a.style,this._tabledirection);}break;default:nexacro.__setDOMStyle_LayoutType(_a.style,this._layouttype);if(this._layouthorizontalgap>-1||this._layoutverticalgap>-1){nexacro.__clearDOMStyle_LayoutGap(_a.style);}if(this._layoutspacing){nexacro.__clearDOMStyle_LayoutSpacing(_a.style);}break;}};_pFlexibleControlElement.setElementPadding=function(_a){if(this.padding!=_a){this.padding=_a;this.onApplyPadding();}};_pFlexibleControlElement.onApplyPadding=function(){if(this._apply_client_padding){var _a=this.handle;if(_a){var _b=this.padding?this.padding:this._padding_info;nexacro.__setDOMStyle_PaddingObject(_a.style,_b,this.rtl);}}};_pFlexibleControlElement._refreshCommonStyleProps=function(_a){nexacro.ControlElement.prototype._refreshCommonStyleProps.call(this,_a);this.onApplyPadding();};_pFlexibleControlElement.setElementStatus=function(_a){if(this.status!=_a){nexacro.ControlElement.prototype.setElementStatus.call(this,_a);this.onApplyPadding();}};_pFlexibleControlElement.setElementUserStatus=function(_a){if(this.userstatus!=_a){nexacro.ControlElement.prototype.setElementUserStatus.call(this,_a);this.onApplyPadding();}};_pFlexibleControlElement._getCommonStyleStr=function(){var _a=nexacro.ControlElement.prototype._getCommonStyleStr.call(this);if(this._apply_client_padding){var _b=this.padding?this.padding:this._padding_info;_a+=nexacro.__getHTMLStyle_PaddingObject(_b,this.rtl);}switch(this._layouttype){case "horizontal":case "vertical":_a+=nexacro.__getHTMLStyle_CompLayoutType(this._layouttype);if(this._layouthorizontalgap>-1||this._layoutverticalgap>-1){_a+=nexacro.__getHTMLStyle_LayoutGap(this._layouthorizontalgap,this._layoutverticalgap);}if(this._layoutspacing){_a+=nexacro.__getHTMLStyle_LayoutSpacing(this._layoutspacing,this.rtl);}if(this._flexmainaxisalign){_a+=nexacro.__getHTMLStyle_FlexMainAxisAlign(this._flexmainaxisalign);}if(this._flexcrossaxisalign){_a+=nexacro.__getHTMLStyle_FlexCrossAxisAlign(this._flexcrossaxisalign);}if(this._flexcrossaxiswrapalign){_a+=nexacro.__getHTMLStyle_FlexCrossAxisWrapAlign(this._flexcrossaxiswrapalign);}if(this._flexwrap){_a+=nexacro.__getHTMLStyle_FlexWrap(this._flexwrap);}break;case "table":_a+=nexacro.__getHTMLStyle_CompLayoutType(this._layouttype);if(this._layouthorizontalgap>-1||this._layoutverticalgap>-1){_a+=nexacro.__getHTMLStyle_LayoutGap(this._layouthorizontalgap,this._layoutverticalgap);}if(this._layoutspacing){_a+=nexacro.__getHTMLStyle_LayoutSpacing(this._layoutspacing,this.rtl);}if(this._tablecellhalign){_a+=nexacro.__getHTMLStyle_TableCellHAlign(this._tablecellhalign);}if(this._tablecellvalign){_a+=nexacro.__getHTMLStyle_TableCellVAlign(this._tablecellvalign);}if(this._tablecellincomphalign){_a+=nexacro.__getHTMLStyle_TableCellinCompHAlign(this._tablecellincomphalign);}if(this._tablecellincompvalign){_a+=nexacro.__getHTMLStyle_TableCellinCompVAlign(this._tablecellincompvalign);}if(this._tabletemplate){_a+=nexacro.__getHTMLStyle_TableTemplate(this._tabletemplate);}if(this._tabletemplatearea){_a+=nexacro.__getHTMLStyle_TableTemplateArea(this._tabletemplatearea);}if(this._tabledirection){_a+=nexacro.__getHTMLStyle_TableDirection(this._tabledirection);}break;}return _a;};_pFlexibleControlElement.setElementLayoutType=function(_a){if(this._layouttype!=_a){this._layouttype=_a;var _b=this.handle;if(_b){nexacro.__setDOMStyle_LayoutType(_b.style,_a);}}};_pFlexibleControlElement.setElementLayoutHorizontalGap=function(_a){if(this._layouthorizontalgap!=_a){this._layouthorizontalgap=_a;var _b=this.handle;if(_b){nexacro.__setDOMStyle_LayoutGap(_b.style,_a,this._layoutverticalgap);}}};_pFlexibleControlElement.setElementLayoutVerticalGap=function(_a){if(this._layoutverticalgap!=_a){this._layoutverticalgap=_a;var _b=this.handle;if(_b){nexacro.__setDOMStyle_LayoutGap(_b.style,this._layouthorizontalgap,_a);}}};_pFlexibleControlElement.setElementFlexMainAxisAlign=function(_a){if(this._flexmainaxisalign!=_a){this._flexmainaxisalign=_a;var _b=this.handle;if(_b){nexacro.__setDOMStyle_FlexMainAxisAlign(_b.style,_a);}}};_pFlexibleControlElement.setElementFlexCrossAxisAlign=function(_a){if(this._flexcrossaxisalign!=_a){this._flexcrossaxisalign=_a;var _b=this.handle;if(_b){nexacro.__setDOMStyle_FlexCrossAxisAlign(_b.style,_a);}}};_pFlexibleControlElement.setElementFlexCrossAxisWrapAlign=function(_a){if(this._flexcrossaxiswrapalign!=_a){this._flexcrossaxiswrapalign=_a;var _b=this.handle;if(_b){nexacro.__setDOMStyle_FlexCrossAxisWrapAlign(_b.style,_a);}}};_pFlexibleControlElement.setElementFlexWrap=function(_a){if(this._flexwrap!=_a){this._flexwrap=_a;var _b=this.handle;if(_b){nexacro.__setDOMStyle_FlexWrap(_b.style,_a);}}};_pFlexibleControlElement.setElementLayoutSpacing=function(_a){if(this._layoutspacing!=_a){this._layoutspacing=_a;var _b=this.handle;if(_b){nexacro.__setDOMStyle_LayoutSpacing(_b.style,_a,this.rtl);}}};_pFlexibleControlElement.setElementTableCellAlign=function(_a){if(this._tablecellalign!=_a){this._tablecellalign=_a;var _b=this._parseLayoutCellAlign(_a);if(_b&&_b.length==2){this._tablecellhalign=_b[0];this._tablecellvalign=_b[1];}var _c=this.handle;if(_c){if(this._tablecellhalign){nexacro.__setDOMStyle_TableCellHAlign(_c.style,this._tablecellhalign);}if(this._tablecellvalign){nexacro.__setDOMStyle_TableCellVAlign(_c.style,this._tablecellvalign);}}}};_pFlexibleControlElement.setElementTableCellinCompAlign=function(_a){if(this._tablecellincompalign!=_a){this._tablecellincompalign=_a;var _b=this._parseLayoutCellAlign(_a);if(_b&&_b.length==2){this._tablecellincomphalign=_b[0];this._tablecellincompvalign=_b[1];}var _c=this.handle;if(_c){if(this._tablecellincomphalign){nexacro.__setDOMStyle_TableCellinCompHAlign(_c.style,this._tablecellincomphalign);}if(this._tablecellincompvalign){nexacro.__setDOMStyle_TableCellinCompHAlign(_c.style,this._tablecellincompvalign);}}}};_pFlexibleControlElement.setElementTableDirection=function(_a){if(this._tabledirection!=_a){this._tabledirection=_a;var _b=this.handle;if(_b){nexacro.__setDOMStyle_TableDirection(_b.style,_a);}}};_pFlexibleControlElement.setElementTableTemplate=function(_a){if(this._tabletemplate!=_a){this._tabletemplate=_a;var _b=this.handle;if(_b){var _c=_b.childNodes;var _d=[];if(_a){nexacro.__setDOMStyle_TableTemplate(_b.style,_a);}else{nexacro.__clearDOMStyle_TableTemplate(_b.style);}nexacro.__setDOMStyle_TableTemplateArea(_b.style,this._tabletemplatearea);}}};_pFlexibleControlElement.setElementTableTemplateArea=function(_a){if(this._tabletemplatearea!=_a){this._tabletemplatearea=_a;var _b=this.handle;if(_b){if(_a){nexacro.__setDOMStyle_TableTemplateArea(_b.style,_a);}else{nexacro.__clearDOMStyle_TableTemplateArea(_b.style);}}}};nexacro.LabelElement=function(_a){nexacro.ControlElement.call(this,_a);};var _pLabelElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.LabelElement);nexacro.LabelElement.prototype=_pLabelElement;_pLabelElement._type_name="LabelElement";_pLabelElement.For=function(_a){if(_a&&_a.handle&&this.handle){this.handle.htmlFor=_a.handle.id;}};nexacro.SimpleInputElement=function(_a,_b){nexacro.InputElement.call(this,_a,_b);};var _pSimpleInputElement=nexacro._createPrototype(nexacro.InputElement,nexacro.SimpleInputElement);nexacro.SimpleInputElement.prototype=_pSimpleInputElement;_pSimpleInputElement._type_name="SimpleInputElement";_pSimpleInputElement._use_html_maxlength=true;_pSimpleInputElement.inputmode="text";_pSimpleInputElement._createElementHandle=function(_a,_b){var _c=this.handle=_b.createElement("input");var _d=_c.style;_c.id=this.name;nexacro.__setDOMNode_ClassName(_c,this._getElementClassName());_c._linked_element=this;this._refreshCommonStyleProps(_d);this._setElementDefaultLineHeight();if(this.textAlign){nexacro.__setDOMStyle_textAlign(_d,this.textAlign,this.rtl);}if(this.padding){nexacro.__setDOMStyle_PaddingObject(_d,this.padding,this.rtl);}if(!this.enable){nexacro.__setDOMNode_Enable(_c,false);}if(this.readonly){nexacro.__setDOMNode_ReadOnly(_c,true);}nexacro.__setDOMNode_Value(_c,this.value);nexacro.__setDOMNode_Type(_c,this.inputtype);nexacro.__setDOMNode_InputMode(_c,this.inputmode);if(this.maxlength>0){nexacro.__setDOMNode_MaxLength(_c,this.maxlength);}this._on_createAccessibilityHandle(_b,_a,_c);nexacro.__setDOMNode_Autocomplete(_c,"new-password");if(this.handle){nexacro.__appendDOMNode(_a.dest_handle,this.handle);}};_pSimpleInputElement._TestDisplayArea=function(_a){var _b=this.handle;if(_b){var _c;if(_a){_c=nexacro.BorderObject("1px dotted blue");}else{_c=nexacro.BorderObject("0px none");}nexacro.__setDOMStyle_BorderObject(_b.style,_c,this.rtl);}};_pSimpleInputElement.createCommand=function(){var _a=this.parent_elem.getContainerElement(this.position_step);if(_a&&!this._created){this.owner_elem=_a;this.rtl=this._isParentRtl();var _b=this._getCommonStyleStr();if(!this.enable){_b+=nexacro.__getHTMLStyle_Enable(this.enable,this._disabled_color);}if(this.textAlign){_b+=nexacro.__getHTMLStyle_textAlign(this.textAlign,this.rtl);}if(this.padding){_b+=nexacro.__getHTMLStyle_PaddingObject(this.padding,this.rtl);}if(this.imemode){if(this._imedisable){_b+=nexacro.__getHTMLStyle_ImeMode("disabled");}else{_b+=nexacro.__getHTMLStyle_ImeMode(this.imemode);}}_b+=this._getElementDefaultLineHeight();var _c=nexacro.__getHTMLAttr_Enable(this.enable)+nexacro.__getHTMLAttr_ReadOnly(this.readonly);if(this.maxlength>0&&this._use_html_maxlength){_c+=nexacro.__getHTMLAttr_MaxLength(this.maxlength);}var _d="";_d+="<input id='"+this.name+"' class='"+this._getElementClassName()+"' ";_d+=(_b)?(" style='"+_b+"' "):"";if(!nexacro._isNull(this.value)||this.value===""){if(nexacro._enableaccessibility!=true||nexacro._accessibilitytype!=5||(this.owner_elem.linkedcontrol&&!(this.owner_elem.linkedcontrol instanceof nexacro.MaskEdit))){_d+="value ='"+nexacro._encodeXml(this.value)+"' ";}}else{_d+="value ='"+nexacro._encodeXml(this.defaultvalue)+"' ";}if(nexacro._isTouchInteraction&&nexacro._OS=="Android"){_c+=nexacro.__getHTMLAttr_InputType(this.usesoftkeyboard?this.inputtype:"text");_c+=nexacro.__getHTMLAttr_InputMode(this.usesoftkeyboard?this.inputmode:"none");}else{_c+=nexacro.__getHTMLAttr_InputType(this.inputtype);_c+=nexacro.__getHTMLAttr_InputMode(this.inputmode);}if(this.inputtype=="password"){_d+=nexacro.__getHTMLAttr_Autocomplete("new-password");}else{_d+=nexacro.__getHTMLAttr_Autocomplete("off");}_d+=_c?(" "+_c):"";_d=this._on_createAccessibilityCommand(_d);_d+=">";return _d;}return "";};_pSimpleInputElement.attachHandle=function(_a){if(this.name&&!this.handle){var _b=_a._doc.getElementById(this.name);this.handle=_b;this.handle._linked_element=this;this._bindSysEvent();if(this._use_accessibility_label&&nexacro._enableaccessibility){this._label_handle=_a._doc.getElementById(this.name+":label");}}};_pSimpleInputElement._getCommonStyleStr=function(){var _a;if(nexacro._OS=="Android"){_a=nexacro.Element.prototype._getCommonStyleStr.call(this,true);if(this.width>=0&&this.height>=0){_a+=nexacro.__getHTMLStyle_Size(this.inputtype=="date"?this.width+this._INDICATOR_WIDTH:this.width,this.height);}}else{_a=nexacro.Element.prototype._getCommonStyleStr.call(this);}return _a;};_pSimpleInputElement._refreshCommonStyleProps=function(_a){if(nexacro._OS=="Android"){nexacro.Element.prototype._refreshCommonStyleProps.call(this,_a,true);var _b=this.linkedcontrol;if(!(_b&&_b._is_frame&&(_b._is_main&&!nexacro._allow_default_pinchzoom))){if(this.width&&this.height){nexacro.__setDOMStyle_Size(_a,this.inputtype=="date"?this.width+this._INDICATOR_WIDTH:this.width,this.height);}}}else{nexacro.Element.prototype._refreshCommonStyleProps.call(this,_a);}};_pSimpleInputElement._getInputID=function(){return this.name+":simpleinput";};_pSimpleInputElement._getInputValue=function(){var _a=this.handle;if(_a){return nexacro.__getDOMNodeValue(_a);}return "";};_pSimpleInputElement._clearNumberGabageValue=function(){var _a=this.handle;if(_a){if(!_a.value){_a.value="";}}};_pSimpleInputElement._getValidity=function(){var _a=this.handle;if(_a){return _a.validity;}};if(nexacro._isTouchInteraction&&nexacro._OS=="Android"){_pSimpleInputElement.setElementInputType=function(_a){if(this.inputtype!=_a){this.inputtype=_a;}var _b=this.handle;if(_b){if(this.usesoftkeyboard){nexacro.__changeInputDOMNodeType(_b,_a);}else{nexacro.__changeInputDOMNodeType(_b,"text");}}};_pSimpleInputElement.setElementInputMode=function(_a){if(this.inputmode!=_a){this.inputmode=_a=="number"?"decimal":_a;}var _b=this.handle;if(_b){if(this.usesoftkeyboard){nexacro.__setDOMNode_InputMode(_b,this.inputmode);}else{nexacro.__setDOMNode_InputMode(_b,"none");}}};}else{_pSimpleInputElement.setElementInputType=function(_a){if(this.inputtype!=_a){this.inputtype=_a;var _b=this.handle;if(_b){nexacro.__changeInputDOMNodeType(_b,_a);}}};_pSimpleInputElement.setElementInputMode=function(_a){if(this.inputmode!=_a){this.inputmode=_a;var _b=this.handle;if(_b){nexacro.__setDOMNode_InputMode(_b,_a);}}};}_pSimpleInputElement.setElementUseSoftKeyboard=function(_a){if(this.usesoftkeyboard!=_a){this.usesoftkeyboard=_a;this.setElementInputMode(this.inputmode);}};_pSimpleInputElement._on_sys_focus=function(_a){var _b=(_a.target||_a.srcElement);if(_b){var _c=_b._linked_element;if(!_c){return;}if(!_c.on_sys_focus_before_process(_a)){return;}if(!_c.on_sys_focus_process(_a)){return;}var _d=_c.parent.linkedcontrol;if(_d){_d.on_input_focus();}}};_pSimpleInputElement._on_sys_invalid=function(_a){var _b=(_a.target||_a.srcElement);if(_b){var _c=_b._linked_element;if(!_c){return;}var _d=_c.parent.linkedcontrol;if(_d&&_d.on_input_invalid){_d.on_input_invalid();}}};_pSimpleInputElement._on_sys_compositionend=function(_a){var _b=(_a.target||_a.srcElement);if(_b){var _c=_b._linked_element;_c.on_sys_compositionend_process.call(_c,_a);}};_pSimpleInputElement.on_sys_compositionend_process=function(_a){var _b=(_a.target||_a.srcElement);if(_b){var _c=_b._linked_element;if(!_c){return;}var _d=_c.getElementCaretPos();_c._composer.setStatus(nexacro._CompositionState.END,_d.end);_c.value=_b.value;var _e=_c.parent.linkedcontrol;if(_e&&_e.on_input_compositionend){_e.on_input_compositionend();}}};_pSimpleInputElement._on_sys_compositionstart=function(_a){var _b=(_a.target||_a.srcElement);if(_b){var _c=_b._linked_element;var _d=_c.getElementCaretPos();_c._composer.setStatus(nexacro._CompositionState.START,_d.begin);}};_pSimpleInputElement._on_sys_compositionupdate=function(_a){var _b=(_a.target||_a.srcElement);if(_b){var _c=_b._linked_element;var _d=_c.getElementCaretPos();_c._composer.setStatus(nexacro._CompositionState.COMPOSING,_d.end);_c.on_sys_compositionupdate_process.call(_c,_a);}};_pSimpleInputElement.setElementValue=function(_a){var _b=(nexacro._isNull(_a)?this.defaultvalue:(_a+""));if((this.value==_a)&&(this._getInputValue()==_b)){return;}this.value=_a;this._input_text=_b;var _c=this.handle;var _d=this.parent_elem.linkedcontrol;if(_c){this._setElementLastSelectionRange();if(this.value||this.value===""){if(!_d._is_killfocusing&&(this._is_focused||!this._checkmax_editing_only)){if(this.maxlength>0&&_b.length>this.maxlength){_b=_b.substring(0,this.maxlength);}}this._updateInputValue(_b);}else{this._updateInputValue(_b);}}};_pSimpleInputElement._on_sys_beforeinput_forward=function(_a){var _b=_a.target;if(_b){if(_a.inputType=="historyUndo"||_a.inputType=="historyRedo"){_a.preventDefault();}}return nexacro.InputElement.prototype._on_sys_beforeinput_forward.call(this,_a);};_pSimpleInputElement.on_apply_imeSet=function(_a){var _b,_c;var _d=_a?_a.target:null;var _e=_d?_d._linked_element:this;var _f=_e._imelocale.getLocale();var _g=nexacro._cache_simpleinputelement_set[_f];if(_f&&_g){for(var _i in _g){_e[_i]=_g[_i];}for(_b=0,_c=nexacro._inputelement_user_override_func.length;_b<_c;_b++ ){if(!nexacro._cache_simpleinputelement_set[_f][nexacro._inputelement_user_override_func[_b]]){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.SimpleInputElement.prototype[nexacro._inputelement_user_override_func[_b]];}}}else{for(_b=0,_c=nexacro._inputelement_user_override_func.length;_b<_c;_b++ ){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.SimpleInputElement.prototype[nexacro._inputelement_user_override_func[_b]];}}var _h=_e.parent_elem.linkedcontrol;if(_h.on_apply_imeSet){_h.on_apply_imeSet();}_e.on_apply_ime_environment(_a);};nexacro.SimpleTextAreaElement=function(_a,_b){nexacro.TextAreaElement.call(this,_a,_b);};var _pSimpleTextAreaElement=nexacro._createPrototype(nexacro.TextAreaElement,nexacro.SimpleTextAreaElement);nexacro.SimpleTextAreaElement.prototype=_pSimpleTextAreaElement;_pSimpleTextAreaElement._type_name="SimpleTextAreaElement";_pSimpleTextAreaElement._use_html_maxlength=true;_pSimpleTextAreaElement._TestDisplayArea=function(_a){var _b=this.handle;if(_b){var _c;if(_a){_c=nexacro.BorderObject("1px dotted blue");}else{_c=nexacro.BorderObject("0px none");}nexacro.__setDOMStyle_BorderObject(_b.style,_c,this.rtl);}};_pSimpleTextAreaElement._getInputID=function(){return this.name+":simpletextarea";};_pSimpleTextAreaElement._on_sys_focus=function(_a){var _b=(_a.target||_a.srcElement);if(_b){var _c=_b._linked_element;if(!_c){return;}if(!_c.on_sys_focus_before_process(_a)){return;}if(!_c.on_sys_focus_process(_a)){return;}var _d=_c.parent.linkedcontrol;if(_d){_d.on_input_focus();}}};_pSimpleTextAreaElement._on_sys_compositionend=_pSimpleInputElement._on_sys_compositionend;_pSimpleTextAreaElement._on_sys_compositionstart=_pSimpleInputElement._on_sys_compositionstart;_pSimpleTextAreaElement._on_sys_compositionupdate=_pSimpleInputElement._on_sys_compositionupdate;_pSimpleTextAreaElement._on_sys_beforeinput_forward=function(_a){var _b=_a.target;if(_b){if(_a.inputType=="historyUndo"||_a.inputType=="historyRedo"){_a.preventDefault();}}return nexacro.TextAreaElement.prototype._on_sys_beforeinput_forward.call(this,_a);};_pSimpleTextAreaElement.on_apply_imeSet=function(_a){var _b,_c;var _d=_a?(_a.target||_a.srcElement):this.handle;var _e=_d?_d._linked_element:this;var _f=_e._imelocale.getLocale();if(_f&&nexacro._cache_simpleinputelement_set[_f]&&nexacro._cache_simpletextareaelement_set[_f]){for(_b=0,_c=nexacro._inputelement_user_override_func.length;_b<_c;_b++ ){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.SimpleInputElement.prototype[nexacro._inputelement_user_override_func[_b]];if(nexacro.SimpleTextAreaElement.prototype[nexacro._inputelement_user_override_func[_b]]){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.SimpleTextAreaElement.prototype[nexacro._inputelement_user_override_func[_b]];}}for(var _h in nexacro._cache_simpleinputelement_set[_f]){_e[_h]=nexacro._cache_simpleinputelement_set[_f][_h];}for(var _h in nexacro._cache_simpletextareaelement_set[_f]){_e[_h]=nexacro._cache_simpletextareaelement_set[_f][_h];}for(_b=0,_c=nexacro._inputelement_user_override_func.length;_b<_c;_b++ ){if(!nexacro._cache_simpleinputelement_set[_f][nexacro._inputelement_user_override_func[_b]]&&!nexacro._cache_simpletextareaelement_set[_f][nexacro._inputelement_user_override_func[_b]]&&_e[nexacro._inputelement_user_override_func[_b]]!==nexacro.SimpleInputElement.prototype[nexacro._inputelement_user_override_func[_b]]){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.SimpleTextAreaElement.prototype[nexacro._inputelement_user_override_func[_b]];}}}else if(_f&&nexacro._cache_simpleinputelement_set[_f]){for(_b=0,_c=nexacro._inputelement_user_override_func.length;_b<_c;_b++ ){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.SimpleInputElement.prototype[nexacro._inputelement_user_override_func[_b]];if(nexacro.SimpleTextAreaElement.prototype[nexacro._inputelement_user_override_func[_b]]){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.SimpleTextAreaElement.prototype[nexacro._inputelement_user_override_func[_b]];}}for(var _h in nexacro._cache_simpleinputelement_set[_f]){_e[_h]=nexacro._cache_simpleinputelement_set[_f][_h];}for(_b=0,_c=nexacro._inputelement_user_override_func.length;_b<_c;_b++ ){if(!nexacro._cache_simpleinputelement_set[_f][nexacro._inputelement_user_override_func[_b]]&&_e[nexacro._inputelement_user_override_func[_b]]!==nexacro.SimpleInputElement.prototype[nexacro._inputelement_user_override_func[_b]]){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.SimpleTextAreaElement.prototype[nexacro._inputelement_user_override_func[_b]];}}}else if(_f&&nexacro._cache_simpletextareaelement_set[_f]){for(_b=0,_c=nexacro._inputelement_user_override_func.length;_b<_c;_b++ ){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.SimpleInputElement.prototype[nexacro._inputelement_user_override_func[_b]];if(nexacro.SimplkeTextAreaElement.prototype[nexacro._inputelement_user_override_func[_b]]){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.SimpleTextAreaElement.prototype[nexacro._inputelement_user_override_func[_b]];}}for(var _h in nexacro._cache_simpletextareaelement_set[_f]){_e[_h]=nexacro._cache_simpletextareaelement_set[_f][_h];}for(_b=0,_c=nexacro._inputelement_user_override_func.length;_b<_c;_b++ ){if(!nexacro._cache_simpletextareaelement_set[_f][nexacro._inputelement_user_override_func[_b]]&&_e[nexacro._inputelement_user_override_func[_b]]!==nexacro.SimpleInputElement.prototype[nexacro._inputelement_user_override_func[_b]]){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.SimpleTextAreaElement.prototype[nexacro._inputelement_user_override_func[_b]];}}}else{for(_b=0,_c=nexacro._inputelement_user_override_func.length;_b<_c;_b++ ){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.SimpleInputElement.prototype[nexacro._inputelement_user_override_func[_b]];if(nexacro.SimpleTextAreaElement.prototype[nexacro._inputelement_user_override_func[_b]]){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.TextAreaElement.prototype[nexacro._inputelement_user_override_func[_b]];}}for(_b=0,_c=nexacro._inputelement_user_override_func.length;_b<_c;_b++ ){if(_e[nexacro._inputelement_user_override_func[_b]]!==nexacro.InputElement.prototype[nexacro._inputelement_user_override_func[_b]]){_e[nexacro._inputelement_user_override_func[_b]]=nexacro.TextAreaElement.prototype[nexacro._inputelement_user_override_func[_b]];}}}var _g=_e.parent_elem.linkedcontrol;if(_g.on_apply_imeSet){_g.on_apply_imeSet();}_e.on_apply_ime_environment(_a);};}if(_process){delete _process;delete _pMobileElement;delete _pFlexibleControlElement;delete _pSimpleInputElement;delete _pSimpleTextAreaElement;}if(nexacro._Browser=="Runtime"){"use strict";var _process=true;if(!nexacro.FlexibleControlElement){nexacro.FlexibleControlElement=function(_a){nexacro.ControlElement.call(this,_a);this.parent=_a;this.parent_elem=_a;};var _pFlexibleControlElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.FlexibleControlElement);nexacro.FlexibleControlElement.prototype=_pFlexibleControlElement;_pFlexibleControlElement._type_name="FlexibleControlElement";_pFlexibleControlElement.setElementLayoutType=nexacro._emptyFn;_pFlexibleControlElement.setElementLayoutHorizontalGap=nexacro._emptyFn;_pFlexibleControlElement.setElementLayoutVerticalGap=nexacro._emptyFn;_pFlexibleControlElement.setElementFlexMainAxisAlign=nexacro._emptyFn;_pFlexibleControlElement.setElementFlexCrossAxisAlign=nexacro._emptyFn;_pFlexibleControlElement.setElementFlexCrossAxisWrapAlign=nexacro._emptyFn;_pFlexibleControlElement.setElementFlexWrap=nexacro._emptyFn;_pFlexibleControlElement.setElementLayoutSpacing=nexacro._emptyFn;_pFlexibleControlElement.setElementTableCellAlign=nexacro._emptyFn;_pFlexibleControlElement.setElementTableCellinCompAlign=nexacro._emptyFn;_pFlexibleControlElement.setElementTableDirection=nexacro._emptyFn;_pFlexibleControlElement.setElementTableTemplate=nexacro._emptyFn;_pFlexibleControlElement.setElementTableTemplateArea=nexacro._emptyFn;_pFlexibleControlElement.setElementLayoutBasis=nexacro._emptyFn;nexacro.LabelElement=function(_a){nexacro.ControlElement.call(this,_a);};var _pLabelElement=nexacro._createPrototype(nexacro.ControlElement,nexacro.LabelElement);nexacro.LabelElement.prototype=_pLabelElement;_pLabelElement._type_name="LabelElement";_pLabelElement.For=nexacro._emptyFn;nexacro.SimpleInputElement=function(_a,_b){nexacro.InputElement.call(this,_a,_b);};var _pSimpleInputElement=nexacro._createPrototype(nexacro.InputElement,nexacro.SimpleInputElement);nexacro.SimpleInputElement.prototype=_pSimpleInputElement;_pSimpleInputElement._type_name="SimpleInputElement";_pSimpleInputElement._is_simple_input=true;_pSimpleInputElement._clearNumberGabageValue=nexacro._emptyFn;_pSimpleInputElement._TestDisplayArea=function(_a){var _b;if(_a){_b="1px dotted blue";}else{_b="0px none";}var _c=this.handle;if(_c){nexacro.__setElementHandleBorderObject(_c,_b,this.rtl);}};_pSimpleInputElement._getInputID=function(){return this.name+":simpleinput";};_pSimpleInputElement._on_sys_focus=function(){nexacro.InputElement.prototype._on_sys_focus.call(this);var _a=this.parent.linkedcontrol;if(_a){_a.on_input_focus();}};_pSimpleInputElement._getValidity=nexacro._emptyFn;nexacro.SimpleTextAreaElement=function(_a,_b){nexacro.TextAreaElement.call(this,_a,_b);};var _pSimpleTextAreaElement=nexacro._createPrototype(nexacro.TextAreaElement,nexacro.SimpleInputElement);nexacro.SimpleTextAreaElement.prototype=_pSimpleTextAreaElement;_pSimpleTextAreaElement._type_name="SimpleTextAreaElement";_pSimpleTextAreaElement._is_simple_input=true;_pSimpleTextAreaElement._TestDisplayArea=function(_a){if(_a){border="1px dotted blue";}else{border="0px none";}var _b=this.handle;if(_b){nexacro.__setElementHandleBorderObject(_b,border,this.rtl);}};_pSimpleTextAreaElement._getInputID=function(){return this.name+":simpletextarea";};_pSimpleTextAreaElement._on_sys_focus=function(_a){nexacro.TextAreaElement.prototype._on_sys_focus.call(this,_a);var _b=this.parent.linkedcontrol;if(_b){_b.on_input_focus();}};}}if(_process){delete _process;delete _pSimpleInputElement;}if(!nexacro.SpinnerControl){nexacro.SpinnerControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._list=[];this._disprowcnt=(this._prev_next_disprowcnt* 2)+1+2;this._overlay_blind=[];this._setFlingScrollBezier(0,0,0.5,0.8);this._setFlingScrollMaxDistance(150);};var _pSpinnerControl=nexacro._createPrototype(nexacro.Component,nexacro.SpinnerControl);nexacro.SpinnerControl.prototype=_pSpinnerControl;_pSpinnerControl._type_name="SpinnerControl";_pSpinnerControl._is_scrollable=true;_pSpinnerControl._is_subcontrol=true;_pSpinnerControl._is_spinnable=true;_pSpinnerControl._use_translate_scroll=true;_pSpinnerControl._use_readonly_status=true;_pSpinnerControl._use_scrolllimit_fling_stop=false;_pSpinnerControl._prev_next_disprowcnt=2;_pSpinnerControl._event_list["onitemchanged"]=1;_pSpinnerControl._event_list["ononecyclechanged"]=1;_pSpinnerControl._p_scrollbartype="none";_pSpinnerControl._p_scrolltype="vertical";_pSpinnerControl._p_value=undefined;_pSpinnerControl._p_currentrow=0;_pSpinnerControl._p_dragscrolltype="both";_pSpinnerControl._properties=[{name:"value"},{name:"currentrow",readonly:true},];_pSpinnerControl._values=null;_pSpinnerControl._curritem=null;_pSpinnerControl._itemheight=0;_pSpinnerControl._current_spin_rowidx=0;_pSpinnerControl._is_infinity_scroll=true;_pSpinnerControl._infinity_container_max=5000;_pSpinnerControl._use_scrolllimit_fling_stop=true;_pSpinnerControl._adjust_scrollpos_time=300;_pSpinnerControl._adjust_scrollinit_time=300;_pSpinnerControl._use_vibrate=true;_pSpinnerControl._use_keyaction=true;if(_pSpinnerControl._use_vibrate){_pSpinnerControl._vibrate=function(){var _a=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_a){navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate;if(navigator.vibrate){navigator.vibrate(30);}}};}else{_pSpinnerControl._vibrate=nexacro._emptyFn;}_pSpinnerControl.on_create_contents=function(){if(!this._is_infinity_scroll){this._infinity_container_max=1;}for(var _a=0;_a<this._disprowcnt;_a++ ){this._list[_a]=new nexacro.FieldBaseTextControl("SpinnerControlitem_"+_a,0,0,0,0,null,null,null,null,null,null,this);this._list[_a]._isFocusAcceptable=function(){return true;};this._list[_a].on_getIDCSSSelector=function(){return "spinneritem";};this._list[_a]._on_focus=function(_b,_c,_d,_e,_f,_g){if(_c!="lbuttondown"||this._userstatus=="selected"){nexacro.Component.prototype._on_focus.call(this,_b,_c,_d,_e,_f,_g);}};this._list[_a]._setEventHandler("onclick",this._on_item_click,this);this._list[_a].createComponent(true);}};_pSpinnerControl.on_created_contents=function(_a){for(var _b=0;_b<this._list.length;_b++ ){this._list[_b].on_created(_a);}};_pSpinnerControl.on_create_contents_command=function(){var _a="";for(var _b=0;_b<this._list.length;_b++ ){_a+=this._list[_b].createCommand();}return _a;};_pSpinnerControl.on_attach_contents_handle=function(_a){for(var _b=0;_b<this._list.length;_b++ ){this._list[_b].attachHandle(_a);}};_pSpinnerControl.on_after_created=function(){var _a,_b=0,_c=this._height/(this._disprowcnt-2);this._itemheight=this._limitDecimal(_c);_a=this._getClientWidth();_c=(this._getClientHeight()-this._itemheight)/2;for(var _e=0;_e<2;_e++ ){var _d=this._overlay_blind[_e]=new nexacro.Component("overlay"+((_e==0)?"top":"bottom"),0,_b,_a,_c,null,null,null,null,null,null,this);this._overlay_blind[_e]._type_name="StaticControl";_d._is_subcontrol=true;_d._is_nc_control=true;_d._is_simple_control=true;_d.createComponent();_d._control_element.setElementPointerEvents("none");_b=_c+this._itemheight;}this.on_apply_value();};_pSpinnerControl.on_destroy_contents=function(){for(var _a=0;_a<this._list.length;_a++ ){this._list[_a].destroy();}for(_a=0;_a<this._overlay_blind.length;_a++ ){this._overlay_blind[_a].destroy();}this._overlay_blind=null;this._list=null;this._curritem=null;if(this._aniframe_adjust){this._aniframe_adjust.destroy();this._aniframe_adjust=null;}if(this._scrolltask){this._scrolltask.destroy();this._scrolltask=null;}};_pSpinnerControl._getMaxItemWidth=function(){var _a=this.getElement();if(_a){if(!this._list.length){return 0;}var _b=0;var _c=this._getCurrentStyleBorder();if(_c){_b+=_c._getBorderWidth();}var _d=this._getCurrentStylePadding();if(_d){_b+=_d.left+_d.right;}var _e=this._list[0]._getCurrentStyleInheritValue("font");var _f=this._list[0]._getReferenceAbsoluteFont(_e);var _g=this._list[0]._getCurrentStyleInheritValue("wordSpacing");var _h=this._list[0]._getCurrentStyleInheritValue("letterSpacing");var _i=0;for(var _k=0;_k<this._values.length;_k++ ){var _j=nexacro._getTextSize(this._values[_k],_e,undefined,undefined,undefined,_g,_h,undefined,undefined,undefined,_f);_i=Math.max(_i,Math.ceil(_j[0]));}_b+=_i;return _b;}return 0;};_pSpinnerControl._correctScrollPos=function(_a){return _a;};_pSpinnerControl._limitDecimal=function(_a){return nexacro._limitDecimal(_a,3);};_pSpinnerControl.on_change_containerRect=function(_a,_b){var _c,_d,_e=_b/(this._disprowcnt-2);this._itemheight=this._limitDecimal(_e);if(this._control_element){var _f=this._disprowcnt;if(!this._is_infinity_scroll){_f=this._disprowcnt-2+this._values.length-1;}this._control_element.setElementScrollMaxSize(_a,_e* this._infinity_container_max* _f);}_c=this._getClientWidth();_e=(this._getClientHeight()-this._itemheight)/2;_d=0;for(i=0;i<this._overlay_blind.length;i++ ){this._overlay_blind[i].move(0,_d,_c,_e);_d=_e+this._itemheight;}this._scrollCurrent();this._onResetScrollBar();};_pSpinnerControl._on_focus=function(_a,_b,_c,_d,_e,_f){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(_b!="lbuttondown"){if(this._curritem){this._curritem._setFocus(false);}}};_pSpinnerControl._getDataRow=function(_a){if(this._values.length>_a){return _a;}return -9;};_pSpinnerControl._isLastDataRow=function(_a){return (_a==this._values.length-1);};_pSpinnerControl._isFirstDataRow=function(_a){return (_a==0);};_pSpinnerControl._setValues=function(_a){this._values=_a;this._curritem=null;var _b=Math.floor(this._list.length/2);var _c=this._list;var _d,_e;var _f=this._getScreenRowCount();for(var _g=0;_g<_c.length;_g++ ){_c[_g]._rowidx=_g-_b;if(_c[_g]._rowidx<0){_c[_g]._rowidx=_f+_c[_g]._rowidx;}_d=this._getDataRow(_c[_g]._rowidx);_e=this._getData(_d);_c[_g].set_text(_e);}if(this._disprowcnt>_a.length){this._is_infinity_scroll=false;}if(this._is_created){this._current_spin_rowidx=0;this._p_currentrow=this._getDataRow(0);this._scrollCurrent();}};_pSpinnerControl.set_value=function(_a){this._p_value=_a;this.on_apply_value();};_pSpinnerControl.on_apply_value=function(){this._current_spin_rowidx=this._p_currentrow=this._getCurrentDataRow();this._scrollCurrent();if(this._curritem){this._curritem._setFocus(false);}};_pSpinnerControl.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();for(var _b=0;_b<this._list.length;_b++ ){this._list[_b]._setEnable(_a);}};_pSpinnerControl._getCurrentDataRow=function(){var _a=this._values;if(_a){for(var _b=0;_b<_a.length;_b++ ){if(_a[_b]==this._p_value){return _b;}}}return 0;};_pSpinnerControl._animateAdjustScroll=function(_a,_b,_c){var _d,_e=0;_d=this._limitDecimal(this.getVScrollPos());if(!this._list.length){return;}var _f;if(!this._scrollnextstop){_f=this._getScreenTopItem();}else{_f=this._getCurrentItem(undefined, -this._prev_next_disprowcnt);}if(!_f){if(this._dir<0){_e= -_d;}}else{_e=_f._adjust_top-_d;}if(_a=="next"){if(this._is_scrolling){return;}if(!this._is_infinity_scroll){if(this._isLastDataRow(this._p_currentrow)){return;}}_e+=this._itemheight;}else if(_a=="prev"){if(this._is_scrolling){return;}if(!this._is_infinity_scroll){if(this._isFirstDataRow(this._p_currentrow)){return;}}_e-=this._itemheight;}else{this._is_scrolling=true;}this._is_scrolling=true;if(_e==0){this._animateAdjustScrollEnd(_a);return;}if(nexacro._Browser!="Runtime"&&!_b){var _g=this._adjust_scrollpos_time;var _h=(nexacro._Browser!="Runtime"&&performance)?performance.now():(new Date());var _i=this;if(this._aniframe_adjust){this._aniframe_adjust.destroy();}var _j=this._aniframe_adjust=new nexacro.AnimationFrame(this,animate);_j.start();function animate(_k){var _l=_k-_h;var _m=Math.min(_l/_g,1);var _n=easeOut(_m)* _e+_d;_i._scrollTo(null,_n,null,null,"","move");if(_m<1){_j.start();}else{_i._animateAdjustScrollEnd(_a,_c);}};function easeOut(_k){return 1-Math.pow(1-_k,2);};}else{this._scrollTo(null,_e+_d,null,null,"","move");this._animateAdjustScrollEnd(_a,_c);}};_pSpinnerControl._animateAdjustScrollEnd=function(_a,_b){this._confirmValue(_b);this._vibrate();if(this._curritem){this._curritem._setFocus(false);}this._startScrollCurrentTimer();this._is_scrolling=false;this._dir=0;};_pSpinnerControl._fire_same_itemchanged=false;_pSpinnerControl._confirmValue=function(_a,_b){var _c=this._getCurrentItem(undefined,_b);if(_c){var _d=this._p_currentrow;var _e=this._p_value;var _f=this._getDataRow(_c._rowidx);var _g=this._getData(_f);if(this._fire_same_itemchanged||_e!=_g){this._current_spin_rowidx=_c._rowidx;this._p_currentrow=this._getDataRow(_c._rowidx);this._p_value=_g;if(!_a){this.on_fire_onitemchanged(_d,_e+"",_e,_f,_g+"",_g);}}}};_pSpinnerControl._getCurrentItem=function(_a,_b){var _c=this._getCurrentListItemIndex(_a)+(_b!=undefined?_b:0);return this._list[_c];};_pSpinnerControl._getCurrentListItemIndex=function(_a,_b){var _c=this._getClientHeight()/2;var _d=(_a!=undefined)?_a:this.getVScrollPos();if(_b!=undefined){var _e=_c;if(_b>0){_e-=(this._itemheight/2-1);}else if(_b<0){_e+=(this._itemheight/2-1);}for(var _h=0;_h<this._list.length;_h++ ){var _f=this._list[_h]._adjust_top-this._limitDecimal(_d);var _g=_f+this._itemheight;if(_f<=_c&&_c<_g){if(_f<=_e&&_e<_g){return [_h,_h];}else{return [_h,-1];}}}}else{for(var _h=0;_h<this._list.length;_h++ ){var _f=this._list[_h]._adjust_top-this._limitDecimal(_d);var _g=_f+this._itemheight;if(_f<=_c&&_c<_g){return _h;}}}return -1;};_pSpinnerControl._getCurrentItemWithDir=function(_a,_b){var _c=this._getCurrentListItemIndex(_a,_b);if(_c<0){return null;}return [this._list[_c[0]],this._list[_c[1]]];};_pSpinnerControl._getScreenTopItem=function(){var _a=(this._getClientHeight()-this._itemheight)/2;for(var _c=0;_c<this._list.length;_c++ ){var _b=this._list[_c]._adjust_top-this._limitDecimal(this.getVScrollPos());if(-1<=_b&&_b<=_a){if(this._dir>0){return this._list[_c];}else if(this._dir<0){return this._list[_c -1];}else{if(_b<=_a/2){return this._list[_c];}else{return this._list[_c -1];}}}}};_pSpinnerControl._scrollCurrent=function(){if(!this._control_element){return;}if(this._is_infinity_scroll){var _a=(this._control_element.container_maxheight-(this._itemheight* this._list.length))/2;if(_a<this._itemheight){_a=this._itemheight;}var _b=_a;var _c=Math.floor(this._list.length/2);var _d=this._list;var _e=this._getScreenRowCount();var _f;for(var _h=0;_h<this._list.length;_h++ ){_d[_h].move(0,_b-this._itemheight,this._getClientWidth(),this._itemheight);_b+=this._itemheight;_d[_h]._rowidx=this._current_spin_rowidx-_c+_h;if(_d[_h]._rowidx<0){_d[_h]._rowidx=_e+_d[_h]._rowidx;}else if(_d[_h]._rowidx>=_e){_d[_h]._rowidx=_d[_h]._rowidx-_e;}_f=this._getDataRow(_d[_h]._rowidx);_d[_h].set_text(this._getData(_f));_d[_h]._changeUserStatus("selected",false);}this._vscroll_pos=0;this._control_element._reset_scrollpos=true;this._scrollTo(null,_a,null,null,"","init");this._control_element._reset_scrollpos=false;var _g=this._getCurrentItem(_a);if(_g){_g._changeUserStatus("selected",true);this._currrowidx=_g._rowidx;this._curritem=_g;}}else{var _b=0;var _c=Math.floor(this._list.length/2);var _d=this._list;var _e=this._getScreenRowCount();var _f;for(var _h=0;_h<this._list.length;_h++ ){_d[_h].move(0,_b-this._itemheight,this._getClientWidth(),this._itemheight);_b+=this._itemheight;_d[_h]._rowidx= -_c+_h;_f=this._getDataRow(_d[_h]._rowidx);_d[_h].set_text(this._getData(_f));_d[_h]._changeUserStatus("selected",false);}this._control_element._reset_scrollpos=true;this._scrollTo(null,this._itemheight* this._p_currentrow,null,null,"","init");this._control_element._reset_scrollpos=false;var _g=this._getCurrentItem(this._itemheight* this._p_currentrow);if(_g){_g._changeUserStatus("selected",true);this._currrowidx=_g._rowidx;this._curritem=_g;}}};_pSpinnerControl._getData=function(_a){return this._values[_a];};_pSpinnerControl._getScreenRowCount=function(){if((this._list.length-this._values.length)>0){return this._list.length;}return this._values.length;};_pSpinnerControl._startScrollCurrentTimer=function(_a){if(!this._is_infinity_scroll){return;}_a==undefined?this._adjust_scrollinit_time:_a;var _b=this;this._stopScrollCurrentTimer();if(!this._scrolltask){this._scrolltask=new nexacro._CallbackTimer(this,function(_c){return _b._callbackScrollCurrentTimer();},_a);}this._scrolltask.start();};_pSpinnerControl._stopScrollCurrentTimer=function(){if(this._scrolltask){this._scrolltask.destroy();this._scrolltask=null;}};_pSpinnerControl._callbackScrollCurrentTimer=function(){this._scrollCurrent();if(this._curritem){this._curritem._setFocus(false);}this._stopScrollCurrentTimer();};_pSpinnerControl._tmp_vscroll=0;_pSpinnerControl._dir=0;_pSpinnerControl.on_slidestart_default_action=function(_a,_b,_c,_d,_e,_f,_g,_h){if(this._aniframe_adjust){this._aniframe_adjust.stop();this._is_scrolling=false;}this._tmp_vscroll=this._limitDecimal(this.getVScrollPos());this._stopScrollCurrentTimer();};_pSpinnerControl.on_slideend_default_action=function(_a,_b,_c,_d,_e,_f,_g,_h){this._scrollnextstop=false;if(_b._is_next_fire_fling==false){var _i=this._tmp_vscroll-this._limitDecimal(this.getVScrollPos());this._dir=0;if(Math.abs(_i)>this._itemheight){this._scrollnextstop=true;}if(_i<0){this._dir=1;}else if(_i>0){this._dir=-1;}this._animateAdjustScroll();}else if(this._aniframe_adjust){this._aniframe_adjust.stop();this._is_scrolling=false;}this._cur_ldown_elem=null;};_pSpinnerControl.on_flingend_default_action=function(_a,_b,_c,_d,_e,_f,_g,_h){var _i=this._cur_ldown_elem;var _j=false;while(_i){if(_i instanceof nexacro.SpinnerControl){if(_i==this){_j=true;}break;}_i=_i._p_parent;}var _k=this._tmp_vscroll-this._limitDecimal(this.getVScrollPos());this._dir=0;if(_k<0){this._dir=1;}else if(_k>0){this._dir=-1;}if(!_j){this._animateAdjustScroll();}else{this._need_adjust=true;}};_pSpinnerControl.on_touch_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.prototype.on_touch_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_k,_l);var _m=this._getWindow();this._cur_ldown_elem=_m._cur_ldown_elem;};_pSpinnerControl.on_touchstart_default_action=function(_a,_b,_c,_d){var _e=this._getWindow();this._cur_ldown_elem=_e._cur_ldown_elem;};_pSpinnerControl.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._need_adjust){this._animateAdjustScroll();this._need_adjust=undefined;}this._cur_ldown_elem=null;};_pSpinnerControl.on_fire_sys_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._need_adjust){this._animateAdjustScroll();this._need_adjust=undefined;}this._cur_ldown_elem=null;};_pSpinnerControl.on_touchend_default_action=function(_a,_b,_c,_d){if(this._need_adjust){this._animateAdjustScroll();this._need_adjust=undefined;}};_pSpinnerControl._keyAction=function(_a){if(this._p_scrolltype=="none"||this._p_scrolltype=="horizontal"){return false;}var _b;var _c=this._limitDecimal(this.getVScrollPos());var _d=this._control_element;var _e=_d.vscroll_limit;switch(_a){case nexacro.Event.KEY_UP:if(0<_c){_b=_c-this._itemheight;}else{return;}break;case nexacro.Event.KEY_DOWN:if(_e>_c){_b=_c+this._itemheight;}else{return;}break;case nexacro.Event.KEY_HOME:var _f=this._values[0];this.set_value(_f);return true;case nexacro.Event.KEY_END:var _g=this._values[this._values.length-1];this.set_value(_g);return true;default:return false;}this._scrollTo(null,_b,null,null,"","");this._confirmValue();this._startScrollCurrentTimer();if(this._curritem){this._curritem._setFocus(false);}return true;};_pSpinnerControl.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(this._use_keyaction){return this._keyAction(_a);}};_pSpinnerControl._setVScrollDefaultAction=function(_a){if(this._p_scrolltype=="none"||this._p_scrolltype=="horizontal"){return false;}var _b;var _c=this._limitDecimal(this.getVScrollPos());var _d=this._control_element;var _e=this._limitDecimal(_d.vscroll_limit);if(_a<0){if(_e>_c){_b=_c+this._itemheight;}else{return false;}}else{if(0<_c){_b=_c-this._itemheight;}else{return false;}}this._scrollTo(null,_b,null,null,"","mousewheel_v");this._confirmValue();this._startScrollCurrentTimer();if(this._curritem){this._curritem._setFocus(false);}return true;};_pSpinnerControl._on_beforescroll=function(_a,_b,_c,_d,_e,_f){if(_f=="init"){return true;}var _g=Math.abs(_a-_c);var _h=Math.abs(_b-_d);var _i;if(_g<_h){_i=this.on_vscroll(_b,_d,_e,_f);}return true;};_pSpinnerControl._currrowidx=-1;_pSpinnerControl._dircurrrowidx=false;_pSpinnerControl._curritem=null;_pSpinnerControl.on_vscroll=function(_a,_b,_c,_d){var _e=this._list;var _f=0;var _g=_b-_a;if(_g>0){_f=1;}else if(_g<0){_f=-1;}var _h=this._getScreenRowCount();var _i;var _j;var _k=this._control_element;var _l=this._getWindow();if(_f>0){while(1){var _m=_e[0];var _n=_e[_e.length-1];if((_m._adjust_top-_b+_m._adjust_height)<0){_j=_n._adjust_top+this._itemheight;if(this._control_element.container_maxheight<_j){break;}_m.move(0,_j);var _o=_e.shift();_o._rowidx=_n._rowidx+1;if(_o._rowidx>=_h){_o._rowidx=_o._rowidx-_h;}_i=this._getDataRow(_o._rowidx);_o.set_text(this._getData(_i));_e.push(_o);}else{break;}}var _o=this._getCurrentItemWithDir(_b,_f);if(this._currrowidx>=0&&this._currrowidx>_o[0]._rowidx){this.on_fire_ononecyclechanged(1,_d);}if(this._currrowidx!=_o[0]._rowidx){if(this._curritem){this._curritem._changeUserStatus("selected",false);}this._currrowidx=_o[0]._rowidx;this._curritem=_o[0];_o[0]._changeUserStatus("selected",true);this._vibrate();}}else if(_f<0){while(1){var _m=_e[0];var _n=_e[_e.length-1];if((_n._adjust_top-_b)>this._getClientHeight()){_j=_m._adjust_top-this._itemheight;if(0>_j){break;}_n.move(0,_j);var _o=_e.pop();_o._rowidx=_m._rowidx-1;if(_o._rowidx<0){_o._rowidx=_h+_o._rowidx;}_i=this._getDataRow(_o._rowidx);_o.set_text(this._getData(_i));_e.unshift(_o);}else{break;}}var _o=this._getCurrentItemWithDir(_b,_f);if(this._currrowidx>=0&&this._currrowidx<_o[0]._rowidx){this.on_fire_ononecyclechanged(-1,_d);}if(this._currrowidx!=_o[0]._rowidx){if(this._curritem){this._curritem._changeUserStatus("selected",false);}this._currrowidx=_o[0]._rowidx;this._curritem=_o[0];_o[0]._changeUserStatus("selected",true);this._vibrate();}}return true;};_pSpinnerControl._moveScroll=function(_a,_b,_c){this._animateAdjustScroll(_a,_b,_c);};_pSpinnerControl._on_item_click=function(_a,_b){var _c=(this._getClientHeight()-this._itemheight)/2-1;var _d=(this._getClientHeight()+this._itemheight)/2+1;var _e=_a._adjust_top-this._limitDecimal(this.getVScrollPos());var _f=(_e+this._itemheight);if(_c<=_e&&_f<=_d){this._confirmValue();}else if(_e<_c){this._moveScroll("prev");}else if(_f>_d){this._moveScroll("next");}};_pSpinnerControl.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f){if(this.onitemchanged&&this.onitemchanged._has_handlers){var _g=new nexacro.ItemChangeEventInfo(this,"onitemchanged",_a,_b,_c,_d,_e,_f);var _h=this.onitemchanged._fireEvent(this,_g);return nexacro._toBoolean(_h);}return false;};_pSpinnerControl.on_fire_ononecyclechanged=function(_a,_b){if(this.ononecyclechanged&&this.ononecyclechanged._has_handlers){var _c={direction:_a,evtkind:_b};var _d=this.ononecyclechanged._fireEvent(this,_c);return nexacro._toBoolean(_d);}return false;};_pSpinnerControl._getCanHscroll=function(_a,_b,_c){return false;};_pSpinnerControl._getCanVscroll=function(_a,_b,_c){var _d=false;if(_c!=0&&(_b!="none"&&_b!="horz")){var _e,_f,_g=true;if(_a){if(_a._p_enable){_e=_a.max;_f=_a.pos;}else{_g=false;}}else{_e=this._control_element.vscroll_limit;_f=this.getVScrollPos();}if(_g){if(_c<0){if(_f<_e){_d=true;}}else{if(_f>0){_d=true;}}}}return _d;};nexacro._defineProperties(_pSpinnerControl,_pSpinnerControl._properties);delete _pSpinnerControl;};if(!nexacro.TextField){nexacro.TextField=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.FieldBase.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=!!_m;if(_m){this._p_readonly=true;}this._focus_keep=null;};var _pTextField=nexacro._createPrototype(nexacro.FieldBase,nexacro.TextField);nexacro.TextField.prototype=_pTextField;_pTextField._type_name="TextField";var _pEditPtype=nexacro.Edit.prototype;_pTextField._boxcontrol_socket={instance_name:"TextFieldBox",id:"box"};_pTextField._p_value=undefined;_pTextField._p_readonly=false;_pTextField._p_autoselect=false;_pTextField._p_autoskip=false;_pTextField._p_maxlength=0;_pTextField._initsoftkeyboard=undefined;_pTextField._p_usesoftkeyboard=true;_pTextField._p_inputtype="normal";_pTextField._p_text="";_pTextField._p_usecontextmenu=true;_pTextField._p_pattern="";_pTextField._p_prefixtext="";_pTextField._p_postfixtext="";_pTextField._p_useleadingbutton=false;_pTextField._p_usetrailingbutton=false;_pTextField._p_iconbuttonsize=undefined;_pTextField._p_leadingbuttonsize=undefined;_pTextField._p_trailingbuttonsize=undefined;_pTextField._properties=[{name:"value"},{name:"readonly"},{name:"autoselect"},{name:"autoskip"},{name:"maxlength"},{name:"usesoftkeyboard"},{name:"inputtype"},{name:"text",readonly:true},{name:"usecontextmenu"},{name:"pattern"},{name:"prefixtext"},{name:"postfixtext"},{name:"useleadingbutton"},{name:"usetrailingbutton"},{name:"iconbuttonsize"},{name:"leadingbuttonsize"},{name:"trailingbuttonsize"},{name:"cursor"},];_pTextField._undostack=null;_pTextField._is_undo=false;_pTextField._keypad_type="text";_pTextField._imedisable=false;_pTextField._maxlen=0;_pTextField._default_value=undefined;_pTextField._default_text="";_pTextField._processing_updateToDataset=false;_pTextField._result_updateToDataset=true;_pTextField._processing_canchange=false;_pTextField._onlydisplay=false;_pTextField._apply_client_padding=false;_pTextField._has_inputElement=true;_pTextField._change_value=false;_pTextField._is_editable_control=true;_pTextField._use_readonly_status=true;_pTextField._check_valid_pattern=null;_pTextField._input_limit_pattern=null;_pTextField._is_locale_control=true;_pTextField._caret_pos=-1;_pTextField._input_element=null;_pTextField._event_list={"oneditclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1,"onleadingbuttonclick":1,"ontrailingbuttonclick":1,"oninvalid":1};_pTextField.accessibilityrole="edit";_pTextField.on_create_contents=function(){nexacro.FieldBase.prototype.on_create_contents.call(this);var _a=this._input_element=this._getInputElement();if(!this._onlydisplay){_a.setElementAutoSelect(this._p_autoselect);_a.setElementReadonly(this._p_readonly);_a.setElementMaxLength(this._maxlen);_a.setElementInputType(this._p_inputtype);_a.setElementInputMode(this._keypad_type);_a.setElementAutoSkip(this._p_autoskip);}_a.setElementTextDecoration(this._textdecoration);_a.setElementTextAlign(this._p_textAlign);if(this._padding){_a.setElementPadding(this._padding);}this._undostack=new nexacro._EditUndoStack(this);this.on_apply_iconbuttonsize();this.on_apply_leadingbuttonsize();this.on_apply_trailingbuttonsize();};_pTextField.on_created_contents=function(_a){this.on_apply_value(this._p_value);nexacro.FieldBase.prototype.on_created_contents.call(this,_a);};_pTextField.on_destroy_contents=function(){nexacro.FieldBase.prototype.on_destroy_contents.call(this);var _a=this._undostack;if(_a){_a.destroy();this._undostack=null;}this._focus_keep=null;var _b=this._inputfilter_obj;if(_b){this._inputfilter_obj=null;}this._inputtype_obj=null;this._input_element=null;};_pTextField.on_create_contents_command=function(){this.on_apply_value(this._p_value);this.on_apply_prop_enable(this._real_enable);return nexacro.FieldBase.prototype.on_create_contents_command.call(this);};_pTextField.on_after_created_ext=function(){this.on_apply_inputtype();this._setEventHandlerToLeadingButton();this._setEventHandlerToTrailingButton();this._setEventHandlerToBox();this.LabelFor(this._getInputElement());if(this._p_labelposition=="inside"){this._box._recalc_box();}this.on_apply_readonly();};_pTextField._setEventHandlerToLeadingButton=function(){var _a=this._box._leadbutton;if(_a){_a._setEventHandler("onclick",this.on_fire_leading_onclick,this);}};_pTextField._setEventHandlerToTrailingButton=function(){var _a=this._box._trailbutton;if(_a){_a._setEventHandler("onclick",this.on_fire_trailing_onclick,this);}};_pTextField._setEventHandlerToBox=function(){var _a=this._box;if(_a){_a._setEventHandler("oninput",this.on_fire_oninput,this);}};_pTextField._getInputElement=function(){return this._box?this._box._input_element:null;};_pTextField._apply_setfocus=function(_a,_b){this._processing_updateToDataset=false;var _c=this._getInputElement();if(_c){if(!this._onlydisplay){_c.on_apply_imeSet();_c.on_apply_force_imeSet();if(_a){this._default_value=this._p_value;this._default_text=this._p_text;}var _d=_c._last_selection_range;if(_d&&!this._p_autoselect){this._caret_pos={begin:_d[0],end:_d[1]};}_c.setElementFocus(_a,_b);var _e=_c.getElementText();if(_e!=this._p_text){this._default_text=this._p_text=_e;}}else{if(_a){this._default_value=this._p_value;this._default_text=this._p_text;}}}};_pTextField._changeValidStatusChild=function(_a,_b){var _c=this._box;if(_c._leadbutton){_c._leadbutton._changeUserStatus(_a,_b);}if(_c._trailbutton){_c._trailbutton._changeUserStatus(_a,_b);}};_pTextField.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();var _b=this._input_element;if(_b){var _c=this._getCSSStyleValue("color");if(!this._onlydisplay){_b.setElementEnable(_a,_c);}}var _d=this._box;if(_d){_d._setEnable(_a);}};_pTextField.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.FieldBase.prototype.on_apply_prop_stringresource.call(this);this.on_apply_postfixtext(this._getStringResourceProperty(this._p_postfixtext));this.on_apply_prefixtext();};_pTextField.on_getBindableProperties=function(){return "value";};_pTextField.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){if(this._undostack){this._undostack.clear();}this._setValue(undefined);}};_pTextField.applyto_bindSource=function(_a,_b){if(!this._bind_event){return true;}var _c={propid:_a,val:_b};this._dsEventOccured=true;var _d=this._bind_event._fireEvent(this,_c);this._dsEventOccured=false;return _d;};_pTextField.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=this._getInputElement();var _f=_b.getColumn(_c,_d);_f=this._convertValueType(_f,true);if(this._undostack){this._undostack.clear();}var _g=false;if(this._p_value!=_f){_g=true;}if(!this._dsEventOccured){this._invalidStatus(false);this._validStatus(false);}this._setValue(_f);if(_e&&_g&&!this._onlydisplay){_e.setElementSetSelect(this._p_value?this._p_value.length:0);this._caret_pos=_e.getElementCaretPos();}}};_pTextField.on_changeUserStatus=function(_a,_b,_c){if(_b){return _a;}else{return _c;}};_pTextField._getDlgCode=function(){return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:false};};_pTextField._getDragData=function(){return this.getSelectedText();};_pTextField.on_get_accessibility_label=function(){var _a="";return _a;};_pTextField._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e;if(this._displaytext&&this._displaytext!==""){_e=this._displaytext;}else{_e=this._p_text;}if(_e){var _f=this._getCurrentStyleInheritValue("font");var _g=this._getReferenceAbsoluteFont(_f);var _h=this._getCurrentStyleInheritValue("wordSpacing");var _i=this._getCurrentStyleInheritValue("letterSpacing");var _j=nexacro._getTextSize(this._p_text,_f,false,undefined,"none",_h,_i,undefined,undefined,undefined,_g);_b+=Math.ceil(_j[0]);_c+=Math.ceil(_j[1]);}var _k;if(this._box){if(this._box._leadbutton){_k=this._box._leadbutton._on_getFitSize();_b+=_k[0];_c=Math.max(_k[1],_c);}if(this._box._prefixctrl){_k=this._box._prefixctrl._on_getFitSize();_b+=_k[0];_c=Math.max(_k[1],_c);}if(this._box._postfixctrl){_k=this._box._postfixctrl._on_getFitSize();_b+=_k[0];_c=Math.max(_k[1],_c);}if(this._box._trailbutton){_k=this._box._trailbutton._on_getFitSize();_b+=_k[0];_c=Math.max(_k[1],_c);}}var _l=0,_m=0;if(this._helptxt_control){_k=this._helptxt_control._on_getFitSize();_l+=_k[0];_m=Math.max(_k[1],_m);}if(this._charcnt_control){_k=this._charcnt_control._on_getFitSize();_l+=_k[0];_m=Math.max(_k[1],_m);}_b=Math.max(_l,_b);_c+=_m;return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pTextField.set_iconbuttonsize=function(_a){if(this._p_iconbuttonsize!=_a){this._p_iconbuttonsize=_a;this.on_apply_iconbuttonsize();}};_pTextField.on_apply_iconbuttonsize=function(){if(this._box){this._box.set_iconbuttonsize(this._p_iconbuttonsize);this._recalcLabel();}};_pTextField.set_leadingbuttonsize=function(_a){if(this._p_leadingbuttonsize!=_a){this._p_leadingbuttonsize=_a;this.on_apply_leadingbuttonsize();}};_pTextField.on_apply_leadingbuttonsize=function(){if(this._box){this._box.set_leadingbuttonsize(this._p_leadingbuttonsize);this._recalcLabel();}};_pTextField.set_trailingbuttonsize=function(_a){if(this._p_trailingbuttonsize!=_a){this._p_trailingbuttonsize=_a;this.on_apply_trailingbuttonsize();}};_pTextField.on_apply_trailingbuttonsize=function(){if(this._box){this._box.set_trailingbuttonsize(this._p_trailingbuttonsize);this._recalcLabel();}};_pTextField._checkApplyValidate=function(_a,_b){if(!_a){if(_b&&this._p_inputtype=="number"){if(this._input_element){var _c=this._input_element._getValidity();if(_c){return _c.valid;}else{return false;}}}return -1;}var _d=this._check_valid_pattern;if(this._p_pattern){_d=new RegExp(this._p_pattern);}if(!_d){return -1;}if(_d.test(_a)){if(this._p_inputtype=="number"){return (isNaN(Number(_a))==false&&isFinite(Number(_a))==true);}return true;}return false;};_pTextField._checkInputValidate=function(_a){return this._checkApplyValidate(_a,true);};_pTextField.set_inputtype=function(_a){if(_a){_a=_a.toLowerCase();}if(this._p_inputtype!=_a){this._inputtype_obj=null;switch(_a){case "email":case "url":case "text":case "password":case "number":case "tel":this._p_inputtype=_a;break;default:return;}this.on_apply_inputtype();}};_pTextField.on_apply_inputtype=function(){var _a=this._p_inputtype;switch(_a){case "email":this._check_valid_pattern=/^([0-9a-zA-Z_\.-]+)@([0-9a-zA-Z_-]+)/;this._input_limit_pattern=null;break;case "url":this._check_valid_pattern=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;this._input_limit_pattern=null;break;case "text":case "password":this._check_valid_pattern=null;this._input_limit_pattern=null;break;case "number":this._check_valid_pattern=/^[+-]?(\d+(\.\d*)?|\.\d+)$|[eE]/;this._input_limit_pattern=/[^\d\-+.eE]/g;break;case "tel":this._check_valid_pattern=/^[0-9()\/N,;*#.\-+ ]*$/;this._input_limit_pattern=/[^0-9()\/N,;*#.\-+ ]/g;break;default:return;}this.on_apply_maxlength();var _b=this._checkApplyValidate(this._p_value);if(_b==false){this._validStatus(false);this.on_invalid(true);}else if(_b==true){this._invalidStatus(false);this.on_valid(true);}else{this._invalidStatus(false);this._validStatus(false);}this._inputtype_obj=new nexacro._EditInputType();this._keypad_type=_a;var _c=this._getInputElement();if(_c&&!this._onlydisplay){_c.setElementInputType(_a);_c.setElementInputMode(this._keypad_type);}};_pTextField.set_pattern=function(_a){if(this._p_pattern!=_a){this._p_pattern=_a;}};if(nexacro._Browser=="Runtime"){_pTextField._needChangeInputValue=function(_a){if(_a!=null){if(this._input_limit_pattern){_a=_a.replace(this._input_limit_pattern,'');}if(this._p_inputtype=="number"){var _b="";var _c=false;var _d;for(var _e=0;_e<_a.length;_e++ ){_d=_a.charAt(_e);if(_c&&(_d=='e'||_d=='E')){continue;}else if(!_c&&(_d=='e'||_d=='E')){_c=true;}_b+=_d;}_a=_b;}}return _a;};}else{_pTextField._needChangeInputValue=function(_a){if(_a!=null){if(this._input_limit_pattern){_a=_a.replace(this._input_limit_pattern,'');}}return _a;};}_pTextField.set_value=function(_a,_b){_a=this._convertValueType(_a);_a=this._needChangeInputValue(_a);var _c=this._checkApplyValidate(_a);if(_c==false){this.on_invalid(true);if(this._p_inputtype=="number"){_a="";}}else if(_c==true){this.on_valid(true);}else{this._invalidStatus(false);this._validStatus(false);}if(this._p_value!==_a){if(!this.applyto_bindSource("value",_a)){return;}this._setValue(_a,true);}else{var _d=this._getInputElement();if(_d&&_d.value!=_a){this._setValue(_a,true);}}};_pTextField._setValue=function(_a,_b){if(!_b){var _c=this._checkApplyValidate(_a);if(_c==false){this.on_invalid(true);if(this._p_inputtype=="number"){_a="";}}else if(_c==true){this._invalidStatus(false);this.on_valid(true);}else{this._invalidStatus(false);this._validStatus(false);}}this._p_text=nexacro._toString(_a);this._p_value=_a;this.on_apply_value(_a);};_pTextField.on_apply_value=function(_a){var _b=this._getInputElement();if(_b){var _c=_b.getElementCaretPos();var _d=this._p_text;_a=(this._p_value?this._p_text:this._p_value);var _e=this._getForm();var _f=_e?_e.getFocus():null;if(!this._onlydisplay){if(this._undostack){if(_c&&_c!=-1){this._undostack.push(_a,_c.begin,_c.end);}else{this._undostack.push(_a,0,0);}}if(_a==""){_b.value=null;}_b.setElementValue(_a);if(_a!=null){_d=_b.getElementText();}}else{_b.setElementText(_a);}if(this._p_text!=_d){this._p_text=_d;}this._updateAccessibilityLabel();this._default_value=this._p_value;this._default_text=this._p_text;_c=_b.getElementCaretPos();if(_c&&_c!=-1){this._caret_pos=_c;}else{this._change_value=this._is_created?true:false;}if(!this._isFocused()){this._setLabelFloating(this._isContainsText(),undefined,true);}this._refreshLabel("value");this._setCharCount(this._p_text.length,this._maxlen);}};_pTextField.set_useleadingbutton=function(_a){_a=nexacro._toBoolean(_a);if(this._p_useleadingbutton!=_a){this._p_useleadingbutton=_a;this.on_apply_useleadingbutton();}};_pTextField.on_apply_useleadingbutton=function(){if(this._box){this._box._updateLeadingButton();this._setEventHandlerToLeadingButton();this._box._recalc_box();this._recalcLabel();}};_pTextField.set_usetrailingbutton=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usetrailingbutton!=_a){this._p_usetrailingbutton=_a;this.on_apply_usetrailingbutton();}};_pTextField.on_apply_usetrailingbutton=function(){if(this._box){this._box._updateTrailingButton();this._setEventHandlerToTrailingButton();this._box._recalc_box();this._recalcLabel();}};_pTextField.set_prefixtext=function(_a){_a=nexacro._toString(_a);if(this._p_prefixtext!=_a){this._p_prefixtext=_a;this.on_apply_prefixtext();}};_pTextField.on_apply_prefixtext=function(){if(this._box){this._box._updatePrefixControl();this._setLabelFloating(this._isContainsText(),undefined,true);this._box._recalc_box();this._recalcLabel();}};_pTextField.set_postfixtext=function(_a){_a=nexacro._toString(_a);if(this._p_postfixtext!=_a){this._p_postfixtext=_a;this.on_apply_postfixtext();}};_pTextField.on_apply_postfixtext=function(){if(this._box){this._box._updatepostfixControl();this._setLabelFloating(this._isContainsText(),undefined,true);this._box._recalc_box();this._recalcLabel();}};_pTextField.set_readonly=function(_a){if(this._onlydisplay){return;}_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly();}};_pTextField.on_apply_readonly=function(){var _a=this._p_readonly;if(this._box){this._box._changeStatus("readonly",_a);}var _b=this._getInputElement();if(_b){if(!this._onlydisplay){_b.setElementReadonly(_a);}}};_pTextField.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoselect!=_a){this._p_autoselect=_a;this.on_apply_autoselect(_a);}};_pTextField.on_apply_autoselect=function(_a){var _b=this._getInputElement();if(_b){if(!this._onlydisplay){_b.setElementAutoSelect(_a);}}};_pTextField.set_maxlength=function(_a){if(isNaN(_a= +_a)||_a<0){return;}if(this._p_maxlength!=_a){this._p_maxlength=_a;this.on_apply_maxlength();}};_pTextField.on_apply_maxlength=function(){if(this._p_inputtype=="number"){this._maxlen=0;}else{this._maxlen=this._p_maxlength;}var _a=this._getInputElement();if(_a&&!this._onlydisplay){_a.setElementMaxLength(this._maxlen);this._setCharCount(this._p_text.length,this._maxlen);}};_pTextField.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usecontextmenu!=_a){this._p_usecontextmenu=_a;}};_pTextField.set_cursor=function(_a){this._p_cursor=_a;if(_a){if(this._cursor==null||this._cursor._p_value!=_a){if(this._p_enable&&_a=="auto"){_a="text";}var _b=nexacro.CursorObject(_a);this._cursor=_b;this.on_apply_cursor(_b);}}else{if(this._cursor){this._cursor=null;this.on_apply_cursor(null);}}};_pTextField.on_apply_textAlign=nexacro._emptyFn;_pTextField.on_apply_padding=nexacro._emptyFn;_pTextField.on_apply_textDecoration=nexacro._emptyFn;_pTextField._on_getDisplayText=function(){return this._getStringResourceProperty(this._p_prefixtext)+this._getStringResourceProperty(this._p_text)+this._getStringResourceProperty(this._p_postfixtext);};_pTextField.getLength=function(){return (this._p_value?this._p_value.length:0);};_pTextField.getCaretPos=function(){if(this._p_readonly){return -1;}var _a=this._getInputElement();if(_a){var _b=_a.getElementCaretPos();if(_b&&_b!=-1){return _b.begin;}}return -1;};_pTextField.setCaretPos=function(_a){var _b=this._getInputElement();if(_b){if(!this._onlydisplay){if(arguments.length==0){_a=0;}else{_a=nexacro._toInt(_a);if(_a==-1){if(_a){_a=this._p_text.length;}else{_a=0;}}}_b.setElementSetSelect(_a,_a);}return true;}return false;};_pTextField.getSelect=function(){var _a=this._getInputElement();if(_a&&!this._onlydisplay){return _a.getElementSelectionRange();}return [0,0];};_pTextField.setSelect=function(_a,_b){var _c=this._getInputElement();if(_c){if(!this._onlydisplay){var _d=this._p_text?this._p_text:"";var _e=_d.length;if(nexacro._isNull(_a)||_a===""){_a=0;}if(nexacro._isNull(_b)||_b===""){_b=-1;}if(!nexacro._isNumber(_a)){_a=nexacro._toInt(_a);}if(!nexacro._isNumber(_b)){_b=nexacro._toInt(_b);}if(_a==-1){_a=_e;}if(_b==-1){_b=_e;}if(_a>_b){var _f=_a;_a=_b;_b=_f;}_c.setElementSetSelect(_a,_b);}return true;}return false;};_pTextField.getSelectedText=function(){var _a=this._getInputElement();if(_a){if(!this._onlydisplay){var _b=_a.getElementSelectionRange();var _c=_b[0],_d=_b[1];var _e=this._p_text;if(_e&&(_c!=_d)){return _e.substring(_c,_d);}}}return "";};_pTextField.setSelectedText=function(_a){_a=nexacro._toString(_a);var _b=this._getInputElement();if(_b){if(!this._onlydisplay){var _c=_b.getElementSelectionRange();var _d=_c[0],_e=_c[1];if(_d==_e){return "";}var _f="";if(this._inputtype_obj){var _g=_a.length;for(var _m=0;_m<_g;_m++ ){var _h=_a[_m];if(this._inputtype_obj.test(_h)){_f+=_h;}}_a=_f;}var _i=_a.length;var _j=this._p_text.substring(_d,_e);var _k=this._p_text;var _l=_k.length-(_e-_d)+_i;if(this._maxlen>0&&_l>this._maxlen){_a=_a.substring(0,this._maxlen-_i);}_k=_k.substring(0,_d)+_a+_k.substring(_e);if(this._p_text!=_k){this.set_value(_k,true);_b.setElementSetSelect(_d,_d+_i);}return _j;}}return "";};_pTextField.updateToDataset=function(){this._result_updateToDataset=this.applyto_bindSource("value",this._p_value);if(this._result_updateToDataset){this._default_value=this._p_value;this._default_text=this._p_text;}this._processing_updateToDataset=true;return this._result_updateToDataset;};_pTextField._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pTextField._setReadonlyView=function(_a){var _b=this._getInputElement();if(_b){if(!this._onlydisplay){_b.setElementReadonly(_a);}}};_pTextField._setDefaultCaret=nexacro._emptyFn;_pTextField._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm().getNextComponent(_a,true);if(_b){_b.setFocus();if(_b._is_editable_control){_b._setDefaultCaret();}}};_pTextField._isContainsText=function(){if(this._box&&(this._box._prefixctrl&&this._box._prefixctrl._p_visible||this._box._postfixctrl&&this._box._postfixctrl._p_visible)||this._p_displaynulltext){return true;}return (this.value!=null);};_pTextField.on_fire_leading_onclick=function(_a,_b){return this.on_fire_onleadingbuttonclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey);};_pTextField.on_fire_trailing_onclick=function(_a,_b){return this.on_fire_ontrailingbuttonclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey);};_pTextField._on_value_change=function(_a,_b,_c,_d){var _e=this._getInputElement();if(nexacro._Browser=="Runtime"){var _f=_e.value;this._setValue(_f,true);}if(!this.on_fire_canchange(this,_a,_b,_c,_d)){return false;}var _g=_e.getElementCaretPos();if(_g&&_g!=-1){this._caret_pos=_g;}if(this._processing_updateToDataset&&!this._result_updateToDataset&&_b===_d){this._processing_updateToDataset=false;this._result_updateToDataset=true;return false;}else if(!this.applyto_bindSource("value",_d)){return false;}this._default_value=_d;this._default_text=_c;this.on_fire_onchanged(this,_a,_b,_c,_d);return true;};_pTextField.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oneditclick&&this.oneditclick._has_handlers){var _n=this.getCaretPos();var _o=this._getClientXY(_g,_h);var _p=new nexacro.EditClickEventInfo(this,"oneditclick",_n,_a,_b,_c,_d,_e,_f,_g,_h,_o[0],_o[1],this,this,_m);return this.oneditclick._fireEvent(this,_p);}return true;};_pTextField.on_fire_onleadingbuttonclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._input_element){this._input_element.setElementFocus();}if(this.onleadingbuttonclick&&this.onleadingbuttonclick._has_handlers){var _n=new nexacro.ClickEventInfo(this,"onleadingbuttonclick",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);var _o=this.onleadingbuttonclick._fireEvent(this,_n);_n.destroy();return _o;}return false;};_pTextField.on_fire_ontrailingbuttonclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._input_element){this._input_element.setElementFocus();}if(this.ontrailingbuttonclick&&this.ontrailingbuttonclick._has_handlers){var _n=new nexacro.ClickEventInfo(this,"ontrailingbuttonclick",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);var _o=this.ontrailingbuttonclick._fireEvent(this,_n);_n.destroy();return _o;}return false;};_pTextField.on_fire_canchange=function(_a,_b,_c,_d,_e){if(this.canchange&&this.canchange._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"canchange",_b,_c,_d,_e);this._processing_canchange=true;var _g=this.canchange._fireCheckEvent(this,_f);this._processing_canchange=false;return _g;}return true;};_pTextField.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}};_pTextField.on_fire_oninput=function(){this._invalidStatus(false);this._validStatus(false);var _a=this._getInputElement();var _b=this._needChangeInputValue(_a.value);if(this._p_autoskip&&this._maxlen>0&&_b){if(!_a.isComposing()&&_b.length>=this._maxlen){_b=_b.substr(0,this._maxlen);}}if(_b!=_a.value){_a.setElementValue(_b);}var _c=this._checkInputValidate(_b);if(_c==false){this.on_invalid(false);if(this._p_inputtype=="number"){this._p_value=this._p_text="";}}else if(_c==true){this.on_valid(false);}if(!this._maxlen||this._p_text.length<=this._maxlen){this._setCharCount(this._p_text.length,this._maxlen);}var _d=true;if(this.oninput&&this.oninput._has_handlers){var _e=new nexacro.InputEventInfo(this,"oninput");_d=this.oninput._fireEvent(this,_e);}return _d;};_pTextField.on_input_focus=function(){};_pTextField.on_input_invalid=function(){};_pTextField.on_input_compositionend=function(){var _a=this._getInputElement();var _b=_a.value;if(this._maxlen>0&&_b){var _c=_b.length>=this._maxlen;if(this._p_autoskip&&_c){nexacro._OnceCallbackTimer.callonce(this,function(){this._setFocusToNextComponent();});}}};_pTextField.on_fire_onsetfocus=function(_a,_b,_c,_d,_e){if(!this._onlydisplay){if(!_e){this._focus_keep={};this._focus_keep.oldobj=_a;this._focus_keep.oldref=_b;this._focus_keep.newobj=_c;this._focus_keep.newref=_d;}else{if(!this._p_autoselect){var _f=this._input_element;if(this._caret_pos==-1){if(this._change_value){_f.setElementSetSelect(this._p_value?this._p_value.length:0);}else{if(nexacro._isDesktop()||_f._is_sys_focused){_f.setElementSetSelect(0,0);}}}}if(!this._focus_keep){return false;}if(this.onsetfocus&&this.onsetfocus._has_handlers){_a=this._focus_keep.oldobj;_b=this._focus_keep.oldref;_c=this._focus_keep.newobj;_d=this._focus_keep.newref;this._focus_keep=null;var _g=new nexacro.SetFocusEventInfo(this,"onsetfocus",_a,_b,_c,_c);return this.onsetfocus._fireEvent(this,_g);}}}else{if(this.onsetfocus&&this.onsetfocus._has_handlers){var _g=new nexacro.SetFocusEventInfo(this,"onsetfocus",_a,_b,_c,_c);return this.onsetfocus._fireEvent(this,_g);}}return false;};_pTextField._on_deactivate=function(){this._focus_keep=null;nexacro.Component.prototype._on_deactivate.call(this);};_pTextField._on_input_compositionend=_pEditPtype._on_input_compositionend;_pTextField.on_click_basic_action=_pEditPtype.on_click_basic_action;_pTextField._cancelValue=function(){this._setValue(this._default_value);};_pTextField.on_killfocus_basic_action=function(_a,_b){nexacro.FieldBase.prototype.on_killfocus_basic_action.call(this,_a,_b);this._confirmValue();if(!this._onlydisplay){var _c=this._getRootWindow();var _d=_c._indexOfCurrentFocusPaths(this);if(_d<0){this._getInputElement().setElementBlur();}}this._focus_keep=null;this._input_physical_focused=false;if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}};_pTextField._confirmValue=function(){var _a=this._getInputElement();var _b=this._default_value;var _c=this._default_text;var _d=_a.value;var _e=this._p_value;if(_b!=_d){if(this._maxlen>0){if(_d&&_d.length>this._maxlen){_d=_d.substr(0,this._maxlen);if(_d!=_a.value){_a.setElementValue(_d);}}}}var _f=_d?_d:"";var _g=this._checkApplyValidate(_d,true);if(_g==false){this.on_invalid(true);if(this._p_inputtype=="number"){_d=_f="";}}else if(_g==true){this.on_valid(true);}if(_b!=_d){if(!this._on_value_change(_c,_b,_f,_d)){var _h=_a.getElementCaretPos();var _i=_f?_f.length:0;var _j=_c?_c.length:0;if(_h!=-1){if(_i-_j>=0){_h.begin=_h.end=_h.begin-(_i-_j);}if(_h.begin<0){_h.begin=_h.end=0;}this._caret_pos=_h;}else{this._caret_pos.begin=this._caret_pos.end=_b?_b.length:0;}this._p_value=_b;this._p_text=_c;_d=this._p_value;_a.setElementValue(_b);_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}if(_a&&_a._updateElementValue){if(_e!=this._p_value){_d=this._p_value;}_a._updateElementValue(_d);this._setValue(_d===null?undefined:_d,true);}if(nexacro._OS=="iOS"||nexacro._Browser=="Gecko"){_a._clearNumberGabageValue();}}this._caret_pos=_a.getElementCaretPos();};_pTextField.on_apply_imeSet=function(){var _a=this._input_element;if(_a){var _b=_a._imelocale.getLocale();var _c,_d;var _e=nexacro._cache_textfield_set[_b];if(_b&&_e){for(var _f in _e){this[_f]=_e[_f];}for(_c=0,_d=nexacro._edit_user_override_func.length;_c<_d;_c++ ){if(!_e[nexacro._edit_user_override_func[_c]]){this[nexacro._edit_user_override_func[_c]]=nexacro.TextField.prototype[nexacro._edit_user_override_func[_c]];}}}else{for(_c=0,_d=nexacro._edit_user_override_func.length;_c<_d;_c++ ){this[nexacro._edit_user_override_func[_c]]=nexacro.TextField.prototype[nexacro._edit_user_override_func[_c]];}}}};if(nexacro._Browser!="Runtime"){_pTextField.on_keydown_default_process=function(_a,_b,_c,_d,_e,_f){if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(this._p_readonly||!this._isEnable()){return true;}if(_a==nexacro.Event.KEY_ENTER){this._confirmValue();return true;}if(_a==nexacro.Event.KEY_ESC){if(this._is_use_esc_cancelvalue){this._cancelValue();return true;}}this._is_IOSimeinput=undefined;if(nexacro._OS=="iOS"){var _g=this.getSelect();if(_g[1]==_g[0]){if(_a==nexacro.KeyCode_ImeInput||_a==0){this._is_IOSimeinput=true;}}}return false;};}else{_pTextField.on_keydown_default_process=function(_a,_b,_c,_d,_e,_f){if(this._p_readonly||!this._isEnable()){return false;}if(_a==nexacro.Event.KEY_ESC){if(this._is_use_esc_cancelvalue){this._cancelValue();return true;}}return false;};}_pTextField._on_input_undo=_pEditPtype._on_input_undo;_pTextField._on_input_redo=_pEditPtype._on_input_redo;_pTextField.on_keydown_basic_before_process=_pEditPtype.on_keydown_basic_before_process;_pTextField.on_keydown_basic_specialkey_process=_pEditPtype.on_keydown_basic_specialkey_process;_pTextField.on_keydown_basic_process=_pEditPtype.on_keydown_basic_process;_pTextField.on_keydown_basic_action=_pEditPtype.on_keydown_basic_action;_pTextField.on_keydown_default_before_process=_pEditPtype.on_keydown_default_before_process;_pTextField.on_keydown_default_specialkey_process=_pEditPtype.on_keydown_default_specialkey_process;_pTextField.on_keydown_default_action=_pEditPtype.on_keydown_default_action;_pTextField._isFilterChar=_pEditPtype._isFilterChar;nexacro.TextFieldBox=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.FieldBaseBox.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=this._p_parent._onlydisplay;if(this._onlydisplay){this._p_readonly=true;}};var _pTextFieldBox=nexacro._createPrototype(nexacro.FieldBaseBox,nexacro.TextFieldBox);nexacro.TextFieldBox.prototype=_pTextFieldBox;_pTextFieldBox._type_name="TextFieldBox";_pTextFieldBox._p_flexcrossaxisalign="center";_pTextFieldBox._p_flexmainaxisalign="spacebetween";_pTextFieldBox._p_iconbuttonsize=undefined;_pTextFieldBox._p_leadingbuttonsize=undefined;_pTextFieldBox._p_trailingbuttonsize=undefined;_pTextFieldBox._apply_client_padding=false;_pTextFieldBox._use_readonly_status=true;_pTextFieldBox._use_beforeinput=false;_pTextFieldBox._input_element=null;_pTextFieldBox._leadbutton=null;_pTextFieldBox._trailbutton=null;_pTextFieldBox._prefixctrl=null;_pTextFieldBox._postfixctrl=null;_pTextFieldBox._leading_button_id="leadingbutton";_pTextFieldBox._trailing_button_id="trailingbutton";_pTextFieldBox.on_create_contents=function(){if(this._onlydisplay){this._is_flexible=false;}this._updateLeadingButton(true);this._updatePrefixControl(true);this._updatepostfixControl(true);this._updateTrailingButton(true);var _a;if(!this._onlydisplay){_a=this._input_element=new nexacro.SimpleInputElement(this.getElement(),"simpleinput");_a._use_beforeinput=this._use_beforeinput;_a._use_accessibility_label=false;}else{_a=this._input_element=new nexacro.TextBoxElement(this.getElement(),"simpleinput");_a.typeselector="nexacontentsboxflex";_a.setElementVerticalAlign("middle");_a.setElementValue=_a.setElementText;_a._use_style_padding=true;_a._getInputValue=function(){return this._p_text;};var _b=this._getCurrentStylePadding();if(_b){_a.setElementPadding(_b);}}this._recalc_box();};_pTextFieldBox._updateLeadingButton=function(_a){if(this._p_parent._p_useleadingbutton&&!this._leadbutton){var _b=this._leadbutton=new nexacro.FieldBaseIconControl(this._leading_button_id,0,0,0,0,null,null,null,null,null,null,this);_b._firstchild=true;if(!this._isFlexible()){_b._excluded_flex=true;}_b.createComponent(_a);if(this._isFlexible()){_b.set_flexgrow(0);}}else if(!this._p_parent._p_useleadingbutton){this._destroyLeadingButton();}};_pTextFieldBox._updatePrefixControl=function(_a){if(this._p_parent._p_prefixtext){if(!this._prefixctrl){var _b=this._prefixctrl=new nexacro.FieldBaseTextControl("prefixtext",0,0,0,0,null,null,null,null,null,null,this);this._prefixctrl._type_name="StaticControl";_b._firstchild=true;_b.set_text(this._getStringResourceProperty(this._p_parent._p_prefixtext));if(!this._isFlexible()){_b._excluded_flex=true;}_b.createComponent(_a);if(this._isFlexible()){_b.set_flexgrow(0);_b._update_layoutbasis();}if(!_a){this._destroyLeadingButton();this._updateLeadingButton();}}else{this._prefixctrl.set_text(this._getStringResourceProperty(this._p_parent._p_prefixtext));}}else if(!this._p_parent._p_prefixtext){this._destroyPrefixControl();}};_pTextFieldBox._updatepostfixControl=function(_a){if(this._p_parent._p_postfixtext){if(!this._postfixctrl){var _b=this._postfixctrl=new nexacro.FieldBaseTextControl("postfixtext",0,0,0,0,null,null,null,null,null,null,this);this._postfixctrl._type_name="StaticControl";_b.set_text(this._getStringResourceProperty(this._p_parent._p_postfixtext));if(!this._isFlexible()){_b._excluded_flex=true;}_b.createComponent(_a);if(this._isFlexible()){_b.set_flexgrow(0);_b._update_layoutbasis();}if(!_a){this._destroyTrailingButton();this._updateTrailingButton();}}else{this._postfixctrl.set_text(this._getStringResourceProperty(this._p_parent._p_postfixtext));}}else if(!this._p_parent._p_postfixtext){this._destroypostfixControl();}};_pTextFieldBox._updateTrailingButton=function(_a){if(this._p_parent._p_usetrailingbutton&&!this._trailbutton){var _b=this._trailbutton=new nexacro.FieldBaseIconControl(this._trailing_button_id,0,0,0,0,null,null,null,null,null,null,this);if(!this._isFlexible()){_b._excluded_flex=true;}_b.createComponent(_a);if(this._isFlexible()){_b.set_flexgrow(0);}}else if(!this._p_parent._p_usetrailingbutton){this._destroyTrailingButton();}};_pTextFieldBox._destroyLeadingButton=function(){if(this._leadbutton){this._leadbutton.destroy();this._leadbutton=null;}};_pTextFieldBox._destroyPrefixControl=function(){if(this._prefixctrl){this._prefixctrl.destroy();this._prefixctrl=null;}};_pTextFieldBox._destroypostfixControl=function(){if(this._postfixctrl){this._postfixctrl.destroy();this._postfixctrl=null;}};_pTextFieldBox._destroyTrailingButton=function(){if(this._trailbutton){this._trailbutton.destroy();this._trailbutton=null;}};_pTextFieldBox.on_created_contents=function(_a){if(this._leadbutton){this._leadbutton.on_created(_a);}if(this._prefixctrl){this._prefixctrl.on_created(_a);}this._input_element.create(_a);this._applyInputElementFluidPos();if(this._postfixctrl){this._postfixctrl.on_created(_a);}if(this._trailbutton){this._trailbutton.on_created(_a);}};_pTextFieldBox.on_create_contents_command=function(){var _a="";if(this._leadbutton){_a+=this._leadbutton.createCommand();}if(this._prefixctrl){_a+=this._prefixctrl.createCommand();}_a+=this._input_element.createCommand();if(this._postfixctrl){_a+=this._postfixctrl.createCommand();}if(this._trailbutton){_a+=this._trailbutton.createCommand();}return _a;};_pTextFieldBox.on_attach_contents_handle=function(_a){this._input_element.attachHandle(_a);if(this._leadbutton){this._leadbutton.attachHandle(_a);this._leadbutton._setAccessibilityStatHidden(true);}if(this._prefixctrl){this._prefixctrl.attachHandle(_a);this._prefixctrl._setAccessibilityStatHidden(true);}if(this._postfixctrl){this._postfixctrl.attachHandle(_a);this._postfixctrl._setAccessibilityStatHidden(true);}if(this._trailbutton){this._trailbutton.attachHandle(_a);this._trailbutton._setAccessibilityStatHidden(true);}};_pTextFieldBox.on_destroy_contents=function(){var _a=this._input_element;if(_a){_a.destroy();this._input_element=null;}this._destroyLeadingButton();this._destroyPrefixControl();this._destroypostfixControl();this._destroyTrailingButton();};_pTextFieldBox.set_iconbuttonsize=function(_a){if(this._p_iconbuttonsize!=_a){this._p_iconbuttonsize=_a;this._recalc_box();}};_pTextFieldBox.set_leadingbuttonsize=function(_a){if(this._p_leadingbuttonsize!=_a){this._p_leadingbuttonsize=_a;this._recalc_box();}};_pTextFieldBox.set_trailingbuttonsize=function(_a){if(this._p_trailingbuttonsize!=_a){this._p_trailingbuttonsize=_a;this._recalc_box();}};_pTextFieldBox._recalc_box=function(){if(this._control_element){var _a={left:this._getClientLeft(),top:this._getClientTop(),width:this._getClientWidth(),height:this._getClientHeight()};var _b=this._input_element;var _c=this._leadbutton;var _d=this._trailbutton;var _e=this._prefixctrl;var _f=this._postfixctrl;var _g=_a.left;var _h=_a.top;var _i=_a.width;var _j=_a.height;var _k=this._p_iconbuttonsize;var _l=this._p_leadingbuttonsize;var _m=this._p_trailingbuttonsize;var _n,_o;var _p,_q;var _r,_s;var _t=0,_u=0;var _v=0,_w=0;if(this._p_parent._p_labelposition=="inside"){var _x=this._getCurrentStyleBorder();var _y=_x?_x.top._width:0;var _z=this._p_parent.getFloatingLabelHeight();_h=_z+_y;_j-=(_h);}if(_k==undefined){_n=_j;_o=_j;}else{if(typeof (_k)=="number"){_n=_o=_k;}else{_k=_k.split(" ");_n= +_k[0];_o=(_k[1])? +_k[1]:_j;}}if(_n>_i){_n=_i;}if(_o>_j){_o=_j;}_p=_n;_q=_o;_r=_n;_s=_o;if(_c||_d){var _aa=_h;if(_c){if(_q<_j){_aa=(_j-_q)/2;}if(_l!=undefined){if(typeof (_l)=="number"){_p=_q=_l;}else{_l=_l.split(" ");_p= +_l[0];_q=(_l[1])? +_l[1]:_j;if(_p>_i){_p=_i;}if(_q>_j){_q=_j;}}}_c.move(_g,_aa,_p,_q,null,null);_c._initControlElementLayoutProps();if(this._isFlexible()){_c.getElement()._forceApplyPosTop(_aa);}_v=_p;}if(_d){if(_s<_j){_aa=(_j-_s)/2;}if(_m!=undefined){if(typeof (_m)=="number"){_r=_s=_m;}else{_m=_m.split(" ");_r= +_m[0];_s=(_m[1])? +_m[1]:_j;if(_r>_i){_r=_i;}if(_s>_j){_s=_j;}}}_d.move((_g+_i-_r),_aa,_r,_s,null,null);_d._initControlElementLayoutProps();if(this._isFlexible()){_d.getElement()._forceApplyPosTop(_aa);}_w=_r;}}if(_e){_t=_e._on_getFitSize()[0];_e.move(_g+_v,_h,_t,_j);_e._initControlElementLayoutProps();if(this._isFlexible()){_e.getElement()._forceApplyPosTop(_h);}}if(_f){_u=_f._on_getFitSize()[0];_f.move((_g+_i-_w)-_u,_h,_u,_j);_f._initControlElementLayoutProps();if(this._isFlexible()){_f.getElement()._forceApplyPosTop(_h);}}if(_b){var _ab=_i-_v-_w-_t-_u;var _ac=_v+_t;if(this._isFlexible()==false){_b.setElementPosition(_g+_ac,_h);}else{_b.setElementPosition(_b.left,_h);}_b.setElementSize(_ab,_j);}}};_pTextFieldBox._getWantLabelLeft=function(){var _a=this._leadbutton;var _b=this._prefixctrl;var _c=-1;if(_a&&_a._p_visible){_c=this._getClientLeft()+_a._adjust_width;}if(_b&&_b._p_visible){if(_c==-1){_c=this._getClientLeft();}_c+=_b._adjust_width;}return _c;};_pTextFieldBox._setTextFielBoxLabelposition=function(_a){this._textFielBoxLabelposition=_a;};_pTextFieldBox._applyInputElementFluidPos=function(){var _a=this._input_element;if(_a){_a.setElementLayoutFluidPos(this.visible);}};_pTextFieldBox._getWantLabelWidth=function(){var _a=this._getClientWidth();var _b=this._leadbutton;var _c=this._trailbutton;var _d=this._prefixctrl;var _e=this._postfixctrl;if(_b&&_b._p_visible){_a-=_b._adjust_width;}if(_c&&_c._p_visible){_a-=_c._adjust_width;}if(_d&&_d._p_visible){_a-=_d._adjust_width;}if(_e&&_e._p_visible){_a-=_e._adjust_width;}return _a;};_pTextFieldBox.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();if(this._leadbutton){this._leadbutton._setEnable(_a);}if(this._trailbutton){this._trailbutton._setEnable(_a);}};_pTextFieldBox.on_change_containerRect=function(_a,_b){this._recalc_box();};_pTextFieldBox.on_input_focus=function(){this._p_parent._input_physical_focused=true;this._p_parent.on_input_focus();this._p_parent.on_fire_onsetfocus(this._p_parent,this,this._p_parent,this,true);};_pTextFieldBox.on_input_compositionend=function(){this._p_parent.on_input_compositionend();};_pTextFieldBox._on_input_compositionend=function(_a,_b){return this._p_parent._on_input_compositionend(_a,_b);};_pTextFieldBox._setAccessibilityReadOnly=nexacro._emptyFn;_pTextFieldBox.on_keyup_default_action=function(_a,_b,_c,_d,_e,_f){return this._p_parent.on_keyup_default_action(_a,_b,_c,_d,_e,_f);};_pTextFieldBox.on_keyinput_basic_action=function(_a){return this._p_parent.on_keyinput_basic_action(_a);};_pTextFieldBox.on_click_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){return this._p_parent.on_click_basic_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);};_pTextFieldBox._on_contextmenu_default_action=function(){return nexacro._checkShowContextMenu(this._p_parent);};_pTextFieldBox.on_apply_imeSet=function(){var _a=this.parent;if(_a){_a.on_apply_imeSet();}};nexacro._defineProperties(_pTextField,_pTextField._properties);delete _pTextFieldBox;delete _pTextField;delete _pEditPtype;};if(!nexacro.MultiLineTextField){nexacro.MultiLineTextField=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.FieldBase.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=_m;if(_m){this._p_readonly=true;}this._focus_keep=null;};var _pMultiLineTextField=nexacro._createPrototype(nexacro.FieldBase,nexacro.MultiLineTextField);nexacro.MultiLineTextField.prototype=_pMultiLineTextField;var _pTextAreaPtype=nexacro.TextArea.prototype;_pMultiLineTextField._type_name="MultiLineTextField";_pMultiLineTextField._boxcontrol_socket={instance_name:"MultiLineTextFieldBox",id:"box"};nexacro.MultiLineTextField._TAB_CHAR=nexacro.TextArea._TAB_CHAR;_pMultiLineTextField._p_acceptstab=false;_pMultiLineTextField._p_text="";_pMultiLineTextField._p_value=undefined;_pMultiLineTextField._p_autoselect=false;_pMultiLineTextField._p_autoskip=false;_pMultiLineTextField._p_readonly=false;_pMultiLineTextField._p_dragscrolltype="both";_pMultiLineTextField._p_maxlength=0;_pMultiLineTextField._initsoftkeyboard=undefined;_pMultiLineTextField._p_usesoftkeyboard=true;_pMultiLineTextField._p_scrollbarsize=undefined;_pMultiLineTextField._p_usecontextmenu=true;_pMultiLineTextField._properties=[{name:"acceptstab"},{name:"text",readonly:true},{name:"value"},{name:"scrollbarsize"},{name:"scrollbarbarminsize"},{name:"scrollbarbaroutsize"},{name:"scrollbardecbuttonsize"},{name:"scrollbarincbuttonsize"},{name:"scrollbartrackbarsize"},{name:"scrollindicatorsize"},{name:"dragscrolltype"},{name:"autoselect"},{name:"autoskip"},{name:"readonly"},{name:"scrollbartype"},{name:"cursor"},{name:"maxlength"},{name:"usesoftkeyboard"},{name:"usecontextmenu"}];_pMultiLineTextField._use_container_move=false;_pMultiLineTextField._not_use_scrollTop=true;_pMultiLineTextField._input_element=null;_pMultiLineTextField._undostack=null;_pMultiLineTextField._is_undo=false;_pMultiLineTextField._default_value=undefined;_pMultiLineTextField._default_text="";_pMultiLineTextField._keypad_type="text";_pMultiLineTextField._imedisable=false;_pMultiLineTextField._processing_updateToDataset=false;_pMultiLineTextField._result_updateToDataset=true;_pMultiLineTextField._processing_canchange=false;_pMultiLineTextField._onlydisplay=false;_pMultiLineTextField._apply_client_padding=false;_pMultiLineTextField._has_inputElement=true;_pMultiLineTextField._change_value=false;_pMultiLineTextField._update_scroll_lock=false;_pMultiLineTextField._is_simple_control=true;_pMultiLineTextField._is_editable_control=true;_pMultiLineTextField._use_readonly_status=true;_pMultiLineTextField._caret_pos=-1;_pMultiLineTextField._event_list={"oneditclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"onmousewheel":1,"oncontextmenu":1,"onvscroll":1,"onhscroll":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pMultiLineTextField.accessibilityrole="edit";_pMultiLineTextField.on_create_contents=function(){nexacro.FieldBase.prototype.on_create_contents.call(this);var _a=this._input_element=this._getInputElement();if(!this._onlydisplay){_a.setElementAutoSelect(this._p_autoselect);_a.setElementReadonly(this._p_readonly);_a.setElementMaxLength(this._p_maxlength);_a.setElementInputMode(this._keypad_type);_a.setElementAutoSkip(this._p_autoskip);}_a.setElementTextDecoration(this._textdecoration);_a.setElementTextAlign(this._p_textAlign);if(this._padding){_a.setElementPadding(this._padding);}var _b=this._getCSSStyleValue("wordWrap");if(_b){_a.setElementCSSMapInfo(_b);}if(this._p_wordWrap){_a.setElementWordWrap(this._p_wordWrap);}this._undostack=new nexacro._EditUndoStack(this);this.on_apply_scrollbartype();this.on_apply_scrolltype();this.on_apply_scrollbarsize();this.on_apply_scrollbarbarminsize();this.on_apply_scrollbarbaroutsize();this.on_apply_scrollbardecbuttonsize();this.on_apply_scrollbarincbuttonsize();this.on_apply_scrollbartrackbarsize();this.on_apply_scrollindicatorsize();};_pMultiLineTextField.on_created_contents=function(_a){var _b=this._getInputElement();if(_b){var _c=this._p_wordWrap||this._getCSSStyleValue("wordWrap");if(this._hscrollbartype&&this._hscrollbartype.indexOf("auto")>-1&&(_c!="none"&&_c!==undefined)){this._hscrollbartype="none";}this.on_apply_padding(this._padding);this.on_apply_value(this._p_value);if(nexacro._enableaccessibility){if(this._p_readonly){this._setAccessibilityFlagReadOnly(this._p_readonly);}this._setAccessibilityFlagMultiLine(true);}this.on_apply_scrollbartype();this._onRecalcScrollSize();this._onResetScrollBar();}nexacro.FieldBase.prototype.on_created_contents.call(this,_a);};_pMultiLineTextField.on_destroy_contents=function(){var _a=this._undostack;if(_a){_a.destroy();this._undostack=null;}this._focus_keep=null;var _b=this._inputfilter_obj;if(_b){this._inputfilter_obj=null;}var _c=this._inputtype_obj;if(_c){this._inputtype_obj=null;}this._input_element=null;};_pMultiLineTextField.on_create_contents_command=function(){var _a=this._p_wordWrap||this._getCSSStyleValue("wordWrap");if(this._hscrollbartype&&this._hscrollbartype.indexOf("auto")>-1&&(_a!="none"&&_a!==undefined)){this._hscrollbartype="none";}this.on_apply_padding(this._padding);this.on_apply_value(this._p_value);return nexacro.FieldBase.prototype.on_create_contents_command.call(this);};_pMultiLineTextField.on_after_created_ext=function(){this._setEventHandlerToBox();this.LabelFor(this._getInputElement());if(nexacro._enableaccessibility){if(this._p_readonly){this._setAccessibilityFlagReadOnly(this._p_readonly);}this._setAccessibilityFlagMultiLine(true);}this.on_apply_scrollbartype();this._onRecalcScrollSize();this._onResetScrollBar();this.on_apply_readonly();};_pMultiLineTextField._setEventHandlerToBox=function(){var _a=this._box;if(_a){_a._setEventHandler("oninput",this.on_fire_oninput,this);}};_pMultiLineTextField._getInputElement=function(){return this._box?this._box._input_element:null;};_pMultiLineTextField._setDefaultCaret=nexacro._emptyFn;_pMultiLineTextField._apply_setfocus=function(_a,_b){this._processing_updateToDataset=false;var _c=this._getInputElement();if(_c){if(!this._onlydisplay){_c.on_apply_imeSet();_c.on_apply_force_imeSet();this._want_tab=true;if(_a){this._default_value=this._p_value;this._default_text=this._p_text;}var _d=_c._last_selection_range;if(_d&&!this._p_autoselect){this._caret_pos={begin:_d[0],end:_d[1]};}var _e=this._getWindow();if(_e){var _f=_e._cur_ldown_elem?_e._cur_ldown_elem.linkedcontrol:null;if(!(_f&&_f instanceof nexacro.ScrollBarControl)){_c.setElementFocus(_a,_b);}}var _g=_c.getElementText();if(_g!=this._p_text){this._default_text=this._p_text=_g;}if(nexacro._needAdjustScrollPosition(this._is_set_value)){this._adjust_scrollPosition(_c,_a);}}else{this._want_tab=true;if(_a){this._default_value=this._p_value;this._default_text=this._p_text;}if(nexacro._needAdjustScrollPosition(this._is_set_value)){this._adjust_scrollPosition(_c,_a);}}}};_pMultiLineTextField.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=this._getInputElement();var _f=_b.getColumn(_c,_d);_f=this._convertValueType(_f,true);if(_f==this._p_value){return;}if(this._undostack){this._undostack.clear();}var _g=false;if(this._p_value!=_f){_g=true;}this._setValue(_f,true);if(_e&&_g&&!this._onlydisplay){_e.setElementSetSelect(this._p_value?this._p_value.length:0);this._caret_pos=_e.getElementCaretPos();}}};_pMultiLineTextField.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();var _b=this._input_element;if(_b){var _c=this._getCSSStyleValue("color");if(!this._onlydisplay){_b.setElementEnable(_a,_c);}}var _d=this._box;if(_d){_d._setEnable(_a);}};_pMultiLineTextField.on_apply_status=_pTextAreaPtype.on_apply_status;_pMultiLineTextField._getDlgCode=_pTextAreaPtype._getDlgCode;_pMultiLineTextField.on_getBindableProperties=_pTextAreaPtype.on_getBindableProperties;_pMultiLineTextField.on_init_bindSource=_pTextAreaPtype.on_init_bindSource;_pMultiLineTextField.on_changeUserStatus=_pTextAreaPtype.on_changeUserStatus;_pMultiLineTextField._getDlgCode=_pTextAreaPtype._getDlgCode;_pMultiLineTextField._getDragData=_pTextAreaPtype._getDragData;_pMultiLineTextField.set_text=nexacro._emptyFn;_pMultiLineTextField.set_value=_pTextAreaPtype.set_value;_pMultiLineTextField.on_apply_value=function(_a){var _b=this._getInputElement();if(_b){var _c=_b.getElementCaretPos();var _d=this._p_text;_a=_a?this._p_text:_a;if(!this._onlydisplay){if(this._undostack){if(_c&&_c!=-1){this._undostack.push(_a,_c.begin,_c.end);}else{this._undostack.push(_a,0,0);}}_b.setElementValue(_a);_d=_b.getElementText();}else{_b.setElementText(_a);}if(this._p_text!=_d){this._p_text=_d;}this._updateAccessibilityLabel();this._default_value=this._p_value;this._default_text=this._p_text;if(this._is_created){this._onRecalcScrollSize();this._onResetScrollBar();}_c=_b.getElementCaretPos();if(_c&&_c!=-1){this._caret_pos=_c;}else{this._change_value=this._is_created?true:false;}this._is_set_value=true;if(!this._isFocused()){this._setLabelFloating(this._isContainsText(),undefined,true);}this._refreshLabel("value");this._setCharCount(this._p_text.length,this._p_maxlength);}};_pMultiLineTextField._isContainsText=function(){if(this._p_displaynulltext){return true;}return (this.value!=null);};_pMultiLineTextField.on_apply_readonly=function(){var _a=this._p_readonly;if(this._box){this._box._changeStatus("readonly",_a);}var _b=this._getInputElement();if(_b){if(!this._onlydisplay){_b.setElementReadonly(_a);}}};_pMultiLineTextField.on_apply_scrollbartype=function(){if(this._box){this._box.set_scrollbartype(this._p_scrollbartype);}};_pMultiLineTextField.on_apply_scrolltype=function(){if(this._box){this._box.set_scrolltype(this._p_scrolltype);}};_pMultiLineTextField.set_scrollbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this._p_scrollbarsize!=_a){this._p_scrollbarsize=_a;this.on_apply_scrollbarsize();}};_pMultiLineTextField.on_apply_scrollbarsize=function(){if(this._box){this._box.set_scrollbarsize(this._p_scrollbarsize);}};_pMultiLineTextField.set_scrollbarbarminsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this._p_scrollbarbarminsize=_a;this.on_apply_scrollbarbarminsize();};_pMultiLineTextField.on_apply_scrollbarbarminsize=function(){if(this._box){this._box.set_scrollbarbarminsize(this._p_scrollbarbarminsize);}};_pMultiLineTextField.set_scrollbarbaroutsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this._p_scrollbarbaroutsize=_a;this.on_apply_scrollbarbaroutsize();};_pMultiLineTextField.on_apply_scrollbarbaroutsize=function(){if(this._box){this._box.set_scrollbarbaroutsize(this._p_scrollbarbaroutsize);}};_pMultiLineTextField.set_scrollbardecbuttonsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this._p_scrollbardecbuttonsize=_a;this.on_apply_scrollbardecbuttonsize();};_pMultiLineTextField.on_apply_scrollbardecbuttonsize=function(){if(this._box){this._box.set_scrollbardecbuttonsize(this._p_scrollbardecbuttonsize);}};_pMultiLineTextField.set_scrollbarincbuttonsize=function(_a){if(_a!==undefined){if(isNaN(_a)){return;}}this._p_scrollbarincbuttonsize=_a;this.on_apply_scrollbarincbuttonsize();};_pMultiLineTextField.on_apply_scrollbarincbuttonsize=function(){if(this._box){this._box.set_scrollbarincbuttonsize(this._p_scrollbarincbuttonsize);}};_pMultiLineTextField.set_scrollbarbaroutsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this._p_scrollbarbaroutsize!=_a){this._p_scrollbarbaroutsize=_a;this.on_apply_scrollbarbaroutsize();}};_pMultiLineTextField.on_apply_scrollbarbaroutsize=function(){if(this._box){this._box.set_scrollbarbaroutsize(this._p_scrollbarbaroutsize);}};_pMultiLineTextField.set_scrollbartrackbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this._p_scrollbartrackbarsize=_a;this.on_apply_scrollbartrackbarsize();};_pMultiLineTextField.on_apply_scrollbartrackbarsize=function(){if(this._box){this._box.set_scrollbartrackbarsize(this._p_scrollbartrackbarsize);}};_pMultiLineTextField.set_scrollindicatorsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this._p_scrollindicatorsize=_a;this.on_apply_scrollindicatorsize();};_pMultiLineTextField.on_apply_scrollindicatorsize=function(){if(this._box){this._box.set_scrollindicatorsize(this._p_scrollindicatorsize);}};_pMultiLineTextField.set_dragscrolltype=function(_a){var _b=["none","vert","horz","both","all"];if(_b.indexOf(_a)==-1){return;}this._p_dragscrolltype=_a;if(this._box){this._box.set_dragscrolltype(_a);}};_pMultiLineTextField.set_maxlength=function(_a){if(isNaN(_a= +_a)||_a<0){return;}if(this._p_maxlength!=_a){this._p_maxlength=_a;this.on_apply_maxlength(_a);}};_pMultiLineTextField.on_apply_maxlength=function(_a){var _b=this._getInputElement();if(_b&&!this._onlydisplay){_b.setElementMaxLength(_a);var _c=_b.value;this._setCharCount(!_c?0:_c.length,this._p_maxlength);}};_pMultiLineTextField.set_readonly=_pTextAreaPtype.set_readonly;_pMultiLineTextField.set_autoselect=_pTextAreaPtype.set_autoselect;_pMultiLineTextField.on_apply_autoselect=_pTextAreaPtype.on_apply_autoselect;_pMultiLineTextField.set_usecontextmenu=_pTextAreaPtype.set_usecontextmenu;_pMultiLineTextField.on_apply_wordWrap=_pTextAreaPtype.on_apply_wordWrap;_pMultiLineTextField.set_scrollbartype=_pTextAreaPtype.set_scrollbartype;_pMultiLineTextField.set_acceptstab=_pTextAreaPtype.set_acceptstab;_pMultiLineTextField.set_cursor=_pTextAreaPtype.set_cursor;_pMultiLineTextField.on_apply_textAlign=nexacro._emptyFn;_pMultiLineTextField.on_apply_padding=nexacro._emptyFn;_pMultiLineTextField.on_apply_textDecoration=nexacro._emptyFn;_pMultiLineTextField.getLength=_pTextAreaPtype.getLength;_pMultiLineTextField.getCaretPos=_pTextAreaPtype.getCaretPos;_pMultiLineTextField.setCaretPos=_pTextAreaPtype.setCaretPos;_pMultiLineTextField.getSelect=_pTextAreaPtype.getSelect;_pMultiLineTextField.setSelect=_pTextAreaPtype.setSelect;_pMultiLineTextField.getSelectedText=_pTextAreaPtype.getSelectedText;_pMultiLineTextField.setSelectedText=_pTextAreaPtype.setSelectedText;_pMultiLineTextField.insertText=_pTextAreaPtype.insertText;_pMultiLineTextField.deleteText=_pTextAreaPtype.deleteText;_pMultiLineTextField.replace=_pTextAreaPtype.replace;_pMultiLineTextField.updateToDataset=_pTextAreaPtype.updateToDataset;_pMultiLineTextField.find=_pTextAreaPtype.find;_pMultiLineTextField._on_getDisplayText=function(){return this._p_text;};_pMultiLineTextField.on_input_focus=function(){};_pMultiLineTextField.on_input_compositionend=function(){var _a=this._getInputElement();var _b=_a.value;if(this._p_maxlength>0&&_b){var _c=_b.length>=this._p_maxlength;if(this._p_autoskip&&_c){nexacro._OnceCallbackTimer.callonce(this,function(){this._setFocusToNextComponent();});}}};_pMultiLineTextField.on_fire_onsetfocus=function(_a,_b,_c,_d,_e){if(!this._onlydisplay){if(!_e){this._focus_keep={};this._focus_keep.oldobj=_a;this._focus_keep.oldref=_b;this._focus_keep.newobj=_c;this._focus_keep.newref=_d;}else{if(!this._focus_keep){return false;}if(!this._p_autoselect){var _f=this._input_element;if(this._caret_pos==-1){if(this._change_value){_f.setElementSetSelect(this._p_value?this._p_value.length:0);}else{if(nexacro._isDesktop()||_f._is_sys_focused){_f.setElementSetSelect(0,0);}}}}if(this.onsetfocus&&this.onsetfocus._has_handlers){_a=this._focus_keep.oldobj;_b=this._focus_keep.oldref;_c=this._focus_keep.newobj;_d=this._focus_keep.newref;this._focus_keep=null;var _g=new nexacro.SetFocusEventInfo(this,"onsetfocus",_a,_b,_c,_c);return this.onsetfocus._fireEvent(this,_g);}}}else{if(this.onsetfocus&&this.onsetfocus._has_handlers){var _g=new nexacro.SetFocusEventInfo(this,"onsetfocus",_a,_b,_c,_c);return this.onsetfocus._fireEvent(this,_g);}}return false;};_pMultiLineTextField._cancelValue=function(){this._setValue(this._default_value);};if(nexacro._Browser!="Runtime"){_pMultiLineTextField._on_deactivate=function(){this._focus_keep=null;nexacro.Component.prototype._on_deactivate.call(this);};_pMultiLineTextField._confirmValue=function(){var _a=this._getInputElement();var _b=this._default_value;var _c=this._default_text;var _d=_a.value;if(_b!=_d){if(this._p_maxlength>0){if(_d&&_d.length>this._p_maxlength){_d=_d.substr(0,this._p_maxlength);if(_d!=_a.value){_a.setElementValue(_d);}}}}var _e=_d?_d:"";if(_b!=_d){if(!this._on_value_change(_c,_b,_e,_d)){this._p_value=_b;this._p_text=_c;_a.setElementValue(_b);_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}if(_a&&_a._updateElementValue){_a._updateElementValue(_a.value);this._setValue(_a.value===null?undefined:_a.value,true);}}this._caret_pos=_a.getElementCaretPos();};_pMultiLineTextField.on_fire_onkillfocus=function(_a,_b){this._confirmValue();if(!this._onlydisplay){var _c=this._getInputElement();if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}this._adjust_scrollPosition(_c);var _d=this._getRootWindow();var _e=_d._indexOfCurrentFocusPaths(this);if(_e<0){_c.setElementBlur();}}nexacro.Component.prototype.on_fire_onkillfocus.call(this,_a,_b);this._focus_keep=null;this._input_physical_focused=false;};_pMultiLineTextField.on_keydown_default_process=function(_a,_b,_c,_d,_e,_f){if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(this._p_readonly||!this._isEnable()){return;}if(_a==nexacro.Event.KEY_ESC){if(this._is_use_esc_cancelvalue){this._cancelValue();return true;}}this._is_IOSimeinput=undefined;if(nexacro._OS=="iOS"){var _g=this.getSelect();if(_g[1]==_g[0]){if(_a==nexacro.KeyCode_ImeInput||_a==0){this._is_IOSimeinput=true;}}}};_pMultiLineTextField.on_killfocus_basic_action=function(_a,_b){nexacro.FieldBase.prototype.on_killfocus_basic_action.call(this);var _c=this._input_element;if(_c){if(!this._onlydisplay){var _d=_c.getElementSelectionRange();if(_d[0]==_d[1]){_c._setElementLastSelectionRange();}}}};}else{_pMultiLineTextField.on_keyup_basic_before_process=_pTextAreaPtype.on_keyup_basic_before_process;_pMultiLineTextField.on_keyup_basic_specialkey_process=_pTextAreaPtype.on_keyup_basic_specialkey_process;_pMultiLineTextField.on_keyup_default_process=_pTextAreaPtype.on_keyup_default_process;_pMultiLineTextField.on_keyup_default_action=_pTextAreaPtype.on_keyup_default_action;_pMultiLineTextField.on_keypress_basic_before_process=_pTextAreaPtype.on_keypress_basic_before_process;_pMultiLineTextField.on_keypress_basic_specialkey_process=_pTextAreaPtype.on_keypress_basic_specialkey_process;_pMultiLineTextField.on_deactivate_process=_pTextAreaPtype.on_deactivate_process;_pMultiLineTextField._on_deactivate=function(){this._focus_keep=null;nexacro.Component.prototype._on_deactivate.call(this);this.on_deactivate_process.call(this);};_pMultiLineTextField.on_fire_onkillfocus=function(_a,_b){nexacro.Component.prototype.on_fire_onkillfocus.call(this,_a,_b);var _c=this._input_element;if(_c&&_c._updateElementValue&&!this._onlydisplay){_c._updateElementValue(_c.value);this._setValue(_c.value===null?undefined:_c.value);}this._focus_keep=null;this._input_physical_focused=false;};_pMultiLineTextField.on_keydown_default_process=function(_a,_b,_c,_d,_e,_f){if(this._p_readonly||!this._isEnable()){return;}if(_a==nexacro.Event.KEY_ESC){if(this._is_use_esc_cancelvalue){this._cancelValue();return true;}}};_pMultiLineTextField.on_killfocus_basic_action=function(_a,_b){nexacro.FieldBase.prototype.on_killfocus_basic_action.call(this);nexacro.TextArea.prototype.on_killfocus_basic_action.call(this);};}_pMultiLineTextField._on_input_undo=_pTextAreaPtype._on_input_undo;_pMultiLineTextField._on_input_redo=_pTextAreaPtype._on_input_redo;_pMultiLineTextField.on_keydown_basic_before_process=_pTextAreaPtype.on_keydown_basic_before_process;_pMultiLineTextField.on_keydown_basic_specialkey_process=_pTextAreaPtype.on_keydown_basic_specialkey_process;_pMultiLineTextField.on_keydown_basic_process=_pTextAreaPtype.on_keydown_basic_process;_pMultiLineTextField.on_keydown_basic_action=_pTextAreaPtype.on_keydown_basic_action;_pMultiLineTextField.on_keydown_default_specialkey_process=_pTextAreaPtype.on_keydown_default_specialkey_process;_pMultiLineTextField.on_keydown_default_before_process=_pTextAreaPtype.on_keydown_default_before_process;_pMultiLineTextField.on_keydown_default_action=_pTextAreaPtype.on_keydown_default_action;_pMultiLineTextField.on_keyinput_basic_before_process=_pTextAreaPtype.on_keyinput_basic_before_process;_pMultiLineTextField.on_keyinput_basic_process=_pTextAreaPtype.on_keyinput_basic_process;_pMultiLineTextField.on_keyinput_basic_action=_pTextAreaPtype.on_keyinput_basic_action;_pMultiLineTextField._beforeinput_process_with_NexacroInputEvent=_pTextAreaPtype._beforeinput_process_with_NexacroInputEvent;_pMultiLineTextField.on_beforeinput_process_with_NexacroInputEvent=_pTextAreaPtype.on_beforeinput_process_with_NexacroInputEvent;_pMultiLineTextField.on_beforekeyinput_basic_action=_pTextAreaPtype.on_beforekeyinput_basic_action;_pMultiLineTextField._isFilterChar=_pTextAreaPtype._isFilterChar;_pMultiLineTextField._on_value_change=_pTextAreaPtype._on_value_change;_pMultiLineTextField.on_click_basic_action=_pTextAreaPtype.on_click_basic_action;_pMultiLineTextField.on_fire_onclick=_pTextAreaPtype.on_fire_onclick;_pMultiLineTextField.on_fire_canchange=_pTextAreaPtype.on_fire_canchange;_pMultiLineTextField.on_fire_onchanged=_pTextAreaPtype.on_fire_onchanged;_pMultiLineTextField._convertValueType=_pTextAreaPtype._convertValueType;_pMultiLineTextField._setValue=_pTextAreaPtype._setValue;_pMultiLineTextField._on_input_compositionend=_pTextAreaPtype._on_input_compositionend;_pMultiLineTextField.on_killfocus_basic_process=_pTextAreaPtype.on_killfocus_basic_process;_pMultiLineTextField._adjust_scrollPosition=function(_a,_b){return this._box._adjust_scrollPosition(_a,_b);};_pMultiLineTextField._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm().getNextComponent(_a,true);if(_b){_b.setFocus();if(_b._is_editable_control){_b._setDefaultCaret();}}};_pMultiLineTextField.on_fire_oninput=function(){var _a=this._getInputElement();var _b=_a.value;if(this._p_autoskip&&this._p_maxlength>0&&_b){if(!_a.isComposing()&&_b.length>=this._p_maxlength){_b=_b.substr(0,this._p_maxlength);}}if(_b!=_a.value){_a.setElementValue(_b);}var _c=_a.value;this._setCharCount(!_c?0:_c.length,this._p_maxlength);var _d=true;if(this.oninput&&this.oninput._has_handlers){var _e=new nexacro.InputEventInfo(this,"oninput");_d=this.oninput._fireEvent(this,_e);}return _d;};_pMultiLineTextField.on_apply_imeSet=function(){var _a=this._input_element;if(_a){var _b,_c;var _d=_a._imelocale.getLocale();if(_d&&nexacro._cache_multilinetextfield_set[_d]){for(var _e in nexacro._cache_multilinetextfield_set[_d]){this[_e]=nexacro._cache_multilinetextfield_set[_d][_e];}for(_b=0,_c=nexacro._edit_user_override_func.length;_b<_c;_b++ ){if(!nexacro._cache_multilinetextfield_set[_d][nexacro._edit_user_override_func[_b]]){this[nexacro._edit_user_override_func[_b]]=nexacro.MultiLineTextField.prototype[nexacro._edit_user_override_func[_b]];}}}else{for(_b=0,_c=nexacro._edit_user_override_func.length;_b<_c;_b++ ){this[nexacro._edit_user_override_func[_b]]=nexacro.MultiLineTextField.prototype[nexacro._edit_user_override_func[_b]];}}}};nexacro.MultiLineTextFieldBox=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.FieldBaseScrollableBox.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=this._p_parent._onlydisplay;if(this._onlydisplay){this._p_readonly=true;}};var _pMultiLineTextFieldBox=nexacro._createPrototype(nexacro.FieldBaseScrollableBox,nexacro.MultiLineTextFieldBox);nexacro.MultiLineTextFieldBox.prototype=_pMultiLineTextFieldBox;_pMultiLineTextFieldBox._type_name="MultiLineTextFieldBox";_pMultiLineTextFieldBox._use_container_move=false;_pMultiLineTextFieldBox._apply_client_padding=false;_pMultiLineTextFieldBox._use_readonly_status=true;_pMultiLineTextFieldBox._input_element=null;_pMultiLineTextFieldBox._p_dragscrolltype="both";_pMultiLineTextFieldBox.on_create_contents=function(){var _a=this.getElement();if(_a){var _b;if(!this._onlydisplay){_b=new nexacro.SimpleTextAreaElement(_a,"simpletextarea");_b._use_accessibility_label=false;}else{_b=new nexacro.TextBoxElement(_a,"simpletextarea");_b.setElementVerticalAlign("middle");_b.setElementFlexGrow(1);_b.setElementValue=_b.setElementText;}this._input_element=_b;this._recalc_box();}};_pMultiLineTextFieldBox.on_created_contents=function(_a){this._input_element.create(_a);};_pMultiLineTextFieldBox.on_create_contents_command=function(){return this._input_element.createCommand();};_pMultiLineTextFieldBox.on_attach_contents_handle=function(_a){this._input_element.attachHandle(_a);if(nexacro._enableaccessibility){if(this._p_readonly){this._setAccessibilityFlagReadOnly(this._p_readonly);}this._setAccessibilityFlagMultiLine(true);}this.on_apply_scrollbartype();this._onRecalcScrollSize();this._onResetScrollBar();};_pMultiLineTextFieldBox.on_destroy_contents=function(){var _a=this._input_element;if(_a){_a.destroy();this._input_element=null;}var _b=this._vscroll_animationframe;if(_b){_b.destroy();}var _c=this._hscroll_animationframe;if(_c){_c.destroy();}};_pMultiLineTextFieldBox.on_change_containerRect=function(_a,_b){this._recalc_box();};_pMultiLineTextFieldBox._recalc_box=function(){if(this._control_element){var _a={left:0,top:0,width:this._getClientWidth(),height:this._getClientHeight()};var _b=this._input_element;var _c=_a.left;var _d=_a.top;var _e=_a.width;var _f=_a.height;if(_b){_b.setElementPosition(_c,_d);_b.setElementSize(_e,_f);if(this._update_scroll_lock==true){return false;}this._update_scroll_lock=true;this._onRecalcScrollSize();this._onResetScrollBar();this._update_scroll_lock=false;}}};_pMultiLineTextFieldBox.on_input_focus=function(){this._p_parent._input_physical_focused=true;this._p_parent.on_input_focus();this._p_parent.on_fire_onsetfocus(this._p_parent,this,this._p_parent,this,true);};_pMultiLineTextFieldBox.on_input_compositionend=function(){this._p_parent.on_input_compositionend();};_pMultiLineTextFieldBox.on_keyinput_basic_action=function(_a){return this._p_parent.on_keyinput_basic_action(_a);};_pMultiLineTextFieldBox._on_input_compositionend=function(_a,_b){return this._p_parent._on_input_compositionend(_a,_b);};_pMultiLineTextFieldBox.on_click_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){return this._p_parent.on_click_basic_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);};_pMultiLineTextFieldBox.on_apply_imeSet=_pTextAreaPtype.on_apply_imeSet;_pMultiLineTextFieldBox._onRecalcScrollSize=_pTextAreaPtype._onRecalcScrollSize;_pMultiLineTextFieldBox._adjust_scrollPosition=_pTextAreaPtype._adjust_scrollPosition;_pMultiLineTextFieldBox.on_notify_vscroll_onscroll=_pTextAreaPtype.on_notify_vscroll_onscroll;_pMultiLineTextFieldBox._setHscrollPos=_pTextAreaPtype._setHscrollPos;_pMultiLineTextFieldBox._setVscrollPos=_pTextAreaPtype._setVscrollPos;_pMultiLineTextFieldBox._setVScrollDefaultAction=_pTextAreaPtype._setVScrollDefaultAction;_pMultiLineTextFieldBox._getLineCount=_pTextAreaPtype._getLineCount;_pMultiLineTextFieldBox._getCaretLine=_pTextAreaPtype._getCaretLine;_pMultiLineTextFieldBox._isWheelScrollable=_pTextAreaPtype._isWheelScrollable;_pMultiLineTextFieldBox._setDefaultCaret=_pTextAreaPtype._setDefaultCaret;_pMultiLineTextFieldBox.set_dragscrolltype=_pTextAreaPtype.set_dragscrolltype;_pMultiLineTextFieldBox.on_fire_onhscroll=function(_a,_b,_c,_d){return this._p_parent.on_fire_onhscroll(_a,_b,_c,_d);};_pMultiLineTextFieldBox.on_fire_onvscroll=function(_a,_b,_c,_d){return this._p_parent.on_fire_onvscroll(_a,_b,_c,_d);};_pMultiLineTextFieldBox.on_fire_onmousewheel=function(_a,_b,_c,_d){return this._p_parent.on_fire_onvscroll(_a,_b,_c,_d);};_pMultiLineTextFieldBox.on_fire_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){return this._p_parent.on_fire_onmousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_pMultiLineTextFieldBox.on_fire_sys_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){return this._p_parent.on_fire_sys_onmousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_pMultiLineTextFieldBox.on_fire_user_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){return this._p_parent.on_fire_user_onmousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_pMultiLineTextFieldBox._on_contextmenu_default_action=function(){return nexacro._checkShowContextMenu(this._p_parent);};_pMultiLineTextFieldBox.on_apply_imeSet=function(){var _a=this.parent;if(_a){_a.on_apply_imeSet();}};nexacro._defineProperties(_pMultiLineTextField,_pMultiLineTextField._properties);delete _pTextAreaPtype;delete _pMultiLineTextField;delete _pMultiLineTextFieldBox;};if(!nexacro.DateField){nexacro.DateField=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.TextField.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._masktypeobj=new nexacro._EditMaskTypeDate();this._range=null;this._ranges_order=null;this._select_ranges=[];this._point_range=null;};var _pDateField=nexacro._createPrototype(nexacro.TextField,nexacro.DateField);nexacro.DateField.prototype=_pDateField;_pDateField._type_name="DateField";_pDateField._boxcontrol_socket={instance_name:"DateFieldBox",id:"box"};_pDateField._p_usecharcount=false;_pDateField._p_value=undefined;_pDateField._p_format="";_pDateField._p_inputtype="date";_pDateField._p_usedropbutton=true;_pDateField._p_datetimepicker=null;_pDateField._p_popuptype="default";_pDateField._p_popupsize=undefined;_pDateField._p_displayformat="";_pDateField._p_innerdataset="";_pDateField._p_backgroundcolumn="";_pDateField._p_bordercolumn="";_pDateField._p_datecolumn="";_pDateField._p_textcolorcolumn="";_pDateField._p_hintingcolumn="";_pDateField._p_readonlycolumn="";_pDateField._p_headlinedateformat="";_pDateField._p_headlinetimeformat="";_pDateField._p_headlineposition="top";_pDateField._p_headlinesize=undefined;_pDateField._p_useheadline=undefined;_pDateField._p_maskchar="";_pDateField._p_invalidvalueaction="empty";_pDateField._p_locale=undefined;_pDateField._p_closebuttontext="CLOSE";_pDateField._p_okbuttontext="OK";_pDateField._p_cancelbuttontext="CANCEL";_pDateField._properties=[{name:"value"},{name:"text",readonly:true},{name:"format"},{name:"inputtype"},{name:"usedropbutton"},{name:"datetimepicker"},{name:"popuptype"},{name:"popupsize"},{name:"displayformat"},{name:"innerdataset"},{name:"backgroundcolumn"},{name:"bordercolumn"},{name:"datecolumn"},{name:"textcolorcolumn"},{name:"hintingcolumn"},{name:"readonlycolumn"},{name:"headlinedateformat"},{name:"headlinetimeformat"},{name:"headlineposition"},{name:"headlinesize"},{name:"useheadline"},{name:"maskchar"},{name:"invalidvalueaction"},{name:"locale"},{name:"visible"},{name:"closebuttontext"},{name:"okbuttontext"},{name:"cancelbuttontext"},];_pDateField._default_locale_date_style="MEDIUMDATE";_pDateField._default_locale_time_style="MEDIUMTIME";_pDateField._popuptype=(nexacro._isTouchInteraction)?"mobile":"normal";_pDateField._input_type="";_pDateField._invalid_value=null;_pDateField._popupcontrol=null;_pDateField._masktypeobj=null;_pDateField._mask_char="";_pDateField._append_typing_cnt=0;_pDateField._is_repeat=true;_pDateField._is_locale_control=true;_pDateField._innerdataset=null;_pDateField._invalid_date_text="Invalid Date";_pDateField._time_init_value="000000000";_pDateField._displayformat="";nexacro.DateField.EndDayNormal=new Array(31,28,31,30,31,30,31,31,30,31,30,31);nexacro.DateField.EndDayLeap=new Array(31,29,31,30,31,30,31,31,30,31,30,31);_pDateField._event_list={"oneditclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1,"oninvalid":1,"ondropdown":1,"ondayclick":1,"oncloseup":1,"oninnerdatachanged":1};_pDateField.accessibilityrole="DateField";_pDateField.on_create_contents=function(){var _a=((nexacro._isMobile&&nexacro._isMobile())||(nexacro._isHybrid&&nexacro._isHybrid())||(!nexacro._isDesktop()&&nexacro._OS=="Android"&&nexacro._Browser=="Runtime"))||nexacro._isTouchInteraction;if(_a){this._onlydisplay=true;}nexacro.TextField.prototype.on_create_contents.call(this);var _b=this._masktypeobj;if(_b){var _c="number";var _d=true;if(_a){this._is_repeat=false;if((!this._popuptype||this._popuptype=="system")&&this._type=="normal"){_c="date";_d=false;this._type="system";}}_b.setInputMode(_c);_b.setUseEditBuffer(_d);}var _e=this._input_element=this._getInputElement();if(!this._onlydisplay){_e.setElementInputType("date");}else{_e._firstchild=true;}this.on_apply_usedropbutton();this.on_apply_iconbuttonsize();};_pDateField.on_created_contents=function(_a){nexacro.TextField.prototype.on_created_contents.call(this,_a);};_pDateField.on_after_created_ext=function(){nexacro.TextField.prototype.on_after_created_ext.call(this);this.on_apply_locale(this._getLocale());if(this._p_expr){this._on_apply_expr(this._p_expr);}else{this.on_apply_value(this._p_value);}switch(this._type){case "system":if(nexacro._enableaccessibility&&nexacro._accessibilitytype==4){var _a=this.getElement();if(_a){_a.setElementAccessibilityStatHidden(false);}}if(this._p_accessibilitydesclevel!="none"&&this._p_accessibilitydesclevel!="child"){this._setAccessibilityActiveDescendant(this._input_element);}break;case "normal":default:break;}this._default_value=this._p_value;this._default_text=this._p_text;this.on_apply_displaynulltext(this._p_displaynulltext);if(this._p_readonly){this.on_apply_readonly();}};_pDateField.on_destroy_contents=function(){nexacro.TextField.prototype.on_destroy_contents.call(this);this._removeEventHandlerToInnerDataset();this._masktypeobj=null;this._range=null;this._ranges_order=null;this._select_ranges=null;this._append_typing_range=null;this._point_range=null;};_pDateField._correctInvalidValue=function(_a){var _b;switch(this._input_type){case "date":_b=8;break;case "time":_b=9;break;case "datetime":_b=17;break;}_a=_a.replace(/[^0-9]/g,"");while(_a.length<_b){_a+="0";}_a=this._masktypeobj.changeNormalizeValue(_a);return _a;};_pDateField.on_input_focus=function(){var _a=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_a){this._setDatePickerValue(this._p_value);this._showPopup();this._setInitCaret();}if(this._p_autoselect){this._selectAll();}};_pDateField._apply_setfocus=function(_a){this._processing_updateToDataset=false;var _b=this._input_element;if(_b){var _c=this._p_value;var _d="";var _e=this._getMaskObj();if(_e){if(!this._onlydisplay){_e.setEditStatus(true);}if(this._p_value==""){_c=this._p_value;_d=this._p_text;}else if(this._p_value&&isNaN(parseInt(this._p_value))){this._invalid_value=this._p_value;_c=this._p_value="";_d=this._p_text;}else{_d=this._makeBufferTextFromValue(_c);}if(_a){this._default_value=_c;this._default_text=_d;}if(!this._onlydisplay){var _f=_b._last_selection_range;if(_f&&!this._p_autoselect){this._caret_pos={begin:_f[0],end:_f[1]};}if(_d!=""){_b.setElementValue(_d);}else{var _g=this._getEmptyText();_b.setElementValue(_g);}}else{if(_d!=""){_b.setElementText(_d);}else{var _g=this._getEmptyText();_b.setElementText(_g);}}}if(!this._onlydisplay){_b.setElementFocus(_a);_d=_b.getElementText();if(_d!=this._p_text){this._default_text=this._p_text=_d;}if(!this._p_autoselect){var _h=this._findRangeFromPos(0);if(_h){if(this._append_typing_range!=_h){this._clearTypingRange();}_b.setElementSetSelect(_h.beg,_h.end);}}}}};_pDateField._setEventHandlerToTrailingButton=function(){var _a=this._box._trailbutton;if(_a){var _b=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_b){if(this._type=="system"){_a._setEventHandler("onclick",this._on_edit_oneditclick,this);}else{_a._setEventHandler("onclick",this._on_drop_mobile_onclick,this);}}else{_a._setEventHandler("onclick",this._on_drop_onclick,this);_a._setEventHandler("onlbuttondown",this._on_drop_onlbuttondown,this);}}};_pDateField.set_inputtype=function(_a){if(_a){_a=_a.toLowerCase();}if(this._p_inputtype!=_a){this._inputtype_obj=null;switch(_a){case "date":case "datetime":case "time":this._p_inputtype=_a;break;default:return;}this.on_apply_inputtype();this.on_apply_value();}};_pDateField._makeAMPM=function(){this._ampm=nexacro.Locale._getAmPm(this._locale);};_pDateField.on_apply_inputtype=function(){var _a=this._p_inputtype;var _b="";this._input_type=_a;if(this._p_format){if(this._p_inputtype.indexOf("date")>=0){if(this._p_format.indexOf("SHORTDATE")>=0){_b=nexacro.Locale._makeDateMaskStringFromIntl(this._locale,"SHORTDATE");}else if(this._p_format.indexOf("MEDIUMDATE")>=0){_b=nexacro.Locale._makeDateMaskStringFromIntl(this._locale,"MEDIUMDATE");}else if(this._p_format.indexOf("LONGDATE")>=0){_b=nexacro.Locale._makeDateMaskStringFromIntl(this._locale,"LONGDATE");}else if(this._p_format.indexOf("FULLDATE")>=0){_b=nexacro.Locale._makeDateMaskStringFromIntl(this._locale,"FULLDATE");}else{_b=this._p_format;}}if(this._p_inputtype.indexOf("time")>=0){if(_b){_b+=" ";}if(this._p_format.indexOf("SHORTTIME")>=0){_b+=nexacro.Locale._makeTimeMaskStringFromIntl(this._locale,"SHORTTIME");}else if(this._p_format.indexOf("MEDIUMTIME")>=0){_b+=nexacro.Locale._makeTimeMaskStringFromIntl(this._locale,"MEDIUMTIME");}else{_b=this._p_format;}}this._format=_b;}else{if(this._p_inputtype.indexOf("date")>=0){_b=nexacro.Locale._makeDateMaskStringFromIntl(this._locale,this._default_locale_date_style);}if(this._p_inputtype.indexOf("time")>=0){if(_b){_b+=" ";}_b+=nexacro.Locale._makeTimeMaskStringFromIntl(this._locale,this._default_locale_time_style);}this._format=_b;}this._input_type="";if(_b.indexOf("y")>=0||_b.indexOf("M")>=0||_b.indexOf("d")>=0){this._input_type+="date";}if(_b.indexOf("H")>=0||_b.indexOf("h")>=0||_b.indexOf("m")>=0||_b.indexOf("m")>=0||_b.indexOf("s")>=0){this._input_type+="time";}if(!this._p_displayformat){this._displayformat=_b;this._masktypeobj.setDateMask(_b);}this._masktypeobj.setEditMask(_b);this._makeAMPM();this._analyzeFormatRange();if(this._p_value==""){this._p_text=this._getEmptyText();}this._inputtype_obj=new nexacro._EditInputType();var _c=this._getInputElement();if(_c&&!this._onlydisplay){_c.setElementInputType("text");}};_pDateField.set_maskchar=function(_a){if(this._p_maskchar!=_a){this._p_maskchar=_a;this._mask_char=_a;}};_pDateField.set_invalidvalueaction=function(_a){if(this._p_invalidvalueaction!=_a){switch(_a){case "rollback":case "empty":case "minimum":break;default:return;}this._p_invalidvalueaction=_a;}};_pDateField.set_useheadline=function(_a){if(this._p_useheadline!=_a){this._p_useheadline=_a;}};_pDateField.set_headlinedateformat=function(_a){if(this._p_headlinedateformat!=_a){this._p_headlinedateformat=_a;}};_pDateField.set_headlinetimeformat=function(_a){if(this._p_headlinetimeformat!=_a){this._p_headlinetimeformat=_a;}};_pDateField.set_headlineposition=function(_a){if(this._p_headlineposition!=_a){this._p_headlineposition=_a;}};_pDateField.set_headlinesize=function(_a){if(this._p_headlinesize!=_a){this._p_headlinesize=_a;}};_pDateField.set_closebuttontext=function(_a){_a=nexacro._toString(_a);if(this._p_closebuttontext!=_a){this._p_closebuttontext=_a;}};_pDateField.set_okbuttontext=function(_a){_a=nexacro._toString(_a);if(this._p_okbuttontext!=_a){this._p_okbuttontext=_a;this.on_apply_okbuttontext();}};_pDateField.on_apply_okbuttontext=function(_a){var _b=this._p_datetimepicker;if(_b){_b.set_okbuttontext(this._p_okbuttontext);}};_pDateField.set_cancelbuttontext=function(_a){if(this._p_cancelbuttontext!=_a){this._p_cancelbuttontext=_a;this.on_apply_cancelbuttontext();}};_pDateField.on_apply_cancelbuttontext=function(_a){var _b=this._p_datetimepicker;if(_b){_b.set_cancelbuttontext(this._p_cancelbuttontext);}};_pDateField.set_value=function(_a){if(typeof (_a)=="string"){_a=_a.toLowerCase();if(_a=="today"){_a=this._getCurrentDateVal();}}var _b;var _c=this._convertToDateObject(_a);if(_a===""){_b=false;}else{_b=this._checkApplyValidate(_c);}this._invalidStatus(false);this._validStatus(false);if(_b==false){this.on_invalid(true);this._p_text=this._makeBufferTextFromValue(_a);}else if(_b==true){_a=this._convertValueType(_a,_c);this.on_valid(true);}if(this._p_value!==_a){if(!this.applyto_bindSource("value",_a)){return;}this._setValue(_a,true,_b);}else{var _d=this._getInputElement();if(_d&&_d._getInputValue()!=_a){this._setValue(_a,true,_b);}}};_pDateField._setValue=function(_a,_b,_c){if(!_b){if(_c==undefined){this._invalidStatus(false);this._validStatus(false);_c=this._checkApplyValidate(_a);if(_c==false){this.on_invalid(true);}else if(_c==true){this.on_valid(true);}}if(_c==true){var _d=this._convertToDateObject(_a);_a=this._convertValueType(_a,_d);}}this._p_value=_a;this._clearTypingRange();this.on_apply_value(_a,_c);};_pDateField.on_apply_value=function(_a,_b){if(_a==undefined){_a=this._p_value;}_a=nexacro._isNull(_a)?_a:nexacro._toString(_a).trim();var _c;if(this._input_element){_c=this._input_element._processing_oninput;this._input_element._processing_oninput=true;}if(nexacro._isNull(_b)){_b=this._checkApplyValidate(_a);}if(_b==true){this._p_text=this._makeBufferTextFromValue(_a);}else if(_b==-1){this._p_text="";}var _d=this._isFocused();var _e=this._getInputElement();if(_e){var _f=this._p_text;if(!this._onlydisplay){var _g=_e.getElementCaretPos();if(_f!=""){if(_d){_e.setElementValue(_f);}else{if(_a!=null){_e.setElementValue(this.getDisplayText());}else{_e.setElementValue("");}}}else{if(_d){_e.setElementValue(this._getEmptyText());}else{_e.setElementValue("");}}var _h=this._findRangeFromPos(_g.begin);_e.setElementSetSelect(_h?_h.beg:0,_h?_h.end:0);}else{if(_a){if(_d){_e.setElementText(_f);}else{_e.setElementText(this.getDisplayText());}}else{_e.setElementText("");}}this._updateAccessibilityLabel();this._default_value=this._p_value;this._default_text=this._p_text;if(!_d){this._setLabelFloating(this._isContainsText(),undefined,true);}this._refreshLabel("value");this._input_element._processing_oninput=_c;}};_pDateField._on_apply_text=function(_a){var _b=this._expr_fn;if(_b){try{_a=nexacro._toString(_b.call(null,this));}catch(e){if(e&&e.message){trace(e.message);}}}if(this._p_expr.substring(0,4)=="Date"){_a=new nexacro.Date(_a).toString();}var _c=this._convertToDateObject(_a);var _d=false;if(_c){_d=this._isInvalidValue(_c);if(!_d){_a=this._convertValueType(_a,_c);}}if(nexacro._enableaccessibility){this.on_apply_prop_accessibilitylabel();}this.on_apply_text(_a);};_pDateField.on_apply_text=function(_a){var _b=this._p_expr;if(_b){if(_b.substring(0,4)=="Date"){_a=new nexacro.Date(_a).toString();}if(this._p_value!=_a){var _c=this._convertToDateObject(_a);var _d=false;if(_c){_d=this._isInvalidValue(_c);if(!_d){_a=this._convertValueType(_a,_c);}}this.set_value(_a);}else{this.on_apply_value(_a);}}};_pDateField.set_usedropbutton=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usedropbutton!=_a){this._p_usedropbutton=_a;this.on_apply_usedropbutton();}};_pDateField.on_apply_usedropbutton=function(){this.set_usetrailingbutton(this._p_usedropbutton);};_pDateField.on_apply_autoskip=nexacro._emptyFn;_pDateField._isInvalidValue=function(_a){if(nexacro._isNull(_a)){return false;}if(_a==""){return true;}var _b;if(_a instanceof Date||_a instanceof nexacro.Date){_b=_a;}else{_b=this._convertToDateObject(_a);}if(_b){if(_b._isInvalidDate?_b._isInvalidDate():isNaN(_b.valueOf())){return true;}var _c=_b.getFullYear();if(_c<0||_c>9999){return true;}}return false;};_pDateField._checkApplyValidate=function(_a){if(_a==null){return -1;}return !this._isInvalidValue(_a);};_pDateField.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){this._setValue(undefined);}};_pDateField.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=_b.getColumn(_c,_d);var _f=this._masktypeobj;var _g=this._convertToDateObject(_e);if(_g){this._invalidStatus(false);this._validStatus(false);check=this._checkApplyValidate(_e);if(check==false){this.on_invalid(true);}else if(check==true){this.on_valid(true);}if(!this._isInvalidValue(_g)){_e=this._convertValueType(_e,_g,true);_e=_g.toString();if(_e!=this._p_value){var _h=_f.changeNormalizeValue(_e);if(_f){_f.setDate(_h);}this._p_value=_e;this.on_apply_value(_h);}}else{this._p_value=_e;this._p_text=this._makeBufferTextFromValue(_e);this.on_apply_value(_e);}}else{if(_e!=this._p_value){this._setValue(_e);}}this._on_apply_text();}};_pDateField._beginValueChange=function(){return !(this.__value_change?false:this.__value_change=true);};_pDateField._finalValueChange=function(){return !(this.__value_change=false);};_pDateField._convertToDateObject=function(_a){if(nexacro._isNull(_a)||_a===""){return null;}var _b;var _c=this._masktypeobj;var _d;if(!this._input_type){this.on_apply_inputtype();}switch(this._input_type){case "date":_d=0;break;case "time":_d=1;break;case "datetime":_d=2;break;}if(_a instanceof Date||_a instanceof nexacro.Date){_b=_a;}else{_a=nexacro._toString(_a);if(/[^0-9]/.test(_a)){_b=new Date(_a);}else{if(_d==1&&_a.length==17){_a=_a.substr(8,9);}_b=_c.convertToDateObject(_a,_d);}}if(_b){if(isNaN(_b.valueOf())){return _b;}switch(_d){case 0:_b=new nexacro.Date(_b.getFullYear(),_b.getMonth(),_b.getDate());break;case 1:_b=new nexacro.Date(_b.getFullYear(),_b.getMonth(),_b.getDate(),_b.getHours(),_b.getMinutes(),_b.getSeconds(),_b.getMilliseconds());_b._timeonly=true;break;case 2:_b=new nexacro.Date(_b.getFullYear(),_b.getMonth(),_b.getDate(),_b.getHours(),_b.getMinutes(),_b.getSeconds(),_b.getMilliseconds());break;default:break;}}return _b;};_pDateField._getDlgCode=function(_a,_b,_c){var _d=this._want_arrows;this._is_first_focus=false;if(_c==true){_d=true;}return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:_d};};_pDateField._on_getAccessibilityAdditionalLabel=function(){var _a=this._accessibilityvalue?this._accessibilityvalue:this._p_text?this._p_text:this._getCurrentDateStr();return _a?_a:this._p_displaynulltext;};_pDateField._getAccessibilityReadLabel=function(){if(this._accessibilityvalue){return this._accessibilityvalue;}if(this._p_text){return this._p_text;}return this._getCurrentDateStr();};_pDateField._getCurrentDateStr=function(){var _a=this._masktypeobj;if(_a){return _a.applyMask(this._getCurrentDateVal());}return "";};_pDateField._getCurrentDateVal=function(){var _a=this._masktypeobj;if(_a){var _b=_a.getCurrentDate();var _c=nexacro._toString(_b.year).padLeft(4,"0");var _d=nexacro._toString(_b.month).padLeft(2,"0");var _e=nexacro._toString(_b.day).padLeft(2,"0");var _f=_a.getEditFormatType();var _g="";switch(_f){case 0:_g=_c+_d+_e;break;case 1:_g="000000000";break;case 2:_g=_c+_d+_e+"000000000";}return _g;}return null;};_pDateField._setLocale=function(_a){if(this._p_locale){return;}if(this._locale!=_a){this.on_apply_locale(_a);this.on_apply_value(this._p_value);}};_pDateField._setInitCaret=function(){if(this._isPopupVisible()){if(!this._onlydisplay){this._input_element.setElementBlur();}this._popupcontrol._attached_comp._setFocus(false);}};_pDateField._getDateMaskObj=function(){return this._masktypeobj;};_pDateField._getCurrentDate=function(){var _a=this._masktypeobj;if(_a){return _a.getCurrentDate();}return;};_pDateField._getFormatType=function(){var _a=this._masktypeobj;if(_a){return _a.getEditFormatType();}return;};_pDateField._getEndDay=function(_a,_b){var _c=this._masktypeobj;if(_c){return _c.getEndDay(_a,_b);}return;};_pDateField._isPopupVisible=function(){var _a=false;if(this._popupcontrol){_a=this._popupcontrol._p_visible;}return _a;};_pDateField.set_popuptype=function(_a){var _b=["center","none","normal","default","mobile"];if(_a&&_b.indexOf(_a)==-1){return;}if(this._p_popuptype!=_a){this._p_popuptype=_a;this.on_apply_popuptype(_a);}};_pDateField.on_apply_popuptype=function(){this._popuptype=this._p_popuptype;if(this._p_popuptype=="default"){this._popuptype=(nexacro._isTouchInteraction)?"mobile":"normal";}var _a=this._type;var _b=this._masktypeobj;if(_b){var _c="number";var _d=true;if((!this._popuptype||this._popuptype=="system")&&(_a=="normal"||_a=="system")){var _e=((nexacro._isMobile&&nexacro._isMobile())||(nexacro._isHybrid&&nexacro._isHybrid())||(!nexacro._isDesktop()&&nexacro._OS=="Android"&&nexacro._Browser=="Runtime"))||nexacro._isTouchInteraction;if(_e&&this._is_created){_c="date";_d=false;}}_b.setInputMode(_c);_b.setUseEditBuffer(_d);}};_pDateField.set_popupsize=function(_a){if(this._p_popupsize!=_a){this._p_popupsize=_a;}};_pDateField.on_apply_popupsize=nexacro._emptyFn;_pDateField.set_displayformat=function(_a){if(this._p_displayformat!=_a){this._p_displayformat=_a;this.on_apply_displayformat();this.on_apply_value();}};_pDateField.on_apply_displayformat=function(){var _a=this._masktypeobj;var _b="";if(this._p_displayformat){if(this._p_inputtype.indexOf("date")>=0){if(this._p_displayformat.indexOf("SHORTDATE")>=0){_b=nexacro.Locale._makeDateMaskStringFromIntl(this._locale,"SHORTDATE");}else if(this._p_displayformat.indexOf("MEDIUMDATE")>=0){_b=nexacro.Locale._makeDateMaskStringFromIntl(this._locale,"MEDIUMDATE");}else if(this._p_displayformat.indexOf("LONGDATE")>=0){_b=nexacro.Locale._makeDateMaskStringFromIntl(this._locale,"LONGDATE");}else if(this._p_displayformat.indexOf("FULLDATE")>=0){_b=nexacro.Locale._makeDateMaskStringFromIntl(this._locale,"FULLDATE");}else{_b=this._p_displayformat;}}if(this._p_inputtype.indexOf("time")>=0){if(_b){_b+=" ";}if(this._p_displayformat.indexOf("SHORTTIME")>=0){_b+=nexacro.Locale._makeTimeMaskStringFromIntl(this._locale,"SHORTTIME");}else if(this._p_displayformat.indexOf("MEDIUMTIME")>=0){_b+=nexacro.Locale._makeTimeMaskStringFromIntl(this._locale,"MEDIUMTIME");}else{_b=this._p_displayformat;}}}this._displayformat=_b;if(_a){if(_b){_a.setDateMask(_b);}else{this.on_apply_inputtype();}}};_pDateField.set_format=function(_a){if(this._p_format!=_a){this._p_format=_a;this.on_apply_format();this.on_apply_value();}};_pDateField.on_apply_format=function(){this.on_apply_inputtype();};_pDateField.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(this._p_innerdataset!=_a||(this._p_innerdataset&&!this._innerdataset)){this._setInnerDatasetStr(_a);this.on_apply_innerdataset(this._innerdataset);}};_pDateField.on_apply_innerdataset=function(_a){if(_a){_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);}if(this._p_datetimepicker){this._p_datetimepicker.set_innerdataset(this._p_innerdataset,true);}};_pDateField._setInnerDatasetStr=function(_a){if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this._p_innerdataset=_a;}};_pDateField.getInnerDataset=function(){return this._innerdataset;};_pDateField.setInnerDataset=function(_a){if(!_a){this._innerdataset=null;this._p_innerdataset="";this.on_apply_innerdataset(this._innerdataset);}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this._p_innerdataset=_a.id;this.on_apply_innerdataset(this._innerdataset);}};_pDateField._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset=null;}};_pDateField.set_backgroundcolumn=function(_a){if(this._p_backgroundcolumn!=_a){this._p_backgroundcolumn=_a;this.on_apply_backgroundcolumn();}};_pDateField.on_apply_backgroundcolumn=function(){if(this._p_datetimepicker){this._p_datetimepicker.set_backgroundcolumn(this._p_backgroundcolumn,true);}};_pDateField.set_bordercolumn=function(_a){if(this._p_bordercolumn!=_a){this._p_bordercolumn=_a;this.on_apply_bordercolumn();}};_pDateField.on_apply_bordercolumn=function(){if(this._p_datetimepicker){this._p_datetimepicker.set_bordercolumn(this._p_bordercolumn,true);}};_pDateField.set_datecolumn=function(_a){if(this._p_datecolumn!=_a){this._p_datecolumn=_a;this.on_apply_datecolumn(_a);}};_pDateField.on_apply_datecolumn=function(){if(this._p_datetimepicker){this._p_datetimepicker.set_datecolumn(this._p_datecolumn,true);}};_pDateField.set_textcolorcolumn=function(_a){if(this._p_textcolorcolumn!=_a){this._p_textcolorcolumn=_a;this.on_apply_textcolorcolumn(_a);}};_pDateField.on_apply_textcolorcolumn=function(){if(this._p_datetimepicker){this._p_datetimepicker.set_textcolorcolumn(this._p_textcolorcolumn,true);}};_pDateField.set_hintingcolumn=function(_a){if(this._p_hintingcolumn!=_a){this._p_hintingcolumn=_a;this.on_apply_hintingcolumn(_a);}};_pDateField.on_apply_hintingcolumn=function(){if(this._p_datetimepicker){this._p_datetimepicker.set_hintingcolumn(this._p_hintingcolumn,true);}};_pDateField.set_readonlycolumn=function(_a){if(this._p_readonlycolumn!=_a){this._p_readonlycolumn=_a;this.on_apply_readonlycolumn(_a);}};_pDateField.on_apply_readonlycolumn=function(){if(this._p_datetimepicker){this._p_datetimepicker.set_readonlycolumn(this._p_readonlycolumn,true);}};_pDateField._makeCalendarText=function(_a){if(!_a){return "";}var _b=_a.toString();var _c=this._currentformat;this._currentformat="dateformat";var _d=this._makeMaskValue(_b);var _e=this._makeMask("dateformat",this._makeDateObj(_a));var _f=0;var _g="";var _h="yMdHhmsl";this._currentformat=_c;for(var _j=0,_k=_e.length;_j<_k;_j++ ){var _i=_e.charAt(_j);if(_h.indexOf(_i)>=0){_g+=_d.charAt(_f);_f++ ;}else{if(_i==="~"||_i==="^"){_g+=_d.charAt(_f);_f++ ;}else{_g+=_i;}}}return _g;};_pDateField._isValidDate=function(_a,_b,_c){var _d,_e,_f;var _g,_h,_i,_j;switch(_b){case 0:_d=_a.substr(0,4);_e=_a.substr(4,2);_f=_a.substr(6,2);break;case 1:var _k=0;if(_c&&_c[0]<40){_g=_a.substr(_k,2);_k=2;}_h=_a.substr(_k,2);_i=_a.substr(_k+2,2);_j=_a.substr(_k+2,3);break;case 2:_d=_a.substr(0,4);_e=_a.substr(4,2);_f=_a.substr(6,2);_g=_a.substr(8,2);_h=_a.substr(10,2);_i=_a.substr(12,2);_j=_a.substr(14,3);break;}if((_d&&isNaN(_d= +_d))||(_e&&isNaN(_e= +_e))||(_f&&isNaN(_f= +_f))||(_g&&isNaN(_g= +_g))||(_h&&isNaN(_h= +_h))||(_i&&isNaN(_i= +_i))||(_j&&isNaN(_j= +_j))){return false;}var _l=this._masktypeobj;var _m=_l.getEndDay(_d,_e);if((_b!=1&&!_m)||(_e&&( +_e>12))||(_f&&( +_f>_m))||(_g&&( +_g>=24))||(_h&&( +_h>=60))||(_i&&( +_i>=60))||(_j&&( +_j>=1000))){return false;}return true;};_pDateField._on_getDisplayText=function(){return this._makeBufferTextFromValue(this._p_value,true);};_pDateField._isContainsText=function(){return (this._p_value!=null)||this._p_displaynulltext;};_pDateField.dropdown=function(){if(!this._p_enable||this._p_readonly||!this._p_visible||this._type=="system"){return false;}if(this._isPopupVisible()){return false;}this._setFocus(false);this._showPopup();this._setInitCaret();};_pDateField.isDropdown=function(){return this._isPopupVisible();};_pDateField._analyzeFormatRange=function(){var _a=this._format;var _b=-1;this._range={year:null,month:null,day:null,week:null,ampm:null,hour:null,min:null,sec:null,msec:null};this._ranges_order=[];this._select_ranges=[];this._point_range=null;if(_a.indexOf("yyyy")<0){_a=_a.replace("yy","yyyy");}_a=_a.replace("MMMM","MM");_a=_a.replace("MMM","MM");_a=_a.replace("sss","SSS");_a=_a.replace("dddd","DDDD");_a=_a.replace("ddd","DDD");_a=_a.trim();this._format=_a;this._masktypeobj.setEditMask(_a);var _c=this._range;if(this._input_type!="time"){if((_b=_a.indexOf("yyyy"))>=0){_c.year={beg:_b,end:_b+4,format:"yyyy",min:0,max:9999,text:"",area:"date"};_c.year.empty=_c.year.format.toUpperCase();this._ranges_order.push(_c.year);}if((_b=_a.indexOf("MM"))>=0){_c.month={beg:_b,end:_b+2,format:"MM",min:1,max:12,text:"",area:"date"};_c.month.empty=_c.month.format.toUpperCase();this._ranges_order.push(_c.month);}else if((_b=_a.indexOf("M"))>=0){_c.month={beg:_b,end:_b+1,format:"M",min:1,max:12,text:"",area:"date"};_c.month.empty=_c.month.format.toUpperCase();this._ranges_order.push(_c.month);}if((_b=_a.indexOf("DDDD"))>=0){_c.week={beg:_b,end:_b+4,format:"DDDD",min:0,max:6,text:"",area:"date",readonly:true};_c.week.empty=_c.week.format.toUpperCase();this._ranges_order.push(_c.week);}else if((_b=_a.indexOf("DDD"))>=0){_c.week={beg:_b,end:_b+3,format:"DDD",min:0,max:6,text:"",area:"date",readonly:true};_c.week.empty=_c.week.format.toUpperCase();this._ranges_order.push(_c.week);}if((_b=_a.indexOf("dd"))>=0){_c.day={beg:_b,end:_b+2,format:"dd",min:1,max:31,text:"",area:"date"};_c.day.empty=_c.day.format.toUpperCase();this._ranges_order.push(_c.day);}else if((_b=_a.indexOf("d"))>=0){_c.day={beg:_b,end:_b+1,format:"d",min:1,max:31,text:"",area:"date"};_c.day.empty=_c.day.format.toUpperCase();this._ranges_order.push(_c.day);}}if(this._input_type!="date"){if((_b=_a.indexOf("aa"))>=0){_c.ampm={beg:_b,end:_b+2,format:"aa",min:0,max:1,text:"",area:"time"};_c.ampm.empty=_c.ampm.format.toLowerCase();this._ranges_order.push(_c.ampm);}if((_b=_a.indexOf("hh"))>=0){_c.hour={beg:_b,end:_b+2,format:"hh",min:1,max:12,text:"",area:"time"};_c.hour.empty=_c.hour.format.toLowerCase();this._ranges_order.push(_c.hour);}else if((_b=_a.indexOf("h"))>=0){_c.hour={beg:_b,end:_b+1,format:"h",min:1,max:12,text:"",area:"time"};_c.hour.empty=_c.hour.format.toLowerCase();this._ranges_order.push(_c.hour);}else if((_b=_a.indexOf("HH"))>=0){_c.hour={beg:_b,end:_b+2,format:"HH",min:0,max:23,text:"",area:"time"};_c.hour.empty=_c.hour.format.toLowerCase();this._ranges_order.push(_c.hour);}else if((_b=_a.indexOf("H"))>=0){_c.hour={beg:_b,end:_b+1,format:"H",min:0,max:23,text:"",area:"time"};_c.hour.empty=_c.hour.format.toLowerCase();this._ranges_order.push(_c.hour);}if((_b=_a.indexOf("mm"))>=0){_c.min={beg:_b,end:_b+2,format:"mm",min:0,max:59,text:"",area:"time"};_c.min.empty=_c.min.format.toLowerCase();this._ranges_order.push(_c.min);}else if((_b=_a.indexOf("m"))>=0){_c.min={beg:_b,end:_b+1,format:"m",min:0,max:59,text:"",area:"time"};_c.min.empty=_c.min.format.toLowerCase();this._ranges_order.push(_c.min);}if((_b=_a.indexOf("ss"))>=0){_c.sec={beg:_b,end:_b+2,format:"ss",min:0,max:59,text:"",area:"time"};_c.sec.empty=_c.sec.format.toLowerCase();this._ranges_order.push(_c.sec);}else if((_b=_a.indexOf("s"))>=0){_c.sec={beg:_b,end:_b+1,format:"s",min:0,max:59,text:"",area:"time"};_c.sec.empty=_c.sec.format.toLowerCase();this._ranges_order.push(_c.sec);}if((_b=_a.indexOf("SSS"))>=0){_c.msec={beg:_b,end:_b+3,format:"SSS",min:0,max:999,text:"",area:"time"};_c.msec.empty=_c.msec.format.toLowerCase();this._ranges_order.push(_c.msec);}}this._ranges_order.sort(function(_d,_e){return _d.beg-_e.beg;});};_pDateField._setRangetext=function(_a,_b){if(_b._p_text==_a){return false;}_b._p_text=_a;return true;};_pDateField._clearRangeBuffers=function(){var _a=this._ranges_order;var _b,_c=this._format;var _d;for(var _e=0;_e<_a.length;_e++ ){_a[_e]._p_text="";_b=_a[_e].format;if((_d=_c.indexOf(_b))>=0){_a[_e].beg=_d;_a[_e].end=_d+_b.length;}}};_pDateField._arrangeRangeBeginPos=function(_a,_b){if(_b==0){return;}var _c=this._ranges_order;var _d=false;for(var _e=0;_e<_c.length;_e++ ){if(_d){_c[_e].beg+=_b;_c[_e].end+=_b;}if(_c[_e].format==_a.format){_d=true;_c[_e].end+=_b;}}};_pDateField._replaceRangeInputText=function(_a,_b,_c){var _d=_c.beg,_e=_c.end;var _f=_b.length-(_e-_d);this._arrangeRangeBeginPos(_c,_f);if(!this._onlydisplay){_a.replaceElementText(_b,_d,_e,true);}};_pDateField._replaceRangeBufferText=function(_a,_b){if(!this._input_element){return;}_a=_a+"";if(this._setRangetext(_a,_b)){var _c=_a.length-(_b.end-_b.beg);this._replaceRangeInputText(this._input_element,_a,_b);}};_pDateField._getLastDay=function(_a,_b){var _c=new Date(_a,_b,0).getDate();if(_c!=this._invalid_date_text&&!isNaN(_c)){return _c;}return 0;};_pDateField._getDayOfWeekText=function(_a,_b,_c){var _d=new nexacro.Date(_a,_b -1,_c);var _e;if(this._range.week.format=="DDDD"){_e=_d.toLocaleWeekDayString(this._locale,"long");}else if(this._range.week.format=="DDD"){_e=_d.toLocaleWeekDayString(this._locale,"short");}return _e;};_pDateField._replaceRangeDate=function(_a,_b){var _c=this._input_element;if(_c){if(this._range.year&&this._range.month&&this._range.day){if((_b==this._range.year&&this._range.month._p_text!=""&&this._range.day._p_text!="")||(_b==this._range.month&&this._range.year._p_text!=""&&this._range.day._p_text!="")){var _d,_e,_f;if(_b==this._range.year){_d=_a;_e=this._range.month._p_text;_f=this._range.day._p_text;}else{_d=this._range.year._p_text;_e=_a;_f=this._range.day._p_text;}var _g=this._getLastDay(_d,_e);if(_g>0&&_g<parseInt(_f)){_g=this._padNumberWithZero(_g,2);this._setRangetext(_g,this._range.day);var _h=this._skip_oninput;this._skip_oninput=true;this._replaceRangeInputText(_c,_g,this._range.day);if(this._range.week){var _i=this._getDayOfWeekText(_d,_e,_g);this._replaceRangeInputText(_c,_i,this._range.week);}this._skip_oninput=_h;}}}this._setRangetext(_a,_b);this._replaceRangeInputText(_c,_a,_b);this.setSelect(_b.beg,_b.end,true);}};_pDateField._cancelValue=function(){this._setValue(this._default_value);};_pDateField._confirmValue=function(){var _a=this._getInputElement();var _b=this._default_value;var _c=this._default_text;var _d=_a._getInputValue();var _e,_f;if(this._p_value!=null){if(_d==this._getEmptyText()||_d==""){_e="";}else{_e=this._makeValueFromBuffer();}_f=this._makeBufferTextFromValue(_e);if(!(/^[0-9]+$/.test(_e))){if(this._p_invalidvalueaction=="rollback"){this._p_value=_b;this._p_text=_c;this._invalidStatus(false);this.on_valid(true);}else if(this._p_invalidvalueaction=="minimum"){this._p_value=this._makeValueFromBuffer(true);this._p_text=this._makeBufferTextFromValue(this._p_value);}else{this._invalid_value=_e;this._p_value="";this._p_text=_f;}}}if(!this._on_value_change(_c,_b,this._p_text,this._p_value)){this._p_value=_b;this._p_text=_c;}};_pDateField._validateValueLength=function(_a,_b){switch(_b){case "date":if(_a.length>8){_a=_a.substring(0,8);}break;case "datetime":if(_a.length==8){_a+="000000000";}else if(_a.length==9){_a+="00000000";}break;case "time":if(_a.length==17){_a=_a.substring(8,17);}else if(_a.length==8){_a+="0";}break;}return _a;};_pDateField._makeValueFromBuffer=function(_a,_b){var _c=this._range;var _d="",_e=this._p_value;if(this._input_type.indexOf("date")>=0){var _f;if(_c.year&&_c.year._p_text!=""&&!isNaN((_f=parseInt(_c.year._p_text)))){_d+=(_f>0)?_c.year._p_text:(_b?_c.year._p_text:"0000");}else if(_a||!_c.year){_d+=_e?_e.substring(0,4):"0000";}else{_d+="yyyy";}var _g;if(_c.month&&_c.month._p_text!=""&&!isNaN((_g=parseInt(_c.month._p_text)))){_d+=(_g>0)?this._padNumberWithZero(_c.month._p_text,2):(_b?_c.month._p_text:"01");}else if(_a||!_c.month){_d+=_e?_e.substring(4,6):"01";}else{_d+="MM";}var _h;if(_c.day&&_c.day._p_text!=""&&!isNaN((_h=parseInt(_c.day._p_text)))){_d+=(_h>0)?this._padNumberWithZero(_c.day._p_text,2):(_b?_c.day._p_text:"01");}else if(_a||!_c.day){var _i=_e?_e.substring(6,8):"01";if(_e){var _j=this._getLastDay(_d.substring(0,4),_d.substring(4,6));if(_j==0){_j=31;}if(_i>_j){_i=this._padNumberWithZero(_j,2);}}_d+=_i;}else{_d+="dd";}}if(this._input_type.indexOf("time")>=0){var _e=(_e&&_e.length==17)?_e.substring(8,17):_e;if(this._format.indexOf("h")>=0){if(_c.hour){var _k,_l;if(_c.ampm){if(_c.ampm._p_text!=""){_k=_c.ampm._p_text;}else if(_a){_k=this._ampm[0];}}var _m;if(_c.hour._p_text!=""&&!isNaN(_m=parseInt(_c.hour._p_text))){_l=(_m>0)?this._padNumberWithZero(_c.hour._p_text,2):(_b&&(this._format.indexOf("hh")>=0)?_c.hour._p_text:"01");}else if(_a){_l="00";}else{_l="hh";}if(!_b){if(this._ampm[0]==_k){if(_l=="12"){_l="00";}}else if(this._ampm[1]==_k){if(_l<"12"){_l=parseInt(_l)+12+"";}}}_d+=_l;}else if(_a||!_c.hour){_d+=_e?_e.substring(0,2):"00";}else{_d+="hh";}}else{if(_c.hour&&_c.hour._p_text!=""&&!isNaN(parseInt(_c.hour._p_text))){_d+=this._padNumberWithZero(_c.hour._p_text,2);}else if(_a||!_c.hour){_d+=_e?_e.substring(0,2):"00";}else{_d+="HH";}}if(_c.min&&_c.min._p_text!=""&&!isNaN(parseInt(_c.min._p_text))){_d+=this._padNumberWithZero(_c.min._p_text,2);}else if(_a||!_c.min){_d+=_e?_e.substring(2,4):"00";}else{_d+="mm";}if(_c.sec&&_c.sec._p_text!=""&&!isNaN(parseInt(_c.sec._p_text))){_d+=this._padNumberWithZero(_c.sec._p_text,2);}else if(_a||!_c.sec){_d+=_e?_e.substring(4,6):"00";}else{_d+="ss";}if(_c.msec&&_c.msec._p_text!=""&&!isNaN(parseInt(_c.msec._p_text))){_d+=this._padNumberWithZero(_c.msec._p_text,3);}else if(_a||!_c.msec){_d+=_e?_e.substring(6,9):"000";}else{_d+="SSS";}}return _d;};_pDateField._procEmptyValue=function(_a,_b){var _c=parseInt(_a);if(isNaN(_c)){_a=this._mask_char?_a.replace(/./g,this._mask_char):(_b?_b.empty:_a);}return _a;};_pDateField._makeBufferTextFromValue=function(_a,_b,_c,_d){var _e=(!_b);if(_a==undefined){if(_e){this._clearRangeBuffers();}return "";}else if(_a==""||(_b&&this.getValidStatus()=="invalid")){if(_b){return this._invalid_date_text;}if(_e){this._clearRangeBuffers();}return this._getEmptyText();}_c=_c?_c:this._input_type;var _f=_b?this._displayformat:this._format;var _g,_h,_i,_j,_k,_l,_m,_n,_o;var _p;if(!_f){return _a;}_f=_f.replace("dddd","DDDD");_f=_f.replace("ddd","DDD");var _q=_f;var _r=false;_a=this._validateValueLength(_a,_c);if(_c.indexOf("date")>=0){_g=_a.substring(0,4);_h=_a.substring(4,6);_i=_a.substring(6,8);var _s=this._getLastDay(_g,_h);var _t=parseInt(_i);if(_s==0){_s=31;}if(_t>_s){_i=this._padNumberWithZero(_s,2);}if(_c=="datetime"){_k=_a.substring(8,10);_k=(_k=="24")?"00":_k;_l=_a.substring(10,12);_m=_a.substring(12,14);_n=_a.substring(14,17);_p=new nexacro.Date(_g,((_h!="MM")?_h -1:_h),_i,_k,_l,_m,_n);}else{_p=new nexacro.Date(_g,((_h!="MM")?_h -1:_h),_i);}if(_f.indexOf("yyyy")>=0){_g=this._procEmptyValue(_g,this._range.year);_q=_q.replace("yyyy",_g);if(_e){this._replaceRangeBufferText(_g,this._range.year);}}else if(_f.indexOf("yy")>=0){_g=this._procEmptyValue(_g,this._range.year);_g=_g.substring(2,4);_q=_q.replace("yy",_g);}if(_f.indexOf("dd")>=0){_i=this._procEmptyValue(_i,this._range.day);_q=_q.replace("dd",_i);if(_e){this._replaceRangeBufferText(_i,this._range.day);}}else if(_f.indexOf("d")>=0){_i=this._procEmptyValue(_i,this._range.day);_o=parseInt(_i);if(isNaN(_o)){_o=_i;}_q=_q.replace("d",_o);if(_e){this._replaceRangeBufferText(_o,this._range.day);}}if(_f.indexOf("MMMM")>=0||_f.indexOf("MMM")>=0){_r=true;}else if(_f.indexOf("MM")>=0){_h=this._procEmptyValue(_h,this._range.month);_q=_q.replace("MM",_h);if(_e){this._replaceRangeBufferText(_h,this._range.month);}}else if(_f.indexOf("M")>=0){_h=this._procEmptyValue(_h,this._range.month);_o=parseInt(_h);if(isNaN(_o)){_o=_h;}_q=_q.replace("M",_o);if(_e){this._replaceRangeBufferText(_o,this._range.month);}}if(_f.indexOf("DDDD")>=0||_f.indexOf("DDD")>=0){_r=true;}}if(_c.indexOf("time")>=0){if(_c=="time"){_k=_a.substring(0,2);_k=(_k=="24")?"00":_k;_l=_a.substring(2,4);_m=_a.substring(4,6);_n=_a.substring(6,9);}if(_f.indexOf("HH")>=0){_k=this._procEmptyValue(_k,this._range.hour);_q=_q.replace("HH",_k);if(_e){this._replaceRangeBufferText(_k,this._range.hour);}}else if(_f.indexOf("H")>=0){_k=this._procEmptyValue(_k,this._range.hour);_o=parseInt(_k);if(isNaN(_o)){_o=_k;}_q=_q.replace("H",_o);if(_e){this._replaceRangeBufferText(_o,this._range.hour);}}else if(_f.indexOf("h")>=0){_k=this._procEmptyValue(_k,this._range.hour);var _u=parseInt(_k);var _v;if(isNaN(_u)){_v=_k;if(_f.indexOf("hh")>=0){_q=_q.replace("hh",_v);}else{_q=_q.replace("h",_v);}}else{if(_u==0){_u=12;}else if(_u>12){_u-=12;}if(_f.indexOf("hh")>=0){if(_d){_v=_k;}else{_v=this._padNumberWithZero(_u,2);}_q=_q.replace("hh",_v);}else{_v=_u;_q=_q.replace("h",_v);}}if(_e){this._replaceRangeBufferText(_v,this._range.hour);}}if(_f.indexOf("aa")>=0){var _w=nexacro.Locale.getLocaleInfo(this._locale);var _u=parseInt(_k);var _x;if(isNaN(_u)){if(this._range.ampm._p_text){_x=this._range.ampm._p_text;}else{_x=this._mask_char?this._mask_char:"aa";}_q=_q.replace("aa",_x);_e=false;}else{if(!_d){if(_u>=0&&_u<12){_x=_w.ampm[0];if(!_x){_x="AM";}_q=_q.replace("aa",_x);}else{_x=_w.ampm[1];if(!_x){_x="PM";}_q=_q.replace("aa",_x);}}else{_q=_q.replace("aa",this._range.ampm._p_text);_e=false;}}if(_e){this._replaceRangeBufferText(_x,this._range.ampm);}}if(_f.indexOf("mm")>=0){_l=this._procEmptyValue(_l,this._range.min);_q=_q.replace("mm",_l);if(_e){this._replaceRangeBufferText(_l,this._range.min);}}else if(_f.indexOf("m")>=0){_l=this._procEmptyValue(_l,this._range.min);_o=parseInt(_l);if(isNaN(_o)){_o=_l;}_q=_q.replace("m",_o);if(_e){this._replaceRangeBufferText(_o,this._range.min);}}if(_f.indexOf("ss")>=0){_m=this._procEmptyValue(_m,this._range.sec);_q=_q.replace("ss",_m);if(_e){this._replaceRangeBufferText(_m,this._range.sec);}}else if(_f.indexOf("s")>=0){_m=this._procEmptyValue(_m,this._range.sec);_o=parseInt(_m);if(isNaN(_o)){_o=_m;}_q=_q.replace("s",_o);if(_e){this._replaceRangeBufferText(_o,this._range.sec);}}if(_f.indexOf("sss")>=0){_n=this._procEmptyValue(_n,this._range.msec);_q=_q.replace("sss",_n);if(_e){this._replaceRangeBufferText(_n,this._range.msec);}}}if(_r&&_c.indexOf("date")>=0){if(_f.indexOf("MMMM")>=0){if(!isNaN(parseInt(_h))){_q=_q.replace("MMMM",_p.toLocaleMonthString(this._locale,"long"));}else{_q=this._mask_char?"MMMM".replace(/./g,this._mask_char):"MMMM";}}else if(_f.indexOf("MMM")>=0){if(!isNaN(parseInt(_h))){_q=_q.replace("MMM",_p.toLocaleMonthString(this._locale,"short"));}else{_q=this._mask_char?"MMM".replace(/./g,this._mask_char):"MMM";}}if(_f.indexOf("DDDD")>=0){if(!isNaN(parseInt(_g))&&!isNaN(parseInt(_h))&&!isNaN(parseInt(_i))){_j=_p.toLocaleWeekDayString(this._locale,"long");}else{_j=this._mask_char?"DDDD".replace(/./g,this._mask_char):this._range.week.empty;}_q=_q.replace("DDDD",_j);if(_e){this._replaceRangeBufferText(_j,this._range.week);}}else if(_f.indexOf("DDD")>=0){if(!isNaN(parseInt(_g))&&!isNaN(parseInt(_h))&&!isNaN(parseInt(_i))){_j=_p.toLocaleWeekDayString(this._locale,"short");}else{_j=this._mask_char?"DDD".replace(/./g,this._mask_char):this._range.week.empty;}_q=_q.replace("DDD",_j);if(_e){this._replaceRangeBufferText(_j,this._range.week);}}}return _q;};_pDateField._padNumberWithZero=function(_a,_b){var _c=String(_a);_c=_c.padLeft(_b,"0");return _c;};_pDateField._findRangeFromPos=function(_a){for(var _b in this._range){if(this._range[_b]!=null){if(this._range[_b].beg<=_a&&_a<=this._range[_b].end){return this._range[_b];}}}};_pDateField._findNextRange=function(_a,_b){var _c=_a+1;var _d;var _e=this._input_element._getInputValue();while(_c<=_e.length){if(_d=this._findRangeFromPos(_c)){if(_b){if(_d.area==_b){return _d;}}else{return _d;}}_c++ ;}return null;};_pDateField._findPrevRange=function(_a,_b){var _c=_a -1;var _d;while(_c>=0){if(_d=this._findRangeFromPos(_c)){if(_b){if(_d.area==_b){return _d;}}else{return _d;}}_c-- ;}return null;};_pDateField.set_locale=function(_a){if(this._p_locale!=_a){this._p_locale=_a;this.on_apply_locale(_a);this.on_apply_value(this._p_value);}};_pDateField.on_apply_locale=function(_a){this._locale=_a;var _b=this._masktypeobj;if(_b){_b.setLocale(_a);}this._makeAMPM();this.on_apply_displayformat();this.on_apply_format();};_pDateField.set_visible=function(_a){nexacro.Component.prototype.set_visible.call(this,_a);if(!this._p_visible&&this._isPopupVisible()){this._closePopup(false,true);}};_pDateField.getYear=function(){var _a=1970;if(this._p_value){var _b=this._convertToDateObject(this._p_value);return _b.getFullYear();}return _a;};_pDateField.getMonth=function(){var _a=1;if(this._p_value){var _b=this._convertToDateObject(this._p_value);return _b.getMonth()+1;}return _a;};_pDateField.getDay=function(){var _a=1;if(this._p_value){var _b=this._convertToDateObject(this._p_value);return _b.getDate();}return _a;};_pDateField.getDayOfWeek=function(){var _a=4;if(this._p_value){var _b=this._convertToDateObject(this._p_value);return _b.getDay();}return _a;};_pDateField.setSelectedText=nexacro._emptyFn;_pDateField.setCaretPos=nexacro._emptyFn;_pDateField._getPopupSizeArr=function(){var _a=this._p_datetimepicker;var _b=this._p_popupsize;var _b=this._p_popupsize;if(!_b){_b="220 250";}_b=_b.split(/\s+/);var _c= +_b[0];var _d=_b[1]? +_b[1]:_c;if(!this._p_popupsize){if(_a.closebutton){_d+=_a.closebutton._adjust_height;}if(_a._datetabbutton){_d+=_a._datetabbutton._adjust_height;}if(_a._headline){if(this._p_headlineposition=="left"){_c+=_a._headline._adjust_width;}else{_d+=_a._headline._adjust_height;}}if(this._popuptype=="mobile"){var _e=nexacro._getMobileOrientation();if(_e==2||_e==3){_c+=70;if(_a._headline){_c+=_a._headline._adjust_width;}}else{_c+=70;_d+=30;if(_a._headline){_d+=_a._headline._adjust_height;}}}}return {width:_c,height:_d};};_pDateField._getElementPosition=function(){return nexacro._getElementPositionInFrame(this.getElement());};_pDateField._updatePopupControlPosition=function(){var _a=this._popupcontrol;if(_a){var _b=this.getElement();var _c=_a.getElement();var _d=this._getElementPosition(_b);var _e=_d.x;var _f=_d.y+(this._adjust_height);_f-=this._getHelperLineHeight();_c.setElementPosition(_e,_f);}};_pDateField._createDatePicker=function(){var _a=this._p_datetimepicker;if(_a){_a.destroy();}_a=this._p_datetimepicker=new nexacro.DateRangePicker("datetimepicker",0,0,0,0,null,null,null,null,null,null,this);_a._excluded_flex=true;_a._setControl();_a._is_popup_child=true;_a.set_displaymonthcount(1);_a.set_type("single");_a._setPopupContains(true);_a._headline_autoposition=true;_a.set_displaytype(this._input_type);_a._usertimeformat=this._format;_a.createComponent(true);};_pDateField._createPopupControl=function(){var _a=this._popupcontrol;if(!_a){_a=this._popupcontrol=new nexacro._DateFieldPopupControl("datefieldpopup",0,0,0,0,null,null,null,null,null,null,this);_a._excluded_flex=true;_a.createComponent(true);}};_pDateField._createPopupDatePickerControl=function(){this._createPopupControl();this._createDatePicker();var _a=this._p_datetimepicker;var _b=this._popupcontrol;_b._attach(_a);if(!_b._is_created){_b.on_created();}if(!_a._is_created){this._setEventHandlerToDatePicker();this._applyDatePickerProps();_a.on_created();}if(this._p_useheadline==null||this._p_useheadline==""){_a.set_useheadline(this._popuptype=="mobile");}else{_a.set_useheadline(this._p_useheadline);}_a.set_locale(this._p_locale);};_pDateField._applyDatePickerProps=function(){var _a=this._p_datetimepicker;if(_a){_a._setEnable(this._p_enable);_a.set_readonly(this._p_readonly);_a.set_startdate(this._p_value);_a.set_innerdataset(this._p_innerdataset);_a.set_backgroundcolumn(this._p_backgroundcolumn);_a.set_bordercolumn(this._p_bordercolumn);_a.set_datecolumn(this._p_datecolumn);_a.set_textcolorcolumn(this._p_textcolorcolumn);_a.set_hintingcolumn(this._p_hintingcolumn);_a.set_readonlycolumn(this._p_readonlycolumn);_a.set_locale(this._p_locale);_a.set_headlinedateformat(this._p_headlinedateformat);_a.set_headlinetimeformat(this._p_headlinetimeformat);_a.set_headlineposition(this._p_headlineposition);_a.set_headlinesize(this._p_headlinesize);if(this._input_type!="date"){_a.set_okbuttontext(this._p_okbuttontext);_a.set_cancelbuttontext(this._p_cancelbuttontext);}_a.on_apply_value();}};_pDateField._setEventHandlerToDatePicker=function(){var _a=this._p_datetimepicker;if(_a){_a._setEventHandler("ondayclick",this._on_datepicker_ondayclick,this);_a._setEventHandler("oncloseup",this._on_datepicker_oncloseup,this);}};_pDateField._on_datepicker_ondayclick=function(_a,_b){if(this._input_type=="time"){return;}this.on_fire_ondayclick(_b.date);};_pDateField._releaseCaptureLock=function(){var _a=this._getWindow();if(_a&&this._track_capture){_a._releaseCaptureLock(this);}};_pDateField._on_datepicker_oncloseup=function(_a,_b){if(_b._is_external_call){this._releaseCaptureLock();if(this._recursive_closeup){return;}}else{this._recursive_closeup=true;if(this._isPopupVisible()){this._closePopup(this._p_autoskip);}this._recursive_closeup=undefined;}this._changeStatus("mouseover",false);this._box._trailbutton._changeStatus("mouseover",false);var _c=this._p_text;var _d=this._p_value;if(_b._apply_value){var _e=_b._startdate;var _f=this._makeBufferTextFromValue(_e);this._on_value_change(_c,_d,_f,_e);}this.on_fire_oncloseup(this,_c,_d,this._p_text,this._p_value);if(!this._onlydisplay){this._input_element.setElementFocus();}};_pDateField.on_fire_ondayclick=function(_a){if(this.ondayclick&&this.ondayclick._has_handlers){var _b=new nexacro.DateFieldDayClickEventInfo(this,"ondayclick",_a);return this.ondayclick._fireEvent(this,_b);}return true;};_pDateField._showPopup=function(){if(nexacro._enableaccessibility){this._want_arrows=true;}var _a=this._getWindow();var _b=this.getElement();if(_b){var _c=this.on_fire_ondropdown(this);if(this.ondropdown&&this.ondropdown.defaultprevented==true){return;}if(this._popuptype=="none"||this._type=="system"){return;}if(_c){this._createPopupDatePickerControl();var _d=this._popupcontrol;var _e=this._getPopupSizeArr();var _f=this._getElementPosition();var _g=_f.x;var _h=_f.y;var _i=_d._getPopupParentPos();var _j=_i.height;var _k=0;var _l=_j;var _m=_e.width;var _n=_e.height;var _o=_g+_m;var _p=_h+_j+_n;var _q=_a.clientWidth;var _r=_a.clientHeight;var _s=_o-_q;if(this._input_element&&nexacro._enableaccessibility){var _t=this._input_element;_b.setElementAccessibilityActiveDescendant(_d,_t);}if(_o>_q&&_g>_s){_k=_k-_s;}if(_g<0){_k= -_g;}if(_h>_n&&_p>_r){_l= -_n;}if(_p>_r){var _u=_r-_n;if(_u<0){_l= -_h;}else if(_n>_h){_l=_u-_h;}}if(this._popuptype=="center"||this._popuptype=="mobile"){var _v=_a.frame;var _w=nexacro._getElementPositionInFrame(_v.getElement());var _x=_v.width;var _y=_v.height;if(nexacro._Browser=="Runtime"){_x=Math.round(_x/nexacro._getDevicePixelRatio(this.getElement()));_y=Math.round(_y/nexacro._getDevicePixelRatio(this.getElement()));}var _z=((_x/2)-(_m/2));var _aa=((_y/2)-(_n/2));_aa=_aa<0?0:_aa;_d._popup((_z+_w.x),(_aa+_w.y),_m,_n);}else{if(_l>0){_l-=this._getHelperLineHeight();}_d._popupBy(this,_k+_i.xgap,_l+_i.ygap,_m,_n);}if(_a&&this._track_capture){_a._setCaptureLock(this,true,false);}}}};_pDateField._applyZoomPopup=function(){if(this._isPopupVisible()){this._showPopup();}};_pDateField._closePopup=function(_a,_b){if(this._type=="system"){nexacro._closeSystemCalendar();return;}else{var _c=this._popupcontrol;if(_c){_c._closePopup();if(_a){this._setFocusToNextComponent();}}}if(nexacro._enableaccessibility){this._want_arrows=false;if(nexacro._accessibilitytype!=2){this._input_element.setElementFocus();}}};_pDateField._convertValueType=function(_a,_b,_c){var _d,_e;if(_c){_e=nexacro._getDatatypeRule();if(_e=="1.0"){return _a;}}_d=(_b===undefined||_b===null)?_b:nexacro._toString(_b);return _d;};_pDateField.on_keydown_default_specialkey_process=function(_a){var _b=true;if(_a!=nexacro.Event.KEY_RETURN){_b=nexacro.TextField.prototype.on_keydown_default_specialkey_process.call(this,_a);}return _b;};_pDateField._on_value_change=function(_a,_b,_c,_d){if(this._beginValueChange()){return false;}var _e=true;if(!this.on_fire_canchange(this,_a,_b,_c,_d)){_e=false;}else if(!this.applyto_bindSource("value",_d)){_e=false;}if(!_e){this._p_value=_b;this.on_apply_value(_b);}else{if(this._p_value!=_b){if(this._p_value!=_d){this._invalidStatus(false);this._validStatus(false);var _f=this._checkApplyValidate(_d);if(_f==false){this.on_invalid(true);}else if(_f==true){this.on_valid(true);}_e=false;}}}if(_e){this._setValue(_d);this._default_value=_d;this._default_text=_c;this.on_fire_onchanged(this,_a,_b,_c,_d);this._updateAccessibilityLabel();}this._finalValueChange();return true;};_pDateField.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}};_pDateField.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=true;if(this.oneditclick&&this.oneditclick._has_handlers){var _o=this.getCaretPos();var _p=this._getClientXY(_g,_h);var _q=new nexacro.EditClickEventInfo(this,"oneditclick",_o,_a,_b,_c,_d,_e,_f,_g,_h,_p[0],_p[1],this,this,_m);_n=this.oneditclick._fireEvent(this,_q);}this._on_edit_oneditclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return _n;};_pDateField._on_edit_oneditclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=(this._type=="system"&&!this._p_readonly);var _o=this.getElement()?true:false;if(!_n||!_o){var _p=((nexacro._isMobile&&nexacro._isMobile())||(nexacro._isHybrid&&nexacro._isHybrid())||(!nexacro._isDesktop()&&nexacro._OS=="Android"&&nexacro._Browser=="Runtime"))||nexacro._isTouchInteraction;if(_p){this._showPopup();this._setDatePickerValue(this._getConfirmValue());this._setInitCaret();}return;}var _q=this.on_fire_ondropdown(this);if(_q){var _r=false;var _s=-1;if(obj instanceof nexacro.MaskEdit){this._box._trailbutton._control_element.setElementFocus();if(nexacro._OS=="iOS"&&nexacro._Browser=="MobileSafari"){if(nexacro._SystemType=="ipad"){if(parseFloat(nexacro._OSVersion)>=13){if(!nexacro._enableaccessibility){_r=true;}_s=350;}}else if(nexacro._SystemType=="iphone"){if(parseFloat(nexacro._OSVersion)>=14){if(!nexacro._enableaccessibility){_r=true;}_s=5;}}}}if(_r){var _t=this;setTimeout(function(){nexacro._openSystemCalendar(_t,_t._p_value,"_on_notify_mobile_valuechanged");},_s);}else{nexacro._openSystemCalendar(this,this._p_value,"_on_notify_mobile_valuechanged");}}};_pDateField._on_dataset_onvaluechanged=function(_a,_b){if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pDateField.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pDateField._on_notify_mobile_valuechanged=function(_a){if(this._type=="system"){this._setCalendarEditValue(_a);this.on_fire_oninput();var _b,_c;var _d=this._masktypeobj;if(_d){if(_d._use_edit_buf){_b=_d.changeNormalizeValueFromBuffer();}else{_b=_d.changeNormalizeValue(this._input_element.value);}if(this._p_value!=_b){_c=this._makeBufferTextFromValue(_b);this._on_value_change(this._p_text,this._p_value,_c,_b);}}}};_pDateField.on_keyinput_basic_action=function(_a){if(this._skip_oninput){return false;}this._oninput_cnt++ ;if(this._p_readonly||!this._isEnable()||this._oninput_cnt!=1){return false;}var _b,_c;if(this._input_element._getInputValue()==this._getEmptyText()){_b="";}else{_b=this._makeValueFromBuffer(undefined,this._no_adjust_val);}_c=this._makeBufferTextFromValue(_b,undefined,undefined,this._no_adjust_val);if(this._type=="system"){if(this._p_value!=_b){this._on_value_change(this._p_text,this._p_value,_c,_b);}}if(this._input_element._is_sys_focused){var _d=_b.substr(0,4);var _e=_b.substr(4,2);var _f=_b.substr(6,2);if(this._no_adjust_val&&this._range.hour&&this._range.hour.format=="hh"&&this._range.ampm){var _g="";var _h;if(this._input_type=="time"){_h=_b;}else if(this._input_type=="datetime"){_g=_b.substr(0,8);_h=_b.substr(8,9);}var _i=this._range.ampm._p_text;if(_h){var _j=_h.substr(0,2);if(this._ampm[0]==_i){if(_j=="12"){_j="00";}}else if(this._ampm[1]==_i){if(_j<"12"){_j=parseInt(_j)+12+"";}}_h=_j+_h.slice(2);_b=_g+_h;}}if(!(/^[0-9]+$/.test(_b))||(this._input_type!="time"&&(_e=="00"||_f=="00"))){this._invalid_value=_b;this._p_value="";}else{this._invalid_value="";this._p_value=_b;}this._p_text=_c;}this._updateAccessibilityLabel();};_pDateField.on_fire_oninput=function(){if(!this._skip_oninput&&this._oninput_cnt==1){this._invalidStatus(false);this._validStatus(false);var _a=this._checkInputValidate(this._p_value);var _b=false;if(_a==false){this.on_invalid(_b);}else if(_a==true){this.on_valid(_b);}if(this.oninput&&this.oninput._has_handlers){var _c=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_c);}}return true;};_pDateField._getRangeMaxVal=function(_a){var _b=this._range;if(_a.format=="dd"||_a.format=="d"){var _c=_b.year?_b.year._p_text:"0000";var _d=_b.month?_b.month._p_text:"01";if(_c!=""&&_d!=""){var _e=this._getLastDay(_c,_d);if(_e>0){return _e;}}}return _a.max;};_pDateField._getRangeMinVal=function(_a){return _a.min;};_pDateField._clearTypingRange=function(){this._append_typing_range=null;this._append_typing_cnt=0;};_pDateField._is_imecode=false;_pDateField.on_keydown_basic_process=function(_a,_b,_c,_d,_e,_f){if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}var _g=this._input_element;if(!_g||this._onlydisplay){return false;}this._oninput_cnt=0;this._skip_oninput=undefined;this._is_imecode=false;if(_a==nexacro.KeyCode_ImeInput||_a==25){this._is_imecode=true;var _h=_g.handle;if(nexacro._Browser=="Chrome"||(nexacro._Browser=="Edge"&&nexacro._BrowserType=="WebKit")){_h.blur();_h.focus();}_g.stopSysEvent();}};_pDateField.on_keydown_default_process=function(_a,_b,_c,_d,_e,_f){if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(this._p_readonly||!this._isEnable()){return true;}var _g=this._input_element;if(!_g||this._onlydisplay){return false;}var _h=_g._getInputValue();var _i=_g.getElementCaretPos();function isEmpty(_aq,_r){if(isNaN(parseInt(_aq))){return true;}return false;};var _j=48;var _k=96;var _l=(_a>=_j&&_a<=(_j+9));var _m=(_a>=_k&&_a<=(_k+9));var _n=(_a==nexacro.Event.KEY_UP);var _o=(!_b&&_a==nexacro.Event.KEY_DOWN);if(_l||_m||_n||_o){var _p,_q;var _r=this._findRangeFromPos(_i.begin);if(_d||!_r){_g.stopSysEvent();return false;}var _s=_h.substring(_r.beg,_r.end);var _t;this._point_range=null;if(_r._p_readonly){_g.stopSysEvent();return false;}else if(_r.format=="aa"){if(_l||_m){if(_l){_t=_p=_a-_j;}else if(_m){_t=_p=_a-_k;}if(_t>1){_g.stopSysEvent();return false;}_q=this._ampm[_t];}else{if(_s==this._ampm[0]){_q=this._ampm[1];}else{_q=this._ampm[0];}}this._clearTypingRange();this._replaceRangeDate(_q,_r);if(_l||_m){var _u=this._findNextRange(_r.end);if(_u){this.setSelect(_u.beg,_u.end,true);this._clearTypingRange();}}}else{var _v=this._getRangeMaxVal(_r,this._range);var _w=this._getRangeMinVal(_r,this._range);if(_l){_t=_p=_a-_j;}else if(_m){_t=_p=_a-_k;}else if(_n){if(isEmpty(_s,_r)){if(_r.format=="yyyy"){_p=(new Date()).getYear();}else{_p=_w;}}else if(parseInt(_s)>=_v){_p=_w;}else{_p=parseInt(_s)+1;}this._clearTypingRange();}else if(_o){if(isEmpty(_s,_r)){if(_r.format=="yyyy"){_p=(new Date()).getYear();}else{_p=_v;}}else if(parseInt(_s)<=_w){_p=_v;}else{_p=parseInt(_s)-1;}this._clearTypingRange();}if(this._append_typing_range!=_r){this._clearTypingRange();}if(isEmpty(_s,_r)){_p=this._padNumberWithZero(_p,_r.format.length);}else{if(this._append_typing_range){var _x=parseInt(_s);_p=_x.toString()+_p.toString();_p=this._padNumberWithZero(_p,_r.format.length);}else{_p=this._padNumberWithZero(_p,_r.format.length);}}if(_n||_o){this._clearTypingRange();}else{this._append_typing_range=_r;this._append_typing_cnt++ ;}var _y=_r.format.length;if(_y==1){var _z=false;var _aa=parseInt(_p);if(_aa<10){switch(_r.format){case "M":_z=(_t==1);break;case "d":if(parseInt(this._range.month._p_text)==2){_z=(_t>=1&&_t<=2);}else{_z=(_t>=1&&_t<=3);}break;case "H":_z=(_t>=1&&_t<=2);break;case "h":_z=(_t==1);break;case "m":case "s":_z=(_t>=1&&_t<=5);break;}}else if(_aa>=10){_z=true;}if(_z){_y++ ;}}if(parseInt(_p)==0&&_r.format=="yyyy"||_r.format=="MM"||_r.format=="dd"||_r.format=="hh"){this._no_adjust_val=true;}var _ab=(this._append_typing_cnt==_y);if(_v>0&&(this._append_typing_cnt>0||this._append_typing_cnt<_y)){var _ac=_v+"";_ac=_ac.substring(0,1);if(_t>parseInt(_ac)){_ab=true;}}if(_n==false&&_o==false&&_ab){if(parseInt(_p)<_w){this._no_adjust_val=undefined;_p=this._padNumberWithZero(_w,_r.format.length);}if(parseInt(_p)<=_v){this._replaceRangeDate(_p,_r);}var _u=this._findNextRange(_r.end);if(_u){this.setSelect(_u.beg,_u.end,true);this._clearTypingRange();}else{this.setSelect(_r.beg,_r.end,true);this._append_typing_range=_r;this._append_typing_cnt=0;if(this._p_autoskip){this._on_input_autoskip();}else{this._clearTypingRange();}}}else{if(parseInt(_p)<=_v){this._replaceRangeDate(_p,_r);}}this._no_adjust_val=undefined;}_g.stopSysEvent();}else if(_a==nexacro.Event.KEY_BACKSPACE||_a==nexacro.Event.KEY_DEL){var _ad=this._select_ranges;var _ae,_r,_af;for(var _aq=_ad.length-1;_aq>=0;_aq-- ){_r=_ad[_aq];if(_r._p_readonly){continue;}if(this._mask_char){_af=_r.format.replace(/./g,this._mask_char);}else{_af=_r.empty;}if(!_ae){_ae=_r;}this._setRangetext("",_r);if(_aq==0){this._skip_oninput=false;}else if(_aq>0){this._skip_oninput=true;}this._replaceRangeInputText(_g,_af,_r);}if(_a==nexacro.Event.KEY_DEL){this.setSelect(_ad[0].beg,_ad[_ad.length-1].end,true);}else if(_a==nexacro.Event.KEY_BACKSPACE){var _ag=this._findPrevRange(_ae.beg);if(_ag){this.setSelect(_ag.beg,_ag.end,true);}}this._clearTypingRange();_g.stopSysEvent();}else if(!_b&&!_c&&this._isChar(_a)){this._skip_oninput=true;_g.stopSysEvent();}if(_a==nexacro.Event.KEY_ESC){if(this._is_use_esc_cancelvalue){this._cancelValue();}}else if(_a==nexacro.Event.KEY_ENTER){this._confirmValue();return true;}else if(_b&&_a==nexacro.Event.KEY_DOWN){if(!this._isPopupVisible()){this._setDatePickerValue(this._p_value);this._showPopup();this._setInitCaret();}}if(_a==65&&_c){this._selectAll();}if(_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN){if(nexacro._Browser!="Runtime"){this._input_element.stopSysEvent();}}if(_a==nexacro.Event.KEY_LEFT||_a==nexacro.Event.KEY_RIGHT||_a==nexacro.Event.KEY_HOME||_a==nexacro.Event.KEY_END){if(_d){var _ah=this._select_ranges[0];var _ai=this._select_ranges[this._select_ranges.length-1];var _aj,_ak;var _al,_am=this._point_range;var _an=this._select_ranges.length==this._ranges_order.length;if(_a==nexacro.Event.KEY_LEFT){if(!_am){_am=this._point_range=_ai;_al=true;}else if(this._select_ranges.length){if(_am==_ai){_al=true;}else if(_am==_ah){_al=false;}else if(_an){if(_am.area!=_ai.area){_al=false;}}}if(_al==true){var _ag=this._findPrevRange(_ah.beg);if(_ag){_aj=_ag.beg;_ak=this._point_range.end;this.setSelect(_aj,_ak);}}else if(_al==false){var _ag=this._findPrevRange(_ai.beg,_am.area);if(_ag){_aj=this._point_range.beg;_ak=_ag.end;this.setSelect(_aj,_ak);}}}else if(_a==nexacro.Event.KEY_RIGHT){if(!_am){_am=this._point_range=_ah;_al=true;}else if(this._select_ranges.length){if(_am==_ah){_al=true;}else if(_am==_ai){_al=false;}else if(_an){if(_am.area!=_ah.area){_al=false;}}}if(_al==true){var _u=this._findNextRange(_ai.end);if(_u){_aj=this._point_range.beg;_ak=_u.end;this.setSelect(_aj,_ak);}}else if(_al==false){var _u=this._findNextRange(_ah.end,_am.area);if(_u){_aj=_u.beg;_ak=this._point_range.end;this.setSelect(_aj,_ak);}}}else if(_a==nexacro.Event.KEY_HOME){if(!_am){_am=this._point_range=_ai;}var _ag=this._ranges_order[0];_aj=_ag.beg;_ak=_am.end;this.setSelect(_aj,_ak);}else if(_a==nexacro.Event.KEY_END){if(!_am){_am=this._point_range=_ah;}var _u=this._ranges_order[this._ranges_order.length-1];_aj=_am.beg;_ak=_u.end;this.setSelect(_aj,_ak);}}else{if(_a==nexacro.Event.KEY_LEFT||_a==nexacro.Event.KEY_END){var _ao=this._input_element._getInputValue().length;var _ap=(_a==nexacro.Event.KEY_END)?_ao:_i.begin;var _ag=this._findPrevRange(_ap);if(_ag){this._completeRangeDate();this.setSelect(_ag.beg,_ag.end,true);this._clearTypingRange();}else if(!_d&&this._select_ranges.length>=2){this.setSelect(this._select_ranges[0].beg,this._select_ranges[0].end,true);}}else{var _ak=(_a==nexacro.Event.KEY_HOME)?0:_i.end;var _u=this._findNextRange(_ak);if(_u){this._completeRangeDate();this.setSelect(_u.beg,_u.end,true);this._clearTypingRange();}else if(!_d&&this._select_ranges.length>=2){this.setSelect(this._select_ranges[this._select_ranges.length-1].beg,this._select_ranges[this._select_ranges.length-1].end,true);}}}this._input_element.stopSysEvent();}return false;};_pDateField.on_keyup_default_action=function(_a,_b,_c,_d,_e,_f){this._skip_oninput=false;if(_a==nexacro.Event.KEY_SHIFT){this._point_range=null;}};_pDateField.__debugBuffer=function(_a){nexacro._OnceCallbackTimer.callonce(this,function(){var _b,_c="";if(_b=this._ranges_order){for(var _d=0;_d<_b.length;_d++ ){if(_b[_d]){if(_d>0){_c+="\n";}_c+=_b[_d].format+" : pos ["+_b[_d].beg+", "+_b[_d].end+"], len ("+(_b[_d].end-_b[_d].beg)+")";}}_a.set_value(_c+"\n");}});};_pDateField.__debugPasteBuffer=function(){return this._debug_paste_buff;};_pDateField.__debugSelectBuffer=function(_a){nexacro._OnceCallbackTimer.callonce(this,function(){var _b,_c="";if(_b=this._select_ranges){for(var _d=0;_d<_b.length;_d++ ){if(_b[_d]){if(_d>0){_c+="\n";}_c+=_b[_d].format+" : pos ["+_b[_d].beg+", "+_b[_d].end+"], len ("+(_b[_d].end-_b[_d].beg)+")";}}_c+="\n";_a.set_value(_c);}},100);};_pDateField._completeRangeDate=function(){var _a=this._append_typing_range;if(_a&&this._append_typing_cnt>0&&this._append_typing_cnt<_a.format.length){var _b=this._input_element._getInputValue();var _c=_b.substring(_a.beg,_a.end);if(parseInt(_c)<_a.min){_c=this._padNumberWithZero(_a.min,_a.format.length);this._replaceRangeDate(_c,_a);}};};_pDateField._getCurrentSelectRange=function(){var _a=this._input_element;if(_a){var _b=_a.getElementCaretPos();var _c=this._findRangeFromPos(_b.begin);return _c;}return null;};_pDateField._on_input_autoskip=function(){if(this._p_autoskip&&this._p_value&&this._getCurrentSelectRange()==this._ranges_order[this._ranges_order.length-1]){this._setFocusToNextComponent();}};_pDateField._beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=this._getMaskObj();var _h=[];if(_g&&!this._onlydisplay){var _i=_f._getInputValue();var _j,_k,_l,_m,_n;switch(_e){case "deleteContentBackward":case "deleteContentForward":case "deleteByCut":case "insertCompositionText":_h.push(_f._BeforeinputState.CANCEL);break;case "insertText":break;case "insertFromPaste":if(this._on_paste(_a)){_f._beforeinput_result_data=_f.value;_f._beforeinput_result_pos={begin:_c,end:_d};_h.push(_f._BeforeinputState.REPLACE);}else{this.on_invalid(true);_h.push(_f._BeforeinputState.CANCEL);}break;case "historyUndo":case "historyRedo":_h.push(_f._BeforeinputState.PREVENT_DEFAULT);break;default:_h.push(_f._BeforeinputState.PASS);break;}}return _h;};_pDateField._beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;if(_e&&!this._onlydisplay){var _f=0;var _g=_e._paste_caret_pos?true:false;var _h=_a?_a:"";var _i="";var _j=_e.inputtype;var _k=this._getMaskObj();if(_k){if(_j=="date"){if(_k.getCurrentText()!=_h){_a=_k.removeMask(_h.split(''));_k.applyMask(_a);}}else{if(_g){_a=_a.substring(_c,_d);if(!this._on_paste(_a)){this.on_invalid(true);this._cancelValue();this._skip_oninput=true;}_e.stopSysEvent();}else{if(this._is_imecode){this._skip_oninput=true;_e.setElementValue(this._p_text);if(this._select_ranges&&this._select_ranges.length){_e.setElementSetSelect(this._select_ranges[0].beg,this._select_ranges[this._select_ranges.length-1].end);}_e.stopSysEvent();}}}}}};_pDateField._setDatePickerValue=function(_a){var _b=this._p_datetimepicker;if(_b){_b.set_startdate(_a);}};_pDateField._on_dblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(this._onlydisplay){return;}nexacro.Component.prototype._on_dblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);this._selectAreaWidthCurPos();};_pDateField._selectAll=function(){var _a=this._input_element.value.length;this.setSelect(0,_a,true);};_pDateField._selectAreaWidthCurPos=function(){var _a=this._input_element.getElementCaretPos();var _b=this._findRangeFromPos(_a.begin);if(!_b){return;}if(_b.area=="date"){this._selectDate();}else if(_b.area=="time"){this._selectTime();}};_pDateField._selectDate=function(){this._setAreaSelect("date");};_pDateField._selectTime=function(){this._setAreaSelect("time");};_pDateField.setSelect=function(_a,_b,_c){nexacro.TextField.prototype.setSelect.call(this,_a,_b);var _d=this._initSelectRanges();if(!_c){if(_d.length>0){nexacro.TextField.prototype.setSelect.call(this,_d[0].beg,_d[_d.length-1].end);}}if(this._isPopupVisible()){this._p_datetimepicker._changeTab(_d[0].area);}};_pDateField._setAreaSelect=function(_a,_b){var _c=this._ranges_order;var _d=this._select_ranges;_d=[];for(var _e=0;_e<_c.length;_e++ ){if(_c[_e].area==_a){_d.push(_c[_e]);}}this._select_ranges=_d;if(!_b){nexacro.TextField.prototype.setSelect.call(this,_d[0].beg,_d[_d.length-1].end);}};_pDateField._initSelectRanges=function(){var _a=this._input_element;var _b=_a.getElementCaretPos();var _c,_d,_e;if(_b.begin==0&&_b.end==_a.value.length){this._select_ranges=[].concat(this._ranges_order);return this._select_ranges;}_c=this._findRangeFromPos(_b.begin);_d=this._findRangeFromPos(_b.end);this._select_ranges=[];if(!_c){_c=this._findNextRange(_b.begin);}if(!_d){_d=this._findPrevRange(_b.end);}if(!_c&&_d){_c=_d;}else if(!_d&&_c){_d=_c;}else if(!_d&&!_c){return this._select_ranges;}if(_c==_d){this._select_ranges.push(_c);}else if(_c.area==_d.area){_e=this._ranges_order;for(var _f=0;_f<_e.length;_f++ ){if(_e[_f]==_c){this._select_ranges.push(_e[_f]);}else if(this._select_ranges.length>0){this._select_ranges.push(_e[_f]);}if(_e[_f]==_d){break;}}}else{this._select_ranges=this._select_ranges.concat(this._ranges_order);}return this._select_ranges;};_pDateField._on_paste=function(_a){if(!_a){return false;}this._oninput_cnt=0;var _b,_c,_d;var _e=this._select_ranges;if(_e.length>0){var _f,_g;var _h="";var _i="";var _j=0;for(_d=0;_d<_e.length;_d++ ){if(_e[_d].format.includes("y")){_f=true;_i+="yyyy";}else if(_e[_d].format.includes("M")){_f=true;_i+="MM";}else if(_e[_d].format.includes("d")){_f=true;_i+="dd";}else if(_e[_d].format.includes("H")||_e[_d].format.includes("h")){_g=true;_i+="HH";}else if(_e[_d].format.includes("m")){_g=true;_i+="mm";}else if(_e[_d].format.includes("s")){_g=true;_i+="ss";}else if(_e[_d].format.includes("S")){_g=true;_i+="SSS";}}var _k;var _l={year:"",month:"",day:"",hour:"",min:"",sec:"",msec:""};_a=_a.replace(/\D/g,"");var _m,_n;for(var _aj=0,_ak=0;_aj<_i.length;_aj++ ){_m=_a.charAt(_ak);_n=parseInt(_m);if(_m==""){break;}switch(_i.charAt(_aj)){case 'y':_l.year+=_m;break;case 'M':if(_l.month==""){if((_n>1)){_aj++ ;}_l.month+=_m;}else{if((_l.month=="1"&&_n>2)){continue;}else{_l.month+=_m;}}break;case 'd':if(_l.day==""){if((_n>3)){_aj++ ;}_l.day+=_m;}else{if(_l.day=="3"&&_n>1){continue;}else{_l.day+=_m;}}break;case 'h':case 'H':if(_l.hour==""&&_n>5){_aj++ ;}_l.hour+=_m;break;case 'm':if(_l.min==""&&_n>5){_aj++ ;}_l.min+=_m;break;case 's':if(_l.sec==""&&_n>5){_aj++ ;}_l.sec+=_m;break;case 'S':_l.msec+=_m;break;}_ak++ ;}this._debug_paste_buff="try-paste["+_a+"], selected-area["+_i+"], year["+_l.year+"], month["+_l.month+"], day["+_l.day+"], hour["+_l.hour+"], min["+_l.min+"], sec["+_l.sec+"], msec["+_l.msec+"]";var _o=-1,_p=-1;if(_l.year){var _q=parseInt(_l.year);_o=_q;if(_q<1||_q>9999){return false;}_l.year=this._padNumberWithZero(_l.year,4);}if(_l.month){var _q=parseInt(_l.month);_p=_q;if(_q<1||_q>12){return false;}_l.month=this._padNumberWithZero(_l.month,2);}if(_l.day){var _q=parseInt(_l.day);var _r=[null,31,29,31,30,31,30,31,31,30,31,30,31];if(_p==2){if(_o>0){_r=this._getLastDay(_l.year,_l.month);if(_r==0){_r=31;}}else{_r=_r[_p];}}else{_r=_r[_p];}if(_q<1||_q>_r){return false;}_l.day=this._padNumberWithZero(_l.day,2);}if(_l.hour){var _q=parseInt(_l.hour);if(_q>23){return false;}_l.hour=this._padNumberWithZero(_l.hour,2);}if(_l.min){var _q=parseInt(_l.min);if(_q>59){return false;}_l.min=this._padNumberWithZero(_l.min,2);}if(_l.sec){var _q=parseInt(_l.sec);if(_q>59){return false;}_l.sec=this._padNumberWithZero(_l.sec,2);}if(_l.msec){var _q=parseInt(_l.msec);if(_q>999){return false;}_l.msec=this._padNumberWithZero(_l.msec,3);}if(_f){_h+="date";}if(_g){_h+="time";}var _s,_t;var _u=_l.year?_l.year:"yyyy";var _v=_l.month?_l.month:"MM";var _w=_l.day?_l.day:"dd";var _x=_l.hour?_l.hour:"HH";var _y=_l.min?_l.min:"mm";var _z=_l.sec?_l.sec:"ss";var _aa=_l.msec?_l.msec:"SSS";var _ab="";if(_h.indexOf("date")>=0){var _ac;if(this._p_value==undefined){_ac=this._makeValueFromBuffer(false,true);}else{_ac=this._p_value!==""?this._p_value:this._invalid_value;}var _ad;_a=_u+_v+_w;_ad=(_ac.length==17)?_ac.substring(0,8):_ac;var _ae="";if(_i.includes("y")){_ae=_a.substring(0,4);if(!isNaN(parseInt(_ae))){_ad=_ae+_ad.slice(4);}}if(_i.includes("M")){_ae=_a.substring(4,6);if(!isNaN(parseInt(_ae))){_ad=_ad.slice(0,4)+_ae+_ad.slice(6);}}if(_i.includes("d")){_ae=_a.substring(6,8);if(!isNaN(parseInt(_ae))){_ad=_ad.slice(0,6)+_ae+_ad.slice(8);}}_a=_ad;if(_h.indexOf("time")<0&&this._input_type=="datetime"){if(this._p_value){_a=_a+this._p_value.substring(8,this._p_value.length);}else{if(this._p_value==null){_t=_h;}else if(this._p_value==""){_a=_a+this._invalid_value.substring(8,this._invalid_value.length);}}}_ab=_a;}if(_h.indexOf("time")>=0){_a=_x+_y+_z+_aa;var _ac;if(this._p_value==undefined){_ac=this._makeValueFromBuffer(false,true);}else{_ac=this._p_value!==""?this._p_value:this._invalid_value;}var _ad;var _af=_i.includes("H")||_i.includes("h");_ad=(_ac.length==17)?_ac.substring(8,17):_ac;var _ae="";if(_af){_ae=_a.substring(0,2);if(!isNaN(parseInt(_ae))){_ad=_ae+_ad.slice(2);}}if(_i.includes("m")){_ae=_a.substring(2,4);if(!isNaN(parseInt(_ae))){_ad=_ad.slice(0,2)+_ae+_ad.slice(4);}}if(_i.includes("s")){_ae=_a.substring(4,6);if(!isNaN(parseInt(_ae))){_ad=_ad.slice(0,4)+_ae+_ad.slice(6);}}if(_i.includes("S")){_ae=_a.substring(6,9);if(!isNaN(parseInt(_ae))){_ad=_ad.slice(0,6)+_ae+_ad.slice(9);}}_a=_ad;if(_h.indexOf("date")<0&&this._input_type=="datetime"){if(this._p_value){_a=this._p_value.substring(0,8)+_a;}else{if(this._p_value==null){_t=_h;}else if(this._p_value==""){_a=this._invalid_value.substring(0,8)+_a;}}}_ab+=_a;}var _ag=this._input_element._processing_oninput;this._input_element._processing_oninput=true;var _ah=this._makeBufferTextFromValue(_ab,false,_t);this._input_element._processing_oninput=_ag;var _ai=this._input_element.getElementCaretPos();this._input_element.setElementValue(_ah,_ai.begin,_ai.end,true);nexacro._OnceCallbackTimer.callonce(this,function(){this.setSelect(_ai.end,_ai.end);});}return true;};_pDateField._startSelectionTimer=function(_a,_b,_c){var _d=this;this._stopSelectionTimer();this._selectiontask=new nexacro._CallbackTimer(this,function(_e){return _d._callbackSelectionTimer(_b,_c);},_a);this._selectiontask.start();};_pDateField._stopSelectionTimer=function(){if(this._selectiontask){this._selectiontask.destroy();this._selectiontask=null;}};_pDateField._callbackSelectionTimer=function(_a,_b){var _c=this._input_element.getElementCaretPos();if(_c.begin==_c.end){var _d=this._findRangeFromPos(_c.begin);if(_d){if(this._append_typing_range!=_d){this._completeRangeDate();this._clearTypingRange();}this.setSelect(_d.beg,_d.end,true);}}this._stopSelectionTimer();};_pDateField._getConfirmValue=function(){var _a=this._p_value;if(this._p_value==null){if(this._input_type=="time"){_a=this._time_init_value;}else if(this._input_type=="datetime"){_a=this._getCurrentDateVal();}}return _a;};_pDateField.on_drag=function(_a){this._stopSelectionTimer();};_pDateField._dragX=-1;_pDateField.on_lbuttondown_default_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){nexacro.TextField.prototype.on_lbuttondown_default_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);if(this._p_readonly||!this._isEnable()){return;}if(this._onlydisplay){return;}if(this._isPopupVisible()){this._closePopup(false,true);}this._dragX=_f;this._input_element._is_focused=true;var _l=this._input_element.getElementCaretPos();var _m=_l.begin;var _n=_l.end;if(_n>_m){nexacro.TextField.prototype.setCaretPos.call(this,parseInt(_m+(_n-_m)/2));}this._input_element.stopSysEvent();this._startSelectionTimer(400,_m,_n);};_pDateField.on_lbuttonup_default_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){nexacro.TextField.prototype.on_lbuttonup_default_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);if(this._p_readonly||!this._isEnable()){return;}if(this._onlydisplay){return;}this._dragX=-1;this._stopSelectionTimer();nexacro._OnceCallbackTimer.callonce(this,function(){var _l=this._input_element.getElementCaretPos();var _m=_l.begin,_n=_l.end;this.setSelect(_m,_n);if(!this._select_ranges.length){var _o=this._findPrevRange(_m);if(_o){this.setSelect(_o.beg,_o.end,true);}else{var _p=this._findNextRange(_n);if(_p){this.setSelect(_p.beg,_p.end,true);}else{this._input_element.setElementBlur();}}}});};_pDateField._on_drop_onlbuttondown=function(_a,_b){if(_b.button!="lbutton"){return;}if(this._p_readonly||!this._p_enable){return false;}if(this._isPopupVisible()){this._closePopup(false,true);if(!this._p_autoselect){this._setInitCaret();}}else{this._showPopup();this._setDatePickerValue(this._getConfirmValue());if(!this._p_autoselect){this._setInitCaret();}}return false;};_pDateField._on_drop_mobile_onclick=function(){if(this._p_readonly||!this._p_enable){return false;}if(this._isPopupVisible()){this._closePopup(false,true);}else{this._showPopup();this._setDatePickerValue(this._getConfirmValue());}return false;};_pDateField._on_drop_onclick=function(_a,_b){if(_b.button!="touch"){return;}if(this._p_readonly||!this._p_enable){return false;}if(this._isPopupVisible()){this._closePopup(false,true);if(!this._p_autoselect){this._setInitCaret();}}else{this._showPopup();this._setDatePickerValue(this._getConfirmValue());if(!this._p_autoselect){this._setInitCaret();}}return false;};_pDateField._getMaskObj=function(){return this._masktypeobj;};_pDateField._getEmptyText=function(){var _a=this._format;var _b=this._ranges_order;for(var _c=0;_c<_b.length;_c++ ){_a=_a.replace(_b[_c].format,(this._mask_char?(_b[_c].format.replace(/./g,this._mask_char)):_b[_c].empty));}return _a;};_pDateField.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){nexacro.TextField.prototype.on_focus_basic_action.call(this,_a,_b,_c,_d,_e,_f);this._change_caret_from_method=false;};_pDateField.on_killfocus_basic_action=function(_a,_b){this._completeRangeDate();this._clearTypingRange();nexacro.TextField.prototype.on_killfocus_basic_action.call(this,_a,_b);if(this._p_value==null){this._input_element.setElementValue("");}else{var _c=this.getDisplayText();this._input_element.setElementValue(_c);}if(this._isPopupVisible()){this._closePopup(false,true);}};_pDateField.on_fire_sys_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro.Component.prototype.on_fire_user_onmousewheel.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);return (this._popupcontrol&&this._popupcontrol._is_popup())?true:false;};_pDateField.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);return _j;};_pDateField.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onfling.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);return _j;};_pDateField.on_fire_oncloseup=function(_a,_b,_c,_d,_e){if(this.oncloseup&&this.oncloseup._has_handlers){var _f=new nexacro.DateFieldCloseUpEventInfo(this,"oncloseup",_b,_d,_c,_e);return this.oncloseup._fireEvent(this,_f);}return false;};_pDateField.on_fire_ondropdown=function(_a){if(this.ondropdown&&this.ondropdown._has_handlers){var _b=new nexacro.Event(this,"ondropdown");_b.cancelable=true;_b.fromreferenceobject=this;return this.ondropdown._fireCheckEvent(this,_b);}return true;};nexacro.DateFieldBox=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.TextFieldBox.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pDateFieldBox=nexacro._createPrototype(nexacro.TextFieldBox,nexacro.DateFieldBox);nexacro.DateFieldBox.prototype=_pDateFieldBox;_pDateFieldBox._type_name="DateFieldBox";_pDateFieldBox._use_beforeinput=true;_pDateFieldBox._trailing_button_id="dropbutton";_pDateFieldBox.on_lbuttondown_default_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){return this._p_parent.on_lbuttondown_default_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);};_pDateFieldBox.on_lbuttonup_default_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){return this._p_parent.on_lbuttonup_default_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);};_pDateFieldBox.on_beforekeyinput_basic_action=function(_a,_b,_c,_d,_e){return this._p_parent.on_beforekeyinput_basic_action(_a,_b,_c,_d,_e);};_pDateFieldBox._on_dblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){return this._p_parent._on_dblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);};_pDateFieldBox._on_drag=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){this._p_parent.on_drag(_f);return nexacro.TextFieldBox.prototype._on_drag.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);};_pDateFieldBox.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._p_parent.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};nexacro._DateFieldPopupControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.PopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pDateFieldPopupControl=nexacro._createPrototype(nexacro.PopupControl,nexacro._DateFieldPopupControl);nexacro._DateFieldPopupControl.prototype=_pDateFieldPopupControl;_pDateFieldPopupControl._type_name="popupDateTimePicker";_pDateFieldPopupControl._getPopupParentPos=function(){var _a=this._p_parent;var _b=[_a._adjust_width,_a._adjust_height];var _c=nexacro._getElementPositionInFrame(_a.getElement());var _d=0,_e=0;if(nexacro._Browser=="MobileSafari"){var _f=this._getRootFrame();if(_f){var _g=nexacro._getElementPositionInFrame(_f.getElement());_e=_g.y<0?_g.y* (-1):0;}}return {"x":_c.x,"y":_c.y,"width":_b[0],"height":_b[1],"xgap":_d,"ygap":_e};};nexacro.DateFieldDayClickEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"ondayclick";this.fromobject=this.fromreferenceobject=_a;this.date=_c;};var _pDateFieldDayClickEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DateFieldDayClickEventInfo);nexacro.DateFieldDayClickEventInfo.prototype=_pDateFieldDayClickEventInfo;_pDateFieldDayClickEventInfo._type_name="DateFieldDayClickEventInfo";nexacro.DateFieldCloseUpEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"oncloseup";this.fromobject=this.fromreferenceobject=_a;this.pretext=_c;this.posttext=_d;this.prevalue=_e;this.postvalue=_f;};var _pDateFieldCloseUpEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DateFieldCloseUpEventInfo);nexacro.DateFieldCloseUpEventInfo.prototype=_pDateFieldCloseUpEventInfo;_pDateFieldCloseUpEventInfo._type_name="DateFieldCloseUpEventInfo";nexacro._defineProperties(_pDateField,_pDateField._properties);delete _pDateFieldCloseUpEventInfo;delete _pDateFieldDayClickEventInfo;delete _pDateFieldPopupControl;delete _pDateFieldBox;delete _pDateField;};if(!nexacro.TimePickerControl){nexacro.TimePickerControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._value={ampm:0,hour:0,min:0,sec:0,msec:0,getText:function(){var _m;var _n=this.hour;if(this.ampm>=0){if(this.ampm==0){if(_n==12){_n=0;}}else{if(this.hour<12){_n+=12;}}}_n=_n.toString().padLeft(2,"0");_m=_n+this.min.toString().padLeft(2,"0")+this.sec.toString().padLeft(2,"0")+this.msec.toString().padLeft(3,"0");return _m;}};};var _pTimePickerControl=nexacro._createPrototype(nexacro.Component,nexacro.TimePickerControl);nexacro.TimePickerControl.prototype=_pTimePickerControl;_pTimePickerControl._type_name="TimePickerControl";_pTimePickerControl._is_subcontrol=true;_pTimePickerControl._use_readonly_status=true;_pTimePickerControl._event_list["onchanged"]=1;_pTimePickerControl._p_useampm=true;_pTimePickerControl._p_usesecond=true;_pTimePickerControl._p_value=undefined;_pTimePickerControl._properties=[{name:"value"},{name:"useampm"},{name:"usesecond"},{name:"locale"},];_pTimePickerControl._hour_control=null;_pTimePickerControl._min_control=null;_pTimePickerControl._sec_control=null;_pTimePickerControl._delimiter1=null;_pTimePickerControl._delimiter2=null;_pTimePickerControl._delimiter_width=10;_pTimePickerControl._is_locale_control=true;_pTimePickerControl._is_ampm_front=true;_pTimePickerControl._usertimeformat="";_pTimePickerControl._default_locale_time_style="MEDIUMTIME";_pTimePickerControl._focus_order_list=null;_pTimePickerControl._updateAmPm=function(_a){if(this._p_useampm&&!this._leadbutton){this._ampm_control=new nexacro.SpinnerControl("ampmspinner",0,0,0,0,null,null,null,null,null,null,this);this._ampm_control._use_keyaction=false;this._ampm_control._setEventHandler("onitemchanged",this._on_ampm_changed,this);this._ampm_control._setValues(nexacro.Locale._getAmPm(this._locale));this._ampm_control.createComponent(_a);}else if(!this._p_useampm){if(this._ampm_control){this._ampm_control.destroy();this._ampm_control=null;}}};_pTimePickerControl._updateSecond=function(_a){if(this._p_usesecond&&!this._leadbutton){this._delimiter2=new nexacro.FieldBaseTextControl("delimiter_2",0,0,0,0,null,null,null,null,null,null,this);this._sec_control=new nexacro.SpinnerControl("secspinner",0,0,0,0,null,null,null,null,null,null,this);this._sec_control._use_keyaction=false;this._delimiter2.on_getIDCSSSelector=function(){return "delimiter";};this._sec_control._setEventHandler("onitemchanged",this._on_sec_changed,this);this._delimiter2.set_text(":");this._delimiter2.createComponent(_a);this._sec_control.createComponent(_a);this._sec_control._setValues(this._makeTimeValue(0,59));}else if(!this._p_usesecond){if(this._sec_control){this._sec_control.destroy();this._sec_control=null;}}};_pTimePickerControl._makeTimeValue=function(_a,_b){var _c=[];for(var _d=_a,_e=0;_d<=_b;_d++ ){_c[_e++ ]=_d.toString().padLeft(2,"0");}return _c;};_pTimePickerControl.on_create_contents=function(){this._makeTimePickerCreateInfo();this._updateAmPm(true);this._hour_control=new nexacro.SpinnerControl("hourspinner",0,0,0,0,null,null,null,null,null,null,this);this._delimiter1=new nexacro.FieldBaseTextControl("delimiter_1",0,0,0,0,null,null,null,null,null,null,this);this._min_control=new nexacro.SpinnerControl("minspinner",0,0,0,0,null,null,null,null,null,null,this);this._hour_control._use_keyaction=false;this._min_control._use_keyaction=false;this._delimiter1.on_getIDCSSSelector=function(){return "delimiter";};this._hour_control._setEventHandler("onitemchanged",this._on_hour_changed,this);this._hour_control._setEventHandler("ononecyclechanged",this._on_hour_onecycle_changed,this);this._min_control._setEventHandler("onitemchanged",this._on_min_changed,this);this._delimiter1.set_text(":");this._hour_control.createComponent(true);this._delimiter1.createComponent(true);this._min_control.createComponent(true);if(this._p_useampm){this._hour_control._setValues([12,1,2,3,4,5,6,7,8,9,10,11]);}else{this._hour_control._setValues(this._makeTimeValue(0,23));}this._hour_control._fire_same_itemchanged=this._p_useampm;this._min_control._setValues(this._makeTimeValue(0,59));this._updateSecond(true);if(this._p_value){this.on_apply_value();}this._focus_order_list=[];if(this._ampm_control&&this._is_ampm_front){this._focus_order_list.push(this._ampm_control);}if(this._hour_control){this._focus_order_list.push(this._hour_control);}if(this._min_control){this._focus_order_list.push(this._min_control);}if(this._sec_control){this._focus_order_list.push(this._sec_control);}if(this._ampm_control&&!this._is_ampm_front){this._focus_order_list.push(this._ampm_control);}};_pTimePickerControl.on_created_contents=function(_a){if(this._ampm_control&&this._is_ampm_front){this._ampm_control.on_created(_a);}if(this._hour_control){this._hour_control.on_created(_a);}if(this._delimiter1){this._delimiter1.on_created(_a);}if(this._min_control){this._min_control.on_created(_a);}if(this._delimiter2){this._delimiter2.on_created(_a);}if(this._sec_control){this._sec_control.on_created(_a);}if(this._ampm_control&&!this._is_ampm_front){this._ampm_control.on_created(_a);}};_pTimePickerControl.on_create_contents_command=function(){var _a="";if(this._ampm_control&&this._is_ampm_front){_a+=this._ampm_control.createCommand();}if(this._hour_control){_a+=this._hour_control.createCommand();}if(this._delimiter1){_a+=this._delimiter1.createCommand();}if(this._min_control){_a+=this._min_control.createCommand();}if(this._delimiter2){_a+=this._delimiter2.createCommand();}if(this._sec_control){_a+=this._sec_control.createCommand();}if(this._ampm_control&&!this._is_ampm_front){_a+=this._ampm_control.createCommand();}return _a;};_pTimePickerControl.on_attach_contents_handle=function(_a){if(this._ampm_control&&this._is_ampm_front){this._ampm_control.attachHandle(_a);}if(this._hour_control){this._hour_control.attachHandle(_a);}if(this._delimiter1){this._delimiter1.attachHandle(_a);}if(this._min_control){this._min_control.attachHandle(_a);}if(this._delimiter2){this._delimiter2.attachHandle(_a);}if(this._sec_control){this._sec_control.attachHandle(_a);}if(this._ampm_control&&!this._is_ampm_front){this._ampm_control.attachHandle(_a);}};_pTimePickerControl.on_destroy_contents=function(){this._destroyControls();this._list=null;this._curr_item=null;this._focus_order_list=null;};_pTimePickerControl._recreate=function(){if(!this._is_created){return;}this._destroyControls();this.on_create_contents();this.on_created_contents(this._getWindow());this._recalcLayout();};_pTimePickerControl._destroyControls=function(){if(this._hour_control){this._hour_control.destroy();this._hour_control=null;}if(this._delimiter1){this._delimiter1.destroy();this._delimiter1=null;}if(this._min_control){this._min_control.destroy();this._min_control=null;}if(this._delimiter2){this._delimiter2.destroy();this._delimiter2=null;}if(this._sec_control){this._sec_control.destroy();this._sec_control=null;}if(this._ampm_control){this._ampm_control.destroy();this._ampm_control=null;}};_pTimePickerControl._makeTimePickerCreateInfo=function(_a){var _b=false,_c=false,_d;if(!_a&&this._usertimeformat){_a=this._usertimeformat;}if(!_a){_a=nexacro.Locale._makeTimeMaskStringFromIntl(this._locale,this._default_locale_time_style);}if(_a.indexOf("ss")>=0){_b=true;}var _e,_f;if((_e=_a.indexOf("aa"))>=0){_c=true;if((_f=_a.indexOf("h"))>=0){_d=(_e<_f);}else if((_f=_a.indexOf("H"))>=0){_d=(_e<_f);}}this._p_usesecond=_b;this._p_useampm=_c;if(_d!=undefined){this._is_ampm_front=_d;}};_pTimePickerControl._recalcLayout=function(){this.on_change_containerRect(this._getClientWidth(),this._getClientHeight());};_pTimePickerControl._keyAction=function(_a){if(_a.ctrlkey==false&&(_a.keycode==nexacro.Event.KEY_LEFT||_a.keycode==nexacro.Event.KEY_RIGHT)){this._moveFocus(_a);}if(_a.ctrlkey==false&&(_a.keycode==nexacro.Event.KEY_UP||_a.keycode==nexacro.Event.KEY_DOWN)){var _b=this.parent;this._getCurrSpinner(_b._focused_pos)._keyAction(_a.keycode);}};_pTimePickerControl._getCurrSpinner=function(_a){var _b;var _c=this._focus_order_list;for(var _d=0;_d<_c.length;_d++ ){if(_c[_d].id==_a){return _c[_d];}}return null;};_pTimePickerControl._moveFocus=function(_a){var _b=this.parent;var _c=this._focus_order_list;var _d;var _e=_c.length-1;for(var _g=0;_g<_c.length;_g++ ){if(_c[_g].id==_b._focused_pos){_d=_g;break;}}if(_a.keycode==nexacro.Event.KEY_LEFT){if(_d>0){_d-- ;}else{_d=_e;}}else if(_a.keycode==nexacro.Event.KEY_RIGHT){if(_d<_e){_d++ ;}else{_d=0;}}var _f=_c[_d];_f._setFocus(false);_b._focused_pos=_f.id;};_pTimePickerControl._on_focus=function(_a,_b,_c,_d,_e,_f){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(_b=="lbuttondown"){return;}var _g=this.parent;if(!_g._focused_pos){_g._focused_pos=(this._ampm_control&&this._is_ampm_front)?"ampmspinner":"hourspinner";}if(_g._focused_pos=="ampmspinner"){this._ampm_control._setFocus(false);}else if(_g._focused_pos=="hourspinner"){this._hour_control._setFocus(false);}else if(_g._focused_pos=="minspinner"){this._min_control._setFocus(false);}else if(_g._focused_pos=="secspinner"){this._sec_control._setFocus(false);}};_pTimePickerControl.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){nexacro.Component.prototype.on_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);this._common_down_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);};_pTimePickerControl.on_touch_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.prototype.on_touch_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_k,_l);this._common_down_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_k,_l);};_pTimePickerControl.on_touchstart_basic_action=function(_a,_b,_c,_d){nexacro.Component.prototype.on_touchstart_basic_action.call(this,_a,_b,_c,_d);var _e=nexacro._getFirstTouchInfo(_c);this._common_down_action(_e.target,"touch",false,false,false,_e.canvasx,_e.canvasy,_e.screenx,_e.screeny,_d);};_pTimePickerControl._common_down_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){this._setCurrentSpinner(_j);};_pTimePickerControl._setCurrentSpinner=function(_a){while(_a){if(_a instanceof nexacro.SpinnerControl){var _b=this.parent;_b._focused_pos=_a.id;break;}_a=_a._p_parent;}};_pTimePickerControl.on_change_containerRect=function(_a,_b){if(!this._control_element||!this._hour_control){return;}var _c=2;var _d=1;if(this._p_useampm){_c++ ;}if(this._p_usesecond){_c++ ;_d++ ;}var _e=(_a-(this._delimiter_width* _d))/_c;var _f=0;var _g=0;if(this._ampm_control){var _h=this._ampm_control._getMaxItemWidth();_g=Math.max(_h,_e);_e=(_a-_g-(this._delimiter_width* _d))/(_c -1);if(_e<0){_e=0;}if(this._is_ampm_front){this._ampm_control.move(_f,0,_g,_b);_f+=_g;}}this._hour_control.move(_f,0,_e,_b);_f+=_e;var _i=this._getItemHeight();var _j=this._getCenterItemPos(_i);this._delimiter1.move(_f,_j,this._delimiter_width,_i);_f+=this._delimiter_width;this._min_control.move(_f,0,_e,_b);_f+=_e;if(this._sec_control){this._delimiter2.move(_f,_j,this._delimiter_width,_i);_f+=this._delimiter_width;this._sec_control.move(_f,0,_e,_b);_f+=_e;}if(this._ampm_control&&!this._is_ampm_front){this._ampm_control.move(_f,0,_g,_b);}};_pTimePickerControl.on_getIDCSSSelector=function(){return "timepicker";};_pTimePickerControl.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();if(this._hour_control){this._hour_control._setEnable(_a);}if(this._delimiter1){this._delimiter1._setEnable(_a);}if(this._min_control){this._min_control._setEnable(_a);}if(this._delimiter2){this._delimiter2._setEnable(_a);}if(this._sec_control){this._sec_control._setEnable(_a);}if(this._ampm_control){this._ampm_control._setEnable(_a);}};_pTimePickerControl.set_locale=function(_a){if(this._p_locale!=_a){this._p_locale=_a;this.on_apply_locale(_a);}};_pTimePickerControl.on_apply_locale=function(){this._locale="";this._locale=this._p_locale?this._p_locale:this._getLocale();this._recreate();};_pTimePickerControl.set_value=function(_a){this._p_value=_a;this.on_apply_value();};_pTimePickerControl.on_apply_value=function(){if(!this._p_value){return;}else{var _a=parseInt(this._p_value.substr(0,2));var _b=parseInt(this._p_value.substr(2,2));var _c=parseInt(this._p_value.substr(4,2));var _d=parseInt(this._p_value.substr(6,3));if(this._p_useampm){this._value.ampm=(_a>=12&&_a<24)?1:0;if(_a>12){_a-=12;}else if(_a==0){_a+=12;}}else{this._value.ampm=-1;}this._value.hour=_a;this._value.min=_b;this._value.sec=_c;this._value.msec=_d;}if(this._ampm_control){var _e=nexacro.Locale._getAmPm(this._locale);this._ampm_control.set_value(_e[this._value.ampm]);}if(this._hour_control){this._hour_control.set_value(this._value.hour);}if(this._min_control){this._min_control.set_value(this._value.min);}if(this._sec_control){this._sec_control.set_value(this._value.sec);}};_pTimePickerControl.set_useampm=function(_a){_a=nexacro._toBoolean(_a);this._p_useampm=_a;this.on_apply_useampm();};_pTimePickerControl.on_apply_useampm=function(){this.on_apply_value();this._updateAmPm();if(this._hour_control){if(this._p_useampm){this._hour_control._setValues([12,1,2,3,4,5,6,7,8,9,10,11]);}else{this._hour_control._setValues(this._makeTimeValue(0,23));}this._hour_control._fire_same_itemchanged=this._p_useampm;}};_pTimePickerControl.set_usesecond=function(_a){_a=nexacro._toBoolean(_a);this._p_usesecond=_a;this.on_apply_usesecond();};_pTimePickerControl.on_apply_usesecond=function(){this._updateSecond();};_pTimePickerControl._on_hour_changed=function(_a,_b){var _c=this._p_value;this._value.hour=_a._p_value;var _d=this._value.getText();if(_c!=_d){this.on_fire_onchanged(_c,_d);}};_pTimePickerControl._on_min_changed=function(_a,_b){var _c=this._p_value;this._value.min=_a._p_value;var _d=this._value.getText();if(_c!=_d){this.on_fire_onchanged(_c,_d);}};_pTimePickerControl._on_sec_changed=function(_a,_b){var _c=this._p_value;this._value.sec=_a._p_value;var _d=this._value.getText();if(_c!=_d){this.on_fire_onchanged(_c,_d);}};_pTimePickerControl._on_ampm_changed=function(_a,_b){var _c=this._p_value;this._value.ampm=_a.currentrow;var _d=this._value.getText();if(_c!=_d){this.on_fire_onchanged(_c,_d);}};_pTimePickerControl._on_hour_onecycle_changed=function(_a,_b){if(this._p_useampm){if(this._value.ampm!=0){this._value.ampm=0;this._ampm_control._moveScroll("prev",true,true);}else{this._value.ampm=1;this._ampm_control._moveScroll("next",true,true);}}};_pTimePickerControl._getItemHeight=function(){return this._hour_control._itemheight?this._hour_control._itemheight:0;};_pTimePickerControl._getCenterItemPos=function(_a){return _a* 2;};_pTimePickerControl.on_fire_onchanged=function(_a,_b){if(this.onchanged&&this.onchanged._has_handlers){var _c=new nexacro.ChangedEventInfo(this,"onchanged",_a,_a,_b,_b);return this.onchanged._fireEvent(this,_c);}};nexacro._defineProperties(_pTimePickerControl,_pTimePickerControl._properties);delete _pTimePickerControl;};if(!nexacro.DateRangePicker){nexacro.RangeDateChangedEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"onrangedatechanged";this.prestartdate=_c;this.poststartdate=_d;this.preenddate=_e;this.postenddate=_f;this.fromobject=this.fromreferenceobject=_a;};var _pRangeDateChangedEventInfo=nexacro._createPrototype(nexacro.ChangedEventInfo,nexacro.RangeDateChangedEventInfo);nexacro.RangeDateChangedEventInfo.prototype=_pRangeDateChangedEventInfo;_pRangeDateChangedEventInfo._type_name="RangeDateChangedEventInfo";delete _pRangeDateChangedEventInfo;nexacro.DateRangePicker=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._select={anchor:{row:-1,col:-1,year:-1,month:-1,day:-1},start:null,end:null};this._startdate={date:"",time:""};this._enddate={date:"",time:""};};var _pDateRangePicker=nexacro._createPrototype(nexacro.Component,nexacro.DateRangePicker);nexacro.DateRangePicker.prototype=_pDateRangePicker;_pDateRangePicker._type_name="DateRangePicker";_pDateRangePicker._event_list["onchanged"]=1;_pDateRangePicker._event_list["ondayclick"]=1;_pDateRangePicker._event_list["oncloseup"]=1;_pDateRangePicker._event_list["oninnerdatachanged"]=1;_pDateRangePicker._use_readonly_status=true;_pDateRangePicker._p_type="range";_pDateRangePicker._p_displaytype="date";_pDateRangePicker._p_useheadline=true;_pDateRangePicker._p_displaymonthcount=2;_pDateRangePicker._p_value=null;_pDateRangePicker._p_startdate=null;_pDateRangePicker._p_enddate=null;_pDateRangePicker._p_mindate=null;_pDateRangePicker._p_maxdate=null;_pDateRangePicker._p_closebuttontext="CLOSE";_pDateRangePicker._p_okbuttontext="OK";_pDateRangePicker._p_cancelbuttontext="CANCEL";_pDateRangePicker._p_headlinedateformat="";_pDateRangePicker._p_headlinetimeformat="";_pDateRangePicker._p_defaultrangeposition=1;_pDateRangePicker._p_rangeposition="start";_pDateRangePicker._p_innerdataset=null;_pDateRangePicker._p_backgroundcolumn="";_pDateRangePicker._p_bordercolumn="";_pDateRangePicker._p_datecolumn="";_pDateRangePicker._p_textcolorcolumn="";_pDateRangePicker._p_hintingcolumn="";_pDateRangePicker._p_readonlycolumn="";_pDateRangePicker._p_tabbuttonheight="";_pDateRangePicker._p_closebuttonsize="";_pDateRangePicker._p_headlineenddatenulltext="";_pDateRangePicker._p_readonly=false;_pDateRangePicker._p_datetabbuttontext="";_pDateRangePicker._p_timetabbuttontext="";_pDateRangePicker._p_headlineposition="top";_pDateRangePicker._p_direction="horizontal";_pDateRangePicker._p_headlinesize=null;_pDateRangePicker._p_datepickerheadheight=undefined;_pDateRangePicker._properties=[{name:"type"},{name:"displaytype"},{name:"useheadline"},{name:"datepickerheadheight"},{name:"displaymonthcount"},{name:"value"},{name:"startdate"},{name:"enddate"},{name:"mindate"},{name:"maxdate"},{name:"okbuttontext"},{name:"cancelbuttontext"},{name:"closebuttontext"},{name:"headlinedateformat"},{name:"headlinetimeformat"},{name:"defaultrangeposition"},{name:"rangeposition"},{name:"innerdataset"},{name:"backgroundcolumn"},{name:"bordercolumn"},{name:"datecolumn"},{name:"textcolorcolumn"},{name:"hintingcolumn"},{name:"readonlycolumn"},{name:"tabbuttonheight"},{name:"closebuttonsize"},{name:"headlinestartdatenulltext"},{name:"headlineenddatenulltext"},{name:"readonly"},{name:"datetabbuttontext"},{name:"timetabbuttontext"},{name:"headlineposition"},{name:"direction"},{name:"locale"},{name:"headlinesize"}];_pDateRangePicker._use_notify_frame_resize=true;_pDateRangePicker._datepicker_group=null;_pDateRangePicker._timepicker_group=null;_pDateRangePicker._okbutton=null;_pDateRangePicker._cancelbutton=null;_pDateRangePicker._datetabbutton=null;_pDateRangePicker._timetabbutton=null;_pDateRangePicker._headline=null;_pDateRangePicker._innerdataset=null;_pDateRangePicker._useclosebutton=false;_pDateRangePicker._headline_autoposition=false;_pDateRangePicker._usertimeformat="";_pDateRangePicker._date_value=null;_pDateRangePicker._time_value=null;_pDateRangePicker._locale=null;_pDateRangePicker._headlinewidth=150;_pDateRangePicker._headlineheight=80;_pDateRangePicker._is_locale_control=true;_pDateRangePicker._invalid_startdate="";_pDateRangePicker._invalid_enddate="";_pDateRangePicker._currenttab="date";_pDateRangePicker._is_popup_child=false;_pDateRangePicker.on_create_contents=function(){this._updateHeadLine(true);this._updateTabButtons(true);this._updatePicker(true);this.on_apply_displaymonthcount();this.on_apply_innerdataset();this.on_apply_backgroundcolumn();this.on_apply_bordercolumn();this.on_apply_datecolumn();this.on_apply_readonlycolumn();this.on_apply_hintingcolumn();this.on_apply_textcolorcolumn();this._updateButtons(true);this.on_apply_direction();this.on_apply_mindate();this.on_apply_maxdate();};_pDateRangePicker.on_created_contents=function(_a){if(this._headline){this._headline.on_created(_a);}if(this._closebutton){this._closebutton.on_created(_a);}if(this._okbutton){this._okbutton.on_created(_a);}if(this._cancelbutton){this._cancelbutton.on_created(_a);}if(this._datetabbutton){this._datetabbutton.on_created(_a);}if(this._timetabbutton){this._timetabbutton.on_created(_a);}if(this._datepicker_group){this._datepicker_group.on_created(_a);if(this._p_datepickerheadheight){this.on_apply_datepickerheadheight();}}if(this._timepicker_group){this._timepicker_group.on_created(_a);}};_pDateRangePicker.on_after_created=function(){this._skip_recalc=true;this._updatePicker();this._recalcLayout();this.on_apply_displaymonthcount();if(this._p_startdate){this.on_apply_startdate();}if(this._p_enddate){this.on_apply_enddate();}this.on_apply_type();this.on_apply_headlinedateformat();this.on_apply_headlinetimeformat();this._skip_recalc=false;this._recalcLayout();};_pDateRangePicker.on_create_contents_command=function(){var _a="";if(this._headline){_a+=this._headline.createCommand();}if(this._datetabbutton){_a+=this._datetabbutton.createCommand();}if(this._timetabbutton){_a+=this._timetabbutton.createCommand();}if(this._closebutton){_a+=this._closebutton.createCommand();}if(this._okbutton){_a+=this._okbutton.createCommand();}if(this._cancelbutton){_a+=this._cancelbutton.createCommand();}if(this._datepicker_group){_a+=this._datepicker_group.createCommand();}if(this._timepicker_group){_a+=this._timepicker_group.createCommand();}return _a;};_pDateRangePicker.on_attach_contents_handle=function(_a){if(this._headline){this._headline.attachHandle(_a);this._headline._setAccessibilityStatHidden(true);}if(this._datetabbutton){this._datetabbutton.attachHandle(_a);this._datetabbutton._setAccessibilityStatHidden(true);}if(this._timetabbutton){this._timetabbutton.attachHandle(_a);this._timetabbutton._setAccessibilityStatHidden(true);}if(this._closebutton){this._closebutton.attachHandle(_a);this._closebutton._setAccessibilityStatHidden(true);}if(this._okbutton){this._okbutton.attachHandle(_a);this._okbutton._setAccessibilityStatHidden(true);}if(this._cancelbutton){this._cancelbutton.attachHandle(_a);this._cancelbutton._setAccessibilityStatHidden(true);}if(this._datepicker_group){this._datepicker_group.attachHandle(_a);this._datepicker_group._setAccessibilityStatHidden(true);if(this._p_datepickerheadheight){this.on_apply_datepickerheadheight();}}if(this._timepicker_group){this._timepicker_group.attachHandle(_a);this._timepicker_group._setAccessibilityStatHidden(true);}};_pDateRangePicker.on_destroy_contents=function(){this._destroyPicker();this._destroyHeadLine();this._destroyTabButtons();this._destroyUsedButtons();this._select=null;this._startdate=null;this._enddate=null;if(this._innerdataset){this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset=null;}};_pDateRangePicker._updateTabButtons=function(_a){if(this._p_displaytype=="datetime"&&!this._datetabbutton){var _b=this._datetabbutton=new nexacro.Button("datetabbutton",0,0,0,0,null,null,null,null,null,null,this);_b._setControl();_b.createComponent(_a);var _c=this._timetabbutton=new nexacro.Button("timetabbutton",0,0,0,0,null,null,null,null,null,null,this);_c._setControl();_c.createComponent(_a);_b._setEventHandler("onclick",this.on_notify_datetabbuttonclick,this);_c._setEventHandler("onclick",this.on_notify_timetabbuttonclick,this);this.on_apply_datetabbuttontext();this.on_apply_timetabbuttontext();this._updateTabStatus();}else if(this._p_displaytype!="datetime"){this._destroyTabButtons();}};_pDateRangePicker._destroyTabButtons=function(){if(this._datetabbutton){this._datetabbutton.destroy();this._datetabbutton=null;}if(this._timetabbutton){this._timetabbutton.destroy();this._timetabbutton=null;}};_pDateRangePicker._updateHeadLine=function(_a){if(this._p_useheadline&&!this._headline){var _b=this._headline=new nexacro.PickerHeadLineControl("headline",0,0,0,0,null,null,null,null,null,null,this);_b.set_userange(this._p_type=="range");_b.set_displaytype(this._p_displaytype);_b.createComponent(_a);this.on_apply_value();this.on_apply_headlinestartdatenulltext();this.on_apply_headlineenddatenulltext();if(_b._p_startdatebutton){_b._p_startdatebutton._setEventHandler("onclick",this.on_notify_headline_onstartdateclick,this);}if(_b._p_enddatebutton){_b._p_enddatebutton._setEventHandler("onclick",this.on_notify_headline_onenddateclick,this);}if(_b._p_startsubdatebutton){_b._p_startsubdatebutton._setEventHandler("onclick",this.on_notify_headline_onstartsubdateclick,this);}if(_b._p_endsubdatebutton){_b._p_endsubdatebutton._setEventHandler("onclick",this.on_notify_headline_onendsubdateclick,this);}}else if(!this._p_useheadline){this._destroyHeadLine();}};_pDateRangePicker._destroyHeadLine=function(){if(this._headline){this._headline.destroy();this._headline=null;}};_pDateRangePicker._updatePicker=function(_a){var _b=this._p_displaytype;var _c=(_b.indexOf("date")>=0);var _d=(_b.indexOf("time")>=0);if(_c&&!this._datepicker_group){var _e=this._datepicker_group=new nexacro.DatePickerGroup("datepickergroup",0,0,0,0,null,null,null,null,null,null,this);_e._setControl();_e._setEventHandler("onchanged",this.on_notify_ondatechanged,this);_e._setEventHandler("onstartdateclick",this.on_notify_onstartdateclick,this);_e._setEventHandler("onenddateclick",this.on_notify_onenddateclick,this);_e.set_type(this._p_type);_e.set_direction(this._p_direction);if(this._p_displaytype=="datetime"){_e.set_visible(true);}this.on_apply_defaultrangeposition();this.on_apply_datepickerheadheight();_e.createComponent(_a);}else if(!_c&&this._datepicker_group){this._datepicker_group.destroy();this._datepicker_group=null;}if(_d&&!this._timepicker_group){var _f=this._timepicker_group=new nexacro.TimePickerGroup("timepickergroup",0,0,0,0,null,null,null,null,null,null,this);_f._setControl();_f._setEventHandler("onchanged",this.on_notify_ontimechanged,this);_f._usertimeformat=this._usertimeformat;if(this._p_displaytype=="datetime"){_f.set_visible(false);}_f.set_direction(this._p_direction);_f.createComponent(_a);}else if(!_d&&this._timepicker_group){this._timepicker_group.destroy();this._timepicker_group=null;}};_pDateRangePicker._destroyPicker=function(){if(this._datepicker_group){this._datepicker_group.destroy();this._datepicker_group=null;}if(this._timepicker_group){this._timepicker_group.destroy();this._timepicker_group=null;}};_pDateRangePicker._isUseCloseButton=function(){if(this._useclosebutton&&this._p_useheadline){return (this._p_displaytype!="date");}return false;};_pDateRangePicker._isUseOKButton=function(){if(!this._is_subcontrol){return false;}return (this._p_displaytype!="date");};_pDateRangePicker._updateButtons=function(_a){if(this._isUseCloseButton()&&!this._closebutton){var _b=this._closebutton=new nexacro.Button("closebutton",0,0,0,0,null,null,null,null,null,null,this);_b._setEventHandler("onclick",this.on_notify_close,this);_b._setControl();_b.set_text(this._p_closebuttontext);_b.createComponent(_a);}else if(this._isUseOKButton()&&!this._okbutton){var _c=this._okbutton=new nexacro.Button("okbutton",0,0,0,0,null,null,null,null,null,null,this);_c._setEventHandler("onclick",this.on_notify_OK,this);_c._setControl();_c.set_text(this._p_okbuttontext);_c.createComponent(_a);var _d=this._cancelbutton=new nexacro.Button("cancelbutton",0,0,0,0,null,null,null,null,null,null,this);_d._setEventHandler("onclick",this.on_notify_cancel,this);_d._setControl();_d.set_text(this._p_cancelbuttontext);_d.createComponent(_a);}else if(!this._isUseCloseButton()&&!this._isUseOKButton()){this._destroyUsedButtons();}this._recalcLayout();};_pDateRangePicker._destroyUsedButtons=function(){if(this._closebutton){this._closebutton.destroy();this._closebutton=null;}if(this._okbutton){this._okbutton.destroy();this._okbutton=null;}if(this._cancelbutton){this._cancelbutton.destroy();this._cancelbutton=null;}};_pDateRangePicker.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();if(this._datepicker_group){this._datepicker_group._setEnable(_a);}if(this._timepicker_group){this._timepicker_group._setEnable(_a);}if(this._closebutton){this._closebutton._setEnable(_a);}if(this._okbutton){this._okbutton._setEnable(_a);}if(this._cancelbutton){this._cancelbutton._setEnable(_a);}if(this._datetabbutton){this._datetabbutton._setEnable(_a);}if(this._timetabbutton){this._timetabbutton._setEnable(_a);}if(this._headline){this._headline._setEnable(_a);}};_pDateRangePicker.set_defaultrangeposition=function(_a){_a=parseInt(_a);if(this._p_defaultrangeposition!=_a){this._p_defaultrangeposition=_a;this.on_apply_defaultrangeposition();}};_pDateRangePicker.set_datepickerheadheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_datepickerheadheight!=_a){this._p_datepickerheadheight=_a;this.on_apply_datepickerheadheight(_a);}};_pDateRangePicker.on_apply_datepickerheadheight=function(){var _a=this._datepicker_group;if(_a){_a._setDatepickerheadheight(this._p_datepickerheadheight);}if(this._is_created){this._recalcLayout();this.on_apply_rangeposition();}};_pDateRangePicker.on_apply_defaultrangeposition=function(){if(this._datepicker_group){this._datepicker_group.set_defaultrangeposition(this._p_defaultrangeposition);}};_pDateRangePicker.set_rangeposition=function(_a){if(this._p_rangeposition!=_a){switch(_a){case "start":case "end":this._p_rangeposition=_a;break;default:return;}this.on_apply_rangeposition();}};_pDateRangePicker.on_apply_rangeposition=function(){if(this._datepicker_group){this._datepicker_group.set_rangeposition(this._p_rangeposition,true);}};_pDateRangePicker.set_locale=function(_a){if(this._p_locale!=_a){this._p_locale=_a;this.on_apply_locale(_a);}};_pDateRangePicker.on_apply_locale=function(_a){this._locale="";this._locale=this._p_locale?this._p_locale:this._getLocale();if(this._headline&&this._locale){this._headline.set_locale(this._p_locale);}if(this._datepicker_group){var _b=this._datepicker_group._picker_ctrl_list;for(var _c=0;_c<_b.length;_c++ ){_b[_c]._setWeekformatText();}}if(this._timepicker_group){var _b=this._timepicker_group._picker_ctrl_list;for(var _c=0;_c<_b.length;_c++ ){_b[_c].set_locale(this._locale);}}};_pDateRangePicker.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this.on_apply_headlinestartdatenulltext();this.on_apply_headlineenddatenulltext();this.on_apply_datetabbuttontext();this.on_apply_timetabbuttontext();};_pDateRangePicker.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pDateRangePicker._recalcLayout=function(){if(this._skip_recalc){return;}var _a=this._headline;var _b,_c;var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=0;var _g=0;var _h=_e;var _i=nexacro._getMobileOrientation();var _j=27;if(_a){if(this._p_headlineposition=="left"||(this._headline_autoposition&&(_i==2||_i==3))){_c=this._headlinewidth;_a.move(0,0,_c,this._getClientHeight());_g=_c;}else{_c=this._headlineheight;_a.move(0,0,this._getClientWidth(),_c);_f=_c;_h-=_c;}}if(this._datetabbutton){_c=(this._p_tabbuttonheight!=""&&this._p_tabbuttonheight>=0)?this._p_tabbuttonheight:27;this._datetabbutton.move(_g,_f,(_d-_g)/2,_c);this._timetabbutton.move(_g+this._datetabbutton._adjust_width,_f,this._datetabbutton._adjust_width,_c);_f+=_c;_h-=_c;}var _k=this._closebutton;if(_k){if(this._p_closebuttonsize){_b=this._p_closebuttonsize.split(" ");}else{_b=_k._on_getFitSize();}var _l= +_b[0];var _m=_b[1]? +_b[1]:_j;_k.move(_d-_l,_e-_m,_l,_m);_h-=_m;}var _n=0,_o=0;var _p=this._okbutton;if(_p){if(this._p_okbuttonsize){_b=this._p_okbuttonsize.split(" ");}else{_b=_p._on_getFitSize();}_o= +_b[0];var _q=_b[1]? +_b[1]:_j;_n=_d-_o;_p.move(_n,_e-_q,_o,_q);_h-=_q;}var _r=this._cancelbutton;if(_r){if(this._p_cancelbuttonsize){_b=this._p_cancelbuttonsize.split(" ");}else{_b=_r._on_getFitSize();}var _s= +_b[0];var _t=_b[1]? +_b[1]:_j;if(_s+_o>_d){_s=_d-_o;}_r.move(_n-_s,_e-_t,_s,_t);}var _u=this._datepicker_group,_v=this._timepicker_group;var _w,_x;if(_u&&_v){_w=_d-_g;_x=_d-_g;_u.move(_g,_f,_w,_h);_v.move(_g,_f,_x,_h);}else if(_u){_w=_d-_g;_u.move(_g,_f,_w,_h);}else if(_v){_x=_d-_g;_v.move(_g,_f,_x,_h);}};_pDateRangePicker.on_notify_ondatechanged=function(_a,_b){if(_a.id=="datepickergroup"){this._startdate.date=_b.poststartdate;this._enddate.date=_b.postenddate;if(this._p_type=="range"&&this._p_displaytype=="datetime"){if(this._startdate.date==this._enddate.date){if(this._startdate.time>this._enddate.time){this._enddate.time=this._startdate.time;this._timepicker_group.set_enddate(this._enddate.time,true);}}}}else if(_a.id=="timepickergroup"){this._startdate.time=_b.poststartdate;this._enddate.time=_b.postenddate?_b.postenddate:_b.poststartdate;}this._confirmValue();};_pDateRangePicker.on_notify_close=function(_a,_b){this.on_fire_oncloseup(_a,true,true);};_pDateRangePicker.on_notify_OK=_pDateRangePicker.on_notify_close;_pDateRangePicker.on_notify_cancel=function(_a,_b){this.on_fire_oncloseup(_a,false,true);};_pDateRangePicker.on_notify_headline_onstartdateclick=function(_a,_b){if(this._p_displaytype=="datetime"){this._changeTab("date");}if(this._datepicker_group){this._datepicker_group._cancelSelectYearMonth();this._datepicker_group._animateScroll("startdate",undefined,true);}};_pDateRangePicker.on_notify_headline_onenddateclick=function(_a,_b){if(this._p_displaytype=="datetime"){this._changeTab("date");}if(this._datepicker_group){this._datepicker_group._cancelSelectYearMonth();this._datepicker_group._animateScroll("enddate",undefined,true);}};_pDateRangePicker.on_notify_headline_onstartsubdateclick=function(_a,_b){if(this._p_displaytype=="datetime"){this._changeTab("time");}};_pDateRangePicker.on_notify_headline_onendsubdateclick=function(_a,_b){if(this._p_displaytype=="datetime"){this._changeTab("time");}};_pDateRangePicker.on_notify_datetabbuttonclick=function(_a,_b){this._changeTab("date");};_pDateRangePicker.on_notify_timetabbuttonclick=function(_a,_b){this._changeTab("time");};_pDateRangePicker._updateTabStatus=function(){if(this._currenttab=="date"){if(this._datetabbutton){this._datetabbutton._changeUserStatus("selected",true);this._timetabbutton._changeUserStatus("selected",false);}if(this._datepicker_group){this._datepicker_group.set_visible(true);}if(this._timepicker_group){this._timepicker_group.set_visible(false);}}else if(this._currenttab=="time"){if(this._datetabbutton){this._datetabbutton._changeUserStatus("selected",false);this._timetabbutton._changeUserStatus("selected",true);}if(this._datepicker_group){this._datepicker_group.set_visible(false);}if(this._timepicker_group){this._timepicker_group.set_visible(true);}}};_pDateRangePicker._changeTab=function(_a){this._currenttab=_a;this._updateTabStatus();this._getGroup()._setFocus(false);};_pDateRangePicker._getGroup=function(){if(this._timepicker_group&&this._timepicker_group._p_visible){return this._timepicker_group;}else if(this._datepicker_group&&this._datepicker_group._p_visible){return this._datepicker_group;}};_pDateRangePicker.on_notify_onstartdateclick=function(_a,_b){this._invalid_startdate="";this._invalid_enddate="";if(_b.kind!="after_onchanged"){if(_b.actk!="arrow_key"){this.on_fire_ondayclick(_b.date,"start");}}else{if(_b.actk=="click"){if(this._p_type!="range"&&this._p_displaytype=="date"){this.on_fire_oncloseup(this,true,true);}}}};_pDateRangePicker.on_notify_onenddateclick=function(_a,_b){if(_b.kind!="after_onchanged"){if(_b.actk!="arrow_key"){this.on_fire_ondayclick(_b.date,"end");}}};_pDateRangePicker.on_fire_oncloseup=function(_a,_b,_c){if(!this._is_popup_child){return;}if(!_c){if(this.oncloseup&&this.oncloseup._has_handlers){var _d=new nexacro.EventInfo(this);_d.eventid="oncloseup";_d._is_external_call=true;return this.oncloseup._fireEvent(this,_d);}}else{if(this.oncloseup&&this.oncloseup._has_handlers){var _d=new nexacro.EventInfo(this);_d.eventid="oncloseup";_d._apply_value=_b;_d._startdate=this.startdate;_d._enddate=this.enddate;return this.oncloseup._fireEvent(this,_d);}}return false;};_pDateRangePicker._on_dataset_onvaluechanged=function(_a,_b){if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pDateRangePicker.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pDateRangePicker.on_fire_ondayclick=function(_a,_b){if(this.ondayclick&&this.ondayclick._has_handlers){var _c=new nexacro.DateRangePickerDayClickEventInfo(this,"ondayclick",_a,_b);return this.ondayclick._fireEvent(this,_c);}return true;};_pDateRangePicker.on_fire_onchanged=function(_a,_b,_c,_d){if(this.onchanged&&this.onchanged._has_handlers){var _e=new nexacro.RangeDateChangedEventInfo(this,"onchanged",_a,_b,_c,_d);return this.onchanged._fireEvent(this,_e);}};_pDateRangePicker._notify_frame_resize=function(){if(this._datepicker_group){this._datepicker_group._scrollCurrent();}};_pDateRangePicker.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){if(!(_e instanceof nexacro._DatePickerBodyControl)&&(_f instanceof nexacro._DatePickerBodyControl||_f instanceof nexacro._DatePickerDayItemControl)){return false;}else{return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);}};_pDateRangePicker.set_type=function(_a){if(_a){_a=_a.toLowerCase();}if(this._p_type!=_a){switch(_a){case "single":case "range":this._p_type=_a;break;default:return;}this.on_apply_type();}};_pDateRangePicker.on_apply_type=function(){if(this._control_element){this._updatePicker();this._recalcLayout();}if(this._headline){this._headline.set_userange(this._p_type=="range");}if(this._datepicker_group){this._datepicker_group.set_type(this._p_type,true);}if(this._timepicker_group){this._timepicker_group.set_type(this._p_type,true);}if(this._p_type=="range"){this.on_apply_startdate();}};_pDateRangePicker.set_displaytype=function(_a){if(_a){_a=_a.toLowerCase();}if(this._p_displaytype!=_a){switch(_a){case "date":case "datetime":case "time":this._p_displaytype=_a;break;default:return;}this.on_apply_displaytype();}};_pDateRangePicker.on_apply_displaytype=function(){if(this._control_element){this._updateTabButtons();this._updatePicker();this._recalcLayout();this.on_apply_displaymonthcount();if(this._p_startdate){this.on_apply_startdate();}this.on_apply_type();this._updateButtons();if(this._p_displaytype=="date"||this._p_displaytype=="datetime"){this._changeTab("date");}else{this._changeTab("time");}}if(this._headline){this._headline.set_displaytype(this._p_displaytype);}};_pDateRangePicker.set_closebuttontext=function(_a){_a=nexacro._toString(_a);if(this._p_closebuttontext!=_a){this._p_closebuttontext=_a;this.on_apply_closebuttontext();}};_pDateRangePicker.on_apply_closebuttontext=function(){if(this._closebutton){this._closebutton.set_text(this._p_closebuttontext);}};_pDateRangePicker.set_okbuttontext=function(_a){_a=nexacro._toString(_a);if(this._p_okbuttontext!=_a){this._p_okbuttontext=_a;this.on_apply_okbuttontext();}};_pDateRangePicker.on_apply_okbuttontext=function(){if(this._okbutton){this._okbutton.set_text(this._p_okbuttontext);}this._updateButtons();};_pDateRangePicker.set_cancelbuttontext=function(_a){_a=nexacro._toString(_a);if(this._p_cancelbuttontext!=_a){this._p_cancelbuttontext=_a;this.on_apply_cancelbuttontext();}};_pDateRangePicker.on_apply_cancelbuttontext=function(){if(this._cancelbutton){this._cancelbutton.set_text(this._p_cancelbuttontext);}this._updateButtons();};_pDateRangePicker.set_useheadline=function(_a){_a=nexacro._toBoolean(_a);if(this._p_useheadline!=_a){this._p_useheadline=_a;this.on_apply_useheadline();}};_pDateRangePicker.on_apply_useheadline=function(){if(!this._control_element){return;}this._updateHeadLine();this._updateButtons(true);this._recalcLayout();};_pDateRangePicker.set_tabbuttonheight=function(_a){_a=parseInt(_a);if(this._p_tabbuttonheight!=_a){this._p_tabbuttonheight=_a;this.on_apply_tabbuttonheight();}};_pDateRangePicker.on_apply_tabbuttonheight=function(){if(!this._control_element){return;}this._recalcLayout();};_pDateRangePicker.set_headlinesize=function(_a){if(this._p_headlinesize!=_a){this._p_headlinesize=_a;this.on_apply_headlinesize();}};_pDateRangePicker.on_apply_headlinesize=function(){if(this._p_headlinesize){var _a=this._p_headlinesize.toString().split(" ");this._headlinewidth=_a[0]?parseInt(_a[0]):150;this._headlineheight=(_a[1])?parseInt(_a[1]):80;}if(!this._control_element){return;}this._recalcLayout();};_pDateRangePicker.set_closebuttonsize=function(_a){if(this._p_closebuttonsize!=_a){this._p_closebuttonsize=_a;this.on_apply_closebuttonsize();}};_pDateRangePicker.on_apply_closebuttonsize=function(){if(!this._control_element){return;}this._recalcLayout();};_pDateRangePicker.set_headlinedateformat=function(_a){if(this._p_headlinedateformat!=_a){this._p_headlinedateformat=_a;this.on_apply_headlinedateformat();}};_pDateRangePicker.on_apply_headlinedateformat=function(){if(this._headline){this._headline.set_dateformat(this._p_headlinedateformat);}};_pDateRangePicker.set_headlinetimeformat=function(_a){if(this._p_headlinetimeformat!=_a){this._p_headlinetimeformat=_a;this.on_apply_headlinetimeformat();}};_pDateRangePicker.on_apply_headlinetimeformat=function(){if(this._headline){this._headline.set_timeformat(this._p_headlinetimeformat);}};_pDateRangePicker.set_direction=function(_a){if(_a){_a=_a.toLowerCase();}if(this._p_direction!=_a){switch(_a){case "horizontal":case "vertical":this._p_direction=_a;break;default:return;}this.on_apply_direction();}};_pDateRangePicker.on_apply_direction=function(){if(this._datepicker_group){this._datepicker_group.set_direction(this._p_direction,true);}if(this._timepicker_group){this._timepicker_group.set_direction(this._p_direction,true);}};_pDateRangePicker.set_displaymonthcount=function(_a){_a=parseInt(_a);if(!_a||_a>3){return;}if(this._p_displaymonthcount!=_a){this._p_displaymonthcount=_a;this.on_apply_displaymonthcount();}};_pDateRangePicker.on_apply_displaymonthcount=function(){if(this._datepicker_group){this._datepicker_group.set_displaymonthcount(this._p_displaymonthcount,true);}};_pDateRangePicker.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(this._p_innerdataset!=_a||(this._p_innerdataset&&!this._innerdataset)){this._setInnerDatasetStr(_a);this.on_apply_innerdataset(this._innerdataset);}};_pDateRangePicker.on_apply_innerdataset=function(_a){if(_a){_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);}if(this._datepicker_group){this._datepicker_group.set_innerdataset(this._p_innerdataset,true);}};_pDateRangePicker._setInnerDatasetStr=function(_a){if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this._p_innerdataset=_a;}};_pDateRangePicker.getInnerDataset=function(){return this._innerdataset;};_pDateRangePicker.setInnerDataset=function(_a){if(!_a){this._innerdataset=null;this._p_innerdataset="";this.on_apply_innerdataset(this._innerdataset);}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this._p_innerdataset=_a.id;this.on_apply_innerdataset(this._innerdataset);}};_pDateRangePicker.set_backgroundcolumn=function(_a){if(this._p_backgroundcolumn!=_a){this._p_backgroundcolumn=_a;this.on_apply_backgroundcolumn();}};_pDateRangePicker.on_apply_backgroundcolumn=function(){if(this._datepicker_group){this._datepicker_group.set_backgroundcolumn(this._p_backgroundcolumn,true);}};_pDateRangePicker.set_bordercolumn=function(_a){if(this._p_bordercolumn!=_a){this._p_bordercolumn=_a;this.on_apply_bordercolumn();}};_pDateRangePicker.on_apply_bordercolumn=function(){if(this._datepicker_group){this._datepicker_group.set_bordercolumn(this._p_bordercolumn,true);}};_pDateRangePicker.set_datecolumn=function(_a){if(this._p_datecolumn!=_a){this._p_datecolumn=_a;this.on_apply_datecolumn(_a);}};_pDateRangePicker.on_apply_datecolumn=function(){if(this._datepicker_group){this._datepicker_group.set_datecolumn(this._p_datecolumn,true);}};_pDateRangePicker.set_textcolorcolumn=function(_a){if(this._p_textcolorcolumn!=_a){this._p_textcolorcolumn=_a;this.on_apply_textcolorcolumn(_a);}};_pDateRangePicker.on_apply_textcolorcolumn=function(){if(this._datepicker_group){this._datepicker_group.set_textcolorcolumn(this._p_textcolorcolumn,true);}};_pDateRangePicker.set_hintingcolumn=function(_a){if(this._p_hintingcolumn!=_a){this._p_hintingcolumn=_a;this.on_apply_hintingcolumn(_a);}};_pDateRangePicker.on_apply_hintingcolumn=function(){if(this._datepicker_group){this._datepicker_group.set_hintingcolumn(this._p_hintingcolumn,true);}};_pDateRangePicker.set_readonlycolumn=function(_a){if(this._p_readonlycolumn!=_a){this._p_readonlycolumn=_a;this.on_apply_readonlycolumn(_a);}};_pDateRangePicker.on_apply_readonlycolumn=function(){if(this._datepicker_group){this._datepicker_group.set_readonlycolumn(this._p_readonlycolumn,true);}};_pDateRangePicker._getDateValue=function(_a){var _b=_a.getFullYear();var _c=String(_a.getMonth()+1).padStart(2,'0');var _d=String(_a.getDate()).padStart(2,'0');var _e=_b+_c+_d;return _e;};_pDateRangePicker._getTimeValue=function(_a){var _b=String(_a.getHours()).padStart(2,'0');var _c=String(_a.getMinutes()).padStart(2,'0');var _d=String(_a.getSeconds()).padStart(2,'0');var _e=String(_a.getMilliseconds()).padStart(3,'0');var _f=_b+_c+_d+_e;return _f;};_pDateRangePicker.set_value=nexacro._emptyFn;_pDateRangePicker.on_apply_value=function(){if(this._datepicker_group){this._datepicker_group._cancelSelectYearMonth();}if(this._headline){var _a;if(this._p_startdate){_a=this._convValueToDateObj(this._p_startdate);this._headline.set_dateobj(_a.date,_a.time);}else{this._headline.set_dateobj(undefined,undefined);}if(this._p_enddate){_a=this._convValueToDateObj(this._p_enddate);this._headline.set_enddateobj(_a.date,_a.time);}else{this._headline.set_enddateobj(undefined,undefined);}}};_pDateRangePicker._convValueToDateObj=function(_a){var _b,_c;var _d,_e;if(this._p_displaytype=="time"){_c=_a;if(_a.length==17){_c=_a.substr(8,9);}_e=nexacro.DataUtils.toTime(_c);}else if(this._p_displaytype=="datetime"){_b=_a.substr(0,8);_c=_a.substr(8,9);_d=nexacro.DataUtils.toDate(_b);_e=nexacro.DataUtils.toTime(_c);}else{_b=_a;if(_a.length==17){_b=_a.substr(0,8);}_d=nexacro.DataUtils.toDate(_b);}return {date:_d,time:_e};};_pDateRangePicker._convDisplayTypeValue=function(_a){var _b,_c={date:"",time:""};if(_a){if(this._p_displaytype=="datetime"){if(_a.length==8){_a=_a.padRight(17,"0");}_b=nexacro.DataUtils.toDateTime(_a).toString();_c.date=_b.substr(0,8);_c.time=_b.substr(8,9);}else if(this._p_displaytype=="date"){var _d=_a;if(_d.length==17){_d=_d.substr(0,8);}_b=nexacro.DataUtils.toDate(_d).toString();_c.date=_b;}else if(this._p_displaytype=="time"){var _d=_a;if(_d.length==17){_d=_d.substr(8,9);}_b=nexacro.DataUtils.toTime(_d).toString();_c.time=_b;}}else{var _e=new nexacro.Date();if(this._p_displaytype=="datetime"){_b=nexacro.DataUtils.toDateTime(_e.toString()).toString();_c.date=_b.substr(0,8);_c.time="000000000";}else if(this._p_displaytype=="date"){_e._timecheck=false;_b=nexacro.DataUtils.toDate(_e.toString()).toString();_c.date=_b;}else if(this._p_displaytype=="time"){_c.time="";}}return _c;};_pDateRangePicker._want_arrows=false;_pDateRangePicker._getDlgCode=function(_a,_b,_c){var _d=this._want_arrows;if(_c==true){_d=true;}return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:_d};};_pDateRangePicker.set_startdate=function(_a){if(this._p_startdate!=_a){this._p_startdate=_a;this.on_apply_startdate();}};_pDateRangePicker.on_apply_startdate=function(){this._startdate=this._convDisplayTypeValue(this._p_startdate);this._invalid_startdate="";this._invalid_enddate="";if(this._enddate&&this._startdate.date>this._enddate.date){if(this._p_type=="range"){if(this._p_startdate&&this._p_enddate&&this._enddate.date<this._startdate.date){this._invalid_startdate=this._startdate.date;this._invalid_enddate=this._enddate.date;}else if(!this._p_startdate&&this._p_enddate){this._invalid_enddate=this._enddate.date;}}this._enddate.date=this._startdate.date;}if(this._p_enddate){this.on_apply_enddate();}if(this._datepicker_group){this._datepicker_group._setInvalidDate(this._invalid_startdate,this._invalid_enddate);if(this._p_startdate){this._datepicker_group.set_startdate(this._startdate.date,true);}else{this._datepicker_group.set_startdate("",true);}}if(this._timepicker_group&&this._p_startdate){this._timepicker_group.set_startdate(this._startdate.time,true);}};_pDateRangePicker.set_enddate=function(_a){if(this._p_enddate!=_a){this._p_enddate=_a;this.on_apply_enddate();}};_pDateRangePicker.on_apply_enddate=function(){if(this._p_type!="range"){this._p_value=this._p_startdate;this.on_apply_value();return;}this._enddate=this._convDisplayTypeValue(this._p_enddate);this._invalid_startdate="";this._invalid_enddate="";if(this._p_startdate&&this._p_enddate&&this._enddate.date<this._startdate.date){this._invalid_enddate=this._enddate.date;this._invalid_startdate=this._startdate.date;this._enddate.date=this._startdate.date;}else if(!this._p_startdate&&this._p_enddate){this._invalid_enddate=this._enddate.date;}else if(!this._p_enddate){this._enddate.date=this._startdate.date;}if(this._enddate.date<this._startdate.date){this._p_value=this._p_startdate+" "+this._p_enddate;}else{this._p_value=this._p_startdate+"-"+this._p_enddate;}this.on_apply_value();if(this._datepicker_group){this._datepicker_group._setInvalidDate(this._invalid_startdate,this._invalid_enddate);if(this._p_enddate){this._datepicker_group.set_enddate(this._enddate.date,true);}else{this._datepicker_group.set_enddate("",true);}}if(this._timepicker_group){this._timepicker_group.set_enddate(this._enddate.time,true);}};_pDateRangePicker.on_init_bindSource=function(_a,_b,_c){if(_b=="startdate"||_b=="enddate"){this["set_"+_b](undefined);}};_pDateRangePicker._isInvalidValue=function(_a){if(nexacro._isNull(_a)||_a===""){return false;}var _b;if(_a instanceof Date||_a instanceof nexacro.Date){_b=_a;}else{_b=nexacro.DataUtils.toDate(_a);}if(_b){if(_b._isInvalidDate?_b._isInvalidDate():isNaN(_b.valueOf())){return true;}var _c=_b.getFullYear();if(_c<0||_c>9999){return true;}}return false;};_pDateRangePicker._convertValueType=function(_a,_b,_c){var _d,_e;if(_c){_e=nexacro._getDatatypeRule();if(_e=="1.0"){return _a;}}_d=(_b===undefined||_b===null)?_b:nexacro._toString(_b);return _d;};_pDateRangePicker.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="startdate"||_a=="enddate"){var _e=_b.getColumn(_c,_d);{if(typeof (_e)=="object"){_e=this._convertValueType(_e,_e,true);}this["set_"+_a](_e);}if(!this._p_parent._is_created){this.on_apply_rangeposition();}}};_pDateRangePicker.on_getBindableProperties=function(){return ["startdate","enddate"];};_pDateRangePicker.on_notify_ontimechanged=function(_a,_b){var _c=false,_d=false;var _e="";if(_b.prestartdate!=_b.poststartdate){if(!this._p_startdate){_c=true;}this._startdate.time=_b.poststartdate;_e="start";}if(_b.preenddate!=_b.postenddate){if(!this._p_enddate){_d=true;}this._enddate.time=_b.postenddate;_e+="end";}if(!_e){return;}this._confirmValue(_e);if(this._p_displaytype=="datetime"){if(_c||_d){if(this._datepicker_group){this._datepicker_group._is_set_startvalue=true;this._datepicker_group._updateRangeDate();}}}};_pDateRangePicker._on_rangedate_change=function(_a,_b,_c,_d){var _e;if(_a!=_b){_e=this._on_date_change(_a,_b,"startdate");}if(_c!=_d){_e=this._on_date_change(_c,_d,"enddate")||_e;}if(_e){this.on_fire_onchanged(_a,_b,_c,_d);this._updateAccessibilityLabel();}return _e;};_pDateRangePicker._on_date_change=function(_a,_b,_c){if(this._beginValueChange()){return false;}var _d=true;if(!this.applyto_bindSource(_c,_b)){_d=false;}if(!_d){this["_p_"+_c]=_a;this["on_apply_"+_c]();}else{if(this["_p_"+_c]!=_a&&this["_p_"+_c]!=_b){_d=false;}}if(_d){var _e,_f,_g,_h;this["set_"+_c](_b);if(_c=="startdate"){this._default_startdate=_a;}else{this._default_enddate=_a;}}this._finalValueChange();return true;};_pDateRangePicker._beginValueChange=function(){return !(this.__value_change?false:this.__value_change=true);};_pDateRangePicker._finalValueChange=function(){return !(this.__value_change=false);};_pDateRangePicker.set_maxdate=function(_a){if(this._p_maxdate!=_a){this._p_maxdate=_a;this.on_apply_maxdate();}};_pDateRangePicker.on_apply_maxdate=function(){if(this._datepicker_group){this._datepicker_group.set_maxdate(this._p_maxdate);}};_pDateRangePicker.set_mindate=function(_a){if(this._p_mindate!=_a){this._p_mindate=_a;this.on_apply_mindate();}};_pDateRangePicker.on_apply_mindate=function(){if(this._datepicker_group){this._datepicker_group.set_mindate(this._p_mindate);}};_pDateRangePicker.set_headlinestartdatenulltext=function(_a){_a=nexacro._toString(_a);if(this._p_headlinestartdatenulltext!=_a){this._p_headlinestartdatenulltext=_a;this.on_apply_headlinestartdatenulltext();}};_pDateRangePicker.on_apply_headlinestartdatenulltext=function(){if(this._headline){this._headline.set_startdatenulltext(this._getStringResourceProperty(this._p_headlinestartdatenulltext));}};_pDateRangePicker.set_headlineenddatenulltext=function(_a){_a=nexacro._toString(_a);if(this._p_headlineenddatenulltext!=_a){this._p_headlineenddatenulltext=_a;this.on_apply_headlineenddatenulltext();}};_pDateRangePicker.on_apply_headlineenddatenulltext=function(){if(this._headline){this._headline.set_enddatenulltext(this._getStringResourceProperty(this._p_headlineenddatenulltext));}};_pDateRangePicker.set_datetabbuttontext=function(_a){_a=nexacro._toString(_a);if(this._p_datetabbuttontext!=_a){this._p_datetabbuttontext=_a;this.on_apply_datetabbuttontext();}};_pDateRangePicker.on_apply_datetabbuttontext=function(){if(this._datetabbutton){this._datetabbutton.set_text(this._getStringResourceProperty(this._p_datetabbuttontext));}};_pDateRangePicker.set_timetabbuttontext=function(_a){_a=nexacro._toString(_a);if(this._p_timetabbuttontext!=_a){this._p_timetabbuttontext=_a;this.on_apply_timetabbuttontext();}};_pDateRangePicker.on_apply_timetabbuttontext=function(){if(this._timetabbutton){this._timetabbutton.set_text(this._getStringResourceProperty(this._p_timetabbuttontext));}};_pDateRangePicker.set_headlineposition=function(_a){if(_a){_a=_a.toLowerCase();}if(this._p_headlineposition!=_a){switch(_a){case "top":case "left":this._p_headlineposition=_a;break;default:return;}this.on_apply_headlineposition();}};_pDateRangePicker.on_apply_headlineposition=function(){this._recalcLayout();};_pDateRangePicker.set_readonly=function(_a){if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly();}};_pDateRangePicker.on_apply_readonly=function(){if(this._datepicker_group){this._datepicker_group.set_readonly(this._p_readonly,true);}};_pDateRangePicker.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this,_a,_b);if(this._datepicker_group){this._datepicker_group._initSelectOrder();}};_pDateRangePicker.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(_c&&_b&&(_a==nexacro.Event.KEY_LEFT||_a==nexacro.Event.KEY_RIGHT)){if(this._p_displaytype=="datetime"){var _g;(this._currenttab=="date")?_g="time":_g="date";this._changeTab(_g);}}else if(_a==nexacro.Event.KEY_ENTER){if(_e instanceof nexacro._DatePickerDayItemControl||this._currenttab=="time"||this._p_displaytype=="time"){if(this._p_type!="range"){this.on_fire_oncloseup(this,true,true);}}}else if(_a==nexacro.Event.KEY_ESC){this.on_fire_oncloseup(this,false,true);}};_pDateRangePicker.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=true;var _k=this._p_parent;if(_k instanceof nexacro.DateField){return true;}else{_j=nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);}return _j;};_pDateRangePicker.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=true;var _k=this._p_parent;if(_k instanceof nexacro.DateField){return true;}else{_j=nexacro.Component.prototype.on_fire_sys_onfling.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);}return _j;};_pDateRangePicker._confirmValue=function(_a){var _b=this._p_startdate;var _c=this._p_enddate;if(this._p_displaytype=="datetime"){if(_a!="end"){this._p_startdate=this._startdate.date+this._startdate.time;}if(_a!="start"){if(!this._enddate.date){this._enddate.date=this._startdate.date;this._p_enddate="";}else{this._p_enddate=this._enddate.date+(this._enddate.time?this._enddate.time:"000000000");}}}else if(this._p_displaytype=="date"){if(_a!="end"){this._p_startdate=this._startdate.date;}if(_a!="start"){this._p_enddate=this._enddate.date;if(!this._enddate.date){this._enddate.date=this._startdate.date;this._p_enddate="";}else{this._p_enddate=this._enddate.date+this._enddate.time;}}}else if(this._p_displaytype=="time"){if(_a!="end"){this._p_startdate=this._startdate.time;}if(_a!="start"){this._p_enddate=this._enddate.time;}}if(this._p_type=="range"){if(this._p_displaytype=="datetime"||this._p_displaytype=="date"){if(this._enddate.date<this._startdate.date){this._p_value=this._p_startdate+" "+this._p_enddate;}else{this._p_value=this._p_startdate+"-"+this._p_enddate;}}else{if(this._enddate.time<this._startdate.time){this._p_value=this._p_startdate+" "+this._p_enddate;}else{this._p_value=this._p_startdate+"-"+this._p_enddate;}}}else{this._p_value=this._p_startdate;}this.on_apply_value();if(!this._on_rangedate_change(_b,this._p_startdate,_c,this._p_enddate)){this._p_startdate=_b;this._p_enddate=_c;this.on_apply_value();}};_pDateRangePicker._on_focus=function(_a,_b,_c,_d,_e,_f){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);this._getGroup()._setFocus(false);};nexacro.PickerHeadLineControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pPickerHeadLineControl=nexacro._createPrototype(nexacro.Component,nexacro.PickerHeadLineControl);nexacro.PickerHeadLineControl.prototype=_pPickerHeadLineControl;_pPickerHeadLineControl._type_name="PickerHeadLineControl";_pPickerHeadLineControl._p_displaytype="date";_pPickerHeadLineControl._is_locale_control=true;_pPickerHeadLineControl._is_subcontrol=true;_pPickerHeadLineControl._p_userange=false;_pPickerHeadLineControl._p_dateformat="";_pPickerHeadLineControl._p_timeformat="";_pPickerHeadLineControl._p_startdatebutton=null;_pPickerHeadLineControl._p_enddatebutton=null;_pPickerHeadLineControl._p_startsubdatebutton=null;_pPickerHeadLineControl._p_endsubdatebutton=null;_pPickerHeadLineControl._p_enddatenulltext="";_pPickerHeadLineControl._p_dateobj=null;_pPickerHeadLineControl._p_timeobj=null;_pPickerHeadLineControl._p_enddateobj=null;_pPickerHeadLineControl._p_endtimeobj=null;_pPickerHeadLineControl._default_locale_date_style="MEDIUMDATE";_pPickerHeadLineControl._default_locale_time_style="MEDIUMTIME";_pPickerHeadLineControl._default_startdate="Start Date";_pPickerHeadLineControl._default_starttime="Start Time";_pPickerHeadLineControl._default_enddate="End Date";_pPickerHeadLineControl._default_endtime="End Time";_pPickerHeadLineControl._splitline=null;_pPickerHeadLineControl.on_create_contents=function(){this.on_apply_locale();this._updateStartButton(true);this._updateEndButton(true);};_pPickerHeadLineControl.on_created_contents=function(_a){if(this._p_startdatebutton){this._p_startdatebutton.on_created(_a);}if(this._p_startsubdatebutton){this._p_startsubdatebutton.on_created(_a);}if(this._p_enddatebutton){this._p_enddatebutton.on_created(_a);}if(this._p_endsubdatebutton){this._p_endsubdatebutton.on_created(_a);}if(this._splitline){this._splitline.on_created(_a);}};_pPickerHeadLineControl.on_create_contents_command=function(){var _a="";if(this._p_startdatebutton){_a+=this._p_startdatebutton.createCommand();}if(this._p_startsubdatebutton){_a+=this._p_startsubdatebutton.createCommand();}if(this._p_enddatebutton){_a+=this._p_enddatebutton.createCommand();}if(this._p_endsubdatebutton){_a+=this._p_endsubdatebutton.createCommand();}if(this._splitline){_a+=this._splitline.createCommand();}return _a;};_pPickerHeadLineControl.on_attach_contents_handle=function(_a){if(this._p_startdatebutton){this._p_startdatebutton.attachHandle(_a);this._p_startdatebutton._setAccessibilityStatHidden(true);}if(this._p_startsubdatebutton){this._p_startsubdatebutton.attachHandle(_a);this._p_startsubdatebutton._setAccessibilityStatHidden(true);}if(this._p_enddatebutton){this._p_enddatebutton.attachHandle(_a);this._p_enddatebutton._setAccessibilityStatHidden(true);}if(this._p_endsubdatebutton){this._p_endsubdatebutton.attachHandle(_a);this._p_endsubdatebutton._setAccessibilityStatHidden(true);}if(this._splitline){this._splitline.attachHandle(_a);this._splitline._setAccessibilityStatHidden(true);}};_pPickerHeadLineControl.on_destroy_contents=function(){this._p_dateobj=null;this._p_timeobj=null;this._p_enddateobj=null;this._p_endtimeobj=null;if(this._p_startdatebutton){this._p_startdatebutton.destroy();this._p_startdatebutton=null;}if(this._p_startsubdatebutton){this._p_startsubdatebutton.destroy();this._p_startsubdatebutton=null;}if(this._p_enddatebutton){this._p_enddatebutton.destroy();this._p_enddatebutton=null;}if(this._p_endsubdatebutton){this._p_endsubdatebutton.destroy();this._p_endsubdatebutton=null;}if(this._splitline){this._splitline.destroy();this._splitline=null;}};_pPickerHeadLineControl._updateStartButton=function(_a){if(!this._control_element){return;}if(this._p_displaytype.indexOf("date")>=0||this._p_displaytype=="time"){if(!this._p_startdatebutton){var _b=this._p_startdatebutton=new nexacro.Button("startdate",0,0,0,0,null,null,null,null,null,null,this);_b._setControl();_b.createComponent(_a);if(this._testline){_b.set_border("1px dotted red");}}}else{if(this._p_startdatebutton){this._p_startdatebutton.destroy();this._p_startdatebutton=null;}}if(this._p_displaytype=="datetime"){if(!this._p_startsubdatebutton){var _c=this._p_startsubdatebutton=new nexacro.Button("startsubdate",0,0,0,0,null,null,null,null,null,null,this);_c._setControl();_c.createComponent(_a);if(this._testline){_c.set_border("1px dotted red");}}}else{if(this._p_startsubdatebutton){this._p_startsubdatebutton.destroy();this._p_startsubdatebutton=null;}}};_pPickerHeadLineControl._updateEndButton=function(_a){if(!this._control_element){return;}if(this._p_userange){if(!this._p_enddatebutton){var _b=this._p_enddatebutton=new nexacro.Button("enddate",0,0,0,0,null,null,null,null,null,null,this);_b._setControl();_b.createComponent(_a);if(this._testline){_b.set_border("1px dotted red");}}if(this._p_displaytype=="datetime"){if(!this._p_endsubdatebutton){var _c=this._p_endsubdatebutton=new nexacro.Button("endsubdate",0,0,0,0,null,null,null,null,null,null,this);_c._setControl();_c.createComponent(_a);if(this._testline){_c.set_border("1px dotted red");}}}else{if(this._p_endsubdatebutton){this._p_endsubdatebutton.destroy();this._p_endsubdatebutton=null;}}if(!this._splitline){var _d=this._splitline=new nexacro.DatePickerSplitLine("splitline",0,0,0,0,null,null,null,null,null,null,this);_d._is_nc_control=false;_d.createComponent(_a);}}else{this._destroyEndButton();if(this._splitline){this._splitline.destroy();this._splitline=null;}}};_pPickerHeadLineControl._destroyEndButton=function(){if(this._p_enddatebutton){this._p_enddatebutton.destroy();this._p_enddatebutton=null;}if(this._p_endsubdatebutton){this._p_endsubdatebutton.destroy();this._p_endsubdatebutton=null;}};_pPickerHeadLineControl.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();if(this._p_startdatebutton){this._p_startdatebutton._setEnable(_a);}if(this._p_startsubdatebutton){this._p_startsubdatebutton._setEnable(_a);}if(this._p_enddatebutton){this._p_enddatebutton._setEnable(_a);}if(this._p_endsubdatebutton){this._p_endsubdatebutton._setEnable(_a);}};_pPickerHeadLineControl.set_startdatenulltext=function(_a){if(this._p_startdatenulltext!=_a){this._p_startdatenulltext=_a;this.on_apply_startdatenulltext();}};_pPickerHeadLineControl.on_apply_startdatenulltext=function(){this.on_apply_dateobj();};_pPickerHeadLineControl.set_enddatenulltext=function(_a){if(this._p_enddatenulltext!=_a){this._p_enddatenulltext=_a;this.on_apply_enddatenulltext();}};_pPickerHeadLineControl.on_apply_enddatenulltext=function(){this.on_apply_dateobj();};_pPickerHeadLineControl.set_dateformat=function(_a){if(this._p_dateformat!=_a){this._p_dateformat=_a;this.on_apply_dateformat();}};_pPickerHeadLineControl.on_apply_dateformat=function(){this.on_apply_dateobj();};_pPickerHeadLineControl.set_timeformat=function(_a){if(this._p_timeformat!=_a){this._p_timeformat=_a;this.on_apply_timeformat();}};_pPickerHeadLineControl.on_apply_timeformat=function(){this.on_apply_dateobj();};_pPickerHeadLineControl.set_displaytype=function(_a){if(this._p_displaytype!=_a){switch(_a){case "date":case "datetime":case "time":this._p_displaytype=_a;break;default:return;}this.on_apply_displaytype();}};_pPickerHeadLineControl.on_apply_displaytype=function(){this._updateStartButton();this._updateEndButton();this.on_apply_dateobj();};_pPickerHeadLineControl.set_userange=function(_a){if(this._p_userange!=_a){this._p_userange=_a;this.on_apply_userange();}};_pPickerHeadLineControl.on_apply_userange=function(){this._updateEndButton();this.on_apply_dateobj();};_pPickerHeadLineControl.set_locale=function(_a){if(this._p_locale!=_a){this._p_locale=_a;this.on_apply_locale();}};_pPickerHeadLineControl.on_apply_locale=function(){this._locale="";this._locale=this._p_locale?this._p_locale:this._getLocale();this.on_apply_dateobj();};_pPickerHeadLineControl.set_dateobj=function(_a,_b){this._p_dateobj=_a;this._p_timeobj=_b;this.on_apply_dateobj();};_pPickerHeadLineControl.set_enddateobj=function(_a,_b){this._p_enddateobj=_a;this._p_endtimeobj=_b;this.on_apply_dateobj(true);};_pPickerHeadLineControl.on_apply_dateobj=function(_a){if(!this._control_element){return;}if(!this._locale){this.on_apply_locale();}var _b=_a?this._p_enddateobj:this._p_dateobj;var _c=_a?this._p_endtimeobj:this._p_timeobj;var _d,_e;var _f,_g;switch(this._p_dateformat){case "SHORTDATE":case "MEDIUMDATE":case "LONGDATE":case "FULLDATE":_f=this._p_dateformat;break;default:_d=this._p_dateformat;break;}switch(this._p_timeformat){case "SHORTTIME":case "MEDIUMTIME":_g=this._p_timeformat;break;default:_e=this._p_timeformat;break;}var _h,_i="",_j="",_k;if(this._p_displaytype.indexOf("date")>=0){if(_b){if(_b!="Invalid Date"){if(_d){_k=_d;_i=_b._getLocaleFormatString2(this._locale,_k);}else{if(!_f){_f=this._default_locale_date_style;}_k=nexacro.Locale._makeDateMaskStringFromIntl(this._locale,_f);_i=_b._getLocaleFormatString2(this._locale,_k);}}else{_i="Invalid Date";}}}if(this._p_displaytype.indexOf("time")>=0){if(_c){if(_c!="Invalid Date"){if(_e){_k=_e;_j=_c._getLocaleFormatString2(this._locale,_k);}else{if(!_g){_g=this._default_locale_time_style;}_k=nexacro.Locale._makeTimeMaskStringFromIntl(this._locale,_g);_j=_c._getLocaleFormatString2(this._locale,_k);}}else{_j="Invalid Time";}}}_i=_i.trim();_j=_j.trim();if(this._p_userange==false){this._end_date_text="";this._end_time_text="";}if(_a){this._end_date_text=_i?_i:(this._p_enddatenulltext?this._p_enddatenulltext:this._default_enddate);this._end_time_text=_j?_j:(this._p_enddatenulltext?this._p_enddatenulltext:this._default_endtime);}else{this._start_date_text=_i?_i:(this._p_startdatenulltext?this._p_startdatenulltext:this._default_startdate);this._start_time_text=_j?_j:(this._p_startdatenulltext?this._p_startdatenulltext:this._default_starttime);}this._updateAll();if(!_a&&this._p_userange){this.on_apply_dateobj(true);}};_pPickerHeadLineControl._testline=0;_pPickerHeadLineControl._updateAll=function(){if(!this._p_startdatebutton&&!this._p_startsubdatebutton){return;}var _a=this._start_date_text;var _b=this._end_date_text;var _c=this._start_time_text;var _d=this._end_time_text;var _e,_f=0,_g=this._getClientWidth(),_h=this._getClientHeight();var _i=false;if(_g<_h){_i=true;}if(this._splitline){if(_i){this._splitline._setDirection(true);var _j=this._splitline._getCurrentStyleBorder();var _k=_j?_j.top._width:0;this._splitline.move(0,_h/2-_k,_g,_k);}else{this._splitline._setDirection(false);var _j=this._splitline._getCurrentStyleBorder();var _k=_j?_j.right._width:0;this._splitline.move(_g/2-_k,0,_k,_h);}}if(this._p_displaytype=="date"||this._p_displaytype=="time"){if(this._p_displaytype=="time"){_a=_c;_b=_d;}this._p_startdatebutton.set_text(_a);if(this._p_startsubdatebutton){this._p_startsubdatebutton.set_visible(false);}if(this._p_endsubdatebutton){this._p_endsubdatebutton.set_visible(false);}if(_i){_f=0;}if(this._p_enddatebutton){if(_i){this._p_startdatebutton.move(0,_f,_g,_h/2);}else{this._p_startdatebutton.move(0,_f,_g/2,_h);}this._p_enddatebutton.set_text(_b);if(_i){this._p_enddatebutton.move(0,_h/2,_g,_h/2);}else{this._p_enddatebutton.move(this._p_startdatebutton._adjust_width,_f,_g/2,_h);}}else{this._p_startdatebutton.move(0,_f,_g,_h);}}else if(this._p_displaytype=="datetime"){this._p_startdatebutton.set_text(_a);this._p_startsubdatebutton.set_text(_c);if(_c==this._default_starttime||_c==this._p_startdatenulltext){this._p_startsubdatebutton.set_visible(false);}else{this._p_startsubdatebutton.set_visible(true);}if(this._p_userange){if(_i){if(this._p_startsubdatebutton._p_visible){this._p_startdatebutton.move(0,_f,_g,_h/4);this._p_startsubdatebutton.move(0,_f+this._p_startdatebutton._adjust_height,_g,this._p_startdatebutton._adjust_height);}else{this._p_startdatebutton.move(0,_f,_g,_h/2);}}else{if(this._p_startsubdatebutton._p_visible){this._p_startdatebutton.move(0,_f,_g/2,_h/2);this._p_startsubdatebutton.move(0,_f+this._p_startdatebutton._adjust_height,_g/2,this._p_startdatebutton._adjust_height);}else{this._p_startdatebutton.move(0,_f,_g/2,_h);}}this._p_enddatebutton.set_text(_b);this._p_endsubdatebutton.set_text(_d);if(_d==this._default_endtime||_d==this._p_enddatenulltext){this._p_endsubdatebutton.set_visible(false);}else{this._p_endsubdatebutton.set_visible(true);}if(_i){if(this._p_endsubdatebutton._p_visible){this._p_enddatebutton.move(0,_h/2,_g,_h/4);this._p_endsubdatebutton.move(0,_h/2+this._p_enddatebutton._adjust_height,_g,this._p_enddatebutton._adjust_height);}else{this._p_enddatebutton.move(0,_h/2,_g,_h/2);}}else{if(this._p_endsubdatebutton._p_visible){this._p_enddatebutton.move(this._p_startdatebutton._adjust_width,_f,_g/2,_h/2);this._p_endsubdatebutton.move(this._p_startdatebutton._adjust_width,_f+this._p_enddatebutton._adjust_height,_g/2,this._p_enddatebutton._adjust_height);}else{this._p_enddatebutton.move(this._p_startdatebutton._adjust_width,_f,_g/2,_h);}}}else{if(this._p_startsubdatebutton.visible){this._p_startdatebutton.move(0,_f,_g,_h/2);this._p_startsubdatebutton.move(0,_f+this._p_startdatebutton._adjust_height,_g,this._p_startdatebutton._adjust_height);}else{this._p_startdatebutton.move(0,_f,_g,_h);}}}};_pPickerHeadLineControl.on_change_containerRect=function(_a,_b){this._updateAll();};nexacro.PickerGroup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._picker_ctrl_list=[];this._split_line_list=[];this._range={start:null,end:null};};var _pPickerGroup=nexacro._createPrototype(nexacro.Component,nexacro.PickerGroup);nexacro.PickerGroup.prototype=_pPickerGroup;_pPickerGroup._event_list["onchanged"]=1;_pPickerGroup._event_list["oninnerdatachanged"]=1;_pPickerGroup._use_readonly_status=true;_pPickerGroup._p_type="range";_pPickerGroup._p_displaymonthcount=1;_pPickerGroup._p_startdate=null;_pPickerGroup._p_enddate=null;_pPickerGroup._p_maxdate=null;_pPickerGroup._p_mindate=null;_pPickerGroup._p_direction="horizontal";_pPickerGroup._p_innerdataset=null;_pPickerGroup._p_backgroundcolumn="";_pPickerGroup._p_bordercolumn="";_pPickerGroup._p_datecolumn="";_pPickerGroup._p_textcolorcolumn="";_pPickerGroup._p_hintingcolumn="";_pPickerGroup._p_readonlycolumn="";_pPickerGroup._invalid_startdate="";_pPickerGroup._invalid_enddate="";_pPickerGroup._curr_picker=null;_pPickerGroup._prev_picker=null;_pPickerGroup._innerdataset=null;_pPickerGroup._comptype={proto:"",id:""};_pPickerGroup._getPickerCount=function(){return 1;};_pPickerGroup._getRangePicker=function(){return this.parent;};_pPickerGroup._on_focus=function(_a,_b,_c,_d,_e,_f){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(this._curr_picker){this._curr_picker._setFocus(false);}};_pPickerGroup._setCurrentPicker=function(_a){while(_a){if(_a instanceof nexacro.DatePickerControl||_a instanceof nexacro.TimePickerControl){if(this._curr_picker!=_a){this._prev_picker=this._curr_picker;this._curr_picker=_a;}break;}_a=_a._p_parent;}};_pPickerGroup._getCurrentPicker=function(){return this._curr_picker;};_pPickerGroup._updatePickers=function(_a){var _b=this._getPickerCount();if(_b>0){var _c=this._picker_ctrl_list;if(!_c||_c.length<1||(_b!=_c.length)){if(_c){this._destroyPickers();}_c=[];var _d;var _e=this._comptype.proto;var _f=this._comptype.id;for(var _g=0;_g<_b;_g++ ){_d=new nexacro[_e](_f+"_"+_g,0,0,0,0,null,null,null,null,null,null,this);this._setPickerCreateInfo(_d);_d.createComponent(_a);_c.push(_d);if(_g==0){this._curr_picker=_d;}}this._picker_ctrl_list=_c;}}if(!_a){this._setChildEventHandler();}};_pPickerGroup._getSplitCount=function(){return 0;};_pPickerGroup._updateSplitLines=function(){var _a=this._getSplitCount();if(_a>0){if(this._split_line_list){this._destroySplits();}var _b,_c=[];for(var _d=0;_d<_a;_d++ ){_b=new nexacro.DatePickerSplitLine("splitline_"+_d,0,0,0,0,null,null,null,null,null,null,this);_b.createComponent();_c.push(_b);}this._split_line_list=_c;_c=null;}};_pPickerGroup._setPickerCreateInfo=function(){};_pPickerGroup._destroyPickers=function(){var _a=this._picker_ctrl_list;for(var _b=0;_b<_a.length;_b++ ){_a[_b].destroy();}this._picker_ctrl_list=null;};_pPickerGroup._destroySplits=function(){var _a=this._split_line_list;var _b;for(_b=0;_b<_a.length;_b++ ){_a[_b].destroy();}this._split_line_list=null;};_pPickerGroup.on_create_contents=function(){this._updatePickers(true);this.on_apply_locale();this.on_apply_direction();};_pPickerGroup.on_created_contents=function(_a){var _b=this._picker_ctrl_list;for(var _c=0;_c<_b.length;_c++ ){_b[_c].on_created(_a);}};_pPickerGroup.on_create_contents_command=function(){var _a="";var _b=this._picker_ctrl_list;for(var _c=0;_c<_b.length;_c++ ){_a+=_b[_c].createCommand();}return _a;};_pPickerGroup.on_attach_contents_handle=function(_a){var _b=this._picker_ctrl_list;for(var _c=0;_c<_b.length;_c++ ){_b[_c].attachHandle(_a);_b[_c]._setAccessibilityStatHidden(true);}};_pPickerGroup.on_destroy_contents=function(){this._destroyPickers();this._destroySplits();this._curr_picker=null;this._prev_picker=null;};_pPickerGroup._setChildEventHandler=function(){};_pPickerGroup.set_type=function(_a,_b){if(_a){_a=_a.toLowerCase();}if(_b||this._p_type!=_a){switch(_a){case "single":case "range":this._p_type=_a;break;default:return;}this.on_apply_type();}};_pPickerGroup.on_apply_type=function(){};_pPickerGroup.set_startdate=function(_a,_b){if(_b||this._p_startdate!=_a){this._p_startdate=_a;this.on_apply_startdate();}};_pPickerGroup.on_apply_startdate=function(){};_pPickerGroup.set_enddate=function(_a,_b){if(_b||this._p_enddate!=_a){this._p_enddate=_a;this.on_apply_enddate();}};_pPickerGroup.on_apply_enddate=function(){};_pPickerGroup.set_maxdate=function(_a){if(this._p_maxdate!=_a){this._p_maxdate=_a;this.on_apply_maxdate();}};_pPickerGroup.on_apply_maxdate=function(){};_pPickerGroup.set_mindate=function(_a){if(this._p_mindate!=_a){this._p_mindate=_a;this.on_apply_mindate();}};_pPickerGroup.on_apply_mindate=function(){};_pPickerGroup.set_readonly=function(_a,_b){if(_b||this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly();}};_pPickerGroup.on_apply_readonly=function(){var _a=this._picker_ctrl_list;for(var _b=0;_b<_a.length;_b++ ){_a[_b].set_readonly(this._p_readonly);}};_pPickerGroup.set_direction=function(_a,_b){if(_b||this._p_direction!=_a){this._p_direction=_a;this.on_apply_direction();}};_pPickerGroup.on_apply_direction=function(){this._recalcLayout();};_pPickerGroup.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(!_b&&(_a==nexacro.Event.KEY_LEFT||_a==nexacro.Event.KEY_RIGHT||_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN||_a==nexacro.Event.KEY_HOME||_a==nexacro.Event.KEY_END||_a==nexacro.Event.KEY_PAGE_UP||_a==nexacro.Event.KEY_PAGE_DOWN||_a==nexacro.Event.KEY_SPACE||_a==nexacro.Event.KEY_ENTER)){if(this._goBackCurrentFocus()){return;}var _g=this._getCurrentPicker();if(_g){_g._keyAction({keycode:_a,ctrlkey:_c,altkey:_b});}}};_pPickerGroup._goBackCurrentFocus=function(){};_pPickerGroup.on_fire_onchanged=function(_a,_b,_c,_d){if(this.onchanged&&this.onchanged._has_handlers){var _e=new nexacro.RangeDateChangedEventInfo(this,"onchanged",_a,_b,_c,_d);return this.onchanged._fireEvent(this,_e);}};_pPickerGroup.getInnerDataset=function(){return this._innerdataset;};_pPickerGroup._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this._p_innerdataset=_a;}};_pPickerGroup.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";this.on_apply_innerdataset(this._innerdataset);}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this._p_innerdataset=_a.id;this.on_apply_innerdataset(this._innerdataset);}};_pPickerGroup.set_innerdataset=function(_a,_b){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(_b||this._p_innerdataset!=_a||(this._p_innerdataset&&!this._innerdataset)){this._setInnerDatasetStr(_a);this.on_apply_innerdataset(this._innerdataset);}};_pPickerGroup.on_apply_innerdataset=function(_a){if(_a){_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);}};_pPickerGroup.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();var _b=this._picker_ctrl_list;for(var _c=0;_c<_b.length;_c++ ){_b[_c]._setEnable(_a);}};_pPickerGroup.set_backgroundcolumn=function(_a,_b){if(_b||this._p_backgroundcolumn!=_a){this._p_backgroundcolumn=_a;this.on_apply_backgroundcolumn();}};_pPickerGroup.on_apply_backgroundcolumn=function(){};_pPickerGroup.set_bordercolumn=function(_a,_b){if(_b||this._p_bordercolumn!=_a){this._p_bordercolumn=_a;this.on_apply_bordercolumn();}};_pPickerGroup.on_apply_bordercolumn=function(){};_pPickerGroup.set_datecolumn=function(_a,_b){if(_b||this._p_datecolumn!=_a){this._p_datecolumn=_a;this.on_apply_datecolumn(_a);}};_pPickerGroup.on_apply_datecolumn=function(){};_pPickerGroup.set_textcolorcolumn=function(_a,_b){if(_b||this._p_textcolorcolumn!=_a){this._p_textcolorcolumn=_a;this.on_apply_textcolorcolumn(_a);}};_pPickerGroup.on_apply_textcolorcolumn=function(){};_pPickerGroup.set_hintingcolumn=function(_a,_b){if(_b||this._p_hintingcolumn!=_a){this._p_hintingcolumn=_a;this.on_apply_hintingcolumn(_a);}};_pPickerGroup.on_apply_hintingcolumn=function(){};_pPickerGroup.set_readonlycolumn=function(_a,_b){if(_b||this._p_readonlycolumn!=_a){this._p_readonlycolumn=_a;this.on_apply_readonlycolumn(_a);}};_pPickerGroup.on_apply_readonlycolumn=function(){};_pPickerGroup._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);this._innerdataset=null;}};_pPickerGroup._on_dataset_onvaluechanged=function(){};_pPickerGroup._on_dataset_onrowsetchanged=function(){};_pPickerGroup.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){nexacro.Component.prototype.on_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);this._common_down_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);};_pPickerGroup.on_touch_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.prototype.on_touch_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_k,_l);this._common_down_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_k,_l);};_pPickerGroup.on_touchstart_basic_action=function(_a,_b,_c,_d){nexacro.Component.prototype.on_touchstart_basic_action.call(this,_a,_b,_c,_d);var _e=nexacro._getFirstTouchInfo(_c);this._common_down_action(_e.target,"touch",false,false,false,_e.canvasx,_e.canvasy,_e.screenx,_e.screeny,_d);};_pPickerGroup._common_down_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){this._setCurrentPicker(_j);};_pPickerGroup.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pPickerGroup.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){if(_e instanceof nexacro._DatePickerBodyControl&&(_f instanceof nexacro._DatePickerBodyControl||_f instanceof nexacro._DatePickerDayItemControl)){return this._p_parent.on_fire_user_onkeydown(_a,_b,_c,_d,_e,_f,_g);}};nexacro.DatePickerGroup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.PickerGroup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._picker_ctrl_list=[];this._split_line_list=[];function setPicker(_o,_p){this.picker=_o;if(!_p){_o.set_left(this.beg);}else{_o.set_top(this.beg);}}this._slot={prev:{beg:0,end:0,picker:null,setPicker:setPicker},show:{beg:0,end:0,pickerarr:[],addPicker:function(_o,_p,_q){var _r=this.pickerarr;if(_p){_r.unshift(_o);_r.pop();}else{_r.push(_o);_r.shift();}if(!_q){var _s=0;var _d=(this.end-this.beg)/_r.length;for(var _u=0;_u<_r.length;_u++ ){_r[_u].set_left(this.beg+_s);_s+=_d;}}else{var _t=0;var _e=(this.end-this.beg)/_r.length;for(var _u=0;_u<_r.length;_u++ ){_r[_u].set_top(this.beg+_t);_t+=_e;}}}},next:{beg:0,end:0,picker:null,setPicker:setPicker}};var _m,_n=new nexacro.Date();_n._timecheck=false;_m=nexacro.DataUtils.toDate(_n.toString());this._range={start:_m,end:_m};this._startdate=_m.toString();this._enddate=_m.toString();};var _pDatePickerGroup=nexacro._createPrototype(nexacro.PickerGroup,nexacro.DatePickerGroup);nexacro.DatePickerGroup.prototype=_pDatePickerGroup;_pDatePickerGroup._type_name="DatePickerGroup";_pDatePickerGroup._is_scrollable=true;_pDatePickerGroup._use_translate_scroll=(nexacro._Browser=="Runtime");_pDatePickerGroup._event_list["onenddateclick"]=1;_pDatePickerGroup._event_list["onstartdateclick"]=1;_pDatePickerGroup._p_displaymonthcount=1;_pDatePickerGroup._p_defaultrangeposition=1;_pDatePickerGroup._p_scrollbartype="none";_pDatePickerGroup._p_scrolltype="both";_pDatePickerGroup._p_datepickerchangetype="button";_pDatePickerGroup._p_rangeposition="start";_pDatePickerGroup._attach_comp=null;_pDatePickerGroup._move_duration=250;_pDatePickerGroup._is_start_select=true;_pDatePickerGroup._keep_enddate_firstclick=false;_pDatePickerGroup._comptype={proto:"DatePickerControlEx",id:"datepicker"};_pDatePickerGroup.on_after_created=function(){this._updateSplitLines();this._setChildEventHandler();this._moveButtonON();this._scrollCurrent();};_pDatePickerGroup._setChildEventHandler=function(){var _a=this._picker_ctrl_list;var _b;for(var _c=0;_c<_a.length;_c++ ){_b=_a[_c];_b.head.prevbutton._removeEventHandler("onclick",_b.head._on_button_onprevclick,_b.head);_b.head.nextbutton._removeEventHandler("onclick",_b.head._on_button_onnextclick,_b.head);_b.head.prevbutton._setEventHandler("onclick",this._on_button_onprevclick,this);_b.head.nextbutton._setEventHandler("onclick",this._on_button_onnextclick,this);_b._setEventHandler("ondayclick",this._on_datepicker_ondayclick,this);}};_pDatePickerGroup._switchingEventHandler=function(_a,_b){if(!_b){_a.head.prevbutton._removeEventHandler("onclick",_a.head._on_button_onprevclick,_a.head);_a.head.nextbutton._removeEventHandler("onclick",_a.head._on_button_onnextclick,_a.head);_a.head.prevbutton._setEventHandler("onclick",this._on_button_onprevclick,this);_a.head.nextbutton._setEventHandler("onclick",this._on_button_onnextclick,this);}else{_a.head.prevbutton._removeEventHandler("onclick",this._on_button_onprevclick,this);_a.head.nextbutton._removeEventHandler("onclick",this._on_button_onnextclick,this);_a.head.prevbutton._setEventHandler("onclick",_a.head._on_button_onprevclick,_a.head);_a.head.nextbutton._setEventHandler("onclick",_a.head._on_button_onnextclick,_a.head);}};_pDatePickerGroup._on_button_onprevclick=function(_a,_b){if(this._p_readonly){return;}this._movePrev();};_pDatePickerGroup._on_button_onnextclick=function(_a,_b){if(this._p_readonly){return;}this._moveNext();};_pDatePickerGroup.on_destroy_contents=function(){nexacro.PickerGroup.prototype.on_destroy_contents.call(this);this._slot=null;this._range=null;this._drag_day_info=null;this._modal_picker=null;};_pDatePickerGroup._getSplitCount=function(){return this._p_displaymonthcount-1;};_pDatePickerGroup._setDatepickerheadheight=function(_a){this._headheight=_a;var _b=this._picker_ctrl_list;var _c;if(!this._is_created){return;}for(var _d=0;_d<_b.length;_d++ ){_c=_b[_d];_c._recalcLayout();}};_pDatePickerGroup._on_dataset_onvaluechanged=function(_a,_b){this._refreshDayAllPicker();if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pDatePickerGroup._refreshDayAllPicker=function(){var _a=this._picker_ctrl_list;for(var _c=0;_c<_a.length;_c++ ){var _b=_a[_c];if(_b){_b._refreshDay();}}};_pDatePickerGroup._setInvalidDate=function(_a,_b){this._invalid_startdate=_a?_a.substr(0,8):"";this._invalid_enddate=_b?_b.substr(0,8):"";};_pDatePickerGroup._on_dataset_onrowsetchanged=function(){this._refreshDayAllPicker();};_pDatePickerGroup.on_apply_backgroundcolumn=function(){this._refreshDayAllPicker();};_pDatePickerGroup.on_apply_bordercolumn=function(){this._refreshDayAllPicker();};_pDatePickerGroup.on_apply_datecolumn=function(){this._refreshDayAllPicker();};_pDatePickerGroup.on_apply_textcolorcolumn=function(){this._refreshDayAllPicker();};_pDatePickerGroup.on_apply_hintingcolumn=function(){this._refreshDayAllPicker();};_pDatePickerGroup.on_apply_readonlycolumn=function(){this._refreshDayAllPicker();};_pDatePickerGroup._recalcLayout=function(){var _a=this._picker_ctrl_list;var _b=this._split_line_list;var _c=0,_d=0,_e=0,_f=0;var _g=this._range.start;var _h=this._range.end;if(this._p_direction=="horizontal"){_e=this._getClientWidth()/this._slot.show.pickerarr.length;_f=this._getClientHeight();if(this._control_element){this._control_element.setElementScrollMaxSize(this._getClientWidth()+(_e* 2),0);}var _i=0,_j;for(_j=0;_j<_a.length;_j++ ){_a[_j].move(_i,_d,_e,_f);_i+=_e;if(this._p_type=="range"&&this._is_set_startvalue&&_g&&_h){_a[_j]._updateSelection(_g.toString(),_h.toString());}}var _k=0,_l=0;var _m=this._getCurrentStylePadding();if(_m){_l=_m.left;_k=_m.top;}for(_j=0;_j<_b.length;_j++ ){_b[_j]._setDirection(false);_b[_j].move(_l+(_e* (_j+1))-0.5,_k,1,this._getClientHeight());}}else{_e=this._getClientWidth();_f=this._getClientHeight()/this._slot.show.pickerarr.length;if(this._control_element){this._control_element.setElementScrollMaxSize(0,this._getClientHeight()+(_f* 2));}var _n=0,_j;for(_j=0;_j<_a.length;_j++ ){_a[_j].move(_c,_n,_e,_f);_n+=_f;if(this._p_type=="range"&&this._is_set_startvalue&&_g&&_h){_a[_j]._updateSelection(_g.toString(),_h.toString());}}var _k=0,_l=0;var _m=this._getCurrentStylePadding();if(_m){_l=_m.left;_k=_m.top;}for(_j=0;_j<_b.length;_j++ ){_b[_j]._setDirection(true);_b[_j].move(_l,_k+(_f* (_j+1))-0.5,this._getClientWidth(),1);}}this._scrollCurrent();this._onResetScrollBar();};_pDatePickerGroup._setFocusedDay=function(_a,_b,_c){this._focused_year=_a;this._focused_month=_b;this._focused_day=_c;};_pDatePickerGroup._animateScroll=function(_a,_b,_c,_d){var _e=this._move_duration;var _f=(nexacro._Browser!="Runtime"&&performance)?performance.now():(new Date());var _g=this;var _h=this._getClientWidth();var _i,_j;if(_a=="next"||_a=="enddate"){_i=this._slot.show.beg;if(this._p_direction=="horizontal"){_j=this._slot.show.beg+this._slot.next.picker._adjust_width;}else{_j=this._slot.show.beg+this._slot.next.picker._adjust_height;}if(_a=="enddate"){if(_b){if(this._isShowAllDate()){return;}}else{if(this._isShowEndDate()){return;}}this._initRangePos("end",-1);this._updateRangeDate();}}else if(_a=="prev"||_a=="startdate"){_i=this._slot.prev.end;_j=0;if(_a=="startdate"){if(_b){if(this._isShowAllDate()){return;}}else{if(this._isShowStartDate()){return;}}this._initRangePos("start", +1);this._updateRangeDate();}}if(!_c&&nexacro._Browser!="Runtime"){var _k=new nexacro.AnimationFrame(this,animate);_k.start();function animate(_l){var _m=_l-_f;var _n=Math.min(_m/_e,1);var _o=easeOut(_n)* (_j-_i)+_i;if(_g._p_direction=="horizontal"){_g._scrollTo(_o,0,null,null,"","move");}else{_g._scrollTo(0,_o,null,null,"","move");}if(_n<1){_k.start();}else{_g._animateScrollEnd(_a,_d);}};function easeOut(_l){return 1-Math.pow(1-_l,2);};}else{if(this._p_direction=="horizontal"){this._scrollTo((_j-_i)+_i,0,null,null,"","move");}else{this._scrollTo(0,(_j-_i)+_i,null,null,"","move");}this._animateScrollEnd(_a,_d);}};_pDatePickerGroup._animateScrollEnd=function(_a,_b){var _c=this._slot;var _d=(this._p_direction=="vertical");if(_a=="next"){var _e=nexacro.DataUtils.toDate(_c.next.picker._value);_e.setMonth(_e.getMonth()+1);var _f=_c.prev.picker;_c.prev.setPicker(_c.show.pickerarr[0],_d);_c.show.addPicker(_c.next.picker,false,_d);_c.next.setPicker(_f,_d);_f._setYearMonth(_e.getFullYear(),_e.getMonth()+1);if(this._p_direction=="horizontal"){this._picker_ctrl_list.sort(function(_i,_j){return _i.left-_j.left;});}else{this._picker_ctrl_list.sort(function(_i,_j){return _i.top-_j.top;});}}else if(_a=="prev"){var _g=nexacro.DataUtils.toDate(_c.prev.picker._value);_g.setMonth(_g.getMonth()-1);var _h=_c.next.picker;_c.next.setPicker(_c.show.pickerarr[_c.show.pickerarr.length-1],_d);_c.show.addPicker(_c.prev.picker,true,_d);_c.prev.setPicker(_h,_d);_h._setYearMonth(_g.getFullYear(),_g.getMonth()+1);if(this._p_direction=="horizontal"){this._picker_ctrl_list.sort(function(_i,_j){return _i.left-_j.left;});}else{this._picker_ctrl_list.sort(function(_i,_j){return _i.top-_j.top;});}}else if(_a=="startdate"){this._initRangePos("start");}else if(_a=="enddate"){this._initRangePos("end");}else if(_a=="focused_right"){this._initRangePos("end",null,"focused");}else if(_a=="focused_left"){this._initRangePos("start", +1,"focused");}if(this._curr_picker){this._curr_picker._setFocus(false);}this._moveButtonON();this._updateRangeDate();this._updateMinMaxDate();if(_b&&nexacro._OS=="iOS"&&(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge")){this._scrollCurrent(true);}else{this._scrollCurrent();}};_pDatePickerGroup._setVScrollDefaultAction=function(_a){if(this.scrolltype=="none"||this.scrolltype=="horizontal"){return false;}if(_a>0){this._movePrev();}else{this._moveNext();}return true;};_pDatePickerGroup._setHScrollDefaultAction=function(_a){if(this.scrolltype=="none"||this.scrolltype=="vertical"){return false;}if(_a>0){this._movePrev();}else{this._moveNext();}return true;};_pDatePickerGroup._isShowAllDate=function(){var _a=this._slot;var _b=_a.show.pickerarr;var _c=this._startdate;var _d=this._enddate;var _e=_c.substr(0,6);var _f=_d?_d.substr(0,6):_e;var _g=false;if(_b.length){var _h=false,_i=false;var _j=_b[0]._getYearMonthStr();var _k=_b[_b.length-1]._getYearMonthStr();if(_j<=_e&&_e<=_k){_h=true;}if(_j<=_f&&_f<=_k){_i=true;}_g=(_h&&_i);}return _g;};_pDatePickerGroup._isShowStartDate=function(){var _a=this._slot;var _b=_a.show.pickerarr;var _c=this._startdate;var _d=_c.substr(0,6);var _e=false;if(_b.length){var _f=_b[0]._getYearMonthStr();var _g=_b[_b.length-1]._getYearMonthStr();if(_f<=_d&&_d<=_g){_e=true;}}return _e;};_pDatePickerGroup._isShowEndDate=function(){var _a=this._slot;var _b=_a.show.pickerarr;var _c=this._startdate;var _d=this._enddate;var _e=_c.substr(0,6);var _f=_d?_d.substr(0,6):_e;var _g=false;if(_b.length){var _h=_b[0]._getYearMonthStr();var _i=_b[_b.length-1]._getYearMonthStr();if(_h<=_f&&_f<=_i){_g=true;}}return _g;};_pDatePickerGroup._isShowMonth=function(_a,_b){var _c=this._slot;var _d=_c.show.pickerarr;var _e=false;var _f=(_a+"").padLeft(4,"0")+(_b+"").padLeft(2,"0");if(_d.length){var _g=_d[0]._getYearMonthStr();var _h=_d[_d.length-1]._getYearMonthStr();if(_g<=_f&&_f<=_h){_e=true;}}return _e;};_pDatePickerGroup._scrollCurrent=function(_a){if(!this._slot.prev.picker){return;}if(this._p_direction=="horizontal"){this._hscroll_pos=0;this._control_element._reset_scrollpos=true;if(_a){this._scrollTo(this._slot.prev.picker.width-1,0,null,null,"","move");}this._scrollTo(this._slot.prev.picker.width,0,null,null,"","move");this._control_element._reset_scrollpos=false;}else{this._vscroll_pos=0;this._control_element._reset_scrollpos=true;if(_a){this._scrollTo(0,this._slot.prev.picker.height-1,null,null,"","move");}this._scrollTo(0,this._slot.prev.picker.height,null,null,"","move");this._control_element._reset_scrollpos=false;}};_pDatePickerGroup.on_slideend_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h){if(this._drag_day_info==null){if(this._p_direction=="horizontal"){if(_d<0){this._moveNext();}else if(_d>0){this._movePrev();}}else{if(_e<0){this._moveNext();}else if(_e>0){this._movePrev();}}}};_pDatePickerGroup._on_beforescroll=function(_a,_b,_c,_d,_e,_f){if(_f=="move"){return true;}return false;};_pDatePickerGroup._movePrev=function(_a){if(this._is_modal_lock){return;}var _b=this._getStartShowPicker();if(_b&&!_b.head.prevbutton._p_visible){return;}this._moveButtonOFF();this._animateScroll("prev",undefined,_a);};_pDatePickerGroup._moveNext=function(_a){if(this._is_modal_lock){return;}var _b=this._getEndShowPicker();if(_b&&!_b.head.nextbutton._p_visible){return;}this._moveButtonOFF();this._animateScroll("next",undefined,_a);};_pDatePickerGroup._goBackCurrentSelect=function(){if(this._is_start_select){this._animateScroll("startdate");}else{this._animateScroll("enddate");}};_pDatePickerGroup._goBackCurrentFocus=function(){var _a=this._focused_year;var _b=this._focused_month;var _c=this._focused_day;if(_a==undefined){return;}if(this._isShowMonth(_a,_b)){return false;}var _d=new nexacro.Date(_a,parseInt(_b)-1,_c);this._initRangePos("start",0,_d);this._slot.show.pickerarr[0]._setFocus(false);this._updateRangeDate();return true;};_pDatePickerGroup._moveButtonOFF=function(){var _a=this._picker_ctrl_list;for(var _b=0;_b<_a.length;_b++ ){_a[_b].head.prevbutton.set_visible(false);_a[_b].head.nextbutton.set_visible(false);_a[_b]._skipEvent=true;}};_pDatePickerGroup._moveButtonON=function(){var _a=this._slot.show.pickerarr;if(!_a.length){return;}var _b=this._getStartShowPicker();var _c=this._getEndShowPicker();if(_b==_c){_b.head.prevbutton.set_visible(true);_b.head.nextbutton.set_visible(true);_b._skipEvent=false;}else{_b.head.prevbutton.set_visible(true);_b.head.nextbutton.set_visible(false);_b._skipEvent=false;for(var _d=1;_d<_a.length-1;_d++ ){_a[_d].head.prevbutton.set_visible(false);_a[_d].head.nextbutton.set_visible(false);_a[_d]._skipEvent=false;}_c.head.prevbutton.set_visible(false);_c.head.nextbutton.set_visible(true);_c._skipEvent=false;}};_pDatePickerGroup._getStartShowPicker=function(){return this._slot.show.pickerarr[0];};_pDatePickerGroup._getEndShowPicker=function(){return this._slot.show.pickerarr[this._slot.show.pickerarr.length-1];};_pDatePickerGroup.on_apply_startdate=function(){var _a=true;var _b=this._getWindow();var _c=_b._cur_ldown_elem;while(_c){if(_c instanceof nexacro.DateRangePicker){_a=false;break;}_c=_c._p_parent;}this._setStartDate(this._p_startdate,_a);};_pDatePickerGroup._setStartDate=function(_a,_b){var _c;if(_a){if(_a.length==17){_a=_a.substr(0,8);}_c=nexacro.DataUtils.toDate(_a);this._is_set_startvalue=true;}else{var _d=new nexacro.Date();_d._timecheck=false;_c=nexacro.DataUtils.toDate(_d.toString());this._is_set_startvalue=undefined;}this._range.start=_c;this._startdate=_c.toString();if(_b&&this._p_rangeposition=="start"){this._initRangePos(this._p_rangeposition);}if(this._p_type=="range"){if(!this._p_enddate&&!this._drag_day_info){this._enddate="";}if(this._enddate&&this._enddate<this._startdate){this._enddate="";}}else{this._enddate="";}this._setEndDate(this._enddate,false);this._updateRangeDate();};_pDatePickerGroup.on_apply_enddate=function(){this._setEndDate(this._p_enddate);};_pDatePickerGroup._setEndDate=function(_a,_b){var _c;if(_a){if(_a.length==17){_a=_a.substr(0,8);}_c=nexacro.DataUtils.toDate(_a);}else{_c=this._range.start;}this._range.end=_c;this._enddate=_c.toString();if(_b&&this._p_rangeposition=="end"){this._initRangePos(this._p_rangeposition);}if(this._startdate&&this._enddate<this._startdate){this._setStartDate(this._enddate,false);this._is_start_select=true;}this._updateRangeDate();};_pDatePickerGroup.set_rangeposition=function(_a,_b){if(_b||this._p_rangeposition!=_a){switch(_a){case "start":case "end":this._p_rangeposition=_a;break;default:return;}this.on_apply_rangeposition();}};_pDatePickerGroup.on_apply_rangeposition=function(){this._initRangePos(this._p_rangeposition);this._updateRangeDate();};_pDatePickerGroup.on_apply_type=function(){if(this._p_type=="single"){this._is_start_select=true;}var _a=this._picker_ctrl_list;for(var _b=0;_b<_a.length;_b++ ){_a[_b].set_userange(this._p_type=="range");}this._updateRangeDate();this._updateMinMaxDate();};_pDatePickerGroup.on_apply_direction=function(){this.set_scrolltype(this._p_direction);this._initSlotInfo();this._recalcLayout();};_pDatePickerGroup._getEndDay=function(_a,_b){var _c=new Date(_a,_b,0).getDate();if(_c!="Invalid Date"&&!isNaN(_c)){return _c;}return 0;};_pDatePickerGroup._initRangePos=function(_a,_b,_c){var _d=this._p_defaultrangeposition;if(!_b){_b=0;}if(_c){_d=1;}else{if(_a=="start"){_c=this._range.start;}else{_c=this._range.end;}var _e=this._slot;var _f=_e.show.pickerarr;_d=Math.min(_d,_f.length-1);_d=Math.max(_d,1);}this._initRangeDatePos(_a,_b,_c,_d);};_pDatePickerGroup._initRangeDatePos=function(_a,_b,_c,_d){var _e=this._slot;var _f=_e.show.pickerarr;this._is_init_rangeposition=false;if(!_f.length){return;}if(!_b){_b=0;}this._prev_picker=this._curr_picker;var _g=_c.clone();_g.setDate(1);if(_a=="start"){_g.setMonth(_g.getMonth()-_d);_e.prev.picker._setYearMonth(_g.getFullYear(),_g.getMonth()+1+_b);for(var _h=0;_h<_f.length;_h++ ){_g.setMonth(_g.getMonth()+1);_f[_h]._setYearMonth(_g.getFullYear(),_g.getMonth()+1+_b);if(_d==(_h+1)){this._curr_picker=_f[_h];}}_g.setMonth(_g.getMonth()+1);_e.next.picker._setYearMonth(_g.getFullYear(),_g.getMonth()+1+_b);this._is_init_rangeposition=true;}else{_g.setMonth(_g.getMonth()+_d);_e.next.picker._setYearMonth(_g.getFullYear(),_g.getMonth()+1+_b);for(var _h=_f.length-1;_h>=0;_h-- ){_g.setMonth(_g.getMonth()-1);_f[_h]._setYearMonth(_g.getFullYear(),_g.getMonth()+1+_b);if(_d==(_f.length-_h)){this._curr_picker=_f[_h];}}_g.setMonth(_g.getMonth()-1);_e.prev.picker._setYearMonth(_g.getFullYear(),_g.getMonth()+1+_b);this._is_init_rangeposition=true;}};_pDatePickerGroup._updateRangeDate=function(){var _a=this._range.start;var _b=this._range.end;var _c=this._picker_ctrl_list;for(var _g=0;_g<_c.length;_g++ ){var _d=_c[_g]._year_month;var _e=false;if(_a&&_d.year==_a.getFullYear()&&_d.month==_a.getMonth()+1){if(this._is_set_startvalue){_c[_g]._setValue(_a.toString());_e=true;}}else{if(this._is_set_startvalue){_c[_g]._setValue(null);_e=true;}}if(_b&&_d.year==_b.getFullYear()&&_d.month==_b.getMonth()+1){var _f=(this._p_type=="range")?_b.toString():null;if(this._is_set_startvalue){_c[_g]._setEndValue(_f);_e=true;}}else{if(this._is_set_startvalue){_c[_g]._setEndValue(null);_e=true;}}if(_e==false){_c[_g]._setValue(null);_c[_g]._setEndValue(null);}if(this._p_type=="range"&&this._is_set_startvalue){_c[_g]._updateSelection(_a.toString(),_b.toString());}else{_c[_g]._displayNoneSelection();}_c[_g]._updateInvalidDisplay(this._invalid_startdate,this._invalid_enddate);}};_pDatePickerGroup._updateMinMaxDate=function(){if(!this._is_init_rangeposition){return;}var _a=this._picker_ctrl_list;for(var _b=0;_b<_a.length;_b++ ){_a[_b]._updateMinMaxDay(this._p_mindate,this._p_maxdate);}};_pDatePickerGroup.set_displaymonthcount=function(_a,_b){_a=parseInt(_a);if(_a>3){_a=3;}if(_b||this._p_displaymonthcount!=_a){this._p_displaymonthcount=_a;this.on_apply_displaymonthcount();}};_pDatePickerGroup.on_apply_displaymonthcount=function(){this._updatePickers();this._updateSplitLines();this._recalcLayout();this.on_apply_rangeposition();this._moveButtonON();};_pDatePickerGroup.set_defaultrangeposition=function(_a){_a=parseInt(_a);if(this._p_defaultrangeposition!=_a){this._p_defaultrangeposition=_a;this.on_apply_defaultrangeposition();}};_pDatePickerGroup.on_apply_defaultrangeposition=function(){this.on_apply_rangeposition();};_pDatePickerGroup.on_apply_maxdate=function(){this._updateRangeDate();this._updateMinMaxDate();};_pDatePickerGroup.on_apply_mindate=function(){this._updateRangeDate();this._updateMinMaxDate();};_pDatePickerGroup._getPickerCount=function(){return this._p_displaymonthcount+2;};_pDatePickerGroup._getPrevShowPicker=function(_a){var _b=this._slot.show.pickerarr;if(_a==this._slot.next.picker){return _b[_b.length-1];}for(var _c=0;_c<_b.length;_c++ ){if(_b[_c]==_a){if(_b[_c -1]){return _b[_c -1];}else{return this._slot.prev.picker;}}}};_pDatePickerGroup._getNextShowPicker=function(_a){var _b=this._slot.show.pickerarr;if(_a==this._slot.prev.picker){return _b[0];}for(var _c=0;_c<_b.length;_c++ ){if(_b[_c]==_a){if(_b[_c+1]){return _b[_c+1];}else{return this._slot.next.picker;}}}};_pDatePickerGroup._updatePickers=function(_a){nexacro.PickerGroup.prototype._updatePickers.call(this,_a);var _b=this._picker_ctrl_list;this._slot.prev.picker=_b[0];this._slot.show.pickerarr=[].concat(_b);this._slot.show.pickerarr.shift();this._slot.show.pickerarr.pop();this._slot.next.picker=_b[_b.length-1];};_pDatePickerGroup._cancelSelectYearMonth=function(){if(!this._is_modal_lock){return;}if(this._curr_picker){this._curr_picker._cancelSelectYearMonth();this._modalYearMonthPicker(this._curr_picker,false);}};_pDatePickerGroup._is_modal_lock=false;_pDatePickerGroup._modalYearMonthPicker=function(_a,_b){var _c=this._slot;var _d=_c.show.pickerarr;for(var _h=0;_h<_d.length;_h++ ){var _e=_d[_h];if(_e==_a){this._switchingEventHandler(_e,_b);if(_b){_e.head.prevbutton.set_visible(true);_e.head.nextbutton.set_visible(true);_e._displayNoneSelection();this._modal_picker=_e;}continue;}_e._lock(_b);};if(_b==false){this._modal_picker=null;this._moveButtonON();var _f=parseInt(_a.head._date.str_year);var _g=parseInt(_a.head._date.str_month);this._rearrangeYearMonth(_a,_f,_g);}this._is_modal_lock=_b;};_pDatePickerGroup._rearrangeYearMonth=function(_a,_b,_c){var _d=this._picker_ctrl_list;var _e,_f,_g,_h,_i;for(_e=0;_e<_d.length;_e++ ){if(_i){_i.setMonth(_i.getMonth()+1);_d[_e]._setYearMonth(_i.getFullYear(),_i.getMonth()+1);}if(_d[_e]==_a){_a._setYearMonth(_b,_c);_g=new nexacro.Date(_b,_c -1,1);_i=_g.clone();_h=_g.clone();for(_f=_e -1;_f>=0;_f-- ){_h.setMonth(_h.getMonth()-1);_d[_f]._setYearMonth(_h.getFullYear(),_h.getMonth()+1);}}}this._updateRangeDate();this._updateMinMaxDate();};_pDatePickerGroup._getAttachComponent=function(){return this._attach_comp;};_pDatePickerGroup._setZeroCaret=function(){var _a=this._getAttachComponent();if(_a&&nexacro._checkActiveElement(_a._input_element)){_a.setCaretPos(0);}};_pDatePickerGroup._common_down_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){this._drag_day_info=null;this._setCurrentPicker(_j);if(_j instanceof nexacro._DatePickerDayItemControl){if(this._p_type=="range"){if(!_j._isEnable()||this._invalid_startdate||this._invalid_enddate||this._startdate==this._enddate){return;}var _l=_j._year+_j._month+_j.text.padLeft(2,"0");if(_l==this._startdate){this._drag_day_info={downcomp:_j,movecomp:_j,rangepos:"start"};}if(_l==this._enddate){this._drag_day_info={downcomp:_j,movecomp:_j,rangepos:"end"};}}}};_pDatePickerGroup._common_move_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){if(this._p_type=="range"&&_j instanceof nexacro._DatePickerDayItemControl){if(!_j._isEnable()){return;}if(this._drag_day_info){if(this._drag_day_info.movecomp==_j){return;}this._drag_day_info.movecomp=_j;this._doSelectDay(_j,(this._drag_day_info.rangepos=="start"),"drag");if(_j instanceof nexacro._DatePickerDayItemControl){var _l=_j.parent;var _m=_l.parent;var _n=_l._date;var _o=_n.int_year;var _p=_n.int_month;var _q=_j.text.padLeft(2,"0");_m._focused_day=_q;this._setFocusedDay(_o,_p,_q);}this._drag_day_info.movecomp._setFocus(false);}}};_pDatePickerGroup._common_up_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){nexacro._OnceCallbackTimer.callonce(this,function(){this._drag_day_info=null;});};_pDatePickerGroup.on_mousemove_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){nexacro.Component.prototype.on_mousemove_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);this._common_move_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);};_pDatePickerGroup.on_touchmove_basic_action=function(_a,_b,_c,_d){nexacro.Component.prototype.on_touchmove_basic_action.call(this,_a,_b,_c,_d);var _e=nexacro._getFirstTouchInfo(_c);this._common_move_action(_e.target,"touch",false,false,false,_e.canvasx,_e.canvasy,_e.screenx,_e.screeny,_d);};_pDatePickerGroup.on_lbuttonup_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){nexacro.Component.prototype.on_lbuttonup_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);this._common_up_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);};_pDatePickerGroup.on_touchend_basic_action=function(_a,_b,_c,_d){nexacro.Component.prototype.on_touchend_basic_action.call(this,_a,_b,_c,_d);var _e=nexacro._getFirstTouchInfo(_c);this._common_up_action(_e.target,"touch",false,false,false,_e.canvasx,_e.canvasy,_e.screenx,_e.screeny,_d);};_pDatePickerGroup.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this,_a,_b);var _c=this._getRootComponent(this);if(_c==this){this._initSelectOrder();}};_pDatePickerGroup._initSelectOrder=function(){this._is_start_select=true;};_pDatePickerGroup._initSlotInfo=function(){var _a=this._getClientWidth();var _b=this._getClientHeight();var _c=_a;if(this._p_direction=="vertical"){_c=_b;}this._slot.prev.beg=0;this._slot.prev.end=_c/this._slot.show.pickerarr.length;this._slot.show.beg=this._slot.prev.end;this._slot.show.end=this._slot.show.beg+_c;this._slot.next.beg=this._slot.show.end;this._slot.next.end=this._slot.next.beg+(_c/this._slot.show.pickerarr.length);};_pDatePickerGroup.on_change_containerRect=function(_a,_b){this._initSlotInfo();this._recalcLayout();};_pDatePickerGroup._getCurrentDate=function(){var _a,_b,_c;var _d=new Date();_a=_d.getFullYear();_b=_d.getMonth()+1;_c=_d.getDate();return {year:_a,month:_b,day:_c};};_pDatePickerGroup.getInnerDataset=function(){return this._innerdataset;};_pDatePickerGroup._on_datepicker_ondayclick=function(_a,_b){if(this._p_readonly){return;}var _c=_b.fromobject;var _d=_c._year+_c._month+_c.text.padLeft(2,"0");if(this._p_type=="range"){if(this._is_start_select==true){this._on_fire_onstartdateclick(_d);}else{if(this._startdate&&_d<this._startdate){this._on_fire_onstartdateclick(_d);}else{this._on_fire_onenddateclick(_d);}}}else{this._on_fire_onstartdateclick(_d,null,_b.kind);}this._doSelectDay(_c,undefined,"dayclick");if(this._p_type=="range"){if(this._is_start_select==false){this._on_fire_onstartdateclick(_d,"after_onchanged");}else{this._on_fire_onenddateclick(_d,"after_onchanged");}}else{this._on_fire_onstartdateclick(_d,"after_onchanged",_b.kind);}};_pDatePickerGroup._doSelectDay=function(_a,_b,_c){if(this._p_readonly){return;}if(_b!=undefined){this._is_start_select=_b;}var _d=_a._year+_a._month+_a.text.padLeft(2,"0");var _e,_f,_g,_h;if(this._is_start_select){_h=_g=this._range.end.toString();_e=this._range.start.toString();_f=_d;if(this._is_set_startvalue&&_e==_f){if(_c!="drag"){if(this._p_type=="range"){this._is_start_select=false;}else{this._is_start_select=true;}}return;}if(_c=="dayclick"){this._invalid_startdate="";this._invalid_enddate="";if(!this._keep_enddate_firstclick||(_h<_f)){_h="";this._setEndDate(_d,false);this._p_enddate="";}}else if(_c=="drag"){this._invalid_startdate="";this._invalid_enddate="";if(_h<_f){_h=_d;}}this._setStartDate(_d,false);}else{_e=_f=this._range.start.toString();_g=this._range.end.toString();_h=_d;if(_f!=_h&&_g==_h){if(_c!="drag"){this._is_start_select=true;}return;}if(_h<_f){if(_c=="dayclick"){_f=_d;_h="";}else if(_c=="drag"){_f=_d;}}this._setEndDate(_d,false);}if(_c!="drag"){if(this._p_type=="range"){this._is_start_select=!this._is_start_select;}else{this._is_start_select=true;}}else{this._is_start_select=true;}this.on_fire_onchanged(_e,_f,_g,_h);};_pDatePickerGroup._lockOffAll=function(){var _a=this._picker_ctrl_list;for(var _b=0;_b<_a.length;_b++ ){_a[_b]._lock(false);}};_pDatePickerGroup._on_fire_onstartdateclick=function(_a,_b,_c){if(this.onenddateclick&&this.onenddateclick._has_handlers){var _d=new nexacro.EventInfo(this,"onstartdateclick");_d.date=_a;_d.kind=_b;_d.actk=_c;return this.onstartdateclick._fireEvent(this,_d);}return false;};_pDatePickerGroup._on_fire_onenddateclick=function(_a,_b){if(this.onenddateclick&&this.onenddateclick._has_handlers){var _c=new nexacro.EventInfo(this,"onenddateclick");_c.date=_a;_c.kind=_b;return this.onenddateclick._fireEvent(this,_c);}return false;};_pDatePickerGroup._getCanHscroll=function(_a,_b,_c){return true;};_pDatePickerGroup._getCanVscroll=function(_a,_b,_c){return true;};nexacro.TimePickerGroup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.PickerGroup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pTimePickerGroup=nexacro._createPrototype(nexacro.PickerGroup,nexacro.TimePickerGroup);nexacro.TimePickerGroup.prototype=_pTimePickerGroup;_pTimePickerGroup._type_name="TimePickerGroup";_pTimePickerGroup._usertimeformat="";_pTimePickerGroup._comptype={proto:"TimePickerControl",id:"timepicker"};_pTimePickerGroup.on_after_created=function(){this._updateSplitLines();this._setChildEventHandler();};_pTimePickerGroup.on_destroy_contents=function(){nexacro.PickerGroup.prototype.on_destroy_contents.call(this);};_pTimePickerGroup._setPickerCreateInfo=function(_a){_a._usertimeformat=this._usertimeformat;};_pTimePickerGroup._updatePickers=function(_a){nexacro.PickerGroup.prototype._updatePickers.call(this,_a);if(_a){this._curr_timepicker=this._picker_ctrl_list[0];}if(this._p_startdate){this.on_apply_startdate();}if(this._p_enddate){this.on_apply_enddate();}};_pTimePickerGroup._getPickerCount=function(){if(this._p_type=="range"){return 2;}return 1;};_pTimePickerGroup._getSplitCount=function(){if(this._p_type=="range"){return 1;}return 0;};_pTimePickerGroup._setChildEventHandler=function(){var _a=this._picker_ctrl_list;_a[0]._setEventHandler("onchanged",this._on_timepicker_starttime_changed,this);if(_a[1]){_a[1]._setEventHandler("onchanged",this._on_timepicker_endtime_changed,this);}};_pTimePickerGroup._isNeedValidate=function(){if(this._p_type=="range"){var _a=this._getRangePicker();if((_a._p_displaytype=="time")||(_a._p_displaytype=="datetime"&&_a._startdate.date==_a._enddate.date)){return true;}}return false;};_pTimePickerGroup._on_timepicker_starttime_changed=function(_a,_b){if(this._p_startdate!=_b.postvalue){var _c=this._p_startdate;var _d=this._p_enddate;if(this._isNeedValidate()){if(_b.postvalue>_d){this._p_enddate=_b.postvalue;this.on_apply_enddate();}}this._p_startdate=_b.postvalue;this.on_apply_startdate();this.on_fire_onchanged(_c,this._p_startdate,_d,this._p_enddate);}};_pTimePickerGroup._on_timepicker_endtime_changed=function(_a,_b){if(this._p_enddate!=_b.postvalue){var _c=this._p_startdate;var _d=this._p_enddate;if(this._isNeedValidate()){if(_b.postvalue<_c){this._p_startdate=_b.postvalue;this.on_apply_startdate();}}this._p_enddate=_b.postvalue;this.on_apply_enddate();this.on_fire_onchanged(_c,this._p_startdate,_d,this._p_enddate);}};_pTimePickerGroup.on_apply_startdate=function(){this._setStartDate(this._p_startdate);};_pTimePickerGroup._setStartDate=function(_a){var _b;if(_a){_b=nexacro.DataUtils.toTime(_a);}else{_b=nexacro.DataUtils.toTime("000000000");}this._range.start=_b;this._startdate=_b.toString();if(this._picker_ctrl_list[0]){this._picker_ctrl_list[0].set_value(this._startdate);}};_pTimePickerGroup.on_apply_enddate=function(){if(this._p_type=="range"){this._setEndDate(this._p_enddate);}};_pTimePickerGroup._setEndDate=function(_a){var _b;if(_a){_b=nexacro.DataUtils.toTime(_a);}else{_b=this._range.start?this._range.start:"000000000";}this._range.end=_b;this._enddate=_b.toString();if(this._picker_ctrl_list[1]){this._picker_ctrl_list[1].set_value(this._enddate);}};_pTimePickerGroup.on_apply_type=function(){this._updatePickers();this._updateSplitLines();this._recalcLayout();};_pTimePickerGroup.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pTimePickerGroup._recalcLayout=function(){var _a=this._getClientWidth(),_b=this._getClientHeight();if(_a<=0){return;}var _c=this._picker_ctrl_list;var _d=this._split_line_list;var _e=0,_f;var _g,_h;var _i=0,_j=0;var _k=this._getCurrentStylePadding();if(_k){_j=_k.left;_i=_k.top;}if(this._p_direction=="horizontal"){for(_f=0;_f<_c.length;_f++ ){_c[_f].move(_e,0,_a/_c.length,_b);_e+=_a/_c.length;}for(_f=0;_f<_d.length;_f++ ){_g=_a/_c.length;_d[_f]._setDirection(false);_d[_f].move(_j+(_g* (_f+1))-0.5,_i,1,_b);}}else{for(_f=0;_f<_c.length;_f++ ){_c[_f].move(10,_e,_a -20,_b/_c.length);_e+=_b/_c.length;}for(_f=0;_f<_d.length;_f++ ){_h=_b/_c.length;_d[_f]._setDirection(true);_d[_f].move(_j,_i+(_h* (_f+1))-0.5,_a,1);}}};_pTimePickerGroup.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(_c&&!_b&&(_a==nexacro.Event.KEY_LEFT||_a==nexacro.Event.KEY_RIGHT)){var _g=this._picker_ctrl_list;var _h=this._getCurrentPicker();for(var _i=0;_i<_g.length;_i++ ){if(_h!=_g[_i]){this._focused_pos=null;_g[_i]._setFocus(false);this._setCurrentPicker(_g[_i]);return;}}}else{nexacro.PickerGroup.prototype.on_keydown_basic_action.call(this,_a,_b,_c,_d,_e,_f);}};nexacro.DatePickerControlEx=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.DatePickerControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pDatePickerControlEx=nexacro._createPrototype(nexacro.DatePickerControl,nexacro.DatePickerControlEx);nexacro.DatePickerControlEx.prototype=_pDatePickerControlEx;_pDatePickerControlEx._p_overlaybackground="#333333";_pDatePickerControlEx._p_overlayopacity="0.5";_pDatePickerControlEx._p_value=null;_pDatePickerControlEx._p_userange=true;_pDatePickerControlEx._year_month=null;_pDatePickerControlEx._overlay=null;_pDatePickerControlEx._skipEvent=false;_pDatePickerControlEx._use_space_key=true;_pDatePickerControlEx.on_getIDCSSSelector=function(){return "datepicker";};_pDatePickerControlEx.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.head=new nexacro._DatePickerHeadControl("head",0,0,0,0,null,null,null,null,null,null,this);var _c=this.body=new nexacro._DatePickerBodyControl("body",0,0,0,0,null,null,null,null,null,null,this);_b._on_static_before_onlbuttondown=function(){return this._p_parent._on_head_onYearMonthDown();};_b._on_static_mobile_before_onclick=function(){return this._p_parent._on_head_onYearMonthDown();};_c.on_create_contents=function(){this._selections=[];for(var _e=0;_e<6;_e++ ){var _d=new nexacro.RangeSelectionControl("selection_"+_e,_c);_d.createComponent(true);_d._control_element.setElementDisplay("none");this._selections[_e]=_d;}nexacro._DatePickerBodyControl.prototype.on_create_contents.call(this);};_c.on_created_contents=function(_d){var _a=this.getElement();if(_a){for(var _e=0;_e<this._selections.length;_e++ ){this._selections[_e].on_created(_d);}}nexacro._DatePickerBodyControl.prototype.on_created_contents.call(this,_d);};_c.on_create_contents_command=function(){var _d="";for(var _e=0;_e<this._selections.length;_e++ ){_d+=this._selections[_e].createCommand();}_d+=nexacro._DatePickerBodyControl.prototype.on_create_contents_command.call(this);return _d;};_c.on_attach_contents_handle=function(_d){for(var _e=0;_e<this._selections.length;_e++ ){this._selections[_e].attachHandle(_d);}nexacro._DatePickerBodyControl.prototype.on_attach_contents_handle.call(this,_d);};_c.on_destroy_contents=function(){nexacro._DatePickerBodyControl.prototype.on_destroy_contents.call(this);for(var _d=0;_d<this._selections.length;_d++ ){this._selections[_d].destroy();}this._selections=null;};_c._getSelections=function(){return this._selections;};_c._getInnerDatasetColumns=function(){var _d=this._p_parent;if(_d){var _e=_d._getBackgroundcolumn();var _f=_d._getBordercolumn();var _g=_d._getDatecolumn();var _h=_d._getTextcolorcolumn();var _i=_d._getHintingcolumn();var _j=_d._getreadonlycolumn();return {backgroundcolumn:_e,bordercolumn:_f,datecolumn:_g,textcolorcolumn:_h,hintingcolumn:_i,readonlycolumn:_j};}return null;};_c._setDatasetStyle=function(_d){var _e,_f;var _g=this._dayitems;var _h=this._maxDay;var _i=this._getInnerDatasetColumns();var _j,_k,_l,_m,_n;var _o=_d.getRowCount();for(var _q=0;_q<_o;_q++ ){_f=_d.getColumn(_q,_i.datecolumn);for(var _r=0;_r<_h;_r++ ){_e=_g[_r];var _p=_e._year+_e._month+_e.text.padLeft(2,"0");if(_p==_f){_j=_d.getColumn(_q,_i.backgroundcolumn);_k=_d.getColumn(_q,_i.bordercolumn);_l=_d.getColumn(_q,_i.textcolorcolumn);_m=_d.getColumn(_q,_i.hintingcolumn);_n=_d.getColumn(_q,_i.readonlycolumn);if(_j){_e.set_background(_j);}if(_k){_e.set_border(_k);}if(_l){_e.set_color(_l);}if(_m){_e.set_tooltiptext(_m);}if(_n!=undefined){_e.set_enable(!nexacro._toBoolean(_n));}this._changedDays[this._changedDays.length]=_e;}}}};_c._initChangedDays=function(){var _d=this._changedDays.length;for(var _e=(_d -1);_e>=0;_e-- ){this._changedDays[_e].set_background(null);this._changedDays[_e].set_color(null);this._changedDays[_e].set_border(null);this._changedDays[_e].set_tooltiptext(null);this._changedDays[_e].set_enable(true);this._changedDays.pop();}};_c._on_apply_day=function(_d){var _e=this._preday;var _f=this._date.str_day;var _g=this._getDayItem(_e);var _h=this._getDayItem(_f);this._preday=_f;if(_g){_g._changeUserStatus("selected",false);if(_g._daysofweek>=0&&_g._daysofweek<=6){_g._changeDayUserStatus(_g._daysofweek,true);}else{_g._changeUserStatus("day",true);}}if(_h){if(_d){_h._changeUserStatus("selected",true);}else{_h._changeUserStatus("selected",false);if(_h._daysofweek>=0&&_h._daysofweek<=6){_h._changeDayUserStatus(_h._daysofweek,true);}else{_h._changeUserStatus("day",true);}}}var _i=new Date();var _j=_i.getDate();if(this._isToday(_j)){_j=nexacro._toString(_j).padLeft(2,"0");var _k=this._getDayItem(_j);if(_d){if(_k!=_h){_k._changeUserStatus("today",true);}}else{_k._changeUserStatus("today",true);}}};_c._refreshDay=function(){nexacro._DatePickerBodyControl.prototype._refreshDay.call(this);this.parent._refreshBodyEndDay();};_c.on_fire_user_onkeydown=function(_d,_e,_f,_g,_h,_i,_j){return this._p_parent.on_fire_user_onkeydown(_d,_e,_f,_g,_h,_i,_j);};_b.createComponent(true);_c.createComponent(true);this.on_apply_datepickerchangetype(this._p_parent._p_datepickerchangetype);}};_pDatePickerControlEx.on_destroy_contents=function(){nexacro.DatePickerControl.prototype.on_destroy_contents.call(this);if(this._overlay){this._overlay.destroy();this._overlay=null;}};_pDatePickerControlEx._on_body_onmonthclick=function(_a,_b){if(this._skipEvent){return;}nexacro.DatePickerControl.prototype._on_body_onmonthclick.call(this,_a,_b);this._p_parent._modalYearMonthPicker(this,false);};_pDatePickerControlEx._on_body_ondayclick=function(_a,_b){if(this._skipEvent){return;}this.on_fire_ondayclick(_a,_b,"click");this._focusDate(_a,_b);};_pDatePickerControlEx._on_head_onYearMonthDown=function(){if(this._skipEvent){return false;}this._p_parent._modalYearMonthPicker(this,true);return true;};_pDatePickerControlEx._on_head_onkeydown=function(_a,_b){};_pDatePickerControlEx._on_body_onkeydown=nexacro._emptyFn;_pDatePickerControlEx._keyAction=function(_a,_b){var _c=this.body;if(this._overlay){return;}if(this.head.monthstatic._p_visible){if(!_a.altkey&&(_a.keycode==nexacro.Event.KEY_LEFT||_a.keycode==nexacro.Event.KEY_RIGHT||_a.keycode==nexacro.Event.KEY_UP||_a.keycode==nexacro.Event.KEY_DOWN||_a.keycode==nexacro.Event.KEY_HOME||_a.keycode==nexacro.Event.KEY_END||_a.keycode==nexacro.Event.KEY_PAGE_UP||_a.keycode==nexacro.Event.KEY_PAGE_DOWN)){_a.fromobject=this._focusDate(_c,_a);if(!this._p_userange){this.on_fire_ondayclick(_c,_a,"arrow_key");}}else if(_a.keycode==nexacro.Event.KEY_SPACE||_a.keycode==nexacro.Event.KEY_ENTER){_a.fromobject=this._focusDate(_c,_a);this.on_fire_ondayclick(_c,_a,"enter_key");}if(_b=="head"){this._p_parent._modalYearMonthPicker(this,false);}}else if(!this.head.monthstatic._p_visible&&this.head.yearstatic.text.length<6){this._changeMonth(_c,_a);if(_a.keycode==nexacro.Event.KEY_ENTER){this._p_parent._modalYearMonthPicker(this,false);}return true;}else{this._changeYear(_c,_a);return true;}};_pDatePickerControlEx._focusDate=function(_a,_b){var _c=this.body;var _d=_c._date;var _e=_d.int_year;var _f=_d.int_month;var _g;var _h=this._getEndDay(_e,_f);var _i=this;var _j=this.parent;var _k=true;var _l="";if(_b.fromreferenceobject instanceof nexacro._DatePickerDayItemControl){_l=_b.fromreferenceobject.text.padLeft(2,"0");}if(_j._focused_day==undefined){if(_j._startdate){_e=_j._startdate.substr(0,4);_f=_j._startdate.substr(4,2);_g=_j._startdate.substr(6,2);}else{var _m=_j._getCurrentDate();_e=nexacro._toString(_m.year).padLeft(4,"0");_f=nexacro._toString(_m.month).padLeft(2,"0");_g=nexacro._toString(_m.day).padLeft(2,"0");}if(_d.int_year!=parseInt(_e)||_d.int_month!=parseInt(_f)){_e=nexacro._toString(_d.int_year).padLeft(4,"0");_f=nexacro._toString(_d.int_month).padLeft(2,"0");_g="01";_k=false;}if(_l){_g=_l;}this._focused_day=_g;_j._setFocusedDay(_e,_f,_g);}else{if(_l){_g=_l;}else{_g=_j._focused_day;}this._focused_day=_g;}if(_k){_e=parseInt(_e);_f=parseInt(_f);_g=parseInt(this._focused_day);var _n=false;var _o=false;var _p=false;var _q=false;var _r=false;var _s=false;var _t=nexacro._enableaccessibility;var _u=_b.keycode;switch(_u){case nexacro.Event.KEY_LEFT:if(_b.ctrlkey){_r=true;}else{_s=true;}if(_s){_g-=1;if(_g<=0){_r=true;}}if(_r){_f-=1;if(_f<=0){if(_e<=0){_e=9999;}else{_e-=1;}_f=12;}if(!_b.ctrlkey){_g+=this._getEndDay(_e,_f);}_n=true;_i=this._getPrevPicker(this);_i._focused_day=_g;_j._setCurrentPicker(_i);}break;case nexacro.Event.KEY_UP:if(_b.ctrlkey){_e-=1;_n=true;_o=true;}else if(!_t){_g-=7;if(_g<=0){if(_f<=1){_f=12;if(_e<=0){_e=9999;}else{_e-=1;}}else{_f-=1;}_g+=this._getEndDay(_e,_f);_i=this._getPrevPicker(this);_i._focused_day=_g;_j._setCurrentPicker(_i);}}break;case nexacro.Event.KEY_RIGHT:if(_b.ctrlkey){_p=true;}else{_q=true;}if(_q){_g+=1;if(_g>_h){_p=true;}}if(_p){_f+=1;if(_f>12){if(_e>=9999){_e=0;}else{_e+=1;}_f=1;}if(_q){_g-=_h;}_n=true;_i=this._getNextPicker(this);_i._focused_day=_g;_j._setCurrentPicker(_i);}break;case nexacro.Event.KEY_DOWN:if(_b.ctrlkey){_e+=1;_n=true;_o=true;}else if(!_t){_g+=7;if(_g>_h){if(_f>=12){_f=1;if(_e>=9999){_e=0;}else{_e+=1;}}else{_f+=1;}_g-=_h;_i=this._getNextPicker(this);_i._focused_day=_g;_j._setCurrentPicker(_i);}}break;case nexacro.Event.KEY_HOME:var _v=this._getWeekStartDayItem(_g);_g=parseInt(_v.text);break;case nexacro.Event.KEY_END:var _w=this._getWeekLastDayItem(_g);_g=parseInt(_w.text);break;case nexacro.Event.KEY_PAGE_UP:_g=1;break;case nexacro.Event.KEY_PAGE_DOWN:_g=_h;break;}_e=nexacro._toString(_e).padLeft(4,"0");_f=nexacro._toString(_f).padLeft(2,"0");_g=nexacro._toString(_g).padLeft(2,"0");this._focused_day=_g;_j._setFocusedDay(_e,_f,_g);if(_o){_j._rearrangeYearMonth(_i,_e,_f);}}var _x=_i.body._getDayItem(_g);_x._setFocus(false);if(nexacro._enableaccessibility){if(_n){_x._setAccessibilityLabel(_e+" "+_f+" "+_g);}}return _x;};_pDatePickerControlEx.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){nexacro.DatePickerControl.prototype.on_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);this._common_down_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);};_pDatePickerControlEx.on_touch_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.DatePickerControl.prototype.on_touch_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_k,_l);this._common_down_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_k,_l);};_pDatePickerControlEx.on_touchstart_basic_action=function(_a,_b,_c,_d){nexacro.DatePickerControl.prototype.on_touchstart_basic_action.call(this,_a,_b,_c,_d);var _e=nexacro._getFirstTouchInfo(_c);this._common_down_action(_e.target,"touch",false,false,false,_e.canvasx,_e.canvasy,_e.screenx,_e.screeny,_d);};_pDatePickerControlEx._common_down_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){if(_j instanceof nexacro._DatePickerDayItemControl){var _l=this.body;var _m=_l._date;var _n=_m.int_year;var _o=_m.int_month;var _p=_j.text.padLeft(2,"0");var _q=this.parent;this._focused_day=_p;_q._setFocusedDay(_n,_o,_p);}};_pDatePickerControlEx._getWeekStartDayItem=function(_a){if(_a==-1){return null;}var _b=this.body._getDayItem(_a);var _c=parseInt(_b.id.replace(/^\D+/g,''),10);var _d=_c%7;_a-=_d;if(_a<1){_a=1;}return this.body._getDayItem(_a);};_pDatePickerControlEx._getWeekLastDayItem=function(_a){if(_a==-1){return null;}var _b=this.body._getDayItem(_a);var _c=parseInt(_b.id.replace(/^\D+/g,''),10);var _d=_c%7;_a-=_d;_a+=6;var _e=this.body._date;var _f=_e.int_year;var _g=_e.int_month;var _h=this._getEndDay(_f,_g);if(_a>_h){_a=_h;}return this.body._getDayItem(_a);};_pDatePickerControlEx._getPrevPicker=function(){var _a=this.body._date.int_year;var _b=this.body._date.int_month;if(_b>1){_b-- ;}else{_a-- ;_b=12;}if(this.parent._isShowMonth(_a,_b)){return this.parent._getPrevShowPicker(this);}else{this.parent._movePrev(true);return this.parent._getPrevShowPicker(this);}};_pDatePickerControlEx._getNextPicker=function(){var _a=this.body._date.int_year;var _b=this.body._date.int_month;if(_b<12){_b++ ;}else{_a++ ;_b=1;}if(this.parent._isShowMonth(_a,_b)){return this.parent._getNextShowPicker(this);}else{this.parent._moveNext(true);return this.parent._getNextShowPicker(this);}};_pDatePickerControlEx._cancelSelectYearMonth=function(){var _a=this.body;var _b=this.head;_a._years_visible(false);_a._months_visible(false);_a._days_visible(true);_a.weekband.set_visible(true);for(var _c=0;_c<_a._maxWeek;_c++ ){_a._weekitems[_c].set_visible(true);}_b.yearstatic.set_visible(true);_b.monthstatic.set_visible(true);};_pDatePickerControlEx._getHeadheight=function(){var _a=this._p_parent;if(_a){return _a._headheight;}return null;};_pDatePickerControlEx.set_overlaybackground=function(){this._p_overlaybackground=v;};_pDatePickerControlEx.set_overlayopacity=function(_a){this._p_overlayopacity=_a;};_pDatePickerControlEx._getHintingcolumn=function(){return this._p_parent._p_hintingcolumn;};_pDatePickerControlEx._getreadonlycolumn=function(){return this._p_parent._p_readonlycolumn;};_pDatePickerControlEx._lock=function(_a){if(this._overlay){this._overlay.destroy();this._overlay=null;}if(_a){var _b=this._control_element.inner_width;var _c=this._control_element.inner_height;var _d=this._overlay=new nexacro.Component("overlay",0,0,_b,_c,null,null,null,null,null,null,this);this._overlay._type_name="StaticControl";_d._setControl();_d._is_nc_control=true;_d._is_simple_control=true;_d.set_background(this._p_overlaybackground);_d.set_opacity(this._p_overlayopacity);_d.createComponent();}};_pDatePickerControlEx.on_change_containerRect=function(_a,_b){nexacro.DatePickerControl.prototype.on_change_containerRect.call(this,_a,_b);if(this._overlay){var _c=this._control_element.inner_width;var _d=this._control_element.inner_height;this._overlay.resize(_c,_d);}};_pDatePickerControlEx._setYearMonth=function(_a,_b){this._year_month={year:_a,month:_b};this._setValue(this._p_value);};_pDatePickerControlEx._getYearMonthStr=function(){var _a;_a=this._year_month?this._year_month.year.toString().padLeft(4,"0"):"0000";_a+=this._year_month?this._year_month.month.toString().padLeft(2,"0"):"00";return _a;};_pDatePickerControlEx._setValue=function(_a){this._p_value=_a;this._value=_a;if(!this._year_month){return;}var _b=this._getYearMonthStr();if(!this._value||this._value.substr(0,6)!=_b){this._p_value=null;this._value=_b+"01";}this.on_apply_value(this._value);};_pDatePickerControlEx.on_apply_value=function(_a){var _b=_a.substr(0,4);var _c=_a.substr(4,2);var _d=_a.substr(6,2);this._selected_year=_b;this._selected_month=_c;if(this._p_value){this._selected_day=_d;}else{this._selected_day="";}var _e=this.head;if(_e){_e._setDate(_b,_c);_e._recalcLayout();}var _f=this.body;if(_f){_f._setDate(_b,_c,_d);}};_pDatePickerControlEx._setEndValue=function(_a){this._prev_endvalue=this._endvalue;this._endvalue=_a;this.on_apply_endvalue();};_pDatePickerControlEx.on_apply_endvalue=function(){var _a=this.body;if(this._p_userange){_a._refreshDay();}};_pDatePickerControlEx._refreshBodyEndDay=function(){var _a=this.body;var _b,_c;if(this._prev_endvalue){_c=this._prev_endvalue;_b=_c.substr(6,2);if(_c!=this._value){var _d=_a._getDayItem(_b);if(_d){_d._changeUserStatus("selected",false);}}}if(this._endvalue){_c=this._endvalue;_b=_c.substr(6,2);var _d=_a._getDayItem(_b);if(_d){_d._changeUserStatus("selected",this._p_userange);}}};_pDatePickerControlEx._updateInvalidDisplay=function(_a,_b){var _c;var _d=this._getYearMonthStr();var _e,_f;var _g=this.body;if(_a){var _h=_a.substr(0,6);var _e=_a.substr(6,2);if(_h==_d){var _i=_g._getDayItem(_e);_i._changeUserStatus("selected",true);}}this._invalid_eday="";if(_b){var _j=_b.substr(0,6);var _f=_b.substr(6,2);if(_j==_d){var _i=_g._getDayItem(_f);_i._changeUserStatus("selected",true);}}};_pDatePickerControlEx.set_userange=function(_a){if(this._p_userange!=_a){this._p_userange=_a;this.on_apply_userange();}};_pDatePickerControlEx.on_apply_userange=function(_a){this.on_apply_endvalue();};_pDatePickerControlEx._updateMinMaxDay=function(_a,_b){if(!_a){_a="00000000";}if(!_b){_b="99999999";}var _c=this.body._dayitems;var _d=this._getYearMonthStr();for(var _f=0;_f<_c.length;_f++ ){var _e=_d+_c[_f].text.padLeft(2,"0");if(_a>_e||_b<_e){_c[_f]._setEnable(false);}else{_c[_f]._setEnable(this._real_enable&&true);}}};_pDatePickerControlEx._updateSelection=function(_a,_b){var _c=this.body._dayitems;var _d=_c[0]._adjust_width;var _e=_c[0]._adjust_height;if(!_d||!_e){return;}var _f=_a.substr(0,6);var _g=_a.substr(6,2);var _h=_b.substr(0,6);var _i=_b.substr(6,2);var _j=this._getYearMonthStr();function findDayItem(_w,_x){_x=parseInt(_x)+"";for(var _y=0;_y<_w.length;_y++ ){if(_w[_y].text==_x){return _w[_y];}}return null;};var _k,_l;var _m=this.body._getSelections();if(_f<=_j&&_j<=_h){if(_f==_j){_k=findDayItem(_c,_g);}if(_h==_j){_l=findDayItem(_c,_i);}var _n,_o,_p,_q;var _r=new Array(6);for(var _w=0,_x=0;_w<6;_w++ ){_r[_w]=new Array(7);for(var _y=0;_y<7;_y++ ){_r[_w][_y]=(_c[_x].text)?_c[_x]:null;_x++ ;}}for(var _z=0;_z<6;_z++ ){var _s=-1,_t=-1,_u=0,_v=_e;for(var _aa=0;_aa<7;_aa++ ){if(_r[_z][_aa]){if(_k&&parseInt(_k.text)>parseInt(_r[_z][_aa].text)){continue;}if(_l&&parseInt(_l.text)<parseInt(_r[_z][_aa].text)){break;}if(_t<0){_t=_r[_z][_aa]._adjust_left;}if(_s<0){_s=_r[_z][_aa]._adjust_top;}_u+=_r[_z][_aa]._adjust_width;}}if(_t<0){_m[_z]._control_element.setElementDisplay("none");}else{_m[_z].move(_t+1,_s+1,_u -2,_v -2);_m[_z]._control_element.setElementDisplay("");}}}else{this._displayNoneSelection();}};_pDatePickerControlEx._displayNoneSelection=function(){var _a=this.body._getSelections();for(var _b=0;_b<6;_b++ ){_a[_b]._control_element.setElementDisplay("none");}};_pDatePickerControlEx.on_fire_ondayclick=function(_a,_b,_c){if(this.ondayclick&&this.ondayclick._has_handlers){if(!_b){if(!this._focused_day){return;}var _d=this.body._getDayItem(this._focused_day);_b=new nexacro.CalendarDayClickEventInfo(_d,"ondayclick",this._value);}_b.kind=_c;return this.ondayclick._fireEvent(this,_b);}return false;};_pDatePickerControlEx._on_focus=function(_a,_b,_c,_d,_e,_f){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);var _g=this.parent;var _h=this.body._date;if(_g._focused_day){if(_h.int_year==parseInt(_g._focused_year)&&_h.int_month==parseInt(_g._focused_month)){var _i=this.body._getDayItem(_g._focused_day);if(_i){_i._setFocus(false);}}else{this.body._setFocus(false);}}else{this.body._setFocus(false);}};_pDatePickerControlEx.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){return this._p_parent.on_fire_user_onkeydown(_a,_b,_c,_d,_e,_f,_g);};_pDatePickerControlEx._getCanHscroll=function(_a,_b,_c){var _d=false;if(_c!=0&&(_b!="none"&&_b!="vert")){var _e,_f,_g=true;if(_a){if(_a._p_enable){_e=_a.max;_f=_a.pos;}else{_g=false;}}else{_e=this._control_element.hscroll_limit;_f=this.getHScrollPos();}if(_g){if(_c<0){if(_f<_e){_d=true;}}else{if(_f>0){_d=true;}}}}return _d;};_pDatePickerControlEx._getCanVscroll=function(_a,_b,_c){var _d=false;if(_c!=0&&(_b!="none"&&_b!="horz")){var _e,_f,_g=true;if(_a){if(_a._p_enable){_e=_a.max;_f=_a.pos;}else{_g=false;}}else{_e=this._control_element.vscroll_limit;_f=this.getVScrollPos();}if(_g){if(_c<0){if(_f<_e){_d=true;}}else{if(_f>0){_d=true;}}}}return _d;};nexacro.RangeSelectionControl=function(_a,_b){nexacro.Component.call(this,((_a)?_a:"selection"),0,0,0,0,null,null,null,null,null,null,_b);};var _pRangeSelectionControl=nexacro._createPrototype(nexacro.Component,nexacro.RangeSelectionControl);nexacro.RangeSelectionControl.prototype=_pRangeSelectionControl;_pRangeSelectionControl._is_subcontrol=true;_pRangeSelectionControl._is_simple_control=true;_pRangeSelectionControl._type_name="StaticControl";_pRangeSelectionControl.on_getIDCSSSelector=function(){return "selection";};nexacro.DatePickerSplitLine=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pDatePickerSplitLine=nexacro._createPrototype(nexacro.Component,nexacro.DatePickerSplitLine);nexacro.DatePickerSplitLine.prototype=_pDatePickerSplitLine;_pDatePickerSplitLine._type_name="StaticControl";_pDatePickerSplitLine._is_simple_control=true;_pDatePickerSplitLine._is_subcontrol=true;_pDatePickerSplitLine._is_nc_control=true;_pDatePickerSplitLine._is_horz=false;_pDatePickerSplitLine.on_getIDCSSSelector=function(){return "splitline";};_pDatePickerSplitLine.on_create_contents=function(){this._setDirection(this._is_horz);};_pDatePickerSplitLine._setDirection=function(_a){this._is_horz=_a;if(this._is_horz){this._control_element.setElementBorderNone(true,false,true,true);}else{this._control_element.setElementBorderNone(true,true,false,true);}};nexacro.DateRangePickerDayClickEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"ondayclick";this.fromobject=this.fromreferenceobject=_a;this.date=_c;this.rangeposition=_d;};var _pDateRangePickerDayClickEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DateRangePickerDayClickEventInfo);nexacro.DateRangePickerDayClickEventInfo.prototype=_pDateRangePickerDayClickEventInfo;_pDateRangePickerDayClickEventInfo._type_name="DateRangePickerDayClickEventInfo";nexacro._defineProperties(_pDateRangePicker,_pDateRangePicker._properties);delete _pDateRangePickerDayClickEventInfo;delete _pDateRangePicker;delete _pPickerHeadLineControl;delete _pTimePickerGroup;delete _pDatePickerGroup;delete _pPickerGroup;delete _pDatePickerControlEx;delete _pDatePickerSplitLine;delete _pRangeSelectionControl;};if(!nexacro.PopupDateRangePicker){nexacro.PopupDateRangePicker=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.DateRangePicker.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._attached_comp=this;};var _pPopupDateRangePicker=nexacro._createPrototype(nexacro.DateRangePicker,nexacro.PopupDateRangePicker);nexacro.PopupDateRangePicker.prototype=_pPopupDateRangePicker;_pPopupDateRangePicker._type_name="PopupDateRangePicker";_pPopupDateRangePicker._p_visible=false;_pPopupDateRangePicker._p_useclosebutton=true;_pPopupDateRangePicker._event_list["onpopup"]=1;_pPopupDateRangePicker._properties=[{name:"useclosebutton"},{name:"visible"},];_pPopupDateRangePicker._callbackfunction=null;_pPopupDateRangePicker._callbackcontext=null;_pPopupDateRangePicker._headline_autoposition=false;_pPopupDateRangePicker._eventclear_flag=false;_pPopupDateRangePicker._default_zindex=nexacro._zindex_popup;_pPopupDateRangePicker._is_window=true;_pPopupDateRangePicker._is_popup_control=true;_pPopupDateRangePicker._is_selfclose=true;_pPopupDateRangePicker._is_trackpopup=false;_pPopupDateRangePicker._track_capture=true;_pPopupDateRangePicker._is_fired_onsize=false;_pPopupDateRangePicker.accessibilityrole="none";_pPopupDateRangePicker.on_create_control_element=function(_a){var _b;if(this._is_scrollable){_b=this.on_create_popupscrollable_control_element(_a);}else{_b=this.on_create_popup_control_element(_a);}if(_b&&this._default_zindex>0){_b.setElementZIndex(this._default_zindex);}return _b;};_pPopupDateRangePicker.on_created=function(_a){nexacro.DateRangePicker.prototype.on_created.call(this,_a);var _b=this._control_element;if(_b){_b.setElementPosition(-5000,0);}};_pPopupDateRangePicker.destroyComponent=function(){nexacro.PopupControl.prototype.destroyComponent.call(this);nexacro.DateRangePicker.prototype.destroyComponent.call(this);this._callbackfunction=null;this._callbackcontext=null;return true;};_pPopupDateRangePicker._isUseCloseButton=function(){return (this.displaytype!="date")||this._p_useclosebutton;};_pPopupDateRangePicker.on_created_contents=function(_a){nexacro.DateRangePicker.prototype.on_created_contents.call(this,_a);var _b=this._control_element;if(!this._p_visible&&_b){_b.setElementPosition(-5000,0);_b.setElementFont(this._getCurrentStyleInheritValue("font"));_b.setElementColor(this._getCurrentStyleInheritValue("color"));_b.setElementWordSpacing(this._getCurrentStyleInheritValue("wordSpacing"));_b.setElementLetterSpacing(this._getCurrentStyleInheritValue("letterSpacing"));}};_pPopupDateRangePicker.on_create_contents_command=function(){return "";};_pPopupDateRangePicker.on_attach_contents_handle=function(_a){nexacro.DateRangePicker.prototype.on_created.call(this,_a);var _b=this._control_element;if(_b){_b.setElementPosition(-5000,0);}};_pPopupDateRangePicker._applyElementVisible=function(_a){nexacro.Component.prototype._applyElementVisible.call(this,_a);};_pPopupDateRangePicker.on_update_position=function(_a,_b,_c){if(this._p_visible||!nexacro._allow_default_pinchzoom){nexacro.DateRangePicker.prototype.on_update_position.call(this,_a,_b,_c);}else{var _d=this._control_element;if(_d){_d.setElementPosition(-5000,0);if(_b){this.on_fire_onmove(this._adjust_left,this._adjust_top);}if(_a){this.on_fire_onsize(this._adjust_width,this._adjust_height);}}}};_pPopupDateRangePicker._clearEventListener=function(_a){var _b=nexacro.getApplication();if(this._eventclear_flag&&_b&&_b.getActiveForm()){var _c=_b.getActiveForm()._event_list;if(!_c[_a]){return;}}nexacro._EventSinkObject.prototype._clearEventListener.apply(this,arguments);};_pPopupDateRangePicker.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){return nexacro.Form.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pPopupDateRangePicker.set_visible=function(_a){if(this._is_trackpopup){nexacro.PopupControl.prototype.set_visible.apply(this,arguments);if(!_a){this._closePopup(true);}}};_pPopupDateRangePicker.set_useclosebutton=function(_a){_a=nexacro._toBoolean(_a);if(this._p_useclosebutton!=_a){this._p_useclosebutton=_a;this.on_apply_useclosebutton();}};_pPopupDateRangePicker.on_apply_useclosebutton=function(){if(!this._control_element){return;}this._updateButtons();this._recalcLayout();};_pPopupDateRangePicker.set_rangeposition=undefined;_pPopupDateRangePicker.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.DateRangePicker.prototype.on_apply_prop_stringresource.call(this);};_pPopupDateRangePicker.trackPopup=function(_a,_b,_c,_d,_e,_f,_g){return this._trackPopup(_a,"",_b,_c,_d,_e,_f,_g);};_pPopupDateRangePicker.trackPopupCenter=function(_a,_b,_c,_d,_e){return this._trackPopup(_a,"center",-1,-1,_b,_c,_d,_e);};_pPopupDateRangePicker._trackPopup=function(_a,_b,_c,_d,_e,_f,_g,_h){if(this._is_trackpopup){return;}this._track_capture=_h===false?false:true;var _i=nexacro._getLayoutManager();var _j=_i?_i.isFluidLayoutType(this._p_parent):false;if(_j){_e=(_e==null)?this._convToPixel(this._p_width,this._p_parent._adjust_width): +_e;_f=(_f==null)?this._convToPixel(this._p_height,this._p_parent._adjust_height): +_f;}else{_e=(_e==null)?this._adjust_width: +_e;_f=(_f==null)?this._adjust_height: +_f;}if(this.minwidth){_e=Math.max(parseInt(this.minwidth),_e);}if(this.maxwidth){_e=Math.min(parseInt(this.maxwidth),_e);}if(this.minheight){_f=Math.max(parseInt(this.minheight),_f);}if(this.maxheight){_f=Math.min(parseInt(this.maxheight),_f);}if(_b=="center"){var _k=this._getWindow();var _l=_k.frame._adjust_width;var _m=_k.frame._adjust_height;if(nexacro._Browser=="Runtime"){_l=Math.round(_l/nexacro._getDevicePixelRatio(this.getElement()));_m=Math.round(_m/nexacro._getDevicePixelRatio(this.getElement()));}_c=(_l-_e)/2;_d=(_m-_f)/2;_d=_d<0?0:_d;}else{_c= +_c;_d= +_d;var _k=this._getWindow();var _n=0;var _o=0;if(_k){_n=_k.frame._adjust_width;_o=_k.frame._adjust_height;}var _p=_c+_e;if(_p>_n){if(_e<=_n){_c=_n-_e;}else{_c=0;_e=_n;}}var _q=_d+_f;if(_q>_o){if(_f<=_o){_d=_o-_f;}else{_d=0;_f=_o;}}}this._is_trackpopup=true;if(this._is_loading){this._wait_pop_position={obj:null,left:_c,top:_d,width:_e,height:_f};}else{var _r=_i?_i.isFluidLayoutType(this.form):false;if(_r){this._track_width=_e;this._track_height=_f;}this._popup(_c,_d,_e,_f);}if(_g&&typeof _g=="string"){var _s=this._p_parent;var _t=_s[_g];while(!_t&&!(_s._is_form&&_s._is_loaded)){_s=_s._p_parent;_t=_s[_g];}if(_t){this._callbackfunction=_t;this._callbackcontext=_s;}}else{this._callbackfunction=null;this._callbackcontext=null;}this.setFocus();this.on_fire_onpopup(this);if(!_a){_a="start";}if(this._datepicker_group){this._changeTab("date");this._datepicker_group._is_start_select=(_a=="start");if(_a=="start"){this._datepicker_group._animateScrollEnd("startdate",true);}else{this._datepicker_group._animateScroll("enddate",true,undefined,true);}}return true;};_pPopupDateRangePicker.trackPopupByComponent=function(_a,_b,_c,_d,_e,_f,_g,_h){if(this._is_trackpopup){return;}this._track_capture=_h===false?false:true;if(_e==null&&_f==null){_e=this._adjust_width;_f=this._adjust_height;}_e=parseInt(_e);_f=parseInt(_f);if(this.minwidth){_e=Math.max(parseInt(this.minwidth),_e);}if(this.maxwidth){_e=Math.min(parseInt(this.maxwidth),_e);}if(this.minheight){_f=Math.max(parseInt(this.minheight),_f);}if(this.maxheight){_f=Math.min(parseInt(this.maxheight),_f);}_c= +_c;_d= +_d;var _i=nexacro._getElementPositionInFrame(_b.getElement());var _j=_i.x;var _k=_i.y;var _l=this._getWindow();var _m=_l.clientWidth;var _n=_l.clientHeight;if(_j+_c+_e>_m){var _o=_m-_e;if(_o<0){_c= -_j;if(_e>_m){_e=_m;}}else{_c=_o-_j;}}if(_k+_d+_f>_n){var _p=_n-_f;if(_p<0){_d= -_k;_f=_n;}else{_d=_p-_k;}}if(_g&&typeof _g=="string"){var _q=this._p_parent;var _r=_q[_g];while(!_r&&!(_q._is_form&&_q._is_loaded)){_q=_q._p_parent;_r=_q[_g];}if(_r){this._callbackfunction=_r;this._callbackcontext=_q;}}else{this._callbackfunction=null;this._callbackcontext=null;}if(this._is_fired_onsize==false&&this.form){this.form.on_fire_onsize(this._adjust_width,this._adjust_height);this._is_fired_onsize=true;}this._is_trackpopup=true;if(this._is_loading){this._wait_pop_position={obj:_b,left:_c,top:_d,width:_e,height:_f};}else{this._popupBy(_b,_c,_d,_e,_f,true);}this.setFocus();this.on_fire_onpopup(this);if(!_a){_a="start";}if(this._datepicker_group){this._changeTab("date");this._datepicker_group._is_start_select=(_a=="start");if(_a=="start"){this._datepicker_group._animateScrollEnd("startdate",true);}else{this._datepicker_group._animateScroll("enddate",true,undefined,true);}}return true;};_pPopupDateRangePicker.closePopup=function(){if(this._p_visible){this._closePopup();return true;}return false;};_pPopupDateRangePicker.isPopup=nexacro.PopupControl.prototype._is_popup;_pPopupDateRangePicker._on_init=function(){this._eventclear_flag=true;nexacro.FormBase.prototype._on_init.apply(this,arguments);this._eventclear_flag=false;};_pPopupDateRangePicker._on_load=function(){var _a=nexacro.Form.prototype._on_load.apply(this,arguments);var _b=this._wait_pop_position;if(_b){if(_b.obj){this._popupBy(_b.obj,_b.left,_b.top,_b._p_width,_b._p_height);}else{this._popup(_b.left,_b.top,_b._p_width,_b._p_height);}delete this._wait_pop_position;}return _a;};_pPopupDateRangePicker.on_notify_onstartdateclick=function(_a,_b){nexacro.DateRangePicker.prototype.on_notify_onstartdateclick.call(this,_a,_b);if(_b.kind=="after_onchanged"){if(this._p_type=="single"){if(!this._isUseCloseButton()){this.closePopup();}}}};_pPopupDateRangePicker.on_notify_onenddateclick=function(_a,_b){nexacro.DateRangePicker.prototype.on_notify_onenddateclick.call(this,_a,_b);if(_b.kind=="after_onchanged"){if(this._p_type=="range"){if(!this._isUseCloseButton()){this.closePopup();}}}};_pPopupDateRangePicker.on_notify_close=function(_a,_b){this.closePopup();};_pPopupDateRangePicker._on_bubble_mousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(!this._is_alive){return;}var _q,_r,_s,_t,_u,_v,_w,_x,_y;if(_l===undefined){if(!_n){_n=this;}if(this._p_visible&&this._isEnable()){_q=this._getClientXY(_h,_i);_l=this.on_fire_user_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_q[0],_q[0],this,_n,_p);_r=this._getFromComponent(this);if(_l!==true){if(!_r.onmousewheel||(_r.onmousewheel&&!_r.onmousewheel.defaultprevented)){_s=this.on_fire_sys_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_q[0],_q[0],this,_n,_p);if(_s){return;}if(!_f){if(_c){if(this._p_vscrollbar&&this._p_vscrollbar._p_enable){_t=this._p_vscrollbar;_u=_t._pos;this._setVScrollDefaultAction(_t,_c);_v=_t._pos;if(_u!=_v){return;}}}if(_b){if(nexacro._OSVersion=="Mac OS"){if(this._p_hscrollbar&&this._p_hscrollbar._p_enable){_w=this._p_hscrollbar;_x=_w._pos;this._setHScrollDefaultAction(_w,_b);_y=_w._pos;if(_x!=_y){return;}}}}}return;}if(_l===false){_l=undefined;}if(!_r.onmousewheel||(_r.onmousewheel&&!_r.onmousewheel.stoppropagation)){if(this._p_parent&&!this._p_parent._is_application){var _z=this._getRecalcCanvasXY(_a,_h,_i);_h=_z[0];_i=_z[1];if(this._is_subcontrol){return this._p_parent._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,null,_n,_o,_p);}else{return this._p_parent._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,false,this,_n,_o,_p);}}}}}}else{if(this._p_visible&&this._isEnable()){_q=this._getClientXY(_h,_i);_l=this.on_fire_user_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_q[0],_q[0],_m,_n,_p);_r=this._getFromComponent(this);if(_l!==true){if(!_r.onmousewheel||(_r.onmousewheel&&!_r.onmousewheel.defaultprevented)){_s=this.on_fire_sys_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_q[0],_q[0],_m,_n,_p);if(_s){return;}if(!_f){if(_c){if(this._isWheelScrollable(_c)&&this._p_vscrollbar&&this._p_vscrollbar._p_enable){_t=this._p_vscrollbar;_u=_t._pos;this._setVScrollbarDefaultAction(_t,_c);_v=_t._pos;if(_u!=_v){return;}}}if(_b){if(nexacro._OSVersion=="Mac OS"){if(this._isWheelScrollable(_b)&&this._p_hscrollbar&&this._p_hscrollbar._p_enable){_w=this._p_hscrollbar;_x=_w._pos;this._setHScrollDefaultAction(_w,_b);_y=_w._pos;if(_x!=_y){return;}}}}}return;}if(!_r.onmousewheel||(_r.onmousewheel&&!_r.onmousewheel.stoppropagation)){if(this._p_parent&&!this._p_parent._is_application){_h+=this._adjust_left-this._scroll_left||0;_i+=this._adjust_top-this._scroll_top||0;return this._p_parent._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,false,_m,_n,_o,_p);}}}}}};_pPopupDateRangePicker.on_fire_onpopup=function(_a){if(this.onpopup&&this.onpopup._has_handlers){var _b=new nexacro.EventInfo(_a,"onpopup");return this.onpopup._fireEvent(this,_b);}return false;};_pPopupDateRangePicker.on_fire_onmove=function(_a,_b){if(this.onmove&&this.onmove._has_handlers){var _c=new nexacro.MoveEventInfo(this,"onmove",_a,_b);return this.onmove._fireEvent(this,_c);}return false;};_pPopupDateRangePicker.on_fire_oncloseup=function(_a){if(this._callbackfunction){this._callbackfunction.call(this._callbackcontext,this.id);}if(this.oncloseup&&this.oncloseup._has_handlers){var _b=new nexacro.EventInfo(_a);_b.eventid="oncloseup";return this.oncloseup._fireEvent(this,_b);}return false;};_pPopupDateRangePicker.on_fire_sys_onslidestart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDateRangePicker.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDateRangePicker.on_fire_sys_onslideend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDateRangePicker.on_fire_sys_onflingstart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDateRangePicker.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDateRangePicker.on_fire_sys_onflingend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDateRangePicker._detach=function(_a){this._attached_comp=null;};_pPopupDateRangePicker._popup=nexacro.PopupControl.prototype._popup;_pPopupDateRangePicker._popupBy=nexacro.PopupControl.prototype._popupBy;_pPopupDateRangePicker._closePopup=function(_a){if(this._datepicker_group&&this._datepicker_group._modal_picker){this._datepicker_group._modal_picker._closeUp();this._datepicker_group._modalYearMonthPicker(this._datepicker_group._modal_picker,false);}if(!_a){nexacro.PopupControl.prototype._closePopup.apply(this,arguments);}this._is_trackpopup=false;if(this._track_width){this._track_width=undefined;}if(this._track_height){this._track_height=undefined;}};_pPopupDateRangePicker._getWindow=nexacro.PopupControl.prototype._getWindow;_pPopupDateRangePicker._getWindowHandle=nexacro.PopupControl.prototype._getWindowHandle;_pPopupDateRangePicker._findOwnerElementHandle=nexacro.PopupControl.prototype._findOwnerElementHandle;_pPopupDateRangePicker._isPopupVisible=function(){return this._p_visible;};nexacro._defineProperties(_pPopupDateRangePicker,_pPopupDateRangePicker._properties);delete _pPopupDateRangePicker;};