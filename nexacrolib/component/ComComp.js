//==============================================================================
//
//  Copyright 2021 TOBESOFT Co., Ltd.
//  All Rights Reserved.
//
//  NOTICE: TOBESOFT permits you to use, modify, and distribute this file 
//          in accordance with the terms of the license agreement accompanying it.
//
//  Readme URL: http://www.nexacro.com/legal/license/tobesoft/ko/NexacroN-public-license-readme-1.1.html
//
//==============================================================================
if(!nexacro.NormalDataset){nexacro.NormalDataset=function(_a,_b){nexacro.Dataset.call(this,_a,_b);this._p_url="";this._p_arguments="";this._p_serverdatasetid="";this._p_firefirstcount=0;this._p_firenextcount=0;this._p_progressload=false;this._p_preload=false;this._is_preloaded=false;this._is_created=false;};var _pNormalDataset=nexacro._createPrototype(nexacro.Dataset,nexacro.NormalDataset);nexacro.NormalDataset.prototype=_pNormalDataset;nexacro.NormalDataset.ROWTYPE_EMPTY=0;nexacro.NormalDataset.ROWTYPE_NORMAL=1;nexacro.NormalDataset.ROWTYPE_INSERT=2;nexacro.NormalDataset.ROWTYPE_UPDATE=4;nexacro.NormalDataset.ROWTYPE_DELETE=8;nexacro.NormalDataset.ROWTYPE_GROUP=16;nexacro.NormalDataset.REASON_LOAD=0;nexacro.NormalDataset.REASON_LOADPROCESS=1;nexacro.NormalDataset.REASON_RESET=2;nexacro.NormalDataset.REASON_LOADCONTENT=3;nexacro.NormalDataset.REASON_ASSIGN=10;nexacro.NormalDataset.REASON_COPY=11;nexacro.NormalDataset.REASON_APPEND=12;nexacro.NormalDataset.REASON_MERGE=13;nexacro.NormalDataset.REASON_DELETE=20;nexacro.NormalDataset.REASON_DELETEALL=22;nexacro.NormalDataset.REASON_CLEARDATA=23;nexacro.NormalDataset.REASON_CLEAR=24;nexacro.NormalDataset.REASON_SORTGROUP=30;nexacro.NormalDataset.REASON_FILTER=31;nexacro.NormalDataset.REASON_MOVE=32;nexacro.NormalDataset.REASON_EXCHANGE=33;nexacro.NormalDataset.REASON_CHANGELAYOUT=34;nexacro.NormalDataset.REASON_CHANGESTATUS=40;nexacro.NormalDataset.REASON_ENABLEEVENT=41;nexacro.NormalDataset.REASON_CHANGEDATAOBJECT=43;nexacro.NormalDataset.REASON_ROWCHANGE=51;nexacro.NormalDataset.REASON_ROWINDEXCHANGE=52;nexacro.NormalDataset.REASON_ROWOBJECTCHANGE=53;nexacro.NormalDataset.REASON_BINDSOURCE=90;nexacro.NormalDataset.REASON_BINDDATAOBJECT_UPDATE=70;_pNormalDataset.on_created=function(){if(this.binddataobject&&!this._binddataobject){this._binddataobject=this._findDataObject(this.binddataobject);this._loadDataObject(false);}if(this._p_url==""||this._p_preload==false){if(this._p_colcount>0){this._endLoad(0,"SUCCESS",3);}}if(!nexacro.isDesignMode&&this._p_preload&&!this._is_preloaded){if(this._p_url&&this._p_parent){var _a=[];_a.push("__preload");_a.push(this._p_url);_a.push(this.id);_a.push(this._p_serverdatasetid);var _b=_a.join('_');var _c=nexacro._getServiceLocation(this._p_url);var _d=this._p_parent._load_manager;if(_d){var _e=_d.getPreloadDataModule(this.id);if(_e){var _f=this._p_serverdatasetid;if(!_f){_f="output";}var _g=this.id+"="+_f;var _h=new nexacro.TransactionItem(_c,this._p_parent,_b,"",_g,"",0,true);_h._usewaitcursor=false;_h._loadFromData(_e);this._is_preloaded=true;}}}}if(!this._is_created){this._defaultKeyStr=this._p_keystring;this._defaultFilterStr=this._p_filterstr;}this._is_created=true;};_pNormalDataset.destroy=function(){nexacro.Dataset.prototype.destroy.call(this);this._refform=null;};_pNormalDataset.set_url=function(_a){this._p_url=_a;};_pNormalDataset.set_arguments=function(_a){this._p_arguments=_a;};_pNormalDataset.set_firefirstcount=function(_a){_a=parseInt(_a)|0;if(isFinite(_a)){this.firefirstcount=_a;}};_pNormalDataset.set_firenextcount=function(_a){_a=parseInt(_a)|0;if(isFinite(_a)){this.firenextcount=_a;}};_pNormalDataset.set_progressload=function(_a){this._p_progressload=nexacro._toBoolean(_a);};_pNormalDataset.set_preload=function(_a){this._p_preload=nexacro._toBoolean(_a);};_pNormalDataset.set_serverdatasetid=function(_a){this._p_serverdatasetid=_a;};_pNormalDataset._getRowcount=function(){return this._p_rowcount;};_pNormalDataset.on_notify_onload_dataobject=function(){this._loadDataObject(true,0);};_pNormalDataset.on_notify_onvaluechanged_dataobject=function(_a,_b){if(this._p_dataobjectbindmode=="twoway"){var _c=_b.dataobjectpath;var _d=_b.sourcedatasetid;if(_d==this.id){return;}if(this._isUpdatedBinddata(_c)==false){return;}var _e=_b.index;var _f=_b.value;var _g=this._getColIDFromDataobjectkey(_b.key);this._is_data_updating=true;if(_e==-1){this.loadFromDataObject();}else{var _h=this._p_colinfos[_g];if(_h){var _i=this.__getParsedRow(this._rawRecords[_e]);if(_i){this._setColumn(_e,_i,_h,_f);}}}this._is_data_updating=false;}};_pNormalDataset._getColIDFromDataobjectkey=function(_a){var _b=this._p_colinfos;if(_a){var _c="@."+_a;for(var _f=0,_g=_b.length;_f<_g;_f++ ){var _d=_b[_f];var _e=_d._p_datapath;if(_e){if(_e[0]=="$"&&(("@."+_e)==_c)){return _d.id;}else if(_e==_c){return _d.id;}}}}};_pNormalDataset.on_notify_ondatachanged_dataobject=function(_a,_b){if(this._p_dataobjectbindmode=="twoway"){var _c=false;var _d=false;var _e=this.id;this._is_data_updating=true;var _f=_b.infoarray;if(_f){for(var _u=0,_v=_f.length;_u<_v;_u++ ){var _g=_f[_u];var _h=_g.dataobjectpath;var _i=_g.sourcedatasetid;var _j=_g.index;if(_j==-1){_d=true;break;}if(_i==_e){continue;}if(this._isUpdatedBinddata(_h)==false){continue;}var _k=_g.type;var _l=_g.data;if(_k=="update"){if(_l){var _m=this._rawRecords[_j];this._copyDataObjectRowData(this._rawRecords[_j],_l);this._rawRecords[_j]._orgrow=_m;this._rawRecords[_j]._rtype=4;}}else if(_k=="add"){var _n=this._rawRecords;var _o=this._viewRecords;var _p=_n.length;var _q=[];_q._rawidx=_p;_q._rtype=(this._p_updatecontrol?2:1);_q._level=0;if(_o!=_n){_o[_o.length]=_q;}_n[_p]=_q;this._p_rowcount=_o.length;if(_l){this._addDataObjectRowData(this._rawRecords[_p],_l);}}else if(_k=="insert"){var _o=this._viewRecords;var _n=this._rawRecords;var _q=[];_q._rawidx=_j;_q._rtype=(this._p_updatecontrol?2:1);_q._level=0;var _r;if(_o==_n){_n.splice(_j,0,_q);this._adjustRawIdx(_j,_n.length);}else{_r=_o[_j]._rawidx;_o.splice(_j,0,_q);_n.splice(_r,0,_q);this._adjustRawIdx(_r,_n.length);}this._p_rowcount=_o.length;if(_l){this._addDataObjectRowData(this._rawRecords[_j],_l);}}else if(_k=="delete"){this._deleteRow(_j);}_c=true;}if(_d){this.loadFromDataObject();}else if(_c){var _s=this._p_rowposition;this.on_fire_onrowsetchanged(-1,"SUCCESS",43);var _t=this._p_rowposition;if(_k=="delete"&&_s==this._p_rowposition){if(_t==_j){if(this._p_rowcount==0){this._forcesetRowPosition(-1,51);}else{if(_t==this._p_rowcount){this._forcesetRowPosition(this._p_rowcount-1,51);}else{this._setRowPosition(_t,53,true);}}}else if(_t>_j){this._setRowPosition(_t -1,51);}}else if(_k!="update"){this._setRowPosition(_j,_s==_j?53:51,true);}}}this._is_data_updating=false;}};_pNormalDataset._isUpdatedBinddata=function(_a){var _b=false;var _c=this._p_dataobjectpath;if(_c==_a||_c.indexOf(_a)>-1){_b=true;}return _b;};_pNormalDataset._copyDataObjectRowData=function(_a,_b){var _c=this._p_colinfos;function __copyRowData_loopFn(_e){var _f=this._getPath(_c[_e]._datapath);if(_b[_f]!==undefined){if(typeof _b[_f]=="object"){for(var _g=0;_g<_b[_f].length;_g++ ){_a[_e]=_b[_f][_g];_e++ ;}}else{_a[_e]=_b[_f];}}}var _d=Object.keys(_b).length<_c.length?Object.keys(_b).length:_c.length;nexacro.__forLoop(this,0,_d,__copyRowData_loopFn);};_pNormalDataset._addDataObjectRowData=function(_a,_b){var _c=this._p_colinfos;function __copyRowData_loopFn(_e){var _f=this._getPath(_c[_e]._datapath);_a[_e]=_b[_f];}var _d=_b.length<_c.length?_b.length:_c.length;nexacro.__forLoop(this,0,_d,__copyRowData_loopFn);};_pNormalDataset._getPath=function(_a){if(!_a){return;}var _b=_a[0];if(_b=="@"){return _a[1];}else if(_b=="$"){return _a[1];}};_pNormalDataset._getPathFromColinfo=function(_a){var _b;if(!_a||!_a._p_datapath){return;}var _c=_a._datapath;if(!_c){_c=_a._datapath=_a._p_datapath.match(/[^\]\[.]+/g);}var _d=_c[0];if(_d=="@"){var _e=_c.length;if(_e==2){_b=_c[1];}else if(_e>2){_b="";for(var _f=1;_f<_e;_f++ ){if(_f==1){_b+=_c[_f];}else{_b+='['+_c[_f]+']';}}}}else if(_d=="$"){_b=_a._p_datapath;}return _b;};_pNormalDataset.set_binddataobject=function(_a){if(_a!=this._p_binddataobject){var _b=this._binddataobject;if(_b){_b._removeEventHandler("onload",this.on_notify_onload_dataobject,this);_b._removeBindDataset();}if(!_a){this._binddataobject=null;this._p_binddataobject="";}else{var _c=this._binddataobject=this._findDataObject(_a);if(_c){_c._setEventHandler("onload",this.on_notify_onload_dataobject,this);_c._setEventHandler("ondatachanged",this.on_notify_ondatachanged_dataobject,this);_c._setEventHandler("onvaluechanged",this.on_notify_onvaluechanged_dataobject,this);}this._p_binddataobject=_a;}this.on_apply_binddataobject();}return this._p_binddataobject;};_pNormalDataset.on_apply_binddataobject=function(){if(this._is_created){this._loadDataObject(true,3);}if(this._binddataobject){this._binddataobject._addbindDataset();}};_pNormalDataset.set_dataobjectpath=function(_a){this._p_dataobjectpath=_a;this.on_apply_dataobjectpath();};_pNormalDataset.on_apply_dataobjectpath=function(_a){var _b=this._binddataobject;if(this._is_created&&_b){this._loadDataObject(true,3);}};_pNormalDataset.set_dataobjectbindmode=function(_a){this._p_dataobjectbindmode=_a;};_pNormalDataset.load=function(_a,_b){var _c;if(this._refform){_c=this._refform._getRefFormBaseUrl();}var _d=nexacro._getServiceLocation(this._p_url,_c);if(_d.length&&this._p_parent){var _e="__normaldataset_loadurl_"+this.id;var _f=this._p_parent._load_manager;if(_f){var _g=this._p_serverdatasetid;if(!_g){_g="output";}var _h=this.id+"="+_g;var _i=nexacro._getServiceObject(this._p_url,true);_f.loadDataModule(_d,_e,"",_h,this._p_arguments,null,_a,_b,false,_i);}}else{this._endLoad(-1,"empty url",3);}};_pNormalDataset.append=function(_a){this._append(_a,true,0);};_pNormalDataset._append=function(_a,_b,_c){var _d;if(this._refform){_d=this._refform._getRefFormBaseUrl();}var _e=_a?_a:this._p_url;if(!_e){this._endLoad(-1,"empty url",0);return;}var _f=nexacro._getServiceLocation(_e,_d);if(_f&&_f.length&&this._p_parent){var _g="__normaldataset_appendurl_"+this.id;var _h=this._p_parent._load_manager;if(_h){var _i=this._p_serverdatasetid;if(!_i){_i="output";}var _j=this.id+"="+_i+":P";var _k=nexacro._getServiceObject(_f,true);_h.loadDataModule(_f,_g,"",_j,this._p_arguments,null,_b,_c,false,_k);}}else{this._endLoad(-1,"empty url",0);}};_pNormalDataset.on_preload_data=function(_a,_b,_c,_d,_e,_f,_g,_h){if(_b!=0){nexacro._onHttpSystemError(this,true,this,_d,_a,_e,_f,_g,_h);}else if(_c&&!this._is_preloaded){var _i=[];_i.push("__preload");_i.push(this._p_url);_i.push(this.id);_i.push(this._p_serverdatasetid);var _j=_i.join('_');var _k=this._p_serverdatasetid;if(!_k){_k="output";}var _l=this.id+"="+_k;var _m=new nexacro.TransactionItem(this._p_url,this._p_parent,_j,"",_l,"",0,true);_m._usewaitcursor=false;_m._loadFromData(_c);this._is_preloaded=true;}};_pNormalDataset._findDataObject=function(_a){if(_a&&_a.length>0){var _b;var _c=this._p_parent;if(_c){_b=_c[_a];if(_b&&(_b._type_name=="DataObject")){return _b;}}if(this._refform){_b=this._refform.lookup(_a);if(_b&&(_b._type_name=="DataObject")){return _b;}}}return undefined;};_pNormalDataset._loadDataObject=function(_a,_b){var _c=null;var _d=this._p_binddataobject;var _e=this._binddataobject;if(_d&&!_e){_e=this._binddataobject=this._findDataObject(_d);}if(_e){_c=_e._p_data;}if(this._p_parent._is_created){this._is_created=true;}this._loadFromJSONObject(_c);if(_a!==false&&this._is_created){this._bWorkingstatus=true;this._reFilter();this._resetSortGroup();if(this._eventstat){this.on_fire_onload(0,"SUCCESS",_b?_b:0);if(this._viewRecords&&this._viewRecords.length>0){this._forcesetRowPosition(0,51);}else{this._forcesetRowPosition(-1,51);}}else if(this._viewRecords&&this._viewRecords.length>0){this._p_rowposition=0;}this._bWorkingstatus=false;}if(_b==0||_b==3){var _f=nexacro.Component.prototype._getRootComponent.call(this,this._p_parent);if(_f&&_f._is_view){if(this._p_name==_f._p_viewdataset){var _g=_f._p_parent;var _h=_g._trigger_manager;var _i="";var _j=_f._ismodeltrigger?_f:_g;var _k=_f.getViewDataset();_i="Model Load Success";_h._notifyTrigger(_i,_k,_j);}}}};_pNormalDataset._properties=[{name:"arguments"},{name:"binddataobject"},{name:"colcount",readonly:true},{name:"colinfos",readonly:true},{name:"collation"},{name:"constcount",readonly:true},{name:"dataobjectbindmode"},{name:"dataobjectpath"},{name:"enableevent"},{name:"filterstr"},{name:"keystring"},{name:"loadfiltermode"},{name:"loadkeymode"},{name:"name"},{name:"preload"},{name:"progressload"},{name:"reversesubsum"},{name:"rowcount",readonly:true},{name:"rowposition"},{name:"saveinfinity"},{name:"saveinvaliddate"},{name:"savenan"},{name:"serverdatasetid"},{name:"updatecontrol"},{name:"url"},{name:"useclientlayout"}];nexacro._defineProperties(_pNormalDataset,_pNormalDataset._properties);delete _pNormalDataset;}"use strict";if(!nexacro.DataObject){nexacro.DataObjectLoadEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"onload";this.fromobject=this.fromreferenceobject=_a;this.url=_c;this.reason=_d;};var _pDataObjectLoadEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DataObjectLoadEventInfo);nexacro.DataObjectLoadEventInfo.prototype=_pDataObjectLoadEventInfo;_pDataObjectLoadEventInfo._type_name="DataObjectLoadEventInfo";_pDataObjectLoadEventInfo=null;nexacro.DataObjectErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ErrorEventInfo.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};var _pDataObjectErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.DataObjectErrorEventInfo);nexacro.DataObjectErrorEventInfo.prototype=_pDataObjectErrorEventInfo;_pDataObjectErrorEventInfo._type_name="DataObjectErrorEventInfo";_pDataObjectErrorEventInfo=null;nexacro.DataObjectEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h){this.id=this.eventid=_b||"onload";this.fromobject=this.fromreferenceobject=_a;this.response=_c;this.serviceid=_d;this.url=_e;this.reason=_f;this.cancelable=true;this.method=_g;this.statuscode=_h;};var _pDataObjectEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DataObjectEventInfo);nexacro.DataObjectEventInfo.prototype=_pDataObjectEventInfo;_pDataObjectEventInfo._type_name="DataObjectEventInfo";nexacro.DataObjectDataChangedEventInfo=function(_a,_b,_c,_d,_e){this.id=this.eventid=_b||"ondatachanged";this.fromobject=this.fromreferenceobject=_a;this.infoarray=_e;};var _pDataObjectDataChangedEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DataObjectDataChangedEventInfo);nexacro.DataObjectDataChangedEventInfo.prototype=_pDataObjectDataChangedEventInfo;_pDataObjectDataChangedEventInfo._type_name="DataObjectDataChangedEventInfo";_pDataObjectDataChangedEventInfo=null;nexacro.DataObjectValueChangedEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this.id=this.eventid=_b||"onvaluechanged";this.fromobject=this.fromreferenceobject=_a;this.uid=_d;this.dataobjectpath=_e;this.index=_f;this.key=_g;this.value=_h;this.sourcedatasetid=_i;};var _pDataObjectValueChangedEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DataObjectValueChangedEventInfo);nexacro.DataObjectValueChangedEventInfo.prototype=_pDataObjectValueChangedEventInfo;_pDataObjectValueChangedEventInfo._type_name="DataObjectValueChangedEventInfo";_pDataObjectValueChangedEventInfo=null;nexacro.DataObjectLoadDatasetsEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"onloaddatasets";this.fromobject=this.fromreferenceobject=_a;this.reason=_c;};var _pDataObjectLoadDatasetsEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DataObjectLoadDatasetsEventInfo);nexacro.DataObjectLoadDatasetsEventInfo.prototype=_pDataObjectLoadDatasetsEventInfo;_pDataObjectLoadDatasetsEventInfo._type_name="DataObjectLoadDatasetsEventInfo";_pDataObjectLoadDatasetsEventInfo=null;nexacro.DataObject=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);this._context_list=[];this._updatelist=[];this._remaining_updatelist=[];};var _pDataObject=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.DataObject);nexacro.DataObject.prototype=_pDataObject;_pDataObject._type_name="DataObject";_pDataObject._p_url="";_pDataObject._p_enableevent=true;_pDataObject._p_preload=false;_pDataObject._p_data=null;_pDataObject._isData=true;_pDataObject._is_preloaded=false;_pDataObject._response=undefined;_pDataObject._response_headers=undefined;_pDataObject._bindcount=0;_pDataObject._event_list={"onsuccess":1,"onload":1,"onerror":1,"ondatachanged":1,"onvaluechanged":1,"onloaddatasets":1};nexacro.DataObject.REASON_LOAD=0;nexacro.DataObject.REASON_LOADCONTENT=1;nexacro.DataObject.REASON_REQUEST=2;_pDataObject.create=function(){};_pDataObject.on_created=function(){if(this._p_url==""||this._p_preload==false){if(this._p_data){this._endLoad(0,"SUCCESS",1);}}if(!nexacro.isDesignMode&&this._p_preload&&!this._is_preloaded){if(this._p_url&&this._p_parent){var _a=[];_a.push("__preload");_a.push(this._p_url);_a.push(this.id);_a.push(this._p_serverdatasetid);var _b=_a.join('_');var _c=nexacro._getServiceLocation(this._p_url);var _d=this._p_parent._load_manager;if(_d){var _e=_d.getPreloadDataObjectModule(this.id);if(_e){var _f=new nexacro.RESTAPIItem(_c,this._p_parent,_b,"",this,"",0,true);_f._usewaitcursor=false;_f._loadFromDataObject(_e,this);this._is_preloaded=true;}}}}this._is_created=true;};_pDataObject.destroy=function(){this._p_data=null;this._context_list=null;this._is_created=null;this._response=null;this._response_headers=null;if(this._p_parent){this._p_parent.removeChild(this.id);}this._p_parent=null;this._updatelist.length=0;this._updatelist=null;this._bindcount=0;nexacro._EventSinkObject.prototype.destroy.call(this);};_pDataObject.set_data=function(_a){try{if(_a){if(typeof _a=="string"){this._p_data=JSON.parse(_a);}else if(typeof _a=="object"){this._p_data=_a;}}if(!this._p_data){this._p_data=undefined;}}catch(err){this._p_data=undefined;}finally{this.on_apply_data();}};_pDataObject.on_apply_data=function(){this._endLoad(0,"SUCCESS",1);};_pDataObject.set_url=function(_a){if(this._p_url!=_a){this._p_url=_a;this.on_apply_url();}};_pDataObject.on_apply_url=function(){};_pDataObject.set_preload=function(_a){this._p_preload=nexacro._toBoolean(_a);};_pDataObject.set_enableevent=function(_a){_a=nexacro._toBoolean(_a);if(this._p_enableevent!=_a){this._p_enableevent=_a;this._eventstat=(_a&&!this.loadstatus);this.on_apply_enableevent(_a);}};_pDataObject.on_apply_enableevent=function(_a){if(_a){this._before_fire_event=true;this.on_fire_ondatachanged(-1,-1,41,this._updatelist);this._before_fire_event=false;}};_pDataObject._properties=[{name:"url"},{name:"enableevent"},{name:"preload"},{name:"data"}];nexacro._defineProperties(_pDataObject,_pDataObject._properties);_pDataObject.serializeToString=function(_a,_b){var _c=this._p_data;if(_c){return JSON.stringify(_c,_a,_b);}return "";};_pDataObject.load=function(_a){var _b=this._p_url;var _c;_a=_a===undefined?true:_a;if(this._refform){_c=this._refform._getRefFormBaseUrl();}_b=nexacro._getServiceLocation(_b,_c);if(_b.length&&this._p_parent){var _d="";var _e=this._p_parent._load_manager;if(_e){var _f=nexacro._getServiceObject(this._p_url,true);_e.loadDataObjectModule(_b,_d,"",this,null,_a,undefined,false,_f);}}else{this._endLoad(-1,"empty url",1);}};_pDataObject.getObject=function(){return this._p_data;};_pDataObject.getObjectByPath=function(_a){return this._jsonPath(_a);};_pDataObject.request=function(_a,_b,_c,_d){var _e;if(this._refform){_e=this._refform._getRefFormBaseUrl();}var _f=nexacro._getServiceLocation(_c,_e);if(_c.length&&this._p_parent){var _g=this._p_parent._load_manager;if(_g){var _h=nexacro._getServiceObject(_c,true);var _i=_d&&_d.async!=undefined?_d.async:true;_g.loadDataObjectModule(_f,_a,_b,this,_d,_i,undefined,false,_h);}}else{this._endLoad(-1,"empty url",1);}};_pDataObject.getAllResponseHeaders=function(){if(this._response_headers){return this._parseResponseHeaders(this._response_headers);}return undefined;};_pDataObject.getResponseHeader=function(_a){if(this._response_headers){return this._parseResponseHeaders(this._response_headers,_a);}return null;};_pDataObject.getResponse=function(){return this._response;};_pDataObject.setDataValue=function(_a,_b,_c,_d,_e){if(_c==-1){this._setPathValue(_d,_b);this._before_fire_event=true;this.on_fire_onvaluechanged(0,"SUCCESS",16,"update_"+parseInt(nexacro._random()* 100000000),"",_c,_d,_b,_e);this._before_fire_event=false;}else{var _f=this.getObjectByPath(_a);if(_f){var _g=_f[_c];if(_g){var _h="update_"+parseInt(nexacro._random()* 100000000);this._setValueInKey(_g,_d,_b);this._updatelist.push({"uid":_h,"type":"update","index":_c,"data":_g,"dataobjectpath":_a,"sourcedatasetid":_e});if(this.enableevent){this._before_fire_event=true;this.on_fire_onvaluechanged(0,"SUCCESS",1,_h,_a,_c,_d,_b,_e);this._before_fire_event=false;}}}}};_pDataObject.setDataInPath=function(_a,_b,_c,_d){var _e=false;var _f=this.getObjectByPath(_a);if(_f){if(_b.length>0){var _g=this._updatelist;for(var _m=0,_n=_b.length;_m<_n;_m++ ){var _h=_b[_m];var _i=_h[0];var _c=_h[1];var _j=_h[2];var _k;if(_i=="update"){if(_e==true){_f=this.getObjectByPath(_a);_e=false;}_k=_f[_c];this._copyRowData(_k,_j);}else if(_i=="add"){_k=this._addRowData(_a,_j);_e=true;}else if(_i=="delete"){_k=this._deleteRowData(_a,_c);_e=true;}else if(_i=="insert"){_k=this._addRowData(_a,_j,_c);_e=true;}_g.push({"uid":_i+"_"+parseInt(nexacro._random()* 100000000),"type":_i,"index":_c,"data":_k,"dataobjectpath":_a,"sourcedatasetid":_d});}}else{var _l=_f[_c];this._copyRowData(_l,_b);this._updatelist.push({"uid":"update"+"_"+parseInt(nexacro._random()* 100000000),"type":"update","index":_c,"data":_l,"dataobjectpath":_a,"sourcedatasetid":_d});}if(this.enableevent){this._before_fire_event=true;this.on_fire_ondatachanged(0,"SUCCESS",1,this._updatelist);this._before_fire_event=false;}}};_pDataObject.addDataInPath=function(_a,_b,_c,_d){var _e=this.getObjectByPath(_a);if(_e){var _f=this._addRowData(_a,_b,_c);this._updatelist.push({"uid":"add"+"_"+parseInt(nexacro._random()* 100000000),"type":"add","index":_c,"data":_f,"dataobjectpath":_a,"sourcedatasetid":_d});if(this.enableevent&&_f){this._before_fire_event=true;this.on_fire_ondatachanged(0,"SUCCESS",1,this._updatelist);this._before_fire_event=false;}}};_pDataObject.deleteDataInPath=function(_a,_b,_c,_d){var _e=this.getObjectByPath(_a);if(_e){var _f=this._deleteRowData(_a,_c);this._updatelist.push({"uid":"delete"+"_"+parseInt(nexacro._random()* 100000000),"type":"delete","index":_c,"data":_f,"dataobjectpath":_a,"sourcedatasetid":_d});if(this.enableevent&&_f){this._before_fire_event=true;this.on_fire_ondatachanged(0,"SUCCESS",1,this._updatelist);this._before_fire_event=false;}}};_pDataObject.insertDataInPath=function(_a,_b,_c,_d){var _e=this.getObjectByPath(_a);if(_e){var _f=this._addRowData(_a,_b,_c);this._updatelist.push({"uid":"insert"+"_"+parseInt(nexacro._random()* 100000000),"type":"insert","index":_c,"data":_f,"dataobjectpath":_a,"sourcedatasetid":_d});if(this.enableevent&&_f){this._before_fire_event=true;this.on_fire_ondatachanged(0,"SUCCESS",1,this._updatelist);this._before_fire_event=false;}}};_pDataObject.setData=function(_a,_b,_c,_d,_e){var _f;var _g=this.getObjectByPath(_a);if(_b=="update"){_f=_g[_c];this._copyRowData(_f,_d);}else if(_b=="add"){_f=this._addRowData(_a,_d,_c);}else if(_b=="delete"){_f=_d=this._deleteRowData(_a,_c);}else if(_b=="insert"){_f=this._addRowData(_a,_d,_c);}this._updatelist.push({"uid":_b+"_"+parseInt(nexacro._random()* 100000000),"type":_b,"index":_c,"data":_d,"dataobjectpath":_a,"srcdatasetid":_e});if(this.enableevent&&_f){this._before_fire_event=true;this.on_fire_ondatachanged(0,"SUCCESS",1,this._updatelist);this._before_fire_event=false;}};_pDataObject.setDataList=function(_a,_b,_c){var _d=false;var _e;var _f=this._updatelist;var _g=this.getObjectByPath(_a);if(_g){for(var _l=0,_m=_b.length;_l<_m;_l++ ){var _h=_b[_l];var _i=_h[0];var _j=_h[1];var _k=_h[2];if(_i=="update"){_e=_g[_j];this._copyRowData(_e,_k);}else if(_i=="add"){_e=this._addRowData(_a,_k);}else if(_i=="delete"){_e=this._deleteRowData(_a,_j);}else if(_i=="insert"){_e=this._addRowData(_a,_k,_j);}_f.push({"uid":_i+"_"+parseInt(nexacro._random()* 100000000),"type":_i,"index":_j,"data":_e,"dataobjectpath":_a,"srcdatasetid":_c});if(this.enableevent){_d=true;}}}if(_d){this._before_fire_event=true;this.on_fire_ondatachanged(0,"SUCCESS",1,_f,_c);this._before_fire_event=false;}};_pDataObject.getChangedInfo=function(){if(this._before_fire_event){return this._remaining_updatelist;}return this._appendArray(this._updatelist,this._remaining_updatelist);};_pDataObject.clearChangedInfo=function(){this._updatelist.length=0;this._remaining_updatelist.length=0;};_pDataObject.removeChangedInfo=function(_a){var _b=this._remaining_updatelist;for(var _c=0,_d=_b.length;_c<_d;_c++ ){if(_b[_c].uid=_a){_b.splice(_c,1);return _a;}}var _b=this._updatelist;for(var _c=0,_d=_b.length;_c<_d;_c++ ){if(_b[_c].uid=_a){_b.splice(_c,1);return _a;}}return false;};_pDataObject.on_fire_onload=function(_a,_b,_c,_d){if(_a>=0){_a=0;_b="SUCCESS";}var _e=this.onload;if(_e&&_e._has_handlers){var _f=new nexacro.DataObjectLoadEventInfo(this,"onload",_d,_c);_e._fireEvent(this,_f);}};_pDataObject.on_fire_ondatachanged=function(_a,_b,_c,_d){if(_a>=0){_a=0;_b="SUCCESS";}var _e=this.ondatachanged;if(_e&&_e._has_handlers){var _f=new nexacro.DataObjectDataChangedEventInfo(this,"ondatachanged","",_c,_d);_e._fireEvent(this,_f);}this._remaining_updatelist=this._appendArray(this._updatelist,this._remaining_updatelist);this._updatelist.length=0;};_pDataObject.on_fire_onvaluechanged=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){if(_a>=0){_a=0;_b="SUCCESS";}var _j=this.onvaluechanged;if(_j&&_j._has_handlers){var _k=new nexacro.DataObjectValueChangedEventInfo(this,"onvaluechanged",_c,_d,_e,_f,_g,_h,_i);_j._fireEvent(this,_k);}this._remaining_updatelist=this._appendArray(this._updatelist,this._remaining_updatelist);this._updatelist.length=0;};_pDataObject.on_fire_onsuccess=function(_a,_b,_c,_d,_e,_f){var _g=this.onsuccess;if(_g&&_g._has_handlers){var _h=new nexacro.DataObjectEventInfo(this,"onsuccess",_a,_b,_c,_d,_e,_f);_g._fireEvent(this,_h);}};_pDataObject.on_fire_onerror=function(_a,_b,_c,_d,_e,_f,_g){if(this.onerror&&this.onerror._has_handlers){var _h=new nexacro.DataObjectErrorEventInfo(this,"onerror",_a,_b,_c,_d,_e,_f,_g);return this.onerror._fireEvent(this,_h);}return true;};_pDataObject.on_fire_onloaddatasets=function(_a,_b,_c){if(this.onloaddatasets&&this.onloaddatasets._has_handlers){var _d=new nexacro.DataObjectLoadDatasetsEventInfo(this,"onloaddatasets",_c);return this.onloaddatasets._fireEvent(this,_d);}return true;};_pDataObject._on_success=function(_a,_b,_c,_d,_e,_f){var _g=this;var _h=this.on_fire_onsuccess(_a,_b,_c,2,_e,_f);if(!_g.onsuccess||(_g.onsuccess&&!_g.onsuccess.defaultprevented)&&_e!="HEAD"){this.on_onsuccess_default_action(_d,_c);}return _h;};_pDataObject.on_onsuccess_default_action=function(_a,_b){this._setContents(_a,2,_b);};_pDataObject._setContents=function(_a,_b,_c){if(_a){if(typeof _a=="string"){this._p_data=JSON.parse(_a);}else{this._p_data=_a;}this._endLoad(0,"SUCCESS",_b!=undefined?_b:1,_c?_c:"");}};_pDataObject._parse=function(_a){return JSON.parse(_a);};_pDataObject._jsonPath=function(_a){var _b=this._p_data;if(_b){return nexacro._JSONPath(_b,_a);}else{return null;}};_pDataObject._endLoad=function(_a,_b,_c,_d){this.on_fire_onload(_a,_b,_c,_d);var _e=this._is_created?true:this.parent&&this.parent._is_created;if(_e&&this._p_data){if(this._bindcount>0){this.on_fire_onloaddatasets(_a,_b,_c);}this._is_created=true;}};_pDataObject.on_preload_dataobject=function(_a,_b,_c,_d,_e,_f,_g,_h){if(_b!=0){this._onDataObjectRequestError(this,true,this,_d,_a,_e,_f,_g,_h);}else if(_c&&!this._is_preloaded){var _i=[];_i.push("__preload");_i.push(this._p_url);_i.push(this.id);_i.push(this._p_serverdatasetid);var _j=_i.join('_');var _k=new nexacro.RESTAPIItem(this._p_url,this._p_parent,_j,"",this,"",0,true);_k._usewaitcursor=false;_k._loadFromDataObject(_c,this);this._is_preloaded=true;}};_pDataObject._onDataObjectRequestError=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){var _m=false;var _n=nexacro.MakeCommunicationError(this,_d,_e,_f,_g,_h,_i);this._addResponseInfo(_k,_l);if(_b){var _o=nexacro.getEnvironment();if(_o){_m=_o.on_fire_onerror(_a,"ObjectError",_n.message,_c,_f,_g,_h,_j);}if(!_m){_m=this.on_fire_onerror("ObjectError",_n.message,_c,_f,_g,_h,_j);}}return _m;};_pDataObject._addResponseInfo=function(_a,_b){this._response=_a;this._response_headers=_b;};_pDataObject._clearResponseInfo=function(){this._response=undefined;this._response_headers=undefined;};_pDataObject._parseResponseHeaders=function(_a,_b){var _c=_a.trim().replace(/\0[\s\S]*$/g,'').split(/[\r\n]+/);var _d={};if(_b){_b=_b.toLowerCase();}for(var _i=0;_i<_c.length;_i++ ){var _e=_c[_i].split(': ');if(_e){var _f=_e[0];if(_f&&_f.indexOf("HTTP/")>-1){continue;}var _g=_e.shift();if(_g){if(_b){var _h=_g;_h=_h.toLowerCase();if(_h==_b){return _e.pop();}}_d[_g]=_e.join(': ');}}}if(_b){return null;}return _d;};_pDataObject._appendArray=function(_a,_b){return _b.concat(_a);};_pDataObject._getAbsolutePathByDataobectpath=function(_a){var _b="";var _c=_a.match(/[^\]\[.]+/g);if(_c){for(var _d=1,_e=_c.length;_d<_e;_d++ ){_b=_b+"/"+_c[_d];}return _b;}return _b;};_pDataObject._copyRowData=function(_a,_b){for(var _d in _b){if(typeof _b[_d]=="object"&&_b[_d]!=null){this._copyRowData(_a[_d],_b[_d]);}else if(_d[0]=="$"){var _c=this.getObjectByPath(_d);if(_c&&_c[0]){_c[0]=_b[_d];}}else{_a[_d]=_b[_d];}}};_pDataObject._addRowData=function(_a,_b,_c){if(!this._p_data){return false;}var _d=this._getRootObjectByPath(_a);if(!_d){return false;}var _e={};for(var _f in _b){if(typeof _b[_f]=="object"&&_b[_f]!=null){this._copyRowData(_e[_f],_b[_f]);}else{_e[_f]=_b[_f];}}if(_c>-1){_d.splice(_c,0,_e);}else{_d.push(_e);}return _e;};_pDataObject._deleteRowData=function(_a,_b){var _c=this._getRootObjectByPath(_a);if(!_c){return false;}return _c.splice(_b,1)[0];};_pDataObject._deleteAllRowData=function(_a){var _b=this._getRootObjectByPath(_a);if(!_b){return false;}_b.length=0;};_pDataObject._getPath=function(_a){var _b=_a[0];if(_b=="@"){return _a[1];}else if(_b=="$"){}};_pDataObject._getRootObjectByPath=function(_a){var _b=this._p_data;var _c;if(_b){_a=_a.slice(0,_a.lastIndexOf("["));var _d=_a.match(/[^\]\[.]+/g);var _c=_b;if(_d.length>1){for(var _e=1,_f=_d.length;_e<_f;_e++ ){_c=_c[_d[_e]];}return _c;}}return _c;};_pDataObject._setValueInKey=function(_a,_b,_c){var _d=_b.match(/[^\]\[.]+/g);if(_d.length>0){if(_b.indexOf("@")>-1||_b.indexOf("$")>-1){var _e=[];for(var _f=1,_g=_d.length;_f<_g;_f++ ){if(_f==_g -1){if(_d.length>2){_a[_d[_f -1]][_d[_f]]=_c;}else{_a[_d[_f]]=_c;}}else{_e=_a[_d[_f]];if(!_e){_a[_d[_f]]={};_e=_a=_a[_d[_f]];}}}}else{for(var _f=0,_g=_d.length;_f<_g;_f++ ){if(_f==_g -1){_a[_d[_f]]=_c;}else{_a=_a[_d[_f]];}}}}else{_a[_b]=_c;}};_pDataObject._setPathValue=function(_a,_b){var _c=this._p_data;if(_c){var _d=_a.match(/[^\]\[.]+/g);for(var _e=1;_e<_d.length-1;_e++ ){_c=_c[_d[_e]];}if(_c){_c[_d[_e]]=_b;}}};_pDataObject._addbindDataset=function(){this._bindcount++ ;};_pDataObject._removeBindDataset=function(){this._bindcount-- ;};_pDataObject=null;nexacro.RESTAPIItem=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){nexacro._CommunicationItem.call(this,_a,this.type,false,_i,_j);this.context=_b;this.method=_d;this.svcid=_c;this.outputdataobj=this._parseDOParam(_e);this.JSONParm=_f;this._parseJSONParam();this.datatype=(!_g?0:_g);this._sendData=this._serializeData();this._usewaitcursor=_h&&nexacro._usewaitcursor;this._remain_data=null;this._progress_data=null;this._is_unknowntype_data=false;this._recieved_data=null;this._async_progress_timer_id=null;this._check_responseXML=false;var _k=nexacro._hasCookieVariables();};var _pRESTAPIItem=nexacro._createPrototype(nexacro.TransactionItem,nexacro.RESTAPIItem);nexacro.RESTAPIItem.prototype=_pRESTAPIItem;_pRESTAPIItem.handle=null;_pRESTAPIItem.callbackList=[];_pRESTAPIItem.type="dataobject";_pRESTAPIItem.bcache=false;_pRESTAPIItem._type_name="RESTAPIItem";_pRESTAPIItem.on_load_dataobject=function(_a,_b,_c,_d,_e){var _f=this.outputdataobj;var _g;var _h=this.bcache;var _i=null;var _j=null;this._addCookieToCookieVariable(_b);if(_a&&_a._type_name=="DataObjectCache"){_h=false;_i=_a._loadDataObject(this);_g=_i[0];_a=_i[2];_j=_i[3];}else{if(_f){_f._addResponseInfo(_a,_d);}if(_a&&this._protocol<0){_a=this.on_decrypt(_a);}_i=this._deserializeData(_a);if(_h){_f=_i[1];}_g=_i[0];_j=_i[2];}if(_h){var _k=nexacro._DataObjectCacheList[this.path];if(!_k){nexacro._DataObjectCacheList[this.path]=new nexacro._DataObjectCache(_f,_c,this.version,_a,_d);}else{_k.dataobject=_f;_k.last_modified=_c?_c:"";_k.version=this.version;_k.data=_a;}}if(this._usewaitcursor){this._hideWaitCursor(this.context);}nexacro._removeCommContext(this.context);var _l=nexacro.getApplication();if(_l){_l.on_fire_oncommunication(_l,1);}var _m=this.callbackList;var _n=_m.length;if(_n>0){var _o=_g?_g[0]:0;var _p=_g?_g[1]:"SUCCESS";var _q=this.context._load_manager;var _r=_q?_q.getDataItem(this.svcid):null;if(_r){_r._is_cancel=undefined;}for(var _v=0;_v<_n;_v++ ){var _s=_m[_v];var _t=_s.target;if(_t._is_alive!=false){if(this._is_unknowntype_data){_s.callback.call(_t,this.svcid,_o,_p,"comm_fail_loaddetail",10599,this.path,this.path);}else{_s.callback.call(_t,this.svcid,_o,_a);}}}_m.splice(0,_n);}var _u=this.method;if(_f){if(_u){_f._on_success(_a,this.svcid,this.path,_j,_u,_e);}else{_f._setContents(_j,0,this.path);}_f._clearResponseInfo();}this.handle=null;};_pRESTAPIItem._parseDOParam=function(_a){var _b;if(_a){if(typeof _a=="object"){_b=_a;}else if(this.context){_b=this.context[_a];}}return _b;};_pRESTAPIItem._parseJSONParam=function(){var _a=this.JSONParm;if(!_a){return;}if(_a.postdata){this.postdata=_a.postdata;}if(_a.httpheader){this.header=_a.httpheader;}};_pRESTAPIItem._deserializeData=function(_a){if(!_a){return [[-1,"Stream Data is null!"],[],new nexacro.Collection()];}if(_a.charAt(0)==" "){_a=_a.trim();}return this.__deserializeJSON(_a);};_pRESTAPIItem._loadFromDataObject=function(_a,_b){var _c=this._deserializeData(_a);var _d=0;var _e="SUCCESS";var _f=this.bcache;var _g=this.last_modified;var _h=_c[0];if(_h){_d=_h[0];_e=_h[1];}if(_f){_b=_c[1];var _i=nexacro._DataObjectCacheList[this.path];if(!_i){nexacro._DataObjectCacheList[this.path]=new nexacro._DataObjectCache(_b,_g,this.version);}else{_i.dataobject=_b;_i.last_modified=_g?_g:"";_i.version=this.version;}}var _j=_c[2];var _k=this.callbackList;var _l=_k.length;if(_l>0){for(var _p=0;_p<_l;_p++ ){var _m=_k[_p];var _n=_m.target;if(_n._is_alive!=false){_m.callback.call(_n,this.svcid,_d,_e);}}_k.splice(0,_l);}var _o=this.method;if(_b){if(_o){_b._on_success(_a,this.svcid,this.path,_j,_o);}else{_b._setContents(_j,0,this.path);}_b._clearResponseInfo();}this.handle=null;};_pRESTAPIItem.__deserializeJSON=function(_a,_b){var _c=0;var _d="SUCCESS";var _e=this.outputdataobj?this.outputdataobj:null;var _f;if(_a.length>0){try{_f=JSON.parse(_a);}catch(e){this._is_unknowntype_data=true;return [[-1,"invalid nexacro communication format"],_e];}}var _g=[_c,_d];return [_g,_e,_f];};_pRESTAPIItem.on_error=function(_a,_b,_c,_d,_e,_f,_g){var _h=this.outputdataobj;if(this._usewaitcursor){this._hideWaitCursor(this.context);}var _i=this.callbackList;var _j=_i.length;var _k=false;if(_j>0){for(var _q=0;_q<_j;_q++ ){var _l=_i[_q];var _m=_l.target;if(_m._is_alive!=false){_k=_l.callback.call(_m,this.svcid,-1,"FAILED",_b,_c,this.path,_d,_e,_h,_f,_g);if(_k){if(this._usewaitcursor){this._showWaitCursor(this.context);}continue;}}}if(_k){return true;}}var _n=this.context._load_manager;var _o=_n?_n.getDataItem(this.svcid):null;if(_o&&!_o._is_cancel){return;}_i.splice(0,_j);nexacro._removeCommContext(this.context);var _p=nexacro.getApplication();if(_p){_p.on_fire_oncommunication(_p,1);}this.handle=null;};_pRESTAPIItem=null;}if(!nexacro.DomParser){nexacro.DomParseErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.id=this.eventid=_b||"onerror";this.fromobject=this.fromreferenceobject=_a;this.level=_c;this.line=_d;this.column=_e;this.message=_f;this.description=_g;};var _pDomParseErrorEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.DomParseErrorEventInfo);nexacro.DomParseErrorEventInfo.prototype=_pDomParseErrorEventInfo;_pDomParseErrorEventInfo._type_name="DomParseErrorEventInfo";delete _pDomParseErrorEventInfo;nexacro.DomParser=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);};var _pDomParser=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.DomParser);nexacro.DomParser.prototype=_pDomParser;_pDomParser._type_name="DomParser";_pDomParser._event_list={"onerror":1};_pDomParser._keepIgnorableWhitespace=false;_pDomParser.parseFromString=function(_a,_b){if(!_b||_b=="text/xml"){var _c=nexacro._parseXMLDocument(_a,this._keepIgnorableWhitespace);if(_c){var _d=nexacro._getParserError(_c);if(_d){this.on_fire_onparseerror("error",_d.line,_d.column,_d.message,_d.desc);return null;}}return _c;}return null;};_pDomParser.on_fire_onparseerror=function(_a,_b,_c,_d,_e){if(this.onerror&&this.onerror._has_handlers){var _f=new nexacro.DomParseErrorEventInfo(this,"onerror",_a,_b,_c,_d,_e);return this.onerror._fireEvent(this,_f);}return false;};delete _pDomParser;nexacro.XmlSerializer=function(_a,_b){this.id=this.name=_a;this.parent=_b;};var _pXmlSerializer=nexacro._createPrototype(nexacro.Object,nexacro.XmlSerializer);nexacro.XmlSerializer.prototype=_pXmlSerializer;_pXmlSerializer.serializeToString=function(_a){return nexacro._documentToXml(_a);};delete _pXmlSerializer;}if(!nexacro._IconText){nexacro._IconText=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pIconText=nexacro._createPrototype(nexacro.Component,nexacro._IconText);nexacro._IconText.prototype=_pIconText;_pIconText._type_name="IconText";_pIconText._cell_elem=null;_pIconText._p_text="";_pIconText._p_icon="";_pIconText._p_iconPosition="";_pIconText._p_textPadding="";_pIconText._p_textwidth=undefined;_pIconText._p_tabstop=false;_pIconText._textpadding=null;_pIconText._is_focus_accept=false;_pIconText._is_simple_control=true;_pIconText._is_eventinfo_control=false;_pIconText._is_fiticonsize=false;_pIconText._icon_width=0;_pIconText._icon_height=0;_pIconText._p_accessibilityrole="none";_pIconText.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._cell_elem=new nexacro.IconTextElement(_a,"icontext",this._is_fiticonsize);_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(_a.client_width,_a.client_height);if(this._p_textAlign){_b.setElementTextAlign(this._p_textAlign);}if(this._p_verticalAlign){_b.setElementVerticalAlign(this._p_verticalAlign);}var _c=this._getCSSStyleValue("wordWrap");if(_c){_b.setElementCSSMapInfo(_c);}if(this._p_wordWrap){_b.setElementWordWrap(this._p_wordWrap);}var _d=this._textpadding||this._getCSSStyleValue("textPadding");if(_d){_b.setElementTextPadding(_d);}if(this._p_textwidth!=null){_b.setElementTextWidth(this._p_textwidth);}if(this._textdecoration){_b.setElementTextDecoration(this._textdecoration);}if(this._displaytext){_b.setElementText(this._displaytext);}var _e=this._icon||this._getCSSStyleValue("icon");if(_e){_b.setElementIcon(_e);}var _f=this._p_iconPosition||this._getCSSStyleValue("iconPosition");_b.setElementIconPos(_f);if(this._p_fittocontents!="none"){this._on_apply_fittocontents();}}};_pIconText.on_created_contents=function(_a){if(this._p_expr){this._on_apply_expr(this._p_expr);}if(this._p_fittocontents!="none"){this._update_position();}var _b=this._cell_elem;if(_b){_b.create(_a);}if(nexacro._enableaccessibility){this._on_created_accessibility_contents(_a);}};_pIconText.on_destroy_contents=function(){var _a=this._cell_elem;if(_a){_a.destroy();this._cell_elem=null;}if(this._textpadding){this._textpadding=null;}if(this._icon){this._icon=null;}};_pIconText.on_create_contents_command=function(){if(this._p_expr){this._on_apply_expr(this._p_expr);}var _a=this._cell_elem;if(_a){return _a.createCommand();}return "";};_pIconText.on_attach_contents_handle=function(_a){var _b=this._cell_elem;if(_b){_b.attachHandle(_a);}if(this._p_fittocontents!="none"){this._update_position();}};_pIconText.on_change_containerRect=function(_a,_b){if(this._is_created_contents){var _c=this._cell_elem;_c.setElementSize(_a,_b);}};_pIconText.on_change_containerPos=function(_a,_b){if(this._is_created_contents){var _c=this._cell_elem;_c.setElementPosition(_a,_b);}};_pIconText.on_apply_status=function(_a,_b){var _c=this._cell_elem;if(_c){if(!this._p_textPadding){_c.setElementTextPadding(this._getCSSStyleValue("textPadding",_a,_b));}if(!this._p_icon){_c.setElementIcon(this._getCSSStyleValue("icon",_a,_b));}if(!this._p_iconPosition){_c.setElementIconPos(this._getCSSStyleValue("iconPosition",_a,_b));}var _d=this._getCSSStyleValue("wordWrap",_a,_b);if(_d){_c.setElementCSSMapInfo(_d);}}};_pIconText.on_get_accessibility_label=function(){return this._p_text;};_pIconText._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=_b;var _g=_c;var _h;if(this._displaytext&&this._displaytext!==""){_h=this._displaytext;}else{_h=this._p_text;}if(_h){var _i=this._getCurrentStyleInheritValue("font");var _j=this._getReferenceAbsoluteFont(_i);var _k=this._getCurrentStyleInheritValue("wordSpacing");var _l=this._getCurrentStyleInheritValue("letterSpacing");var _m="none";var _n;var _o=false;if(_h.search("\n")>-1){_o=true;}if(this._p_fittocontents=="height"){_m=this._p_wordWrap||this._getCSSStyleValue("wordWrap");if(_m&&_m!="none"){_o=true;}_n=this._adjust_width-_b;}var _p=nexacro._getTextSize(_h,_i,_o,_n,_m,_k,_l,undefined,undefined,undefined,_j);_b+=Math.ceil(this._p_textwidth!=null?this._p_textwidth:_p[0]);_c+=Math.ceil(_p[1]);}var _q=this._icon||this._getCSSStyleValue("icon");if(_q){var _r=this._textpadding||this._getCSSStyleValue("textPadding");var _s=this._p_iconPosition||this._getCSSStyleValue("iconPosition");var _t;if(this._icon_width!=0&&this._icon_height!=0){_t={width:this._icon_width,height:this._icon_height};}else{_t=nexacro._getImageSize(_q.url,this._on_icon_onload,this,undefined,this.image)||{width:this._icon_width,height:this._icon_height};}if(_s=="top"||_s=="bottom"){_c+=_t.height;_b=Math.max(_b,_t.width+_f);}else{_b+=_t.width;_c=Math.max(_c,_t.height+_g);}if(_r){_b+=_r.left+_r.right;_c+=_r.top+_r.bottom;}}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pIconText._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pIconText.set_icon=function(_a){this._p_icon=_a;if(_a){if(this._icon==null||this._icon.value!=_a){var _b=nexacro.UrlObject(_a,this);this._icon=_b;this.on_apply_icon(_b);}}else{if(this._icon){this._icon=null;this.on_apply_icon(null);}}this._icon_width=0;this._icon_height=0;};_pIconText.on_apply_icon=function(_a){var _b=this._cell_elem;if(_b){_b.setElementIcon(_a||this._getCSSStyleValue("icon",this._status,this._userstatus));}};_pIconText.set_iconPosition=function(_a){if(this._p_iconPosition!=_a){this._p_iconPosition=_a;this.on_apply_iconPosition(_a);}};_pIconText.on_apply_iconPosition=function(_a){var _b=this._cell_elem;if(_b){_b.setElementIconPos(_a||this._getCSSStyleValue("iconPosition",this._status,this._userstatus));}};_pIconText.set_textPadding=function(_a){this._p_textPadding=_a;if(_a){if(this._textpadding==null||this._textpadding.value!=_a){var _b=nexacro.PaddingObject(_a);this._textpadding=_b;this.on_apply_textPadding(_b);}}else{if(this._textpadding){this._textpadding=null;this.on_apply_textPadding(null);}}};_pIconText.on_apply_textPadding=function(_a){var _b=this._cell_elem;if(_b){_b.setElementTextPadding(_a||this._getCSSStyleValue("textPadding",this._status,this._userstatus));}};_pIconText.set_textwidth=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_textwidth!=_a){this._p_textwidth=_a;this.on_apply_textwidth(_a);}};_pIconText.on_apply_textwidth=function(_a){var _b=this._cell_elem;if(_b){_b.setElementTextWidth(_a);}};_pIconText.on_apply_text=function(_a){var _b=this._cell_elem;if(_b){_b.setElementText(_a);}if(nexacro._enableaccessibility){this._setAccessibilityLabel(this._getAccessibilityLabel());}};_pIconText.on_apply_textAlign=function(_a){var _b=this._cell_elem;if(_b){_b.setElementTextAlign(_a);}};_pIconText.on_apply_verticalAlign=function(_a){var _b=this._cell_elem;if(_b){_b.setElementVerticalAlign(_a);}};_pIconText.on_apply_wordWrap=function(_a){if(!this._isEnableRedraw()){return;}var _b=this._cell_elem;if(_b){_b.setElementWordWrap(_a);if(this._p_fittocontents!="none"){this._update_position();}}};_pIconText.on_apply_textDecoration=function(_a){if(!this._isEnableRedraw()){return;}var _b=this._cell_elem;if(_b){_b.setElementTextDecoration(_a);}};_pIconText._properties=[{name:"icon"},{name:"iconPosition"},{name:"textPadding"},{name:"textwidth"}];nexacro._defineProperties(_pIconText,_pIconText._properties);_pIconText._on_icon_onload=function(_a,_b,_c){if(this._p_fittocontents!=="none"&&(this._icon_width!=_b||this._icon_height!=_c)){this._icon_width=_b;this._icon_height=_c;this._update_position();}};_pIconText._getCurrentIcon=function(){var _a=this._cell_elem;if(_a){return _a.icon;}return null;};delete _pIconText;}if(!nexacro._Icon){nexacro._Icon=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pIcon=nexacro._createPrototype(nexacro.Component,nexacro._Icon);nexacro._Icon.prototype=_pIcon;_pIcon._type_name="Icon";_pIcon._cell_elem=null;_pIcon._p_icon="";_pIcon._p_padding="";_pIcon._p_textAlign="";_pIcon._p_verticalAlign="";_pIcon._p_tabstop=false;_pIcon._icon=null;_pIcon._is_focus_accept=false;_pIcon._is_simple_control=true;_pIcon._is_eventinfo_control=false;_pIcon._is_fiticonsize=false;_pIcon._p_accessibilityrole="Icon";_pIcon.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=new nexacro.IconElement(_a,"icon",this._is_fiticonsize);this._cell_elem=_b;_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(_a.client_width,_a.client_height);if(this._p_textAlign){_b.setElementTextAlign(this._p_textAlign);}if(this._p_verticalAlign){_b.setElementVerticalAlign(this._p_verticalAlign);}var _c=this._icon||this._getCSSStyleValue("icon");if(_c){_b.setElementIcon(_c);}if(this._p_fittocontents!="none"){this._on_apply_fittocontents();}}};_pIcon.on_created_contents=function(_a){if(this._p_fittocontents!="none"){this._update_position();}var _b=this._cell_elem;if(_b){_b.create(_a);}};_pIcon.on_destroy_contents=function(){var _a=this._cell_elem;if(_a){_a.destroy();this._cell_elem=null;}if(this._icon){this._icon=null;}};_pIcon.on_create_contents_command=function(){var _a=this._cell_elem;if(_a){return _a.createCommand();}return "";};_pIcon.on_attach_contents_handle=function(_a){var _b=this._cell_elem;if(_b){_b.attachHandle(_a);}if(this._p_fittocontents!="none"){this._update_position();}};_pIcon.on_change_containerRect=function(_a,_b){if(this._is_created_contents){var _c=this._cell_elem;_c.setElementSize(_a,_b);}};_pIcon.on_change_containerPos=function(_a,_b){if(this._is_created_contents){var _c=this._cell_elem;_c.setElementPosition(_a,_b);}};_pIcon.on_apply_status=function(_a,_b){var _c=this._cell_elem;if(_c){if(!this._p_icon){_c.setElementIcon(this._getCSSStyleValue("icon",_a,_b));}}};_pIcon._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=this._icon||this._getCSSStyleValue("icon");if(_f){var _g=this._p_iconPosition||this._getCSSStyleValue("iconPosition");var _h=nexacro._getImageSize(_f.url,this._on_icon_onload,this,undefined,this.image)||{width:0,height:0};if(_g=="left"||_g=="right"){_b+=_h.width;_c=Math.max(_c,_h.height);}else{_c+=_h.height;_b=Math.max(_b,_h.width);}}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pIcon._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pIcon.set_icon=function(_a){this._p_icon=_a;if(_a){if(this._icon==null||this._icon.value!=_a){var _b=nexacro.UrlObject(_a,this);this._icon=_b;this.on_apply_icon(_b);}}else{if(this._icon){this._icon=null;this.on_apply_icon(null);}}};_pIcon.on_apply_icon=function(_a){var _b=this._cell_elem;if(_b){_b.setElementIcon(_a||this._getCSSStyleValue("icon",this._status,this._userstatus));}};_pIcon.on_apply_textAlign=function(_a){var _b=this._cell_elem;if(_b){_b.setElementTextAlign(_a);}};_pIcon.on_apply_verticalAlign=function(_a){var _b=this._cell_elem;if(_b){_b.setElementVerticalAlign(_a);}};_pIcon._properties=[{name:"icon"}];nexacro._defineProperties(_pIcon,_pIcon._properties);_pIcon._on_icon_onload=function(_a,_b,_c){if(this._p_fittocontents!=="none"){this._update_position();}};_pIcon._getCurrentIcon=function(){var _a=this._cell_elem;if(_a){return _a.icon;}return null;};delete _pIcon;}if(!nexacro.Static){nexacro.Static=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pStatic=nexacro._createPrototype(nexacro.Component,nexacro.Static);nexacro.Static.prototype=_pStatic;_pStatic._type_name="Static";_pStatic._cell_elem=null;_pStatic._p_text="";_pStatic._p_usedecorate=false;_pStatic._p_tabstop=false;_pStatic._is_focus_accept=false;_pStatic._is_simple_control=true;_pStatic._apply_client_padding=true;_pStatic._p_accessibilityrole="static";_pStatic._event_list={"onclick":1,"onlbuttondown":1,"onlbuttonup":1,"onlongpress":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onmousedown":1,"onmouseup":1,"onsize":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"onrbuttondown":1,"onrbuttonup":1};_pStatic.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._cell_elem=new nexacro.TextBoxElement(_a,"text");_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(_a.client_width,_a.client_height);if(this._p_textAlign){_b.setElementTextAlign(this._p_textAlign);}if(this._p_verticalAlign){_b.setElementVerticalAlign(this._p_verticalAlign);}var _c=this._getCSSStyleValue("wordWrap");if(_c){_b.setElementCSSMapInfo(_c);}if(this._p_wordWrap){_b.setElementWordWrap(this._p_wordWrap);}if(this._textdecoration){_b.setElementTextDecoration(this._textdecoration);}if(this._displaytext){if(this._p_usedecorate){_a.setElementPointerEvents(this._isEnable()?"":"none");_b.setElementDecorateText(this._getStringResourceProperty(this._p_text));}else{_b.setElementText(this._displaytext);}}if(this._p_fittocontents!="none"){this._on_apply_fittocontents();}}};_pStatic.on_created_contents=function(_a){if(this._p_expr){this._on_apply_expr(this._p_expr);}if(this._p_fittocontents!="none"){this._update_position();}var _b=this._cell_elem;if(_b){_b.create(_a);}};_pStatic.on_destroy_contents=function(){var _a=this._cell_elem;if(_a){_a.destroy();this._cell_elem=null;}};_pStatic.on_create_contents_command=function(){if(this._p_expr){this._on_apply_expr(this._p_expr);}var _a=this._cell_elem;if(_a){return _a.createCommand();}return "";};_pStatic.on_attach_contents_handle=function(_a){var _b=this._cell_elem;if(_b){_b.attachHandle(_a);}if(this._p_fittocontents!="none"){this._update_position();}};_pStatic.on_change_containerRect=function(_a,_b){if(this._is_created_contents){var _c=this._cell_elem;_c.setElementSize(_a,_b);}};_pStatic.on_change_containerPos=function(_a,_b){if(this._is_created_contents){var _c=this._cell_elem;_c.setElementPosition(_a,_b);}};_pStatic.on_apply_status=function(_a,_b){var _c=this._cell_elem;if(_c){var _d=this._getCSSStyleValue("wordWrap",_a,_b);if(_d){_c.setElementCSSMapInfo(_d);}}};_pStatic.on_get_prop_tabstop=function(){if(nexacro._enableaccessibility){if(this._p_accessibilityenable&&this._p_accessibilityrole=="link"){return true;}}return false;};_pStatic._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pStatic._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f;if(this._displaytext&&this._displaytext!==""){_f=this._displaytext;}else{_f=this._p_text;}if(_f){var _g=this._getCurrentStyleInheritValue("font");var _h=this._getReferenceAbsoluteFont(_g);var _i=this._getCurrentStyleInheritValue("wordSpacing");var _j=this._getCurrentStyleInheritValue("letterSpacing");var _k="none";var _l;var _m=false;if(_f.search("\n")>-1){_m=true;}if(this._p_fittocontents=="height"){_k=this._p_wordWrap||this._getCSSStyleValue("wordWrap");if(_k&&_k!="none"){_m=true;}_l=this._adjust_width-_b;}var _n=this._p_usedecorate;var _o=nexacro._getTextSize(_f,_g,_m,_l,_k,_i,_j,_n,undefined,undefined,_h);_b+=Math.ceil(this._p_textwidth!=null?this._p_textwidth:_o[0]);_c+=Math.ceil(_o[1]);}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pStatic.set_usedecorate=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usedecorate!=_a){this._p_usedecorate=_a;this.on_apply_usedecorate();}};_pStatic.on_apply_usedecorate=function(){this.on_apply_text();};_pStatic.on_apply_text=function(){var _a=this._getStringResourceProperty(this._p_text);if(this.usedecorate){this._displaytext=nexacro._getDisplayTextfromDecorateText(_a);if(nexacro._enableaccessibility){this.on_apply_prop_accessibilitylabel();}}var _b=this._cell_elem;if(_b){if(this._p_usedecorate){_b.setElementDecorateText(_a);}else{_b.setElementText(_a);}_b.setElementPointerEvents();}};_pStatic.on_apply_prop_enable=function(){var _a=this.getElement();if(_a){_a.setElementPointerEvents(this._isEnable()?"":"none");}};_pStatic.on_apply_textAlign=function(_a){var _b=this._cell_elem;if(_b){_b.setElementTextAlign(_a);}};_pStatic.on_apply_verticalAlign=function(_a){var _b=this._cell_elem;if(_b){_b.setElementVerticalAlign(_a);}};_pStatic.on_apply_wordWrap=function(_a){if(!this._isEnableRedraw()){return;}var _b=this._cell_elem;if(_b){_b.setElementWordWrap(_a);if(this._p_fittocontents!="none"){this._update_position();}}};_pStatic.on_apply_textDecoration=function(_a){if(!this._isEnableRedraw()){return;}var _b=this._cell_elem;if(_b){_b.setElementTextDecoration(_a);}};_pStatic._properties=[{name:"usedecorate"}];nexacro._defineProperties(_pStatic,_pStatic._properties);delete _pStatic;}if(!nexacro._TitleBarIconTextControl){nexacro._TitleBarIconTextControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._IconText.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pTitleBarIconTextControl=nexacro._createPrototype(nexacro._IconText,nexacro._TitleBarIconTextControl);nexacro._TitleBarIconTextControl.prototype=_pTitleBarIconTextControl;_pTitleBarIconTextControl._type_name="TitleBarIconTextControl";_pTitleBarIconTextControl._is_subcontrol=true;_pTitleBarIconTextControl._is_fiticonsize=true;delete _pTitleBarIconTextControl;}if(!nexacro.Button){nexacro.Button=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._IconText.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pButton=nexacro._createPrototype(nexacro._IconText,nexacro.Button);nexacro.Button.prototype=_pButton;_pButton._type_name="Button";_pButton._p_tabstop=true;_pButton._p_defaultbutton=false;_pButton._p_escapebutton=false;_pButton._is_focus_accept=true;_pButton._cur_ldown_elem=null;_pButton._selectstatus=false;_pButton._use_pushed_status=true;_pButton._use_selected_status=true;_pButton._p_accessibilityrole="button";_pButton._is_eventinfo_control=true;_pButton.destroyComponent=function(){if(!this._is_alive){return;}var _a=this._getMainForm();if(_a){if(_a._defaultbutton==this){_a._defaultbutton=null;}else if(_a._escapebutton==this){_a._escapebutton=null;}}return nexacro.Component.prototype.destroyComponent.call(this);};_pButton.on_getBindableProperties=function(){return "value";};_pButton._getDlgCode=function(){return {want_tab:false,want_return:true,want_escape:false,want_chars:false,want_arrows:false};};_pButton._isFocusAcceptable=function(){return this._is_focus_accept;};_pButton.set_defaultbutton=function(_a){_a=nexacro._toBoolean(_a);if(this._p_defaultbutton!=_a){this._p_defaultbutton=_a;}var _b=this._getMainForm();if(_b){var _c=!(this._p_parent==_b||this._is_created);if(_a){if(!_c){_b._defaultbutton=this;this._setAccessibilityFlagDefaultButton(true);}}else{if(_b._defaultbutton==this){_b._defaultbutton=null;this._setAccessibilityFlagDefaultButton(false);}}}};_pButton.set_escapebutton=function(_a){_a=nexacro._toBoolean(_a);if(this._p_escapebutton!=_a){this._p_escapebutton=_a;}var _b=this._getMainForm();if(_b){var _c=!(this._p_parent==_b||this._is_created);if(_a){if(!_c){_b._escapebutton=this;}}else{if(_b._escapebutton==this){_b._escapebutton=null;}}}};_pButton._properties=[{name:"defaultbutton"},{name:"escapebutton"}];nexacro._defineProperties(_pButton,_pButton._properties);_pButton._click=function(_a){if(_a==nexacro.Event.KEY_ESC||_a==nexacro.Event.KEY_RETURN){if(this._isAccessibilityEnable()){this._notifyAccessibility();}}this.click();};_pButton.click=function(){this.on_fire_onclick("none",false,false,false,-1,-1,-1,-1,-1,-1,this,this);};_pButton.getSelectStatus=function(){return this._selectstatus;};_pButton.setSelectStatus=function(_a){var _b=this._selectstatus;this._selectstatus=_a;if(_a){this._changeUserStatus("selected",true);}else{this._changeUserStatus("selected",false);}return _b;};_pButton.toggleSelectStatus=function(){var _a=this._selectstatus;this.setSelectStatus(!_a);return _a;};_pButton._on_hotkey=function(){this.click();};_pButton.on_keydown_basic_action=function(_a){if(this._use_pushed_status){if(_a==13||_a==32){this._changeUserStatus("pushed",true);}}};_pButton.on_keyup_basic_action=function(){if(this._use_pushed_status){this._changeUserStatus("pushed",false);}};_pButton.on_keydown_default_action=function(_a,_b,_c,_d,_e,_f){var _g=this._getWindow();if(_g){this._cur_ldown_elem=_g._cur_ldown_elem||_g._keydown_element;}};_pButton.on_keyup_default_action=function(_a,_b,_c,_d,_e,_f){var _g=this._getWindow();if(_g){var _h=_g._cur_ldown_elem||_g._keydown_element;if(!this._is_subcontrol){if(_h==this._cur_ldown_elem){if(_a==13||(_a==32&&!this._isComponentBlockProcess())){this._click(_a);}}}}this._cur_ldown_elem=null;};delete _pButton;}if(!nexacro.StepImageButtonControl){nexacro.StepImageButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pStepImageButtonCtrl=nexacro._createPrototype(nexacro.Button,nexacro.StepImageButtonControl);nexacro.StepImageButtonControl.prototype=_pStepImageButtonCtrl;_pStepImageButtonCtrl._type_name="ButtonControl";_pStepImageButtonCtrl._is_subcontrol=true;_pStepImageButtonCtrl._on_getAccessibilityAdditionalLabel=function(){var _a="";var _b=this._p_parent?this._p_parent:null;if(_b){_a=this.id+" "+_b.stepcount;}return _a;};_pStepImageButtonCtrl._on_getAccessibilityAdditionalRole=function(){return " Step";};_pStepImageButtonCtrl.on_getIDCSSSelector=function(){return "stepitem";};_pStepImageButtonCtrl.on_changeUserStatus=function(_a,_b,_c,_d,_e){if(_b){if(_c=="pushed"&&_e=="selected"){return _e;}}return _c;};delete _pStepImageButtonCtrl;}if(!nexacro._TitleBarButtonControl){nexacro._TitleBarButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pTitleBarButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._TitleBarButtonControl);nexacro._TitleBarButtonControl.prototype=_pTitleBarButtonControl;_pTitleBarButtonControl._type_name="TitleBarButtonControl";_pTitleBarButtonControl._is_subcontrol=true;delete _pTitleBarButtonControl;}if(!nexacro.Edit){nexacro.Edit=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=_m;if(_m){this._apply_client_padding=true;this._p_readonly=true;}};var _pEdit=nexacro._createPrototype(nexacro.Component,nexacro.Edit);nexacro.Edit.prototype=_pEdit;_pEdit._type_name="Edit";_pEdit._p_value=undefined;_pEdit._p_displaynulltext="";_pEdit._p_readonly=false;_pEdit._p_password=false;_pEdit._p_autoselect=false;_pEdit._p_autoskip=false;_pEdit._p_maxlength=0;_pEdit._initsoftkeyboard=undefined;_pEdit._p_usesoftkeyboard=true;_pEdit._p_inputmode="normal";_pEdit._p_inputfilter="none";_pEdit._p_inputtype="normal";_pEdit._p_imeaction="none";_pEdit._p_imemode="none";_pEdit.useime="global";_pEdit._p_text="";_pEdit._p_usecontextmenu=true;_pEdit._input_element=null;_pEdit._inputfilter_obj=null;_pEdit._inputtype_obj=null;_pEdit._undostack=null;_pEdit._is_undo=false;_pEdit._default_value=undefined;_pEdit._default_text="";_pEdit._keypad_type="text";_pEdit._imedisable=false;_pEdit._processing_updateToDataset=false;_pEdit._result_updateToDataset=true;_pEdit._processing_canchange=false;_pEdit._onlydisplay=false;_pEdit._apply_client_padding=false;_pEdit._has_inputElement=true;_pEdit._change_value=false;_pEdit._processing_autoskip=false;_pEdit._is_simple_control=true;_pEdit._is_editable_control=true;_pEdit._use_readonly_status=true;_pEdit._ignore_deleteContentBackward=false;_pEdit._caret_pos=-1;_pEdit._event_list={"oneditclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"onimeaction":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pEdit._p_accessibilityrole="edit";_pEdit.on_create_contents=function(){var _a=this.getElement();if(_a){var _b;if(!this._onlydisplay){_b=this._input_element=new nexacro.InputElement(_a,"input");_b.setElementAutoSkip(this._p_autoskip);_b.setElementAutoSelect(this._p_autoselect);_b.setElementUseIme(this.useime);_b.setElementImeMode(this._p_imemode);_b.setElementImeAction(this._p_imeaction);_b.setElementReadonly(this._p_readonly);_b.setElementDisplayNullText(this._getStringResourceProperty(this._p_displaynulltext));_b.setElementMaxLength(this._p_maxlength);}else{_b=this._input_element=new nexacro.TextBoxElement(_a,"input");_b.setElementVerticalAlign("middle");}_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(this._getClientWidth(),this._getClientHeight());_b.setElementTextDecoration(this._textdecoration);_b.setElementTextAlign(this._p_textAlign);_b.setElementPadding(this._padding);this._undostack=new nexacro._EditUndoStack(this);}};_pEdit.on_created_contents=function(_a){var _b=this._input_element;if(_b){this.on_apply_value(this._p_value);_b.create(_a);this.on_apply_inputtype();this.on_apply_usesoftkeyboard();if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}}if(nexacro._enableaccessibility){this._on_created_accessibility_contents(_a);}};_pEdit.on_destroy_contents=function(){var _a=this._input_element;if(_a){_a.destroy();this._input_element=null;}var _b=this._undostack;if(_b){_b.destroy();this._undostack=null;}var _c=this._inputfilter_obj;if(_c){this._inputfilter_obj=null;}var _d=this._inputtype_obj;if(_d){this._inputtype_obj=null;}};_pEdit.on_create_contents_command=function(){var _a=this._input_element;if(_a){this.on_apply_value(this._p_value);this.on_apply_prop_enable(this._real_enable);this.on_apply_inputtype();this.on_apply_usesoftkeyboard();return _a.createCommand();}return "";};_pEdit.on_attach_contents_handle=function(_a){var _b=this._input_element;if(_b){_b.attachHandle(_a);if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}}if(nexacro._enableaccessibility){this._on_attach_accessibility_contents_handle(_a);}};_pEdit.on_change_containerRect=function(_a,_b){var _c=this._input_element;if(_c){_c.setElementSize(_a,_b);}};_pEdit.on_change_containerPos=function(_a,_b){var _c=this._input_element;if(_c){_c.setElementPosition(_a,_b);}};_pEdit._getInputElement=function(){return this._input_element;};_pEdit._apply_setfocus=function(_a,_b){this._processing_updateToDataset=false;var _c=this._input_element;if(_c){if(!this._onlydisplay){_c.on_apply_imeSet();_c.on_apply_force_imeSet();if(_a){this._default_value=this._p_value;this._default_text=this._p_text;}var _d=_c._last_selection_range;if(_d&&!this._p_autoselect){this._caret_pos={begin:_d[0],end:_d[1]};}this._changeUserStatus("nulltext",false);_c.setElementFocus(_a,_b);var _e=_c.getElementText();if(_e!=this._p_text){this._default_text=this._p_text=_e;}if(!this._p_autoselect){if(this._caret_pos==-1){if(this._change_value){_c.setElementSetSelect(this._p_value?this._p_value.length:0);}else{if(nexacro._isDesktop()||_c._is_sys_focused){if(nexacro._Browser!="Runtime"&&(_a=="focus"||_a=="lbuttondown")){_c._use_timer=true;}_c.setElementSetSelect(0,0);if(nexacro._Browser!="Runtime"&&(_a=="focus"||_a=="lbuttondown")){_c._use_timer=false;}}}}}}else{if(_a){this._default_value=this._p_value;this._default_text=this._p_text;}this._changeUserStatus("nulltext",false);}}};_pEdit.on_getBindableProperties=function(){return "value";};_pEdit.on_apply_prop_enable=function(_a){var _b=this._input_element;if(_b){var _c=this._getCSSStyleValue("color");if(!this._onlydisplay){_b.setElementEnable(_a,_c);}}};_pEdit.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this.on_apply_displaynulltext(this._getStringResourceProperty(this._p_displaynulltext));};_pEdit.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){if(this._undostack){this._undostack.clear();}this._setValue(undefined);}};_pEdit.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=this._input_element;var _f=_b.getColumn(_c,_d);_f=this._convertValueType(_f,true);if(this._undostack){this._undostack.clear();}var _g=false;if(this._p_value!=_f){_g=true;}this._setValue(_f);if(_e&&_g&&!this._onlydisplay){_e.setElementSetSelect(this._p_value?this._p_value.length:0);this._caret_pos=_e.getElementCaretPos();}}};_pEdit.on_changeUserStatus=function(_a,_b,_c){if(_b){return _a;}else{return _c;}};_pEdit._getDlgCode=function(){return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:false};};_pEdit._getDragData=function(){return this.getSelectedText();};_pEdit._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f;if(this._displaytext&&this._displaytext!==""){_f=this._displaytext;}else{_f=this._p_text;}if(_f){var _g=this._getCurrentStyleInheritValue("font");var _h=this._getReferenceAbsoluteFont(_g);var _i=this._getCurrentStyleInheritValue("wordSpacing");var _j=this._getCurrentStyleInheritValue("letterSpacing");var _k=nexacro._getTextSize(this._p_text,_g,false,undefined,"none",_i,_j,undefined,undefined,undefined,_h);_b+=Math.ceil(_k[0]);_c+=Math.ceil(_k[1]);}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pEdit.set_text=nexacro._emptyFn;_pEdit.set_value=function(_a){_a=this._convertValueType(_a);if(this._p_value!==_a){if(!this.applyto_bindSource("value",_a)){return;}this._setValue(_a);}};_pEdit.on_apply_value=function(_a){var _b=this._input_element;if(_b){var _c=_b.getElementCaretPos();var _d=this._p_text;_a=(this._p_value?this._p_text:this._p_value);var _e=this._getForm();var _f=_e?_e.getFocus():null;if(this._is_created&&nexacro._isNull(this._p_value)&&_f!==this._getRootComponent(this)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);}if(!this._onlydisplay){if(this._undostack){if(_c&&_c!=-1){this._undostack.push(_a,_c.begin,_c.end);}else{this._undostack.push(_a,0,0);}}_b.setElementValue(_a);if(_a!=null){_d=_b.getElementText();}}else{if(this._p_displaynulltext&&nexacro._isNull(this._p_value)){var _g=this._getStringResourceProperty(this._p_displaynulltext);_b.setElementText(_g);}else{_b.setElementText(_a);}}if(this._p_text!=_d){this._p_text=_d;}this._updateAccessibilityLabel();this._default_value=this._p_value;this._default_text=this._p_text;_c=_b.getElementCaretPos();if(_c&&_c!=-1){this._caret_pos=_c;}else{this._change_value=this._is_created?true:false;}}};_pEdit.set_displaynulltext=function(_a){_a=nexacro._toString(_a);if(this._p_displaynulltext!=_a){this._p_displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pEdit.on_apply_displaynulltext=function(_a){var _b=this._input_element;if(_b){var _c=this._getStringResourceProperty(_a);if(this._onlydisplay){this.on_apply_value(this._p_value);}else{_b.setElementDisplayNullText(_c?_c:_a);}}};_pEdit.set_readonly=function(_a){if(this._onlydisplay){return;}_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pEdit.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementReadonly(_a);}}};_pEdit.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoselect!=_a){this._p_autoselect=_a;this.on_apply_autoselect(_a);}};_pEdit.on_apply_autoselect=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementAutoSelect(_a);}}};_pEdit.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoskip!=_a){this._p_autoskip=_a;this.on_apply_autoskip(_a);}};_pEdit.on_apply_autoskip=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementAutoSkip(_a);}}};_pEdit.set_inputmode=function(_a){var _b=["normal","upper","lower"];if(_b.indexOf(_a)==-1){return;}if(this._p_inputmode!=_a){this._p_inputmode=_a;}};_pEdit.set_inputfilter=function(_a){if(_a){var _b=_a.split(',');var _c=["none","alpha","digit","comma","dot","sign","space","symbol"];for(var _d=0,_e=_b.length;_d<_e;_d++ ){if(_c.indexOf(_b[_d])==-1){return;}}}else{return;}if(this._p_inputfilter!=_a){this._p_inputfilter=_a;this._inputfilter_obj=null;this.on_apply_inputfilter(_a);}};_pEdit.on_apply_inputfilter=function(_a){this._inputfilter_obj=new nexacro._EditInputFilter(_a);};_pEdit.set_inputtype=function(_a){if(_a){var _b=_a.split(',');var _c=["normal","alpha","english","digit","number","comma","dot","sign","space","symbol","half","full","numberandenglish"];for(var _d=0,_e=_b.length;_d<_e;_d++ ){if(_c.indexOf(_b[_d])==-1){return;}}}else{return;}if(this._p_inputtype!=_a){this._p_inputtype=_a;this._inputtype_obj=null;this.on_apply_inputtype();}};_pEdit.on_apply_inputtype=function(){var _a=this._p_inputtype;this._inputtype_obj=new nexacro._EditInputType(_a);if(nexacro._isTouchInteraction&&nexacro._SupportTouch){this._imedisable=false;}else{this._imedisable=this._inputtype_obj.imedisable;}this._keypad_type=this._inputtype_obj.keypadtype;var _b=this._input_element;if(_b&&!this._onlydisplay){if((_a.indexOf("normal")>=0)||(_a.indexOf("full")>=0)){_b._inputtype="text";}else{_b._inputtype="";}_b.setElementInputType(this._p_password?"password":this._keypad_type,this._imedisable);}};_pEdit.set_imeaction=function(_a){if(_a){var _b=_a.split(',');var _c=["none","done","go","search","send","next","previous"];for(var _d=0,_e=_b.length;_d<_e;_d++ ){if(_c.indexOf(_b[_d])==-1){return;}}}else{return;}if(this._p_imeaction!=_a){this._p_imeaction=_a;this.on_apply_imeaction(_a);}};_pEdit.on_apply_imeaction=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementImeAction(_a);}};_pEdit.set_maxlength=function(_a){if(isNaN(_a= +_a)||_a<0){return;}if(this._p_maxlength!=_a){this._p_maxlength=_a;this.on_apply_maxlength(_a);}};_pEdit.on_apply_maxlength=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementMaxLength(_a);}};_pEdit.set_password=function(_a){_a=nexacro._toBoolean(_a);if(this._p_password!=_a){this._p_password=_a;this.on_apply_password(_a);}};_pEdit.on_apply_password=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementInputType(_a?"password":this._keypad_type,this._imedisable);}};_pEdit.set_useime=function(_a){_a=nexacro._toBoolean(_a);if(this.useime!=_a){this.useime=_a;this.on_apply_useime(_a);}};_pEdit.on_apply_useime=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementUseIme(_a);}};_pEdit.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_usesoftkeyboard){this._p_usesoftkeyboard=_a;if(!this._initsoftkeyboard){this._initsoftkeyboard=true;}this.on_apply_usesoftkeyboard();}};_pEdit.on_apply_usesoftkeyboard=function(){var _a=this._input_element;if(_a&&!this._onlydisplay){_a.setElementUseSoftKeyboard(this._getUseSoftKeyboardValue(this._initsoftkeyboard));}};_pEdit.set_imemode=function(_a){var _b=["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"];if(_b.indexOf(_a)==-1){return;}if(this._p_imemode!=_a){this._p_imemode=_a;this.on_apply_imemode(_a);}};_pEdit.on_apply_imemode=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementImeMode(_a);}};_pEdit.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usecontextmenu!=_a){this._p_usecontextmenu=_a;}};_pEdit.set_cursor=function(_a){this._p_cursor=_a;if(_a){if(this._cursor==null||this._cursor._p_value!=_a){if(this._p_enable&&_a=="auto"){_a="text";}var _b=nexacro.CursorObject(_a);this._cursor=_b;this.on_apply_cursor(_b);}}else{if(this._cursor){this._cursor=null;this.on_apply_cursor(null);}}};_pEdit.on_apply_textAlign=function(_a){var _b=this._input_element;if(_b){_b.setElementTextAlign(_a);}};_pEdit.on_apply_padding=function(_a){var _b=this._input_element;if(_b){_b.setElementPadding(_a);}};_pEdit.on_apply_textDecoration=function(_a){var _b=this._input_element;if(_b){_b.setElementTextDecoration(_a);}};_pEdit._properties=[{name:"value"},{name:"displaynulltext"},{name:"readonly"},{name:"password"},{name:"autoselect"},{name:"autoskip"},{name:"maxlength"},{name:"usesoftkeyboard"},{name:"inputmode"},{name:"inputtype"},{name:"inputfilter"},{name:"imeaction"},{name:"imemode"},{name:"cursor"},{name:"text",readonly:true},{name:"usecontextmenu"}];nexacro._defineProperties(_pEdit,_pEdit._properties);_pEdit.getLength=function(){return (this._p_value?this._p_value.length:0);};_pEdit.getCaretPos=function(){if(this._p_readonly||!this._isEnable()){return -1;}var _a=this._input_element;if(_a){var _b=_a.getElementCaretPos();if(_b&&_b!=-1){return _b.begin;}}return -1;};_pEdit.setCaretPos=function(_a){var _b=this._input_element;if(_b){if(this._p_readonly||!this._isEnable()){return false;}if(!this._onlydisplay){if(arguments.length==0){_a=0;}else{_a=nexacro._toInt(_a);if(_a==-1){if(_a){_a=this._p_text.length;}else{_a=0;}}}_b.setElementSetSelect(_a,_a);}return true;}return false;};_pEdit.getSelect=function(){var _a=this._input_element;if(_a&&!this._onlydisplay){return _a.getElementSelectionRange();}return [0,0];};_pEdit.setSelect=function(_a,_b){var _c=this._input_element;if(_c){if(!this._onlydisplay){var _d=this._p_text?this._p_text:"";var _e=_d.length;if(nexacro._isNull(_a)||_a===""){_a=0;}if(nexacro._isNull(_b)||_b===""){_b=-1;}if(!nexacro._isNumber(_a)){_a=nexacro._toInt(_a);}if(!nexacro._isNumber(_b)){_b=nexacro._toInt(_b);}if(_a==-1){_a=_e;}if(_b==-1){_b=_e;}if(_a>_b){var _f=_a;_a=_b;_b=_f;}_c.setElementSetSelect(_a,_b);}return true;}return false;};_pEdit.getSelectedText=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){var _b=_a.getElementSelectionRange();var _c=_b[0],_d=_b[1];var _e=this._p_text;if(_e&&(_c!=_d)){return _e.substring(_c,_d);}}}return "";};_pEdit.setSelectedText=function(_a){_a=nexacro._toString(_a);var _b=this._input_element;if(_b){if(!this._onlydisplay){var _c=_b.getElementSelectionRange();var _d=_c[0],_e=_c[1];if(_d==_e){return "";}var _f="";if(this._inputtype_obj){var _g=_a.length;for(var _m=0;_m<_g;_m++ ){var _h=_a[_m];if(this._inputtype_obj.test(_h)){_f+=_h;}}_a=_f;}var _i=_a.length;var _j=this._p_text.substring(_d,_e);var _k=this._p_text;var _l=_k.length-(_e-_d)+_i;if(this._p_maxlength>0&&_l>this._p_maxlength){_a=_a.substring(0,this._p_maxlength-_i);}_k=_k.substring(0,_d)+_a+_k.substring(_e);if(this._p_text!=_k){this.set_value(_k);_b.setElementSetSelect(_d,_d+_i);}return _j;}}return "";};_pEdit.updateToDataset=function(){this._result_updateToDataset=this.applyto_bindSource("value",this._p_value);if(this._result_updateToDataset){this._default_value=this._p_value;this._default_text=this._p_text;}this._processing_updateToDataset=true;return this._result_updateToDataset;};_pEdit.on_deactivate_process=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){_a.setCompositionComplete();}}};_pEdit._on_deactivate=function(){if(!this._is_alive){return;}if(!this._isSelected()){this._changeStatus("focused",false);}this.on_deactivate_process.call(this);};_pEdit._on_value_change=function(_a,_b,_c,_d){if(!this.on_fire_canchange(this,_a,_b,_c,_d)){return false;}var _e=this._input_element;var _f=_e.getElementCaretPos();if(_f&&_f!=-1){this._caret_pos=_f;}if(this._processing_updateToDataset&&!this._result_updateToDataset&&_b===_d){this._processing_updateToDataset=false;this._result_updateToDataset=true;return false;}else if(!this.applyto_bindSource("value",_d)){return false;}this._default_value=_d;this._default_text=_c;this.on_fire_onchanged(this,_a,_b,_c,_d);return true;};_pEdit._on_input_undo=function(_a){if(this._p_readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(_a){this._is_undo=true;var _c=_a.end;if(_a.value&&_a.value.length>_c){_c=_a.value.length;}if(_b._use_event_beforeinput){_b._beforeinput_result=[];_b._beforeinput_result_insert_data=null;_b._beforeinput_result_data=null;_b._beforeinput_result_pos=null;}_b.updateElementText(_a.value,_c);_b.setElementSetSelect(_a.start,_a.end);return true;}}};_pEdit._on_input_redo=function(_a){if(this._p_readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(_a){if(_b._use_event_beforeinput){_b._beforeinput_result=[];_b._beforeinput_result_insert_data=null;_b._beforeinput_result_data=null;_b._beforeinput_result_pos=null;}_b.updateElementText(_a.value,_a.end);_b.setElementSetSelect(_a.start,_a.end);return true;}}};_pEdit.on_keydown_basic_before_process=function(_a,_b,_c,_d,_e,_f){return true;};_pEdit.on_keydown_basic_specialkey_process=function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack){this._undostack.undo();_g._applyMaxlength();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}return true;};_pEdit.on_keydown_basic_process=function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(this._undostack&&!_g.isComposing()){var _h=_g.getElementCaretPos();if(_h&&_h!=-1){this._undostack.update(_h.begin,_h.end);}}return true;};_pEdit.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(this._p_readonly||!this._isEnable()){return;}var _g=this._input_element;if(_g){if(!this.on_keydown_basic_before_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keydown_basic_specialkey_process.call(this,_a,_b,_c,_d,_e,_f)){return;}this.on_keydown_basic_process.call(this,_a,_b,_c,_d,_e,_f);}};_pEdit.on_keydown_default_before_process=function(_a){return true;};_pEdit.on_keydown_default_specialkey_process=function(_a){var _b=this._input_element;var _c=_b.getElementCaretPos();if(_a==nexacro.Event.KEY_RETURN){if(_b.isComposing()){_b.setCompositionComplete();}var _d=this._default_value;var _e=this._default_text;var _f=_b.value;var _g=_f?_f:"";if(_d!=_f){if(!this._on_value_change(_e,_d,_g,_f)){var _h=_g?_g.length:0;var _i=_e?_e.length:0;if(_c!=-1){if(_h-_i>=0){_c.begin=_c.end=_c.begin-(_h-_i);}if(_c.begin<0){_c.begin=_c.end=0;}}if(_c&&_c!=-1){this._caret_pos=_c;}this._p_value=_d;this._p_text=_e;_b.setElementValue(_e);_b.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}}return true;};_pEdit.on_keydown_default_process=function(_a){return true;};_pEdit.on_keydown_default_action=function(_a,_b,_c,_d,_e,_f){if(this._p_readonly||!this._isEnable()){return;}var _g=this._input_element;if(_g){if(!this.on_keydown_default_before_process.call(this,_a)){return;}if(!this.on_keydown_default_specialkey_process.call(this,_a)){return;}this.on_keydown_default_process.call(this,_a,_b,_c,_d,_e,_f);}};_pEdit.on_keypress_basic_before_process=function(_a,_b,_c,_d){return true;};_pEdit.on_keypress_basic_specialkey_process=function(_a,_b,_c,_d){var _e=this._input_element;if(_e){if(_a==nexacro.Event.KEY_TAB){if(!this._getDlgCode().want_tab){_e.stopSysEvent();return;}}if(_a!==0&&_b===0){return 2;}else{if(_a==nexacro.Event.KEY_ENTER||_a==nexacro.Event.KEY_ESC){return 2;}}}return true;};_pEdit.on_keypress_basic_process=function(_a,_b,_c,_d){if(nexacro._OS=="iOS"){return true;}_b=_b||_a;var _e=this._input_element;if(!_d&&!_c&&_b){var _f=String.fromCharCode(_b);if(_f.length>0&&this._isFilterChar(_f)){_e.stopSysEvent();return false;}}return true;};_pEdit.on_keypress_basic_action=function(_a,_b,_c,_d){var _e=this._input_element;if(_e){if(!this.on_keypress_basic_before_process.call(this,_a,_b,_c,_d)){return;}var _f=this.on_keypress_basic_specialkey_process.call(this,_a,_b,_c,_d);if(!_f){return;}else if(_f==2){return true;}if(!this.on_keypress_basic_process.call(this,_a,_b,_c,_d)){return false;}}};_pEdit.on_beforekeyinput_basic_action=function(_a,_b,_c,_d,_e){if(this._p_readonly||!this._isEnable()){return 0;}var _f=this._input_element;if(_f){if(_f._use_event_beforeinput){return this._beforeinput_process_with_HTMLEvent(_a,_b,_c,_d,_e);}else{return this._beforeinput_process_with_NexacroInputEvent(_a,_b,_c,_d);}}};_pEdit.on_keyinput_basic_before_process=function(_a){return true;};_pEdit.on_keyinput_basic_process=function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;if(_b&&_b._is_sys_focused){this._p_value=_c;this._p_text=_a;}else{this.set_value(_c);}if(this._undostack&&!_b.isComposing()){var _d=_b.getElementCaretPos();if(_d&&_d!=-1){this._undostack.push(_c,_d.begin,_d.end);}else{this._undostack.push(_c,0,0);}}return true;};_pEdit.on_keyinput_basic_action=function(_a){if(this._p_readonly||!this._isEnable()){return false;}var _b=this._input_element;if(_b){if(!this.on_keyinput_basic_before_process.call(this,_a)){return false;}if(!this.on_keyinput_basic_process.call(this,_a)){return false;}}this._updateAccessibilityLabel();return true;};_pEdit.on_killfocus_basic_process=function(){var _a=this._input_element;var _b;if(!this._onlydisplay){var _c=this._default_value;var _d=this._default_text;var _e=_a.value;_b=_e?_e:"";var _f=_a.getElementCaretPos();if(_c!=_e){if(!this._processing_canchange){if(!this._on_value_change(_d,_c,_b,_e)){var _g=_b?_b.length:0;var _h=_d?_d.length:0;if(_f!=-1){if(_g-_h>=0){_f.begin=_f.end=_f.begin-(_g-_h);}if(_f.begin<0){_f.begin=_f.end=0;}this._caret_pos=_f;}else{this._caret_pos.begin=this._caret_pos.end=_c?_c.length:0;}this._p_value=_c;this._p_text=_d;_a.setElementValue(_c);_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}var _i=this._getRootWindow();var _j=_i._indexOfCurrentFocusPaths(this);if(_j<0){_a.setElementBlur();}}else{if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}}return true;};_pEdit.on_killfocus_basic_action=function(){nexacro.Component.prototype.on_killfocus_basic_action.call(this);var _a=this._input_element;if(_a){if(!this._onlydisplay){var _b=_a.getElementSelectionRange();if(_b[0]==_b[1]){_a._setElementLastSelectionRange();}}if(!this.on_killfocus_basic_process.call(this)){return;}}};_pEdit.on_fire_onkillfocus=function(_a,_b){nexacro.Component.prototype.on_fire_onkillfocus.call(this,_a,_b);var _c=this._input_element;if(_c&&_c._updateElementValue){_c._updateElementValue(_c.value);this._setValue(_c.value===null?undefined:_c.value);}};_pEdit.on_click_basic_action=function(_a,_b){var _c=this._input_element;if(_c){var _d=this._getWindow();if(_d&&this._track_capture){var _e=_d._getCaptureComp(true,false,this);if(!this._onlydisplay&&(!_e||_e==this)){_c.setElementFocus(_b);}}}};_pEdit.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oneditclick&&this.oneditclick._has_handlers){var _n=this.getCaretPos();var _o=this._getClientXY(_g,_h);var _p=new nexacro.EditClickEventInfo(this,"oneditclick",_n,_a,_b,_c,_d,_e,_f,_g,_h,_o[0],_o[1],this,this,_m);return this.oneditclick._fireEvent(this,_p);}return true;};_pEdit.on_fire_canchange=function(_a,_b,_c,_d,_e){if(this.canchange&&this.canchange._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"canchange",_b,_c,_d,_e);this._processing_canchange=true;var _g=this.canchange._fireCheckEvent(this,_f);this._processing_canchange=false;return _g;}return true;};_pEdit.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}};_pEdit.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pEdit._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pEdit._setValue=function(_a){this._p_text=nexacro._toString(_a);this._p_value=_a;this.on_apply_value(_a);};_pEdit._setReadonlyView=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementReadonly(_a);}}};_pEdit._setDefaultCaret=nexacro._emptyFn;_pEdit._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm().getNextComponent(_a,true);if(_b){_b.setFocus();if(_b._is_editable_control){_b._setDefaultCaret();}}};_pEdit._isFilterChar=function(_a){if(_a!=""){if(this._inputfilter_obj&&this._inputfilter_obj.test(_a)){return true;}if(this._inputtype_obj&&!this._inputtype_obj.test(_a)){return true;}}return false;};_pEdit.on_beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a?_a.replace(/\r\n/g,""):_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}else if(_e=="deleteContentBackward"){if(this._ignore_deleteContentBackward){this._ignore_deleteContentBackward=false;var _k=_f._last_selection_range;if(_k){_f.setElementSetSelect(_k[0],_k[1]);}}return _j;}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g&&_e=="insertFromPaste"){_i=_g.length;_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{if(_e=="insertText"||_e=="insertCompositionText"){this._ignore_deleteContentBackward=true;}else if(_e=="insertLineBreak"){this._ignore_deleteContentBackward=false;}_j.push(_f._BeforeinputState.CANCEL);}}else{this._ignore_deleteContentBackward=false;}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g&&_e=="insertFromPaste"){_i=_g.length;_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{if(_e=="insertText"||_e=="insertCompositionText"){this._ignore_deleteContentBackward=true;}else if(_e=="insertLineBreak"){this._ignore_deleteContentBackward=false;}_j.push(_f._BeforeinputState.CANCEL);}}else{this._ignore_deleteContentBackward=false;}}if(_e=="insertFromPaste"){if(_g){var _l=this._p_maxlength;_g=_g.replace(/\r\n/g,"");if(_l&&_c+(_h.length-_d)+_i>_l){_g=_g.substring(0,_l-(_c+_h.length-_d));}_f._beforeinput_result_insert_data=_g;_i=_g.length;_g=_h.substring(0,_c)+_g+_h.substring(_d);_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}}if(_b==0||_b==3){if(_g){switch(this._p_inputmode){case "upper":_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}}if(this._p_maxlength>0&&(_b==0||_b==3)){_h=_h?_h:_f._getInputValue();var _m=_f._checkMaxLength(_h+(_g?_g:""),_d);if(_m&&_m.ismax){_j.push(_f._BeforeinputState.MAXLENGTH);}}if(this._p_maxlength>0&&(_b==1||_b==2)){_h=_h?_h:_f._getInputValue();if(_c!=_d){_h=_h.substring(0,_c);}_g=_h+_g;if(_g.length>this._p_maxlength){_j.push(_f._BeforeinputState.CANCEL);_j.push(_f._BeforeinputState.MAXLENGTH);}}if(this._processing_autoskip){var _n=this._getWindow();if(_n._keydown_element!=_f){this._processing_autoskip=false;if(this._default_value){var _o=this._caret_pos;_f._beforeinput_result_data=this._default_value;_f._beforeinput_result_pos={begin:_o.begin,end:_o.end};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}return _j;};_pEdit._beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;if(_f){return this.on_beforeinput_process_with_HTMLEvent.call(this,_a,_b,_c,_d,_e);}};_pEdit.on_beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;var _f=_e._paste_caret_pos?true:false;var _g=_e.value;var _h=_a.substring(_c,_d);if(_h){var _i=_h;if(nexacro._is_hangul(_i)||(_b==nexacro._CompositionState.NONE||_b==nexacro._CompositionState.END)){if(this._inputtype_obj){_i=this._inputtype_obj.apply(_i);}if(this._inputfilter_obj){_i=this._inputfilter_obj.apply(_i);}if(this._p_inputmode=="upper"){_i=_i.toUpperCase();}else if(this._p_inputmode=="lower"){_i=_i.toLowerCase();}}if(_i!=_h){if(!_i){var _j=_g?_g.length:0;var _k=_c+(_h.length-(_a.length-_j));_e.updateElementText(_g,_k);}else{_e.replaceElementText(_i,_c,_d);}}}};_pEdit._beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;if(_e){this.on_beforeinput_process_with_NexacroInputEvent.call(this,_a,_b,_c,_d);}};_pEdit._on_input_compositionend=function(_a,_b){var _c=this._input_element;if(_c){if(this._undostack){var _d=_b?_b:_c.getElementCaretPos();if(_d&&_d!=-1){this._undostack.push(_a,_d.begin,_d.end);}else{this._undostack.push(_a,0,0);}}}};_pEdit.on_apply_imeSet=function(){var _a=this._input_element;if(_a){var _b=_a._imelocale.getLocale();var _c,_d;if(_b&&nexacro._cache_edit_set[_b]){for(var _e in nexacro._cache_edit_set[_b]){this[_e]=nexacro._cache_edit_set[_b][_e];}for(_c=0,_d=nexacro._edit_user_override_func.length;_c<_d;_c++ ){if(!nexacro._cache_edit_set[_b][nexacro._edit_user_override_func[_c]]){this[nexacro._edit_user_override_func[_c]]=nexacro.Edit.prototype[nexacro._edit_user_override_func[_c]];}}}else{for(_c=0,_d=nexacro._edit_user_override_func.length;_c<_d;_c++ ){this[nexacro._edit_user_override_func[_c]]=nexacro.Edit.prototype[nexacro._edit_user_override_func[_c]];}}}};_pEdit=null;}if(!nexacro.MaskEdit){nexacro.MaskEdit=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=_m;if(_m){this._apply_client_padding=true;this._p_readonly=true;}};var _pMaskEdit=nexacro._createPrototype(nexacro.Component,nexacro.MaskEdit);nexacro.MaskEdit.prototype=_pMaskEdit;_pMaskEdit._type_name="MaskEdit";_pMaskEdit._p_value=undefined;_pMaskEdit._p_displaynulltext="";_pMaskEdit._p_displayinvalidtext="invalid value";_pMaskEdit._p_readonly=false;_pMaskEdit._p_autoselect=false;_pMaskEdit._p_autoskip=false;_pMaskEdit._p_type="number";_pMaskEdit._p_trimtype="none";_pMaskEdit._p_limitbymask="decimal";_pMaskEdit._p_clipmode="includespace";_pMaskEdit._p_format="";_pMaskEdit._p_maskchar="_";_pMaskEdit._p_text="";_pMaskEdit._p_usecontextmenu=true;_pMaskEdit._p_locale="";_pMaskEdit._initsoftkeyboard=undefined;_pMaskEdit._p_usesoftkeyboard=true;_pMaskEdit._p_postfixtext="";_pMaskEdit._p_imeaction="none";_pMaskEdit._input_element=null;_pMaskEdit._masktypeobj=null;_pMaskEdit._undostack=null;_pMaskEdit._default_value=undefined;_pMaskEdit._default_text="";_pMaskEdit._locale="";_pMaskEdit._imedisable=true;_pMaskEdit._processing_updateToDataset=false;_pMaskEdit._result_updateToDataset=true;_pMaskEdit._processing_canchange=false;_pMaskEdit._onlydisplay=false;_pMaskEdit._apply_client_padding=false;_pMaskEdit._has_inputElement=true;_pMaskEdit._processing_autoskip=false;_pMaskEdit._is_keydown_ime=false;_pMaskEdit._is_simple_control=true;_pMaskEdit._is_editable_control=true;_pMaskEdit._is_locale_control=true;_pMaskEdit._use_readonly_status=true;_pMaskEdit._caret_pos=-1;_pMaskEdit._event_list={"oneditclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"onimeaction":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pMaskEdit._p_accessibilityrole="edit";_pMaskEdit.on_create_contents=function(){var _a=this.getElement();if(_a){var _b;if(!this._onlydisplay){_b=this._input_element=new nexacro.InputElement(_a,"input");_b.setElementAutoSkip(this._p_autoskip);_b.setElementAutoSelect(this._p_autoselect);_b.setElementUseIme("none");_b.setElementImeMode("disabled");_b.setElementImeAction(this._p_imeaction);_b.setElementReadonly(this._p_readonly);}else{_b=this._input_element=new nexacro.TextBoxElement(_a,"input");_b.setElementVerticalAlign("middle");}_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(this._getClientWidth(),this._getClientHeight());_b.setElementTextDecoration(this._textdecoration);_b.setElementTextAlign(this._p_textAlign);_b.setElementPadding(this._padding);this._undostack=new nexacro._EditUndoStack(this);if(nexacro._isTouchInteraction&&nexacro._SupportTouch){this._imedisable=false;}}};_pMaskEdit.on_created_contents=function(_a){var _b=this._input_element;if(_b){_b.create(_a);this.on_apply_type(this._p_type);this.on_apply_limitbymask(this._p_limitbymask);this.on_apply_clipmode(this._p_clipmode);this.on_apply_maskchar(this._p_maskchar);this._on_apply_format(this._p_format);this.on_apply_locale(this._getLocale());this.on_apply_postfixtext(this._getStringResourceProperty(this._p_postfixtext));this.on_apply_value(this._p_value);this.on_apply_displaynulltext(this.displaynulltext);this.on_apply_displayinvalidtext(this.displayinvalidtext);this.on_apply_usesoftkeyboard();if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);if(this._isInvalidValue(this._p_value)){this._changeUserStatus("invalidtext",true);}else{this._changeUserStatus("invalidtext",false);}}}};_pMaskEdit.on_destroy_contents=function(){var _a=this._input_element;if(_a){_a.destroy();this._input_element=null;}var _b=this._undostack;if(_b){_b.destroy();this._undostack=null;}var _c=this._masktypeobj;if(_c){this._masktypeobj=null;}};_pMaskEdit.on_create_contents_command=function(){var _a=this._input_element;if(_a){this.on_apply_type(this._p_type);this.on_apply_limitbymask(this._p_limitbymask);this.on_apply_clipmode(this._p_clipmode);this.on_apply_maskchar(this._p_maskchar);this._on_apply_format(this._p_format);this.on_apply_locale(this._getLocale());this.on_apply_postfixtext(this._getStringResourceProperty(this._p_postfixtext));this.on_apply_value(this._p_value);this.on_apply_prop_enable(this._real_enable);this.on_apply_usesoftkeyboard();return _a.createCommand();}return "";};_pMaskEdit.on_attach_contents_handle=function(_a){var _b=this._input_element;if(_b){_b.attachHandle(_a);this.on_apply_displaynulltext(this.displaynulltext);this.on_apply_displayinvalidtext(this.displayinvalidtext);if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);if(this._isInvalidValue(this._p_value)){this._changeUserStatus("invalidtext",true);}else{this._changeUserStatus("invalidtext",false);}}}if(nexacro._enableaccessibility){this._on_attach_accessibility_contents_handle(_a);}};_pMaskEdit.on_change_containerRect=function(_a,_b){var _c=this._input_element;if(_c){_c.setElementSize(_a,_b);}};_pMaskEdit.on_change_containerPos=function(_a,_b){var _c=this._input_element;if(_c){_c.setElementPosition(_a,_b);}};_pMaskEdit._getInputElement=function(){return this._input_element;};_pMaskEdit._apply_setfocus=function(_a){this._processing_updateToDataset=false;var _b=this._input_element;if(_b){var _c=this._p_value;var _d="";var _e="";var _f=this._getMaskObj();if(_f){if(!this._onlydisplay){_f.setEditStatus(true);}_e=this._getEmptyText();if(this._isInvalidValue(_c)){_d=_f.applyMask("");}else{_d=_f.applyMask(_c);}if(_a){this._default_value=_c;this._default_text=_d;}var _g=_b._last_selection_range;if(_g&&!this._p_autoselect){this._caret_pos={begin:_g[0],end:_g[1]};}if(!this._onlydisplay){this._changeUserStatus("nulltext",false);this._changeUserStatus("invalidtext",false);if(nexacro._isNull(_c)){_b.setElementDefaultValue(_e);_b.setElementValue(null);}else{if(this._isInvalidValue(_c)){_b.setElementDefaultValue(_e);}_b.setElementValue(_d);}}}if(!this._onlydisplay){_b.setElementFocus(_a);_d=_b.getElementText();if(_d!=this._p_text){this._default_text=this._p_text=_d;}if(nexacro._enableaccessibility){if(!this._p_autoselect){if(this._caret_pos==-1){_b.setElementSetSelect(0,0);}else if(this._caret_pos>-1){_b.setElementSetSelect(this._caret_pos,this._caret_pos);}}}if(this._p_autoselect){_b.setElementSetSelect(0,_d.length);}}}};_pMaskEdit.on_getBindableProperties=function(){return "value";};_pMaskEdit.on_apply_prop_enable=function(_a){var _b=this._input_element;if(_b){var _c=this.color?this.color:this._getCSSStyleValue("color");if(!this._onlydisplay){_b.setElementEnable(_a,_c);}}};_pMaskEdit.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this.on_apply_displaynulltext(this._getStringResourceProperty(this.displaynulltext));this.on_apply_displayinvalidtext(this._getStringResourceProperty(this.displayinvalidtext));this.on_apply_postfixtext(this._getStringResourceProperty(this._p_postfixtext));};_pMaskEdit.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){if(this._undostack){this._undostack.clear();}this._setValue(undefined);}};_pMaskEdit.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=_b.getColumn(_c,_d);_e=this._convertValueType(_e,true);if(_e===this._p_value){return;}if(this._undostack){this._undostack.clear();}this._setValue(_e);}};_pMaskEdit.on_changeUserStatus=function(_a,_b,_c){if(_b){return _a;}else{return _c;}};_pMaskEdit._getDlgCode=function(){return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:false};};_pMaskEdit._getDragData=function(){return this.getSelectedText();};_pMaskEdit._on_getAccessibilityAdditionalLabel=function(){var _a=this._input_element;if(_a&&_a._wantAccessibilityAdditionalLabel){if(_a._wantAccessibilityAdditionalLabel()){if(this._p_text!==undefined&&this._p_value!==undefined){return this._p_text;}}}if(!this._p_text){return this.displaynulltext?this.displaynulltext:"";}return "";};_pMaskEdit._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f;if(this._displaytext&&this._displaytext!==""){_f=this._displaytext;}else{_f=this._p_text;}if(_f){var _g=this._getCurrentStyleInheritValue("font");var _h=this._getReferenceAbsoluteFont(_g);var _i=this._getCurrentStyleInheritValue("wordSpacing");var _j=this._getCurrentStyleInheritValue("letterSpacing");var _k=nexacro._getTextSize(this._p_text,_g,false,undefined,"none",_i,_j,undefined,undefined,undefined,_h);_b+=Math.ceil(_k[0]);_c+=Math.ceil(_k[1]);}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pMaskEdit.set_text=nexacro._emptyFn;_pMaskEdit.set_value=function(_a){_a=this._convertValueType(_a);if(this._p_value!==_a){if(!this.applyto_bindSource("value",_a)){return;}this._setValue(_a);this._updateAccessibilityLabel();}};_pMaskEdit.on_apply_value=function(_a){var _b=this._input_element;var _c;var _d=false;if(_b){_c=this._p_text;_d=this._isInvalidValue(_a);if(this._is_created){if(nexacro._isNull(_a)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);if(_d){this._changeUserStatus("invalidtext",true);}else{this._changeUserStatus("invalidtext",false);}}}else{this._changeUserStatus("nulltext",false);this._changeUserStatus("invalidtext",false);}var _e=this._getMaskObj();if(_e){if(_d){_c=this._p_text=_e.applyMask("");}else{_c=this._p_text=_e.applyMask(_a);}}if(!this._onlydisplay){var _f=_b.getElementCaretPos();if(this._undostack){if(_f&&_f!=-1){this._undostack.push(_c,_f.begin,_f.end);}else{this._undostack.push(_c,0,0);}}if(nexacro._isNull(_a)){_b.setElementDefaultValue(_c);if(_d){_b.setElementValue(_c,_d);}else{_b.setElementValue(_a,_d);}}else{_b.setElementValue(_c,_d);}this._displaytext=_b.getElementText();_b.setElementSetSelect((_f&&_f!=-1)?_f.begin:0,_f?_f.end:0);}else{if(this.displaynulltext&&nexacro._isNull(_a)){var _g=this._getStringResourceProperty(this._p_displaynulltext);_b.setElementText(_g);}else{if(this._isInvalidValue(_a)){_c=this._getStringResourceProperty(this._p_displayinvalidtext);}_b.setElementText(_c);}}if(this._p_text!=_c){this._p_text=_c;}this._updateAccessibilityLabel();this._default_value=this._p_value;this._default_text=this._p_text;}};_pMaskEdit.set_displaynulltext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this._p_displaynulltext!=_a){this._p_displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pMaskEdit.on_apply_displaynulltext=function(_a){var _b=this._input_element;if(_b){var _c=this._getStringResourceProperty(_a);if(this._onlydisplay){this.on_apply_value(this._p_value);}else{if(_a==""){_b.setElementDisplayNullText(_c?_c:_a,this._getEmptyText());}else{_b.setElementDisplayNullText(_c?_c:_a);}this._displaytext=_b.getElementText();}}};_pMaskEdit.set_displayinvalidtext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this._p_displayinvalidtext!=_a){this._p_displayinvalidtext=_a;this.on_apply_displayinvalidtext(_a);}};_pMaskEdit.on_apply_displayinvalidtext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");var _b=this._input_element;if(_b){if(this._onlydisplay){this.on_apply_value(this._p_value);}else{_b.setElementDisplayInvalidText(_a);this._displaytext=_b.getElementText();}}};_pMaskEdit.set_readonly=function(_a){if(this._onlydisplay){return;}_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pMaskEdit.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementReadonly(_a);}}};_pMaskEdit.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoselect!=_a){this._p_autoselect=_a;this.on_apply_autoselect(_a);}};_pMaskEdit.on_apply_autoselect=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementAutoSelect(_a);}};_pMaskEdit.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoskip!=_a){this._p_autoskip=_a;this.on_apply_autoskip(_a);}};_pMaskEdit.on_apply_autoskip=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementAutoSkip(_a);}};_pMaskEdit.set_clipmode=function(_a){var _b=["includespace","excludespace"];if(_b.indexOf(_a)==-1){return;}if(this._p_clipmode!=_a){this._p_clipmode=_a;this.on_apply_clipmode(_a);}};_pMaskEdit.on_apply_clipmode=function(_a){var _b=this._masktypeobj;if(_b){if(this._p_type=="string"){if(_a=="includespace"){_b.setFillChar(' ');}else{_b.setFillChar('');}}}};_pMaskEdit.set_limitbymask=function(_a){var _b=["none","integer","decimal","both"];if(_b.indexOf(_a)==-1){return;}if(this._p_limitbymask!=_a){this._p_limitbymask=_a;this.on_apply_limitbymask(_a);this.on_apply_value(this._p_value);}};_pMaskEdit.on_apply_limitbymask=function(_a){var _b=this._masktypeobj;if(_b){if(this._p_type=="number"){_b.setLimitType(_a);}}};_pMaskEdit.set_format=function(_a){_a=nexacro._toString(_a);if(this._p_format!=_a){this._p_format=_a;this._on_apply_format(_a);this.on_apply_value(this._p_value);}};_pMaskEdit._on_apply_format=function(_a){var _b=this._masktypeobj;if(_b){_a=_a?_a.replace(/^\s\s*/,''):"";_b.setMask(_a);this._on_apply_inputtype();}};_pMaskEdit.set_maskchar=function(_a){_a=nexacro._toString(_a);if(_a==""){_a="_";}else if(_a.length>1){_a=_a.charAt(0);}if(this._p_maskchar!=_a){this._p_maskchar=_a;this.on_apply_maskchar(_a);this.on_apply_value(this._p_value);}};_pMaskEdit.on_apply_maskchar=function(_a){var _b=this._masktypeobj;if(_b){_b.setMaskChar(_a);}};_pMaskEdit.set_trimtype=function(_a){var _b=["none","left","right","both"];if(_b.indexOf(_a)==-1){return;}if(this._p_trimtype!=_a){this._p_trimtype=_a;}};_pMaskEdit.set_type=function(_a){var _b=["number","string"];if(_b.indexOf(_a)==-1){return;}if(this._p_type!=_a){this._p_type=_a;this.on_apply_type(_a);this.on_apply_limitbymask(this._p_limitbymask);this.on_apply_maskchar(this._p_maskchar);this.on_apply_clipmode(this._p_clipmode);this._on_apply_format(this._p_format);this.on_apply_locale(this._getLocale());this.on_apply_value(this._p_value);}};_pMaskEdit.on_apply_type=function(_a){this._masktypeobj=null;if(_a=="number"){this._masktypeobj=new nexacro._EditMaskTypeNumber();}else if(_a=="string"){this._masktypeobj=new nexacro._EditMaskTypeString();}var _b=this._input_element;if(_b){if(_a=="number"){_b.setElementTextAlignByClassCSSSelector("right");}else{_b.setElementTextAlignByClassCSSSelector("left");}}};_pMaskEdit.set_locale=function(_a){if(this._p_locale!=_a){this._p_locale=_a;this._locale=_a;this.on_apply_locale(_a);this.on_apply_value(this._p_value);}};_pMaskEdit.on_apply_locale=function(_a){var _b=this._masktypeobj;if(_b){_b.setLocale(_a);}};_pMaskEdit.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_usesoftkeyboard){this._p_usesoftkeyboard=_a;if(!this._initsoftkeyboard){this._initsoftkeyboard=true;}this.on_apply_usesoftkeyboard();}};_pMaskEdit.on_apply_usesoftkeyboard=function(){var _a=this._input_element;if(_a&&!this._onlydisplay){_a.setElementUseSoftKeyboard(this._getUseSoftKeyboardValue(this._initsoftkeyboard));}};_pMaskEdit.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usecontextmenu!=_a){this._p_usecontextmenu=_a;}};_pMaskEdit.set_cursor=function(_a){this._p_cursor=_a;if(_a){if(this._cursor==null||this._cursor._p_value!=_a){if(this._p_enable&&_a=="auto"){_a="text";}var _b=nexacro.CursorObject(_a);this._cursor=_b;this.on_apply_cursor(_b);}}else{if(this._cursor){this._cursor=null;this.on_apply_cursor(null);}}};_pMaskEdit.on_apply_textAlign=function(_a){var _b=this._input_element;if(_b){_b.setElementTextAlign(_a);}};_pMaskEdit.on_apply_padding=function(_a){var _b=this._input_element;if(_b){_b.setElementPadding(_a);}};_pMaskEdit.on_apply_textDecoration=function(_a){var _b=this._input_element;if(_b){_b.setElementTextDecoration(_a);}};_pMaskEdit.set_postfixtext=function(_a){_a=nexacro._toString(_a);if(this._p_postfixtext!=_a){this._p_postfixtext=_a;this.on_apply_postfixtext(_a);}};_pMaskEdit.on_apply_postfixtext=function(_a){var _b=this._masktypeobj;if(_b){var _c=this._getStringResourceProperty(_a);_b.setPostfixtext(_c);this.on_apply_value(this._p_value);}};_pMaskEdit.set_imeaction=function(_a){if(_a){var _b=_a.split(',');var _c=["none","done","go","search","send","next","previous"];for(var _d=0,_e=_b.length;_d<_e;_d++ ){if(_c.indexOf(_b[_d])==-1){return;}}}else{return;}if(this._p_imeaction!=_a){this._p_imeaction=_a;this.on_apply_imeaction(_a);}};_pMaskEdit.on_apply_imeaction=function(_a){var _b=this._input_element;if(_b&&!this._onlydisplay){_b.setElementImeAction(_a);}};_pMaskEdit._properties=[{name:"text",readonly:true},{name:"value"},{name:"displaynulltext"},{name:"displayinvalidtext"},{name:"readonly"},{name:"autoselect"},{name:"autoskip"},{name:"clipmode"},{name:"limitbymask"},{name:"format"},{name:"maskchar"},{name:"trimtype"},{name:"type"},{name:"locale"},{name:"usesoftkeyboard"},{name:"usecontextmenu"},{name:"cursor"},{name:"postfixtext"},{name:"imeaction"}];nexacro._defineProperties(_pMaskEdit,_pMaskEdit._properties);_pMaskEdit.getLength=function(){var _a=this._p_value;if(this._p_type=="number"){var _b=/[.,\-+]/gi;if(_b.test(_a)){_a=_a.replace(_b,"");}}return _a?_a.length:0;};_pMaskEdit.getCaretPos=function(){if(this._p_readonly||!this._isEnable()){return -1;}var _a=this._input_element;if(_a){var _b=_a.getElementCaretPos();if(_b&&_b!=-1){return _b.begin;}}return -1;};_pMaskEdit.setCaretPos=function(_a){var _b=this._input_element;if(_b){if(this._p_readonly||!this._isEnable()){return false;}if(!this._onlydisplay){if(arguments.length==0){_a=0;}else{_a=nexacro._toInt(_a);if(_a==-1){if(_a){_a=this._p_text.length;}else{_a=0;}}}_b.setElementSetSelect(_a,_a);}return true;}return false;};_pMaskEdit.getSelect=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){return _a.getElementSelectionRange();}}return [0,0];};_pMaskEdit.setSelect=function(_a,_b){var _c=this._input_element;if(_c){if(!this._onlydisplay){var _d=this._p_text?this._p_text:"";var _e=_d.length;if(nexacro._isNull(_a)||_a===""){_a=0;}if(nexacro._isNull(_b)||_b===""){_b=-1;}if(!nexacro._isNumber(_a)){_a=nexacro._toInt(_a);}if(!nexacro._isNumber(_b)){_b=nexacro._toInt(_b);}if(_a==-1){_a=_e;}if(_b==-1){_b=_e;}if(_a>_b){var _f=_a;_a=_b;_b=_f;}_c.setElementSetSelect(_a,_b);}return true;}return false;};_pMaskEdit.getSelectedText=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){var _b=_a.getElementSelectionRange();var _c=_b[0],_d=_b[1];var _e=this._p_text;if(_e&&(_c!=_d)){return _e.substring(_c,_d);}}}return "";};_pMaskEdit.updateToDataset=function(){this._result_updateToDataset=this.applyto_bindSource("value",this._p_value);if(this._result_updateToDataset){this._default_value=this._p_value;this._default_text=this._p_text;}this._processing_updateToDataset=true;return this._result_updateToDataset;};_pMaskEdit._on_value_change=function(_a,_b,_c,_d){var _e=true;if(!this.on_fire_canchange(this,_a,_b,_c,_d)){_e=false;}if(_e){this._default_value=_d;this._default_text=_c;if(this._processing_updateToDataset&&!this._result_updateToDataset&&_b===_d){this._processing_updateToDataset=false;this._result_updateToDataset=true;return false;}else if(!this.applyto_bindSource("value",_d)){_e=false;}if(_e){this._default_text=_c;if(this._p_text!=_c){var _f=this._input_element;var _g=_f.getElementCaretPos();_f.setElementValue(_c);_f.setElementSetSelect(_g.begin,_g.end);}this._p_text=_c;this.on_fire_onchanged(this,_a,_b,_c,_d);this._updateAccessibilityLabel();}}if(!_e){this._default_value=_b;this._default_text=_a;}return _e;};_pMaskEdit._on_input_undo=function(_a){if(this._p_readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(_a){_b.updateElementText(_a.value,_a.end);_b.setElementSetSelect(_a.start,_a.end);return true;}}};_pMaskEdit._on_input_redo=function(_a){if(this._p_readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(_a){_b.updateElementText(_a.value,_a.end);_b.setElementSetSelect(_a.start,_a.end);return true;}}};_pMaskEdit._on_input_autoskip=function(){var _a=this._getMaskObj();if(_a){if(this._p_autoskip&&_a.isFilled()&&nexacro._nvl(this._p_value,true)!=true){this._setFocusToNextComponent();}}};_pMaskEdit.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(this._p_readonly||!this._isEnable()){return;}if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}var _g=this._input_element;if(_g){if(!_b&&!_d&&_c&&_a==90){if(this._undostack){this._undostack.undo();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}if(this._undostack){var _h=_g.getElementCaretPos();if(_h&&_h!=-1){this._undostack.update(_h.begin,_h.end);}}}};_pMaskEdit.on_keydown_default_action=function(_a){if(this._p_readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){var _c=this._getMaskObj();var _d=_b.value;var _e=_b.getElementCaretPos();var _f,_g;this._is_keydown_ime=false;if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){var _h=_b.handle;this._is_keydown_ime=true;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){_h.blur();_h.focus();}_b.stopSysEvent();}else if(_a==nexacro.Event.KEY_RETURN){var _i=this._default_value;var _j=this._default_text;var _k=this._p_value;var _l=this._p_text;if(_c&&this._p_type=="string"){_l=_c.applyMask(_k);}if(_i!=_k||_l!=_j){if(!this._on_value_change(_j,_i,_l,_k)){this._p_value=_i;this._p_text=_j;}_b.setElementValue(this._p_text);}}else if(_a==nexacro.Event.KEY_BACKSPACE){if(_c&&_d){if(_e.end>0&&_e.begin==_e.end){_f=_e.end-1;while((_g=_d.charAt(_f))){if(_c.isDeletableChar(_g,_f)||_f==0){break;}_f-- ;}if(_f!=(_e.end-1)){_b.setElementSetSelect(_f+1,_f+1);}}}}else if(_a==nexacro.Event.KEY_DEL){if(_c&&_d){var _m=_d.length;if(_e.end<_m&&_e.begin==_e.end){_f=_e.end;while((_g=_d.charAt(_f))){if(_c.isDeletableChar(_g,_f)||_f==_m){break;}_f++ ;}if(_f!=_e.end){_b.setElementSetSelect(_f,_f);}}}}}};_pMaskEdit.on_keypress_basic_action=function(_a,_b,_c,_d){var _e=this._input_element;if(_e){if(_a==nexacro.Event.KEY_TAB){if(!this._getDlgCode().want_tab){_e.stopSysEvent();return;}}if(_a!==0&&_b===0){return true;}else{if(_a==nexacro.Event.KEY_ENTER||_a==nexacro.Event.KEY_ESC){return true;}}_b=_b||_a;if(!_d&&!_c&&_b){var _f=String.fromCharCode(_b);if(_f.length>0){var _g=this._getMaskObj();var _h=_e.getElementCaretPos();var _i=_g.findNearEditablePos(_h.begin,1);if(_i<0||_g.isFilterChar(_f,_i,_h.end)){_e.stopSysEvent();this._on_input_autoskip();return;}_g.keyPressed(_f,_i);}}}};_pMaskEdit.on_beforekeyinput_basic_action=function(_a,_b,_c,_d,_e){if(this._p_readonly||!this._isEnable()){return 0;}var _f=this._input_element;if(_f){if(_f._use_event_beforeinput){return this._beforeinput_process_with_HTMLEvent(_a,_b,_c,_d,_e);}else{return this._beforeinput_process_with_NexacroInputEvent(_a,_b,_c,_d);}}};_pMaskEdit.on_keyinput_basic_action=function(){if(this._p_readonly||!this._isEnable()){return false;}var _a=this._input_element;if(_a){var _b=_a.value;var _c=_b?_b:"";var _d=this._getMaskObj();if(_d){_b=_d.removeMask(_c);}if(this._p_clipmode=="includespace"){var _e=this._p_trimtype;if(_e=="both"){_b=_b.replace(/^\s+|\s+$/g,"");}else if(_e=="left"){_b=_b.replace(/^\s+/,"");}else if(_e=="right"){_b=_b.replace(/\s+$/,"");}}if(!_b&&!this._default_value&&!this._default_text){this._p_value=this._default_value;}else{this._p_value=_b;}this._p_text=_c;if(this._undostack){var _f=_a.getElementCaretPos();if(_f&&_f!=-1){this._undostack.push(_c,_f.begin,_f.end);}else{this._undostack.push(_c,0,0);}}}};_pMaskEdit.on_keyinput_default_action=function(){if(this._p_readonly||!this._isEnable()){return false;}var _a=this._input_element;if(_a){this._on_input_autoskip();}};_pMaskEdit.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);var _c=this._getRootComponent(this);if(_c==_a){if(this._p_parent&&(!this._p_parent._is_subcontrol||this._p_parent==_b._p_parent)){return;}}var _d=this._input_element;if(_d){var _e=this._getMaskObj();var _f=this._default_value;var _g=this._default_text;var _h=this._p_value;var _i=_e?_e.applyMask(_h):this._p_text;if(_f!=_h||_i!=_g){if(!this._processing_canchange){if(!this._on_value_change(_g,_f,_i,_h)){this._p_value=_f;}}}this._caret_pos=_d.getElementCaretPos();_h=this._p_value;var _j=this._isInvalidValue(_h);if(_e){_e.setEditStatus(false);if(_j){_i=_e.applyMask("");}else{_i=_e.applyMask(_h);}this._p_text=_i;if(!this._onlydisplay){if(nexacro._isNull(_h)){_d.setElementDefaultValue(_i);_i=_h;}_d.setElementValue(_i,_j);}else{if(this.displaynulltext&&nexacro._isNull(_h)){_d.setElementText(this.displaynulltext);}else{if(this.displayinvalidtext&&_j){_d.setElementText(this.displayinvalidtext);}else{_d.setElementText(_i);}}}}if(!this._onlydisplay){if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);if(this._isInvalidValue(this._p_value)){this._changeUserStatus("invalidtext",true);}else{this._changeUserStatus("invalidtext",false);}}var _k=_d.getElementSelectionRange();if(_k[0]==_k[1]){_d._setElementLastSelectionRange();}if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}var _l=this._getRootWindow();var _m=_l._indexOfCurrentFocusPaths(this);if(_m<0&&!this._is_subcontrol){_d.setElementBlur();}}}};_pMaskEdit.on_click_basic_action=function(_a,_b){var _c=this._input_element;if(_c){var _d=this._getWindow();if(_d&&this._track_capture){var _e=_d._getCaptureComp(true,false,this);if(!this._onlydisplay&&(!_e||_e==this)){_c.setElementFocus(_b);}}}};_pMaskEdit.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oneditclick&&this.oneditclick._has_handlers){var _n=this.getCaretPos();var _o=this._getClientXY(_g,_h);var _p=new nexacro.EditClickEventInfo(this,"oneditclick",_n,_a,_b,_c,_d,_e,_f,_g,_h,_o[0],_o[1],this,this,_m);return this.oneditclick._fireEvent(this,_p);}return true;};_pMaskEdit.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pMaskEdit.on_fire_canchange=function(_a,_b,_c,_d,_e){if(this.canchange&&this.canchange._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"canchange",_b,_c,_d,_e);this._processing_canchange=true;var _g=this.canchange._fireCheckEvent(this,_f);this._processing_canchange=false;return _g;}return true;};_pMaskEdit.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}};_pMaskEdit._convertValueType=function(_a,_b){if(nexacro._isNull(_a)){return _a;}var _c;var _d=nexacro._getDatatypeRule();if(_b){if(_d=="1.0"){return _a;}}_c=nexacro._toString(_a).replace(/&quot;/g,"\"");return _c;};_pMaskEdit._setValue=function(_a){var _b="";if(!nexacro._isNull(_a)){_b=nexacro._toString(_a);}this._p_text=_b;this._p_value=_a;this.on_apply_value(_a);};_pMaskEdit._setLocale=function(_a){if(this._p_locale){return;}if(this._locale!=_a){this._locale=_a;this.on_apply_locale(_a);this.on_apply_value(this._p_value);}};_pMaskEdit._setEnableView=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementEnable(_a);}}};_pMaskEdit._setDefaultCaret=nexacro._emptyFn;_pMaskEdit._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm()._getNextComponent(_a,true,true);if(_b){_b.setFocus();if(!_b._p_autoselect&&_b._is_editable_control){_b._setDefaultCaret();}}};_pMaskEdit._on_apply_inputtype=function(){var _a=this._getMaskObj();var _b=this._input_element;if(_a&&_b){var _c=_a.getInputMode();if(!this._onlydisplay){_b.setElementInputType(_c,true);}}};_pMaskEdit._getMaskObj=function(){var _a=this._masktypeobj;if(_a){return _a;}return null;};_pMaskEdit._getEmptyText=function(){var _a=this._masktypeobj;if(_a){return _a.applyMask("");}return "";};_pMaskEdit._beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=this._getMaskObj();var _h=[];if(_g){var _i=_f._getInputValue();var _j,_k,_l,_m,_n;switch(_e){case "deleteContentBackward":if(_c==_d){_j=_i.substring(0,_c -1);_k=_i.substring(_d);_l=_j+_k;_m=_g.arrangeMask(_l,_c -1,_c -1);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}else{_j=_i.substring(0,_c);_k=_i.substring(_d);_l=_j+_k;if((_d-_c==_i.length)){_f._beforeinput_result_data=_g.applyMask(_l);_f._beforeinput_result_pos={begin:_c,end:_c};}else{_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}}_h.push(_f._BeforeinputState.REPLACE);break;case "deleteContentForward":if(_c==_d){_j=_i.substring(0,_c);_k=_i.substring(_d+1);_l=_j+_k;_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}else{_j=_i.substring(0,_c);_k=_i.substring(_d);_l=_j+_k;if((_d-_c==_i.length)){_f._beforeinput_result_data=_g.applyMask(_l);_f._beforeinput_result_pos={begin:_c,end:_c};}else{_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}}_h.push(_f._BeforeinputState.REPLACE);break;case "deleteByCut":_j=_i.substring(0,_c);_k=_i.substring(_d);_l=_j+_k;if((_d-_c==_i.length)){_f._beforeinput_result_data=_g.applyMask(_l);_f._beforeinput_result_pos={begin:_c,end:_c};}else{_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}_h.push(_f._BeforeinputState.REPLACE);break;case "insertText":case "insertCompositionText":_a=_a?_a:"";_n=_g.findNearEditablePos(_c,1);if(_n<0||_g.isFilterChar(_a,_n)||this._is_keydown_ime){_h.push(_f._BeforeinputState.CANCEL);}else{if(this._p_type=="number"){_l=_i.substring(0,_c)+_a+_i.substring(_d);_m=_g.arrangeMask(_l,_c,_d+_a.length);if(_m==null){_h.push(_f._BeforeinputState.CANCEL);}else if(_m.text!=_l){_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};_h.push(_f._BeforeinputState.REPLACE);}else{_h.push(_f._BeforeinputState.PASS);}}else{if(_c==_d){_l=_i.substring(0,_c)+_a+_i.substring(_d);_d=_d+_a.length;}else{_l=_i.substring(0,_c)+_a+_i.substring(_d,_i.length);_d=_c+_a.length;}_m=_g.arrangeMask(_l,_c,_d);if(_m==null){_h.push(_f._BeforeinputState.CANCEL);}else{_n=_g.findNearEditablePos(_m.pos,1);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_n,end:_n};_h.push(_f._BeforeinputState.REPLACE);}}}break;case "insertFromPaste":_n=_g.findNearEditablePos(_c,1);if(_n<0||_g.isFilterChar(_a,_n)){_h.push(_f._BeforeinputState.CANCEL);}else{if(this._p_type=="number"){_l=_i.substring(0,_c)+_a+_i.substring(_d);_m=_g.arrangeMask(_l,_c,_d+_a.length);if(_m==null){_h.push(_f._BeforeinputState.CANCEL);}else if(_m.text!=_l){_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};_h.push(_f._BeforeinputState.REPLACE);}else{_h.push(_f._BeforeinputState.PASS);}}else{if(_c==_d){_l=_i.substring(0,_c)+_a+_i.substring(_d);_d=_d+_a.length;}else{_l=_i.substring(0,_c)+_a+_i.substring(_c);_d=_c+_a.length;}_m=_g.arrangeMask(_l,_c,_d);if(_m==null){_h.push(_f._BeforeinputState.CANCEL);}else{_n=_g.findNearEditablePos(_m.pos,1);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_n,end:_n};_h.push(_f._BeforeinputState.REPLACE);}}}break;default:_h.push(_f._BeforeinputState.PASS);break;}}return _h;};_pMaskEdit._beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;var _f=_e._paste_caret_pos?true:false;var _g=_a?_a:"";var _h=this._getMaskObj();if(_h){var _i=_h.arrangeMask(_g,_c,_d);if(_i==null){_e.replaceElementText("",_c,_d);_e.stopSysEvent();}else{var _j=_h.findNearEditablePos(_i.pos,1);if(_f&&_i.text==this._p_text){_e._event_stop=true;_j=_c;}if(_i.text!=_g||_i.pos!=_j){_e.updateElementText(_i.text,_j);}if(_i.text==this._p_text){var _k=_h.removeMask(_i.text);if(this._p_clipmode=="includespace"){var _l=this._p_trimtype;if(_l=="both"){_k=_k.replace(/^\s+|\s+$/g,"");}else if(_l=="left"){_k=_k.replace(/^\s+/,"");}else if(_l=="right"){_k=_k.replace(/\s+$/,"");}}this._p_value=_k;}}}};_pMaskEdit._isInvalidValue=function(_a){if(nexacro._isNull(_a)||_a===""){return false;}if(this._p_type=="number"){if(!isFinite( +_a)||isNaN( +_a)){return true;}}else{_a=_a+"";var _b=this._getMaskObj();if(_b){_b.applyMask(_a);if(_b._is_mismatch){return true;}}}return false;};_pMaskEdit._on_input_compositionend=function(_a){var _b=this._input_element;if(_b){if(this._undostack){var _c=_b.getElementCaretPos();if(_c&&_c!=-1){this._undostack.push(_a,_c.begin,_c.end);}else{this._undostack.push(_a,0,0);}}}};_pMaskEdit=null;}if(!nexacro.TextArea){nexacro.TextArea=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=_m;if(_m){this._apply_client_padding=true;this._p_readonly=true;}};var _pTextArea=nexacro._createPrototype(nexacro.Component,nexacro.TextArea);nexacro.TextArea.prototype=_pTextArea;nexacro.TextArea._TAB_CHAR='\u0009';_pTextArea._type_name="TextArea";_pTextArea._p_acceptstab=false;_pTextArea._p_autoselect=false;_pTextArea._p_autoskip=false;_pTextArea._p_displaynulltext="";_pTextArea._p_displayinvalidtext=undefined;_pTextArea._initsoftkeyboard=undefined;_pTextArea._p_usesoftkeyboard=true;_pTextArea._p_dragscrolltype="both";_pTextArea._p_imemode="none";_pTextArea._p_inputfilter="none";_pTextArea._p_inputmode="normal";_pTextArea._p_inputtype="normal";_pTextArea._p_maxlength=0;_pTextArea._p_readonly=false;_pTextArea._p_usecontextmenu=true;_pTextArea.useime="global";_pTextArea._p_text="";_pTextArea._p_value=undefined;_pTextArea._not_use_scrollTop=true;_pTextArea._input_element=null;_pTextArea._inputfilter_obj=null;_pTextArea._inputtype_obj=null;_pTextArea._undostack=null;_pTextArea._default_value=undefined;_pTextArea._default_text="";_pTextArea._keypad_type="text";_pTextArea._imedisable=false;_pTextArea._want_tab=true;_pTextArea._is_set_value=false;_pTextArea._update_scroll_lock=false;_pTextArea._processing_updateToDataset=false;_pTextArea._result_updateToDataset=true;_pTextArea._processing_canchange=false;_pTextArea._apply_filter=true;_pTextArea._onlydisplay=false;_pTextArea._apply_client_padding=false;_pTextArea._has_inputElement=true;_pTextArea._change_value=false;_pTextArea._processing_autoskip=false;_pTextArea._is_undo=false;_pTextArea._is_scrollable=true;_pTextArea._is_editable_control=true;_pTextArea._use_translate_scroll=false;_pTextArea._use_container_move=false;_pTextArea._use_readonly_status=true;_pTextArea._caret_pos=-1;_pTextArea._event_list={"oneditclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"onmousewheel":1,"oncontextmenu":1,"onvscroll":1,"onhscroll":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pTextArea._p_accessibilityrole="textarea";_pTextArea.on_create_contents=function(){var _a=this.getElement();if(_a){var _b;if(!this._onlydisplay){_b=this._input_element=new nexacro.TextAreaElement(_a,"textarea");_b.setElementAutoSkip(this._p_autoskip);_b.setElementAutoSelect(this._p_autoselect);_b.setElementUseIme(this.useime);_b.setElementImeMode(this._p_imemode);_b.setElementReadonly(this._p_readonly);_b.setElementDisplayNullText(this._getStringResourceProperty(this._p_displaynulltext));_b.setElementMaxLength(this._p_maxlength);}else{_b=this._input_element=new nexacro.TextBoxElement(_a,"textarea");_b.setElementVerticalAlign("top");}_b.setElementPosition(this._getClientLeft(),this._getClientTop());_b.setElementSize(this._getClientWidth(),this._getClientHeight());_b.setElementTextDecoration(this._textdecoration);_b.setElementTextAlign(this._p_textAlign);_b.setElementPadding(this._padding);var _c=this._getCSSStyleValue("wordWrap");if(_c){_b.setElementCSSMapInfo(_c);}if(this.wordWrap){_b.setElementWordWrap(this._p_wordWrap);}this._undostack=new nexacro._EditUndoStack(this);}};_pTextArea.on_created_contents=function(_a){var _b=this._input_element;if(_b){var _c=this._p_wordWrap||this._getCSSStyleValue("wordWrap");if(this._hscrollbartype&&this._hscrollbartype.indexOf("auto")>-1&&(_c!="none"&&_c!==undefined)){this._hscrollbartype="none";}this.on_apply_padding(this._padding);this.on_apply_value(this._p_value);_b.create(_a);this.on_apply_inputtype();this.on_apply_usesoftkeyboard();if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}if(nexacro._enableaccessibility){this._on_created_accessibility_contents(_a);}this.on_apply_scrollbartype();this._onResetScrollBar();this._onRecalcScrollSize();}};_pTextArea.on_destroy_contents=function(){var _a=this._input_element;if(_a){_a.destroy();this._input_element=null;}var _b=this._undostack;if(_b){_b.destroy();this._undostack=null;}var _c=this._inputfilter_obj;if(_c){this._inputfilter_obj=null;}var _d=this._inputtype_obj;if(_d){this._inputtype_obj=null;}var _e=this._vscroll_animationframe;if(_e){_e.destroy();}var _f=this._hscroll_animationframe;if(_f){_f.destroy();}};_pTextArea.on_create_contents_command=function(){var _a=this._input_element;if(_a){var _b=this._p_wordWrap||this._getCSSStyleValue("wordWrap");if(this._hscrollbartype&&this._hscrollbartype.indexOf("auto")>-1&&(_b!="none"&&_b!==undefined)){this._hscrollbartype="none";}this.on_apply_padding(this._padding);this.on_apply_usesoftkeyboard();return _a.createCommand();}return "";};_pTextArea.on_attach_contents_handle=function(_a){var _b=this._input_element;if(_b){_b.attachHandle(_a);this.on_apply_value(this._p_value);if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}}if(nexacro._enableaccessibility){this._on_attach_accessibility_contents_handle(_a);}this.on_apply_scrollbartype();this._onRecalcScrollSize();this._onResetScrollBar();};_pTextArea.on_change_containerRect=function(_a,_b){var _c=this._input_element;if(_c){_c.setElementSize(_a,_b);if(this._update_scroll_lock==true){return false;}this._update_scroll_lock=true;this._onRecalcScrollSize();this._onResetScrollBar();this._update_scroll_lock=false;}};_pTextArea._getInputElement=function(){return this._input_element;};_pTextArea._apply_setfocus=function(_a,_b){this._processing_updateToDataset=false;var _c=this._input_element;if(_c){if(!this._onlydisplay){_c.on_apply_imeSet();_c.on_apply_force_imeSet();this._want_tab=true;if(_a){this._default_value=this._p_value;this._default_text=this._p_text;}var _d=_c._last_selection_range;if(_d&&!this._p_autoselect){this._caret_pos={begin:_d[0],end:_d[1]};}var _e=this._getWindow();if(_e){var _f=_e._cur_ldown_elem?_e._cur_ldown_elem.linkedcontrol:null;if(!(_f&&_f instanceof nexacro.ScrollBarControl)){_c.setElementFocus(_a,_b);}}this._changeUserStatus("nulltext",false);var _g=_c.getElementText();if(_g!=this._p_text){this._default_text=this._p_text=_g;}if(nexacro._needAdjustScrollPosition(this._is_set_value)){this._adjust_scrollPosition(_c,_a);}if(!this._p_autoselect){if(this._caret_pos==-1){if(this._change_value){_c.setElementSetSelect(this._p_value?this._p_value.length:0);}else{_c.setElementSetSelect(0,0);}}}}else{this._want_tab=true;if(_a){this._default_value=this._p_value;this._default_text=this._p_text;}if(nexacro._needAdjustScrollPosition(this._is_set_value)){this._adjust_scrollPosition(_c,_a);}}}};_pTextArea.on_apply_status=function(_a,_b){var _c=this._input_element;if(_c){if(!this.wordWrap){var _d=this._getCSSStyleValue("wordWrap",_a,_b);if(_d){_c.setElementCSSMapInfo(_d);}}}};_pTextArea.on_getBindableProperties=function(){return "value";};_pTextArea.on_apply_prop_enable=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementEnable(_a,this._getCSSStyleValue("color"));this._update_scroll_lock=true;this._onRecalcScrollSize();this._onResetScrollBar();this._update_scroll_lock=false;}}if(nexacro._enableaccessibility){this._on_accessibility_apply_prop_enable();}};_pTextArea.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this.on_apply_displaynulltext(this._getStringResourceProperty(this._p_displaynulltext));};_pTextArea._on_accessibility_apply_prop_enable=nexacro._emptyFn;_pTextArea.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){if(this._undostack){this._undostack.clear();}this._setValue(undefined);}};_pTextArea.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=this._input_element;var _f=_b.getColumn(_c,_d);_f=this._convertValueType(_f,true);if(_f==this._p_value){return;}if(this._undostack){this._undostack.clear();}var _g=false;if(this._p_value!=_f){_g=true;}this._setValue(_f);if(_e&&_g&&!this._onlydisplay){_e.setElementSetSelect(this._p_value?this._p_value.length:0);this._caret_pos=_e.getElementCaretPos();}}};_pTextArea.on_changeUserStatus=function(_a,_b,_c,_d,_e){if(_b){return _a;}else{return _c;}};_pTextArea._onRecalcScrollSize=function(){if(this._onlydisplay){return;}var _a=this.getElement();var _b=this._input_element;var _c=null;var _d=_a.getClientWidth();var _e=_a.getClientHeight();if(_d<=0||_e<=0){return;}if(_a&&_b){_c=nexacro._get_invisible_obj(this);nexacro._reset_invisible_obj(_c,true);var _f=this._p_hscrollbar;var _g=this._p_vscrollbar;var _h=_g?_g._max:0;var _i=_b.getElementScrollSize();if(_i){_a.setElementScrollMaxSize(_i.width,_i.height);}var _j;var _k=this;var _l=this.scrolltype;if(_g&&(_l!="none"&&_l!="horizontal")){if(_h!=_g._max){var _m=this._getCurrentStyleInheritValue("font");var _n=this._getReferenceAbsoluteFont(_m);var _o=this._getCurrentStyleInheritValue("wordSpacing");var _p=this._getCurrentStyleInheritValue("letterSpacing");var _q=nexacro._getTextSize("A",_m,false,undefined,"none",_o,_p,undefined,undefined,undefined,_n);var _r=this._getCSSStyleValue("padding");var _s=_a.getClientHeight();var _t=_r?_s-(_r.top+_r.bottom):_s;var _u=this._getCaretLine();var _v=_g._pos?_g._pos/_q[1]:0;var _w=_s/_q[1];if(_v+_w<_u){_g.set_pos(_q[1]* _u-_t);}}else{_j=_b.getElementVScrollPos();if(_g._pos!=_j){_g.set_pos(_j);}}}if(_f&&(_l!="none"&&_l!="vertical")){_j=_b.getElementHScrollPos();if(_f._pos!=_j){var _x=this._hscroll_animationframe;if(!_x){_x=this._hscroll_animationframe=new nexacro.AnimationFrame(_k,_f.set_pos(_j));}else{_x._setCallback(_f.set_pos(_j));}if(_x.callback){_x.start();}}}}if(_c){nexacro._reset_invisible_obj(_c,false);}};_pTextArea._getDlgCode=function(_a,_b,_c,_d){var _e=true;var _f;if(nexacro._enableaccessibility){if(!this._onlydisplay){if(_a==nexacro.Event.KEY_UP){_f=this._input_element;if(!this._p_enable||this._p_readonly||(_f&&_f.isFirstCaretLine())||!_f){_e=false;}}else if(_a==nexacro.Event.KEY_DOWN){_f=this._input_element;if(!this._p_enable||this._p_readonly||(_f&&_f.isLastCaretLine())||!_f){_e=false;}}}}if(_a==nexacro.Event.KEY_TAB){if(this._p_readonly){this._want_tab=false;}}return {want_tab:this._want_tab,want_return:false,want_escape:false,want_chars:false,want_arrows:_e};};_pTextArea._getDragData=function(){return this.getSelectedText();};_pTextArea.set_text=nexacro._emptyFn;_pTextArea.set_value=function(_a){_a=this._convertValueType(_a);if(_a){if(_a.indexOf("\r\n")!=-1||_a.indexOf("\n\r")!=-1){_a=_a.replace(/\r\n|\n\r/g,"\n");}if(_a.indexOf("\r")!=-1){_a=_a.replace(/\r/g,"");}}if(this._p_value!==_a){if(!this.applyto_bindSource("value",_a)){return;}this._setValue(_a);this._is_set_value=true;}};_pTextArea.on_apply_value=function(_a){var _b=this._input_element;if(_b){var _c=_b.getElementCaretPos();var _d=this._p_text;_a=_a?this._p_text:_a;if(this._is_created&&nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);}if(!this._onlydisplay){if(this._undostack){if(_c&&_c!=-1){this._undostack.push(_a,_c.begin,_c.end);}else{this._undostack.push(_a,0,0);}}_b.setElementValue(_a);_d=_b.getElementText();}else{if(this._p_displaynulltext&&nexacro._isNull(this._p_value)){_b.setElementText(this._p_displaynulltext);}else{_b.setElementText(_a);}}if(this._p_text!=_d){this._p_text=_d;}this._updateAccessibilityLabel();this._default_value=this._p_value;this._default_text=this._p_text;if(this._is_created){this._onRecalcScrollSize();this._onResetScrollBar();}_c=_b.getElementCaretPos();if(_c&&_c!=-1){this._caret_pos=_c;}else{this._change_value=this._is_created?true:false;}this._is_set_value=true;}};_pTextArea.set_displaynulltext=function(_a){if(this._p_displaynulltext!=_a){this._p_displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pTextArea.on_apply_displaynulltext=function(_a){var _b=this._input_element;if(_b){var _c=this._getStringResourceProperty(_a);if(!this._onlydisplay){_b.setElementDisplayNullText(_c?_c:_a);}else{this.on_apply_value(this._p_value);}}};_pTextArea.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_usesoftkeyboard){this._p_usesoftkeyboard=_a;if(!this._initsoftkeyboard){this._initsoftkeyboard=true;}this.on_apply_usesoftkeyboard();}};_pTextArea.on_apply_usesoftkeyboard=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){_a.setElementUseSoftKeyboard(this._getUseSoftKeyboardValue(this._initsoftkeyboard));}}};_pTextArea.set_readonly=function(_a){if(this._onlydisplay){return;}_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pTextArea.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementReadonly(_a);}}};_pTextArea.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoselect!=_a){this._p_autoselect=_a;this.on_apply_autoselect(_a);}};_pTextArea.on_apply_autoselect=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementAutoSelect(_a);}}};_pTextArea.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoskip!=_a){this._p_autoskip=_a;this.on_apply_autoskip(_a);}};_pTextArea.on_apply_autoskip=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementAutoSkip(_a);}}};_pTextArea.set_inputmode=function(_a){var _b=["normal","upper","lower"];if(_b.indexOf(_a)==-1){return;}if(this._p_inputmode!=_a){this._p_inputmode=_a;}};_pTextArea.set_inputfilter=function(_a){if(_a){var _b=_a.split(',');var _c=["none","alpha","digit","comma","dot","sign","space","symbol"];for(var _d=0,_e=_b.length;_d<_e;_d++ ){if(_c.indexOf(_b[_d])==-1){return;}}}else{return;}if(this._p_inputfilter!=_a){this._p_inputfilter=_a;this._inputfilter_obj=null;this.on_apply_inputfilter(_a);}};_pTextArea.on_apply_inputfilter=function(_a){this._inputfilter_obj=new nexacro._EditInputFilter(_a);};_pTextArea.set_inputtype=function(_a){if(_a){var _b=_a.split(',');var _c=["normal","alpha","english","digit","number","comma","dot","sign","space","symbol","half","full","numberandenglish"];for(var _d=0,_e=_b.length;_d<_e;_d++ ){if(_c.indexOf(_b[_d])==-1){return;}}}else{return;}if(this._p_inputtype!=_a){this._p_inputtype=_a;this._inputtype_obj=null;this.on_apply_inputtype();}};_pTextArea.on_apply_inputtype=function(){var _a=this._p_inputtype;this._inputtype_obj=new nexacro._EditInputType(_a);if(nexacro._isTouchInteraction&&nexacro._SupportTouch){this._imedisable=false;}else{this._imedisable=this._inputtype_obj.imedisable;}this._keypad_type=this._inputtype_obj.keypadtype;var _b=this._input_element;if(_b){if(!this._onlydisplay){if((_a.indexOf("normal")>=0)||(_a.indexOf("full")>=0)){_b._inputtype="text";}else{_b._inputtype="";}_b.setElementInputType(this._keypad_type,this._imedisable);}}};_pTextArea.set_maxlength=function(_a){if(isNaN(_a= +_a)||_a<0){return;}if(this._p_maxlength!=_a){this._p_maxlength=_a;this.on_apply_maxlength(_a);}};_pTextArea.on_apply_maxlength=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementMaxLength(_a);}}};_pTextArea.set_useime=function(_a){_a=nexacro._toBoolean(_a);if(this.useime!=_a){this.useime=_a;this.on_apply_useime(_a);}};_pTextArea.on_apply_useime=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementUseIme(_a);}}};_pTextArea.set_imemode=function(_a){var _b=["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"];if(_b.indexOf(_a)==-1){return;}if(this._p_imemode!=_a){this._p_imemode=_a;this.on_apply_imemode(_a);}};_pTextArea.on_apply_imemode=function(_a){var _b=this._input_element;if(_b){if(!this._onlydisplay){_b.setElementImeMode(_a);}}};_pTextArea.on_apply_wordWrap=function(_a){var _b=this._input_element;if(_b){_b.setElementWordWrap(_a);}if(this._hscrollbartype&&this._hscrollbartype.indexOf("auto")>-1&&(this.wordWrap!="none"&&this.wordWrap==="")){this._hscrollbartype="none";}if(this._is_created){this._onRecalcScrollSize();}};_pTextArea.set_scrollbartype=function(_a){_a=nexacro._toString(_a).trim();var _b;var _c;var _d=_a.toLowerCase().split(" ");this._p_scrollbartype=_a;for(var _g=0;_g<_d.length;_g++ ){switch(_d[_g]){case "none":case "auto":case "fixed":case "autoindicator":case "indicator":case "default":if(_g==0){_c=_d[_g];}else if(_g==1){_b=_d[_g];}break;default:break;}}if(!_c&&!_b){this._hscrollbartype=undefined;this._vscrollbartype=undefined;}else{if(!_c||_c=="default"){this._hscrollbartype=_c=undefined;}else{this._hscrollbartype=_c;}if(!_b){this._vscrollbartype=_c;}else if(_b=="default"){this._vscrollbartype=undefined;}else{this._vscrollbartype=_b;}}if(this._is_created&&_c!="fixed"){var _e=this._p_wordWrap||this._getCSSStyleValue("wordWrap");var _f=(_e&&_e!="none"&&_e!="undefined");if(_f){this._hscrollbartype="none";}}this.on_apply_scrollbartype();return _a;};_pTextArea.set_acceptstab=function(_a){_a=nexacro._toBoolean(_a);if(this._p_acceptstab!=_a){this._p_acceptstab=_a;}};_pTextArea.set_dragscrolltype=function(_a){nexacro.Form.prototype.set_dragscrolltype.call(this,_a);};_pTextArea.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usecontextmenu!=_a){this._p_usecontextmenu=_a;}};_pTextArea.set_cursor=function(_a){this._p_cursor=_a;if(_a){if(this._cursor==null||this._cursor.value!=_a){if(this._p_enable&&_a=="auto"){_a="text";}var _b=nexacro.CursorObject(_a);this._cursor=_b;this.on_apply_cursor(_b);}}else{if(this._cursor){this._cursor=null;this.on_apply_cursor(null);}}};_pTextArea.on_apply_textAlign=function(_a){var _b=this._input_element;if(_b){_b.setElementTextAlign(_a);}};_pTextArea.on_apply_padding=function(_a){var _b=this._input_element;if(_b){_b.setElementPadding(_a);this._onRecalcScrollSize();}};_pTextArea.on_apply_textDecoration=function(_a){var _b=this._input_element;if(_b){_b.setElementTextDecoration(_a);}};_pTextArea._properties=[{name:"maxlength"},{name:"acceptstab"},{name:"autoselect"},{name:"autoskip"},{name:"displaynulltext"},{name:"dragscrolltype"},{name:"imemode"},{name:"inputfilter"},{name:"inputmode"},{name:"inputtype"},{name:"scrollbartype"},{name:"usecontextmenu"},{name:"usesoftkeyboard"},{name:"cursor"},{name:"readonly"},{name:"value"},{name:"text"}];nexacro._defineProperties(_pTextArea,_pTextArea._properties);_pTextArea.getLength=function(_a){return (this._p_value?this._p_value.length:0);};_pTextArea.getCaretPos=function(){if(this._p_readonly||!this._isEnable()){return -1;}var _a=this._input_element;if(_a){var _b=_a.getElementCaretPos();if(_b&&_b!=-1){return _b.begin;}}return -1;};_pTextArea.setCaretPos=function(_a){if(this._p_readonly||!this._isEnable()){return false;}var _b=this._input_element;if(_b){if(!this._onlydisplay){if(arguments.length==0){_a=0;}else{_a=nexacro._toInt(_a);if(_a==-1){if(_a){_a=this._p_text.length;}else{_a=0;}}}_b.setElementSetSelect(_a,_a);if(_a===0){this._setHscrollPos(0);this._setVscrollPos(0);}}return true;}return false;};_pTextArea.getSelect=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){return _a.getElementSelectionRange();}}return [0,0];};_pTextArea.setSelect=function(_a,_b){var _c=this._input_element;if(_c){if(!this._onlydisplay){var _d=this._p_text?this._p_text:"";var _e=_d.length;if(nexacro._isNull(_a)||_a===""){_a=0;}if(nexacro._isNull(_b)||_b===""){_b=-1;}if(!nexacro._isNumber(_a)){_a=nexacro._toInt(_a);}if(!nexacro._isNumber(_b)){_b=nexacro._toInt(_b);}if(_a==-1){_a=_e;}if(_b==-1){_b=_e;}if(_a>_b){var _f=_a;_a=_b;_b=_f;}_c.setElementSetSelect(_a,_b);}return true;}return false;};_pTextArea.getSelectedText=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){var _b=_a.getElementSelectionRange();var _c=_b[0],_d=_b[1];var _e=this._p_text;if(_e&&(_c!=_d)){return _e.substring(_c,_d);}}}return "";};_pTextArea.setSelectedText=function(_a){if(/\r\n|\n\r/.test(_a)){_a=_a.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_a)){_a=_a.replace(/\r/g,"");}var _b=this._input_element;if(_b){if(!this._onlydisplay){var _c=_b.getElementSelectionRange();var _d=_c[0],_e=_c[1];if(_d==_e){return "";}var _f="";if(this._inputtype_obj){var _g=_a.length;for(var _m=0;_m<_g;_m++ ){var _h=_a[_m];if(this._inputtype_obj.test(_h)){_f+=_h;}}_a=_f;}var _i=_a.length;var _j=this.text.substring(_d,_e);var _k=this._p_text;var _l=_k.length-(_e-_d)+_i;if(this._p_maxlength>0&&_l>this._p_maxlength){_a=_a.substring(0,this._p_maxlength-_i);}_k=_k.substring(0,_d)+_a+_k.substring(_e);if(this._p_text!=_k){this.set_value(_k);_b.setElementSetSelect(_d,_d+_i);}return _j;}}return "";};_pTextArea.insertText=function(_a,_b){_a=nexacro._toString(_a);if(_a==null||_a==""){return;}var _c=this._p_value||"";if(nexacro._isNull(_b)||_b===""){_b=_c.length;}else{_b=nexacro._toInt(_b);}if(_b<0||_b>_c.length){_b=_c.length;}var _d=this._input_element;if(_d){if(_a!=""){if(/\r\n|\n\r/.test(_a)){_a=_a.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_a)){_a=_a.replace(/\r/g,"");}}_c=_c.substring(0,_b)+_a+_c.substring(_b);if(!this._onlydisplay){this.set_value(_c);}else{}}};_pTextArea.deleteText=function(_a,_b){if(nexacro._isNull(_a)){_a=0;}else{_a=nexacro._toInt(_a);}if(nexacro._isNull(_b)){_b=-1;}else{_b=nexacro._toInt(_b);}var _c=this._p_value||"";var _d=_c.length;if(_b==-1){_b=_d-_a;}if(_b<0||_a<0||_a>=_d){return;}var _e=this._input_element;if(_e){if(!this._onlydisplay){var _f=_c.substring(0,_a)+_c.substring(_a+_b);this.set_value(_f);}else{}}};_pTextArea.find=function(_a,_b){_b=nexacro._toInt(_b)|0;_a=nexacro._toString(_a);if(_b==-1){var _c=this._input_element;if(_c){if(!this._onlydisplay){var _d=_c.getElementCaretPos();if(_d&&_d!=-1){_b=_d.begin;}}}}if(_b<0){return -1;}return _a?this._p_text.indexOf(_a,_b):-1;};_pTextArea.replace=function(_a,_b){if(_b==null){_b="";}_a=nexacro._toString(_a);_b=nexacro._toString(_b);var _c=this._p_value||"";var _d=this._input_element;if(_d&&_a){var _e=_c.split(_a);if(_e.length>1){_c=_e.join(_b);_e.pop();var _f=_e.join(_b).length;if(!this._onlydisplay){if(_c!=""){if(/\r\n|\n\r/.test(_c)){_c=_c.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_c)){_c=_c.replace(/\r/g,"");}}this.set_value(_c||"");if(_d._is_focused){this.setCaretPos(_f);}}else{}}}return this._p_value;};_pTextArea.updateToDataset=function(){if(this._result_updateToDataset=this.applyto_bindSource("value",this._p_value)){this._default_value=this._p_value;this._default_text=this._p_text;}this._processing_updateToDataset=true;return this._result_updateToDataset;};_pTextArea.on_deactivate_process=function(){var _a=this._input_element;if(_a){if(!this._onlydisplay){_a.setCompositionComplete();var _b=_a.getElementCaretPos();_a.setElementSetSelect(_b.begin,_b.end);}}};_pTextArea._on_deactivate=function(){if(!this._is_alive){return;}if(!this._isSelected()){this._changeStatus("focused",false);}this.on_deactivate_process.call(this);};_pTextArea._on_value_change=function(_a,_b,_c,_d){if(!this.on_fire_canchange(this,_a,_b,_c,_d)){return false;}this._default_value=_d;this._default_text=_c;var _e=this._input_element;var _f=_e.getElementCaretPos();if(_f&&_f!=-1){this._caret_pos=_f;}if(this._processing_updateToDataset&&!this._result_updateToDataset&&_b===_d){this._processing_updateToDataset=false;this._result_updateToDataset=true;return false;}else if(!this.applyto_bindSource("value",_d)){return false;}this.on_fire_onchanged(this,_a,_b,_c,_d);return true;};_pTextArea._on_input_undo=function(_a){if(this._p_readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(_a){this._is_undo=true;var _c=_a.end;if(_a.value&&_a.value.length>_c){_c=_a.value.length;}_b.updateElementText(_a.value,_c);_b.setElementSetSelect(_a.start,_a.end);return true;}}};_pTextArea._on_input_redo=function(_a){if(this._p_readonly||!this._isEnable()){return;}var _b=this._input_element;if(_b){if(_a){_b.updateElementText(_a.value,_a.end);_b.setElementSetSelect(_a.start,_a.end);return true;}}};_pTextArea.on_notify_vscroll_onscroll=function(_a,_b){this._scrollTo(this._hscroll_pos,_b.pos,false,false,_b.type,_b._evtkind);if(this._input_element){this._input_element.setElementVScrollPos(_b.pos);}};_pTextArea.on_keydown_basic_before_process=function(_a,_b,_c,_d,_e,_f){return true;};_pTextArea.on_keydown_basic_specialkey_process=function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack){this._undostack.undo();_g._applyMaxlength();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}else if(_a==nexacro.Event.KEY_TAB){if(!_b&&!_d&&((this._p_acceptstab&&!_c)||(!this._p_acceptstab&&_c))){var _h=_g.getElementCaretPos();var _i=_g.getElementText();_i=_i.substring(0,_h.begin)+nexacro.TextArea._TAB_CHAR+_i.substring(_h.end);var _j=_h.begin+nexacro.TextArea._TAB_CHAR.length;nexacro._OnceCallbackTimer.callonce(this,function(){_g.updateElementText(_i,_j);},0);_g.stopSysEvent();}else{this._want_tab=false;}}return true;};_pTextArea.on_keydown_basic_process=function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(this._undostack&&!_g.isComposing()){var _h=_g.getElementCaretPos();if(_h&&_h!=-1){this._undostack.update(_h.begin,_h.end);}}return true;};_pTextArea.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(this.readonly||!this._isEnable()){return;}var _g=this._input_element;if(_g){if(!this.on_keydown_basic_before_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keydown_basic_specialkey_process.call(this,_a,_b,_c,_d,_e,_f)){return;}this.on_keydown_basic_process.call(this,_a,_b,_c,_d,_e,_f);}};_pTextArea.on_keydown_default_before_process=function(_a,_b,_c,_d,_e,_f){return true;};_pTextArea.on_keydown_default_specialkey_process=function(_a,_b,_c,_d,_e,_f){if(_a>=nexacro.Event.KEY_LEFT&&_a<=nexacro.Event.KEY_DOWN){this._onRecalcScrollSize();}return true;};_pTextArea.on_keydown_default_process=function(_a,_b,_c,_d,_e,_f){return true;};_pTextArea.on_keydown_default_action=function(_a,_b,_c,_d,_e,_f){if(this.readonly||!this._isEnable()){return;}var _g=this._input_element;if(_g){if(!this.on_keydown_default_before_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keydown_default_specialkey_process.call(this,_a,_b,_c,_d,_e,_f)){return;}this.on_keydown_default_process.call(this,_a);}};_pTextArea.on_keypress_basic_before_process=function(_a,_b,_c,_d){return true;};_pTextArea.on_keypress_basic_specialkey_process=function(_a,_b,_c,_d){if(_a==nexacro.Event.KEY_ENTER||_a==nexacro.Event.KEY_ESC){return false;}return true;};_pTextArea.on_keypress_basic_process=function(_a,_b,_c,_d){if(nexacro._OS=="iOS"){return true;}var _e=this._input_element;_b=_b||_a;if(!_d&&!_c&&_b){var _f=String.fromCharCode(_b);if(_f.length>0&&this._isFilterChar(_f)){_e.stopSysEvent();return false;}}return true;};_pTextArea.on_keypress_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(_g){if(_a!==0&&_b===0){return true;}else{if(!this.on_keypress_basic_before_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keypress_basic_specialkey_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keypress_basic_process.call(this,_a,_b,_c,_d,_e,_f)){return false;}}return true;}};_pTextArea.on_keyup_basic_before_process=function(_a,_b,_c,_d,_e,_f){return true;};_pTextArea.on_keyup_basic_specialkey_process=function(_a,_b,_c,_d,_e,_f){return true;};_pTextArea.on_keyup_default_process=function(_a,_b,_c,_d,_e,_f){this._onRecalcScrollSize();return true;};_pTextArea.on_keyup_default_action=function(_a,_b,_c,_d,_e,_f){if(!this.on_keyup_basic_before_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keyup_basic_specialkey_process.call(this,_a,_b,_c,_d,_e,_f)){return;}if(!this.on_keyup_default_process.call(this,_a,_b,_c,_d,_e,_f)){return false;}};_pTextArea.on_beforekeyinput_basic_action=function(_a,_b,_c,_d,_e){if(this.readonly||!this._isEnable()){return 0;}var _f=this._input_element;if(_f){if(_f._use_event_beforeinput){return this._beforeinput_process_with_HTMLEvent(_a,_b,_c,_d,_e);}else{return this._beforeinput_process_with_NexacroInputEvent(_a,_b,_c,_d);}}};_pTextArea.on_keyinput_basic_before_process=function(_a){return true;};_pTextArea.on_keyinput_basic_process=function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;this._p_value=_c;this._p_text=_a;if(this._undostack&&!_b.isComposing()){var _d=_b.getElementCaretPos();if(_d&&_d!=-1){this._undostack.push(_c,_d.begin,_d.end);}else{this._undostack.push(_c,0,0);}}return true;};_pTextArea.on_keyinput_basic_action=function(_a){if(this._p_readonly||!this._isEnable()){return false;}var _b=this._input_element;if(_b){if(!this.on_keyinput_basic_before_process.call(this,_a)){return false;}if(!this.on_keyinput_basic_process.call(this,_a)){return false;}this._onRecalcScrollSize();nexacro._OnceCallbackTimer.callonce(this,function(){this._onResetScrollBar();});}this._updateAccessibilityLabel();return true;};_pTextArea.on_killfocus_basic_process=function(){var _a=this._input_element;var _b;if(!this._onlydisplay){if(_a.isComposing()){_b=this._p_text;var _c=this._p_text;if(this._inputtype_obj){_c=this._inputtype_obj.apply(_b);}if(this._inputfilter_obj){_c=this._inputfilter_obj.apply(_b);}if(_b!=_c){_a.setCompositionCancel();}else{_a.setCompositionComplete();}}}var _d=this._default_value;var _e=this._default_text;var _f=this._p_value;_b=_f?_f:"";if(_d!=_f){if(!this._processing_canchange){var _g=_a.getElementCaretPos();if(!this._on_value_change(_e,_d,_b,_f)){var _h=_b?_b.length:0;var _i=_e?_e.length:0;if(_g!=-1){if(_h-_i>=0){_g.begin=_g.end=_g.begin-(_h-_i);}if(_g.begin<0){_g.begin=_g.end=0;}this._caret_pos=_g;}else{this._caret_pos.begin=this._caret_pos.end=_d?_d.length:0;}this._p_value=_d;this._p_text=_e;if(!this._onlydisplay){_a.setElementValue(_d);}else{_a.setElementText(_d);}_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}}else{this._caret_pos=_a.getElementCaretPos();}if(!this._onlydisplay){if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}this._adjust_scrollPosition(_a);var _j=this._getRootWindow();var _k=_j._indexOfCurrentFocusPaths(this);if(_k<0){_a.setElementBlur();}}};_pTextArea.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);var _c=this._input_element;if(_c){if(!this._onlydisplay){var _d=_c.getElementSelectionRange();if(_d[0]==_d[1]){_c._setElementLastSelectionRange();}}if(!this.on_killfocus_basic_process.call(this)){return;}}};_pTextArea.on_fire_onkillfocus=function(_a,_b){nexacro.Component.prototype.on_fire_onkillfocus.call(this,_a,_b);var _c=this._input_element;if(_c&&_c._updateElementValue){_c._updateElementValue(_c.value);this._setValue(_c.value===null?undefined:_c.value);}};_pTextArea.on_click_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){var _k=this._input_element;if(_k){if(!this._onlydisplay){var _l=this._getWindow();if(_l&&this._track_capture){var _m=_l._getCaptureComp(true,false,this);if(!_m||_m==this){_k.setElementFocus(_b,true);}}}}};_pTextArea.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oneditclick&&this.oneditclick._has_handlers){var _n=this.getCaretPos();var _o=new nexacro.EditClickEventInfo(this,"oneditclick",_n,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,this,_m);return this.oneditclick._fireEvent(this,_o);}return true;};_pTextArea.on_fire_canchange=function(_a,_b,_c,_d,_e){if(this.canchange&&this.canchange._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"canchange",_b,_c,_d,_e);this._processing_canchange=true;var _g=this.canchange._fireCheckEvent(this,_f);this._processing_canchange=false;return _g;}return true;};_pTextArea.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}};_pTextArea.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pTextArea._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pTextArea._setValue=function(_a){this._p_text=nexacro._toString(_a);this._p_value=_a;this.on_apply_value(this._p_value);};_pTextArea._setDefaultCaret=nexacro._emptyFn;_pTextArea._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm().getNextComponent(_a,true);if(_b){_b.setFocus();if(_b._is_editable_control){_b._setDefaultCaret();}}};_pTextArea._setHscrollPos=function(_a){this._hscroll_pos=nexacro._toInt(_a);var _b=this._input_element;if(_b){_b.setElementHScrollPos(_a);}};_pTextArea._setVscrollPos=function(_a){this._vscroll_pos=nexacro._toInt(_a);var _b=this._input_element;if(_b){_b.setElementVScrollPos(_a);}};_pTextArea._setVScrollDefaultAction=function(_a){var _b=this.getElement();if(_b){if(this._p_scrolltype=="none"||this._p_scrolltype=="horizontal"){return false;}var _c=-3;var _d=20;if(_a>=0){_c=3;}_a=_d* _c;var _e=this._vscroll_pos;var _f=_e-_a;var _g=_b.vscroll_limit;if(_f>_g){_f=_g;}this._scrollTo(this._hscroll_pos,_f,true,true,undefined,"mousewheel_v");if(_e!=this._vscroll_pos){return true;}}return false;};_pTextArea._getLineCount=function(){var _a=0;var _b=this._input_element;if(_b){if(!this._onlydisplay){_a=_b.getElementTextLineCount(true);}}return _a;};_pTextArea._getCaretLine=function(){var _a=0;var _b=this._input_element;if(_b){if(!this._onlydisplay){_a=_b.getElementCaretLine();}}return _a;};_pTextArea._isFilterChar=function(_a){if(_a!=""){if(this._inputfilter_obj&&this._inputfilter_obj.test(_a)){return true;}if(this._inputtype_obj&&!this._inputtype_obj.test(_a)){return true;}}return false;};_pTextArea._isWheelScrollable=function(_a){if(this._onlydisplay){return true;}var _b=this._input_element;if(!_b){return false;}var _c=_b.getElementVScrollPos();var _d=_b.getElementScrollHeight();var _e=this._getClientHeight();if((_c+_e>=_d&&_a<0)||(_c==0&&_a>0)){return false;}return true;};_pTextArea.on_beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a;var _h=_f._getInputValue();var _i=[_f._BeforeinputState.PASS];var _j=_g?_g.length:0;if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _i;}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g&&_e=="insertFromPaste"){_j=_g.length;_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_j,end:_c+_j};_i.push(_f._BeforeinputState.REPLACE);}else{_i.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g&&_e=="insertFromPaste"){_j=_g.length;_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_j,end:_c+_j};_i.push(_f._BeforeinputState.REPLACE);}else{_i.push(_f._BeforeinputState.CANCEL);}}}if(_e=="insertFromPaste"){if(_g){var _k=this._p_maxlength;_g=_g.replace(/&quot;/g,"\"");if(_g.indexOf("\r\n")!=-1||_g.indexOf("\n\r")!=-1){_g=_g.replace(/\r\n|\n\r/g,"\n");}if(_g.indexOf("\r")!=-1){_g=_g.replace(/\r/g,"");}if(_k&&_c+(_h.length-_d)+_j>_k){_g=_g.substring(0,_k-(_c+_h.length-_d));}_f._beforeinput_result_insert_data=_g;_j=_g.length;_g=_h.substring(0,_c)+_g+_h.substring(_d);_f._beforeinput_result_data=_g;var _l=_c+_j;_f._beforeinput_result_pos={begin:_l,end:_l};_i.push(_f._BeforeinputState.REPLACE);}}if(_b==0||_b==3){if(_g){switch(this._p_inputmode){case "upper":_i.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_i.push(_f._BeforeinputState.CONVERT_LOWER);break;}}}if(this._p_maxlength>0&&(_b==0||_b==3)){_h=_h?_h:_f._getInputValue();var _m=_f._checkMaxLength(_h+(_g?_g:""),_d);if(_m&&_m.ismax){_i.push(_f._BeforeinputState.MAXLENGTH);}}if(this._p_maxlength>0&&(_b==1||_b==2)){_h=_h?_h:_f._getInputValue();if(_c!=_d){_h=_h.substring(0,_c);}if(_e!="insertFromPaste"){_g=_h+_g;}if(_g.length>this._p_maxlength){_i.push(_f._BeforeinputState.CANCEL);_i.push(_f._BeforeinputState.MAXLENGTH);}}return _i;};_pTextArea._beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;if(_f){return this.on_beforeinput_process_with_HTMLEvent.call(this,_a,_b,_c,_d,_e);}};_pTextArea.on_beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;var _f=_e._paste_caret_pos?true:false;var _g=_e.value;var _h=_a.substring(_c,_d);if(_h){var _i=_h;if((nexacro._is_hangul(_i)||(_b==nexacro._CompositionState.NONE||_b==nexacro._CompositionState.END))){if(this._inputtype_obj){_i=this._inputtype_obj.apply(_i);}if(this._inputfilter_obj){_i=this._inputfilter_obj.apply(_i);}if(this._p_inputmode=="upper"){_i=_i.toUpperCase();}else if(this._p_inputmode=="lower"){_i=_i.toLowerCase();}}if(_i!=_h){if(_f&&!_i){var _j=_g?_g.length:0;var _k=_c+(_h.length-(_a.length-_j));_e.updateElementText(_g,_k);}else{_e.replaceElementText(_i,_c,_d);}}}};_pTextArea._beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;if(_e){return this.on_beforeinput_process_with_NexacroInputEvent.call(this,_a,_b,_c,_d);}};_pTextArea._adjust_scrollPosition=function(_a,_b){var _c=this._p_hscrollbar?this._p_hscrollbar._p_pos:0;var _d=this._p_vscrollbar?this._p_vscrollbar._p_pos:0;if(this._is_set_value&&(_b=="tabkey"||_b=="shifttabkey"||(this._p_taborder==0&&!this._is_subcontrol&&_b!="lbuttondown"&&_b!="lbutton"))){if(!this._change_value&&this._caret_pos==-1){if(this._p_vscrollbar){_d=0;}if(this._p_hscrollbar){_c=0;}}else{if(this._p_vscrollbar){_d=nexacro._getTextAreaElementVscrollPos(_a);}if(this._p_hscrollbar){_c=nexacro._getTextAreaElementHscrollPos(_a);}}}var _e=this;nexacro._OnceCallbackTimer.callonce(_e,function(){if(_e._p_hscrollbar){_e._p_hscrollbar.set_pos(_c);}if(_e._p_vscrollbar){_e._p_vscrollbar.set_pos(_d);}});this._is_set_value=false;};_pTextArea._on_input_compositionend=function(_a,_b){var _c=this._input_element;if(_c){if(this._undostack){var _d=_b?_b:_c.getElementCaretPos();if(_d&&_d!=-1){this._undostack.push(_a,_d.begin,_d.end);}else{this._undostack.push(_a,0,0);}}}};_pTextArea.on_apply_imeSet=function(){var _a=this._input_element;if(_a){var _b,_c;var _d=_a._imelocale.getLocale();if(_d&&nexacro._cache_textarea_set[_d]){for(var _e in nexacro._cache_textarea_set[_d]){this[_e]=nexacro._cache_textarea_set[_d][_e];}for(_b=0,_c=nexacro._edit_user_override_func.length;_b<_c;_b++ ){if(!nexacro._cache_textarea_set[_d][nexacro._edit_user_override_func[_b]]){this[nexacro._edit_user_override_func[_b]]=nexacro.TextArea.prototype[nexacro._edit_user_override_func[_b]];}}}else{for(_b=0,_c=nexacro._edit_user_override_func.length;_b<_c;_b++ ){this[nexacro._edit_user_override_func[_b]]=nexacro.TextArea.prototype[nexacro._edit_user_override_func[_b]];}}}};_pTextArea._on_mousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){if(!nexacro._mousewheel_obj){nexacro._mousewheel_obj=this;}var _m,_n,_o;var _p=this._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_m,_n,_o,_l);if(_f){return;}else if(this._p_scrolltype=="none"||this._p_scrolltype=="horizontal"){return false;}else{return _p;}};_pTextArea=null;}if(nexacro.Edit){nexacro._defineImeLocaleEdit("ko",{"Edit":{on_killfocus_basic_process:function(){var _a=this._input_element;var _b;if(!this._onlydisplay){if(_a.isComposing()){_b=this._p_text;var _c=this._p_text;if(this._inputtype_obj){_c=this._inputtype_obj.apply(_b);}if(this._inputfilter_obj){_c=this._inputfilter_obj.apply(_b);}if(_b!=_c){_a.setCompositionCancel();}else{_a.setCompositionComplete();}}var _d=this._default_value;var _e=this._default_text;var _f=_a.value;_b=_f?_f:"";var _g=_a.getElementCaretPos();if(_d!=_f){if(!this._processing_canchange){if(!this._on_value_change(_e,_d,_b,_f)){var _h=_b?_b.length:0;var _i=_e?_e.length:0;if(_g!=-1){if(_h-_i>=0){_g.begin=_g.end=_g.begin-(_h-_i);}if(_g.begin<0){_g.begin=_g.end=0;}this._caret_pos=_g;}else{this._caret_pos.begin=this._caret_pos.end=_d?_d.length:0;}this._p_value=_d;this._p_text=_e;_a.setElementValue(_d);_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}var _j=this._getRootWindow();var _k=_j._indexOfCurrentFocusPaths(this);if(_k<0){_a.setElementBlur();}}else{if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e,_f){return nexacro.Edit.prototype.on_keydown_basic_process.call(this,_a,_b,_c,_d,_e,_f);},on_keypress_basic_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;_b=_b||_a;if(!_d&&!_c&&_b&&!_g.isComposing()){var _h=String.fromCharCode(_b);if(nexacro._OS=="iOS"&&(_b>=12593&&_b<=12643)){if(_h.length>0&&this._isFilterChar(_h)){_g.stopSysEvent();return false;}return true;}}return nexacro.Edit.prototype.on_keypress_basic_process.call(this,_a,_b,_c,_d,_e,_f);}},"TextArea":{on_keydown_basic_process:function(_a,_b,_c,_d,_e,_f){return nexacro.TextArea.prototype.on_keydown_basic_process.call(this,_a,_b,_c,_d,_e,_f);},on_keydown_default_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(_a==nexacro.Event.KEY_RETURN){if(_g.isComposing()){_g.setCompositionComplete();}}return nexacro.TextArea.prototype.on_keydown_default_specialkey_process.call(this,_a,_b,_c,_d,_e,_f);},on_keypress_basic_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;_b=_b||_a;if(!_d&&!_c&&_b&&!_g.isComposing()){var _h=String.fromCharCode(_b);if(nexacro._OS=="iOS"&&(_b>=12593&&_b<=12643)){if(_h.length>0&&this._isFilterChar(_h)){_g.stopSysEvent();return false;}return true;}}return nexacro.TextArea.prototype.on_keypress_basic_process.call(this,_a,_b,_c,_d,_e,_f);},on_killfocus_basic_process:function(){return nexacro.TextArea.prototype.on_killfocus_basic_process.call(this);}},"TextField":{on_killfocus_basic_process:function(){var _a=this._input_element;var _b;if(!this._onlydisplay){if(_a.isComposing()){_b=this._p_text;var _c=this._p_text;if(this._inputtype_obj){_c=this._inputtype_obj.apply(_b);}if(this._inputfilter_obj){_c=this._inputfilter_obj.apply(_b);}if(_b!=_c){_a.setCompositionCancel();}else{_a.setCompositionComplete();}}var _d=this._default_value;var _e=this._default_text;var _f=_a.value;_b=_f?_f:"";var _g=_a.getElementCaretPos();if(_d!=_f){if(!this._processing_canchange){if(!this._on_value_change(_e,_d,_b,_f)){var _h=_b?_b.length:0;var _i=_e?_e.length:0;if(_g!=-1){if(_h-_i>=0){_g.begin=_g.end=_g.begin-(_h-_i);}if(_g.begin<0){_g.begin=_g.end=0;}this._caret_pos=_g;}else{this._caret_pos.begin=this._caret_pos.end=_d?_d.length:0;}this._p_value=_d;this._p_text=_e;_a.setElementValue(_d);_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}var _j=this._getRootWindow();var _k=_j._indexOfCurrentFocusPaths(this);if(_k<0){_a.setElementBlur();}}else{if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e,_f){return nexacro.Edit.prototype.on_keydown_basic_process.call(this,_a,_b,_c,_d,_e,_f);},on_keypress_basic_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;_b=_b||_a;if(!_d&&!_c&&_b&&!_g.isComposing()){var _h=String.fromCharCode(_b);if(nexacro._OS=="iOS"&&(_b>=12593&&_b<=12643)){if(_h.length>0&&this._isFilterChar(_h)){_g.stopSysEvent();return false;}return true;}}return nexacro.Edit.prototype.on_keypress_basic_process.call(this,_a,_b,_c,_d,_e,_f);},on_beforeinput_process_with_HTMLEvent:function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a?_a.replace(/\r\n/g,""):_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g&&_e=="insertFromPaste"){_i=_g.length;_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g&&_e=="insertFromPaste"){_i=_g.length;_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(_e=="insertFromPaste"){if(_g){var _k=this._p_maxlength;_g=_g.replace(/\r\n/g,"");if(_k&&_c+(_h.length-_d)+_i>_k){_g=_g.substring(0,_k-(_c+_h.length-_d));}_f._beforeinput_result_insert_data=_g;_i=_g.length;_g=_h.substring(0,_c)+_g+_h.substring(_d);_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}}if(_b==0||_b==3){if(_g){switch(this._p_inputmode){case "upper":_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}}if(this._p_maxlength>0&&(_b==0||_b==3)){_h=_h?_h:_f._getInputValue();var _l=_f._checkMaxLength(_h+(_g?_g:""),_d);if(_l&&_l.ismax){_j.push(_f._BeforeinputState.MAXLENGTH);}}if(this._p_maxlength>0&&(_b==1||_b==2)){_h=_h?_h:_f._getInputValue();if(_c!=_d){_h=_h.substring(0,_c);}_g=_h+_g;if(_g.length>this._p_maxlength){_j.push(_f._BeforeinputState.CANCEL);_j.push(_f._BeforeinputState.MAXLENGTH);}}if(this._processing_autoskip){var _m=this._getWindow();if(_m._keydown_element!=_f){this._processing_autoskip=false;_j.push(_f._BeforeinputState.CANCEL);}}return _j;}},"MultiLineTextField":{on_beforekeyinput_basic_action:function(_a,_b,_c,_d,_e){if(this.readonly||!this._isEnable()){return 0;}var _f=this._input_element;if(_f){if(_f._use_event_beforeinput){return this._beforeinput_process_with_HTMLEvent(_a,_b,_c,_d,_e);}else{return this._beforeinput_process_with_NexacroInputEvent(_a,_b,_c,_d);}}},on_beforeinput_process_with_HTMLEvent:function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a;var _h=_f._getInputValue();var _i=[_f._BeforeinputState.PASS];var _j=_g?_g.length:0;if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _i;}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g&&_e=="insertFromPaste"){_j=_g.length;_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_j,end:_c+_j};_i.push(_f._BeforeinputState.REPLACE);}else{_i.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g&&_e=="insertFromPaste"){_j=_g.length;_f._beforeinput_result_data=_g;_f._beforeinput_result_pos={begin:_c+_j,end:_c+_j};_i.push(_f._BeforeinputState.REPLACE);}else{_i.push(_f._BeforeinputState.CANCEL);}}}if(_e=="insertFromPaste"){if(_g){var _k=this._p_maxlength;_g=_g.replace(/&quot;/g,"\"");if(_g.indexOf("\r\n")!=-1||_g.indexOf("\n\r")!=-1){_g=_g.replace(/\r\n|\n\r/g,"\n");}if(_g.indexOf("\r")!=-1){_g=_g.replace(/\r/g,"");}if(_k&&_c+(_h.length-_d)+_j>_k){_g=_g.substring(0,_k-(_c+_h.length-_d));}_f._beforeinput_result_insert_data=_g;_j=_g.length;_g=_h.substring(0,_c)+_g+_h.substring(_d);_f._beforeinput_result_data=_g;var _l=_c+_j;_f._beforeinput_result_pos={begin:_l,end:_l};_i.push(_f._BeforeinputState.REPLACE);}}if(_b==0||_b==3){if(_g){switch(this._p_inputmode){case "upper":_i.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_i.push(_f._BeforeinputState.CONVERT_LOWER);break;}}}if(this._p_maxlength>0&&(_b==0||_b==3)){_h=_h?_h:_f._getInputValue();var _m=_f._checkMaxLength(_h+(_g?_g:""),_d);if(_m&&_m.ismax){_i.push(_f._BeforeinputState.MAXLENGTH);}}if(this._p_maxlength>0&&(_b==1||_b==2)){_h=_h?_h:_f._getInputValue();if(_c!=_d){_h=_h.substring(0,_c);}if(_e!="insertFromPaste"){_g=_h+_g;}if(_g.length>this._p_maxlength){_i.push(_f._BeforeinputState.CANCEL);_i.push(_f._BeforeinputState.MAXLENGTH);}}return _i;}}});}if(nexacro._Browser!="Runtime"){if(nexacro.InputElement){nexacro._defineImeLocaleEdit("ko",{"InputElement":{on_sys_keydown_process:function(_a){return true;},on_sys_keyup_specialkey_process:function(_a){var _b=_a.target;var _c=_b._linked_element;var _d=nexacro._getSysEventKey(_a);var _e=_a.ctrlKey;var _f=_c.getElementCaretPos();var _g=_c._composer.isComposing();if(_g){var _h=_c._getInputValue();if(_d==nexacro.Event.KEY_RETURN||_d==nexacro.Event.KEY_ESC||(_e&&_d==77)||(_e&&_d==90)){_c._composer.setStatus(nexacro._CompositionState.END,_f.end);_c._updateInputValue(_h,true);}}return true;},on_sys_compositionstart_process:function(_a){var _b=_a.target;var _c=_b._linked_element;var _d=_c.getElementCaretPos();_c._composer.setStatus(nexacro._CompositionState.START,_d.begin);return true;},on_sys_compositionend_process:function(_a){var _b=_a.target;var _c=_b._linked_element;var _d=_c.parent_elem.linkedcontrol;var _e=_c._getInputValue();var _f=_c.getElementCaretPos();_c._composer.setStatus(nexacro._CompositionState.END,_f.end);if(_c._use_event_beforeinput&&nexacro._OS=="Android"){var _g=_a.data;var _h=_a.type;var _i=_c._getInputValue();var _j=_c.getCompositionStatus();var _k=_f.begin;var _l=_f.end;if(_c._composing_start!==undefined&&_c._composing_end!==undefined){_k=_c._composing_start;}if(_l==undefined){if(_c.maxlength>0){_l=Math.min(_k+_g.length,_c.maxlength);}else{_l=_k+_g.length;}}_g=_g.substr(0,_l-_k);_i=_i.substring(0,_k)+_i.substring(_l,Math.min(_i.length,(_c.maxlength>0?_c.maxlength:_i.length)));_c._beforeinput_result=_d._on_beforekeyinput(_c,_g,_j,_k,_l,_h);if(_c._beforeinput_result){_c._beforeinput_result.forEach(function(_t){var _u;switch(_t){case _c._BeforeinputState.PASS:break;case _c._BeforeinputState.CANCEL:_c._beforeinput_result_data=_i;_c._beforeinput_result_pos={begin:null,end:null};break;case _c._BeforeinputState.CONVERT_UPPER:_u=_l;_c._beforeinput_result_data=_i.substring(0,_k)+_g.toUpperCase()+_i.substring(_l,_i.length);_c._beforeinput_result_pos={begin:_u,end:_u};break;case _c._BeforeinputState.CONVERT_LOWER:_u=_l+_g.length;_c._beforeinput_result_data=_i.substring(0,_k)+_g.toLowerCase()+_i.substring(_l);_c._beforeinput_result_pos={begin:_u,end:_u};break;case _c._BeforeinputState.MAXLENGTH:break;case _c._BeforeinputState.REPLACE:break;default:break;}},_c);}_c._on_sys_keyinput(_a);}_c._composing_start=_c._composing_end=undefined;var _m=_e;if(_c.maxlength>0&&_e&&_e.length>_c.maxlength){if(_c._last_selection_range){var _n=_m.substr(0,_c._last_selection_range[0]);var _o=_n.length;var _p=_m.substr(_f.end);var _q=_p.length;var _r=_c.maxlength-(_o+_q);if(_r<0){_r=0;}var _s=_m.substr(_c._last_selection_range[0],_r);_m=_n+_s+_p;}else{_m=_m.substring(0,_c.maxlength);}_e=_m;}_d=_c.parent.linkedcontrol;if(_d){_d._on_input_compositionend(_e);}_c._setElementLastSelectionRange();return true;},_on_sys_keyinput_process_use_event_beforeinput:function(_a){var _b=_a.target;var _c=_b._linked_element;if(_c._skip_sys_keyinput){_c._skip_sys_keyinput=false;return;}var _d=_c.parent_elem.linkedcontrol;var _e=false;var _f=_c._getInputValue();var _g;if(_c._beforeinput_result){var _h=false;_c._beforeinput_result.forEach(function(_l){switch(_l){case nexacro.InputElement.prototype._BeforeinputState.PASS:break;case nexacro.InputElement.prototype._BeforeinputState.CANCEL:_c._updateInputValue(_c._beforeinput_result_data,false,_c._beforeinput_result_pos.end,_c._beforeinput_result_pos.end);_h=true;break;case nexacro.InputElement.prototype._BeforeinputState.CONVERT_UPPER:case nexacro.InputElement.prototype._BeforeinputState.CONVERT_LOWER:case nexacro.InputElement.prototype._BeforeinputState.REPLACE:if(_c._beforeinput_result_data!=null){_c._updateInputValue(_c._beforeinput_result_data,false,_c._beforeinput_result_pos.begin,_c._beforeinput_result_pos.end);}break;case nexacro.InputElement.prototype._BeforeinputState.MAXLENGTH:_e=true;break;}},_c);if(_c.autoskip&&_e){if(_c.value&&_f.length>=_c.maxlength){_c._go_next_focus();}}if(_h){return;}}_f=_c._getInputValue();_g=_c.getElementCaretPos();if(_c._composer.isComposing()){_c._composer.setStatus(nexacro._CompositionState.COMPOSING,_g.end);}var _i=_c.value;_c._updateElementValue(_f);if(_d._on_keyinput){_d._on_keyinput(_c);}if(_c.getInputStatusPseudoClass("AUTOFILL")){nexacro.__changeInputDOMNodeType(_b,_c.inputtype);}var _j=_c._composer._prev_status;var _k=_c._composer.status;if(_j==_k&&_c.value==_i){if(_d._on_input_autoskip){_d._on_input_autoskip();}}_c._composer._prev_status=_k;return true;},_on_sys_keyinput_process_no_use_event_beforeinput:function(_a){if(nexacro._Browser=="Gecko"){var _b=_a?_a.target:this.handle;var _c=_b?_b._linked_element:this;var _d=_c.parent_elem.linkedcontrol;var _e=_d._getRootWindow();if(_e&&_e._keydown_element){if(_e._keydown_element!==_c&&_d._processing_autoskip){var _f=_c.value;var _g=(_c._last_selection_range)?_c._last_selection_range:[0,0];_c._updateInputValue(_f,false,_g[0],_g[1]);_d._processing_autoskip=false;return false;}}}return nexacro.InputElement.prototype.on_sys_keyinput_process.call(this,_a);},on_sys_keyinput_process:function(_a){if(this._use_event_beforeinput&&nexacro._is_hangul(_a.data)){return this._on_sys_keyinput_process_use_event_beforeinput(_a);}else{return this._on_sys_keyinput_process_no_use_event_beforeinput(_a);}},on_apply_ime_environment_process:function(_a){var _b=_a?_a.target:this.handle;var _c=_b?_b._linked_element:this;if(!_c._apple_default_browser){_c._setElementUseMaxLength(true);}else{_c._setElementUseMaxLength(false);}if(this._use_html_maxlength){nexacro.__setDOMNode_MaxLength(_b,_c.maxlength);}else{nexacro.__setDOMNode_MaxLength(_b,0);}return true;},on_apply_force_imeSet:function(_a){return true;}},"TextAreaElement":{on_reset_update_value:function(_a){if(this._need_reset_update_value){this._need_reset_update_value=false;var _b=this._processing_oninput;this._processing_oninput=true;var _c;if(_a){_c=this.getElementCaretPos();}var _d=nexacro.__getDOMNodeValue(this.handle);if(_d==''){nexacro.__setDOMNode_Value(this.handle,' ');}nexacro.__setDOMNode_Value(this.handle,_d);if(_a&&_c){this.setElementSetSelect(_c.begin,_c.end);}this._processing_oninput=_b;}}},"SimpleInputElement":{on_sys_keydown_process:function(_a){return true;},on_sys_keyup_specialkey_process:function(_a){var _b=_a.target;var _c=_b._linked_element;var _d=nexacro._getSysEventKey(_a);var _e=_a.ctrlKey;var _f=_c.getElementCaretPos();var _g=_c._composer.isComposing();if(_g){var _h=_c._getInputValue();if(_d==nexacro.Event.KEY_RETURN||_d==nexacro.Event.KEY_ESC||(_e&&_d==77)||(_e&&_d==90)){_c._composer.setStatus(nexacro._CompositionState.END,_f.end);_c._updateInputValue(_h,true);}}return true;},on_sys_compositionstart_process:function(_a){var _b=_a.target;var _c=_b._linked_element;var _d=_c.getElementCaretPos();_c._composer.setStatus(nexacro._CompositionState.START,_d.begin);return true;},on_sys_compositionend_process:function(_a){var _b=_a.target;var _c=_b._linked_element;var _d=_c.parent_elem.linkedcontrol;var _e=_c._getInputValue();var _f=_c.getElementCaretPos();_c._composer.setStatus(nexacro._CompositionState.END,_f.end);if(_c._use_event_beforeinput&&nexacro._OS=="Android"){var _g=_a.data;var _h=_a.type;var _i=_c._getInputValue();var _j=_c.getCompositionStatus();var _k=_f.begin;var _l=_f.end;if(_c._composing_start!==undefined&&_c._composing_end!==undefined){_k=_c._composing_start;}if(_l==undefined){if(_c.maxlength>0){_l=Math.min(_k+_g.length,_c.maxlength);}else{_l=_k+_g.length;}}_g=_g.substr(0,_l-_k);_i=_i.substring(0,_k)+_i.substring(_l,Math.min(_i.length,(_c.maxlength>0?_c.maxlength:_i.length)));_c._beforeinput_result=_d._on_beforekeyinput(_c,_g,_j,_k,_l,_h);if(_c._beforeinput_result){_c._beforeinput_result.forEach(function(_t){var _u;switch(_t){case _c._BeforeinputState.PASS:break;case _c._BeforeinputState.CANCEL:_c._beforeinput_result_data=_i;_c._beforeinput_result_pos={begin:null,end:null};break;case _c._BeforeinputState.CONVERT_UPPER:_u=_l;_c._beforeinput_result_data=_i.substring(0,_k)+_g.toUpperCase()+_i.substring(_l,_i.length);_c._beforeinput_result_pos={begin:_u,end:_u};break;case _c._BeforeinputState.CONVERT_LOWER:_u=_l+_g.length;_c._beforeinput_result_data=_i.substring(0,_k)+_g.toLowerCase()+_i.substring(_l);_c._beforeinput_result_pos={begin:_u,end:_u};break;case _c._BeforeinputState.MAXLENGTH:break;case _c._BeforeinputState.REPLACE:break;default:break;}},_c);}_c._on_sys_keyinput(_a);}_c._composing_start=_c._composing_end=undefined;var _m=_e;if(_c.maxlength>0&&_e&&_e.length>_c.maxlength){if(_c._last_selection_range){var _n=_m.substr(0,_c._last_selection_range[0]);var _o=_n.length;var _p=_m.substr(_f.end);var _q=_p.length;var _r=_c.maxlength-(_o+_q);if(_r<0){_r=0;}var _s=_m.substr(_c._last_selection_range[0],_r);_m=_n+_s+_p;}else{_m=_m.substring(0,_c.maxlength);}_e=_m;}_d=_c.parent.linkedcontrol;if(_d){_d._on_input_compositionend(_e);}_c._setElementLastSelectionRange();return true;},_on_sys_keyinput_process_use_event_beforeinput:function(_a){var _b=_a.target;var _c=_b._linked_element;if(_c._skip_sys_keyinput){_c._skip_sys_keyinput=false;return;}var _d=_c.parent_elem.linkedcontrol;var _e=false;var _f=_c._getInputValue();var _g;if(_c._beforeinput_result){var _h=false;_c._beforeinput_result.forEach(function(_l){switch(_l){case nexacro.InputElement.prototype._BeforeinputState.PASS:break;case nexacro.InputElement.prototype._BeforeinputState.CANCEL:_c._updateInputValue(_c._beforeinput_result_data,false,_c._beforeinput_result_pos.end,_c._beforeinput_result_pos.end);_h=true;break;case nexacro.InputElement.prototype._BeforeinputState.CONVERT_UPPER:case nexacro.InputElement.prototype._BeforeinputState.CONVERT_LOWER:case nexacro.InputElement.prototype._BeforeinputState.REPLACE:if(_c._beforeinput_result_data!=null){_c._updateInputValue(_c._beforeinput_result_data,false,_c._beforeinput_result_pos.begin,_c._beforeinput_result_pos.end);}break;case nexacro.InputElement.prototype._BeforeinputState.MAXLENGTH:_e=true;break;}},_c);if(_c.autoskip&&_e){if(_c.value&&_f.length>=_c.maxlength){_c._go_next_focus();}}if(_h){return;}}_f=_c._getInputValue();_g=_c.getElementCaretPos();if(_c._composer.isComposing()){_c._composer.setStatus(nexacro._CompositionState.COMPOSING,_g.end);}var _i=_c.value;_c._updateElementValue(_f);if(_d._on_keyinput){_d._on_keyinput(_c);}if(_c.getInputStatusPseudoClass("AUTOFILL")){nexacro.__changeInputDOMNodeType(_b,_c.inputtype);}var _j=_c._composer._prev_status;var _k=_c._composer.status;if(_j==_k&&_c.value==_i){if(_d._on_input_autoskip){_d._on_input_autoskip();}}_c._composer._prev_status=_k;return true;},_on_sys_keyinput_process_no_use_event_beforeinput:function(_a){if(nexacro._Browser=="Gecko"){var _b=_a?_a.target:this.handle;var _c=_b?_b._linked_element:this;var _d=_c.parent_elem.linkedcontrol;var _e=_d._getRootWindow();if(_e&&_e._keydown_element){if(_e._keydown_element!==_c&&_d._processing_autoskip){var _f=_c.value;var _g=(_c._last_selection_range)?_c._last_selection_range:[0,0];_c._updateInputValue(_f,false,_g[0],_g[1]);_d._processing_autoskip=false;return false;}}}return nexacro.InputElement.prototype.on_sys_keyinput_process.call(this,_a);},on_sys_keyinput_process:function(_a){if(this._use_event_beforeinput&&nexacro._is_hangul(_a.data)){return this._on_sys_keyinput_process_use_event_beforeinput(_a);}else{return this._on_sys_keyinput_process_no_use_event_beforeinput(_a);}},on_apply_ime_environment_process:function(_a){var _b=_a?_a.target:this.handle;var _c=_b?_b._linked_element:this;if(!_c._apple_default_browser){_c._setElementUseMaxLength(true);}else{_c._setElementUseMaxLength(false);}if(this._use_html_maxlength){nexacro.__setDOMNode_MaxLength(_b,_c.maxlength);}else{nexacro.__setDOMNode_MaxLength(_b,0);}return true;},on_apply_force_imeSet:function(_a){return true;}},"SimpleTextAreaElement":{on_reset_update_value:function(_a){if(this._need_reset_update_value){this._need_reset_update_value=false;var _b=this._processing_oninput;this._processing_oninput=true;var _c;if(_a){_c=this.getElementCaretPos();}var _d=nexacro.__getDOMNodeValue(this.handle);if(_d==''){nexacro.__setDOMNode_Value(this.handle,' ');}nexacro.__setDOMNode_Value(this.handle,_d);if(_a&&_c){this.setElementSetSelect(_c.begin,_c.end);}this._processing_oninput=_b;}}}});}}else{if(nexacro.InputElement){nexacro._defineImeLocaleEdit("ko",{"InputElement":{on_sys_compositionstart_process:function(){var _a=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.START,_a.begin);return false;},on_sys_compositionupdate_process:function(){var _a=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.COMPOSING,_a.end);return false;},on_sys_compositionend_process:function(){var _a=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.END,_a.end);var _b=this._getInputValue();var _c=_b;if(this.maxlength>0&&_b&&_b.length>this.maxlength){if(this._last_selection_range){var _d=_c.substr(0,this._last_selection_range[0]);var _e=_d.length;var _f=_c.substr(_a.end);var _g=_f.length;var _h=this.maxlength-(_e+_g);if(_h<0){_h=0;}var _i=_c.substr(this._last_selection_range[0],_h);_c=_d+_i+_f;}else{_c=_c.substring(0,this.maxlength);}_b=_c;}var _j=this.parent.linkedcontrol;if(_j){_j._on_input_compositionend(_b);}return false;}},"SimpleInputElement":{},"SimpleTextAreaElement":{}});}}{var regexp_ko="[\\uac00-\\ud7af\\u3130-\\u318f\\u1100-\\u11ff]";nexacro._addImeLocaleInfo("ko",regexp_ko);}if(nexacro.Edit){nexacro._defineImeLocaleEdit("zh",{"Edit":{on_deactivate_process:function(){var _a=this._input_element;if(_a){if(!this._onlydisplay&&_a.isComposing()){this._killfocus_fix_composition();}}return true;},on_keydown_basic_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){this._killfocus_fix_composition();var _h=_g.handle;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){_h.blur();_h.focus();}else if(nexacro._Browser=="Runtime"){_g.setCompositionComplete();}return;}else if(((_c&&_a==86)||(_d&&_a==45))&&_g.isComposing()){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack){this._undostack.undo();_g._applyMaxlength();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(this._undostack&&!_g.isComposing()){var _h=_g.getElementCaretPos();if(_h&&_h!=-1){this._undostack.update(_h.begin,_h.end);}}return true;},on_keyinput_basic_before_process:function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;if(this._p_value===_c&&this._p_text===_a){return false;}return true;},on_beforeinput_process_with_HTMLEvent:function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a?_a.replace(/\r\n/g,""):_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(_b==0||_b==3){switch(this.inputmode){case "upper":_g=_g.toUpperCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_g=_g.toLowerCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}if(this.maxlength>0&&((_b==0||_b==3)||_e=="insertFromPaste")){_h=_h?_h:_f._getInputValue();var _k=_h.substring(0,_c)+(_g?_g:"")+_h.substring(_d);var _l=_e=="insertFromPaste"?_c+_g.length:_d-(_a.length-_g.length)+1;var _m=_f._checkMaxLength(_k,_l);if(_m&&_m.ismax){var _n=_m.pos;_g=_g.substring(0,_n-_c);_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_n,end:_n};_j.push(_f._BeforeinputState.REPLACE);_j.push(_f._BeforeinputState.MAXLENGTH);}}return _j;},_killfocus_fix_composition:function(){var _a=this._input_element;var _b=_a._getInputValue();var _c=_a._composer.startOffset;var _d=_a._composer.endOffset;var _e=this._fix_composition(_b,_c,_d);var _f=_d;var _g=-1;var _h=false;var _i=_a._checkMaxLength(_e,_f-(_b.length-_e.length),true);if(this.maxlength>0){if(_i){_h=_i.ismax;_g=_i.pos;if(_h){_e=_e.substring(0,_g)+_b.substring(_f);}}else{_g=_f-(_b.length-_e.length);}}else{_g=_f-(_b.length-_e.length);}_b=_e;_a._updateElementValue(_b);if(nexacro._Browser=="Runtime"){_a._updateInputValue(_b);}else{nexacro.__setDOMNode_Value(_a.handle,_b);}if(_g!=-1&&_c==_g){_a.setCompositionCancel(_g,true);}else{_a.setCompositionComplete(_g,true);}_a.setElementSetSelect(_g,_g);_b=_a._getInputValue();return _b;},on_killfocus_basic_process:function(){var _a=this._input_element;if(!this._onlydisplay){var _b=_a.value;if(_a.isComposing()){_b=this._killfocus_fix_composition();}var _c=this._default_value;var _d=this._default_text;var _e=_a.value;var _f=_e?_e:"";var _g=_a.getElementCaretPos();if(_c!=_e){if(!this._on_value_change(_d,_c,_f,_e)){var _h=_f?_f.length:0;var _i=_d?_d.length:0;if(_g!=-1){if(_h-_i>=0){_g.begin=_g.end=_g.begin-(_h-_i);}if(_g.begin<0){_g.begin=_g.end=0;}this._caret_pos=_g;}else{this._caret_pos.begin=this._caret_pos.end=_c?_c.length:0;}this._p_value=_c;this._p_text=_d;_b=_c;_a.setElementValue(_c);_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}else{_b=_a.value;}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}var _j=this._getRootWindow();var _k=_j._indexOfCurrentFocusPaths(this);if(_k<0){_a.setElementBlur();}}else{if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}}return true;},_fix_composition:function(_a,_b,_c){var _d=_a.substring(_b,_c);if(_d){var _e=_d;if(this._inputtype_obj){_e=this._inputtype_obj.apply(_e);}if(this._inputfilter_obj){_e=this._inputfilter_obj.apply(_e);}if(this.inputmode=="upper"){_e=_e.toUpperCase();}else if(this.inputmode=="lower"){_e=_e.toLowerCase();}return _a.substring(0,_b)+_e+_a.substring(_c);}else{return _a;}}},"TextArea":{on_deactivate_process:function(){var _a=this._input_element;if(_a){if(!this._onlydisplay&&_a.isComposing()){this._killfocus_fix_composition();}}return true;},on_keydown_basic_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){this._killfocus_fix_composition();var _h=_g.handle;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){_h.blur();_h.focus();}else if(nexacro._Browser=="Runtime"){_g.setCompositionComplete();}return;}else if(((_c&&_a==86)||(_d&&_a==45))&&_g.isComposing()){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack){this._undostack.undo();_g._applyMaxlength();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}else if(_a==nexacro.Event.KEY_TAB){if(!_b&&!_d&&((this.acceptstab&&!_c)||(!this.acceptstab&&_c))){var _i=_g.getElementCaretPos();var _j=_g.getElementText();_j=_j.substring(0,_i.begin)+nexacro.TextArea._TAB_CHAR+_j.substring(_i.end);var _k=_i.begin+nexacro.TextArea._TAB_CHAR.length;nexacro._OnceCallbackTimer.callonce(this,function(){_g.updateElementText(_j,_k);},0);_g.stopSysEvent();}else{this._want_tab=false;}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(this._undostack&&!_g.isComposing()){var _h=_g.getElementCaretPos();if(_h&&_h!=-1){this._undostack.update(_h.begin,_h.end);}}return true;},on_keydown_default_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(_a==nexacro.Event.KEY_RETURN){if(_g.isComposing()){var _h=_g.getElementCaretPos();var _i=_g._composer.startOffset;var _j=_h.end;if(_j===undefined){_j=_g._composer.endOffset;}var _k=_g._getInputValue();var _l=this._fix_composition(_k,_i,_j);var _m=_j;var _n=-1;var _o=false;var _p=_g._checkMaxLength(_l,_m-(_k.length-_l.length),true);if(this.maxlength>0){if(_p){_o=_p.ismax;_n=_p.pos;if(_o){_l=_l.substring(0,_n)+_k.substring(_m);}}else{_n=_m-(_k.length-_l.length);}}else{_n=_m-(_k.length-_l.length);}_k=_l;_g._updateElementValue(_k);if(nexacro._Browser=="Runtime"){_g._updateInputValue(_k);}else{nexacro.__setDOMNode_Value(_g.handle,_k);}if(_n!=-1&&_i==_n){_g.setCompositionCancel(_n,true);}else{_g.setCompositionComplete(_n,true);}_g.setElementSetSelect(_n,_n);_k=_g._getInputValue();if(_o){if(_g.autoskip){if(_g.value&&_k.length>=_g.maxlength){_g._go_next_focus();}}if(this._on_input_autoskip){this._on_input_autoskip();}}}}return nexacro.TextArea.prototype.on_keydown_default_specialkey_process.call(this,_a,_b,_c,_d,_e,_f);},on_keyinput_basic_before_process:function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;if(this._p_value===_c&&this._p_text===_a){return false;}return true;},on_killfocus_basic_process:function(){var _a=this._input_element;var _b;if(!this._onlydisplay){var _c=null;var _d=_a.value;if(_a.isComposing()){_c=[_a._composer.startOffset,_a._composer.endOffset];_d=_a._getInputValue();var _e=this._killfocus_fix_composition();_c[0]=_c[1]=_c[1]-(_d.length-_e.length);_d=_e;}else{var _f=_a.getElementCaretPos();if(_f&&_f!=-1){_c=_f;}}var _g=this._default_value;var _h=this._default_text;var _i=_a.value;_b=_i?_i:"";if(!_c){_c=_a.getElementCaretPos();}if(_g!=_i){if(!this._on_value_change(_h,_g,_b,_i)){var _j=_b?_b.length:0;var _k=_h?_h.length:0;if(_c!=-1){if(_j-_k>=0){_c.begin=_c.end=_c.begin-(_j-_k);}if(_c.begin<0){_c.begin=_c.end=0;}this._caret_pos=_c;}else{this._caret_pos.begin=this._caret_pos.end=_g?_g.length:0;}this._p_value=_g;this._p_text=_h;_d=_g;if(!this._onlydisplay){_a.setElementValue(_g);}else{_a.setElementText(_g);}_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);_a._need_reset_update_value=true;}else{_d=_a.value;}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}var _l=this._getRootWindow();var _m=_l._indexOfCurrentFocusPaths(this);if(_m<0){_a.setElementBlur();}}return true;},on_beforeinput_process_with_HTMLEvent:function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}if(/\r\n|\n\r/.test(_g)){_g=_g.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_g)){_g=_g.replace(/\r/g,"");}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(_b==0||_b==3){switch(this.inputmode){case "upper":_g=_g.toUpperCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_g=_g.toLowerCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}if(this.maxlength>0&&((_b==0||_b==3)||_e=="insertFromPaste")){_h=_h?_h:_f._getInputValue();var _k=_h.substring(0,_c)+(_g?_g:"")+_h.substring(_d);var _l=_e=="insertFromPaste"?_c+_g.length:_d-(_a.length-_g.length)+1;var _m=_f._checkMaxLength(_k,_l);if(_m&&_m.ismax){var _n=_m.pos;_g=_g.substring(0,_n-_c);_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_n,end:_n};_j.push(_f._BeforeinputState.REPLACE);_j.push(_f._BeforeinputState.MAXLENGTH);}}return _j;},_killfocus_fix_composition:function(){var _a=this._input_element;var _b=_a._getInputValue();var _c=_a._composer.startOffset;var _d=_a._composer.endOffset;var _e=this._fix_composition(_b,_c,_d);var _f=_d;var _g=-1;var _h=false;var _i=_a._checkMaxLength(_e,_f-(_b.length-_e.length),true);if(this.maxlength>0){if(_i){_h=_i.ismax;_g=_i.pos;if(_h){_e=_e.substring(0,_g)+_b.substring(_f);}}else{_g=_f-(_b.length-_e.length);}}else{_g=_f-(_b.length-_e.length);}_b=_e;_a._updateElementValue(_b);if(nexacro._Browser=="Runtime"){_a._updateInputValue(_b);}else{nexacro.__setDOMNode_Value(_a.handle,_b);}if(_g!=-1&&_c==_g){_a.setCompositionCancel(_g,true);}else{_a.setCompositionComplete(_g,true);}_a.setElementSetSelect(_g,_g);_b=_a._getInputValue();return _b;},_fix_composition:function(_a,_b,_c){var _d=_a.substring(_b,_c);if(_d){if(/\r\n|\n\r/.test(_d)){_d=_d.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_d)){_d=_d.replace(/\r/g,"");}var _e=_d;if(this._inputtype_obj){_e=this._inputtype_obj.apply(_e);}if(this._inputfilter_obj){_e=this._inputfilter_obj.apply(_e);}if(this.inputmode=="upper"){_e=_e.toUpperCase();}else if(this.inputmode=="lower"){_e=_e.toLowerCase();}return _a.substring(0,_b)+_e+_a.substring(_c);}else{return _a;}}},"TextField":{},"MultiLineTextField":{}});}if(nexacro._Browser!="Runtime"){if(nexacro.InputElement){nexacro._defineImeLocaleEdit("zh",{"InputElement":{_ignore_input_event_once:false,setCompositionComplete_process:function(_a,_b){var _c=this._getInputValue();var _d=_b||this._composer.isComposing();if(_d){var _e=this._composer.getOffset();_a=_a===undefined?_e.end:_a;this._composer.setStatus(nexacro._CompositionState.END,_a);this._updateInputValue(_c,!this._processing_oninput,_a);}return true;},setCompositionCancel_process:function(_a,_b){var _c=_b||this._composer.isComposing();if(_c){var _d=this._getInputValue();var _e=this._composer.getOffset();_a=_a===undefined?_e.end:_a;this._composer.setStatus(nexacro._CompositionState.END,_e.begin);this._updateInputValue(_d.substring(0,_e.begin)+_d.substring(_a),!this._processing_oninput,_e.begin);}return true;},on_sys_keydown_before_process:function(_a){var _b=_a.target;var _c=_b._linked_element;if(_b){if(_c){_c._ignore_input_event_once=false;}}return nexacro.InputElement.prototype.on_sys_keydown_before_process.call(_c,_a);},on_sys_keyup_before_process:function(_a){var _b=_a.target;var _c=_b._linked_element;if(_b){if(_c){_c._ignore_input_event_once=false;}}return nexacro.InputElement.prototype.on_sys_keyup_before_process.call(_c,_a);},on_sys_keyup_specialkey_process:function(_a){var _b=this;var _c=_b._composer.isComposing();if(_c){var _d=_a.ctrlKey;var _e=nexacro._getSysEventKey(_a);var _f=_b._getInputValue();var _g;if(_e==nexacro.Event.KEY_RETURN||(_d&&_e==77)||(_d&&_e==90)){_g=_b.getElementCaretPos();var _h=_b._composer.startOffset;_b._composer.setStatus(nexacro._CompositionState.END,_g.end);var _i=_b.parent_elem.linkedcontrol;var _j=_g.end;var _k=false;if(_b._composing_start!==undefined&&_b._composing_end!==undefined){_h=_b._composing_start;}var _l=-1;var _m=_i._fix_composition(_f,_h,_j);var _n=_j;if(_i.maxlength>0){var _o=_b._checkMaxLength(_m,_n-(_f.length-_m.length));if(_o){_k=_o.ismax;_l=_o.pos;if(_k){_m=_m.substring(0,_l)+_f.substring(_n);}}else{_l=_n-(_f.length-_m.length);}}else{_l=_n-(_f.length-_m.length);}_f=_m;_b._updateInputValue(_f,true,_l);_f=_b._getInputValue();if(_k){_b.setCompositionComplete();if(_b.autoskip&&_b._is_focused){if(_b.value&&_f.length>=_b.maxlength){_b._go_next_focus();}}if(_i._on_input_autoskip){_i._on_input_autoskip();}}_b._composing_start=_b._composing_end=undefined;_i=_b.parent.linkedcontrol;if(_i){_i._on_input_compositionend(_f);}_b._setElementLastSelectionRange();}}return true;},on_sys_beforeinput_forward_process:function(_a){var _b=this;var _c=_b.parent_elem.linkedcontrol;var _d=_a.data;var _e=_a.inputType;var _f=_b._getInputValue();var _g=_b.getElementCaretPos();var _h=_b.getCompositionStatus();var _i=_g.begin;var _j=_g.end;var _k=_c._getWindow();var _l;if(_c){_l=_k._getCaptureComp(false,true,_c);}if(_l&&_l!=_c){_b._beforeinput_result=[_b._BeforeinputState.CANCEL];_b._beforeinput_result_data=_f;_b._beforeinput_result_pos={begin:_i,end:_j};_b._b_beforeinput_forcedcancle=true;return false;}else{_b._b_beforeinput_forcedcancle=false;}if(!_b._composer.isComposing()||_a.inputType=="insertFromPaste"){{if(_d==null&&_e=="insertLineBreak"){_d="\n";}else if(_e=="insertCompositionText"){_b._composing_start=_i;_b._composing_end=_j;}_b._beforeinput_result=_c._on_beforekeyinput(_b,_d,_h,_i,_j,_e);if(_b._beforeinput_result){_b._beforeinput_result.forEach(function(_m){switch(_m){case _b._BeforeinputState.PASS:break;case _b._BeforeinputState.CANCEL:_b._beforeinput_result_data=_f;_b._beforeinput_result_pos={begin:_i,end:_j};break;case _b._BeforeinputState.MAXLENGTH:break;case _b._BeforeinputState.REPLACE:case _b._BeforeinputState.CONVERT_UPPER:case _b._BeforeinputState.CONVERT_LOWER:_b._beforeinput_result_data=_f.substring(0,_i)+_b._beforeinput_result_insert_data+_f.substring(_j);break;default:break;}},_b);}}}return true;},_on_sys_keyinput_process_use_event_beforeinput:function(_a){var _b=this;var _c=_b.parent_elem.linkedcontrol;var _d;var _e;var _f=false;if(_b._beforeinput_result&&(_b._b_beforeinput_forcedcancle||(!_b._composer.isComposing()||_a.inputType=="insertFromPaste"))){var _g=false;_b._beforeinput_result.forEach(function(_j){switch(_j){case nexacro.InputElement.prototype._BeforeinputState.PASS:break;case nexacro.InputElement.prototype._BeforeinputState.CANCEL:_b._updateInputValue(_b._beforeinput_result_data,false,_b._beforeinput_result_pos.end,_b._beforeinput_result_pos.end);_g=true;break;case nexacro.InputElement.prototype._BeforeinputState.CONVERT_UPPER:case nexacro.InputElement.prototype._BeforeinputState.CONVERT_LOWER:case nexacro.InputElement.prototype._BeforeinputState.REPLACE:if(_b._beforeinput_result_data!=null){_b._updateInputValue(_b._beforeinput_result_data,false,_b._beforeinput_result_pos.begin,_b._beforeinput_result_pos.end);}break;case nexacro.InputElement.prototype._BeforeinputState.MAXLENGTH:_f=true;break;}},_b);if(_g){return;}}_d=_b._getInputValue();_e=_b.getElementCaretPos();if(_c._is_undo&&this.maxlength>0){var _h=_b._checkMaxLength(_d,_e.end);if(_h&&_h.ismax){_d=_d.substring(0,_h.pos);_b._updateInputValue(_d,false,"",_h.end);}_c._is_undo=false;}if(_b._composer.isComposing()){_b._composer.setStatus(nexacro._CompositionState.COMPOSING,_e.end);}else{_b._updateElementValue(_d);}if(_c._on_keyinput&&_a.inputType!="deleteCompositionText"){_c._on_keyinput(_b);}var _i=_b._composer.status;_b._setElementLastSelectionRange();if(_b.autoskip&&_b._is_focused){if(_f){if(_b.value&&_d.length>=_b.maxlength){_b._go_next_focus();}}if(_c._on_input_autoskip){_c._on_input_autoskip();}}_b._composer._prev_status=_i;return true;},_on_sys_keyinput_process_no_use_event_beforeinput:function(_a){var _b=_a.target;var _c=this;var _d=_c.parent_elem.linkedcontrol;var _e=_c._composer.status;var _f=_c._getInputValue();var _g=_c.getElementCaretPos();if(_g&&_g!=-1){var _h,_i;_h=_c._paste_caret_pos?_c._paste_caret_pos.begin:_c._composer.startOffset;_i=_c._paste_caret_pos?_c._paste_caret_pos.end:_g.end;if(_h>_i){_h=_i;}var _j=_c._checkBackspaceKeyInKeyInput(_c.value,_f,_h,_i);var _k=_c._checkSelectionInKeyInput(_c.value,_f,_h,_i);if(_j){nexacro.__fireHTMLEvent(_b,"keydown","onkeydown");}if(_k!==false){_h=_k;}if(_d._on_beforekeyinput&&!_c._composer.isComposing()){_d._on_beforekeyinput(_c,_f,_e,_h,_i);if(_c._event_stop){nexacro._stopSysEvent(_a);_c._event_stop=false;return false;}}}var _l=_c._getInputValue();_g=_c.getElementCaretPos();if(nexacro._OS=="Android"&&nexacro._Browser=="Chrome"&&nexacro._BrowserVersion>"34"){if(_d instanceof nexacro.MaskEdit){_c._beforeinput_result_pos={begin:_g.begin,end:_g.end};}}var _m=false;if(_c.maxlength>0&&!_c._composer.isComposing()){var _n=_c._paste_caret_pos?_c._paste_caret_pos.end-(_f.length-_l.length):_g.end;var _o=_c._checkMaxLength(_l,_n);if(_o){_m=_o.ismax;var _p=_o.pos;if(_m){if(_n!=_p){_l=_l.substring(0,_p)+_l.substring(_n);_c._updateInputValue(_l,false,_p);_g=_c.getElementCaretPos();}_c.setCompositionComplete();}}}_f=_l;if(_c._composer.isComposing()){_c._composer.setStatus(nexacro._CompositionState.COMPOSING,_g.end);}else{_c._updateElementValue(_f);}var _q=_c._composer.status;if(_m){if(_d._on_input_autoskip&&_c._is_focused){_d._on_input_autoskip();}}_c._composer._prev_status=_q;if(_d._on_keyinput&&_a.inputType!="deleteCompositionText"){_d._on_keyinput(_c);}if(_c._event_stop){nexacro._stopSysEvent(_a);_c._event_stop=false;return false;}_c._setElementLastSelectionRange();if(_c.autoskip&&_c._is_focused){if(_m){if(nexacro._Browser=="Safari"){setTimeout(function(){if(_c._is_focused){_c._go_next_focus();}},0);}else{_c._go_next_focus();}}}return true;},on_sys_keyinput_process:function(_a){if(this._use_event_beforeinput){return this._on_sys_keyinput_process_use_event_beforeinput(_a);}else{return this._on_sys_keyinput_process_no_use_event_beforeinput(_a);}},on_sys_compositionupdate_process:function(_a){var _b=false;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Gecko"||nexacro._OS=="iOS"||nexacro._Browser=="Edge"){_b=true;}var _c=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.COMPOSING,_c.end,_b);return true;},on_sys_compositionend_process:function(_a){var _b=_a.target;var _c=_b._linked_element;var _d=_c.getCompositionStatus();if(_d!=nexacro._CompositionState.COMPOSING){return;}if(_c._is_focused){var _e=_c._getInputValue();var _f=_c.getElementCaretPos();var _g=_c._composer.startOffset;_c._composer.setStatus(nexacro._CompositionState.END,_f.end);var _h=_c.parent_elem.linkedcontrol;var _i=_a.data;var _j=_f.end;var _k=false;var _l;if(_c._composing_start!==undefined&&_c._composing_end!==undefined){_g=_c._composing_start;}if(_j==undefined){_j=_g+_i.length;}var _m=_j;var _n=-1;var _o;_o=_h._fix_composition(_e,_g,_j);if(_h.maxlength>0){_m=_c._paste_caret_pos?_c._paste_caret_pos.end:_j;_l=_c._checkMaxLength(_o,_m-(_e.length-_o.length));if(_l){_k=_l.ismax;_n=_l.pos;if(_k){_o=_o.substring(0,_n)+_e.substring(_m);}}else{_n=_m-(_e.length-_o.length);}}else{_n=_m-(_e.length-_o.length);}_e=_o;var _p=_c.value;if(!_c._evtfire_oninput_after_compositionend||_c._evtorder_compositionend_is_last||_c._use_event_beforeinput){_c._updateInputValue(_e,true,_n);}else{_c._updateInputValue(_e,false,_n);}if(_k){_c.setCompositionComplete();}_c._composing_start=_c._composing_end=undefined;_h=_c.parent.linkedcontrol;if(_h){_h._on_input_compositionend(_e);}_c._setElementLastSelectionRange();if(_c.autoskip&&_c._is_focused){if(_k){if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){_c._go_next_focus();}else{setTimeout(function(){if(_c._is_focused){_c._go_next_focus();}},0);}}if(_h._on_input_autoskip){_h._on_input_autoskip();}}}return true;},on_sys_touchend_process:function(_a){return false;},on_sys_paste_before_process:function(_a){if(nexacro._OS=="iOS"&&this.isComposing()){nexacro._stopSysEvent(_a);return false;}return true;},on_complete_composition_value_process:function(){if((nexacro._OS==="iOS"&&nexacro._Browser==="MobileSafari")||nexacro._Browser==="Gecko"){if(this.handle){this.handle.blur();this.handle.focus();if(nexacro._OS==="iOS"&&nexacro._Browser==="MobileSafari"){var _a=this.parent_elem.linkedcontrol;var _b=this._composer.startOffset;var _c=this.getElementCaretPos();var _d=_c.end;var _e=-1;var _f=this._getInputValue();var _g=_a._fix_composition(_f,_b,_d);var _h=_d;if(_a.maxlength>0){var _i=this._checkMaxLength(_g,_d-(_f.length-_g.length));if(_i){_e=_i.pos;if(_i.ismax){_g=_g.substring(0,_e)+_f.substring(_h);}}else{_e=_d-(_f.length-_g.length);}}else{_e=_d-(_f.length-_g.length);}this._updateInputValue(_g,false,_e);this.setCompositionComplete(_e,true);}}}return true;},on_apply_ime_environment_process:function(_a){var _b=_a?_a.target:this.handle;var _c=_b?_b._linked_element:this;_c._use_html_maxlength=false;nexacro.__setDOMNode_MaxLength(_b,0);return true;}},"TextAreaElement":{on_reset_update_value:function(_a){if(this._need_reset_update_value){this._need_reset_update_value=false;var _b=this._processing_oninput;this._processing_oninput=true;var _c;if(_a){_c=this.getElementCaretPos();}var _d=nexacro.__getDOMNodeValue(this.handle);if(_d==''){nexacro.__setDOMNode_Value(this.handle,' ');}nexacro.__setDOMNode_Value(this.handle,_d);if(_a&&_c){this.setElementSetSelect(_c.begin,_c.end);}this._processing_oninput=_b;}}},"SimpleInputElement":{},"SimpleTextAreaElement":{}});}}else{if(nexacro.InputElement){nexacro._defineImeLocaleEdit("zh",{"InputElement":{setCompositionComplete_process:function(_a,_b){var _c=this.getElementCaretPos();var _d=this._getInputValue();var _e=_b||this._composer.isComposing();if(_e){this._composer.setStatus(nexacro._CompositionState.END,_c.end);this._updateInputValue(_d,!this._processing_oninput);}return true;},setCompositionCancel_process:function(_a,_b){var _c=_b||this._composer.isComposing();if(_c){var _d=this._getInputValue();var _e=this._composer.getOffset();this._composer.setStatus(nexacro._CompositionState.END,_e.begin);this._updateInputValue(_d.substring(0,_e.begin),!this._processing_oninput);}return true;},on_sys_keyup_specialkey_process:function(_a,_b,_c){var _d=this.getElementCaretPos();var _e=this._composer.isComposing();if(_e){if(_a==nexacro.Event.KEY_RETURN||(_c&&_a==77)||(_c&&_a==90)){this._composer.setStatus(nexacro._CompositionState.END,_d.end);var _f=this._getInputValue();this._updateInputValue(_f,true);}}return true;},on_sys_keyinput_process:function(){var _a=this._composer.status;var _b,_c;var _d=this._getInputValue();var _e=this.getElementCaretPos();var _f=this._paste_caret_pos;_b=this._paste_caret_pos?this._paste_caret_pos.begin:this._composer.startOffset;_c=this._paste_caret_pos?this._paste_caret_pos.end:_e.end;if(_b>_c){_b=_c;}var _g=this.parent_elem.linkedcontrol;if(_g._on_beforekeyinput&&!this._composer.isComposing()){_g._on_beforekeyinput(this,_d,_a,_b,_c);if(this._event_stop){this._event_stop=false;return false;}}var _h=this._getInputValue();_e=this.getElementCaretPos();var _i=false;if(this.maxlength>0&&!this._composer.isComposing()){var _j=_f?_f.end:_e.end;var _k=this._checkMaxLength(_d,_j);if(_k){_i=_k.ismax;var _l=_k.pos;if(_i&&_j!=_l){_h=_d.substring(0,_l)+_d.substring(_j);this._updateInputValue(_h);this.setElementSetSelect(_l,_l);_e=this.getElementCaretPos();}this.setCompositionComplete();}}_d=_h;if(this._composer.isComposing()){this._composer.setStatus(nexacro._CompositionState.COMPOSING,_e.end);}else{this._updateElementValue(_d);}var _m=this._composer.status;if(_i){if(_g._on_input_autoskip&&this._is_focused){_g._on_input_autoskip();}}this._composer._prev_status=_m;if(_g._on_keyinput){_g._on_keyinput(this);}if(this._event_stop){this._event_stop=false;return false;}this._setElementLastSelectionRange();if(this.autoskip&&this._is_focused&&_i){this._go_next_focus();}return true;},on_sys_compositionend_process:function(){if(this._is_focused){var _a=this._getInputValue();var _b=this.getElementCaretPos();var _c=this._composer.startOffset;this._composer.setStatus(nexacro._CompositionState.END,_b.end);var _d=this.parent_elem.linkedcontrol;var _e=_b.end;var _f=false;if(this._composing_start!==undefined&&this._composing_end!==undefined){_c=this._composing_start;}if(_e==undefined){_e=_c;}var _g=-1;var _h=_d._fix_composition(_a,_c,_e);var _i=_e;if(_d.maxlength>0){var _j=this._checkMaxLength(_h,_i-(_a.length-_h.length));if(_j){_f=_j.ismax;_g=_j.pos;if(_f){_h=_h.substring(0,_g)+_a.substring(_i);}}else{_g=_i-(_a.length-_h.length);}}else{_g=_i-(_a.length-_h.length);}_a=_h;this._updateInputValue(_a,false,_g);if(_g!=-1&&_i!=_g){this.setElementSetSelect(_g,_g);_a=this._getInputValue();_b=this.getElementCaretPos();}if(_f){this.setCompositionComplete();}this._composer.setStatus(nexacro._CompositionState.END,_b.end);_d=this.parent.linkedcontrol;if(_d){_d._on_input_compositionend(_a);}}return;},on_complete_composition_value_process:function(){this.setCompositionComplete();return true;}},"SimpleInputElement":{},"SimpleTextAreaElement":{}});}}{var regexp_zh="[\u0000-\u007F]|[\u4E00-\u9FCC]";nexacro._addImeLocaleInfo("zh",regexp_zh);}if(nexacro.Edit){nexacro._defineImeLocaleEdit("ja",{"Edit":{on_deactivate_process:function(){var _a=this._input_element;if(_a){if(!this._onlydisplay&&_a.isComposing()){this._killfocus_fix_composition();}}return true;},on_keydown_basic_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){this._killfocus_fix_composition();var _h=_g.handle;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){_h.blur();_h.focus();}else if(nexacro._Browser=="Runtime"){_g.setCompositionComplete();}return;}else if(((_c&&_a==86)||(_d&&_a==45))&&_g.isComposing()){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack){this._undostack.undo();_g._applyMaxlength();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(this._undostack&&!_g.isComposing()){var _h=_g.getElementCaretPos();if(_h&&_h!=-1){this._undostack.update(_h.begin,_h.end);}}return true;},on_keyinput_basic_before_process:function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;if(this._p_value===_c&&this._p_text===_a){return false;}return true;},on_beforeinput_process_with_HTMLEvent:function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a?_a.replace(/\r\n/g,""):_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(_b==0||_b==3){switch(this.inputmode){case "upper":_g=_g.toUpperCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_g=_g.toLowerCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}if(this.maxlength>0&&((_b==0||_b==3)||_e=="insertFromPaste")){_h=_h?_h:_f._getInputValue();var _k=_h.substring(0,_c)+(_g?_g:"")+_h.substring(_d);var _l=_e=="insertFromPaste"?_c+_g.length:_d-(_a.length-_g.length)+1;var _m=_f._checkMaxLength(_k,_l);if(_m&&_m.ismax){var _n=_m.pos;_g=_g.substring(0,_n-_c);_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_n,end:_n};_j.push(_f._BeforeinputState.REPLACE);_j.push(_f._BeforeinputState.MAXLENGTH);}}return _j;},_killfocus_fix_composition:function(){var _a=this._input_element;var _b=_a._getInputValue();var _c=_a._composer.startOffset;var _d=_a._composer.endOffset;var _e=this._fix_composition(_b,_c,_d);var _f=_d;var _g=-1;var _h=false;var _i=_a._checkMaxLength(_e,_f-(_b.length-_e.length),true);if(this.maxlength>0){if(_i){_h=_i.ismax;_g=_i.pos;if(_h){_e=_e.substring(0,_g)+_b.substring(_f);}}else{_g=_f-(_b.length-_e.length);}}else{_g=_f-(_b.length-_e.length);}_b=_e;_a._updateElementValue(_b);if(nexacro._Browser=="Runtime"){_a._updateInputValue(_b);}else{nexacro.__setDOMNode_Value(_a.handle,_b);}if(_g!=-1&&_c==_g){_a.setCompositionCancel(_g,true);}else{_a.setCompositionComplete(_g,true);}_a.setElementSetSelect(_g,_g);_b=_a._getInputValue();return _b;},on_killfocus_basic_process:function(){var _a=this._input_element;if(!this._onlydisplay){var _b=_a.value;if(_a.isComposing()){_b=this._killfocus_fix_composition();}var _c=this._default_value;var _d=this._default_text;var _e=_a.value;var _f=_e?_e:"";var _g=_a.getElementCaretPos();if(_c!=_e){if(!this._on_value_change(_d,_c,_f,_e)){var _h=_f?_f.length:0;var _i=_d?_d.length:0;if(_g!=-1){if(_h-_i>=0){_g.begin=_g.end=_g.begin-(_h-_i);}if(_g.begin<0){_g.begin=_g.end=0;}this._caret_pos=_g;}else{this._caret_pos.begin=this._caret_pos.end=_c?_c.length:0;}this._p_value=_c;this._p_text=_d;_b=_c;_a.setElementValue(_c);_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}else{_b=_a.value;}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}var _j=this._getRootWindow();var _k=_j._indexOfCurrentFocusPaths(this);if(_k<0){_a.setElementBlur();}}else{if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}}return true;},_fix_composition:function(_a,_b,_c){var _d=_a.substring(_b,_c);if(_d){var _e=_d;if(this._inputtype_obj){_e=this._inputtype_obj.apply(_e);}if(this._inputfilter_obj){_e=this._inputfilter_obj.apply(_e);}if(this.inputmode=="upper"){_e=_e.toUpperCase();}else if(this.inputmode=="lower"){_e=_e.toLowerCase();}return _a.substring(0,_b)+_e+_a.substring(_c);}else{return _a;}}},"TextArea":{on_deactivate_process:function(){var _a=this._input_element;if(_a){if(!this._onlydisplay&&_a.isComposing()){this._killfocus_fix_composition();}}return true;},on_keydown_basic_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){this._killfocus_fix_composition();var _h=_g.handle;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){_h.blur();_h.focus();}else if(nexacro._Browser=="Runtime"){_g.setCompositionComplete();}return;}else if(((_c&&_a==86)||(_d&&_a==45))&&_g.isComposing()){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack){this._undostack.undo();_g._applyMaxlength();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}else if(_a==nexacro.Event.KEY_TAB){if(!_b&&!_d&&((this.acceptstab&&!_c)||(!this.acceptstab&&_c))){var _i=_g.getElementCaretPos();var _j=_g.getElementText();_j=_j.substring(0,_i.begin)+nexacro.TextArea._TAB_CHAR+_j.substring(_i.end);var _k=_i.begin+nexacro.TextArea._TAB_CHAR.length;nexacro._OnceCallbackTimer.callonce(this,function(){_g.updateElementText(_j,_k);},0);_g.stopSysEvent();}else{this._want_tab=false;}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(this._undostack&&!_g.isComposing()){var _h=_g.getElementCaretPos();if(_h&&_h!=-1){this._undostack.update(_h.begin,_h.end);}}return true;},on_keydown_default_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(_a==nexacro.Event.KEY_RETURN){if(_g.isComposing()){var _h=_g.getElementCaretPos();var _i=_g._composer.startOffset;var _j=_h.end;if(_j===undefined){_j=_g._composer.endOffset;}var _k=_g._getInputValue();var _l=this._fix_composition(_k,_i,_j);var _m=_j;var _n=-1;var _o=false;var _p=_g._checkMaxLength(_l,_m-(_k.length-_l.length),true);if(this.maxlength>0){if(_p){_o=_p.ismax;_n=_p.pos;if(_o){_l=_l.substring(0,_n)+_k.substring(_m);}}else{_n=_m-(_k.length-_l.length);}}else{_n=_m-(_k.length-_l.length);}_k=_l;_g._updateElementValue(_k);if(nexacro._Browser=="Runtime"){_g._updateInputValue(_k);}else{nexacro.__setDOMNode_Value(_g.handle,_k);}if(_n!=-1&&_i==_n){_g.setCompositionCancel(_n,true);}else{_g.setCompositionComplete(_n,true);}_g.setElementSetSelect(_n,_n);_k=_g._getInputValue();if(_o){if(_g.autoskip){if(_g.value&&_k.length>=_g.maxlength){_g._go_next_focus();}}if(this._on_input_autoskip){this._on_input_autoskip();}}}}return nexacro.TextArea.prototype.on_keydown_default_specialkey_process.call(this,_a,_b,_c,_d,_e,_f);},on_keyinput_basic_before_process:function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;if(this._p_value===_c&&this._p_text===_a){return false;}return true;},on_killfocus_basic_process:function(){var _a=this._input_element;var _b;if(!this._onlydisplay){var _c=null;var _d=_a.value;if(_a.isComposing()){_c=[_a._composer.startOffset,_a._composer.endOffset];_d=_a._getInputValue();var _e=this._killfocus_fix_composition();_c[0]=_c[1]=_c[1]-(_d.length-_e.length);_d=_e;}else{var _f=_a.getElementCaretPos();if(_f&&_f!=-1){_c=_f;}}var _g=this._default_value;var _h=this._default_text;var _i=_a.value;_b=_i?_i:"";if(!_c){_c=_a.getElementCaretPos();}if(_g!=_i){if(!this._on_value_change(_h,_g,_b,_i)){var _j=_b?_b.length:0;var _k=_h?_h.length:0;if(_c!=-1){if(_j-_k>=0){_c.begin=_c.end=_c.begin-(_j-_k);}if(_c.begin<0){_c.begin=_c.end=0;}this._caret_pos=_c;}else{this._caret_pos.begin=this._caret_pos.end=_g?_g.length:0;}this._p_value=_g;this._p_text=_h;_d=_g;if(!this._onlydisplay){_a.setElementValue(_g);}else{_a.setElementText(_g);}_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);_a._need_reset_update_value=true;}else{_d=_a.value;}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}var _l=this._getRootWindow();var _m=_l._indexOfCurrentFocusPaths(this);if(_m<0){_a.setElementBlur();}}return true;},on_beforeinput_process_with_HTMLEvent:function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}if(/\r\n|\n\r/.test(_g)){_g=_g.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_g)){_g=_g.replace(/\r/g,"");}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(_b==0||_b==3){switch(this.inputmode){case "upper":_g=_g.toUpperCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_g=_g.toLowerCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}if(this.maxlength>0&&((_b==0||_b==3)||_e=="insertFromPaste")){_h=_h?_h:_f._getInputValue();var _k=_h.substring(0,_c)+(_g?_g:"")+_h.substring(_d);var _l=_e=="insertFromPaste"?_c+_g.length:_d-(_a.length-_g.length)+1;var _m=_f._checkMaxLength(_k,_l);if(_m&&_m.ismax){var _n=_m.pos;_g=_g.substring(0,_n-_c);_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_n,end:_n};_j.push(_f._BeforeinputState.REPLACE);_j.push(_f._BeforeinputState.MAXLENGTH);}}return _j;},_killfocus_fix_composition:function(){var _a=this._input_element;var _b=_a._getInputValue();var _c=_a._composer.startOffset;var _d=_a._composer.endOffset;var _e=this._fix_composition(_b,_c,_d);var _f=_d;var _g=-1;var _h=false;var _i=_a._checkMaxLength(_e,_f-(_b.length-_e.length),true);if(this.maxlength>0){if(_i){_h=_i.ismax;_g=_i.pos;if(_h){_e=_e.substring(0,_g)+_b.substring(_f);}}else{_g=_f-(_b.length-_e.length);}}else{_g=_f-(_b.length-_e.length);}_b=_e;_a._updateElementValue(_b);if(nexacro._Browser=="Runtime"){_a._updateInputValue(_b);}else{nexacro.__setDOMNode_Value(_a.handle,_b);}if(_g!=-1&&_c==_g){_a.setCompositionCancel(_g,true);}else{_a.setCompositionComplete(_g,true);}_a.setElementSetSelect(_g,_g);_b=_a._getInputValue();return _b;},_fix_composition:function(_a,_b,_c){var _d=_a.substring(_b,_c);if(_d){if(/\r\n|\n\r/.test(_d)){_d=_d.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_d)){_d=_d.replace(/\r/g,"");}var _e=_d;if(this._inputtype_obj){_e=this._inputtype_obj.apply(_e);}if(this._inputfilter_obj){_e=this._inputfilter_obj.apply(_e);}if(this.inputmode=="upper"){_e=_e.toUpperCase();}else if(this.inputmode=="lower"){_e=_e.toLowerCase();}return _a.substring(0,_b)+_e+_a.substring(_c);}else{return _a;}}},"TextField":{on_deactivate_process:function(){var _a=this._input_element;if(_a){if(!this._onlydisplay&&_a.isComposing()){this._killfocus_fix_composition();}}return true;},on_keydown_basic_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){this._killfocus_fix_composition();var _h=_g.handle;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){_h.blur();_h.focus();}else if(nexacro._Browser=="Runtime"){_g.setCompositionComplete();}return;}else if(((_c&&_a==86)||(_d&&_a==45))&&_g.isComposing()){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack){this._undostack.undo();_g._applyMaxlength();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(this._undostack&&!_g.isComposing()){var _h=_g.getElementCaretPos();if(_h&&_h!=-1){this._undostack.update(_h.begin,_h.end);}}return true;},on_keyinput_basic_before_process:function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;if(this._p_value===_c&&this._p_text===_a){return false;}return true;},on_beforeinput_process_with_HTMLEvent:function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a?_a.replace(/\r\n/g,""):_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(_b==0||_b==3){switch(this.inputmode){case "upper":_g=_g.toUpperCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_g=_g.toLowerCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}if(this.maxlength>0&&((_b==0||_b==3)||_e=="insertFromPaste")){_h=_h?_h:_f._getInputValue();var _k=_h.substring(0,_c)+(_g?_g:"")+_h.substring(_d);var _l=_e=="insertFromPaste"?_c+_g.length:_d-(_a.length-_g.length)+1;var _m=_f._checkMaxLength(_k,_l);if(_m&&_m.ismax){var _n=_m.pos;_g=_g.substring(0,_n-_c);_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_n,end:_n};_j.push(_f._BeforeinputState.REPLACE);_j.push(_f._BeforeinputState.MAXLENGTH);}}return _j;},_killfocus_fix_composition:function(){var _a=this._input_element;var _b=_a._getInputValue();var _c=_a._composer.startOffset;var _d=_a._composer.endOffset;var _e=this._fix_composition(_b,_c,_d);var _f=_d;var _g=-1;var _h=false;var _i=_a._checkMaxLength(_e,_f-(_b.length-_e.length),true);if(this.maxlength>0){if(_i){_h=_i.ismax;_g=_i.pos;if(_h){_e=_e.substring(0,_g)+_b.substring(_f);}}else{_g=_f-(_b.length-_e.length);}}else{_g=_f-(_b.length-_e.length);}_b=_e;_a._updateElementValue(_b);if(nexacro._Browser=="Runtime"){_a._updateInputValue(_b);}else{nexacro.__setDOMNode_Value(_a.handle,_b);}if(_g!=-1&&_c==_g){_a.setCompositionCancel(_g,true);}else{_a.setCompositionComplete(_g,true);}_a.setElementSetSelect(_g,_g);_b=_a._getInputValue();return _b;},on_killfocus_basic_process:function(){var _a=this._input_element;if(!this._onlydisplay){var _b=_a.value;if(_a.isComposing()){_b=this._killfocus_fix_composition();}var _c=this._default_value;var _d=this._default_text;var _e=_a.value;var _f=_e?_e:"";var _g=_a.getElementCaretPos();if(_c!=_e){if(!this._on_value_change(_d,_c,_f,_e)){var _h=_f?_f.length:0;var _i=_d?_d.length:0;if(_g!=-1){if(_h-_i>=0){_g.begin=_g.end=_g.begin-(_h-_i);}if(_g.begin<0){_g.begin=_g.end=0;}this._caret_pos=_g;}else{this._caret_pos.begin=this._caret_pos.end=_c?_c.length:0;}this._p_value=_c;this._p_text=_d;_b=_c;_a.setElementValue(_c);_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}else{_b=_a.value;}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}var _j=this._getRootWindow();var _k=_j._indexOfCurrentFocusPaths(this);if(_k<0){_a.setElementBlur();}}else{if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}}return true;},_fix_composition:function(_a,_b,_c){var _d=_a.substring(_b,_c);if(_d){var _e=_d;if(this._inputtype_obj){_e=this._inputtype_obj.apply(_e);}if(this._inputfilter_obj){_e=this._inputfilter_obj.apply(_e);}if(this.inputmode=="upper"){_e=_e.toUpperCase();}else if(this.inputmode=="lower"){_e=_e.toLowerCase();}return _a.substring(0,_b)+_e+_a.substring(_c);}else{return _a;}}},"MultiLineTextField":{on_deactivate_process:function(){var _a=this._input_element;if(_a){if(!this._onlydisplay&&_a.isComposing()){this._killfocus_fix_composition();}}return true;},on_keydown_basic_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"||nexacro._OS=="iOS"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){this._killfocus_fix_composition();var _h=_g.handle;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){_h.blur();_h.focus();}else if(nexacro._Browser=="Runtime"){_g.setCompositionComplete();}return;}else if(((_c&&_a==86)||(_d&&_a==45))&&_g.isComposing()){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack){this._undostack.undo();_g._applyMaxlength();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}else if(_a==nexacro.Event.KEY_TAB){if(!_b&&!_d&&((this.acceptstab&&!_c)||(!this.acceptstab&&_c))){var _i=_g.getElementCaretPos();var _j=_g.getElementText();_j=_j.substring(0,_i.begin)+nexacro.TextArea._TAB_CHAR+_j.substring(_i.end);var _k=_i.begin+nexacro.TextArea._TAB_CHAR.length;nexacro._OnceCallbackTimer.callonce(this,function(){_g.updateElementText(_j,_k);},0);_g.stopSysEvent();}else{this._want_tab=false;}}return true;},on_keydown_basic_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(this._undostack&&!_g.isComposing()){var _h=_g.getElementCaretPos();if(_h&&_h!=-1){this._undostack.update(_h.begin,_h.end);}}return true;},on_keydown_default_specialkey_process:function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(_a==nexacro.Event.KEY_RETURN){if(_g.isComposing()){var _h=_g.getElementCaretPos();var _i=_g._composer.startOffset;var _j=_h.end;if(_j===undefined){_j=_g._composer.endOffset;}var _k=_g._getInputValue();var _l=this._fix_composition(_k,_i,_j);var _m=_j;var _n=-1;var _o=false;var _p=_g._checkMaxLength(_l,_m-(_k.length-_l.length),true);if(this.maxlength>0){if(_p){_o=_p.ismax;_n=_p.pos;if(_o){_l=_l.substring(0,_n)+_k.substring(_m);}}else{_n=_m-(_k.length-_l.length);}}else{_n=_m-(_k.length-_l.length);}_k=_l;_g._updateElementValue(_k);if(nexacro._Browser=="Runtime"){_g._updateInputValue(_k);}else{nexacro.__setDOMNode_Value(_g.handle,_k);}if(_n!=-1&&_i==_n){_g.setCompositionCancel(_n,true);}else{_g.setCompositionComplete(_n,true);}_g.setElementSetSelect(_n,_n);_k=_g._getInputValue();if(_o){if(_g.autoskip){if(_g.value&&_k.length>=_g.maxlength){_g._go_next_focus();}}if(this._on_input_autoskip){this._on_input_autoskip();}}}}return nexacro.TextArea.prototype.on_keydown_default_specialkey_process.call(this,_a,_b,_c,_d,_e,_f);},on_keyinput_basic_before_process:function(_a){var _b=this._input_element;var _c=_b.value===null?undefined:_b.value;_a=_a===undefined?_b._getInputValue():_a;if(this._p_value===_c&&this._p_text===_a){return false;}return true;},on_killfocus_basic_process:function(){var _a=this._input_element;var _b;if(!this._onlydisplay){var _c=null;var _d=_a.value;if(_a.isComposing()){_c=[_a._composer.startOffset,_a._composer.endOffset];_d=_a._getInputValue();var _e=this._killfocus_fix_composition();_c[0]=_c[1]=_c[1]-(_d.length-_e.length);_d=_e;}else{var _f=_a.getElementCaretPos();if(_f&&_f!=-1){_c=_f;}}var _g=this._default_value;var _h=this._default_text;var _i=_a.value;_b=_i?_i:"";if(!_c){_c=_a.getElementCaretPos();}if(_g!=_i){if(!this._on_value_change(_h,_g,_b,_i)){var _j=_b?_b.length:0;var _k=_h?_h.length:0;if(_c!=-1){if(_j-_k>=0){_c.begin=_c.end=_c.begin-(_j-_k);}if(_c.begin<0){_c.begin=_c.end=0;}this._caret_pos=_c;}else{this._caret_pos.begin=this._caret_pos.end=_g?_g.length:0;}this._p_value=_g;this._p_text=_h;_d=_g;if(!this._onlydisplay){_a.setElementValue(_g);}else{_a.setElementText(_g);}_a.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);_a._need_reset_update_value=true;}else{_d=_a.value;}}else{this._caret_pos=_a.getElementCaretPos();}if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}var _l=this._getRootWindow();var _m=_l._indexOfCurrentFocusPaths(this);if(_m<0){_a.setElementBlur();}}return true;},on_beforeinput_process_with_HTMLEvent:function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=_a;var _h=_f._getInputValue();var _i=_g?_g.length:0;var _j=[_f._BeforeinputState.PASS];if(_e=="deleteContentBackward"||_e=="deleteContentForward"||_e=="deleteByCut"){return _j;}if(/\r\n|\n\r/.test(_g)){_g=_g.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_g)){_g=_g.replace(/\r/g,"");}if(this._inputtype_obj){_g=this._inputtype_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(this._inputfilter_obj){_g=this._inputfilter_obj.apply(_g);if(_a!=_g){if(_g){_i=_g.length;_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.REPLACE);}else{_j.push(_f._BeforeinputState.CANCEL);}}}if(_b==0||_b==3){switch(this.inputmode){case "upper":_g=_g.toUpperCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_UPPER);break;case "lower":_g=_g.toLowerCase();_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_c+_i,end:_c+_i};_j.push(_f._BeforeinputState.CONVERT_LOWER);break;}}if(this.maxlength>0&&((_b==0||_b==3)||_e=="insertFromPaste")){_h=_h?_h:_f._getInputValue();var _k=_h.substring(0,_c)+(_g?_g:"")+_h.substring(_d);var _l=_e=="insertFromPaste"?_c+_g.length:_d-(_a.length-_g.length)+1;var _m=_f._checkMaxLength(_k,_l);if(_m&&_m.ismax){var _n=_m.pos;_g=_g.substring(0,_n-_c);_f._beforeinput_result_insert_data=_g;_f._beforeinput_result_pos={begin:_n,end:_n};_j.push(_f._BeforeinputState.REPLACE);_j.push(_f._BeforeinputState.MAXLENGTH);}}return _j;},_killfocus_fix_composition:function(){var _a=this._input_element;var _b=_a._getInputValue();var _c=_a._composer.startOffset;var _d=_a._composer.endOffset;var _e=this._fix_composition(_b,_c,_d);var _f=_d;var _g=-1;var _h=false;var _i=_a._checkMaxLength(_e,_f-(_b.length-_e.length),true);if(this.maxlength>0){if(_i){_h=_i.ismax;_g=_i.pos;if(_h){_e=_e.substring(0,_g)+_b.substring(_f);}}else{_g=_f-(_b.length-_e.length);}}else{_g=_f-(_b.length-_e.length);}_b=_e;_a._updateElementValue(_b);if(nexacro._Browser=="Runtime"){_a._updateInputValue(_b);}else{nexacro.__setDOMNode_Value(_a.handle,_b);}if(_g!=-1&&_c==_g){_a.setCompositionCancel(_g,true);}else{_a.setCompositionComplete(_g,true);}_a.setElementSetSelect(_g,_g);_b=_a._getInputValue();return _b;},_fix_composition:function(_a,_b,_c){var _d=_a.substring(_b,_c);if(_d){if(/\r\n|\n\r/.test(_d)){_d=_d.replace(/\r\n|\n\r/g,"\n");}if(/\r/.test(_d)){_d=_d.replace(/\r/g,"");}var _e=_d;if(this._inputtype_obj){_e=this._inputtype_obj.apply(_e);}if(this._inputfilter_obj){_e=this._inputfilter_obj.apply(_e);}if(this.inputmode=="upper"){_e=_e.toUpperCase();}else if(this.inputmode=="lower"){_e=_e.toLowerCase();}return _a.substring(0,_b)+_e+_a.substring(_c);}else{return _a;}}}});}if(nexacro._Browser!="Runtime"){if(nexacro.InputElement){nexacro._defineImeLocaleEdit("ja",{"InputElement":{_ignore_input_event_once:false,setCompositionComplete_process:function(_a,_b){var _c=this._getInputValue();var _d=_b||this._composer.isComposing();if(_d){var _e=this._composer.getOffset();_a=_a===undefined?_e.end:_a;this._composer.setStatus(nexacro._CompositionState.END,_a);this._updateInputValue(_c,!this._processing_oninput,_a);}return true;},setCompositionCancel_process:function(_a,_b){var _c=_b||this._composer.isComposing();if(_c){var _d=this._getInputValue();var _e=this._composer.getOffset();_a=_a===undefined?_e.end:_a;this._composer.setStatus(nexacro._CompositionState.END,_e.begin);this._updateInputValue(_d.substring(0,_e.begin)+_d.substring(_a),!this._processing_oninput,_e.begin);}return true;},on_sys_keydown_before_process:function(_a){var _b=_a.target;var _c=_b._linked_element;if(_b){if(_c){_c._ignore_input_event_once=false;}}return nexacro.InputElement.prototype.on_sys_keydown_before_process.call(_c,_a);},on_sys_keyup_before_process:function(_a){var _b=_a.target;var _c=_b._linked_element;if(_b){if(_c){_c._ignore_input_event_once=false;}}return nexacro.InputElement.prototype.on_sys_keyup_before_process.call(_c,_a);},on_sys_keyup_specialkey_process:function(_a){var _b=this;var _c=_b._composer.isComposing();if(_c){var _d=_a.ctrlKey;var _e=nexacro._getSysEventKey(_a);var _f=_b._getInputValue();var _g;if(_e==nexacro.Event.KEY_RETURN||(_d&&_e==77)||(_d&&_e==90)){_g=_b.getElementCaretPos();var _h=_b._composer.startOffset;_b._composer.setStatus(nexacro._CompositionState.END,_g.end);var _i=_b.parent_elem.linkedcontrol;var _j=_g.end;var _k=false;if(_b._composing_start!==undefined&&_b._composing_end!==undefined){_h=_b._composing_start;}var _l=-1;var _m=_i._fix_composition(_f,_h,_j);var _n=_j;if(_i.maxlength>0){var _o=_b._checkMaxLength(_m,_n-(_f.length-_m.length));if(_o){_k=_o.ismax;_l=_o.pos;if(_k){_m=_m.substring(0,_l)+_f.substring(_n);}}else{_l=_n-(_f.length-_m.length);}}else{_l=_n-(_f.length-_m.length);}_f=_m;_b._updateInputValue(_f,true,_l);_f=_b._getInputValue();if(_k){_b.setCompositionComplete();if(_b.autoskip&&_b._is_focused){if(_b.value&&_f.length>=_b.maxlength){_b._go_next_focus();}}if(_i._on_input_autoskip){_i._on_input_autoskip();}}_b._composing_start=_b._composing_end=undefined;_i=_b.parent.linkedcontrol;if(_i){_i._on_input_compositionend(_f);}_b._setElementLastSelectionRange();}}return true;},on_sys_beforeinput_forward_process:function(_a){var _b=this;var _c=_b.parent_elem.linkedcontrol;var _d=_a.data;var _e=_a.inputType;var _f=_b._getInputValue();var _g=_b.getElementCaretPos();var _h=_b.getCompositionStatus();var _i=_g.begin;var _j=_g.end;var _k=_c._getWindow();var _l;if(_c){_l=_k._getCaptureComp(false,true,_c);}if(_l&&_l!=_c){_b._beforeinput_result=[_b._BeforeinputState.CANCEL];_b._beforeinput_result_data=_f;_b._beforeinput_result_pos={begin:_i,end:_j};_b._b_beforeinput_forcedcancle=true;return false;}else{_b._b_beforeinput_forcedcancle=false;}if(!_b._composer.isComposing()||_a.inputType=="insertFromPaste"){{if(_d==null&&_e=="insertLineBreak"){_d="\n";}else if(_e=="insertCompositionText"){_b._composing_start=_i;_b._composing_end=_j;}_b._beforeinput_result=_c._on_beforekeyinput(_b,_d,_h,_i,_j,_e);if(_b._beforeinput_result){_b._beforeinput_result.forEach(function(_m){switch(_m){case _b._BeforeinputState.PASS:break;case _b._BeforeinputState.CANCEL:_b._beforeinput_result_data=_f;_b._beforeinput_result_pos={begin:_i,end:_j};break;case _b._BeforeinputState.MAXLENGTH:break;case _b._BeforeinputState.REPLACE:case _b._BeforeinputState.CONVERT_UPPER:case _b._BeforeinputState.CONVERT_LOWER:_b._beforeinput_result_data=_f.substring(0,_i)+_b._beforeinput_result_insert_data+_f.substring(_j);break;default:break;}},_b);}}}return true;},_on_sys_keyinput_process_use_event_beforeinput:function(_a){var _b=this;var _c=_b.parent_elem.linkedcontrol;var _d;var _e;var _f=false;if(_b._beforeinput_result&&(_b._b_beforeinput_forcedcancle||(!_b._composer.isComposing()||_a.inputType=="insertFromPaste"))){var _g=false;_b._beforeinput_result.forEach(function(_j){switch(_j){case nexacro.InputElement.prototype._BeforeinputState.PASS:break;case nexacro.InputElement.prototype._BeforeinputState.CANCEL:_b._updateInputValue(_b._beforeinput_result_data,false,_b._beforeinput_result_pos.end,_b._beforeinput_result_pos.end);_g=true;break;case nexacro.InputElement.prototype._BeforeinputState.CONVERT_UPPER:case nexacro.InputElement.prototype._BeforeinputState.CONVERT_LOWER:case nexacro.InputElement.prototype._BeforeinputState.REPLACE:if(_b._beforeinput_result_data!=null){_b._updateInputValue(_b._beforeinput_result_data,false,_b._beforeinput_result_pos.begin,_b._beforeinput_result_pos.end);}break;case nexacro.InputElement.prototype._BeforeinputState.MAXLENGTH:_f=true;break;}},_b);if(_g){return;}}_d=_b._getInputValue();_e=_b.getElementCaretPos();if(_c._is_undo&&this.maxlength>0){var _h=_b._checkMaxLength(_d,_e.end);if(_h&&_h.ismax){_d=_d.substring(0,_h.pos);_b._updateInputValue(_d,false,"",_h.end);}_c._is_undo=false;}if(_b._composer.isComposing()){_b._composer.setStatus(nexacro._CompositionState.COMPOSING,_e.end);}else{_b._updateElementValue(_d);}if(_c._on_keyinput&&_a.inputType!="deleteCompositionText"){_c._on_keyinput(_b);}var _i=_b._composer.status;_b._setElementLastSelectionRange();if(_b.autoskip&&_b._is_focused){if(_f){if(_b.value&&_d.length>=_b.maxlength){_b._go_next_focus();}}if(_c._on_input_autoskip){_c._on_input_autoskip();}}_b._composer._prev_status=_i;return true;},_on_sys_keyinput_process_no_use_event_beforeinput:function(_a){var _b=_a.target;var _c=this;var _d=_c.parent_elem.linkedcontrol;var _e=_c._composer.status;var _f=_c._getInputValue();var _g=_c.getElementCaretPos();if(_g&&_g!=-1){var _h,_i;_h=_c._paste_caret_pos?_c._paste_caret_pos.begin:_c._composer.startOffset;_i=_c._paste_caret_pos?_c._paste_caret_pos.end:_g.end;if(_h>_i){_h=_i;}var _j=_c._checkBackspaceKeyInKeyInput(_c.value,_f,_h,_i);var _k=_c._checkSelectionInKeyInput(_c.value,_f,_h,_i);if(_j){nexacro.__fireHTMLEvent(_b,"keydown","onkeydown");}if(_k!==false){_h=_k;}if(_d._on_beforekeyinput&&!_c._composer.isComposing()){_d._on_beforekeyinput(_c,_f,_e,_h,_i);if(_c._event_stop){nexacro._stopSysEvent(_a);_c._event_stop=false;return false;}}}var _l=_c._getInputValue();_g=_c.getElementCaretPos();if(nexacro._OS=="Android"&&nexacro._Browser=="Chrome"&&nexacro._BrowserVersion>"34"){if(_d instanceof nexacro.MaskEdit){_c._beforeinput_result_pos={begin:_g.begin,end:_g.end};}}var _m=false;if(_c.maxlength>0&&!_c._composer.isComposing()){var _n=_c._paste_caret_pos?_c._paste_caret_pos.end-(_f.length-_l.length):_g.end;var _o=_c._checkMaxLength(_l,_n);if(_o){_m=_o.ismax;var _p=_o.pos;if(_m){if(_n!=_p){_l=_l.substring(0,_p)+_l.substring(_n);_c._updateInputValue(_l,false,_p);_g=_c.getElementCaretPos();}_c.setCompositionComplete();}}}_f=_l;if(_c._composer.isComposing()){_c._composer.setStatus(nexacro._CompositionState.COMPOSING,_g.end);}else{_c._updateElementValue(_f);}var _q=_c._composer.status;if(_m){if(_d._on_input_autoskip&&_c._is_focused){_d._on_input_autoskip();}}_c._composer._prev_status=_q;if(_d._on_keyinput&&_a.inputType!="deleteCompositionText"){_d._on_keyinput(_c);}if(_c._event_stop){nexacro._stopSysEvent(_a);_c._event_stop=false;return false;}_c._setElementLastSelectionRange();if(_c.autoskip&&_c._is_focused){if(_m){if(nexacro._Browser=="Safari"){setTimeout(function(){if(_c._is_focused){_c._go_next_focus();}},0);}else{_c._go_next_focus();}}}return true;},on_sys_keyinput_process:function(_a){if(this._use_event_beforeinput){return this._on_sys_keyinput_process_use_event_beforeinput(_a);}else{return this._on_sys_keyinput_process_no_use_event_beforeinput(_a);}},on_sys_compositionupdate_process:function(_a){var _b=false;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Gecko"||nexacro._OS=="iOS"||nexacro._Browser=="Edge"){_b=true;}var _c=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.COMPOSING,_c.end,_b);return true;},on_sys_compositionend_process:function(_a){var _b=_a.target;var _c=_b._linked_element;var _d=_c.getCompositionStatus();if(_d!=nexacro._CompositionState.COMPOSING){return;}if(_c._is_focused){var _e=_c._getInputValue();var _f=_c.getElementCaretPos();var _g=_c._composer.startOffset;_c._composer.setStatus(nexacro._CompositionState.END,_f.end);var _h=_c.parent_elem.linkedcontrol;var _i=_a.data;var _j=_f.end;var _k=false;var _l;if(_c._composing_start!==undefined&&_c._composing_end!==undefined){_g=_c._composing_start;}if(_j==undefined){_j=_g+_i.length;}var _m=_j;var _n=-1;var _o;_o=_h._fix_composition(_e,_g,_j);if(_h.maxlength>0){_m=_c._paste_caret_pos?_c._paste_caret_pos.end:_j;_l=_c._checkMaxLength(_o,_m-(_e.length-_o.length));if(_l){_k=_l.ismax;_n=_l.pos;if(_k){_o=_o.substring(0,_n)+_e.substring(_m);}}else{_n=_m-(_e.length-_o.length);}}else{_n=_m-(_e.length-_o.length);}_e=_o;var _p=_c.value;if(!_c._evtfire_oninput_after_compositionend||_c._evtorder_compositionend_is_last||_c._use_event_beforeinput){_c._updateInputValue(_e,true,_n);}else{_c._updateInputValue(_e,false,_n);}if(_k){_c.setCompositionComplete();}_c._composing_start=_c._composing_end=undefined;_h=_c.parent.linkedcontrol;if(_h){_h._on_input_compositionend(_e);}_c._setElementLastSelectionRange();if(_c.autoskip&&_c._is_focused){if(_k){if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){_c._go_next_focus();}else{setTimeout(function(){if(_c._is_focused){_c._go_next_focus();}},0);}}if(_h._on_input_autoskip){_h._on_input_autoskip();}}}return true;},on_sys_touchend_process:function(_a){return false;},on_sys_paste_before_process:function(_a){if(nexacro._OS=="iOS"&&this.isComposing()){nexacro._stopSysEvent(_a);return false;}return true;},on_complete_composition_value_process:function(){if((nexacro._OS==="iOS"&&nexacro._Browser==="MobileSafari")||nexacro._Browser==="Gecko"){if(this.handle){this.handle.blur();this.handle.focus();if(nexacro._OS==="iOS"&&nexacro._Browser==="MobileSafari"){var _a=this.parent_elem.linkedcontrol;var _b=this._composer.startOffset;var _c=this.getElementCaretPos();var _d=_c.end;var _e=-1;var _f=this._getInputValue();var _g=_a._fix_composition(_f,_b,_d);var _h=_d;if(_a.maxlength>0){var _i=this._checkMaxLength(_g,_d-(_f.length-_g.length));if(_i){_e=_i.pos;if(_i.ismax){_g=_g.substring(0,_e)+_f.substring(_h);}}else{_e=_d-(_f.length-_g.length);}}else{_e=_d-(_f.length-_g.length);}this._updateInputValue(_g,false,_e);this.setCompositionComplete(_e,true);}}}return true;},on_apply_ime_environment_process:function(_a){var _b=_a?_a.target:this.handle;var _c=_b?_b._linked_element:this;_c._use_html_maxlength=false;nexacro.__setDOMNode_MaxLength(_b,0);return true;}},"TextAreaElement":{on_reset_update_value:function(_a){if(this._need_reset_update_value){this._need_reset_update_value=false;var _b=this._processing_oninput;this._processing_oninput=true;var _c;if(_a){_c=this.getElementCaretPos();}var _d=nexacro.__getDOMNodeValue(this.handle);if(_d==''){nexacro.__setDOMNode_Value(this.handle,' ');}nexacro.__setDOMNode_Value(this.handle,_d);if(_a&&_c){this.setElementSetSelect(_c.begin,_c.end);}this._processing_oninput=_b;}}},"SimpleInputElement":{_ignore_input_event_once:false,setCompositionComplete_process:function(_a,_b){var _c=this._getInputValue();var _d=_b||this._composer.isComposing();if(_d){var _e=this._composer.getOffset();_a=_a===undefined?_e.end:_a;this._composer.setStatus(nexacro._CompositionState.END,_a);this._updateInputValue(_c,!this._processing_oninput,_a);}return true;},setCompositionCancel_process:function(_a,_b){var _c=_b||this._composer.isComposing();if(_c){var _d=this._getInputValue();var _e=this._composer.getOffset();_a=_a===undefined?_e.end:_a;this._composer.setStatus(nexacro._CompositionState.END,_e.begin);this._updateInputValue(_d.substring(0,_e.begin)+_d.substring(_a),!this._processing_oninput,_e.begin);}return true;},on_sys_keydown_before_process:function(_a){var _b=_a.target;var _c=_b._linked_element;if(_b){if(_c){_c._ignore_input_event_once=false;}}return nexacro.InputElement.prototype.on_sys_keydown_before_process.call(_c,_a);},on_sys_keyup_before_process:function(_a){var _b=_a.target;var _c=_b._linked_element;if(_b){if(_c){_c._ignore_input_event_once=false;}}return nexacro.InputElement.prototype.on_sys_keyup_before_process.call(_c,_a);},on_sys_keyup_specialkey_process:function(_a){var _b=this;var _c=_b._composer.isComposing();if(_c){var _d=_a.ctrlKey;var _e=nexacro._getSysEventKey(_a);var _f=_b._getInputValue();var _g;if(_e==nexacro.Event.KEY_RETURN||(_d&&_e==77)||(_d&&_e==90)){_g=_b.getElementCaretPos();var _h=_b._composer.startOffset;_b._composer.setStatus(nexacro._CompositionState.END,_g.end);var _i=_b.parent_elem.linkedcontrol.parent;var _j=_g.end;var _k=false;if(_b._composing_start!==undefined&&_b._composing_end!==undefined){_h=_b._composing_start;}var _l=-1;var _m=_i._fix_composition(_f,_h,_j);var _n=_j;if(_i.maxlength>0){var _o=_b._checkMaxLength(_m,_n-(_f.length-_m.length));if(_o){_k=_o.ismax;_l=_o.pos;if(_k){_m=_m.substring(0,_l)+_f.substring(_n);}}else{_l=_n-(_f.length-_m.length);}}else{_l=_n-(_f.length-_m.length);}_f=_m;_b._updateInputValue(_f,true,_l);_f=_b._getInputValue();if(_k){_b.setCompositionComplete();if(_b.autoskip&&_b._is_focused){if(_b.value&&_f.length>=_b.maxlength){_b._go_next_focus();}}if(_i._on_input_autoskip){_i._on_input_autoskip();}}_b._composing_start=_b._composing_end=undefined;_i=_b.parent.linkedcontrol;if(_i){_i._on_input_compositionend(_f);}_b._setElementLastSelectionRange();}}return true;},on_sys_beforeinput_forward_process:function(_a){var _b=this;var _c=_b.parent_elem.linkedcontrol.parent;var _d=_a.data;var _e=_a.inputType;var _f=_b._getInputValue();var _g=_b.getElementCaretPos();var _h=_b.getCompositionStatus();var _i=_g.begin;var _j=_g.end;var _k=_c._getWindow();var _l;if(_c){_l=_k._getCaptureComp(false,true,_c);}if(_l&&_l!=_c){_b._beforeinput_result=[_b._BeforeinputState.CANCEL];_b._beforeinput_result_data=_f;_b._beforeinput_result_pos={begin:_i,end:_j};_b._b_beforeinput_forcedcancle=true;return false;}else{_b._b_beforeinput_forcedcancle=false;}if(!_b._composer.isComposing()||_a.inputType=="insertFromPaste"){{if(_d==null&&_e=="insertLineBreak"){_d="\n";}else if(_e=="insertCompositionText"){_b._composing_start=_i;_b._composing_end=_j;}_b._beforeinput_result=_c._on_beforekeyinput(_b,_d,_h,_i,_j,_e);if(_b._beforeinput_result){_b._beforeinput_result.forEach(function(_m){switch(_m){case _b._BeforeinputState.PASS:break;case _b._BeforeinputState.CANCEL:_b._beforeinput_result_data=_f;_b._beforeinput_result_pos={begin:_i,end:_j};break;case _b._BeforeinputState.MAXLENGTH:break;case _b._BeforeinputState.REPLACE:case _b._BeforeinputState.CONVERT_UPPER:case _b._BeforeinputState.CONVERT_LOWER:_b._beforeinput_result_data=_f.substring(0,_i)+_b._beforeinput_result_insert_data+_f.substring(_j);break;default:break;}},_b);}}}return true;},_on_sys_keyinput_process_use_event_beforeinput:function(_a){var _b=this;var _c=_b.parent_elem.linkedcontrol.parent;var _d;var _e;var _f=false;if(_b._beforeinput_result&&(_b._b_beforeinput_forcedcancle||(!_b._composer.isComposing()||_a.inputType=="insertFromPaste"))){var _g=false;_b._beforeinput_result.forEach(function(_j){switch(_j){case nexacro.InputElement.prototype._BeforeinputState.PASS:break;case nexacro.InputElement.prototype._BeforeinputState.CANCEL:_b._updateInputValue(_b._beforeinput_result_data,false,_b._beforeinput_result_pos.end,_b._beforeinput_result_pos.end);_g=true;break;case nexacro.InputElement.prototype._BeforeinputState.CONVERT_UPPER:case nexacro.InputElement.prototype._BeforeinputState.CONVERT_LOWER:case nexacro.InputElement.prototype._BeforeinputState.REPLACE:if(_b._beforeinput_result_data!=null){_b._updateInputValue(_b._beforeinput_result_data,false,_b._beforeinput_result_pos.begin,_b._beforeinput_result_pos.end);}break;case nexacro.InputElement.prototype._BeforeinputState.MAXLENGTH:_f=true;break;}},_b);if(_g){return;}}_d=_b._getInputValue();_e=_b.getElementCaretPos();if(_c._is_undo&&this.maxlength>0){var _h=_b._checkMaxLength(_d,_e.end);if(_h&&_h.ismax){_d=_d.substring(0,_h.pos);_b._updateInputValue(_d,false,"",_h.end);}_c._is_undo=false;}if(_b._composer.isComposing()){_b._composer.setStatus(nexacro._CompositionState.COMPOSING,_e.end);}else{_b._updateElementValue(_d);}if(_c._on_keyinput&&_a.inputType!="deleteCompositionText"){_c._on_keyinput(_b);}var _i=_b._composer.status;_b._setElementLastSelectionRange();if(_b.autoskip&&_b._is_focused){if(_f){if(_b.value&&_d.length>=_b.maxlength){_b._go_next_focus();}}if(_c._on_input_autoskip){_c._on_input_autoskip();}}_b._composer._prev_status=_i;return true;},_on_sys_keyinput_process_no_use_event_beforeinput:function(_a){var _b=_a.target;var _c=this;var _d=_c.parent_elem.linkedcontrol.parent;var _e=_c._composer.status;var _f=_c._getInputValue();var _g=_c.getElementCaretPos();if(_g&&_g!=-1){var _h,_i;_h=_c._paste_caret_pos?_c._paste_caret_pos.begin:_c._composer.startOffset;_i=_c._paste_caret_pos?_c._paste_caret_pos.end:_g.end;if(_h>_i){_h=_i;}var _j=_c._checkBackspaceKeyInKeyInput(_c.value,_f,_h,_i);var _k=_c._checkSelectionInKeyInput(_c.value,_f,_h,_i);if(_j){nexacro.__fireHTMLEvent(_b,"keydown","onkeydown");}if(_k!==false){_h=_k;}if(_d._on_beforekeyinput&&!_c._composer.isComposing()){_d._on_beforekeyinput(_c,_f,_e,_h,_i);if(_c._event_stop){nexacro._stopSysEvent(_a);_c._event_stop=false;return false;}}}var _l=_c._getInputValue();_g=_c.getElementCaretPos();if(nexacro._OS=="Android"&&nexacro._Browser=="Chrome"&&nexacro._BrowserVersion>"34"){if(_d instanceof nexacro.MaskEdit){_c._beforeinput_result_pos={begin:_g.begin,end:_g.end};}}var _m=false;if(_c.maxlength>0&&!_c._composer.isComposing()){var _n=_c._paste_caret_pos?_c._paste_caret_pos.end-(_f.length-_l.length):_g.end;var _o=_c._checkMaxLength(_l,_n);if(_o){_m=_o.ismax;var _p=_o.pos;if(_m){if(_n!=_p){_l=_l.substring(0,_p)+_l.substring(_n);_c._updateInputValue(_l,false,_p);_g=_c.getElementCaretPos();}_c.setCompositionComplete();}}}_f=_l;if(_c._composer.isComposing()){_c._composer.setStatus(nexacro._CompositionState.COMPOSING,_g.end);}else{_c._updateElementValue(_f);}var _q=_c._composer.status;if(_m){if(_d._on_input_autoskip&&_c._is_focused){_d._on_input_autoskip();}}_c._composer._prev_status=_q;if(_d._on_keyinput&&_a.inputType!="deleteCompositionText"){_d._on_keyinput(_c);}if(_c._event_stop){nexacro._stopSysEvent(_a);_c._event_stop=false;return false;}_c._setElementLastSelectionRange();if(_c.autoskip&&_c._is_focused){if(_m){if(nexacro._Browser=="Safari"){setTimeout(function(){if(_c._is_focused){_c._go_next_focus();}},0);}else{_c._go_next_focus();}}}return true;},on_sys_keyinput_process:function(_a){if(this._use_event_beforeinput){return this._on_sys_keyinput_process_use_event_beforeinput(_a);}else{return this._on_sys_keyinput_process_no_use_event_beforeinput(_a);}},on_sys_compositionupdate_process:function(_a){var _b=false;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Gecko"||nexacro._OS=="iOS"||nexacro._Browser=="Edge"){_b=true;}var _c=this.getElementCaretPos();this._composer.setStatus(nexacro._CompositionState.COMPOSING,_c.end,_b);return true;},on_sys_compositionend_process:function(_a){var _b=_a.target;var _c=_b._linked_element;var _d=_c.getCompositionStatus();if(_d!=nexacro._CompositionState.COMPOSING){return;}if(_c._is_focused){var _e=_c._getInputValue();var _f=_c.getElementCaretPos();var _g=_c._composer.startOffset;_c._composer.setStatus(nexacro._CompositionState.END,_f.end);var _h=_c.parent_elem.linkedcontrol.parent;var _i=_a.data;var _j=_f.end;var _k=false;var _l;if(_c._composing_start!==undefined&&_c._composing_end!==undefined){_g=_c._composing_start;}if(_j==undefined){_j=_g+_i.length;}var _m=_j;var _n=-1;var _o;_o=_h._fix_composition(_e,_g,_j);if(_h.maxlength>0){_m=_c._paste_caret_pos?_c._paste_caret_pos.end:_j;_l=_c._checkMaxLength(_o,_m-(_e.length-_o.length));if(_l){_k=_l.ismax;_n=_l.pos;if(_k){_o=_o.substring(0,_n)+_e.substring(_m);}}else{_n=_m-(_e.length-_o.length);}}else{_n=_m-(_e.length-_o.length);}_e=_o;var _p=_c.value;if(!_c._evtfire_oninput_after_compositionend||_c._evtorder_compositionend_is_last||_c._use_event_beforeinput){_c._updateInputValue(_e,true,_n);}else{_c._updateInputValue(_e,false,_n);}if(_k){_c.setCompositionComplete();}_c._composing_start=_c._composing_end=undefined;_h=_c.parent.linkedcontrol;if(_h){_h._on_input_compositionend(_e);}_c._setElementLastSelectionRange();if(_c.autoskip&&_c._is_focused){if(_k){if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){_c._go_next_focus();}else{setTimeout(function(){if(_c._is_focused){_c._go_next_focus();}},0);}}if(_h._on_input_autoskip){_h._on_input_autoskip();}}}return true;},on_sys_touchend_process:function(_a){return false;},_on_sys_compositionend:function(_a){var _b=(_a.target||_a.srcElement);if(_b){var _c=_b._linked_element;_c.on_sys_compositionend_process.call(_c,_a);}},on_sys_paste_before_process:function(_a){if(nexacro._OS=="iOS"&&this.isComposing()){nexacro._stopSysEvent(_a);return false;}return true;},on_complete_composition_value_process:function(){if((nexacro._OS==="iOS"&&nexacro._Browser==="MobileSafari")||nexacro._Browser==="Gecko"){if(this.handle){this.handle.blur();this.handle.focus();if(nexacro._OS==="iOS"&&nexacro._Browser==="MobileSafari"){var _a=this.parent_elem.linkedcontrol;var _b=this._composer.startOffset;var _c=this.getElementCaretPos();var _d=_c.end;var _e=-1;var _f=this._getInputValue();var _g=_a._fix_composition(_f,_b,_d);var _h=_d;if(_a.maxlength>0){var _i=this._checkMaxLength(_g,_d-(_f.length-_g.length));if(_i){_e=_i.pos;if(_i.ismax){_g=_g.substring(0,_e)+_f.substring(_h);}}else{_e=_d-(_f.length-_g.length);}}else{_e=_d-(_f.length-_g.length);}this._updateInputValue(_g,false,_e);this.setCompositionComplete(_e,true);}}}return true;},on_apply_ime_environment_process:function(_a){var _b=_a?_a.target:this.handle;var _c=_b?_b._linked_element:this;_c._use_html_maxlength=false;nexacro.__setDOMNode_MaxLength(_b,0);return true;}},"SimpleTextAreaElement":{on_reset_update_value:function(_a){if(this._need_reset_update_value){this._need_reset_update_value=false;var _b=this._processing_oninput;this._processing_oninput=true;var _c;if(_a){_c=this.getElementCaretPos();}var _d=nexacro.__getDOMNodeValue(this.handle);if(_d==''){nexacro.__setDOMNode_Value(this.handle,' ');}nexacro.__setDOMNode_Value(this.handle,_d);if(_a&&_c){this.setElementSetSelect(_c.begin,_c.end);}this._processing_oninput=_b;}}}});}}else{if(nexacro.InputElement){nexacro._defineImeLocaleEdit("ja",{"InputElement":{setCompositionComplete_process:function(_a,_b){var _c=this.getElementCaretPos();var _d=this._getInputValue();var _e=_b||this._composer.isComposing();if(_e){this._composer.setStatus(nexacro._CompositionState.END,_c.end);this._updateInputValue(_d,!this._processing_oninput);}return true;},setCompositionCancel_process:function(_a,_b){var _c=_b||this._composer.isComposing();if(_c){var _d=this._getInputValue();var _e=this._composer.getOffset();this._composer.setStatus(nexacro._CompositionState.END,_e.begin);this._updateInputValue(_d.substring(0,_e.begin),!this._processing_oninput);}return true;},on_sys_keyup_specialkey_process:function(_a,_b,_c){var _d=this.getElementCaretPos();var _e=this._composer.isComposing();if(_e){if(_a==nexacro.Event.KEY_RETURN||(_c&&_a==77)||(_c&&_a==90)){this._composer.setStatus(nexacro._CompositionState.END,_d.end);var _f=this._getInputValue();this._updateInputValue(_f,true);}}return true;},on_sys_keyinput_process:function(){var _a=this._composer.status;var _b,_c;var _d=this._getInputValue();var _e=this.getElementCaretPos();var _f=this._paste_caret_pos;_b=this._paste_caret_pos?this._paste_caret_pos.begin:this._composer.startOffset;_c=this._paste_caret_pos?this._paste_caret_pos.end:_e.end;if(_b>_c){_b=_c;}var _g=this.parent_elem.linkedcontrol;if(_g._on_beforekeyinput&&!this._composer.isComposing()){_g._on_beforekeyinput(this,_d,_a,_b,_c);if(this._event_stop){this._event_stop=false;return false;}}var _h=this._getInputValue();_e=this.getElementCaretPos();var _i=false;if(this.maxlength>0&&!this._composer.isComposing()){var _j=_f?_f.end:_e.end;var _k=this._checkMaxLength(_d,_j);if(_k){_i=_k.ismax;var _l=_k.pos;if(_i&&_j!=_l){_h=_d.substring(0,_l)+_d.substring(_j);this._updateInputValue(_h);this.setElementSetSelect(_l,_l);_e=this.getElementCaretPos();}this.setCompositionComplete();}}_d=_h;if(this._composer.isComposing()){this._composer.setStatus(nexacro._CompositionState.COMPOSING,_e.end);}else{this._updateElementValue(_d);}var _m=this._composer.status;if(_i){if(_g._on_input_autoskip&&this._is_focused){_g._on_input_autoskip();}}this._composer._prev_status=_m;if(_g._on_keyinput){_g._on_keyinput(this);}if(this._event_stop){this._event_stop=false;return false;}this._setElementLastSelectionRange();if(this.autoskip&&this._is_focused&&_i){this._go_next_focus();}return true;},on_sys_compositionend_process:function(){if(this._is_focused){var _a=this._getInputValue();var _b=this.getElementCaretPos();var _c=this._composer.startOffset;this._composer.setStatus(nexacro._CompositionState.END,_b.end);var _d=this.parent_elem.linkedcontrol;var _e=_b.end;var _f=false;if(this._composing_start!==undefined&&this._composing_end!==undefined){_c=this._composing_start;}if(_e==undefined){_e=_c;}var _g=-1;var _h=_d._fix_composition(_a,_c,_e);var _i=_e;if(_d.maxlength>0){var _j=this._checkMaxLength(_h,_i-(_a.length-_h.length));if(_j){_f=_j.ismax;_g=_j.pos;if(_f){_h=_h.substring(0,_g)+_a.substring(_i);}}else{_g=_i-(_a.length-_h.length);}}else{_g=_i-(_a.length-_h.length);}_a=_h;this._updateInputValue(_a,false,_g);if(_g!=-1&&_i!=_g){this.setElementSetSelect(_g,_g);_a=this._getInputValue();_b=this.getElementCaretPos();}if(_f){this.setCompositionComplete();}this._composer.setStatus(nexacro._CompositionState.END,_b.end);_d=this.parent.linkedcontrol;if(_d){_d._on_input_compositionend(_a);}}return;},on_complete_composition_value_process:function(){this.setCompositionComplete();return true;}},"SimpleInputElement":{},"SimpleTextAreaElement":{}});}}{var regexp_nipon="[\u0000-\u007F]|[\u0370-\u03FF]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\u31F0-\u31FF]|[\uFF01-\uFFEF]|[\u3000-\u3002]|[\u300C]|[\u300D]|[\u309B]|[\u309C]|[\u2010-\u201F]";nexacro._addImeLocaleInfo("ja",regexp_nipon);}if(!nexacro.ImageViewer){nexacro.ImageViewer=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pImageViewer=nexacro._createPrototype(nexacro.Component,nexacro.ImageViewer);nexacro.ImageViewer.prototype=_pImageViewer;_pImageViewer._type_name="ImageViewer";_pImageViewer._image=null;_pImageViewer._imagetext=null;_pImageViewer._p_text="";_pImageViewer._p_image=undefined;_pImageViewer._p_imagealign="center middle";_pImageViewer._p_imagewidth=0;_pImageViewer._p_imageheight=0;_pImageViewer._p_stretch="none";_pImageViewer._p_accessibilityrole="image";_pImageViewer._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"oninput":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onload":1,"onmove":1,"onsize":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pImageViewer.on_create_contents=function(){var _a=this.getElement();if(_a){if(this._p_image){this._createImageControl();}if(this._displaytext){this._createImageTextControl();}if(this._p_fittocontents!="none"){this._on_apply_fittocontents();}}};_pImageViewer.on_created_contents=function(_a){this.on_apply_stretch();if(this._image){this._image.on_created(_a);}if(this._imagetext){this._imagetext.on_created(_a);}if(nexacro._enableaccessibility){this._on_created_accessibility_contents(_a);}};_pImageViewer.on_create_contents_command=function(){this.on_apply_stretch();var _a="";if(this._image){_a+=this._image.createCommand();}if(this._imagetext){_a+=this._imagetext.createCommand();}return _a;};_pImageViewer.on_attach_contents_handle=function(_a){if(this._image){this._image.attachHandle(_a);}if(this._imagetext){this._imagetext.attachHandle(_a);}if(nexacro._enableaccessibility){this._on_attach_accessibility_contents_handle(_a);}};_pImageViewer.on_destroy_contents=function(){if(this._image){var _a=this._image.width;var _b=this._image.height;var _c=nexacro._toString(this._image._p_image);if(_c){if(this._image._getImageType()=="url"){_c=nexacro._getURIValue(_c);_c=nexacro._getImageLocation(_c,this._getRefFormBaseUrl());}}var _d=this._image._getstretchedmode(this.fittocontents);nexacro._releaseImageViewUrl(_c,_a,_b,_d);this._image.destroy();this._image=null;}if(this._imagetext){this._imagetext.destroy();this._imagetext=null;}};_pImageViewer.on_change_containerRect=function(_a,_b){if(this._image){this._image.resize(_a,_b);nexacro._resizeImageViewManager(this);}if(this._imagetext){this._imagetext.resize(_a,_b);}};_pImageViewer._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=[0,0];var _c=[0,0];var _d=0;var _e=0;var _f=this._getCurrentStyleBorder();if(_f){_d+=_f._getBorderWidth();_e+=_f._getBorderHeight();}var _g=this._getCurrentStylePadding();if(_g){_d+=_g.left+_g.right;_e+=_g.top+_g.bottom;}var _h;if(this._displaytext&&this._displaytext!==""){_h=this._displaytext;}else{_h=this._p_text;}if(_h&&this._imagetext){_b=this._imagetext._on_getFitSize();}var _i=this._image;if(_i){_c=_i.getOriginalImageSize();}_d+=Math.ceil(Math.max(_b[0],_c[0]));_e+=Math.ceil(Math.max(_b[1],_c[1]));return [_d,_e];}return [this._adjust_width,this._adjust_height];};_pImageViewer.set_imagewidth=nexacro._emptyFn;_pImageViewer.set_imageheight=nexacro._emptyFn;_pImageViewer.on_apply_text=function(){var _a=this._displaytext;var _b=this._imagetext;var _c=this.getElement();if(_c&&_a){this._createImageTextControl(false);}if(_b){_b.set_text(_a);if(!_a){_b.set_visible(false);}else{_b.set_visible(true);}}};_pImageViewer.set_image=function(_a){_a=this._convertImageValue(_a);if(this._p_image!=_a){this._p_image=_a;this.on_apply_image();}};_pImageViewer.on_apply_image=function(){var _a=this.getElement();if(_a&&this._p_image){if(!this._image){this._createImageControl(false);}}if(this._image){this._image.set_image(this._p_image);}};_pImageViewer.set_stretch=function(_a){var _b=["none","fit","fixaspectratio"];if(_b.indexOf(_a)==-1){return;}if(this._p_stretch!=_a){this._p_stretch=_a;this.on_apply_stretch();}};_pImageViewer.on_apply_stretch=function(){var _a=this._image;if(_a){var _b=this._image.width;var _c=this._image.height;var _d=nexacro._toString(this._image._p_image);if(_d){if(this._image._getImageType()=="url"){_d=nexacro._getURIValue(_d);_d=nexacro._getImageLocation(_d,this._getRefFormBaseUrl());}}var _e=_a._getstretchedmode(this.fittocontents);nexacro._releaseImageViewUrl(_d,_b,_c,_e);_a.set_stretch(this._p_stretch);}};_pImageViewer.set_imagealign=function(_a){if(this._p_imagealign!=_a){this._p_imagealign=_a;this.on_apply_imagealign();}};_pImageViewer.on_apply_imagealign=function(){var _a=this._image;if(_a){_a.set_imagealign(this._p_imagealign);}};_pImageViewer.on_apply_textAlign=function(_a){if(this._imagetext){this._imagetext.set_textAlign(_a);}};_pImageViewer.on_apply_verticalAlign=function(_a){if(this._imagetext){this._imagetext.set_verticalAlign(_a);}};_pImageViewer.on_apply_prop_enable=function(_a){if(this._image){this._image._setEnable(_a);}if(this._imagetext){this._imagetext._setEnable(_a);}};_pImageViewer._properties=[{name:"imagewidth"},{name:"imageheight"},{name:"image"},{name:"stretch"},{name:"imagealign"}];nexacro._defineProperties(_pImageViewer,_pImageViewer._properties);_pImageViewer.getImageCount=function(){var _a=this._image;if(_a){return _a.getImageCount();}return 0;};_pImageViewer.setImageIndex=function(_a){var _b=this._image;if(_b){_b.setImageIndex(parseInt(_a)|0);}};_pImageViewer._on_element_swap=function(){var _a=this.getElement();if(_a){var _b=this._imagetext?this._imagetext.getElement():null;var _c=this._image?this._image.getElement():null;if(_b&&_c){_a.sendToBackElement(_c);}}};_pImageViewer._on_image_onclick=function(_a,_b){return this.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,this,_a,_b.metakey);};_pImageViewer.on_fire_onload=function(_a,_b){if(this.onload&&this.onload._has_handlers){var _c=new nexacro.LoadEventInfo(_a,"onload",_b);var _d=this.onload._fireEvent(this,_c);return _d;}return true;};_pImageViewer.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Component.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);var _i=this._getWindow();this._cur_ldown_elem=_i._cur_ldown_elem||_i._keydown_element;return _h;};_pImageViewer.on_fire_sys_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Component.prototype.on_fire_sys_onkeyup.call(this,_a,_b,_c,_d,_e,_f,_g);var _i=this._getWindow();var _j=_i._cur_ldown_elem||_i._keydown_element;if(!this._is_subcontrol){if(_j==this._cur_ldown_elem){if(_a==13||_a==32){this.on_fire_onclick("none",_b,_c,_d,-1,-1,-1,-1,-1,-1,this,this,_g);}}}this._cur_ldown_elem=null;return _h;};_pImageViewer._createImageControl=function(_a){var _b=this._image;if(!_b){_b=this._image=new nexacro._ImageAreaControl("imagearea",0,0,this._getClientWidth(),this._getClientHeight(),null,null,null,null,null,null,this);_b.set_image(this._p_image);_b.set_imagealign(this._p_imagealign);_b.set_stretch(this._p_stretch);_b._setNotifyFn(this,this._setImageSize);_b.createComponent(_a);_b._setEventHandler("onclick",this._on_image_onclick,this);}return _b;};_pImageViewer._createImageTextControl=function(_a){var _b=this._imagetext;if(!_b){_b=this._imagetext=new nexacro.Static("imagetext",0,0,this._getClientWidth(),this._getClientHeight(),null,null,null,null,null,null,this);_b._setControl();if(nexacro._enableaccessibility){if(nexacro._accessibilitytype==4){_b.set_accessibilityrole("none");}else{_b.set_accessibilityrole(this._getAccessibilityRole());}}_b.set_text(this._displaytext);_b.createComponent(_a);_b._setEventHandler("onclick",this._on_image_onclick,this);}return _b;};_pImageViewer._convertImageValue=function(_a){if(_a){if(_a instanceof nexacro.Image){_a=_a._base64str;}else{_a=_a.toString();var _b=nexacro._transImageBase64StringFormat(_a);if(_b){_a=_b.alldata;}}}return _a;};_pImageViewer._setImageSize=function(_a,_b){this._p_imagewidth=_a;this._p_imageheight=_b;};delete _pImageViewer;nexacro._ImageAreaControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pImageAreaControl=nexacro._createPrototype(nexacro.Component,nexacro._ImageAreaControl);nexacro._ImageAreaControl.prototype=_pImageAreaControl;_pImageAreaControl._type_name="ImageAreaControl";_pImageAreaControl._is_subcontrol=true;_pImageAreaControl._p_image="";_pImageAreaControl._p_imagealign="center middle";_pImageAreaControl._p_imagewidth=0;_pImageAreaControl._p_imageheight=0;_pImageAreaControl._p_stretch="none";_pImageAreaControl._img_elem=null;_pImageAreaControl._imagealign=null;_pImageAreaControl._notifyTarget=null;_pImageAreaControl._notifyFn=null;_pImageAreaControl._orgwidth=0;_pImageAreaControl._orgheight=0;_pImageAreaControl._is_simple_control=true;_pImageAreaControl._is_focus_accept=false;_pImageAreaControl.on_create_contents=function(){var _a=this.getElement();if(_a){this._img_elem=new nexacro.ImageElement(_a,"image");}};_pImageAreaControl.on_created_contents=function(_a){if(this._img_elem){this._img_elem.create(_a);}this.on_apply_image();};_pImageAreaControl.on_create_contents_command=function(){var _a="";var _b=this._img_elem;if(_b){_a=_b.createCommand();}return _a;};_pImageAreaControl.on_attach_contents_handle=function(_a){var _b=this._img_elem;if(_b){_b.attachHandle(_a);this.on_apply_image();}};_pImageAreaControl.on_destroy_contents=function(){if(this._img_elem){this._img_elem.destroy();this._img_elem=null;}this._imagealign=null;this._notifyTarget=null;this._notifyFn=null;};_pImageAreaControl.on_change_containerRect=function(){if(this._img_elem){this._updateElementPositions();}};_pImageAreaControl.set_image=function(_a){_a=this._convertImageValue(_a);if(this._p_image!=_a){this.chk_on_fire_onload=true;this._p_image=_a;this.on_apply_image();}};_pImageAreaControl.on_apply_image=function(){this._load_image();};_pImageAreaControl.set_imagealign=function(_a){if(this._p_imagealign!=_a){this._p_imagealign=_a;this.on_apply_imagealign();}};_pImageAreaControl.on_apply_imagealign=function(){this._imagealign=nexacro.AlignObject(this._p_imagealign);if(this._img_elem){this._updateElementPositions();}};_pImageAreaControl.set_stretch=function(_a){if(this._p_stretch!=_a){this._p_stretch=_a;this.on_apply_stretch();}};_pImageAreaControl.on_apply_stretch=function(){this._load_image();this._updateElementPositions();};_pImageAreaControl._properties=[{name:"image"},{name:"stretch"},{name:"imagealign"},{name:"imagewidth"},{name:"imageheight"}];nexacro._defineProperties(_pImageAreaControl,_pImageAreaControl._properties);_pImageAreaControl._convertImageValue=function(_a){if(_a){if(_a instanceof nexacro.Image){_a=_a._base64str;}else{_a=_a.toString();var _b=nexacro._transImageBase64StringFormat(_a);if(_b){_a=_b.alldata;}}}return _a;};_pImageAreaControl._on_load_image=function(_a,_b,_c){var _d=this._p_parent;this._orgwidth=_b;this._orgheight=_c;this._setImageSize(_b,_c);if(_d instanceof nexacro.ImageViewer){if(_d.fittocontents!="none"){_d._update_position();}var _e=_a.indexOf("?size=");if(_e>0){var _f=_a.substring(_e+6);var _g=_f.split(":")[0].split("x")[0];var _h=_f.split(":")[0].split("x")[1];var _i=_f.split(":")[1];var _j=this._getstretchedmode(this._p_parent.fittocontents);if(_g!=this._p_width||_h!=this._p_height||_i!=_j){nexacro._releaseImageViewUrl(nexacro._removeImageViewUrl(_a),_g,_h,_i);}}}this._load_image_completed(_a,_b,_c);};_pImageAreaControl._load_image=function(){var _a=this.getElement();if(_a){var _b=nexacro._toString(this._p_image);var _c=this._img_elem;if(_b){if(this._getImageType()=="url"){_b=nexacro._getURIValue(_b);_b=nexacro._getImageLocation(_b,this._getRefFormBaseUrl());}var _d=0;if(this._p_parent instanceof nexacro.ImageViewer){var _e=this._getstretchedmode(this._p_parent.fittocontents);_d=nexacro._getImageViewSize(_b,this._on_load_image,this,undefined,this._p_image,true,this.width,this.height,_e);}else{_d=nexacro._getImageSize(_b,this._on_load_image,this,undefined,this._p_image);}if(_d){this._orgwidth=_d.width;this._orgheight=_d.height;this._load_image_completed(_b,_d.width,_d.height);}}else{if(_c){_c.setElementVisible(false);_c.setElementImage("");this._updateElementPositions();this._setImageSize(0,0);}}}};_pImageAreaControl._load_image_completed=function(_a,_b,_c){var _d=this._img_elem;if(_d){var _e=true;var _f=this._p_image;if(!_f||(_b==0&&_c==0)){_d.setElementVisible(false);_d.setElementImage("");this._updateElementPositions();this._setImageSize(0,0);if(this._on_fire_onimageerror){this._on_fire_onimageerror(_a);}}else{var _g=this._p_stretch;if(this._p_parent instanceof nexacro.ImageViewer){_g=this._getstretchedmode(this._p_parent.fittocontents);}_f=_f.toString();if(this._getImageType()=="url"){if(_f.substring(0,4).toLowerCase()=="url("){_f=_f.substring(5,_f.length-2);}_f=nexacro._getImageLocation(_f,this._getRefFormBaseUrl());_a=nexacro._removeImageViewUrl(_a);if(_f!=_a){_e=false;nexacro._releaseImageViewUrl(_a,this.width,this.height,_g);}}if(_e){_a=nexacro.UrlObject(_a);_d.setElementVisible(true);_d.setElementImage(_a,_b,_c,_g,this);this._updateElementPositions();}}}var _h=this._p_parent;if(_h instanceof nexacro.ImageViewer){_h._on_element_swap();if(this.chk_on_fire_onload==true){this.chk_on_fire_onload=false;_h.on_fire_onload(_h,_a);}}};_pImageAreaControl._updateElementPositions=function(){var _a=this._img_elem;if(_a){this._recalcImageSize();var _b=this._imagealign?this._imagealign.halign:"center";var _c=this._imagealign?this._imagealign.valign:"middle";var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=this._p_imagewidth;var _g=this._p_imageheight;var _h,_i;switch(_b){case "left":_h=0;break;case "right":_h=_d-_f;break;default:_h=Math.floor((_d-_f)/2);break;}switch(_c){case "top":_i=0;break;case "bottom":_i=_e-_g;break;default:_i=Math.floor((_e-_g)/2);break;}_a.setElementPosition(_h,_i);_a.setElementSize(_f,_g);}};_pImageAreaControl._recalcImageSize=function(){var _a=this._p_stretch;if(!_a){return;}var _b=0,_c=0;var _d=0,_e=0;var _f=this._getClientWidth();var _g=this._getClientHeight();if(_a=="fit"){_b=_f;_c=_g;}else if(_a=="fixaspectratio"){_d=this._orgwidth;_e=this._orgheight;if(_d||_e){var _h=_d?(_f/_d):_d;var _i=_e?(_g/_e):_e;if(_h<=_i){_b=_f;_c=Math.floor(_e* _h);}else{_b=Math.floor(_d* _i);_c=_g;}}else{_b=_d;_c=_e;}}else{_b=this._orgwidth;_c=this._orgheight;}this._setImageSize(_b,_c);};_pImageAreaControl._setNotifyFn=function(_a,_b){this._notifyTarget=_a;this._notifyFn=_b;};_pImageAreaControl._setImageSize=function(_a,_b){this._p_imagewidth=_a;this._p_imageheight=_b;if(this._notifyTarget&&this._notifyFn){this._notifyFn.call(this._notifyTarget,_a,_b);}};_pImageAreaControl._getImageType=function(){var _a="url";var _b=this._p_image;if(_b){var _c=nexacro._transImageBase64StringFormat(_b,false,true);if(_c&&_c.encode===";base64,"){_a="base64";}}return _a;};_pImageAreaControl.getImageCount=function(){var _a=this._img_elem;if(_a){return _a.getImageCount();}return 0;};_pImageAreaControl.getOriginalImageSize=function(){return [this._orgwidth,this._orgheight];};_pImageAreaControl.setImageIndex=function(_a){var _b=this._img_elem;if(_b){_b.setImageIndex(parseInt(_a)|0);}};_pImageAreaControl._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pImageAreaControl._getstretchedmode=function(_a,_b){var _c=_b;if(_b==undefined){_c=this._p_stretch;}if(nexacro&&nexacro._Browser=="Runtime"){if(_c=="fixaspectratio"&&_a&&_a!="none"){_c="none";}}return _c;};delete _pImageAreaControl;}if(!nexacro.CheckBox){nexacro.CheckBoxChangedEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"onchanged";this.prevalue=_c;this.postvalue=_d;this.fromobject=this.fromreferenceobject=_a;};var _pCheckBoxChangedEventInfo=nexacro._createPrototype(nexacro.ChangedEventInfo,nexacro.CheckBoxChangedEventInfo);nexacro.CheckBoxChangedEventInfo.prototype=_pCheckBoxChangedEventInfo;_pCheckBoxChangedEventInfo._type_name="CheckBoxChangedEventInfo";delete _pCheckBoxChangedEventInfo;nexacro.CheckBox=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._IconText.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCheckBox=nexacro._createPrototype(nexacro._IconText,nexacro.CheckBox);nexacro.CheckBox.prototype=_pCheckBox;_pCheckBox._type_name="CheckBox";_pCheckBox._p_value=false;_pCheckBox._p_readonly=false;_pCheckBox._p_falsevalue=null;_pCheckBox._p_truevalue=null;_pCheckBox._p_tabstop=true;_pCheckBox._is_focus_accept=true;_pCheckBox._use_selected_status=true;_pCheckBox._use_readonly_status=true;_pCheckBox.accessibilityrole="checkbox";_pCheckBox._event_list={"canchange":1,"onchanged":1,"onclick":1,"ondrag":1,"ondragenter":1,"ondragmove":1,"ondragleave":1,"ondrop":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmousemove":1,"onmouseleave":1,"onmove":1,"onsize":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pCheckBox.on_created_contents=function(_a){nexacro._IconText.prototype.on_created_contents.call(this,_a);this._setAccessibilityStatChecked(this.isChecked());};_pCheckBox.on_attach_contents_handle=function(_a){nexacro._IconText.prototype.on_attach_contents_handle.call(this,_a);this._setAccessibilityStatChecked(this.isChecked());};_pCheckBox.on_destroy_contents=function(){nexacro._IconText.prototype.on_destroy_contents.call(this);this._p_falsevalue=null;this._p_truevalue=null;};_pCheckBox.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){this._setValue(this._changeValue(undefined));this.on_apply_value();}};_pCheckBox.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){this._setValue(this._changeValue(_b.getColumn(_c,_d)));this.on_apply_value();}};_pCheckBox.on_getBindableProperties=function(){return "value";};_pCheckBox.on_get_accessibility_label=function(){return this._p_text?this._p_text:"";};_pCheckBox._on_hotkey=function(_a,_b,_c,_d){this.on_fire_onclick("",_b,_c,_d,-1,-1,-1,-1,-1,-1,this,this,false);};_pCheckBox._isFocusAcceptable=function(){return this._is_focus_accept;};_pCheckBox.set_value=function(_a){_a=this._changeValue(_a);if(this._p_value!=_a){if(this.applyto_bindSource("value",_a)){this._setValue(_a);this.on_apply_value();}}};_pCheckBox.on_apply_value=function(){if(this.isChecked()){this._changeUserStatus("selected",true);}else{this._changeUserStatus("selected",false);}};_pCheckBox.set_truevalue=function(_a){if(_a!=undefined){_a=_a.toString();}if(this._p_truevalue!==_a){if(this.isChecked()){if(this.applyto_bindSource("value",_a)){this._setValue(_a);}}this._p_truevalue=_a;}};_pCheckBox.set_falsevalue=function(_a){if(_a!=undefined){_a=_a.toString();}if(this._p_falsevalue!==_a){if(!this.isChecked()){if(this.applyto_bindSource("value",_a)){this._setValue(_a);}}this._p_falsevalue=_a;}};_pCheckBox.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_readonly){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pCheckBox.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);};_pCheckBox._properties=[{name:"value"},{name:"readonly"},{name:"falsevalue"},{name:"truevalue"}];nexacro._defineProperties(_pCheckBox,_pCheckBox._properties);_pCheckBox.isChecked=function(){return this._isChecked(this._p_value);};_pCheckBox.on_keyup_basic_action=function(_a,_b,_c,_d,_e,_f){if(_a==nexacro.Event.KEY_SPACE){if(this._isComponentKeydownAction()){this.on_fire_onclick("",_b,_c,_d,-1,-1,-1,-1,-1,-1,_e,_e,_f);}}};_pCheckBox.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this._p_enable||this._p_readonly){return false;}var _n=this._p_value;var _o;if(this._isChecked(_n)){if(nexacro._isNull(this._p_falsevalue)){_o=false;}else{_o=this._p_falsevalue;}}else{if(nexacro._isNull(this._p_truevalue)){_o=true;}else{_o=this._p_truevalue;}}var _p=this.on_fire_canchange(this,_n,_o);if(_p){if(this.applyto_bindSource("value",_o)){this._setValue(_o);}if(_n!==_o){this.on_fire_onchanged(this,_n,_o);}if(this._is_alive){this.on_apply_value();}}if(this._is_alive){return nexacro.Component.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}};_pCheckBox.on_fire_canchange=function(_a,_b,_c){if(this.canchange&&this.canchange._has_handlers){var _d=new nexacro.CheckBoxChangedEventInfo(this,"canchange",_b,_c);return this.canchange._fireCheckEvent(this,_d);}return true;};_pCheckBox.on_fire_onchanged=function(_a,_b,_c){if(this.onchanged&&this.onchanged._has_handlers){var _d=new nexacro.CheckBoxChangedEventInfo(this,"onchanged",_b,_c);return this.onchanged._fireEvent(this,_d);}};_pCheckBox._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}if(this._p_visible&&this._isEnable()){var _k=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this,_j);this.on_click_basic_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);}};_pCheckBox._setValue=function(_a){this._p_value=_a;this._setAccessibilityStatChecked(this.isChecked());};_pCheckBox._isChecked=function(_a){if(this._p_truevalue!=null){if(this._p_falsevalue!=null){if(_a===this._p_falsevalue||_a===undefined){return false;}if(_a===this._p_truevalue||nexacro._toBoolean(_a)){return true;}if(this._p_value===this._p_truevalue){return true;}return false;}else{if(_a===this._p_truevalue||nexacro._toBoolean(_a)){return true;}return false;}}else{if(this._p_falsevalue!=null){if(_a===this._p_falsevalue){return false;}return true;}else{return nexacro._toBoolean(_a);}}};_pCheckBox._changeValue=function(_a){var _b=!nexacro._isNull(this._p_truevalue);var _c=!nexacro._isNull(this._p_falsevalue);if(nexacro._isNull(_a)){if(_c){return this._p_falsevalue;}else{return false;}}_a=_a.toString();if(_b){if(_a===this._p_truevalue){return _a;}if(_c){if(_a===this._p_falsevalue){return _a;}else{return this._p_value;}}else{if(parseInt(_a)===0){return 0;}else if(!nexacro._toBoolean(_a)){return false;}else{return this._p_value;}}}else{if(_c){if(_a===this._p_falsevalue){return _a;}else if(parseInt(_a)===1){return 1;}else if(nexacro._toBoolean(_a)){return true;}else{return this._p_value;}}else{if(parseInt(_a)===0){return 0;}else if(parseInt(_a)===1){return 1;}else{return nexacro._toBoolean(_a);}}}};_pCheckBox._applyStatus=function(){var _a=this._p_value;var _b;if(this._isChecked(_a)){if(nexacro._isNull(this._p_falsevalue)){_b=false;}else{_b=this._p_falsevalue;}}else{if(nexacro._isNull(this._p_truevalue)){_b=true;}else{_b=this._p_truevalue;}}var _c=this.on_fire_canchange(this,_a,_b);if(_c){if(this.applyto_bindSource("value",_b)){this._setValue(_b);}if(_a!==_b){this.on_fire_onchanged(this,_a,_b);}if(this._is_alive){this.on_apply_value();}}};delete _pCheckBox;}if(!nexacro.Radio){nexacro.RadioClickEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){nexacro.ClickEventInfo.call(this,_a,_b||"onradioclick",_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p);this.index=_c;this.itemtext=_d;this.itemvalue=_e;};var _pRadioClickEventInfo=nexacro._createPrototype(nexacro.ClickEventInfo,nexacro.RadioClickEventInfo);nexacro.RadioClickEventInfo.prototype=_pRadioClickEventInfo;_pRadioClickEventInfo._type_name="RadioClickEventInfo";delete _pRadioClickEventInfo;nexacro.Radio=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._items=[];this._iconsize={};};var _pRadio=nexacro._createPrototype(nexacro.Component,nexacro.Radio);nexacro.Radio.prototype=_pRadio;_pRadio._type_name="Radio";_pRadio._text_elem=null;_pRadio._p_codecolumn="";_pRadio._p_columncount=0;_pRadio._p_datacolumn="";_pRadio._p_direction="horizontal";_pRadio._p_index=-1;_pRadio._p_innerdataset=null;_pRadio._p_readonly=false;_pRadio._p_rowcount=0;_pRadio._p_value=undefined;_pRadio._p_text="";_pRadio._p_acceptvaluetype="allowinvalid";_pRadio._default_value=undefined;_pRadio._default_text="";_pRadio._default_index=-1;_pRadio._want_tab=false;_pRadio._want_arrows=true;_pRadio._is_listtype=true;_pRadio._use_readonly_status=true;_pRadio._p_accessibilityrole="radio";_pRadio._is_first_focus=false;_pRadio._accessibility_index=-1;_pRadio.accessibility=null;_pRadio.itemaccessibility=null;_pRadio._p_itemaccessibilityenable=true;_pRadio._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondrop":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondragend":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onitemclick":1,"onitemchanged":1,"canitemchange":1,"oninnerdatachanged":1,"onmousedown":1,"onmouseup":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pRadio.on_create_contents=function(){var _a=this.getElement();if(_a){if(!this._p_innerdataset){this._createRadioTextElement();}else{this._redrawRadioItem();}if(this._p_fittocontents!="none"){this._on_apply_fittocontents();}}};_pRadio.on_created_contents=function(_a){if(!this._innerdataset&&this._p_innerdataset){this._setInnerDatasetStr(this._p_innerdataset);}if(this._p_fittocontents!="none"){this._update_position();}var _b=this._text_elem;if(_b){_b.create(_a);}var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].on_created(_a);}if(nexacro._enableaccessibility){this._on_created_accessibility_contents(_a);}};_pRadio.on_destroy_contents=function(){this._destroyRadioTextElement();this._destroyRadioItemControl();this._removeEventHandlerToInnerDataset();};_pRadio._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);this._innerdataset=null;}};_pRadio.on_create_contents_command=function(){if(!this._innerdataset&&this._p_innerdataset){this._setInnerDatasetStr(this._p_innerdataset);}var _a="";var _b=this._text_elem;if(_b){_a+=_b.createCommand();}var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_a+=_c[_e].createCommand();}return _a;};_pRadio.on_attach_contents_handle=function(_a){var _b=this._text_elem;if(_b){_b.attachHandle(_a);}var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].attachHandle(_a);}if(this._p_fittocontents!="none"){this._update_position();this._on_apply_fittocontents();}if(nexacro._enableaccessibility){this._on_attach_accessibility_contents_handle(_a);}};_pRadio.on_change_containerRect=function(_a,_b){if(this._is_created_contents){var _c=this._text_elem;if(_c){_c.setElementSize(_a,_b);}else{this._recalcLayout();}}};_pRadio.on_change_containerPos=function(){};_pRadio.on_getBindableProperties=function(){return "value";};_pRadio.on_apply_prop_cssclass=function(){var _a=this._items;if(_a){var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].on_apply_cssclass();}}};_pRadio.on_apply_prop_enable=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setEnable(_a);}}};_pRadio.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){this._p_value=undefined;this._p_text="";this._p_index=-1;this._doDeselect(this._p_index);}};_pRadio.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=_b.getColumn(_c,_d);_e=this._convertValueType(_e,true);this._setValue(_e);var _f=this._innerdataset;if(!_f){return true;}var _g=_f.findRow(this._p_codecolumn,_e);this._block_read_aria_stat=true;this._doDeselect(this._p_index);this._setIndex(_g);this._doSelect(_g);if(!this._select_act){this._default_value=_e;this._default_index=_g;}this._block_read_aria_stat=false;}};_pRadio._getDlgCode=function(_a,_b,_c,_d){var _e=this._getRadioDlgCode(_a);this._want_tab=_e.want_tab;this._want_arrows=_e.want_arrows;if(this._is_first_focus){this._is_first_focus=false;}return {want_tab:this._want_tab,want_return:false,want_escape:false,want_chars:false,want_arrows:this._want_arrows};};_pRadio._on_focus=function(_a,_b,_c,_d,_e,_f){var _g=false;var _h=this._focus_direction;if(_b=="tabkey"){_h=0;}else if(_b=="shifttabkey"){_h=1;}else if(_b=="downkey"){_h=2;}else if(_b=="upkey"){_h=3;}if(_a==false){_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);var _i=null;this._accessibility_index=-1;if(_h==0||_h==1){_i=this._getItem(this._p_index);if(_i){this._is_first_focus=true;this._accessibility_index=this._p_index;_i._on_focus(true,_b);_i._changeUserStatus("selected",true);}}else if(nexacro._enableaccessibility&&(_h==2||_h==3)){if(this._isComponentKeydownAction()){var _j=this._accessibility_index;if(_h==2){if(!this._isAccessibilityEnable()){_j=0;}}else{_j=this._items.length-1;}_i=this._getItem(_j);if(_i&&this._isItemAccessibilityEnable()){_i._on_focus(true,_b);this._accessibility_index=_j;}this._want_arrows=true;}}}else{_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);}return _g;};_pRadio._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=this._innerdataset;var _g=this._items;var _h=_g.length;if(_f&&_h){var _i=this._p_direction;var _j;var _k=this._p_columncount;var _l=this._p_rowcount;var _m=_f.getRowCount();var _n=0;var _o=0;var _p,_q;var _r;var _s=0;if(_k==-1&&_l==-1){for(_p=0;_p<_h;_p++ ){_r=_g[_p]._on_getFitSize();if(_i=="horizontal"){_c=Math.max(_c,_r[1]);_b+=_r[0];}else{_c+=_r[1];_b=Math.max(_b,_r[0]);}}}else{if(_i=="horizontal"){_j="col";if(_k>0){_n=_k;}else if((_k==-1&&(_l==-1||_l==0))||(_k==0&&(_l==0||_l==_m))){_n=1;}else if(_k==-1&&_l>1){_n=Math.round(_m/_l);}else if(_l>0){_n=Math.ceil(_m/_l);if((_n* _l)<_m){_n++ ;}}else{_n=_m;}if(_n>_m){_n=_m;}_o=parseInt(_m/_n)|0;if((_m>_n)&&(_m%_n)>0){_o++ ;}}else{if(_l>0){_o=_l;}else if(_k>0){_o=parseInt(_m/_k);if((_k* _o)<_m){_o++ ;}}else{_o=1;}if(_o>0){_j="row";_n=parseInt(_m/_o)|0;}else{_j="col";_n=_k;}if(_n<=0){_n=1;}if(_j=="row"&&(_m>_o)&&(_m%_o)>0){_n++ ;}}var _t=[];for(_p=0;_p<_n;_p++ ){_t[_p]=0;}if(_j=="col"){for(_p=0;_p<_o;_p++ ){for(_q=0;_q<_n;_q++ ){if(_m<=_s){break;}_r=_g[_s]._on_getFitSize();if(_t[_q]<_r[0]){_t[_q]=_r[0];}_s++ ;}}}else{for(_p=0;_p<_n;_p++ ){for(_q=0;_q<_o;_q++ ){if(_m<=_s){break;}_r=_g[_s]._on_getFitSize();if(_t[_p]<_r[0]){_t[_p]=_r[0];}_s++ ;}}}for(_p=0;_p<_n;_p++ ){_b+=_t[_p];}if(_r){_c+=_r[1]* _o;}}}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pRadio.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this._redrawRadioItem();};_pRadio.set_text=nexacro._emptyFn;_pRadio._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pRadio.set_value=function(_a){_a=this._convertValueType(_a);if(this._p_value!=_a){if(this._p_acceptvaluetype=="ignoreinvalid"){var _b=this._innerdataset;var _c=this._p_codecolumn;var _d=-1;if(_b&&_c){_d=_b.findRow(_c,_a);if(_d<0){return;}}}this._select_act=true;if(!this.applyto_bindSource("value",_a)){this._select_act=false;return;}this._select_act=false;this._p_value=_a;this.on_apply_value(_a);}};_pRadio.updateToDataset=function(){return this.applyto_bindSource("value",this._p_value);};_pRadio.on_apply_value=function(_a){var _b=this._innerdataset;var _c=this._p_codecolumn;if(_b&&_c){var _d=_b.findRow(_c,_a);this._setIndex(_d);this._block_read_aria_stat=true;this._doDeselect(this._default_index);this._doSelect(_d);this._block_read_aria_stat=false;if(_d>=0){this._default_value=_a;}this._default_index=this._p_index;}};_pRadio.set_index=function(_a){if(isNaN(_a= +_a)||_a<-1){return;}if(this._p_index!=_a){this._p_index=_a;this.on_apply_index(_a);}};_pRadio.on_apply_index=function(_a){var _b=this._innerdataset;var _c=this._p_codecolumn?this._p_codecolumn:this._p_datacolumn;var _d;if(_b&&_c){if(!nexacro._isNull(_a)&&_a>=0&&_a<_b.getRowCount()){_d=_b.getColumn(_a,_c);_d=this._convertValueType(_d,true);}else{_a=this._p_index=-1;}if(this._p_value!=_d){this._select_act=true;if(!this.applyto_bindSource("value",_d)){this._p_index=this._default_index;this._select_act=false;return;}this._select_act=false;this._setValue(_d);}this._doDeselect(this._default_index);this._doSelect(_a);this._default_value=_d;this._default_index=_a;if(this._isAccessibilityEnable()){this.on_apply_accessibility();}}};_pRadio.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pRadio.on_apply_readonly=function(_a){var _b=this._items;var _c=_b.length;var _d=_a?true:false;this._changeStatus("readonly",_d);for(var _e=0;_e<_c;_e++ ){_b[_e]._changeStatus("readonly",_d);}};_pRadio.set_datacolumn=function(_a){if(this._p_datacolumn!=_a){this._p_datacolumn=_a;this.on_apply_datacolumn(_a);}};_pRadio.on_apply_datacolumn=function(_a){var _b=this.getElement();var _c=this._innerdataset;if(_b&&_c){var _d;var _e=_a==""?this._p_codecolumn:_a;var _f,_g;var _h=this._items;for(_f=0,_g=_h.length;_f<_g;_f++ ){_d=_c.getColumn(_f,_e);if(_d){_h[_f].set_text(_d);if(this._p_index==_f){this._setText(_d);}}else{_h[_f].set_text("");this._setText("");}}this._updateItemInfo();}};_pRadio.set_codecolumn=function(_a){if(this._p_codecolumn!=_a){this._p_codecolumn=_a;this.on_apply_codecolumn(_a);}};_pRadio.on_apply_codecolumn=function(_a){var _b=this.getElement();var _c=this._innerdataset;if(_b&&_c){this.on_apply_index(this._p_index);if(!this._p_datacolumn){this.on_apply_datacolumn(this._p_datacolumn);}this._updateItemInfo();}};_pRadio.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(this._p_innerdataset!=_a||(this._p_innerdataset&&!this._innerdataset)){this._setInnerDatasetStr(_a);this.on_apply_innerdataset(this._innerdataset);}};_pRadio.on_apply_innerdataset=function(_a){if(_a){_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);}var _b=this.getElement();if(_b){this._destroyRadioItemControl();if(_a){this._redrawRadioItem();if(this._p_index<0){this._default_value=this._p_value=undefined;}}else{this._createRadioTextElement();}}};_pRadio.set_columncount=function(_a){if(isNaN(_a= +_a)||_a<-1){return;}if(this._p_columncount!=_a){this._p_columncount=_a;this.on_apply_columncount(_a);}};_pRadio.on_apply_columncount=function(){this._recalcLayout();};_pRadio.set_rowcount=function(_a){if(isNaN(_a= +_a)||_a<-1){return;}if(this._p_rowcount!=_a){this._p_rowcount=_a;this.on_apply_rowcount(_a);}};_pRadio.on_apply_rowcount=function(){this._recalcLayout();};_pRadio.set_direction=function(_a){var _b=["horizontal","vertical"];if(_b.indexOf(_a)==-1){return;}if(this._p_direction!=_a){this._p_direction=_a;this.on_apply_direction(_a);}};_pRadio.on_apply_direction=function(){this._recalcLayout();};_pRadio.set_itemaccessibilityrole=function(_a){if(_a){this._p_itemaccessibilityrole=_a;this.on_apply_itemaccessibilityrole(_a);}else{this._p_itemaccessibilityrole="";this.on_apply_itemaccessibilityrole(" ");}};_pRadio.on_apply_itemaccessibilityrole=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityrole(_a?_a:this._p_itemaccessibilityrole);}}};_pRadio.set_itemaccessibilitylabel=function(_a){if(_a){this._p_itemaccessibilitylabel=_a;this.on_apply_itemaccessibilitylabel(_a);}else{this._p_itemaccessibilitylabel="";this.on_apply_itemaccessibilitylabel(" ");}};_pRadio.on_apply_itemaccessibilitylabel=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitylabel(_a?_a:this._p_itemaccessibilitylabel);}}};_pRadio.set_itemaccessibilitydescription=function(_a){if(_a){this._p_itemaccessibilitydescription=_a;this.on_apply_itemaccessibilitydescription(_a);}else{this._p_itemaccessibilitydescription="";this.on_apply_itemaccessibilitydescription(" ");}};_pRadio.on_apply_itemaccessibilitydescription=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitydescription(_a?_a:this._p_itemaccessibilitydescription);}}};_pRadio.set_itemaccessibilityaction=function(_a){if(_a){this._p_itemaccessibilityaction=_a;this.on_apply_itemaccessibilityaction(_a);}else{this._p_itemaccessibilityaction="";this.on_apply_itemaccessibilityaction(" ");}};_pRadio.on_apply_itemaccessibilityaction=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityaction(_a?_a:this._p_itemaccessibilityaction);}}};_pRadio.set_itemaccessibilitydesclevel=function(_a){if(_a){this._p_itemaccessibilitydesclevel=_a;this.on_apply_itemaccessibilitydesclevel(_a);}else{this._p_itemaccessibilitydesclevel="";this.on_apply_itemaccessibilitydesclevel(" ");}};_pRadio.on_apply_itemaccessibilitydesclevel=function(_a){var _b=this._items;if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitydesclevel(_a?_a:this._p_itemaccessibilitydesclevel);}}};_pRadio.set_acceptvaluetype=function(_a){var _b=["allowinvalid","ignoreinvalid"];if(_b.indexOf(_a)==-1){return;}this._p_acceptvaluetype=_a;};_pRadio._properties=[{name:"text"},{name:"value"},{name:"index"},{name:"readonly"},{name:"datacolumn"},{name:"codecolumn"},{name:"innerdataset"},{name:"columncount"},{name:"rowcount"},{name:"direction"},{name:"itemaccessibilityrole"},{name:"itemaccessibilitylabel"},{name:"itemaccessibilityenable"},{name:"itemaccessibilitydescription"},{name:"itemaccessibilityaction"},{name:"itemaccessibilitydesclevel"},{name:"acceptvaluetype"}];nexacro._defineProperties(_pRadio,_pRadio._properties);_pRadio.getCount=function(){return this._items.length;};_pRadio.getInnerDataset=function(){return this._innerdataset;};_pRadio.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";this.on_apply_innerdataset(this._innerdataset);}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this._p_innerdataset=_a.id;this.on_apply_innerdataset(_a);}};_pRadio.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=null;var _i=this._items;var _j=this._accessibility_index;if(_a==nexacro.Event.KEY_SPACE){if(!this._p_readonly){if(_j>-1){_h=_i[_j];_h._changeUserStatus("focus",true);this.set_index(_j);}}}else{if(nexacro._enableaccessibility&&this._isComponentKeydownAction()){if(_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN){var _k="";if(_j==-1){if(_a==nexacro.Event.KEY_DOWN&&this._isItemAccessibilityEnable()){_j+=1;if(_i[_j]){_k="downkey";_h=_i[_j];}this._want_arrows=true;}else{this._want_arrows=false;}}else if(this._want_arrows){if(_i[_j]){_i[_j]._changeStatus("mouseover",false);}if(_a==nexacro.Event.KEY_DOWN){_j+=1;var _l=_i.length-1;if(_j>_l){_j=-1;this._want_arrows=false;}else{if(_i[_j]){_k="downkey";_h=_i[_j];}else{this._want_arrows=false;}}}else{_j+=-1;if(_j<0){_j=-1;var _m=this._last_focused;if(_m){this._doDefocus(_m,true);}else{this._doDefocus(this);}_h=this;}else{if(_i[_j]){_k="upkey";_h=_i[_j];}else{this._want_arrows=false;}}}}this._accessibility_index=_j;if(_h){_h._on_focus(true,_k);if(_h instanceof nexacro._RadioItemControl){_h._changeStatus("mouseover",this._isItemAccessibilityEnable());}}}}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pRadio._on_radioitem_onclick=function(_a){if(!this._p_enable||this._p_readonly==true){return false;}var _b=this._default_index;var _c=this._default_value;var _d=this._default_text;this.on_fire_onitemclick(_a,_a._index,_a.text,_a._value);if(this._p_index!=_a._index){var _e=_a._index;var _f=_a._value;var _g=_a.text;var _h=this.on_fire_canitemchange(_a,_b,_d,_c,_e,_g,_f);if(_h){this.set_index(_e);if(this._p_index!=_b||_b==-1){this.on_fire_onitemchanged(_a,_b,_d,_c,_e,_g,_f);}if(nexacro._enableaccessibility){this._accessibility_index=_a._index;_a._on_focus(true);}}}};_pRadio._on_icon_onload=function(_a,_b,_c){if(this._item_icon_width!=_b||this._item_icon_height!=_c){this._item_icon_width=_b;this._item_icon_height=_c;this._recalcLayout();}};_pRadio._on_dataset_onvaluechanged=function(_a,_b){if(this._is_created){this._redrawRadioItem();this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pRadio._on_dataset_onrowsetchanged=function(){this._redrawRadioItem();};_pRadio.on_fire_canitemchange=function(_a,_b,_c,_d,_e,_f,_g){if(this.canitemchange&&this.canitemchange._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"canitemchange",_b,_c,_d,_e,_f,_g);return this.canitemchange._fireCheckEvent(this,_h);}return true;};_pRadio.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(this.onitemchanged&&this.onitemchanged._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"onitemchanged",_b,_c,_d,_e,_f,_g);return this.onitemchanged._fireEvent(this,_h);}};_pRadio.on_fire_onitemclick=function(_a,_b,_c,_d){if(this.onitemclick&&this.onitemclick._has_handlers){var _e=new nexacro.ItemClickEventInfo(this,"onitemclick",_b,_c,_d);return this.onitemclick._fireEvent(this,_e);}return false;};_pRadio.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pRadio.on_keydown_basic_action=function(){};_pRadio.on_keydown_default_action=function(_a,_b,_c,_d,_e){var _f=nexacro.Event;var _g=this;if(nexacro._enableaccessibility){if(_a==_f.KEY_UP||_a==_f.KEY_DOWN){return false;}}if(_a==nexacro.Event.KEY_TAB){this._want_tab=false;this._is_first_focus=false;}else if(_a==_f.KEY_LEFT||_a==_f.KEY_RIGHT||_a==_f.KEY_UP||_a==_f.KEY_DOWN){var _h=this._innerdataset;if(!_h||this._p_readonly){return false;}var _i=_h.getRowCount();if(_i<1){return false;}var _j=this._default_index;var _k=this._default_value;var _l=this._default_text;var _m=(_a==_f.KEY_LEFT||_a==_f.KEY_UP)?-1:(_a==_f.KEY_RIGHT||_a==_f.KEY_DOWN)?1:0;var _n=this._p_index+_m;if(_n>=_i){_n=0;}else if(_n<0){_n=_i -1;}var _o=this._getItem(_n);var _p=this.on_fire_canitemchange(_g,_j,_l,_k,_n,_o.text,_o._value);if(_p){this._accessibility_index=_n;if(_i!=_n&&_i>=_n&&0<=_n){this.set_index(_n);if(_n!=_j){this.on_fire_onitemchanged(_g,_j,_l,_k,_n,_o.text,_o._value);}}if(nexacro._enableaccessibility){_o._on_focus(true,_m==-1?"keyleft":(_m==1?"keyright":undefined));_o._changeUserStatus("selected",true);_o._changeStatus("mouseover",this._isItemAccessibilityEnable());}}}return false;};_pRadio._createRadioItemControl=function(){var _a=this._innerdataset;if(_a){var _b=_a.getRowCount();if(_b>0){var _c,_d,_e;var _f=this._is_created?false:true;var _g=this._p_codecolumn;var _h=this._p_datacolumn==""?_g:this._p_datacolumn;for(var _i=0;_i<_b;_i++ ){_d=_a.getColumn(_i,_h);_e=_a.getColumn(_i,_g);_e=this._convertValueType(_e,true);_c=new nexacro._RadioItemControl("radioitem"+_i,0,0,0,0,null,null,null,null,null,null,this);_c.set_text(_d);_c._setItemInfo(_i,_e);_c.createComponent(_f);_c._setEventHandler("onclick",this._on_radioitem_onclick,this);if(nexacro._enableaccessibility){_c._setAccessibilityInfoIndex(_i+1);_c._setAccessibilityInfoCount(_b);_c._setEventHandler("onkeydown",this._on_radioitem_onkeydown,this);}this._items[_i]=_c;}}}};_pRadio._on_radioitem_onkeydown=function(_a,_b){var _c=nexacro.Event;var _d=_b.keycode;if(_d==nexacro.Event.KEY_TAB){this._want_tab=false;this._is_first_focus=false;}else if(_d==_c.KEY_LEFT||_d==_c.KEY_RIGHT||_d==_c.KEY_UP||_d==_c.KEY_DOWN){var _e=this._innerdataset;if(!_e||this._p_readonly){return;}var _f=_e.getRowCount();if(_f>0){var _g=this._default_index;var _h=this._default_value;var _i=this._default_text;var _j=0;if(_d==_c.KEY_LEFT||_d==_c.KEY_UP){_j=-1;}else if(_d==_c.KEY_RIGHT||_d==_c.KEY_DOWN){_j=1;}var _k=this._p_index+_j;if(_k>=_f){_k=0;}else if(_k<0){_k=_f -1;}var _l=this._getItem(_k);var _m=this.on_fire_canitemchange(_a,_g,_i,_h,_k,_l.text,_l._value);if(_m){this._accessibility_index=_k;if(_f!=_k&&_f>=_k&&0<=_k){this.set_index(_k);if(_k!=_g){this.on_fire_onitemchanged(_a,_g,_i,_h,_k,_l.text,_l._value);}}if(nexacro._enableaccessibility){var _n=undefined;if(_j==-1){_n="keyleft";}else if(_j==1){_n="keyright";}_l._on_focus(true,_n);_l._changeUserStatus("selected",true);}}}}return false;};_pRadio._updateItemInfo=function(){var _a=this._innerdataset;if(!_a){return;}var _b=_a.getRowCount();if(_b>0){var _c=this._p_codecolumn;for(var _f=0;_f<_b;_f++ ){var _d=_a.getColumn(_f,_c);_d=this._convertValueType(_d,true);var _e=this._items[_f];_e._setItemInfo(_f,_d);if(nexacro._enableaccessibility){_e._setAccessibilityInfoIndex(_f+1);_e._setAccessibilityInfoCount(_b);}this._items[_f]=_e;}}};_pRadio._createRadioTextElement=function(){var _a=this.getElement();var _b=this._text_elem;if(!_b&&_a){_b=this._text_elem=new nexacro.TextBoxElement(_a);_b.setElementSize(this._getClientWidth(),this._getClientHeight());if(this.textAlign){_b.setElementTextAlign(this.textAlign);}if(this.verticalAlign){_b.setElementVerticalAlign(this.verticalAlign);}_b.setElementText(this._p_name);if(this._is_created){_b.create(this._getWindow());}}};_pRadio._destroyRadioItemControl=function(){var _a,_b;var _c=this._items;for(_a=0,_b=_c.length;_a<_b;_a++ ){_c[_a].destroy();_c[_a]=null;}this._items=[];};_pRadio._destroyRadioTextElement=function(){var _a=this._text_elem;if(_a){_a.destroy();this._text_elem=null;}};_pRadio._recalcLayout=function(){var _a=this.getElement();if(_a){var _b=this._innerdataset;var _c=this._items;var _d=_c.length;if(_b&&_d){var _e;var _f=this._p_fittocontents;var _g=this._p_direction;var _h=this._p_columncount;var _i=this._p_rowcount;var _j=_b.getRowCount();var _k=1;var _l=_j;var _m=this._getClientWidth();var _n=this._getClientHeight();var _o=0;var _p=0;var _q,_r;var _s,_t;var _u,_v,_w=0;var _x=[];var _y=[];var _z=1;if(_h==-1&&_i==-1){_l=1;_k=0;var _aa=0;for(_s=0;_s<_d;_s++ ){_v=_c[_s]._on_getFitSize();_aa+=_v[0];if(_m<_aa){_l++ ;_aa=_v[0];_k=1;}else{_k++ ;_z=_z>_k?_z:_k;}}_k=_z;_w=0;for(_s=0;_s<_l;_s++ ){_o=0;for(_t=0;_t<_k;_t++ ){if(_j<=_w){break;}_u=_c[_w];_v=_u._on_getFitSize();_r=_n/_l;_u.move(_o,_p,_v[0],_r);_o+=_v[0];if(_o>_m){break;}_w++ ;}_p+=_r;}}else{if(_g=="horizontal"){if(_h>0){_k=_h;}else if((_h<0&&_i<0)||(_h<0&&_i==0)||(_h==0&&_i==0)||(_h==0&&_i==_j)){_k=1;}else if(_h<0&&(_h<_i)&&(_i>1)){_k=Math.round(_l/_i);}else if(_i>0){_k=Math.ceil(_l/_i);if((_k* _i)<_l){_k++ ;_l=(((_k* _i)-_l)>=_k)?_i -1:_i;}}else{_k=_l;}if(_k>_l){_k=_l;}_e="col";_l=parseInt(_j/_k)|0;if((_j>_k)&&(_j%_k)>0){_l++ ;}}else{if(_i>0){_l=_i;}else if(_h>0){_l=parseInt(_j/_h);if((_h* _l)<_j){_l++ ;}}else{_l=1;}if(_l>0){_e="row";_k=parseInt(_j/_l)|0;}else{_k=_h;_e="col";}if(_k<=0){_k=1;}if(_e=="row"&&(_j>_l)&&(_j%_l)>0){_k++ ;}}_q=_m/_k;_r=_n/_l;if(_e=="col"){if(_f=="none"){for(_s=0;_s<_l;_s++ ){for(_t=0;_t<_k;_t++ ){if(_j<=_w){break;}_u=_c[_w];_u.move((_q* _t),(_r* _s),_q,_r);_w++ ;}_p+=_r;}}else{for(_s=0;_s<_l;_s++ ){for(_t=0;_t<_k;_t++ ){if(_j<=_w){break;}_u=_c[_w];_v=_u._on_getFitSize();_x[_t]=_x[_t]?Math.max(_x[_t],_v[0]):_v[0];_y[_s]=_y[_s]?Math.max(_y[_s],_v[1]):_v[1];_w++ ;}}_w=0;for(_s=0;_s<_l;_s++ ){for(_t=0;_t<_k;_t++ ){if(_j<=_w){break;}_u=_c[_w];if(_f=="both"){_u.move(_o,_p,_x[_t],_y[_s]);_o+=_x[_t];}else if(_f=="width"){_u.move(_o,(_r* _s),_x[_t],_r);_o+=_x[_t];}else if(_f=="height"){_u.move((_q* _t),_p,_q,_y[_s]);}_w++ ;}_o=0;if(_f=="both"||_f=="height"){_p+=_y[_s];}else{_p+=_r;}}}}else{if(_f=="none"){for(_s=0;_s<_k;_s++ ){for(_t=0;_t<_l;_t++ ){if(_j<=_w){break;}_u=_c[_w];_u.move((_q* _s),(_r* _t),_q,_r);_w++ ;}_p+=_r;}}else{for(_s=0;_s<_k;_s++ ){for(_t=0;_t<_l;_t++ ){if(_j<=_w){break;}_u=_c[_w];_v=_u._on_getFitSize();_x[_s]=_x[_s]?Math.max(_x[_s],_v[0]):_v[0];_y[_t]=_y[_t]?Math.max(_y[_t],_v[1]):_v[1];_w++ ;}}_w=0;for(_s=0;_s<_k;_s++ ){for(_t=0;_t<_l;_t++ ){if(_j<=_w){break;}_u=_c[_w];if(_f=="both"){_u.move(_o,_p,_x[_s],_y[_t]);_p+=_y[_s];}else if(_f=="width"){_u.move(_o,(_r* _t),_x[_s],_r);_p+=_y[_s];}else if(_f=="height"){_u.move((_q* _s),_p,_q,_y[_t]);}_w++ ;}_p=0;if(_f=="both"||_f=="width"){_o+=_x[_s];}else{_o+=_q;}}}}}}}};_pRadio._redrawRadioItem=function(){this._destroyRadioTextElement();this._destroyRadioItemControl();this._createRadioItemControl();if(this._p_value!==undefined){this.on_apply_value(this._p_value);}else if(this._p_index>-1){this.on_apply_index(this._p_index);}this.on_apply_readonly(this._p_readonly);this._recalcLayout();};_pRadio._doSelect=function(_a){var _b=this._getItem(_a);if(_b){_b._block_read_aria_stat=this._block_read_aria_stat;_b._changeUserStatus("selected",true);_b._block_read_aria_stat=false;this._setText(_b.text);}else{this._setText("");}};_pRadio._doDeselect=function(_a){var _b=this._getItem(_a);if(_b){_b._block_read_aria_stat=this._block_read_aria_stat;_b._changeUserStatus("selected",false);_b._block_read_aria_stat=false;}};_pRadio._doDefocus=function(_a,_b){var _c=this._getWindow();_c._removeFromCurrentFocusPath(_a,true);if(_b){_c._removeFromCurrentFocusPath(this,false);}};_pRadio._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pRadio._setValue=function(_a){if(_a===null){_a="";}this._p_value=(_a===undefined)?_a:_a.toString();};_pRadio._setIndex=function(_a){if((_a>0)&&(_a>=this._items.length)){_a=-1;}this._p_index=_a;};_pRadio._setText=function(_a){this._p_text=_a;this._default_text=_a;};_pRadio._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this._p_innerdataset=_a;}};_pRadio._getItem=function(_a){var _b;var _c=this._items;if(_c.length>0&&_a>=0){_b=_c[_a];}return _b;};_pRadio._getPreCalculateWantTab=function(_a,_b){var _c=this._innerdataset;if(_c){if(this._p_index>-1){var _d=this._p_index;if(_d==this._accessibility_index){return false;}}else{var _e=this._accessibility_index;if(_b){if(_e<0){return false;}}else{var _f=_c.getRowCount();if(_e+1>_f){return false;}}}}return this._want_tab;};_pRadio._getPreCalculateWantArrow=function(_a){if(!this._isEnable()){return false;}var _b=this._innerdataset;var _c=nexacro._enableaccessibility?this._accessibility_index:this._p_index;if(_b){var _d=_b.getRowCount();if(_a==nexacro.Event.KEY_UP){if(!this._isAccessibilityEnable()){return false;}else if((_c -1)<0){return false;}}else if(_a==nexacro.Event.KEY_DOWN){if(!this._isAccessibilityEnable()){return false;}else if((_c+1)>=_d){return false;}}}else{return false;}return this._want_arrow;};_pRadio._getRadioDlgCode=function(_a){var _b=this._want_tab;var _c=this._want_arrows;if(_a==nexacro.Event.KEY_TAB){_c=(this._isEnable()||nexacro._enableaccessibility);}else if(_a==nexacro.Event.KEY_DOWN||_a==nexacro.Event.KEY_UP){if(!nexacro._enableaccessibility){_c=false;}}return {want_tab:_b,want_arrows:_c};};delete _pRadio;}if(!nexacro._RadioItemControl){nexacro._RadioItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._IconText.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pRadioItemControl=nexacro._createPrototype(nexacro._IconText,nexacro._RadioItemControl);nexacro._RadioItemControl.prototype=_pRadioItemControl;_pRadioItemControl._type_name="RadioItemControl";_pRadioItemControl._index=-1;_pRadioItemControl._value=undefined;_pRadioItemControl._is_subcontrol=true;_pRadioItemControl._use_selected_status=true;_pRadioItemControl._use_readonly_status=true;_pRadioItemControl._p_accessibilityrole="radioitem";_pRadioItemControl.on_getIDCSSSelector=function(){return "radioitem";};_pRadioItemControl._setItemInfo=function(_a,_b){this._index=_a;this._value=_b;};_pRadioItemControl._on_icon_onload=function(_a,_b,_c){if(this._icon_url!=_a||this._icon_width!=_b||this._icon_height!=_c){this._icon_width=_b;this._icon_height=_c;this._icon_url=_a;var _d=this.parent;if(_d&&_d._on_icon_onload){_d._on_icon_onload(_a,_b,_c);}}};_pRadioItemControl._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=_b;var _g=_c;var _h;if(this._displaytext&&this._displaytext!==""){_h=this._displaytext;}else{_h=this.text;}if(_h){var _i=this._getCurrentStyleInheritValue("font");var _j=this._getCurrentStyleInheritValue("wordSpacing");var _k=this._getCurrentStyleInheritValue("letterSpacing");var _l="none";var _m;var _n=false;if(_h.search("\n")>-1){_n=true;}if(this.fittocontents=="height"){_l=this.wordWrap||this._getCSSStyleValue("wordWrap");if(_l&&_l!="none"){_n=true;}_m=this._adjust_width-_b;}var _o=nexacro._getTextSize(_h,_i,_n,_m,_l,_j,_k);_b+=Math.ceil(this.textwidth!=null?this.textwidth:_o[0]);_c+=Math.ceil(_o[1]);}var _p=this._icon||this._getCSSStyleValue("icon");if(_p){var _q=this._textpadding||this._getCSSStyleValue("textPadding");var _r=this.iconPosition||this._getCSSStyleValue("iconPosition");var _s;if(this._icon_url==_p._sysurl&&this._icon_width!=0&&this._icon_height!=0){_s={width:this._icon_width,height:this._icon_height};}else{_s=nexacro._getImageSize(_p.url,this._on_icon_onload,this,undefined,this.image)||{width:this._icon_width,height:this._icon_height};}if(_r=="top"||_r=="bottom"){_c+=_s.height;_b=Math.max(_b,_s.width+_f);}else{_b+=_s.width;_c=Math.max(_c,_s.height+_g);}if(_q){_b+=_q.left+_q.right;_c+=_q.top+_q.bottom;}}return [_b,_c];}return [this._adjust_width,this._adjust_height];};delete _pRadioItemControl;}if(!nexacro.ListBox){nexacro.ListBox=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._selectinfo={index:-1,text:"",value:undefined,obj:null};this._scroll_vpos_queue=[];this._select_multi={"items":[],"map":{},"keys":[],"length":0,"lastselected":null};this._selectinfo_list=[];this._buffer_pages=[];this._initInnerdatasetInfo();};var _pListBox=nexacro._createPrototype(nexacro.Component,nexacro.ListBox);nexacro.ListBox.prototype=_pListBox;_pListBox._type_name="ListBox";_pListBox._temp_item=null;_pListBox._p_codecolumn="";_pListBox._p_datacolumn="";_pListBox._p_multiselect=false;_pListBox._p_innerdataset=null;_pListBox._p_readonly=false;_pListBox._p_index=-1;_pListBox._p_text="";_pListBox._p_value=undefined;_pListBox._p_dragscrolltype="all";_pListBox._p_selectscrollmode="default";_pListBox._p_itemheight=undefined;_pListBox._p_acceptvaluetype="allowinvalid";_pListBox._innerdataset=null;_pListBox._contents_maxwidth=0;_pListBox._contents_maxheight=0;_pListBox._page_rowcount=0;_pListBox._page_rowcount_min=0;_pListBox._shiftKey=false;_pListBox._ctrlKey=false;_pListBox._altKey=false;_pListBox._lbtnDownIdx=-1;_pListBox._want_tab=false;_pListBox._want_arrow=true;_pListBox._shift_select_base_index=null;_pListBox._is_first_focus=false;_pListBox._calc_scroll=false;_pListBox._cnt_resetscroll=0;_pListBox._keep_scrolling=false;_pListBox._is_listtype=true;_pListBox._touch_scrolling=false;_pListBox._is_scrollable=true;_pListBox._use_readonly_status=true;_pListBox._accessibility_index=-1;_pListBox._p_accessibilityrole="listbox";_pListBox._p_accessibilityaction="";_pListBox._p_accessibilitydesclevel="all";_pListBox._p_accessibilitydescription="";_pListBox._p_accessibilityenable=true;_pListBox._p_accessibilitylabel="";_pListBox._p_itemaccessibilityrole="listboxitem";_pListBox._p_itemaccessibilityenable=true;_pListBox._p_itemaccessibilitylabel="";_pListBox._p_itemaccessibilitydescription="";_pListBox._p_itemaccessibilityaction="";_pListBox._p_itemaccessibilitydesclevel="all";_pListBox._selectscrollmode=(nexacro._isTouchInteraction)?"scroll":"select";_pListBox._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onlongpress":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onitemclick":1,"onitemdblclick":1,"canitemchange":1,"onitemchanged":1,"oninnerdatachanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"onitemmouseenter":1,"onvscroll":1,"onhscroll":1,"onmousedown":1,"onmouseup":1,"onmousewheel":1};_pListBox.on_create_contents=function(){this._temp_item=new nexacro._ListBoxItemControl("_temp_item",0,0,0,0,null,null,null,null,null,null,this);this._temp_item.createComponent();};_pListBox.on_created_contents=function(_a){if(this._p_innerdataset){if(!this._innerdataset){this._setInnerDatasetStr(this._p_innerdataset);}this.on_apply_innerdataset(this._innerdataset);}this._redrawListBoxContents(true);var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_created(_a);}this._selectinfo.obj=null;this._selectinfo.index=this._p_index;this._selectinfo.text=this._p_text;this._selectinfo.value=this._p_value;if(nexacro._enableaccessibility){this._want_arrow=true;this.on_apply_prop_accessibilitylabel();}this._is_created=true;this._onRecalcScrollSize();};_pListBox.on_destroy_contents=function(){var _a=this._temp_item;if(_a){_a.destroy();}this._temp_item=null;this._destroyListBoxContents();this._buffer_pages=null;this._removeEventHandlerToInnerDataset();this._selectinfo=null;this._select_multi=null;this._selectinfo_list.length=0;this._scroll_vpos_queue=null;};_pListBox._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onload",this._on_dataset_onload,this);this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);this._innerdataset=null;}};_pListBox.on_create_contents_command=function(){if(this._p_innerdataset){if(!this._innerdataset){this._setInnerDatasetStr(this._p_innerdataset);}this._parseInnerDataset();}this._redrawListBoxContents(true);var _a="";var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a+=_b[_d].createCommand();}return _a;};_pListBox.on_attach_contents_handle=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _e=0;_e<_c;_e++ ){_b[_e].attachHandle(_a);}this._selectinfo.obj=null;this._selectinfo.index=this._p_index;this._selectinfo.text=this._p_text;this._selectinfo.value=this._p_value;if(nexacro._enableaccessibility){this.on_apply_prop_accessibilitylabel();if(this._isAccessibilityCotainerComponent()){var _d=_b[0];if(_d){_d._setAccessibilityDescriptionBy(this._unique_id);}}}this._is_created=true;this._onRecalcScrollSize();};_pListBox.on_change_containerRect=function(){if(this._is_created_contents){var _a=this._getItemHeight();var _b=this._getClientHeight();var _c=_a?_b/_a:0;if(this._page_rowcount!=_c){this._redrawListBoxContents(false);}else{this._recalcLayout();}if(!this._calc_scroll){this._onRecalcScrollSize();}else{this._cnt_resetscroll++ ;this._onResetScrollBar();}}};_pListBox.on_change_containerPos=function(){};_pListBox.on_getBindableProperties=function(){return "value";};_pListBox.on_killfocus_basic_action=function(){nexacro.Component.prototype.on_killfocus_basic_action.call(this);if(nexacro._enableaccessibility){var _a=this._accessibility_index;var _b=this._getItem(_a);if(_b){_b._changeStatus("mouseover",false);}if(nexacro._accessibilitytype==2&&nexacro._Browser=="Chrome"){this._first_focus=true;}}};_pListBox.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(!_a){_a=this._p_enable;}var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setEnable(_a);}};_pListBox.on_apply_prop_cssclass=function(){var _a=this._getContentsItem();var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].on_apply_cssclass();}};_pListBox.on_init_bindSource=function(_a,_b,_c){if(this._is_created){this._redrawListBoxContents(true);this._onRecalcScrollSize();}if(_b=="value"){this.set_value(undefined);}};_pListBox.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=_b.getColumn(_c,_d);_e=this._convertValueType(_e,true);if(this._p_value!=_e){_b=this._innerdataset;var _f=this._p_codecolumn;var _g=this._p_datacolumn==""?_f:this._p_datacolumn;if(_b&&_f){var _h=_b.findRow(_f,_e);var _i=_e;if(_h>-1){_i=_b.getColumn(_h,_g);}else{this._do_not_change_value=true;}this._setValue(_e);this._setIndex(_h);this._setText(_i);this._doSelect(_h,false);this._do_not_change_value=false;}if(this._is_created){this._redrawListBoxContents(true);this._onRecalcScrollSize();}}}};_pListBox._onRecalcScrollSize=function(){var _a=this.getElement();if(_a){var _b=this._getClientWidth();var _c=this._getClientHeight();var _d=Math.max(this._contents_maxwidth,_b);var _e=Math.max(this._contents_maxheight,_c);this._calc_scroll=true;_a.setElementScrollMaxSize(_d,_e);if(!this._cnt_resetscroll){this._onResetScrollBar();}this._calc_scroll=false;this._cnt_resetscroll=0;}};_pListBox._getDlgCode=function(_a,_b,_c,_d){var _e,_f;var _g=this._p_hscrollbar;var _h=this._p_vscrollbar;if(_a&&(_a==nexacro.Event.KEY_TAB)){_e=this._want_tab;}else{_f=this._want_arrow;}if(nexacro._enableaccessibility){this._want_arrow=true;}if(this._is_first_focus){this._is_first_focus=false;}if(_c){if(_a==nexacro.Event.KEY_LEFT){if(_g){_f=_g.pos>_g.min?true:false;}else{_f=false;}}else if(_a==nexacro.Event.KEY_UP){if(_h){_f=_h.pos>_h.min?true:false;}else{_f=false;}}else if(_a==nexacro.Event.KEY_RIGHT){if(_g){_f=_g.pos<_g.max?true:false;}else{_f=false;}}else if(_a==nexacro.Event.KEY_DOWN){if(_h){_f=_h.pos<_h.max?true:false;}else{_f=false;}}}return {want_tab:_e,want_return:false,want_escape:false,want_chars:false,want_arrows:_f};};_pListBox._setFocus=function(_a,_b,_c){this._focus_direction=_b;var _d=this.setFocus(_a,_c);this._focus_direction=-1;return _d;};_pListBox._on_focus=function(_a,_b,_c,_d,_e,_f){var _g=false;var _h=this._focus_direction;if(_b=="tabkey"){_h=0;}else if(_b=="shifttabkey"){_h=1;}else if(_b=="downkey"){_h=2;}else if(_b=="upkey"){_h=3;}if(_a===false){this._focus_direction=-1;this._want_arrow=true;}if(_h>=0){_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(_a==false){if(this._last_focused){this._do_defocus(this._last_focused,false);}var _i,_j;var _k=this._getInnerdatasetInfo("_rowcount");if(nexacro._enableaccessibility){this._accessibility_index=-1;if(_k){if(_h<2){var _l=this._p_index;if(nexacro._accessibilitytype!=2||nexacro._Browser!="Chrome"){if(_h===0){this._accessibility_index=0;}else{this._accessibility_index=_k -1;}_l=this._accessibility_index;}this._is_first_focus=true;this._refreshScroll(_l,_h);_j=this._getItem(_l);if(_j){_j._on_focus(true);}}else{if(_h==2){this._is_first_focus=true;if(!this._isAccessibilityEnable()){this._accessibility_index=0;_i=this._getItem(this._accessibility_index);if(_i){_i._on_focus(true);}}else{this._accessibility_index=-1;}}else if(_h==3){this._is_first_focus=true;this._accessibility_index=_k -1;_i=this._getItem(this._accessibility_index);if(_i){_i._on_focus(true);}}}}this._shift_select_base_index=this._accessibility_index;}}}else{_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(this._last_focused){this._do_defocus(this._last_focused,false);}else if(this._select_multi.lastselected===undefined&&this._accessibility_index>-1){this._getItem(this._accessibility_index)._changeStatus("focused",false);}}return _g;};_pListBox._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=this._getInnerdatasetInfo("_rowcount");var _g=this._getInnerdatasetInfo("_max_width");var _h=this._getInnerdatasetInfo("_max_height");_b+=_g;_c+=_h* _f;return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pListBox.on_get_accessibility_label=function(){var _a="";if(!this._is_first_focus){_a=this._p_text?this._p_text:this.id;}return _a?_a:"";};_pListBox.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this._redrawListBoxContents(!this._keep_scrolling);};_pListBox.set_text=nexacro._emptyFn;_pListBox._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pListBox.set_value=function(_a){_a=this._convertValueType(_a);if(this._p_value!=_a){if(this._p_acceptvaluetype=="ignoreinvalid"){var _b=-1;var _c=this._innerdataset;var _d=this._p_codecolumn;if(_c){_b=_c.findRow(_d,_a);if(_b<0){return;}}}if(!this.applyto_bindSource("value",_a)){return;}this._p_value=_a;this.on_apply_value(_a);if(this._p_value==undefined){this._p_value=_a;}}};_pListBox.on_apply_value=function(_a){var _b=this._innerdataset;var _c=this._p_codecolumn;var _d=this._p_datacolumn==""?_c:this._p_datacolumn;if(_b&&_c){var _e=_b.findRow(_c,_a);var _f="";if(_e>-1){_f=_b.getColumn(_e,_d);}this._setIndex(_e);this._setText(_f);this._doSelect(_e,false);}};_pListBox.set_index=function(_a){if(isNaN(_a= +_a)||_a<-1){return;}var _b=this._innerdataset;if(_b&&(_a>_b.getRowCount()-1)){_a=-1;}if(this._p_index!=_a){this._p_index=_a;this.on_apply_index(_a);}else{this.on_apply_index(_a);this._on_last_selectfocuschanged(this._p_index,true);}};_pListBox.on_apply_index=function(_a){var _b="";var _c;var _d=this._getInnerdatasetInfo("_rows",_a);if(_d){_c=_d.value;_b=_d.text;}if(this._p_value!=_c){if(!this.applyto_bindSource("value",_c)){this._p_index=this._default_index;return;}this._setValue(_c);this._setText(_b);}if(this._innerdataset){this._doSelect(_a,false);}};_pListBox.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(this._p_innerdataset!=_a||(this._p_innerdataset&&!this._innerdataset)){this._setInnerDatasetStr(_a);this.on_apply_innerdataset(this._innerdataset);}};_pListBox.on_apply_innerdataset=function(_a){if(_a){_a._setEventHandler("onload",this._on_dataset_onload,this);_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);}this._parseInnerDataset();var _b=this.getElement();if(_b){this._redrawListBoxContents(!this._keep_scrolling);this._onRecalcScrollSize();}};_pListBox.set_codecolumn=function(_a){if(this._p_codecolumn!=_a){this._p_codecolumn=_a;this.on_apply_codecolumn(_a);}};_pListBox.on_apply_codecolumn=function(_a){if(this._is_created){this._parseInnerDataset();this._redrawListBoxContents(!this._keep_scrolling);this._onRecalcScrollSize();}};_pListBox.set_datacolumn=function(_a){if(this._p_datacolumn!=_a){this._p_datacolumn=_a;this.on_apply_datacolumn(_a);}};_pListBox.on_apply_datacolumn=function(_a){if(this._is_created){this._parseInnerDataset();this._redrawListBoxContents(!this._keep_scrolling);this._onRecalcScrollSize();}};_pListBox.set_multiselect=function(_a){_a=nexacro._toBoolean(_a);if(this._p_multiselect!=_a){this._p_multiselect=_a;this.on_apply_multiselect(_a);}};_pListBox.on_apply_multiselect=function(_a){var _b=this.getElement();if(_b){this._select_clear();this._shiftKey=false;this._ctrlKey=false;this.setSelect(this._p_index,true);}};_pListBox.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);this._setAccessibilityFlagReadOnly(_a);}};_pListBox.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_readonly(_a);}};_pListBox.set_itemheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_itemheight!=_a){this._p_itemheight=_a;this.on_apply_itemheight(_a);}};_pListBox.on_apply_itemheight=function(_a){var _b=this.getElement();if(_b){this._redrawListBoxContents(false);this._onRecalcScrollSize();}};_pListBox.set_dragscrolltype=function(_a){var _b=["none","vert","horz","both","all"];if(_b.indexOf(_a)==-1){return;}if(this._p_dragscrolltype!=_a){this._p_dragscrolltype=_a;}};_pListBox.set_selectscrollmode=function(_a){switch(_a){case "select":case "scroll":this._selectscrollmode=this._p_selectscrollmode=_a;break;case "default":this._p_selectscrollmode=_a;this._selectscrollmode=(nexacro._isTouchInteraction)?"scroll":"select";break;}};_pListBox.set_itemaccessibilityrole=function(_a){if(_a){this._p_itemaccessibilityrole=_a;this.on_apply_itemaccessibilityrole(_a);}else{this._p_itemaccessibilityrole="";this.on_apply_itemaccessibilityrole(" ");}};_pListBox.on_apply_itemaccessibilityrole=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityrole(_a?_a:this._p_itemaccessibilityrole);}};_pListBox.set_itemaccessibilitylabel=function(_a){if(_a){this._p_itemaccessibilitylabel=_a;this.on_apply_itemaccessibilitylabel(_a);}else{this._p_itemaccessibilitylabel="";this.on_apply_itemaccessibilitylabel(" ");}};_pListBox.on_apply_itemaccessibilitylabel=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitylabel(_a?_a:this._p_itemaccessibilitylabel);}};_pListBox.set_itemaccessibilityenable=function(_a){if(_a){this._p_itemaccessibilityenable=_a;this.on_apply_itemaccessibilityenable(_a);}else{this._p_itemaccessibilityenable=true;this.on_apply_itemaccessibilityenable(true);}};_pListBox.on_apply_itemaccessibilityenable=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityenable(_a?_a:this._p_itemaccessibilityenable);}};_pListBox.set_itemaccessibilitydescription=function(_a){if(_a){this._p_itemaccessibilitydescription=_a;this.on_apply_itemaccessibilitydescription(_a);}else{this._p_itemaccessibilitydescription="";this.on_apply_itemaccessibilitydescription(" ");}};_pListBox.on_apply_itemaccessibilitydescription=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitydescription(_a?_a:this._p_itemaccessibilitydescription);}};_pListBox.set_itemaccessibilityaction=function(_a){if(_a){this._p_itemaccessibilityaction=_a;this.on_apply_itemaccessibilityaction(_a);}else{this._p_itemaccessibilityaction="";this.on_apply_itemaccessibilityaction(" ");}};_pListBox.on_apply_itemaccessibilityaction=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityaction(_a?_a:this._p_itemaccessibilityaction);}};_pListBox.set_itemaccessibilitydesclevel=function(_a){if(_a){this._p_itemaccessibilitydesclevel=_a;this.on_apply_itemaccessibilitydesclevel(_a);}else{this._p_itemaccessibilitydesclevel="";this.on_apply_itemaccessibilitydesclevel(" ");}};_pListBox.on_apply_itemaccessibilitydesclevel=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitydesclevel(_a?_a:this._p_itemaccessibilitydesclevel);}};_pListBox.set_acceptvaluetype=function(_a){var _b=["allowinvalid","ignoreinvalid"];if(_b.indexOf(_a)==-1){return;}this._p_acceptvaluetype=_a;};_pListBox._properties=[{name:"codecolumn"},{name:"datacolumn"},{name:"multiselect"},{name:"innerdataset"},{name:"readonly"},{name:"index"},{name:"text"},{name:"value"},{name:"dragscrolltype"},{name:"selectscrollmode"},{name:"itemheight"},{name:"acceptvaluetypeowinvalid"},{name:"itemaccessibilityrole"},{name:"itemaccessibilityenable"},{name:"itemaccessibilitylabel"},{name:"itemaccessibilitydescription"},{name:"itemaccessibilityaction"},{name:"itemaccessibilitydesclevel"}];nexacro._defineProperties(_pListBox,_pListBox._properties);_pListBox.getCount=function(){return this._getInnerdatasetInfo("_rowcount");};_pListBox.getSelectedCount=function(){return this._select_multi.length;};_pListBox.getSelect=function(_a){if(_a<0||_a>=this.getCount()){return false;}var _b=this._select_multi.items;var _c=this._select_multi.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d]==_a){return true;}}return false;};_pListBox.getSelectedItems=function(){if(this._select_multi&&this._select_multi.length>0){var _a=this._select_multi.items;var _b=[];for(var _c=0,_d=_a.length;_c<_d;_c++ ){_b[_c]=_a[_c];}_b.sort(function(_e,_f){return _e-_f;});return _b;}else{return [];}};_pListBox.clearSelect=function(){if(this._select_multi&&this._select_multi.length>0){this._change_by_script=true;this._selectinfo.index=-1;if(this._changeIndex(-1)){this.on_apply_index(-1);}this._select_clear();this._change_by_script=false;}};_pListBox.redraw=function(){this._redrawListBoxContents(true);this._onRecalcScrollSize();};_pListBox.setSelect=function(_a,_b){_b=nexacro._toBoolean(_b);_a=parseInt(_a)|0;var _c=this._getItem(_a);this._change_by_script=true;if(_a>=0){if(_b==true){if(!this._p_multiselect){if(this._changeIndex(_a)){this._deselect_all(true);if(!_c){this._clearListBoxBufferPage();}this.on_apply_index(_a);}else{this._doSelect(_a,false);}}else{if(_c){_c.set_selected(_b);}this._select_add(_a);this._changeIndex(_a);}}else{if(_c){_c.set_selected(false);}var _d=this._p_index;var _e;if(this._select_multi&&this._select_multi.length>0){if(this._p_index==_a){var _f=this._select_multi.items;_e=_f.indexOf(this._p_index);if(_e>0){_d=_f[_e -1];}}}this._select_remove(_a);if(this._select_multi&&this._select_multi.length==0){this._changeIndex(-1);}else if(this._select_multi&&this._select_multi.length>0){this._changeIndex(_d);}}}else{if(this._changeIndex(-1)){this.on_apply_index(-1);}this._select_clear();}this._change_by_script=false;};_pListBox.updateToDataset=function(){return this.applyto_bindSource("value",this._p_value);};_pListBox.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";this.on_apply_innerdataset(this._innerdataset);}else if(_a instanceof nexacro.Dataset||(typeof _a=="object"&&_a._type_name=="Dataset")){this._innerdataset=_a;this._p_innerdataset=_a.id;this._keep_scrolling=(this._p_innerdataset!=_a.id)?false:true;this.on_apply_innerdataset(this._innerdataset);}};_pListBox.getInnerDataset=function(){return this._innerdataset;};_pListBox._on_dataset_onload=function(_a,_b){if(_b.reason==0){this._redrawListBoxContents(true);this._onRecalcScrollSize();if(this._p_index>-1){if(this._changeIndex(this._p_index)){this.on_apply_index(this._p_index);}}else if(this._p_value!==""){var _c=this._innerdataset.findRow(this._p_codecolumn,this._p_value);if(this._changeIndex(_c)){this.on_apply_index(_c);}}}};_pListBox._on_dataset_onvaluechanged=function(_a,_b){this._parseInnerDataset();if(this._is_created){this._redrawListBoxContents(false);this._onRecalcScrollSize();this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pListBox._on_dataset_onrowsetchanged=function(_a,_b){this._parseInnerDataset();if(this._is_created){var _c=_a._p_rowcount-1;var _d;switch(_b.reason){case 10:_d="assign";break;case 11:_d="copydata";break;case 12:if(_b.row==-1){_d="appenddata";}else if(_b.row==_c){_d="addrow";}else if(_b.row<_c){_d="insertrow";}break;case 20:if(_b.row==-1){_d="deletemultirows";}else{_d="deleterow";}break;case 22:_d="deleteall";break;case 23:_d="cleardata";break;case 24:_d="clear";break;case 30:_d="keystring";break;case 31:if(_b.row==-1){_d="filter";}else{_d="filterrow";}break;case 32:_d="moverow";break;case 33:_d="exchangerow";break;case 34:_d="addcolumn";break;case 41:_d="enableevent";break;case 40:_d="rowtype";break;default:break;}var _e=true;if(_d=="addrow"||_d=="insertrow"||_d=="appenddata"||_d=="deleterow"||_d=="deletemultirows"||_d=="addcolumn"||_d=="moverow"){_e=false;}if(_d=="deletemultirows"||_d=="deleteall"||_d=="deleterow"){this._accessibility_index=-1;}this._redrawListBoxContents(_e);this._onRecalcScrollSize();}};_pListBox._on_item_onlbuttondown=function(_a,_b){if(this._p_readonly){return false;}if(nexacro._enableaccessibility){if(this._accessibility_index>-1){var _c=this._getItem(this._accessibility_index);if(_c._status=="focused"){_c._changeStatus("focused",false);}}}var _d=this._statusmap?this._statusmap['focused']:false;_a._changeUserStatus("selected",true);if(_d){_a._changeStatus("focused",true);}this._shiftKey=_b.shiftkey;this._ctrlKey=_b.ctrlkey;this._altKey=_b.altkey;this._selectinfo.obj=_a;this._selectinfo.index=_a.index;this._selectinfo.text=_a.text;this._selectinfo.value=_a.value;if(nexacro._isTouchInteraction){this._selectinfo_list[this._selectinfo_list.length]=this._selectinfo;}if(!this._shiftKey){this._shift_select_base_index=_a.index;}this._lbtnDownIdx=_a.index;};_pListBox._on_item_ondblclick=function(_a,_b){if(this._p_readonly||!this._p_enableevent){return false;}return this.on_fire_onitemdblclick(this,this._p_index,this._p_text,this._p_value,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty);};_pListBox._on_beforescroll=function(_a,_b,_c,_d,_e,_f){if(_e=="trackstart"||_e=="tracklastover"||_e=="trackfirstover"){return true;}if(nexacro._Browser=="Runtime"||(navigator.userAgent.indexOf("Android 4.1")>-1||navigator.userAgent.indexOf("Android 4.2")>-1||navigator.userAgent.indexOf("Android 4.3")>-1)){this._adjustScrollRows_callback(true,_d);}else{if(_f=="fling"||_f=="slide"||_e=="track"){if(!this._aniframe_rowscroll){var _g=this;this._scroll_vpos_queue=[];this._aniframe_rowscroll=new nexacro.AnimationFrame(this,function(){_g._adjustScrollRows_callback();});}var _h=this._scroll_vpos_queue.push(_d);if(_h==1){this._aniframe_rowscroll.start();}}else{this._adjustScrollRows_callback(true,_d);}}return true;};_pListBox._adjustScrollRows_callback=function(_a,_b){if(_b==undefined){_b=this._p_vscrollbar?this._p_vscrollbar._pos:this._vscroll_pos;}if(_a){this._scroll_vpos_queue=[];}else{this._scroll_vpos_queue.pop();if(this._scroll_vpos_queue.length>0){this._aniframe_rowscroll.start();}}var _c=this._getItemHeight();var _d=this._getInnerdatasetInfo("_rowcount");var _e=_c?Math.floor(_b/_c):0;var _f=_e+this._page_rowcount;if(_f>=_d){_f=_d -1;}if(this._touch_scrolling){this._createListBoxContents(_e,_f,true);this._control_element.setElementVScrollPos(_b);}else{this._createListBoxContents(_e,_f);this._control_element.setElementVScrollPos(_b);}if(this._p_index>-1){if(this._p_multiselect){var _g=this._selectinfo.index;var _h=this._buffer_pages;for(var _j=0;_j<_h.length;_j++ ){for(var _k=0;_k<_h[_j].length;_k++ ){var _i=_h[_j][_k].index;if(_i==_g){this._doSelect(this._p_index,true);}}}}else{this._doSelect(this._p_index,false);}}};_pListBox._setVScrollDefaultAction=function(_a){if(this._p_scrolltype=="none"||this._p_scrolltype=="horizontal"){return false;}var _b=this.getElement();if(_b){var _c=this._getItemHeight();var _d=this._vscroll_pos;var _e=_d+_c;if(_a>0){_e=_d-_c;if(_e<0){_e=0;}}if(_e>_b.vscroll_limit){_e=_b.vscroll_limit;}this._scrollTo(this._hscroll_pos,_e,true,true,undefined,"mousewheel_v");if(_d!=this._vscroll_pos){return true;}}return false;};_pListBox.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this._is_alive){return;}return nexacro.Component.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};_pListBox.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(_l&&(_l instanceof nexacro.ScrollBarControl||(_l.parent&&_l.parent instanceof nexacro.ScrollBarControl))){return;}var _o=this._getWindow().findComponent(_m);var _p=this._selectinfo;var _q=nexacro.Component.prototype.on_fire_sys_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);var _r=_p.obj;if(_r){var _s;if(this._contains(_m)){this.on_fire_onitemclick(this,_o.index,_o.text,_o.value,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_n);if(!this._is_alive){return _q;}if(nexacro._enableaccessibility){if(this._accessibility_index>-1){var _t=this._getItem(this._accessibility_index);if(_p.index!=this._accessibility_index&&_t&&_t._selected==true){this._deselect_all(true);_t._changeUserStatus("selected",false);}}else{if(_p){this._accessibility_index=_p.index;}}}_s=_r;var _u=_s.index;if(this._p_multiselect){if(this._shiftKey==true||this._ctrlKey==true){this._select_withmouseevent(_u);}else{this._do_select(_u,false);}}else{if(this._changeIndex(_u)){this.on_apply_index(_u);}else{if(!_r.selected){_r._changeUserStatus("selected",false);}}if(_r!=_o){_r._changeStatus("mouseover",false);}}}else{if(!_r.selected){_r._changeUserStatus("selected",false);}}}return _q;};_pListBox.on_fire_sys_onslidestart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._touch_scrolling=true;return nexacro.Component.prototype.on_fire_sys_onslidestart.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pListBox.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);if(this._p_selectscrollmode=="select"&&this._p_multiselect){if(this._innerdataset){var _k=-1;if(_c[0].target&&_c[0].target.parent){_k=_c[0].target.parent.index;}if(this._lbtnDownIdx>-1&&_k>-1){this._deselect_all(true);var _l=this._lbtnDownIdx;var _m=_k;var _n=_k;if(!nexacro._isNumber(_l)){_l=0;}if(!nexacro._isNumber(_m)){_m=this._getInnerdatasetInfo("_rowcount");}if(_l>_m){var _o=_m;_m=_l;_l=_o;_n=_o;}var _p=[];for(var _q=_l;_q<=_m;_q++ ){_p.push(_q);}this._doMultiSelect(_p,true);this._changeIndex(_n);}}return true;}return _j;};_pListBox.on_fire_sys_onslideend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._touch_scrolling=false;return nexacro.Component.prototype.on_fire_sys_onslideend.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pListBox.on_fire_sys_onflingstart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._touch_scrolling=true;return nexacro.Component.prototype.on_fire_sys_onflingstart.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pListBox.on_fire_sys_onflingend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._touch_scrolling=false;return nexacro.Component.prototype.on_fire_sys_onflingend.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pListBox.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this._p_readonly){return false;}if(this.onitemclick&&this.onitemclick._has_handlers){var _p=new nexacro.ItemClickEventInfo(_a,"onitemclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);var _q=this.onitemclick._fireEvent(this,_p);return nexacro._toBoolean(_q);}return false;};_pListBox.on_fire_canitemchange=function(_a,_b,_c,_d,_e,_f,_g){if(this.canitemchange&&this.canitemchange._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"canitemchange",_b,_c,_d,_e,_f,_g);var _i=this.canitemchange._fireCheckEvent(this,_h);return nexacro._toBoolean(_i);}return true;};_pListBox.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(!this._selectinfo){return false;}this._selectinfo.obj=null;this._selectinfo.index=_a.index;this._selectinfo.text=_a.text;this._selectinfo.value=_a.value;var _h=this._selectinfo;_h.index=_e;_h.text=_f;_h.value=_g;if(this.onitemchanged&&this.onitemchanged._has_handlers){var _i=new nexacro.ItemChangeEventInfo(this,"onitemchanged",_b,_c,_d,_e,_f,_g);var _j=this.onitemchanged._fireEvent(this,_i);return nexacro._toBoolean(_j);}return false;};_pListBox.on_fire_onitemdblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this._p_readonly){return false;}if(this.onitemdblclick&&this.onitemdblclick._has_handlers){var _p=new nexacro.ItemClickEventInfo(_a,"onitemdblclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);var _q=this.onitemdblclick._fireEvent(this,_p);return nexacro._toBoolean(_q);}return false;};_pListBox.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pListBox.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=false;var _e=this._getContentsItem();if(_e&&_e.length>0){var _f=null;if(_a>0){this._overeditemindex++ ;}else{this._overeditemindex-- ;}_f=this._getItemByRealIdx(_e,this._overeditemindex).obj;if(_f){_d=true;_f._setAccessibilityNotifyEvent();}}return _d;};_pListBox.on_keydown_basic_action=function(){};_pListBox.on_keydown_default_action=function(_a,_b,_c,_d,_e){if(this._p_readonly){return;}var _f=this._getInnerdatasetInfo("_rowcount");if(!_f){return;}this._shiftKey=_d;this._ctrlKey=_c;this._altKey=_b;if(!this._shiftKey){this._shift_select_base_index=this._p_index;}var _g;var _h=this._select_multi;this._last_keydown_keycode=_a;if(_a==nexacro.Event.KEY_UP){if(_c){this._do_scroll("up");return true;}if(this._p_multiselect){this._select_withkeyupevent(_d);_g=_h.items[_h.length-1];if(_g!=null){if(_g>-1){if(this._last_focused){this._do_defocus(this._last_focused);}this._changeIndex(_g);}}}else{_g= +this._p_index-1;if(_g<0){_g=_f -1;}else if(_g>=_f){_g=0;}if(_g>-1){if(this._changeIndex(_g)){if(this._last_focused){this._do_defocus(this._last_focused);}this.on_apply_index(_g);}}}}else if(_a==nexacro.Event.KEY_DOWN){if(_c){this._do_scroll("down");return true;}if(this._p_multiselect){this._select_withkeydownevent(_d);_g=_h.items[_h.length-1];if(_g!=null){if(_g<_f){this._changeIndex(_g);}}}else{_g= +this._p_index+1;if(_g<0){_g=_f -1;}else if(_g>=_f){_g=0;}if(_g<_f){if(this._changeIndex(_g)){this.on_apply_index(_g);}}}}else if(_a==nexacro.Event.KEY_PAGE_UP){_g= +this._p_index-this._page_rowcount;if(_g<0){_g=0;}else if(_g>=_f){_g=_f -1;}if(_g>-1){if(this._changeIndex(_g)){if(this._last_focused){this._do_defocus(this._last_focused);}this.on_apply_index(_g);}}}else if(_a==nexacro.Event.KEY_PAGE_DOWN){_g= +this._p_index+this._page_rowcount;if(_g<0){_g=0;}else if(_g>=_f){_g=_f -1;}if(_g<_f){if(this._changeIndex(_g)){this.on_apply_index(_g);}}}else if(_a==nexacro.Event.KEY_HOME){_g=0;if(this._changeIndex(_g)){this.on_apply_index(_g);}}else if(_a==nexacro.Event.KEY_END){_g=_f -1;if(this._changeIndex(_g)){this.on_apply_index(_g);}}else if(_a===nexacro.Event.KEY_SPACE||_a===nexacro.Event.KEY_ENTER){if(this._p_multiselect){var _i=this._getItem(this._select_multi.lastselected);var _j=false;this._sellist=this._select_multi.items;var _k=this._sellist.length;var _l,_m;for(var _n=0;_n<_k;_n++ ){_m=this._sellist[_n];if(this._select_multi.lastselected==_m){_j=true;_i=this._getItem(_m);_l=_m;}}if(_j!==true){if(_i){_i.set_selected(true);}this._select_add(this._select_multi.lastselected);}else{this._do_deselect(_l,true);}}else{_g=this._accessibility_index;if(_g>-1){if(this._changeIndex(_g)){if(this._last_focused){this._do_defocus(this._last_focused);}this.on_apply_index(_g);}}}}if(nexacro._enableaccessibility){this._on_keydown_default_accessibility_action(_a,_b,_c,_d,_e);}};_pListBox._redrawListBoxContents=function(_a){this._redrawListBoxContentsBefore();var _b=this._getInnerdatasetInfo("_rowcount");if(_b){var _c=this._getItemHeight();var _d=this._getClientHeight();var _e=_c?_d/_c:0;if(nexacro._enableaccessibility&&(nexacro._isMobile&&nexacro._isMobile())){_e=_b;}this._page_rowcount=Math.ceil(_e);this._page_rowcount_min=Math.floor(_e);var _f=0;var _g=0;if(_a){_g=_b -1;if(_g>=this._page_rowcount){_g=this._page_rowcount>0?this._page_rowcount-1:0;}}else{_f=this._get_first_visible_row();_g=this._get_last_visible_row(true);}this._recalcContentsMaxSize();this._createListBoxContents(_f,_g);if(this._p_value!==undefined){this.set_value(this._p_value);}else if(this._p_index>-1){this.set_index(this._p_index);}}this._redrawListBoxContentsAfter();};_pListBox._redrawListBoxContentsBefore=function(){this._destroyListBoxContents();};_pListBox._redrawListBoxContentsAfter=function(){if(this._status=="focused"){var _a=this._getItem(this._accessibility_index);if(_a){_a._on_focus(true);}}};_pListBox._createListBoxContents=function(_a,_b,_c){var _d=this._isRange(_a,_b);var _e=this._getInnerdatasetInfo("_rowcount");var _f=this._page_rowcount;var _g=this._buffer_pages;var _h,_i;var _j,_k;var _l,_m;var _n=_e -1;if(_c){switch(_d){case 0:if(_f==0){return;}if(_b==_n||(_b<_f -1)){_m=1;}else{_m=2;}for(_l=0;_l<_m;_l++ ){_i=_a+(_l* _f);if(_i+_f>_n){_f=_n-_i+1;}this._addListBoxBufferPage(_f,_i);}break;case 1:do{_h=_g[0];_j=_h[0];if(_j.index<_f){_i=0;_f=_j.index;}else{_i=_j.index-_f;}this._insertListBoxBufferPage(0,_f,_i);}while(_i>_a)break;case 2:_h=_g[_g.length-1];_k=_h[_h.length-1];_i=_k.index+1;if(_i+_f>_n){_f=_n-_k.index;}this._addListBoxBufferPage(_f,_i);break;}}else{switch(_d){case 0:if(_f==0){return;}if(_b==_n||(_b<_f -1)){_m=1;}else{_m=2;}this._clearListBoxBufferPage();for(_l=0;_l<_m;_l++ ){_i=_a+(_l* _f);if(_i+_f>_n){_f=_n-_i+1;}this._addListBoxBufferPage(_f,_i);}break;case 1:_h=_g[0];_j=_h[0];_i=_a-_f+1;if(_i<0){_i=0;_f=_j.index;}if(_g.length==2){this._removeListBoxBufferPage(this._buffer_pages.length-1);this._insertListBoxBufferPage(0,_f,_i);this._adjustListBoxBufferPage(0);}else if(_g.length==1){this._insertListBoxBufferPage(0,_f,_i);this._adjustListBoxBufferPage(0);}break;case 2:if(_g.length==2){this._removeListBoxBufferPage(0);_h=_g[0];_k=_h[_h.length-1];_i=_k.index+1;if(_i+_f>_n){_f=_n-_k.index;}this._addListBoxBufferPage(_f,_i);}break;case 3:this._resetListBoxBufferPage(_a,_b);break;}}};_pListBox._destroyListBoxContents=function(){this._clearListBoxBufferPage();this._contents_maxwidth=0;this._contents_maxheight=0;};_pListBox._createListItemControl=function(_a){var _b=this._getInnerdatasetInfo("_rows",_a);if(_b){var _c=this._getItemHeight();var _d=this._getClientWidth();var _e=this._createListItem("item_"+_a,0,_a* _c,Math.max(this._contents_maxwidth,_d),_c,null,null,null,null,null,null,this);_e.set_value(_b.value);_e.set_text(_b.text);_e.set_index(_a);_e.set_selected(false);_e.set_readonly(this._p_readonly);if(nexacro._enableaccessibility){this._setItemAccessibility(_e);}_e._setEventHandler("onlbuttondown",this._on_item_onlbuttondown,this);_e._setEventHandler("ontouchstart",this._on_item_onlbuttondown,this);_e._setEventHandler("ondblclick",this._on_item_ondblclick,this);_e.createComponent(this._is_created?false:true);if(this._p_multiselect){var _f=this._select_multi.items;var _g=this._select_multi.length;for(var _h=0;_h<_g;_h++ ){if(_a==_f[_h]){_e.set_selected(true);break;}}}else{if(this._p_index==_a){_e.set_selected(true);this._set_last_selectfocused(_a);_e._setAccessibilityStatSelected(true);}else{_e._setAccessibilityStatSelected(false);}}return _e;}};_pListBox._createListItem=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return new nexacro._ListBoxItemControl(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pListBox._addListBoxBufferPage=function(_a,_b){var _c,_d;var _e=[];for(_c=0;_c<_a;_c++ ){_d=this._createListItemControl(_b);_e.push(_d);_b++ ;}this._buffer_pages.push(_e);};_pListBox._insertListBoxBufferPage=function(_a,_b,_c){var _d,_e;var _f=[];for(_d=0;_d<_b;_d++ ){_e=this._createListItemControl(_c);_f.push(_e);_c++ ;}this._buffer_pages.splice(_a,0,_f);};_pListBox._adjustListBoxBufferPage=function(_a){var _b=this._buffer_pages[_a];var _c=this._buffer_pages[_a -1];var _d=this._buffer_pages[_a+1];var _e,_f;var _g,_h;var _i;if(_c){_g=_b[0].index;_f=_c[_c.length-1].index;if(_g -1!=_f){_e=_g-this._page_rowcount;this._removeListBoxBufferPage(_a -1);this._insertListBoxBufferPage(_a -1,this._page_rowcount,_e);}}if(_d){_h=_b[_b.length-1].index;_i=_d[0].index;if(_h+1!=_i){this._removeListBoxBufferPage(_a+1);this._insertListBoxBufferPage(_a+1,this._page_rowcount,_h+1);}}};_pListBox._removeListBoxBufferPage=function(_a){if(this._buffer_pages[_a]){var _b=this._buffer_pages.splice(_a,1)[0];for(var _c in _b){if(_b.hasOwnProperty(_c)){if(_b[_c]){_b[_c].destroy();_b[_c]=null;}}}}};_pListBox._clearListBoxBufferPage=function(){var _a,_b;var _c=this._buffer_pages;for(_a in _c){if(_c.hasOwnProperty(_a)){for(_b in _c[_a]){if(_c[_a].hasOwnProperty(_b)){if(_c[_a][_b]){_c[_a][_b].destroy();_c[_a][_b]=null;}}}}_c[_a]=null;}this._buffer_pages=[];};_pListBox._resetListBoxBufferPage=function(_a,_b){var _c;var _d=this._buffer_pages;var _e=_d.length;if(_e>2){var _f;var _g,_h;for(_f=0;_f<_e;_f++ ){_c=_d[_f];if(_c[0].index<=_a&&_c[_c.length-1].index>=_a){_g=_f;}if(_c[0].index<=_b&&_c[_c.length-1].index>=_b){_h=_f;}}if(_g==_h){if(_g==0){_h+=1;}else{if(_h==(_e -1)){_g-=1;}}}while(_e){_e-- ;if(_g!=_e&&_h!=_e){this._removeListBoxBufferPage(_e);}}}};_pListBox._recalcLayout=function(){var _a=this._getItemHeight();var _b=this._getClientWidth();var _c;var _d=this._getContentsItem();var _e=_d.length;for(var _f=0;_f<_e;_f++ ){_c=_d[_f];if(_c){_c.move(0,_c.index* _a,Math.max(this._contents_maxwidth,_b),_a);}}};_pListBox._recalcContentsMaxSize=function(){var _a=this._getClientWidth();var _b=this._getClientHeight();if(_a==0||_b==0){this._contents_maxwidth=0;this._contents_maxheight=0;return;}var _c=this._getItemHeight();var _d=this._getInnerdatasetInfo("_rowcount");var _e=this._getInnerdatasetInfo("_max_width");var _f=this._getInnerdatasetInfo("_max_height");this._scroll_default_value=_f;if(this._contents_maxwidth!=_e||this._contents_maxheight!=(_c* _d)){this._contents_maxwidth=_e;this._contents_maxheight=_c* _d;if(this._is_created){this._onRecalcScrollSize();}}};_pListBox._parseInnerDataset=function(){this._initInnerdatasetInfo();var _a=this._innerdataset;if(_a){var _b=this._p_codecolumn;var _c=this._p_datacolumn;var _d=_a.getRowCount();if(_d&&(_b||_c)){_b=_b==""?_c:_b;_c=_c==""?_b:_c;var _e=this._temp_item;var _f=_e?_e._getCurrentStyleInheritValue("font"):null;var _g=this._getReferenceAbsoluteFont(_f);var _h="";var _i=0;var _j=[0,0];for(var _k=0,_l,_m;_k<_d;_k++ ){_l=_a.getColumn(_k,_c);_m=_a.getColumn(_k,_b);_m=this._convertValueType(_m,true);this._setInnerdatasetInfoRowData({text:_l,value:_m});if(_f){_j=nexacro._getTextSize(_l,_f,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,_g);}if(_i<_j[0]){_i=_j[0];_h=_l;}}if(_e){_e.set_text(_h);_j=_e._on_getFitSize();_i=_j[0];this._setInnerdatasetInfoMaxSize(_i,_j[1]);}this._setInnerdatasetInfoRowCount(_d);}}};_pListBox._doSelect=function(_a,_b,_c){if(this._p_readonly){return false;}if(!this._p_multiselect){this._doSingleSelect(_a,_c);}else{if(typeof _a==="number"){_a=[_a];}this._doMultiSelect(_a,_b,_c);}};_pListBox._doSingleSelect=function(_a,_b){var _c=[false];this._on_select_change(_a,true,"singleselect",_c,_b);if(_c[0]){if(!_b){this._set_last_selectfocused(_a);}}};_pListBox._doMultiSelect=function(_a,_b,_c){var _d=_a[0];var _e=_a.length;var _f=this._select_multi;var _g=_f.length;if(!_b&&_g){var _h=_f.items;var _i=[];var _j=0;var _k=_f.length-1;if(_j<=_k){for(;_j<=_k;_j++ ){_i[_i.length]=_h[_j];}}else{for(;_j>=_k;_j-- ){_i[_i.length]=_h[_j];}}if(this._do_deselect(_i,_c)===false){return;}}var _l=[false];var _m=0,_n;for(;_m<_e;_m++ ){_n=_a[_m];if(_b&&this._is_selected(_n)){continue;}this._on_select_change(_n,true,"multiselect",_l,_c);}this._set_last_selectfocused(_d,_c);};_pListBox._select_withmouseevent=function(_a){var _b=this._p_multiselect?"multi":"single";switch(_b){case 'multi':var _c=this._select_multi;var _d=_c?_c.length:0;if(this._shiftKey){if(!this._ctrlKey){this._deselect_all(true);}this._select_range(this._shift_select_base_index,_a,this._shiftKey);}else if(this._ctrlKey){var _e=this._getItem(_a);if(_e){_e.set_selected(!_e.selected);}if(_e.selected===false){var _f=this._p_index;var _g;if(this._select_multi&&this._select_multi.length>0){if(this._p_index==_a){var _h=this._select_multi.items;_g=_h.indexOf(this._p_index);if(_g>0){_f=_h[_g -1];}}}for(var _i=0;_i<_d;_i++ ){if(_a===_c.items[_i]){this._select_remove(_a);}}if(this._select_multi&&this._select_multi.length==0){this._changeIndex(-1);}else if(this._select_multi&&this._select_multi.length>0){this._changeIndex(_f);}}else{this._select_add(_a);}this._set_last_selectfocused(_a);}else if(this._is_selected(_a)&&!this._shiftKey&&!this._ctrlKey&&_d>1){this._do_select(_a,false);}else{this._do_select(_a,false);}break;case 'single':this._do_select(_a,false);break;}};_pListBox._select_withkeyupevent=function(_a){var _b=this._select_multi.lastselected==null?nexacro._enableaccessibility?this._accessibility_index:this._select_multi.lastselected:this._select_multi.lastselected;if(_b>0){var _c=_b -1;if(_a&&_b){if(this._is_selected(_b)&&this._is_selected(_c)){this._do_deselect(_b,true);this._set_last_selectfocused(_c);if(this._isAccessibilityEnable()){var _d=this._getItem(_c);if(_d){_d._setFocus(true);}}}else if(!this._is_selected(_b)){this._do_select(_b,true);this._do_select(_c,true);}else{this._do_select(_c,true);}}else{this._shift_select_base_index=null;this._deselect_all(true);this._do_select(_c,false);}}};_pListBox._select_withkeydownevent=function(_a){var _b=this._select_multi.lastselected==null?nexacro._enableaccessibility?this._accessibility_index:this._select_multi.lastselected:this._select_multi.lastselected;var _c=this._getInnerdatasetInfo("_rowcount");if(_b+1<_c){var _d=_b===null?0:_b+1;if(_a&&_b>=0){if(this._shift_select_base_index==_b){this._deselect_all(true);this._do_select(this._shift_select_base_index,true);}if(this._is_selected(_b)&&this._is_selected(_d)){this._do_deselect(_b,true);this._set_last_selectfocused(_d);}else if(!this._is_selected(_b)){this._do_select(_b,true);this._do_select(_d,true);}else{this._do_select(_d,true);}}else{this._shift_select_base_index=null;this._deselect_all(true);this._do_select(_d,false);}}};_pListBox._do_scroll=function(_a){var _b=this._get_first_visible_row();var _c=this._getItemHeight();var _d=this._p_vscrollbar;var _e=this._vscroll_pos;if(_d){var _f=_b;if(_a=="down"){_f+=1;}else if("up"){if(_e<=_f* _c){_f-=1;}}if(_f>-1){this._scrollTo(null,_f* _c);}}};_pListBox._select_add=function(_a,_b){if(_a<0||_a>this._innerdataset.getRowCount()-1){return;}var _c=_a+"";var _d=this._select_multi;var _e=_d.map[_c];if(typeof _e!='undefined'){return this._select_replace(_c,_a);}_d.map[_c]=_a;_d.length++ ;_d.items.push(_a);_d.keys.push(_c);this._changeIndex(_a,undefined,_b);};_pListBox._select_replace=function(_a,_b){var _c=this._select_indexOfkey(_a);var _d=this._select_multi;_d.items[_c]=_b;_d.map[_a]=_b;};_pListBox._select_indexOfkey=function(_a){_a+="";return nexacro._indexOf(this._select_multi.keys,_a);};_pListBox._select_remove=function(_a){var _b=this._select_indexOfkey(_a);var _c=this._select_multi;if(_b<_c.length&&_b>=0){_c.length-- ;_c.items.splice(_b,1);var _d=_c.keys[_b];if(typeof _d!='undefined'){_c.map[_d]=undefined;}_c.keys.splice(_b,1);if(!this._p_multiselect&&_c.length==0){this._p_index=-1;this._p_text="";if(!this._do_not_change_value){this._p_value=undefined;}}return _a;}return false;};_pListBox._select_indexOf=function(_a){if(!this._p_multiselect){return this._selectinfo?this._selectinfo.index==_a:-1;}else{return nexacro._indexOf(this._select_multi.items,_a);}};_pListBox._select_clear=function(){var _a=this._getContentsItem();var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].set_selected(false);}this._select_multi={"items":[],"map":{},"keys":[],"length":0,"lastselected":null};};_pListBox._select_range=function(_a,_b,_c,_d){if(!_c){this._deselect_all(true);}var _e;var _f=[];var _g=_b;if(!nexacro._isNumber(_a)){_a=0;}if(!nexacro._isNumber(_b)){_b=this._getInnerdatasetInfo("_rowcount");}if(_a>_b){for(_e=_a;_b<=_e;_e-- ){_f.push(_e);}}else{for(_e=_a;_e<=_b;_e++ ){_f.push(_e);}}this._doMultiSelect(_f,true,true);this._changeIndex(_g);};_pListBox._deselect_all=function(_a){var _b=this._getInnerdatasetInfo("_rowcount");for(var _c=0;_c<_b;_c++ ){this._do_deselect(_c,_a);}};_pListBox._do_select=function(_a,_b,_c){if(this._p_readonly){return false;}if(typeof _a==="number"){_a=[_a];}if(!this._p_multiselect&&_a){var _d=_a.length?_a[0]:_a;this._doSingleSelect(_d,_c);}else{this._doMultiSelect(_a,_b,_c);}};_pListBox._do_deselect=function(_a,_b){if(nexacro._isNumber(_a)){_a=[_a];}else if(!nexacro._isArray(_a)){_a=[_a];}var _c=_a.length;var _d,_e=0,_f=0;var _g=[0];for(;_e<_c;_e++ ){_d=_a[_e];if(this._is_selected(_d)){ ++_f;this._on_select_change(_d,false,"deselect",_g,_b);}}return _g[0]===_f;};_pListBox._select_commit=function(_a,_b,_c,_d){var _e=this._select_multi;var _f=_e.length;switch(_a){case "deselect": ++(_c[0]);this._select_remove(_b);break;case "singleselect":var _g=_e.lastselected;this._select_add(_b);if(_g!=_b&&_f>0&&this._do_deselect(_g)===false){return false;}_c[0]=true;break;case "multiselect":this._select_add(_b,_d);_c[0]=true;break;}};_pListBox._set_last_selectfocused=function(_a,_b){var _c=this._select_multi.lastselected;this._select_multi.lastselected=_a;if(_a!==_c){this._on_last_selectfocuschanged(_a,_b);}};_pListBox._on_select_change=function(_a,_b,_c,_d,_e){if(this._select_commit(_c,_a,_d,_e)!==false){var _f=this._getItem(_a);if(_f){if(_b){_f.set_selected(true);}else{_f.set_selected(false);}if(nexacro._enableaccessibility){_f._setAccessibilityStatSelected(_b);_f._setAccessibilityInfoIndex(_a+1);_f._setAccessibilityInfoCount(this._getInnerdatasetInfo("_rowcount"));}}}};_pListBox._on_last_selectfocuschanged=function(_a,_b){if(_a>-1){var _c=this.getElement();if(_c){var _d=this._get_first_visible_row();var _e=this._get_last_visible_row(true);var _f=this._p_vscrollbar;if(_f){var _g=this.scrolltype;if(_g!="none"&&_g!="horizontal"){var _h=_f.pos;if(_a<=_d){_h=_a* this._getItemHeight();}else if(_a>=_e){_h=(_a+1)* this._getItemHeight()-_c.client_height;}if(_f.pos!=_h){_f.set_pos(_h);}}}else{var _i=this._getItem(_a);if(_i){var _j=_i.getElement();if(_j){_j.setElementFocus();}}}}}};_pListBox._do_defocus=function(_a,_b){var _c=this._getWindow();_c._removeFromCurrentFocusPath(_a,true);if(_b){_c._removeFromCurrentFocusPath(this,true);}};_pListBox._changeIndex=function(_a,_b,_c){if(this._p_index!=_a&&!_c){var _d=this._innerdataset;var _e=parseInt(_a,10)|0;var _f=this._p_index;var _g=this._p_text;var _h=this._p_value;var _i=(this._p_codecolumn||this._p_datacolumn);if(_d&&_i){var _j=_d.getColumn(_e,this._p_datacolumn||this._p_codecolumn);var _k=_d.getColumn(_e,this._p_codecolumn||this._p_datacolumn);_k=this._convertValueType(_k,true);var _l=_j==undefined?"":_j;var _m=_k;if(_b==undefined){_b=this._change_by_script;}if(_b!=true){if(this.on_fire_canitemchange(this,_f,_g,_h,_e,_l,_m)!=false){this._accessibility_index=this._p_index=_e;this._p_text=_l;if(!this._is_value_setting){this._p_value=_m;}this.applyto_bindSource("value",_k);this.on_fire_onitemchanged(this,_f,_g,_h,_e,_l,_m);return true;}}else{this._accessibility_index=this._p_index=_e;this._p_text=_l;if(!this._is_value_setting){this._p_value=_m;}this.applyto_bindSource("value",_k);return true;}}}return false;};_pListBox._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pListBox._setValue=function(_a){if(_a===null){_a="";}this._p_value=(_a===undefined)?_a:_a.toString();};_pListBox._setIndex=function(_a){this._p_index=_a;};_pListBox._setText=function(_a){this._p_text=_a;};_pListBox._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this._p_innerdataset=_a;}};_pListBox._setItemAccessibility=function(_a){var _b;if(nexacro._Browser=="Runtime"){_b=this._getAccessibilityRole();}else{_b=this._p_itemaccessibilityrole;}if(_b){_a.set_accessibilityrole(_b);}var _c=this._p_itemaccessibilityenable;if(_c!==undefined){_a.set_accessibilityenable(_c);}var _d=_a.set_accessibilitylabel(_a.text);if(_d!==undefined){_a.set_accessibilitylabel(_d);}var _e=this._p_itemaccessibilitydescription;if(_e){_a.set_accessibilitydescription(_e);}var _f=this._p_itemaccessibilityaction;if(_f){_a.set_accessibilityaction(_f);}var _g=this._p_itemaccessibilitydesclevel;if(_g){_a.set_accessibilitydesclevel(_g);}};_pListBox._getItem=function(_a){var _b=this._buffer_pages;var _c,_d;var _e,_f;for(_e in _b){_c=_b[_e];for(_f in _c){_d=_c[_f];if(_d&&(_d.index==_a)){return _d;}}}return null;};_pListBox._getItemHeight=function(){var _a=this._p_itemheight;if(_a!==undefined){return _a;}var _b=this._temp_item;if(_b){return _b._on_getFitSize()[1];}return 0;};_pListBox._getContentsItem=function(){var _a=[];var _b=this._buffer_pages;for(var _c in _b){if(_b[_c]&&_b.hasOwnProperty(_c)){_a=_a.concat(_b[_c]);}}return _a;};_pListBox._getContentsCount=function(){var _a=0;var _b=this._buffer_pages;for(var _c in _b){if(_b[_c]){_a+=_b[_c].length;}}return _a;};_pListBox._isRange=function(_a,_b){var _c=0;var _d,_e;var _f=this._buffer_pages;for(var _g in _f){_d=_f[_g];for(var _h in _d){_e=_d[_h];if(_e){if(_e.index==_b){_c+=1;}if(_e.index==_a){_c+=2;}}}}return _c;};_pListBox._get_first_visible_row=function(){var _a=this._getItemHeight();var _b=(this._p_vscrollbar)?this._p_vscrollbar.pos:0;return _a?Math.floor(_b/_a):0;};_pListBox._get_last_visible_row=function(_a){var _b=this._getInnerdatasetInfo("_rowcount");var _c=_a?this._page_rowcount-1:this._page_rowcount_min-1;var _d=this._get_first_visible_row()+_c;var _e=_b -1;if(_d>=_e){_d=_e;}return _d;};_pListBox._get_page_from_rowidx=function(_a){var _b=this._page_rowcount;return _b?Math.floor(_a/this._page_rowcount)+1:1;};_pListBox._refreshScroll=function(_a,_b,_c){var _d=this.getElement();if(_d){var _e=_d.scroll_top==undefined?0:_d.scroll_top;var _f,_g,_h;var _i=this._getItemHeight();var _j=this._getInnerdatasetInfo("_rowcount");var _k=this._page_rowcount;var _l=this._vscroll_pos;var _m=this._p_vscrollbar?this._p_vscrollbar.max:0;if(_c){if(_c==nexacro.Event.KEY_PAGE_UP){_l=_l-(_i* _k);if(_l<0){_l=0;}this._p_vscrollbar.set_pos(_l);}else if(_c==nexacro.Event.KEY_PAGE_DOWN){_l=_l+(_i* _k);if(_l>_m){_l=_m;}this._p_vscrollbar.set_pos(_l);}else if(_c==nexacro.Event.KEY_HOME){this._p_vscrollbar.set_pos(0);}else if(_c==nexacro.Event.KEY_END){this._p_vscrollbar.set_pos(_m);}}else{if(_a>=_j){return;}_g=(_a<0?0:_a)* _i;_h=_g+_i;if((_h>this._getClientHeight()+_e)&&_b===0){_f=_e+_i;}else if(_g<_e){_f=_g;}if(this._p_vscrollbar&&_f>=0){this._p_vscrollbar.set_pos(_f);}}}};_pListBox._getNextAccessibilityOrderIndex=function(_a){var _b=this._getInnerdatasetInfo("_rowcount");var _c=this._accessibility_index+_a;if(_c<0||_c>=_b){_c=-1;}return _c;};_pListBox._is_selected=function(_a){return this._select_indexOf(_a)!==-1;};_pListBox._initInnerdatasetInfo=function(){this._innerdataset_info={_rowcount:0,_rows:[],_max_width:0,_max_height:0};};_pListBox._getInnerdatasetInfo=function(_a){if(this._innerdataset_info&&this._innerdataset_info[_a]){if(_a=="_rows"){if(arguments.length==2){return this._innerdataset_info["_rows"][arguments[1]];}}else{return this._innerdataset_info[_a];}}return null;};_pListBox._setInnerdatasetInfoRowCount=function(_a){this._innerdataset_info._rowcount=_a;};_pListBox._setInnerdatasetInfoRowData=function(_a){this._innerdataset_info._rows.push(_a);};_pListBox._setInnerdatasetInfoMaxSize=function(_a,_b){this._innerdataset_info._max_width=_a;this._innerdataset_info._max_height=_b;};nexacro._ListBoxItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Static.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pListBoxItemControl=nexacro._createPrototype(nexacro.Static,nexacro._ListBoxItemControl);nexacro._ListBoxItemControl.prototype=_pListBoxItemControl;_pListBoxItemControl._type_name="ListBoxItemControl";_pListBoxItemControl._p_index="";_pListBoxItemControl._p_value=undefined;_pListBoxItemControl._p_selected=false;_pListBoxItemControl._p_wordWrap="none";_pListBoxItemControl._is_subcontrol=true;_pListBoxItemControl._use_selected_status=true;_pListBoxItemControl._use_readonly_status=true;_pListBoxItemControl._p_accessibilityrole="listboxitem";_pListBoxItemControl._event_list={"onclick":1,"ondblclick":1,"onflingstart":1,"onfling":1,"onflingend":1,"onlbuttondown":1,"onlbuttonup":1,"onlongpress":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onmousedown":1,"onmouseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"onrbuttondown":1,"onrbuttonup":1};_pListBoxItemControl.on_getIDCSSSelector=function(){return "listboxitem";};_pListBoxItemControl._apply_setfocus=function(_a){if(!this._p_parent._is_subcontrol&&this._p_parent._status=="focused"){nexacro.Component.prototype._apply_setfocus.call(this,_a);}};_pListBoxItemControl._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pListBoxItemControl._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f;if(this._displaytext&&this._displaytext!==""){_f=this._displaytext;}else{_f=this._p_text;}var _g=this._getCurrentStyleInheritValue("font");var _h=this._getReferenceAbsoluteFont(_g);var _i=this._getCurrentStyleInheritValue("wordSpacing");var _j=this._getCurrentStyleInheritValue("letterSpacing");var _k=nexacro._getTextSize(_f?_f:"<가",_g,false,undefined,"none",_i,_j,undefined,undefined,undefined,_h);_b+=Math.ceil(this._p_textwidth!=null?this._p_textwidth:_k[0]);_c+=Math.ceil(_k[1]);return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pListBoxItemControl.on_tap_default_action=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;var _h=this._getWindow().findComponent(_a);var _i=_g._selectinfo_list;while(_i.length){var _j=_i[0].obj;if(_j){var _k;if(this._contains(_h)){if(_a){var _l=_g._getCurrentStyleBorder();var _m=_l?_l._getBorderLeftWidth():0;var _n=_l?_l._getBorderTopWidth():0;_b=_b-((_a.scroll_left?_a.scroll_left:0)-_m);_c=_c-((_a.scroll_top?_a.scroll_top:0)-_n);if(_b<0){_b=_m;}if(_c<0){_c=_n;}}var _o=_g._getClientXY(_b,_c);_g.on_fire_onitemclick(_g,_h.index,_h.text,_h.value,undefined,_g._altKey,_g._ctrlKey,_g._shiftKey,_d,_e,_b,_c,_o[0],_o[1]);_k=_j;var _p=_k.index;if(_g._p_multiselect){if(_g._shiftKey===true||_g._ctrlKey===true){_g._select_withmouseevent(_p);}else{_g._do_select(_p,false);}}else{if(_g._changeIndex(_p)){_g.on_apply_index(_p);}else{if(!_j.selected){_j._changeUserStatus("selected",false);}}}}else{if(!_j.selected){_j._changeUserStatus("selected",false);}}}_i.shift();}};_pListBoxItemControl.set_index=function(_a){if(_a!==this._p_index){this._p_index=parseInt(_a,10);}};_pListBoxItemControl.set_value=function(_a){if(_a!==this._p_value){this._p_value=_a;}};_pListBoxItemControl.set_selected=function(_a){if(_a!=this._p_selected){this._p_selected=_a;this.on_apply_selected();}};_pListBoxItemControl.on_apply_selected=function(){var _a=this._p_parent._statusmap?this._p_parent._statusmap['focused']:false;if(this._p_selected){this._changeUserStatus("selected",true);if(_a){this._changeStatus("focused",true);}}else{if(this._status=="focused"){this._changeStatus("focused",false);}this._changeUserStatus("selected",false);}};_pListBoxItemControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_readonly){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pListBoxItemControl.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);};_pListBoxItemControl.on_fire_sys_onflingstart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return false;};_pListBoxItemControl._properties=[{name:"index"},{name:"value"},{name:"selected"},{name:"readonly"}];nexacro._defineProperties(_pListBoxItemControl,_pListBoxItemControl._properties);delete _pListBoxItemControl;}if(!nexacro.Combo){nexacro.ComboCloseUpEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this.id=this.eventid=_b||"oncloseup";this.fromobject=this.fromreferenceobject=_a;this.preindex=_c;this.postindex=_f;this.pretext=_d;this.posttext=_g;this.prevalue=_e;this.postvalue=_h;this.isselect=_i;};var _pComboCloseUpEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ComboCloseUpEventInfo);nexacro.ComboCloseUpEventInfo.prototype=_pComboCloseUpEventInfo;_pComboCloseUpEventInfo._type_name="ComboCloseUpEventInfo";delete _pComboCloseUpEventInfo;nexacro.Combo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=_m;};var _pCombo=nexacro._createPrototype(nexacro.Component,nexacro.Combo);nexacro.Combo.prototype=_pCombo;_pCombo._type_name="Combo";_pCombo._p_comboedit=null;_pCombo._p_dropbutton=null;_pCombo._p_combolist=null;_pCombo._popupcontrol=null;_pCombo._p_value=undefined;_pCombo._p_index=-1;_pCombo._p_text="";_pCombo._p_codecolumn="";_pCombo._p_datacolumn="";_pCombo._p_innerdataset="";_pCombo._p_autoselect=false;_pCombo._p_autoskip=false;_pCombo._initsoftkeyboard=undefined;_pCombo._p_usesoftkeyboard=true;_pCombo._p_displaynulltext="";_pCombo._p_imemode="none";_pCombo._p_readonly=false;_pCombo._p_usecontextmenu=true;_pCombo._p_displayrowcount=undefined;_pCombo._p_buttonsize=undefined;_pCombo._p_itemheight=undefined;_pCombo._p_type="dropdown";_pCombo._p_popuptype="normal";_pCombo._p_popupsize=undefined;_pCombo._p_acceptvaluetype="allowinvalid";_pCombo._is_close_popup_by_select=false;_pCombo._isFiredOnInput=false;_pCombo._innerdataset="";_pCombo._filtereddataset="";_pCombo._default_value=undefined;_pCombo._default_text="";_pCombo._default_index=-1;_pCombo._has_inputElement=true;_pCombo._processing_keyfilter=false;_pCombo._use_readonly_status=true;_pCombo._is_editable_control=true;_pCombo._event_list={"oneditclick":1,"onitemclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmousemove":1,"onmouseleave":1,"onmove":1,"onsize":1,"canitemchange":1,"onitemchanged":1,"oninput":1,"onmousewheel":1,"oncontextmenu":1,"ondropdown":1,"oncloseup":1,"oninnerdatachanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pCombo._p_accessibilityrole="combobox";_pCombo.on_create_contents=function(){var _a=this.getElement();if(_a){this._p_comboedit=new nexacro._ComboEditControl("comboedit",0,0,0,0,null,null,null,null,null,null,this,this._onlydisplay);this._p_dropbutton=new nexacro._ComboButtonControl("dropbutton",0,0,0,0,null,null,null,null,null,null,this);this._p_comboedit.createComponent();this._p_dropbutton.createComponent();}};_pCombo.on_created_contents=function(_a){if(this._p_innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this._p_innerdataset);this.on_apply_innerdataset(this._innerdataset);}this.on_apply_autoskip(this._p_autoskip);this.on_apply_displaynulltext(this._p_displaynulltext);this.on_apply_imemode(this._p_imemode);this.on_apply_autoselect(this._p_autoselect);this.on_apply_usecontextmenu(this._p_usecontextmenu);if(!this._onlydisplay){var _b=(this._p_value==undefined&&this._p_index==-1);if(_b){this.on_apply_value(this._p_value);}else{if(this._p_index>-1){this.on_apply_index(this._p_index);}else if(this._p_value!==undefined){this.on_apply_value(this._p_value);}else if(this._p_text!==""){this.on_apply_text(this._p_text);}}}this.redraw();this._recalcLayout();this._setDefaultProps(this._p_index,this._p_value,this._p_text);this._setEventHandlerToComboEdit();this._setEventHandlerToDropButton();this._p_comboedit.on_created(_a);this._p_dropbutton.on_created(_a);if(this._p_type=="dropdown"){this._p_comboedit._setReadonlyView(true);}if(nexacro._enableaccessibility){this._on_created_accessibility_contents(_a);}if(this._p_comboedit){this._p_comboedit.on_apply_usesoftkeyboard();}this.on_apply_type(this._p_type);};_pCombo.on_destroy_contents=function(){if(this._p_comboedit){this._p_comboedit.destroy();this._p_comboedit=null;}if(this._p_dropbutton){this._p_dropbutton.destroy();this._p_dropbutton=null;}if(this._p_combolist){this._p_combolist.destroy();this._p_combolist=null;}if(this._popupcontrol){this._popupcontrol.destroy();this._popupcontrol=null;}var _a=this._getWindow();if(_a){_a._releaseCaptureLock(this);}this._removeEventHandlerToInnerDataset();};_pCombo._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);this._innerdataset=null;}if(this._filtereddataset){this._filtereddataset.destroy();this._filtereddataset=null;}};_pCombo.on_create_contents_command=function(){this.on_apply_autoskip(this._p_autoskip);this.on_apply_displaynulltext(this._getStringResourceProperty(this._p_displaynulltext));this.on_apply_imemode(this._p_imemode);this.on_apply_autoselect(this._p_autoselect);this.on_apply_usecontextmenu(this._p_usecontextmenu);this.on_apply_usesoftkeyboard();var _a=(this._p_value==undefined&&this._p_index==-1);if(_a){this.on_apply_value(this._p_value);}else{if(this._p_index>-1){this.on_apply_index(this._p_index);}else if(this._p_value!==undefined){this.on_apply_value(this._p_value);}else if(this._p_text!==""){this.on_apply_text(this._p_text);}}this.redraw();this._recalcLayout();this._setEventHandlerToComboEdit();this._setEventHandlerToDropButton();var _b="";if(this._p_comboedit){this._p_comboedit.on_apply_usesoftkeyboard();_b+=this._p_comboedit.createCommand();}if(this._p_dropbutton){_b+=this._p_dropbutton.createCommand();}return _b;};_pCombo.on_attach_contents_handle=function(_a){if(this._p_comboedit){this._p_comboedit.attachHandle(_a);if(this._p_type=="dropdown"){this._p_comboedit._setReadonlyView(true);}}if(this._p_dropbutton){this._p_dropbutton.attachHandle(_a);this._p_dropbutton._setAccessibilityStatHidden(true);}if(nexacro._enableaccessibility){this._on_attach_accessibility_contents_handle(_a);}this._setDefaultProps(this._p_index,this._p_value,this._p_text);this.on_apply_type(this._p_type);};_pCombo.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pCombo.on_change_containerPos=function(_a,_b){this._recalcLayout();};_pCombo._getInputElement=function(){return this._p_comboedit?this._p_comboedit._getInputElement():null;};_pCombo._apply_setfocus=function(_a){var _b=this._p_comboedit;if(_b){_b._changeStatus("focused",true);if(nexacro._isTouchInteraction&&nexacro._SupportTouch){if(this._p_type=="dropdown"){var _c=this.getElement();if(_c){_c.setElementFocus(true);}else{_b._on_focus(true,_a);}}else{_b._on_focus(true,_a);}}else{_b._on_focus(true,_a);}}};_pCombo.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();if(this._p_comboedit){this._p_comboedit._setEnable(_a);}if(this._p_dropbutton&&!this._isReadOnly()){this._p_dropbutton._setEnable(_a);}if(this._p_combolist){this._p_combolist._setEnable(_a);}};_pCombo.on_apply_prop_cssclass=function(){if(this._p_comboedit){this._p_comboedit.on_apply_cssclass();}if(this._p_dropbutton){this._p_dropbutton.on_apply_cssclass();}if(this._p_combolist){this._p_combolist.on_apply_cssclass();}};_pCombo.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this.on_apply_displaynulltext(this._getStringResourceProperty(this._p_displaynulltext));};_pCombo.on_init_bindSource=function(_a,_b,_c){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}this._setValue(undefined);this._setIndex(-1);this._setText("");this.redraw();};_pCombo.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}var _e=-1;var _f="";var _g=_b.getColumn(_c,_d);_g=this._convertValueType(_g,true);if(this._p_value==_g){return;}this._setValue(_g);_b=this._selectDataset();if(_b){_e=this._getIndexFromValue(_b,_g);if(_e>-1){_f=this._getItemText(_e);}this._setIndex(_e);this._setText(_f);this._updateAccessibilityLabel();}this.redraw();this._setDefaultProps(this._p_index,this._p_value,this._p_text);}};_pCombo.on_getBindableProperties=function(){return "value";};_pCombo._getDragData=function(){var _a=this._p_comboedit;if(_a){return _a.getSelectedText();}};_pCombo._getDlgCode=function(_a,_b,_c,_d){if((_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN)&&(_c||_b)){return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:true};}return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:this._want_arrows};};_pCombo._getAccessibilityReadLabel=function(_a){var _b=nexacro.Component.prototype._getAccessibilityReadLabel.call(this);if(_a&&this._p_comboedit._input_element&&this._status!="focus"){if(!this._p_comboedit._input_element._wantAccessibilityAdditionalLabel||!this._p_comboedit._input_element._wantAccessibilityAdditionalLabel()){_b=this._p_text+" "+_b;}}return _b;};_pCombo.set_text=function(_a){_a=nexacro._toString(_a);if(this._p_text!=_a){this._p_text=_a;this.on_apply_text(_a);}};_pCombo.on_apply_text=function(_a){{var _b=this._p_value;var _c=this._selectDataset();if(!_c||(!this._p_datacolumn&&!this._p_codecolumn)){if(_b){this._setEditValue(_a);}else{if(this._p_displaynulltext||_a==""){this._setEditValue(undefined);}else{this._setEditValue(_a);}}}else{var _d=this._getIndexFromText(_c,_a);this._setIndex(_d);if(_d>-1){this._setValue(this._getItemValue(_d));}else{this._setValue(undefined);this._setText("");}this.redraw();}this._setDefaultProps(this._p_index,this._p_value,this._p_text);}};_pCombo.set_value=function(_a){if(!this._is_created&&(_a===undefined||_a===null)){return;}_a=this._convertValueType(_a);if(this._p_value!==_a){if(this._p_acceptvaluetype=="ignoreinvalid"){var _b=-1;var _c=this._selectDataset();if(_c){_b=this._getIndexFromValue(_c,_a);if(_b<0){return;}}}if(this.applyto_bindSource("value",_a)){this._p_value=_a;this.on_apply_value(_a);this.redraw();}}};_pCombo.on_apply_value=function(_a){{var _b=-1;var _c="";var _d=this._selectDataset();if(_d){_b=this._getIndexFromValue(_d,_a);if(_b>-1){_c=this._getItemText(_b);}this._setIndex(_b);this._setText(_c);if(nexacro._enableaccessibility){this._updateAccessibilityLabel();}}this._setDefaultProps(this._p_index,this._p_value,this._p_text);}};_pCombo.set_index=function(_a){if(isNaN(_a= +_a)||_a<-1){return;}if(this._p_index!=_a){this._p_index=_a;this.on_apply_index(_a);this.redraw();}};_pCombo.on_apply_index=function(_a){var _b;var _c="";var _d=this._innerdataset;if(_d){if(_a!==null&&_a>=0&&_a<_d.getRowCount()){_b=this._getItemValue(_a);_c=this._getItemText(_a);}else{_a=-1;}if(this.applyto_bindSource("value",_b)){this._setValue(_b);this._setText(_c);if(this._p_index!=_a){this._setIndex(-1);}}else{var _e="restore";var _f=this._getForm();var _g=_f._bind_manager._findBindItem(this,"value");if(_g){var _h=_g._dataset;if(_h.rowcount>0){if(_b==this._p_value){if(_c==this._p_text){_e="change";}}}}if(_e=="restore"){this._setIndex(this._default_index);this._setValue(this._default_value);this._setText(this._default_text);}else if(_e=="change"){this._setIndex(_a);this._setValue(_b);this._setText(_c);}}}else{this._setIndex(-1);this._setValue(undefined);this._setText("");}this._setDefaultProps(this._p_index,this._p_value,this._p_text);};_pCombo.set_displaynulltext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this._p_displaynulltext!=_a){this._p_displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pCombo.on_apply_displaynulltext=function(_a){var _b=this._p_comboedit;if(_b){_b.set_displaynulltext(_a);}};_pCombo.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly();}};_pCombo._isReadOnly=function(){return this._p_readonly;};_pCombo.on_apply_readonly=function(){var _a=this._isReadOnly();this._changeStatus("readonly",_a);var _b=this._p_comboedit;if(_b){if(!this._onlydisplay){_b.set_readonly(_a);}else{_b._changeStatus("readonly",_a);}if(this._p_type=="dropdown"){_b._setReadonlyView(true);if(nexacro._enableaccessibility){_b._setAccessibilityFlagReadOnly(_a);}}else{if(_a==true){_b._setReadonlyView(true);}else{_b._setReadonlyView(false);}}}var _c=this._p_dropbutton;if(_c){_c._setEnable(this._isEnable()&&!_a);}var _d=this._p_combolist;if(_d){_d.set_readonly(_a);}};_pCombo.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoselect!=_a){this._p_autoselect=_a;this.on_apply_autoselect(_a);}};_pCombo.on_apply_autoselect=function(_a){var _b=this._p_comboedit;if(_b){if(this._p_type!="dropdown"){_b.set_autoselect(_a);}else{_b.set_autoselect(false);}}};_pCombo.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoskip!=_a){this._p_autoskip=_a;this.on_apply_autoskip(_a);}};_pCombo.on_apply_autoskip=function(_a){var _b=this._p_comboedit;if(_b){_b.set_autoskip(_a);}};_pCombo.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_usesoftkeyboard){this._p_usesoftkeyboard=_a;if(!this._initsoftkeyboard){this._initsoftkeyboard=true;}this.on_apply_usesoftkeyboard();}};_pCombo.on_apply_usesoftkeyboard=function(){if(this._p_comboedit){this._p_comboedit.set_usesoftkeyboard(this._getUseSoftKeyboardValue(this._initsoftkeyboard));}};_pCombo.set_imemode=function(_a){var _b=["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"];if(_b.indexOf(_a)==-1){return;}if(this._p_imemode!=_a){this._p_imemode=_a;this.on_apply_imemode(_a);}};_pCombo.on_apply_imemode=function(_a){var _b=this._p_comboedit;if(_b){_b.set_imemode(_a);}};_pCombo.set_type=function(_a){var _b=["dropdown","search","filter","filterlike","caseisearch","caseifilter","caseifilterlike"];if(_b.indexOf(_a)==-1){return;}if(this._p_type!=_a){this._p_type=_a;this.on_apply_type(_a);}};_pCombo.on_apply_type=function(_a){if(this._filtereddataset){this._filtereddataset.filter("");}this.on_apply_readonly();this.on_apply_autoselect(this._p_autoselect);};_pCombo.set_popuptype=function(_a){var _b=["normal","center","system","none"];if(_b.indexOf(_a)==-1){return;}if(this._p_popuptype!=_a){this._p_popuptype=_a;this.on_apply_popuptype(_a);}};_pCombo.on_apply_popuptype=function(_a){var _b=this._popupcontrol;if(_b){_b._setType(_a);}};_pCombo.set_popupsize=function(_a){if(this._p_popupsize!=_a){this._p_popupsize=_a;}};_pCombo.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usecontextmenu!=_a){this._p_usecontextmenu=_a;this.on_apply_usecontextmenu(_a);}};_pCombo.set_acceptvaluetype=function(_a){var _b=["allowinvalid","ignoreinvalid"];if(_b.indexOf(_a)==-1){return;}this._p_acceptvaluetype=_a;};_pCombo.on_apply_usecontextmenu=function(_a){var _b=this._p_comboedit;if(_b){_b.set_usecontextmenu(_a);}};_pCombo.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(this._p_innerdataset!=_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");var _b=this._findDataset(_a);this._innerdataset=_b?_b:"";this._p_innerdataset=_a;}this.on_apply_innerdataset(this._innerdataset);}else if(this._p_innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this._p_innerdataset);this.on_apply_innerdataset(this._innerdataset);}};_pCombo.on_apply_innerdataset=function(_a){if(this._p_combolist){this._p_combolist.setInnerDataset(_a);}if(_a){_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}if(this._p_index>-1){this._recheckIndex();}else if(this._p_value!==undefined){this._recheckValue();}else if(this._p_text!==""){this._recheckText();}this.redraw();}};_pCombo.set_codecolumn=function(_a){if(this._p_codecolumn!=_a){this._p_codecolumn=_a;this.on_apply_codecolumn(_a);}};_pCombo.on_apply_codecolumn=function(_a){if(this._p_combolist){this._p_combolist.set_codecolumn(_a);}if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}if(this._is_created){if(this._p_index>-1){this._recheckIndex();}else if(this._p_value!==undefined){this._recheckValue();}else if(this._p_text!==""){this._recheckText();}this._setDefaultProps(this._p_index,this._p_value,this._p_text);this.redraw();}};_pCombo.set_datacolumn=function(_a){if(this._p_datacolumn!=_a){this._p_datacolumn=_a;this.on_apply_datacolumn(_a);}};_pCombo.on_apply_datacolumn=function(_a){var _b=this._p_combolist;if(_b){_b.set_datacolumn(this._p_datacolumn);}if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}if(this._is_created){if(this._p_index>-1){this._recheckIndex();}else if(this._p_value!==undefined){this._recheckValue();}else if(this._p_text!==""){this._recheckText();}this._setDefaultProps(this._p_index,this._p_value,this._p_text);this.redraw();}};_pCombo.set_buttonsize=function(_a){if(this._p_buttonsize!=_a){this._p_buttonsize=_a;this.on_apply_buttonsize(_a);}};_pCombo.on_apply_buttonsize=function(_a){this._recalcLayout();};_pCombo.set_displayrowcount=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)||_a<0){return;}}if(this._p_displayrowcount!=_a){this._p_displayrowcount=_a;}};_pCombo.set_itemheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_itemheight!=_a){this._p_itemheight=_a;this.on_apply_itemheight(_a);}};_pCombo.on_apply_itemheight=function(_a){var _b=this._p_combolist;if(_b){_b.set_itemheight(_a);}};_pCombo.set_visible=function(_a){nexacro.Component.prototype.set_visible.call(this,_a);if(!this._p_visible&&this._isPopupVisible()){this._closePopup();}};_pCombo.set_scrollbarbarminsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this._p_scrollbarbarminsize!=_a){this._p_scrollbarbarminsize=_a;var _b=this._p_combolist;if(_b){_b.set_scrollbarbarminsize(_a);}}};_pCombo.set_scrollbardecbuttonsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this._p_scrollbardecbuttonsize!=_a){this._p_scrollbardecbuttonsize=_a;var _b=this._p_combolist;if(_b){_b.set_scrollbardecbuttonsize(_a);}}};_pCombo.set_scrollbarbaroutsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this._p_scrollbarbaroutsize!=_a){this._p_scrollbarbaroutsize=_a;var _b=this._p_combolist;if(_b){_b.set_scrollbarbaroutsize(_a);}}};_pCombo.set_scrollbarincbuttonsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this._p_scrollbarincbuttonsize!=_a){this._p_scrollbarincbuttonsize=_a;var _b=this._p_combolist;if(_b){_b.set_scrollbarincbuttonsize(_a);}}};_pCombo.set_scrollbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this._p_scrollbarsize!=_a){this._p_scrollbarsize=_a;var _b=this._p_combolist;if(_b){_b.set_scrollbarsize(_a);}}};_pCombo.set_scrollbartrackbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this._p_scrollbartrackbarsize!=_a){this._p_scrollbartrackbarsize=_a;var _b=this._p_combolist;if(_b){_b.set_scrollbartrackbarsize(_a);}}};_pCombo._properties=[{name:"value"},{name:"index"},{name:"text"},{name:"codecolumn"},{name:"datacolumn"},{name:"innerdataset"},{name:"autoselect"},{name:"autoskip"},{name:"usesoftkeyboard"},{name:"displaynulltext"},{name:"imemode"},{name:"readonly"},{name:"usecontextmenu"},{name:"displayrowcount"},{name:"buttonsize"},{name:"itemheight"},{name:"type"},{name:"popuptype"},{name:"popupsize"},{name:"acceptvaluetype"},{name:"scrollbarbarminsize"},{name:"scrollbardecbuttonsize"},{name:"scrollbarsize"},{name:"scrollbarbaroutsize "},{name:"scrollbarincbuttonsize"},{name:"scrollbartrackbarsize"},{name:"combolist",readonly:true},{name:"comboedit",readonly:true},{name:"dropbutton",readonly:true}];nexacro._defineProperties(_pCombo,_pCombo._properties);_pCombo.dropdown=function(){var _a;if(!this._p_enable||this._p_readonly||!this._p_visible){return false;}var _b=this._p_comboedit;var _c=_b?_b._input_element:null;if(_c&&_c._is_accept_touch&&!_c._is_accept_touch()){return false;}if(!this.isDropdown()){_a=this._selectDataset(true);if((this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike")&&_a.rowcount==0){_a=this._innerdataset;}}else{return false;}var _d=this._find_lastFocused();if(_d instanceof nexacro.Div){_d=_d._getLastFocused();}if(_d!=this){this.setFocus(false);}this._showPopup(_a,this._p_index,1);};_pCombo.isDropdown=function(){return this._isPopupVisible();};_pCombo.getCaretPos=function(){if(this._p_readonly){return -1;}var _a=this._p_comboedit;if(_a){return _a.getCaretPos();}return -1;};_pCombo.getSelect=function(){if(this.getElement()&&this._p_comboedit){return this._p_comboedit.getSelect();}return [this.getCaretPos(),this.getCaretPos()];};_pCombo.setSelect=function(_a,_b){var _c=this._p_comboedit;if(_c){return this._p_comboedit.setSelect(_a,_b);}return false;};_pCombo.getSelectedText=function(){if(this.getElement()&&this._p_comboedit){return this._p_comboedit.getSelectedText();}return "";};_pCombo.setSelectedText=function(_a){if(this.getElement()&&this._p_comboedit&&this._p_type!="dropdown"){return this._p_comboedit.setSelectedText(_a);}};_pCombo.getInnerDataset=function(){return this._innerdataset;};_pCombo.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";this.on_apply_innerdataset(null);}else if(_a instanceof nexacro.Dataset||(typeof _a=="object"&&_a._type_name=="Dataset")){this._innerdataset=_a;this._p_innerdataset=_a.id;this.on_apply_innerdataset(_a);if(this._is_created){this._recheckIndex();this.redraw();}}};_pCombo.getCount=function(){if(this.getElement()){if(this._p_combolist){return this._p_combolist.getCount();}else if(this._innerdataset){return this._innerdataset.getRowCount();}}return 0;};_pCombo.redraw=function(){if(this._p_text||!nexacro._isNull(this._p_value)){if(this._onlydisplay){if(this._p_index<0&&this._p_text==""){this._setEditValue(undefined);}else{this._setEditValue(this._p_text);}}else{if(this._p_displaynulltext&&this._p_text==""){this._setEditValue(undefined);}else{this._setEditValue(this._p_text);}}}else{this._setEditValue(undefined);}this._setDefaultCaret();};_pCombo.updateToDataset=function(){return this.applyto_bindSource("value",this._p_value);};_pCombo._on_activate=function(){nexacro.Component.prototype._on_activate.call(this);var _a=this._p_comboedit;if(_a){nexacro.Edit.prototype._on_activate.call(_a);}};_pCombo._on_dropdown=function(){if(this._p_readonly){return;}var _a=this._p_comboedit;var _b=_a?_a._input_element:null;if(_b&&_b._is_accept_touch&&!_b._is_accept_touch()){return false;}var _c=this._selectDataset(true);var _d=this._p_index;if(this._isPopupVisible()){this._closePopup();this._setEditValue(this._getItemText(this._p_index));}else{var _a=this._p_comboedit;if(_a){_a.setSelect(0,0);}if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._clearFilteredDataset();}this._showPopup(_c,_d,1);}};_pCombo._on_value_change=function(_a,_b,_c,_d,_e,_f){if(!this.on_fire_canitemchange(this,_a,_b,_c,_d,_e,_f)){return false;}var _g=this._selectDataset();var _h=_g?this._getIndexFromValue(_g,_f):this._p_index;var _i=this.applyto_bindSource("value",_f);if(_i){var _j=_g?this._getIndexFromValue(_g,_f):this._p_index;if(_h==_j){this._p_value=_f;this._p_text=_e;this._p_index=_d;}}else{if(_c==_f){if(_a!=_d){this._p_value=_f;this._p_text=_e;this._p_index=_d;}}else{return false;}}if(nexacro._enableaccessibility){this._updateAccessibilityLabel();}this.on_fire_onitemchanged(this,_a,_b,_c,_d,_e,_f);return true;};_pCombo._on_dataset_onvaluechanged=function(_a,_b){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}this._recheckValue();this.redraw();if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pCombo._on_dataset_onrowsetchanged=function(_a,_b){if(_b.reason==nexacro.NormalDataset.REASON_FILTER){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}this._recheckValue();this.redraw();return;}else if(_b.reason==nexacro.NormalDataset.REASON_ASSIGN){this.set_index(-1);this._recheckIndex();this.redraw();}else if(_b.reason==nexacro.NormalDataset.REASON_COPY||_b.reason==nexacro.NormalDataset.REASON_ENABLEEVENT){if(this._p_index>-1){this._recheckIndex();}else if(this._p_value!==undefined){this._recheckValue();}else if(this._p_text!==""){this._recheckText();}this.redraw();this._setDefaultProps(this._p_index,this._p_value,this._p_text);}else if(_b.reason==nexacro.NormalDataset.REASON_DELETE){if(this._p_index<_b.row){return;}if(this._p_index==_b.row){this.set_index(-1);}else if(this._p_index>_b.row){this.set_index(this._p_index-1);}this._recheckIndex();this.redraw();}};_pCombo._on_edit_onlbuttondown=function(_a,_b){if(this._p_readonly||(nexacro._isTouchInteraction&&nexacro._SupportTouch)){return;}var _c=this._p_comboedit;var _d=_c?_c._input_element:null;if(_d&&_d._is_accept_touch&&!_d._is_accept_touch()){return false;}var _e=this._selectDataset(true);var _f=this._p_index;if(this._isPopupVisible()){this._closePopup();this._setEditValue(this._getItemText(this._p_index));}else{if(this._p_type=="dropdown"){this._showPopup(_e,_f,1);}}};_pCombo._on_edit_onkeydown=function(_a,_b){var _c=this._p_combolist;if(this._p_readonly){return false;}var _d=this._selectDataset();var _e=this._p_datacolumn;var _f=this._p_codecolumn;if(!_d||(!_e&&!_f)){return;}var _g=_b.keycode;var _h=this._default_value;var _i=this._default_text;var _j=this._default_index;var _k=this._p_value;var _l=this._p_text;var _m=this._p_index;var _n;var _o;var _p=null;var _q="";var _r=_d.getRowCount();var _s=nexacro._enableaccessibility;if(this._isPopupVisible()){_p=_c._get_rowobj_status("mouseover","status")||_c._get_rowobj_status("selected","userstatus");if(_p){_m=_p.index;}}if(_g==nexacro.Event.KEY_ESC){if(this._isPopupVisible()){_q=this._getItemText(this._p_index);this._closePopup();this._setEditValue(_q);}}else if(_g==nexacro.Event.KEY_UP){_n=_m -1;if(this._isPopupVisible()){if(!_b.altkey){if(_n<0){_n=0;}_q=_d.getColumn(_n,_e||_f);this._setEditValue(_q);_c._refreshScroll(_n,1);_c._change_status_item_from_key(_m,_n);}}else{if(!_s||_b.ctrlkey){if(_n<0){_n=0;}if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){_o=this._getRawIndex(_d,_n);_o=(_o==-1)?_n:_o;this._clearFilteredDataset();_n=_o;}if(this._p_index!=_n){_k=this._getItemValue(_n);_l=this._getItemText(_n);_m=_n;if(!this._on_value_change(_j,_i,_h,_m,_l,_k)){_k=_h;_l=_i;_m=_j;}this._setDefaultProps(_m,_k,_l);this.redraw();}}}}else if(_g==nexacro.Event.KEY_DOWN){_n=_m+1;if(this._isPopupVisible()){if(!_b.altkey){if(_n<_r){_q=_d.getColumn(_n,_e||_f);_q=_q==undefined?"":_q;this._setEditValue(_q);_c._refreshScroll(_n,0);_c._change_status_item_from_key(_m,_n);}}}else{var _t=this._p_comboedit;var _u=_t?_t._input_element:null;if(_b.altkey&&(!_u||(_u&&(!_u._is_accept_touch||(_u._is_accept_touch&&_u._is_accept_touch()))))){this._showPopup(_d,_m,1);}else if(!_b.altkey){if(!_s||_b.ctrlkey){if(_n>=_r){_n=_r -1;}if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){_o=this._getRawIndex(_d,_n);_o=(_o==-1)?_n:_o;this._clearFilteredDataset();_n=_o;}if(this._p_index!=_n){_k=this._getItemValue(_n);_l=this._getItemText(_n);_m=_n;if(!this._on_value_change(_j,_i,_h,_m,_l,_k)){_k=_h;_l=_i;_m=_j;}this._setDefaultProps(_m,_k,_l);this.redraw();}}}}}else if(_g==nexacro.Event.KEY_ENTER){if(_m>=0){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){_o=this._getRawIndex(_d,_m);_o=(_o==-1)?_m:_o;_d.set_filterstr("");}else{_o=_m;}}else{_o=_m;}if(this._p_index!=_o){_k=this._getItemValue(_o);_l=this._getItemText(_o);_m=_o;if(!this._on_value_change(_j,_i,_h,_m,_l,_k)){this._setEditValue(this._p_text);_k=_h;_l=_i;_m=_j;}}this.redraw();if(this._isPopupVisible()){this._is_close_popup_by_select=true;this._closePopup();this._is_close_popup_by_select=false;if(this._p_autoskip){this._setFocusToNextComponent();}}this._setDefaultProps(_m,_k,_l);}else if(_g==nexacro.Event.KEY_PAGE_UP){if(this._isPopupVisible()){var _v=_m;if(_v<0){_v=0;}_n=_m-_c._page_rowcount;if(_n<=0){_n=0;}_q=_d.getColumn(_n,_e||_f);_q=_q==undefined?"":_q;this._setEditValue(_q);_c._refreshScroll(null,null,_g);_c._change_status_item_from_key(_m,_n);}}else if(_g==nexacro.Event.KEY_PAGE_DOWN){if(this._isPopupVisible()){var _v=_m;if(_v<0){_v=0;}_n=_v+_c._page_rowcount;if(_n>=_r){_n=_r -1;}_q=_d.getColumn(_n,_e||_f);_q=_q==undefined?"":_q;this._setEditValue(_q);_c._refreshScroll(null,null,_g);_c._change_status_item_from_key(_v,_n);}}else if(_g==nexacro.Event.KEY_HOME){if(this._isPopupVisible()&&this._p_type=="dropdown"){var _v=_m;if(_v<0){_v=0;}_n=0;_q=_d.getColumn(_n,_e||_f);_q=_q==undefined?"":_q;this._setEditValue(_q);_c._refreshScroll(null,null,_g);_c._change_status_item_from_key(_v,_n);}}else if(_g==nexacro.Event.KEY_END){if(this._isPopupVisible()&&this._p_type=="dropdown"){var _v=_m;if(_v<0){_v=0;}_n=_r -1;_q=_d.getColumn(_n,_e||_f);_q=_q==undefined?"":_q;this._setEditValue(_q);_c._refreshScroll(null,null,_g);_c._change_status_item_from_key(_v,_n);}}};_pCombo._on_edit_oninput=function(_a,_b){if(this._p_readonly||!this._isEnable()){return false;}this._isFiredOnInput=true;this.on_fire_oninput();var _c=this._p_comboedit;var _d=_c?_c._input_element:null;if(_d&&(_d._is_accept_touch&&!_d._is_accept_touch())){if(this._isPopupVisible()){this._closePopup();}this._isFiredOnInput=false;return false;}var _e=this._selectDataset();if(_e&&_c._processing_keyfilter){var _f=this._p_datacolumn||this._p_codecolumn;var _g=_c._p_text;var _h=this._p_type;if(_h!="dropdown"){if(!this._p_combolist){this._createPopupListBoxControl(_e);}}switch(_h){case "search":case "caseisearch":var _i;if(this._p_type=="caseisearch"){_g=new nexacro.ExprParser()._transferWhitespace(_g);_i=_e.findRowExpr(_f+".match(/^"+_g+"/i)");}else{_i=_e.findRowAs(_f,_g);}if(_i>=0){this._showPopup(_e,_i);}else{if(this._isPopupVisible()){this._closePopup();}}break;case "filter":case "filterlike":case "caseifilter":case "caseifilterlike":var _j;var _k="";var _l="";var _m=_g.length;for(var _p=0;_p<_m;_p++ ){_j=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;var _n=_g.charAt(_p);if(_j.test(_n)){_k+="\\";}_k+=_n;}_l=new nexacro.ExprParser()._transferWhitespace(_k);if(this._p_type=="filter"){_e.set_filterstr(_f+".match(/^("+_l+")/)");}else if(this._p_type=="filterlike"){_e.set_filterstr(_f+".indexOf('"+_k+"') > -1");}else if(this._p_type=="caseifilter"){_e.set_filterstr(_f+".match(/^("+_l+")/i)");}else{_e.set_filterstr(_f+".match(/("+_l+")/i)");}if(_g&&_e.getRowCount()>0){this._showPopup(_e,0);var _o=this._getWindow();if(_o){if(nexacro._Browser=="Runtime"&&(nexacro._SystemType.toLowerCase()=="win32"||nexacro._SystemType.toLowerCase()=="win64")){nexacro._flushCommand(_o);}}}else{if(this._isPopupVisible()){this._closePopup();}}break;default:break;}}this._isFiredOnInput=false;};_pCombo._on_edit_oneditclick=function(_a,_b){this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_a,_a,_b.metakey);};_pCombo._on_edit_mobile_oneditclick=function(_a,_b){if(!this._p_readonly){var _c=this._p_comboedit;var _d=_c?_c._input_element:null;if(_d&&_d._is_accept_touch&&!_d._is_accept_touch()){}else{var _e=this._selectDataset(true);var _f=this._p_index;if(this._isPopupVisible()){this._closePopup();this._setEditValue(this._getItemText(this._p_index));}else{if(this._p_type=="dropdown"){this._showPopup(_e,_f,1);}}}}this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_a,_a,_b.metakey);};_pCombo._on_drop_onlbuttondown=function(_a,_b){if(_b.button=="lbutton"){this._on_dropdown();}};_pCombo._on_drop_mobile_onclick=function(_a,_b){this._on_dropdown();};_pCombo._on_drop_onclick=function(_a,_b){if(_b.button=="touch"){this._on_dropdown();}};_pCombo._on_list_onitemclick=function(_a,_b){if(!this._p_combolist||!this._p_comboedit){return false;}var _c=this._p_value;var _d=this._p_text;var _e=this._p_index;var _f=_b.index;var _g=_b.itemtext;var _h=_b.itemvalue;this.on_fire_onitemclick(_a,_f,_g,_h,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.metakey);if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){var _i=this._selectDataset();_f=this._getRawIndex(_i,_b.index);if(_f!=this._p_index){_g=this._getItemText(_f);_h=this._getItemValue(_f);}}this._is_close_popup_by_select=true;if(_f!=this._p_index){if(!this._on_value_change(_e,_d,_c,_f,_g,_h)){this._p_value=_h=_c;this._p_text=_g=_d;this._p_index=_f=_e;}this.redraw();if(this._isPopupVisible()){this._closePopup();if(this._p_autoskip){this._setFocusToNextComponent();}}this._setDefaultProps(_f,_h,_g);}else{this.redraw();if(this._isPopupVisible()){this._closePopup();}}this._is_close_popup_by_select=false;};_pCombo._on_list_oncloseup=function(_a,_b){var _c=this._getWindow();if(_c&&this._track_capture){_c._releaseCaptureLock(this);}if(!this._isFiredOnInput){if(this._p_displaynulltext!=""&&nexacro._isNull(this._p_value)){this._setEditValue(undefined);}else{this._setEditValue(this._p_text);}}this._changeStatus("mouseover",false);this._p_comboedit._changeStatus("mouseover",false);this._p_dropbutton._changeStatus("mouseover",false);this.on_fire_oncloseup(this,this._default_index,this._default_text,this._default_value,this._p_index,this._p_text,this._p_value,this._is_close_popup_by_select);};_pCombo.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){this._changeStatus("focused",true);if(nexacro._enableaccessibility){this._setAccessibilityStatFocus(_b);}this._apply_setfocus(_b);};_pCombo.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);var _c=this._p_comboedit;if(_c){_c._changeStatus("focused",false);if(nexacro._enableaccessibility){if(nexacro._Browser=="Runtime"){_c._is_subfocused=false;}}if(this._p_text!=this._p_comboedit.text){_c.setCaretPos(0);}}this.redraw();if(this._isPopupVisible()){this._closePopup();}};_pCombo.on_fire_sys_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this._p_readonly){return false;}var _p=this._selectDataset();if(!_p){return false;}var _q=this._find_lastFocused();if((!this._is_subcontrol&&this!=_q)||(this._is_subcontrol&&this._getRootComponent(this)!=_q)){return false;}var _r=this._popupcontrol;if(!_r||!_r._is_popup()){var _s=this._p_index;var _t=0;if(_b>0){if(_s>0){_t=_s -1;}}else{_t=_s+1;}if(this._p_index!=_t&&_t<_p.getRowCount()){var _u=this._p_index;var _v=this._p_text;var _w=this._p_value;var _x=_t;var _y=this._getItemText(_t);var _z=this._getItemValue(_t);var _aa=this.on_fire_canitemchange(this,_u,_v,_w,_x,_y,_z);if(_aa){this.set_index(_t);this.on_fire_onitemchanged(this,_u,_v,_w,_x,_y,_z);this._setDefaultProps(this._p_index,this._p_value,this._p_text);}}}return true;};_pCombo.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=false;if(this._isPopupVisible()){var _e=this._p_combolist;var _f=null;var _g=_e._getContentsCount();if(_g){if(_a){_e._overeditemindex++ ;}else{_e._overeditemindex-- ;}if(_e._overeditemindex<0||_e._overeditemindex>_g -1){if(this._isPopupVisible()){this._closePopup();}_e._overeditemindex=-1;}else{_f=_e._getItem(_e._overeditemindex);}}if(_f){_d=true;_f._setAccessibilityNotifyEvent();}}return _d;};_pCombo.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);return (this._popupcontrol&&this._popupcontrol._is_popup())?true:false;};_pCombo.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.prototype.on_fire_sys_onfling.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);return (this._popupcontrol&&this._popupcontrol._is_popup())?true:false;};_pCombo.on_fire_oneditclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.oneditclick&&this.oneditclick._has_handlers){var _p=new nexacro.EditClickEventInfo(_a,"oneditclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o);return this.oneditclick._fireEvent(this,_p);}return true;};_pCombo.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.onitemclick&&this.onitemclick._has_handlers){var _p=new nexacro.ItemClickEventInfo(_a,"onitemclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this.onitemclick._fireEvent(this,_p);}return false;};_pCombo.on_fire_canitemchange=function(_a,_b,_c,_d,_e,_f,_g){if(this.canitemchange&&this.canitemchange._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"canitemchange",_b,_c,_d,_e,_f,_g);var _i=this.canitemchange._fireCheckEvent(this,_h);return nexacro._toBoolean(_i);}return true;};_pCombo.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(this.onitemchanged&&this.onitemchanged._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"onitemchanged",_b,_c,_d,_e,_f,_g);this.onitemchanged._fireEvent(this,_h);}};_pCombo.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f,_g,_h){var _i;if(this.oncloseup&&this.oncloseup._has_handlers){var _j=new nexacro.ComboCloseUpEventInfo(this,"oncloseup",_b,_c,_d,_e,_f,_g,_h);_i=this.oncloseup._fireEvent(this,_j);_i=nexacro._toBoolean(_i);}return _i;};_pCombo.on_fire_ondropdown=function(_a){if(this.ondropdown&&this.ondropdown._has_handlers){var _b=new nexacro.EventInfo(this,"ondropdown");return this.ondropdown._fireCheckEvent(this,_b);}return true;};_pCombo.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pCombo.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pCombo.on_fire_sys_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.isDropdown()){var _o=this._p_combolist._selectinfo_list;if(this._scroll_proc){if(_o.length){var _p=_o.length-1;var _q=_o[_p];if(_q.index!=this._p_index){_q.obj._stat_change("notselect","normal");_o.splice(_p,1);}}return;}while(_o.length){var _r=_o[0].obj;if(_r){if(!_r.selected){_r._stat_change("notselect","normal");}}_o.shift();}}return;};_pCombo._createListBoxControl=function(_a){if(!this._isUsableDataset(_a)){return;}var _b=this._p_datacolumn;var _c=this._p_codecolumn;var _d=this._p_combolist;if(!_d){_d=this._p_combolist=new nexacro._ComboListControl("combolist",0,0,0,0,null,null,null,null,null,null,this);_d.set_scrolltype("vertical");var _e=this._getVScrollBarType()||"auto";_d.set_scrollbartype("none "+_e);_d.set_codecolumn(_c);_d.set_datacolumn(_b);_d.setInnerDataset(_a);_d.set_index(this._p_index);_d.set_itemheight(this._p_itemheight);_d.set_cssclass(this._p_cssclass);_d.set_scrollbarbarminsize(this._p_scrollbarbarminsize);_d.set_scrollbardecbuttonsize(this._p_scrollbardecbuttonsize);_d.set_scrollbarbaroutsize(this._p_scrollbarbaroutsize);_d.set_scrollbarincbuttonsize(this._p_scrollbarincbuttonsize);_d.set_scrollbarsize(this._p_scrollbarsize);_d.set_scrollbartrackbarsize(this._p_scrollbartrackbarsize);_d._setPopupContains(true);_d.createComponent(true);}else{if(_d._is_created){if(_d._innerdataset!=_a){_d.setInnerDataset(_a);}}}};_pCombo._createdListBoxControl=function(_a){var _b=this._p_combolist;if(_b&&!_b._is_created){_b._setEventHandler("oncloseup",this._on_list_oncloseup,this);_b._setEventHandler("onitemclick",this._on_list_onitemclick,this);_b.on_created();}};_pCombo._createPopupControl=function(){var _a=this._popupcontrol;if(!_a){_a=this._popupcontrol=new nexacro._ComboPopupControl("combopopup",0,0,0,0,null,null,null,null,null,null,this);_a._setType(this._p_popuptype);_a.createComponent(true);}};_pCombo._createdPopupControl=function(_a){var _b=this._popupcontrol;if(_b&&!_b._is_created){_b._attach(_a);_b.on_created();}};_pCombo._createPopupListBoxControl=function(_a){if(!this._isUsableDataset(_a)){return;}this._createPopupControl();this._createListBoxControl(_a);this._createdPopupControl(this._p_combolist);this._createdListBoxControl();};_pCombo._createFilteredDataset=function(){var _a=this._innerdataset;var _b=this._filtereddataset;var _c=this._p_codecolumn;var _d=this._p_datacolumn;var _e=this._p_combolist;if(_a&&(!(_c in _a.colinfos)||!(_d in _a.colinfos))){return;}if(!this._isUsableDataset(_a)){return;}if(!_b){_b=this._filtereddataset=new nexacro.Dataset("filter_"+this.id);}_b.set_enableevent(false);_b.clear();_b.addColumn(_c,"string");_b.addColumn(_d,"string");for(var _f=0,_g=_a.getRowCount();_f<_g;_f++ ){_b.insertRow(_f);_b.setColumn(_f,_c,_a.getColumn(_f,_c));_b.setColumn(_f,_d,_a.getColumn(_f,_d));}_b.set_enableevent(true);if(_e){_e._redrawListBoxContents(false);_e._onRecalcScrollSize();}};_pCombo._recalcLayout=function(){if(this._is_created_contents){var _a=this._p_comboedit;var _b=this._p_dropbutton;var _c=this._getClientLeft();var _d=this._getClientTop();var _e=this._getClientWidth();var _f=this._getClientHeight();var _g=this._p_buttonsize;var _h,_i;if(_g==undefined){_h=_f;_i=_f;}else{if(typeof (_g)=="number"){_h=_i=_g;}else{_g=_g.split(" ");_h= +_g[0];_i=(_g[1])? +_g[1]:_f;}}if(_h>_e){_h=_e;}if(_i>_f){_i=_f;}if(_b){var _j=_e-_h;var _k=_d;if(_i<_f){_k=(_f-_i)/2;}_b.move(_j,_k,_h,_i,null,null);}if(_a){var _l=_e-_h;_a.move(_c,_d,_l,_f,null,null);}}};_pCombo._recheckIndex=function(){var _a=this._p_index;var _b="";var _c;var _d=this._innerdataset;if(_d){var _e=_d.getRowCount();if(_a>-1&&_e>0&&_a<_e){_c=this._getItemValue(_a);_b=this._getItemText(_a);}else{_a=-1;}}else{_a=-1;}this._setValue(_c);this._setText(_b);this._setIndex(_a);};_pCombo._recheckValue=function(){var _a=-1;var _b="";var _c=this._p_value;var _d=this._p_codecolumn||this._p_datacolumn;var _e=this._innerdataset;if(_e){var _f=_e.getRowCount();if(_f>0&&_e._isValidColumn(_d)){for(var _g=0;_g<_f;_g++ ){if(_c==this._getItemValue(_g)){_a=_g;_b=this._getItemText(_g);break;}}}}else{_c=undefined;}this._setValue(_c);this._setText(_b);this._setIndex(_a);};_pCombo._recheckText=function(){var _a=-1;var _b=this._p_text;var _c;var _d=this._innerdataset;if(_d){var _e=_d.getRowCount();if(_e>0){for(var _f=0;_f<_e;_f++ ){if(_b==this._getItemText(_f)){_a=_f;_c=this._getItemValue(_f);break;}}}else{_b="";}}else{_b="";}this._setValue(_c);this._setText(_b);this._setIndex(_a);};_pCombo._selectDataset=function(_a){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){if(!this._filtereddataset){this._createFilteredDataset();}else{if(_a){this._clearFilteredDataset();}}return this._filtereddataset;}else{return this._innerdataset;}};_pCombo._showPopup=function(_a,_b,_c){this._on_showPopup(_a,_b);};_pCombo._on_showPopup=function(_a,_b){if(!this._p_visible){return;}if(this._isPopupVisible()){this._closePopup();}var _c=this._getWindow();var _d=this._innerdataset.rowcount;if(this.on_fire_ondropdown(this)){if((this.ondropdown&&this.dropdown.preventable&&this.ondropdown.defaultprevented)||!this._isUsableDataset(_a)||this._getPopupType()=="none"){return;}_b=(_d==this._innerdataset.rowcount)?_b:this._p_index;this._createPopupListBoxControl(_a);var _e=this._p_combolist;var _f=this._p_comboedit;var _g=this._popupcontrol;if(_g){_g._popupAuto();}_e._redrawListBoxContents(false);_e._onRecalcScrollSize();if(_e){_e.set_index(_b);_e._refreshScroll(_b,1);if(_c){_c._setCaptureLock(this,true,false);}if(nexacro._enableaccessibility){if(!_a){_a=this._selectDataset();}if(_a&&_f&&_f._input_element){var _h=_f._input_element;var _i=this._getIndexFromText(_a,this._p_text);var _j=_e._getItem(_i);if(_j){_j._setAccessibilityActiveDescendant(_h);}_h.setElementAccessibilityControls(_e._unique_id);_h.setElementAccessibilityStatExpanded(true);}this._setAccessibilityStatExpanded(true);if(nexacro._accessibilitytype==4){_e.setFocus(false);}else if(nexacro._accessibilitytype==5){this._want_arrows=true;_e._setAccessibilityNotifyEvent();}if(nexacro._Browser=="Runtime"){if(_f){_f._setAccessibilityLabel(this._p_text);_f._setAccessibilityDescription("");_f._setAccessibilityAction("");_f.setFocus(true);}}}}}};_pCombo._applyZoomPopup=function(){if(this._popupcontrol&&this._popupcontrol._is_popup()){if(this._p_enable===false||this._p_readonly===true||this._p_visible===false){return;}var _a=this._selectDataset();if(_a){if(_a.getRowCount()<=0){_a=this._innerdataset;}this._showPopup(_a,this._p_index);}}};_pCombo._closePopup=function(){var _a=this._getWindow();if(_a){_a._releaseCaptureLock(this);}var _b=this._popupcontrol;if(_b){_b._closePopup();nexacro._refreshWindow(_a.handle);}if(nexacro._enableaccessibility){this._want_arrows=false;var _c=this._p_combolist;if(_c){_c._overeditemindex=-1;}var _d=this._p_comboedit;if(_d){if(nexacro._Browser=="Runtime"){_d._is_subfocused=false;_d.on_apply_accessibility();}_d._input_element.setElementAccessibilityStatExpanded(false);}}};_pCombo._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pCombo._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pCombo._setValue=function(_a){this._p_value=_a;};_pCombo._setEditValue=function(_a){var _b=this._p_comboedit;if(_b){var _c=_b._p_value;if(_c!=_a){_a=this._getStringResourceProperty(_a);_b._setValue(_a);if(nexacro._enableaccessibility){_b._updateAccessibilityLabel();if(_a){if(this._p_combolist&&this._isPopupVisible()){var _d=this._selectDataset();if(_d){var _e=this._getIndexFromText(_d,_a);var _f=this._p_combolist._getItem(_e);if(_f){_f._setAccessibilityActiveDescendant(_b._input_element);}}}if(nexacro._Browser=="Runtime"&&_b._status=="focused"){_b._setAccessibilityLabel(_a);_b._notifyAccessibility(_a,"notify");}}}}}};_pCombo._setIndex=function(_a){this._p_index=_a;};_pCombo._setText=function(_a){this._p_text=_a;};_pCombo._setDefaultProps=function(_a,_b,_c){this._default_value=_b;this._default_text=_c;this._default_index=_a;};_pCombo._setEventHandlerToComboEdit=function(){var _a=this._p_comboedit;if(_a){var _b=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_b){_a._setEventHandler("oneditclick",this._on_edit_mobile_oneditclick,this);this._setEventHandler("onkeydown",this._on_edit_onkeydown,this);}else{_a._setEventHandler("onlbuttondown",this._on_edit_onlbuttondown,this);_a._setEventHandler("oneditclick",this._on_edit_oneditclick,this);_a._setEventHandler("onkeydown",this._on_edit_onkeydown,this);}_a._setEventHandler("oninput",this._on_edit_oninput,this);}};_pCombo._setEventHandlerToDropButton=function(){var _a=this._p_dropbutton;if(_a){if(nexacro._isTouchInteraction&&nexacro._SupportTouch){_a._setEventHandler("onclick",this._on_drop_mobile_onclick,this);}else{_a._setEventHandler("onclick",this._on_drop_onclick,this);_a._setEventHandler("onlbuttondown",this._on_drop_onlbuttondown,this);}}};_pCombo._setEventHandlerToListBox=function(){var _a=this._p_combolist;if(_a){_a._setEventHandler("onitemclick",this._on_list_onitemclick,this);_a._setEventHandler("canitemchange",this.on_notify_list_canitemchange,this);_a._setEventHandler("onitemchanged",this.on_notify_list_onitemchanged,this);}};_pCombo._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(_a){_a=_a.replace("@","");var _b=this._findDataset(_a);this._innerdataset=_b?_b:"";this._p_innerdataset=_a;}else{this._innerdataset=null;this._p_innerdataset="";}};_pCombo._setDefaultCaret=function(){var _a=this._p_comboedit;if(_a){_a.setCaretPos(0);}};_pCombo._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm().getNextComponent(_a,true);if(_b){_b.setFocus();if(_b._is_editable_control){_b._setDefaultCaret();}}};_pCombo._getColumn=function(_a,_b,_c){return _a.getColumn(_b,_c);};_pCombo._getRowCount=function(_a){return _a.getRowCount();};_pCombo._getItemValue=function(_a){var _b=this._innerdataset;var _c=this._p_codecolumn||this._p_datacolumn;if(_b&&_c){var _d=this._getColumn(_b,_a,_c);if(_d==undefined&&(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike")&&this._filtereddataset){_d=this._filtereddataset.getColumn(_a,_c);}return this._convertValueType(_d,true);}return null;};_pCombo._getItemText=function(_a){var _b=this._innerdataset;var _c=this._p_datacolumn||this._p_codecolumn;if(_b&&_c){var _d=this._getColumn(_b,_a,_c);if(_d==undefined&&(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike")&&this._filtereddataset){_d=this._filtereddataset.getColumn(_a,_c);}return nexacro._toString(_d);}return null;};_pCombo._getIndexFromValue=function(_a,_b){if(_b instanceof nexacro.Decimal){_b=_b.toString();}var _c=this._p_codecolumn||this._p_datacolumn;if(!_a._isValidColumn(_c)){return -1;}var _d=this._getRowCount(_a);for(var _h=0;_h<_d;_h++ ){var _e=this._getItemValue(_h);if(_e instanceof nexacro.Decimal){_e=_e.toString();}if(_b==_e){var _f=_b;var _g=_e;if(_f===0){_f=_f+"";}if(_g===0){_g=_g+"";}if(_f==_g){return _h;}}}return -1;};_pCombo._getIndexFromText=function(_a,_b){var _c=this._getRowCount(_a);for(var _d=0;_d<_c;_d++ ){if(this._getItemText(_d)==_b){return _d;}}return -1;};_pCombo._getRawToListindex=function(_a){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){var _b=this._getFilteredDataset();var _c=_b._viewRecords;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){if(_c[_e]._rawidx==_a){return _e;}}}return _a;};_pCombo._getRawIndex=function(_a,_b){var _c=this._innerdataset;if(_b==-1||(_a._viewRecords.length<=_b)){return -1;}var _d=_a._viewRecords[_b]._rawidx;var _e=_c._rawRecords;var _f=_e.length;for(var _g=0;_g<_f;_g++ ){if(_e[_g]._rawidx==_d){return _d;}}return -1;};_pCombo._getPopupType=function(){return this._p_popuptype?this._p_popuptype:"normal";};_pCombo._isUsableDataset=function(_a){if(!_a){return false;}else{if(_a.getRowCount<=0){return false;}if(!this._p_datacolumn&&!this._p_codecolumn){return false;}}return true;};_pCombo._isPopupVisible=function(){var _a=this._popupcontrol;if(_a){return _a._is_popup();}return false;};_pCombo._clearFilteredDataset=function(){if(this._filtereddataset){this._filtereddataset.set_filterstr("");}};_pCombo._setAccessibilityInfoByHover=function(_a){if(this._isPopupVisible()){var _b=this._p_combolist;return _b._setAccessibilityInfoByHover(_a);}else{return this._setAccessibilityNotifyEvent();}};_pCombo._clearAccessibilityInfoByHover=function(){var _a=this._p_combolist;if(_a){_a._clearAccessibilityInfoByHover();}};_pCombo._getPopupSizeArr=function(){var _a=this._p_popupsize;if(!_a){return;}_a=_a.split(/\s+/);var _b= +_a[0];var _c=_a[1]? +_a[1]:undefined;return {width:_b,height:_c};};_pCombo._cancelEvent=function(){this._processing_keyfilter=false;};delete _pCombo;nexacro._ComboEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Edit.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};var _pComboEditControl=nexacro._createPrototype(nexacro.Edit,nexacro._ComboEditControl);nexacro._ComboEditControl.prototype=_pComboEditControl;_pComboEditControl._type_name="EditControl";_pComboEditControl._is_subcontrol=true;_pComboEditControl._is_subfocused=false;_pComboEditControl._p_accessibilityrole="combobox";_pComboEditControl._getFromComponent=function(_a){var _b=_a._p_parent;if(_b&&_b._isPopupVisible()){return _b;}else{return nexacro.Component.prototype._getFromComponent.call(this,_a);}};_pComboEditControl.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(this._p_readonly||!this._isEnable()){return;}var _g=this._input_element;if(_g){this._processing_keyfilter=true;if(nexacro._enableaccessibility){if(nexacro._Browser=="Runtime"){this._is_subfocused=true;}}if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack&&this._p_parent._p_type!="dropdown"){this._undostack.undo();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}if(this._undostack){var _h=_g.getElementCaretPos();if(_h&&_h!=-1){this._undostack.update(_h.begin,_h.end);}}}};if(nexacro._Browser=="Runtime"){_pComboEditControl.on_keyup_basic_action=function(){this._processing_keyfilter=false;};}else{_pComboEditControl.on_keyup_basic_action=function(){this._processing_keyfilter=true;};}_pComboEditControl.set_value=function(_a){nexacro.Edit.prototype.set_value.call(this,_a);this._setAccessibilityValue(this._p_text,false);};_pComboEditControl.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._p_parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this._p_parent,_l,_m);};delete _pComboEditControl;nexacro._ComboButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pComboButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._ComboButtonControl);nexacro._ComboButtonControl.prototype=_pComboButtonControl;_pComboButtonControl._type_name="ButtonControl";_pComboButtonControl._is_subcontrol=true;_pComboButtonControl._is_focus_accept=false;_pComboButtonControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;if(_g){var _h=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_h){nexacro.Component.prototype.on_focus_basic_action.call(this,_a,_b,_c,_d,_e,_f);}else{_g._apply_setfocus(_b);}}if(nexacro._enableaccessibility){this._setAccessibilityStatFocus(_b);}};_pComboButtonControl._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}if(this._p_visible&&this._p_parent._isEnable()&&this._p_enableevent){var _k=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this,_j);this.on_click_basic_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);}};delete _pComboButtonControl;nexacro._ComboListControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.ListBox.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._overedItem=null;};var _pComboListControl=nexacro._createPrototype(nexacro.ListBox,nexacro._ComboListControl);nexacro._ComboListControl.prototype=_pComboListControl;_pComboListControl._type_name="ListBoxControl";_pComboListControl._is_subcontrol=true;_pComboListControl._overeditemindex=-1;_pComboListControl._event_list={"onitemclick":1,"onitemdblclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canitemchange":1,"onitemchanged":1,"oncloseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onvscroll":1,"onhscroll":1,"ondevicebuttonup":1};_pComboListControl.on_notify_item_onlbuttondown=function(_a,_b){this._do_select(_a.index,false);};_pComboListControl.on_notify_item_onlbuttonup=function(_a,_b){var _c=this._upitem;if(_c){var _d;if(nexacro._isTouchInteraction&&nexacro._SupportTouch){var _e=this._getWindow();var _f=_e?_e._gesture_manager:null;if(_f&&_f._is_ondrag){_d=this._get_rowobj_status("selected","userstatus");if(_d){this._do_deselect(_d.index);}return;}}if((_c.index>=0)&&this._contains(_c)){_a=_c;}else{_d=this._get_rowobj_status("selected","userstatus");if(_d){this._do_deselect(_d.index);}return;}this.on_fire_onitemclick(_a,_a.index,_a.text,_a.value,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.metakey);}};_pComboListControl.on_notify_item_ontouchstart=function(_a,_b){this._do_select(_a.index,false);};_pComboListControl.on_notify_item_ontouchend=function(_a,_b){var _c=(_b.changedtouchinputinfos&&_b.changedtouchinputinfos[0])?_b.changedtouchinputinfos[0]:null;if(_c){_b.button="lbutton";_b.altkey=false;_b.ctrlkey=false;_b.shiftkey=false;_b.metakey=false;_b.screenx=_c.screenx;_b.screeny=_c.screeny;_b.canvasx=_c.canvasx;_b.canvasy=_c.canvasy;_b.clientx=_c.clientx;_b.clienty=_c.clienty;}this.on_notify_item_onlbuttonup(_a,_b);};_pComboListControl.on_notify_listbox_onkeydown=function(_a,_b){};_pComboListControl.on_notify_item_onmouseenter=function(_a,_b){};_pComboListControl.on_notify_item_onmouseleave=function(_a,_b){};_pComboListControl.on_notify_item_onmousemove=function(_a,_b){if(this._overeditemindex>-1){var _c=this._getItem(this._overeditemindex);if(_c){_c._changeStatus("mouseover",false);}}};_pComboListControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;if(_g){if(nexacro._enableaccessibility){_g._setAccessibilityStatFocus(_b);}_g._apply_setfocus(_b);}};_pComboListControl.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pComboListControl.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){return nexacro.Component.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);};_pComboListControl.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.Component.prototype.on_fire_sys_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pComboListControl.on_fire_sys_ontouchstart=function(_a,_b,_c,_d){nexacro.Component.prototype.on_fire_sys_ontouchstart.call(this,_a,_b,_c,_d);};_pComboListControl.on_fire_sys_ontouchend=function(_a,_b,_c,_d){nexacro.Component.prototype.on_fire_sys_ontouchend.call(this,_a,_b,_c,_d);};_pComboListControl.on_fire_sys_ontouchcancel=function(_a,_b,_c,_d){};_pComboListControl.on_fire_oncloseup=function(_a){var _b=this._get_rowobj_status("mouseover","status");if(_b){_b._changeStatus("mouseover",false);}if(this.oncloseup&&this.oncloseup._has_handlers){return this.oncloseup._fireEvent(this);}return false;};_pComboListControl._redrawListBoxContentsAfter=nexacro._emptyFn;_pComboListControl._createListItem=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return new nexacro._ComboListItemControl(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pComboListControl._createListItemControl=function(_a){var _b=this._innerdataset;if(!_b){return null;}var _c=this._p_datacolumn?this._p_datacolumn:this._datacolumn;var _d=this._p_codecolumn?this._p_codecolumn:this._codecolumn;var _e=_b.getColumn(_a,_c);_e=nexacro._toString(_e);var _f=_b.getColumn(_a,_d);_f=this._convertValueType(_f,true);var _g=this._getItemHeight();var _h=this._getClientWidth();var _i=this._createListItem("item_"+_a,0,_a* _g,Math.max(this._contents_maxwidth,_h),_g,null,null,null,null,null,null,this);_i.set_value(_f);_i.set_text(_e);_i.set_index(_a);_i.set_selected(false);_i.set_readonly(this._p_readonly);if(nexacro._enableaccessibility){this._setItemAccessibility(_i);}_i._setEventHandler("onlbuttondown",this.on_notify_item_onlbuttondown,this);_i._setEventHandler("onlbuttonup",this.on_notify_item_onlbuttonup,this);_i._setEventHandler("ontouchstart",this.on_notify_item_ontouchstart,this);_i._setEventHandler("ontouchend",this.on_notify_item_ontouchend,this);_i._setEventHandler("onmouseenter",this.on_notify_item_onmouseenter,this);_i._setEventHandler("onmouseleave",this.on_notify_item_onmouseleave,this);_i._setEventHandler("onmousemove",this.on_notify_item_onmousemove,this);_i.createComponent(this._is_created?false:true);if(this._p_index==_a){_i.set_selected(true);}return _i;};_pComboListControl._change_status_item_from_key=function(_a,_b){var _c=this._getItem(_a);var _d=this._getItem(_b);if(_c){_c._changeStatus("mouseover",false);}if(_d){_d._changeStatus("mouseover",true);this._overeditemindex=_d.index;}};_pComboListControl._setAccessibilityNotifyEvent=function(_a){if(this._is_accessibility_changeIdx){this._is_accessibility_changeIdx=false;return this._p_parent._setAccessibilityNotifyEvent(_a);}else{return nexacro.ListBox.prototype._setAccessibilityNotifyEvent.call(this,_a);}};_pComboListControl._changeIndex=function(_a){if(this._p_index!=_a){var _b=this._innerdataset;var _c=parseInt(_a,10)|0;if(_b&&(this._p_codecolumn||this._p_datacolumn)){var _d=_b.getColumn(_c,this._p_datacolumn||this._p_codecolumn);var _e=_b.getColumn(_c,this._p_codecolumn||this._p_datacolumn);var _f=_d==undefined?"":nexacro._toString(_d);var _g=_e;this._accessibility_index=this._p_index=_c;this._p_text=_f;this._p_value=_g;this._selectinfo.obj=null;this._selectinfo.index=_c;this._selectinfo.text=_f;this._selectinfo.value=_g;return true;}}return false;};_pComboListControl._get_rowobj_status=function(_a,_b){var _c=this._buffer_pages;if(_c){var _d,_e;for(var _f=0,_g=_c.length;_f<_g;_f++ ){_d=_c[_f];if(_d){for(var _h=0,_i=_d.length;_h<_i;_h++ ){_e=_d[_h];if(_e&&((_b=="status"&&_e._status==_a)||(_b=="userstatus"&&_e._userstatus==_a))){return _e;}}}}}return null;};_pComboListControl._get_all_rowobj_status=function(_a,_b){var _c=[];var _d=this._buffer_pages;if(_d){var _e,_f;for(var _g=0,_h=_d.length;_g<_h;_g++ ){_e=_d[_g];if(_e){for(var _i=0,_j=_e.length;_i<_j;_i++ ){_f=_e[_i];if(_f&&((_b=="status"&&_f._status==_a)||(_b=="userstatus"&&_f._userstatus==_a))){_c.push(_f);}}}}}return _c;};delete _pComboListControl;nexacro._ComboListItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._ListBoxItemControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pComboListItemControl=nexacro._createPrototype(nexacro._ListBoxItemControl,nexacro._ComboListItemControl);nexacro._ComboListItemControl.prototype=_pComboListItemControl;_pComboListItemControl.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=this._p_parent;if(_o){var _p=this._getWindow();var _q=_p.findComponent(_m);_o._upitem=_q;}return nexacro.Component.prototype.on_fire_sys_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pComboListItemControl.on_fire_sys_ontouchend=function(_a,_b,_c,_d){var _e=this._p_parent;if(_e){var _f;var _g=this._getWindow();var _h=_a?_a[0]:null;if(_h){var _i=_h.target;_f=_g.findComponent(_i);}else{_f=_g.findComponent(_c);}_e._upitem=_f;}return nexacro.Component.prototype.on_fire_sys_ontouchend.call(this,_a,_b,_c,_d);};_pComboListItemControl.on_tap_basic_action=function(_a,_b,_c,_d,_e,_f){return;};delete _pComboListItemControl;nexacro._ComboPopupControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.PopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pComboPopupControl=nexacro._createPrototype(nexacro.PopupControl,nexacro._ComboPopupControl);nexacro._ComboPopupControl.prototype=_pComboPopupControl;_pComboPopupControl._type_name="popupCombo";_pComboPopupControl._p_accessibilityrole="listbox";_pComboPopupControl._popupAuto=function(){var _a={};var _b=this._getWindow();nexacro._flushCommand(_b);if(this._type=="center"){_a=this._getPopupPositionCenter();var _c=this._getRootFrame();if(_c){this._popupBy(_c,_a.left,_a.top,_a.width,_a.height,true);}}else{_a=this._getPopupPosition();this._popupBy(this._p_parent,_a.left,_a.top,_a.width,_a.height);}};_pComboPopupControl._setType=function(_a){this._type=_a;};_pComboPopupControl._getElementPosition=function(){var _a=this._p_parent;if(_a){return nexacro._getElementPositionInFrame(_a.getElement());}return {};};_pComboPopupControl._getPopupParentPos=function(){var _a=this._p_parent;var _b=[_a._adjust_width,_a._adjust_height];var _c=nexacro._getElementPositionInFrame(_a.getElement());var _d=0,_e=0;if(nexacro._Browser=="MobileSafari"){var _f=this._getRootFrame();if(_f){var _g=nexacro._getElementPositionInFrame(_f.getElement());_d=_g.x<0?_g.x* (-1):0;_e=_g.y<0?_g.y* (-1):0;}}return {"x":_c.x,"y":_c.y,"width":_b[0],"height":_b[1],"xgap":_d,"ygap":_e};};_pComboPopupControl._getPopupPosition=function(){var _a=0;var _b=0;var _c=0;var _d=0;var _e=0;var _f=0;var _g=this._p_parent;var _h=this._attached_comp;var _i=this._getRootFrame();if(_g&&_h&&_i){var _j=this._getWindow();var _k=3;var _l=this._getPopupParentPos();var _m={"x":_l.x,"y":_l.y};var _n=[_l.width,_l.height];_e=_l.xgap;_f=_l.ygap;var _o=_g._getVScrollBarSize();var _p=_g._p_displayrowcount;var _q=_g._selectDataset()?_g._selectDataset().getRowCount():0;var _r=_g._getPopupSizeArr();var _s=_h._on_getFitSize();var _t=_h._getItemHeight();var _u=_h._getCurrentStyleBorder();_u=_u?_u._getBorderHeight():0;var _v=_h._getCurrentStylePadding();_v=_v?_v.top+_v.bottom:0;var _w=_u+_v;var _x;var _y;var _z=nexacro._getElementPositionInFrame(_i.getElement());var _aa=nexacro._allow_default_pinchzoom?nexacro._getWindowOffsetPosition(_j).left:_z.x;var _ab=nexacro._getWindowHandleClientHeight(_j.handle);if(nexacro._Browser=="Runtime"){_ab=Math.round(_ab/nexacro._getDevicePixelRatio(_i.getElement()));}var _ac=_m.y;var _ad=_ab-(_m.y+_n[1]);_b=_n[1];if(_r){_c=_r.width;_d=_r.height?_r.height:_d;}else{_c=Math.max(_n[0],_s[0]);}if(_p==null){_x=(_q<_k?_q:_k)* _t+_w;_y=_d?_d:(_q* _t)+_w;if(_ad>_x){if(_ad>_y){_d=_y;}else{_d=_ad;if(!_r){if(_c==_s[0]){_c+=_o;}}}}else{if(_ac>_x){if(_ac>_y){_b= -_y;_d=_y;}else{_b= -_ac;_d=_ac;}}else{if(_ad>_ac){_d=_ad;}else{_b= -_ac;_d=_ac;}}}}else{if(_q>_p){_q=_p;if(!_r&&_c<=_s[0]+_o){_c=_s[0]+_o;}}_x=_q* _t+_w;if(_ad>_x){if(_d==0){_d=_x;}}else{if(_ac>_x){_b= -_x;_d=_x;}else{if(_ad>_ac){_d=_ad;}else{_b= -_ac;_d=_ac;}}}}var _ae=_j?nexacro._getWindowHandleClientWidth(_j.handle):0;if(_m.x<_aa){if(nexacro._Browser=="MobileSafari"){_a=0;}else{_a+=_aa-_m.x;}}else if(_m.x+_c>_aa+_ae){_a-=(_m.x+_c)-(_aa+_ae);if(_a<(_aa-_m.x)){_a=_aa-_m.x;}}}return {left:_a+_e,top:_b+_f,width:_c,height:_d};};_pComboPopupControl._getPopupPositionCenter=function(){var _a=0;var _b=0;var _c=0;var _d=0;var _e=0;var _f=0;var _g=this._p_parent;var _h=this._attached_comp;if(_g&&_h){var _i=0;var _j=this._getWindow();if(_j){if(nexacro._OS=="iOS"&&nexacro._Browser=="MobileSafari"){_e=_j.handle.innerWidth;_f=_j.handle.innerHeight;var _k=nexacro._getWindowDestinationHandle(_j.handle).scrollTop;if(_k>0){_i+=_k* 2;}}else{_e=nexacro._getWindowHandleClientWidth(_j.handle);_f=nexacro._getWindowHandleClientHeight(_j.handle);}}if(nexacro._Browser=="Runtime"){_e=Math.round(_e/nexacro._getDevicePixelRatio(_g.getElement()));_f=Math.round(_f/nexacro._getDevicePixelRatio(_g.getElement()));}var _l=_g._getVScrollBarSize();var _m=_g._p_displayrowcount;var _n=_g._selectDataset()?_g._selectDataset().getRowCount():0;var _o=_g._getPopupSizeArr();var _p=_h._on_getFitSize();var _q=_h._getItemHeight();var _r=_h._getCurrentStyleBorder();_r=_r?_r._getBorderHeight():0;var _s=_h._getCurrentStylePadding();_s=_s?_s.top+_s.bottom:0;var _t=_r+_s;_c=_o?_o.width:_p[0];if(_o&&_o.height){_d=_o.height;}else{_d=(_n* _q)+_t;}if(_m==null){if(_d>_f){_d=_f;_c+=_l;}}else{if(_n>_m){_d=(_m* _q)+_t;if(_d>_f){_d=_f;}_c+=_l;}else{if(_d>_f){_d=_f;_c+=_l;}}}_a=((_e/2)-(_c/2));_b=((_f/2)-(_d/2));_b=_b<0?0:_b;_b+=_i;}return {left:_a,top:_b,width:_c,height:_d};};_pComboPopupControl._setZoom=function(_a){var _b=this.getElement();if(_b.setElementZoom){_b.setElementZoom(_a* 100);}else if(nexacro.ScrollableControlElement.prototype.setElementZoom){nexacro.ScrollableControlElement.prototype.setElementZoom.call(_b,_a* 100);}};delete _pComboPopupControl;}if(!nexacro.Div){nexacro.Div=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._p_form=new nexacro._InnerForm("form",0,0,_d,_e,null,null,null,null,null,null,this);this._p_form._initLayoutManager();};var _pDiv=nexacro._createPrototype(nexacro.Component,nexacro.Div);nexacro.Div.prototype=_pDiv;_pDiv._type_name="Div";_pDiv._cell_elem=null;_pDiv._p_async=true;_pDiv._p_url="";_pDiv._p_urlchangeeffect="";_pDiv._p_text="";_pDiv._p_textAlign="center";_pDiv._p_verticalAlign="middle";_pDiv._p_formscrollbarbarminsize=undefined;_pDiv._p_formscrollbarbaroutsize=undefined;_pDiv._p_formscrollbardecbuttonsize=undefined;_pDiv._p_formscrollbarincbuttonsize=undefined;_pDiv._p_formscrollbarsize=undefined;_pDiv._p_formscrollbartrackbarsize=undefined;_pDiv._p_formscrollbartype=undefined;_pDiv._p_formscrollindicatorsize=undefined;_pDiv._p_formscrolltype=undefined;_pDiv._urlchangeeffect=null;_pDiv._is_loadedform=false;_pDiv._old_url="";_pDiv._fit_height=-1;_pDiv._fit_width=-1;_pDiv._apply_client_padding=false;_pDiv._is_simple_control=true;_pDiv._is_container=true;_pDiv._p_accessibilityrole="none";_pDiv._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"oncontextmenu":1,"onvscroll":1,"onhscroll":1,"onmouseup":1,"onmousedown":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pDiv.on_create_contents=function(){this._calcFittocontentsSize();if(!this._p_url){this._p_form.createComponent(true);}if(this._p_fittocontents!="none"){this._on_apply_fittocontents();}};_pDiv._applyElementVisible=function(_a){this._control_element.setElementDisplay(_a?"":"none");this._applyScrollPos();};_pDiv.on_created_contents=function(_a){var _b=this._p_form;if(!this._p_url){_b.on_created(_a);}else{if(!_b._url){if(this.parent&&this.parent instanceof nexacro.Tab&&this.parent.preload==false){}else{_b.loadForm(this._p_url,this._p_async,true,this._url);}}if(_b._is_loaded){if(!_b._is_created_contents&&!_b._is_created){_b.createComponent();}else{_b.on_created(_a);}}}if(this._isAccessibilityCotainerComponent()){var _c=_b.getFirstAccessibilityComponent();if(_c){_c._setAccessibilityDescriptionBy(this._unique_id);}}this.on_apply_text();this._recalcLayout();};_pDiv.on_destroy_contents=function(){this._destroyTextElement();this._destroyFormControl();this._user_property_list=null;};_pDiv.on_create_contents_command=function(){var _a="";return _a;};_pDiv.on_attach_contents_handle=function(_a){var _b=this._p_form;if(!this._p_url){_b.on_created(_a);}else{if(this._p_url&&_b._is_loaded){if(!_b._is_created_contents&&!_b._is_created){_b.createComponent();}else{_b.on_created(_a);}}}if(this._isAccessibilityCotainerComponent()){var _c=_b.getFirstAccessibilityComponent();if(_c){_c._setAccessibilityDescriptionBy(this._unique_id);}}this._calcFittocontentsSize();this.on_apply_text();this._recalcLayout();};_pDiv.on_change_containerRect=function(_a,_b){this._is_calculated=false;this._calcFittocontentsSize();if(this._cell_elem){this._cell_elem.setElementSize(_a,_b);}this._recalcLayout();};_pDiv.on_change_containerPos=function(){};_pDiv.on_apply_prop_enable=function(_a){if(this._p_form){this._p_form._setEnable(_a);}};_pDiv._on_accessibility_apply_text=nexacro._emptyFn;_pDiv.on_apply_text=function(_a){var _b=this._p_form;if(_b&&((_b._child_list&&_b._child_list.length>0)||this._p_url)||!this._is_alive){return;}var _c=_b.getElement();if(_c){if(!_a){_a=this._displaytext;}var _d=this._cell_elem;if(!_d&&_a){var _e=this._getWindow();_d=this._cell_elem=new nexacro.TextBoxElement(_c);_d.create(_e);}if(_d){_d.setElementSize(this._getClientWidth(),this._getClientHeight());_d.setElementVerticalAlign(this._p_verticalAlign);_d.setElementTextAlign(this._p_textAlign);_d.setElementText(_a);}this._on_accessibility_apply_text();}};_pDiv.set_url=function(_a){if(this._p_url!=_a){this._old_url=this._p_url;this._p_url=_a;this.on_apply_url();}};_pDiv.on_apply_url=function(_a){var _b=this._p_form;if(!_b){return;}var _c=this._p_url;var _d,_e;if(_c&&_c.length>0){var _f=nexacro._getLayoutManager();if(_f){_f.destroyLayoutContainerInfo(_b);}if(this._is_loadedform&&_b._is_loaded&&!_a){_d=this._on_beforeclose();if(this._checkAndConfirmClose(_d)==false){this._p_url=this._old_url;return;}var _g=_b._async;this._on_close();_b.set_tooltiptext("");this._destroyFormControl();_e=this._getFormPosition();_b=this._p_form=new nexacro._InnerForm("form",_e.left,_e.top,_e.width,_e.height,null,null,null,null,null,null,this);_b._async=_g;_b.createComponent();this._is_loadedform=false;}var _h=this.parent;if(_h!=null){while(!_h._url){_h=_h.parent;}_b.loadForm(_c,this._p_async,true,_h._url);}this._destroyTextElement();}else{if(_b._is_loaded){_d=this._on_beforeclose();if(this._checkAndConfirmClose(_d)==false){return;}this._on_close();_b.set_tooltiptext("");this._is_loadedform=false;}this._destroyFormControl();_e=this._getFormPosition();_b=this._p_form=new nexacro._InnerForm("form",_e.left,_e.top,_e.width,_e.height,null,null,null,null,null,null,this);_b.createComponent();this._destroyTextElement();this.on_apply_text();}};_pDiv.set_urlchangeeffect=function(_a){this._p_urlchangeeffect=_a;if(_a){if(this._urlchangeeffect==null||this._urlchangeeffect.value!=_a){var _b=nexacro.TransitionEffectObject(_a);this._urlchangeeffect=_b;}}else{if(this._urlchangeeffect){this._urlchangeeffect=null;}}};_pDiv.set_async=function(_a){_a=nexacro._toBoolean(_a);if(this._p_async!=_a){this._p_async=_a;if(this._p_form){this._p_form._async=_a;}}};_pDiv._on_apply_formscroll=function(){var _a=this._p_form;if(_a){if(this._p_formscrollbarbarminsize!==undefined){_a.on_apply_scrollbarbarminsize();}if(this._p_formscrollbarbaroutsize!==undefined){_a.on_apply_scrollbarbaroutsize();}if(this._p_formscrollbardecbuttonsize!==undefined){_a.on_apply_scrollbardecbuttonsize();}if(this._p_formscrollbarincbuttonsize!==undefined){_a.on_apply_scrollbarincbuttonsize();}if(this._p_formscrollbarsize!==undefined||this._p_formscrollindicatorsize!==undefined){_a.on_apply_scrollbarsize();}if(this._p_formscrollbartrackbarsize!==undefined){_a.on_apply_scrollbartrackbarsize();}if(this._p_formscrollbartype!==undefined){this.on_apply_formscrollbartype();}if(this._p_formscrolltype!==undefined){_a.on_apply_scrolltype();}}};_pDiv.on_apply_fittocontents=function(){if(this._p_form){this._p_form._setFittocontents(this._p_fittocontents);}this._on_apply_fittocontents();var _a=nexacro._getLayoutManager();if(_a){this._calced_container=false;_a.setContainerFitType(this._p_form,this.fittocontents);if(this._is_created){_a.calcLayout(this._p_form);}}};_pDiv.set_padding=nexacro._emptyFn;_pDiv.set_formscrollbarbarminsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)||_a<0){return;}}if(this._p_formscrollbarbarminsize!=_a){this._p_formscrollbarbarminsize=_a;if(this._p_form){this._p_form.on_apply_scrollbarbarminsize(_a);}}};_pDiv.set_formscrollbarbaroutsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)||_a<0){return;}}if(this._p_formscrollbarbaroutsize!=_a){this._p_formscrollbarbaroutsize=_a;if(this._p_form){this._p_form.on_apply_scrollbarbaroutsize(_a);}}};_pDiv.set_formscrollbardecbuttonsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this._p_formscrollbardecbuttonsize!=_a){this._p_formscrollbardecbuttonsize=_a;if(this._p_form){this._p_form.on_apply_scrollbardecbuttonsize(_a);}}};_pDiv.set_formscrollbarincbuttonsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this._p_formscrollbarincbuttonsize!=_a){this._p_formscrollbarincbuttonsize=_a;if(this._p_form){this._p_form.on_apply_scrollbarincbuttonsize(_a);}}};_pDiv.set_formscrollbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this._p_formscrollbarsize!=_a){this._p_formscrollbarsize=_a;if(this._p_form){this._p_form.on_apply_scrollbarsize(_a);}}};_pDiv.set_formscrollbartrackbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)||_a<-1){return;}}if(this._p_formscrollbartrackbarsize!=_a){this._p_formscrollbartrackbarsize=_a;if(this._p_form){this._p_form.on_apply_scrollbartrackbarsize(_a);}}};_pDiv.set_formscrollbartype=function(_a){if(this._p_formscrollbartype!=_a){this._p_formscrollbartype=_a;this.on_apply_formscrollbartype();}};_pDiv.on_apply_formscrollbartype=function(){var _a=nexacro._toString(this._p_formscrollbartype).trim();var _b;var _c;var _d=_a.toLowerCase().split(" ");for(var _e=0;_e<_d.length;_e++ ){switch(_d[_e]){case "none":case "auto":case "fixed":case "autoindicator":case "indicator":case "default":if(_e==0){_c=_d[_e];}else if(_e==1){_b=_d[_e];}break;default:break;}}if(!_c&&!_b){this._hscrollbartype=undefined;this._vscrollbartype=undefined;}else{if(!_c||_c=="default"){this._hscrollbartype=_c=undefined;}else{this._hscrollbartype=_c;}if(!_b){this._vscrollbartype=_c;}else if(_b=="default"){this._vscrollbartype=undefined;}else{this._vscrollbartype=_b;}}if(this._p_form){this._p_form.on_apply_scrollbartype();}};_pDiv.set_formscrollindicatorsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}if(this._p_formscrollindicatorsize!=_a){this._p_formscrollindicatorsize=_a;if(this._p_form){this._p_form.on_apply_scrollbarsize();}}};_pDiv.set_formscrolltype=function(_a){if(this._p_formscrolltype!=_a){this._p_formscrolltype=_a;if(this._p_form){this._p_form.on_apply_scrolltype(_a);}}};_pDiv.set_semantictag=function(_a){if(this._p_semantictag!=_a){this._p_semantictag=_a;}};_pDiv._properties=[{name:"async"},{name:"semantictag"},{name:"url"},{name:"urlchangeeffect"},{name:"text"},{name:"textAlign"},{name:"verticalAlign"},{name:"formscrollbarbarminsize"},{name:"formscrollbarbaroutsize"},{name:"formscrollbardecbuttonsize"},{name:"formscrollbarincbuttonsize"},{name:"formscrollindicatorsize"},{name:"formscrolltype"},{name:"form",readonly:true},{name:"formscrollbarsize"},{name:"formscrollbartrackbarsize"},{name:"formscrollbartype"}];nexacro._defineProperties(_pDiv,_pDiv._properties);_pDiv.destroy=function(_a){if(!this._is_alive){return;}if(this._p_form&&this._is_loadedform){var _b=this._on_beforeclose();if(this._checkAndConfirmClose(_b)==false){return;}this._on_close();}return nexacro.Component.prototype.destroy.call(this,_a);};_pDiv.reload=function(){this.on_apply_url(true);};_pDiv.getFocus=function(){return this.parent?this.parent.getFocus():null;};_pDiv.getParentContext=function(){return this.parent;};_pDiv.getSetter=function(_a,_b){if(!this._user_property_list){this._user_property_list=[];}this._user_property_list[_a]=1;if(!_b){_b="set_"+_a;}var _c=this[_b];if(_c){return new nexacro.SetterBinder(this,_a,_c);}return new nexacro.PropBinder(this,_a);};_pDiv.addEventHandler=function(_a,_b,_c){var _d=nexacro.Component.prototype.addEventHandler.call(this,_a,_b,_c);var _e=this._p_form;switch(_a){case "oncontextmenu":this._context_func=_b;_e._addEventHandler(_a,this._on_innerform_contextmenu,_c);break;}return _d;};_pDiv.getOwnerFrame=function(){return this._getOwnerFrame();};_pDiv.addChild=function(_a,_b){var _c=this._p_form;var _d=_c.addChild(_a,_b);return _d;};_pDiv.insertChild=function(_a,_b,_c){var _d=this._p_form;var _e=_d.insertChild(_a,_b,_c);return _e;};_pDiv.removeChild=function(_a){var _b=null;if(!this._is_alive&&_a==="form"){_b=this._p_form;if(_b){var _c=false;var _d=this._getWindow();if(_d){_c=(_d._indexOfCurrentFocusPaths(_b)>-1);}if(_b._control_element){if(_b._control_element){_b._control_element._removeFromContainer();}if(_c){if(_b instanceof nexacro.Form){_b._on_deactivate();}_d._removeFromCurrentFocusPath(_b,true);}}}delete this[_a];}else{var _e=this._p_form;_b=_e.removeChild(_a);}return _b;};_pDiv.addLayout=function(_a,_b){var _c=this._p_form;if(_c){_c.addLayout(_a,_b);}};_pDiv.setContents=function(_a){var _b=this._setContents(_a);return _b;};_pDiv.scrollTo=function(_a,_b){if(this._p_form){this._p_form.scrollTo(_a,_b);}};_pDiv._on_activate=function(){nexacro.Component.prototype._on_activate.call(this);if(this._p_form){this._p_form._on_activate();}return true;};_pDiv._on_deactivate=function(){nexacro.Component.prototype._on_deactivate.call(this);if(this._p_form){this._p_form._on_deactivate();}return true;};_pDiv._on_orientationchange=function(_a){if(this._p_form){this._p_form._on_orientationchange(_a);}};_pDiv._on_innerform_contextmenu=function(_a,_b){var _c=this;if(_a instanceof nexacro._InnerForm){_a.parent._context_func.call(_c,_a.parent,_b);}};_pDiv._on_beforeclose=function(_a){var _b=this._p_form;if(!_b||!this._is_loadedform){return;}return _b._on_beforeclose(_a);};_pDiv._on_bubble_beforeclose=function(_a,_b,_c,_d){var _e=this._getParentForm();if(_e&&_e._on_bubble_beforeclose){return _e._on_bubble_beforeclose(_a,_b,_c,_d);}return "";};_pDiv._on_close=function(){var _a=this._p_form;if(!_a||!this._is_loadedform){return true;}_a._on_close();this._is_loadedform=false;};_pDiv._on_bubble_close=function(_a,_b,_c){var _d=this._getParentForm();if(_d&&_d._on_bubble_close){return _d._on_bubble_close(_a,_b,_c);}};_pDiv._destroy=function(_a){if(!this._is_alive){return;}return this.destroyComponent(_a);};_pDiv._checkAndConfirmClose=function(_a){if(this._p_form&&this._is_loadedform){return this._p_form._checkAndConfirmClose(_a);}return true;};_pDiv._loadedForm=function(){if(this._getLastFocused()){this._last_focused=this._p_form;}this._on_apply_formscroll();this._is_loadedform=true;};_pDiv._destroyTextElement=function(){if(this._cell_elem){this._cell_elem.destroy();this._cell_elem=null;}};_pDiv._destroyFormControl=function(){if(this._p_form){this._p_form._destroy();this._p_form=null;}};_pDiv._loadInclude=function(_a,_b,_c,_d){var _e=this._p_async;var _f=this.getParentContext();var _g;if(_e){while(_f&&_f._is_form){_g=_f._getAsync();if(!_f._is_fired_onload&&_g===false){_e=false;break;}_f=_f.getParentContext();}}if(!this._is_created){}this._loadIncludeJS.call(this,_a,_b,_e,_d);};_pDiv._loadIncludeJS=function(_a,_b,_c,_d){var _e;if(_d&&_d.length>0){_e=nexacro._getServiceObject(_d);}else{_e=nexacro._getServiceObject(_b);}this._load_manager.loadIncludeModule(_b,null,_c,_e);};_pDiv._on_getFitSize=function(){var _a=this._p_form;if(!this._is_created||!_a){return [this._adjust_width,this._adjust_height];}var _b=_a._on_getFitSize();var _c=this._on_getFitSize_style();var _d=_b[0]+_c[0];var _e=_b[1]+_c[1];return [_d,_e];};_pDiv._on_getAbsoluteContainerSize=function(_a){var _b=[0,0];var _c=0;var _d=0;var _e=this._getCurrentStyleBorder();var _f=this._p_fittocontents;switch(_f){case "width":_c=_e?_a[0]+_e._getBorderWidth():_a[0];_d=this._adjust_height;_b=[_c,_d];break;case "height":_c=this._adjust_width;_d=_e?_a[1]+_e._getBorderHeight():_a[1];_b=[_c,_d];break;case "both":_c=_e?_a[0]+_e._getBorderWidth():_a[0];_d=_e?_a[1]+_e._getBorderHeight():_a[1];_b=[_c,_d];break;case "none":default:_b=[this._adjust_width,this._adjust_height];break;}return _b;};_pDiv._on_getFluidHorizontalContainerSize=function(_a){var _b=0;var _c=0;var _d=this._minwidth;var _e=this._maxwidth;var _f=this._minheight;var _g=this._maxheight;var _h=this._getCurrentStyleBorder();switch(this._p_fittocontents){case "width":_b=_h?_a[0]+_h._getBorderWidth():_a[0];_c=this._adjust_height;if(this._getClientHeight()<_a[1]){_b+=this._p_form._on_getFitSize_scroll()[0];}break;case "height":_b=this._adjust_width;_c=_h?_a[1]+_h._getBorderHeight():_a[1];if(this._getClientWidth()<_a[0]){_c+=this._p_form._on_getFitSize_scroll()[1];}break;case "both":_b=_h?_a[0]+_h._getBorderWidth():_a[0];_c=_h?_a[1]+_h._getBorderHeight():_a[1];break;case "none":default:_b=this._adjust_width;_c=this._adjust_height;break;}if(_d!=null&&(_b<_d)){_b=(_d<0)?0:_d;}else if(_e!=null&&(_b>_e)){_b=(_e<0)?0:_e;}if(_f!=null&&(_c<_f)){_c=(_f<0)?0:_f;}else if(_g!=null&&(_c>_g)){_c=(_g<0)?0:_g;}return [_b,_c];};_pDiv._on_getFluidVerticalContainerSize=_pDiv._on_getFluidHorizontalContainerSize;_pDiv._on_getFluidTableContainerSize=function(_a,_b){var _c=0;var _d=0;var _e=this._minwidth;var _f=this._maxwidth;var _g=this._minheight;var _h=this._maxheight;var _i=this._getCurrentStyleBorder();switch(this._p_fittocontents){case "width":_c=_i?_a[0]+_i._getBorderWidth():_a[0];_d=this._adjust_height;if(_b&&_d<_b[1]){_c+=this._p_form._getVScrollBarSize();}break;case "height":_c=this._adjust_width;_d=_i?_a[1]+_i._getBorderHeight():_a[1];if(_b&&_c<_b[0]){_d+=this._p_form._getHScrollBarSize();}break;case "both":_c=_i?_a[0]+_i._getBorderWidth():_a[0];_d=_i?_a[1]+_i._getBorderHeight():_a[1];if(_b&&_c<_b[0]){_d+=this._p_form._getHScrollBarSize();}if(_b&&_d<_b[1]){_c+=this._p_form._getVScrollBarSize();}break;case "none":default:_c=this._adjust_width;_d=this._adjust_height;break;}if(_e!=null&&(_c<_e)){_c=(_e<0)?0:_e;}else if(_f!=null&&(_c>_f)){_c=(_f<0)?0:_f;}if(_g!=null&&(_d<_g)){_d=(_g<0)?0:_g;}else if(_h!=null&&(_d>_h)){_d=(_h<0)?0:_h;}return [_c,_d];};_pDiv._closeForm=function(){this._destroyFormControl();};_pDiv._recalcLayout=function(){var _a=this._p_form;if(_a){var _b=this._getFormPosition();_a._setPos(_b.left,_b.top);_a._setSize(_b.width,_b.height);}};_pDiv._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Layouts")[0];if(!_c){_c=_b;}var _d=_c.getElementsByTagName("Layout")[0];if(!_d){return false;}var _e=true;var _f=_d.firstChild;while(_f){if(_f.nodeType==1){var _g=nexacro._getRegisterClass(_f.tagName);if(!_g){return false;}var _h=nexacro._executeGlobalEvalStr(_g);if(!_h){return false;}if(_h.prototype&&_h.prototype._is_component){var _i={};var _j={};for(var _o=0;_o<_f.attributes.length;_o++ ){var _k=_f.attributes[_o].name;if(/^(id|left|top|width|height|right|bottom|minwidth|maxwidth|minheight|maxheight|)$/.test(_k)){_i[_k]=_f.attributes[_o].value;}else{_j[_k]=_f.attributes[_o].value;}}var _l=new _h(_i["id"],_i["left"],_i["top"],_i["width"],_i["height"],_i["right"],_i["bottom"],_i["minwidth"],_i["maxwidth"],_i["minheight"],_i["maxheight"],this._p_form);for(var _p in _j){if(_l["set_"+_p]){_l["set_"+_p](_j[_p]);}else{_l[_p]=_j[_p];}}if(_f.firstChild){var _m=_f.firstChild;var _n="";while(_m){if(_f.nodeType==1){_n+=nexacro._documentToXml(_m);}_m=_m.nextSibling;}_e=_l._setContents(_n);}if(!_e){return _e;}this._p_form.addChild(_l.id,_l);_l.show();}}_f=_f.nextSibling;}return _e;};_pDiv._onApplyTabletemplate=function(_a){var _b=this._form;if(_b){var _c=nexacro._getLayoutManager();if(_c){var _d=_c.getCurrentLayout(_b);var _e=_d.tabletemplate;var _f=_c._fluidlayoutmanager;if(_f){_f._prev_tabletemplate=_c.getLayout(_b,_a?_a:"default")._tabletemplate;}var _g=_b.getElement();if(_g){_g.setElementTableTemplate(_e);}_b._is_changed_tabletemplate=true;_c.calcFluidLayoutContents(_b);_b._is_changed_tabletemplate=false;}}};_pDiv._getFormPosition=function(){var _a=0;var _b=0;var _c=0;var _d=0;_c=this._getClientWidth();_d=this._getClientHeight();this._initControlElementCssInfo();return {left:_a,top:_b,width:_c,height:_d};};_pDiv._getComponentsByTaborder=function(){if(!this._p_form._isEnable()||!this._p_form._child_list||this._p_form._child_list.length==0){return null;}return [this._p_form];};_pDiv._searchNextTabFocus=function(_a,_b,_c,_d){var _e=nexacro.FormBase.prototype._searchNextTabFocus.call(this,_a,_b,_c,_d);if(_b&&_e&&_e[0]===this._p_form){return [this];}return _e;};_pDiv._searchPrevTabFocus=function(_a,_b,_c,_d){var _e=nexacro.FormBase.prototype._searchPrevTabFocus.call(this,_a,_b,_c,_d);if(_b&&_e&&_e[0]===this._p_form){return [this];}return _e;};_pDiv._getTabOrderNext=function(_a,_b,_c){return nexacro.FormBase.prototype._getTabOrderNext.call(this,_a,_b,_c);};_pDiv._getTabOrderFirst=function(_a){return nexacro.FormBase.prototype._getTabOrderFirst.call(this,_a);};_pDiv._getTabOrderLast=function(_a){return nexacro.FormBase.prototype._getTabOrderLast.call(this,_a);};_pDiv._getSizeInfo=function(){var _a;var _b=this._p_width;var _c=this._p_height;var _d,_e;var _f,_g;var _h=this._getParentComponent();var _i=_h?_h._p_fittocontents:"none";if(this._calced_container){switch(this._p_fittocontents){case "width":_a=this._on_getFitSize();_b=_d=_a[0];_f=this._getAdjustFitPositionHeight(_c,_i);if(_f!=_c){this._fit_height=_e=_c=_f;}break;case "height":_a=this._on_getFitSize();_c=_e=_a[1];_g=this._getAdjustFitPositionWidth(_b,_i);if(_g!=_b){this._fit_width=_d=_b=_g;}break;case "both":_a=this._on_getFitSize();_b=_d=_a[0];_f=this._getAdjustFitPositionHeight(_c,_i);if(_f!=_c){this._fit_height=_e=_c=_f;}_c=_e=_a[1];_g=this._getAdjustFitPositionWidth(_b,_i);if(_g!=_b){this._fit_width=_d=_b=_g;}break;default:_f=this._getAdjustFitPositionHeight(_c,_i);if(_f!=_c){this._fit_height=_e=_c=_f;}_g=this._getAdjustFitPositionWidth(_b,_i);if(_g!=_b){this._fit_width=_d=_b=_g;}break;}}return [_b,_c,_d,_e];};delete _pDiv;}if(!nexacro.ProgressBar){nexacro.ProgressBar=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._progressbaritems=new Array();};var _pProgressBar=nexacro._createPrototype(nexacro.Component,nexacro.ProgressBar);nexacro.ProgressBar.prototype=_pProgressBar;_pProgressBar._type_name="ProgressBar";_pProgressBar._p_progressstartcap=null;_pProgressBar._p_progressendcap=null;_pProgressBar._progressbartext=null;_pProgressBar._p_smooth=false;_pProgressBar._p_direction="forward";_pProgressBar._p_pos=0;_pProgressBar._p_step=1;_pProgressBar._p_max=100;_pProgressBar._p_min=0;_pProgressBar._p_blocksize=undefined;_pProgressBar._p_blockgap=undefined;_pProgressBar._endcap_width=0;_pProgressBar._startcap_width=0;_pProgressBar._item_width=0;_pProgressBar._endcap_iconwidth=undefined;_pProgressBar._startcap_iconwidth=undefined;_pProgressBar._item_iconwidth=undefined;_pProgressBar._item_icon_url="";_pProgressBar._item_edge_url="";_pProgressBar._p_accessibilityrole="progressbar";_pProgressBar.on_apply_text=function(_a){var _b=this.getElement();if(_b){if(!_a){_a=this._getStringResourceProperty(this._p_text);var _c=this._expr_fn;if(_c){try{_a=nexacro._toString(_c.call(null,this));}catch(e){if(e&&e.message){trace(e.message);}}}}if(_a){var _d=this._progressbartext;var _e,_f;if(!_d){_e=this._getClientWidth();_f=this._getClientHeight();_d=this._progressbartext=new nexacro.Static("progressbartext",0,0,_e,_f,null,null,null,null,null,null,this);_d._setControl();_d.set_text(_a);_d.createComponent();_d._setEventHandler("onclick",this.on_notify_progressbar_onclick,this);}else{_e=this._getClientWidth();_f=this._getClientHeight();_d.set_text(_a);_d.move(0,0,_e,_f,null,null);if(!_d._is_created){_d.on_created();}}}else{if(this._progressbartext){this._progressbartext.destroy();this._progressbartext=null;}}}};_pProgressBar.on_apply_prop_enable=function(_a){if(this._p_progressstartcap){this._p_progressstartcap._setEnable(_a);}if(this._p_progressendcap){this._p_progressendcap._setEnable(_a);}var _b=this._progressbaritems;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setEnable(_a);}};_pProgressBar.on_create_contents=function(){var _a=this.getElement();if(_a){this._createProgressBarItems(true);}};_pProgressBar.on_created_contents=function(_a){if(this._p_progressstartcap){this._p_progressstartcap.on_created(_a);}var _b=this._progressbaritems;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_created(_a);}if(this._p_progressendcap){this._p_progressendcap.on_created(_a);}if(this._progressbartext){this._progressbartext.on_created(_a);}if(nexacro._enableaccessibility&&this._isAccessibilityEnable()){this._setAccessibilityInfoValueMin(this._p_min);this._setAccessibilityInfoValueMax(this._p_max);this._setAccessibilityInfoValueCur(this._p_pos);}};_pProgressBar.on_destroy_contents=function(){if(this._p_progressstartcap){this._p_progressstartcap.destroy();this._p_progressstartcap=null;}if(this._p_progressendcap){this._p_progressendcap.destroy();this._p_progressendcap=null;}if(this._progressbartext){this._progressbartext.destroy();this._progressbartext=null;}this._clearProgressBarItems(true);};_pProgressBar.on_create_contents_command=function(){var _a="";if(this._p_progressstartcap){_a+=this._p_progressstartcap.createCommand();}var _b=this._progressbaritems;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a+=_b[_d].createCommand();}if(this._p_progressendcap){_a+=this._p_progressendcap.createCommand();}if(this._progressbartext){_a+=this._progressbartext.createCommand();}return _a;};_pProgressBar.on_attach_contents_handle=function(_a){if(this._p_progressstartcap){this._p_progressstartcap.attachHandle(_a);}var _b=this._progressbaritems;for(var _c=0;_c<_b.length;_c++ ){_b[_c].attachHandle(_a);}if(this._p_progressendcap){this._p_progressendcap.attachHandle(_a);}if(this._progressbartext){this._progressbartext.attachHandle(_a);}if(nexacro._enableaccessibility&&this._isAccessibilityEnable()){this._setAccessibilityInfoValueMin(this._p_min);this._setAccessibilityInfoValueMax(this._p_max);this._setAccessibilityInfoValueCur(this._p_pos);}};_pProgressBar.on_change_containerRect=function(){this._update();};_pProgressBar._on_getAccessibilityAdditionalLabel=function(){var _a="";if(this._isAccessibilityEnable()){_a=(this._p_expr&&this._p_expr.length>0)?this._displaytext+" "+this._p_min+" "+this._p_max:this._p_pos+" "+this._p_min+" "+this._p_max;}return _a;};_pProgressBar._on_getAccessibilityAdditionalRole=function(){if(this._getAccessibilityRole()=="progressbar"){return " ProgressBar";}return "";};_pProgressBar.set_blockgap=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_blockgap!=_a){this._p_blockgap=_a;this._update();}};_pProgressBar.set_blocksize=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(_a<1){_a=1;}if(this._p_blocksize!=_a){this._p_blocksize=_a;this._update();}};_pProgressBar.set_min=function(_a){if(isNaN(_a= +_a)){return;}_a=(_a<0)?0:_a;if(this._p_min!=_a){this._p_min=_a;this.on_apply_min(_a);this._update();}};_pProgressBar.on_apply_min=function(_a){if(_a>this._p_max){this._p_max=_a;}if(_a>this._p_pos){this._p_pos=_a;}if(nexacro._enableaccessibility&&this._isAccessibilityEnable()){this._setAccessibilityInfoValueMin(_a);}};_pProgressBar.set_max=function(_a){if(isNaN(_a= +_a)){return;}_a=(_a<0)?0:_a;if(this._p_max!=_a){this._p_max=_a;this.on_apply_max(_a);this._update();}};_pProgressBar.on_apply_max=function(_a){if(_a<this._p_min){this._p_min=_a;}if(_a<this._p_pos){this._p_pos=_a;}if(nexacro._enableaccessibility&&this._isAccessibilityEnable()){this._setAccessibilityInfoValueMax(_a);}};_pProgressBar.set_pos=function(_a){if(isNaN(_a= +_a)){return;}if(this._p_pos!=_a){if(_a>this._p_max){_a=this._p_max;}else if(_a<this._p_min){_a=this._p_min;}this._p_pos=_a;if(nexacro._enableaccessibility&&this._isAccessibilityEnable()){this._setAccessibilityInfoValueCur(_a);}}this._update();};_pProgressBar.set_step=function(_a){if(isNaN(_a= +_a)){return;}if(this._p_step!=_a){this._p_step=_a;this._update();}};_pProgressBar.set_smooth=function(_a){_a=nexacro._toBoolean(_a);if(this._p_smooth!=_a){this._p_smooth=_a;this._update();}};_pProgressBar.set_direction=function(_a){_a=nexacro._toString(_a);if(this._p_direction!=_a){this._p_direction=_a;this._update();}};_pProgressBar._properties=[{name:"smooth"},{name:"direction"},{name:"pos"},{name:"step"},{name:"max"},{name:"min"},{name:"blocksize"},{name:"blockgap"},{name:"progressstartcap",readonly:true},{name:"progressendcap",readonly:true}];nexacro._defineProperties(_pProgressBar,_pProgressBar._properties);_pProgressBar.stepIt=function(){this.set_pos(this._p_pos+this._p_step);};_pProgressBar._on_loadimage_start_icon=function(_a,_b){this._startcap_iconwidth=_b;this._update();};_pProgressBar._on_loadimage_end_icon=function(_a,_b){this._endcap_iconwidth=_b;this._update();};_pProgressBar._on_loadimage_item_icon=function(_a,_b){this._item_iconwidth=_b;this._update();};_pProgressBar.on_notify_progressbar_onclick=function(_a,_b){this.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,this,this,_b.metakey);};_pProgressBar._createProgressStartCap=function(_a){var _b=this.getElement();if(_b){var _c=this._p_progressstartcap;if(!_c){_c=new nexacro._Icon("progressstartcap",0,0,0,this._getClientHeight(),null,null,null,null,null,null,this);_c._setControl();_c.createComponent(_a);this._p_progressstartcap=_c;}var _d=_c._getCurrentStyleBorder();var _e=_c._getCurrentStylePadding();this._startcap_width=_d?(_d.left._width+_d.right._width):0;this._startcap_width+=_e?(_e.left+_e.right):0;if(this._startcap_iconwidth===undefined){var _f=_c._icon||_c._getCSSStyleValue("icon");if(_f instanceof Object){_f=_f.value;}var _g=nexacro._getImageSize(_f,this._on_loadimage_start_icon,this);if(_g){this._startcap_iconwidth=_g.width;}}}};_pProgressBar._createProgressEndCap=function(_a){var _b=this.getElement();if(_b){var _c=this._p_progressendcap;if(!_c){_c=new nexacro._Icon("progressendcap",0,0,0,this._getClientHeight(),null,null,null,null,null,null,this);_c._setControl();_c.createComponent(_a);this._p_progressendcap=_c;}var _d=_c._getCurrentStyleBorder();var _e=_c._getCurrentStylePadding();this._endcap_width=_d?(_d.left._width+_d.right._width):0;this._endcap_width+=_e?(_e.left+_e.right):0;if(this._endcap_iconwidth===undefined){var _f=_c._icon||_c._getCSSStyleValue("icon");if(_f instanceof Object){_f=_f.value;}var _g=nexacro._getImageSize(_f,this._on_loadimage_end_icon,this);if(_g){this._endcap_iconwidth=_g.width;}}}};_pProgressBar._createProgressBarItemTemp=function(){var _a=this.getElement();if(_a){var _b=new nexacro._ProgressBarItemControl("progressbaritem",0,0,0,this._getClientHeight(),null,null,null,null,null,null,this);_b._initControlElementCssInfo();var _c=_b._getCurrentStyleBorder();var _d=_b._getCurrentStylePadding();this._item_width=_c?(_c.left._width+_c.right._width):0;this._item_width+=_d?(_d.left+_d.right):0;if(this._item_iconwidth===undefined){var _e=_b._icon||_b._getCSSStyleValue("icon");if(_e instanceof Object){_e=_e.value;}this._item_icon_url=_e;var _f=nexacro._getImageSize(_e,this._on_loadimage_item_icon,this);if(_f){this._item_iconwidth=_f.width;}}_b.destroy();}};_pProgressBar._createProgressBarItems=function(_a){var _b=this.getElement();if(_b){if(this._p_pos<=0){if(this._p_progressendcap){this._p_progressstartcap.destroy();this._p_progressstartcap=null;}if(this._p_progressendcap){this._p_progressendcap.destroy();this._p_progressendcap=null;}this._clearProgressBarItems(true);this.on_apply_text();return;}else{this._createProgressStartCap(_a);this._createProgressEndCap(_a);this._createProgressBarItemTemp();}this._setSizeInfo();var _c=this._getBarInfo();var _d=_c[1];var _e=_c[2];var _f=this._getClientWidth();var _g=this._getClientHeight();var _h,_i=this._getClientTop(),_j=0;var _k=this._p_blockgap;if(_k==null){_k=2;}else if(_k<0){_k=0;}var _l=this._p_smooth;var _m=this._p_direction;var _n;var _o=this._progressbaritems;this._clearProgressBarItems(false,_c);if(_m=="backward"){if(this._endcap_width){this._p_progressendcap.move(_f-this._endcap_width,0,this._endcap_width,_g);}}else{if(this._startcap_width){this._p_progressstartcap.move(0,0,this._startcap_width,_g);}}if(_l){if(_m=="backward"){_j=_e|0;_h=_f-this._endcap_width-_e;if(this._startcap_width){this._p_progressstartcap.move(_h-this._startcap_width,_i,this._startcap_width,_g);}}else{_h=this._startcap_width;_j=_e|0;if(this._endcap_width){this._p_progressendcap.move(_h+_j,_i,this._endcap_width,_g);}}_n=_o[0];if(!_n){_n=new nexacro._ProgressBarItemControl("progressbaritem",_h,_i,_j,_g,null,null,null,null,null,null,this);_n.createComponent(_a);_n._setEventHandler("onclick",this.on_notify_progressbar_onclick,this);_o[0]=_n;}else{_n.move(_h,_i,_j,_g);}}else{var _p,_q=_e+_k;if(_m=="backward"){_h=_f-this._endcap_width;for(_p=0;_p<_d;_p++ ){_n=_o[_p];_h=_f-this._endcap_width-(_p* _q)-_e;_j=_e;if(_p==(_d -1)&&(_h-_e)<=0){_j=_f-this._startcap_width-this._endcap_width-(_p* _q);_h=this._startcap_width;}if(!nexacro._isDesktop()){if(this._p_blockgap<=0){_j=_j+1;}}if(!_n){_n=new nexacro._ProgressBarItemControl("progressbaritem_"+_p,_h,_i,_j,_g,null,null,null,null,null,null,this);_n.createComponent(_a);_n._setEventHandler("onclick",this.on_notify_progressbar_onclick,this);_o[_p]=_n;}else{_n.move(_h,_i,_j,_g);}}if(this._startcap_width){this._p_progressstartcap.move(_h-this._startcap_width,_i,this._startcap_width,_g);}}else{_h=this._startcap_width;var _r=_f-this._startcap_width-this._endcap_width;for(_p=0;_p<_d;_p++ ){_n=_o[_p];_j=_e;_h=(_p* _q)+this._startcap_width;if(_p==(_d -1)&&(_h+_e)>=(_r)){_j=_f-this._endcap_width-_h;}if(!nexacro._isDesktop()){if(this._p_blockgap<=0){_j=_j+1;}}if(!_n){_n=new nexacro._ProgressBarItemControl("progressbaritem_"+_p,_h,_i,_j,_g,null,null,null,null,null,null,this);_n.createComponent(_a);_n._setEventHandler("onclick",this.on_notify_progressbar_onclick,this);_o[_p]=_n;}else{_n.move(_h,_i,_j,_g);}}if(this._endcap_width){this._p_progressendcap.move(_h+_j,_i,this._endcap_width,_g);}}}this.on_apply_text(this._p_text);if(_o.length>0&&this._progressbartext){var _s=this._progressbartext.getElement();_b.moveToPrevElement(_s,_o[_o.length-1].getElement());}}};_pProgressBar._clearProgressBarItems=function(_a,_b){var _c=this._progressbaritems.length;if(_c<=0){return;}var _d=0;if(!_a){var _e=_b[1];if(_c>_e){_d=_c-_e;}}else{_d=_c;}for(var _g=0;_g<_d;_g++ ){var _f=this._progressbaritems.pop();if(_f){_f.destroy();}}};_pProgressBar._update=function(){this._createProgressBarItems(!this._is_created);};_pProgressBar._setSizeInfo=function(){if(this._startcap_iconwidth){this._startcap_width+=this._startcap_iconwidth;}if(this._endcap_iconwidth){this._endcap_width+=this._endcap_iconwidth;}if(this._item_iconwidth){this._item_width+=this._item_iconwidth;}};_pProgressBar._getBarInfo=function(){var _a=null;var _b=0;var _c=0;var _d=0;var _e=this._getClientWidth()-this._startcap_width-this._endcap_width;var _f=this._p_pos;var _g=this._p_max;var _h=_f/_g;var _i=this._p_smooth;var _j=this._p_blocksize;if(_j==null){_j=this._item_width?this._item_width:15;}var _k=this._p_blockgap;if(_k==null){_k=2;}else if(_k<0){_k=0;}if(_i){_b=1;_d=parseInt(_e* _h)|0;_c=0;}else{_d=_j;_b=Math.ceil(_e/(_d+_k))|0;_c=Math.floor(_b* _h);}_a=[_b,_c,_d];try{return _a;}finally{_a=null;}};delete _pProgressBar;nexacro._ProgressBarItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._Icon.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pProgressBarItemControl=nexacro._createPrototype(nexacro._Icon,nexacro._ProgressBarItemControl);nexacro._ProgressBarItemControl.prototype=_pProgressBarItemControl;_pProgressBarItemControl._type_name="IconControl";_pProgressBarItemControl._is_subcontrol=true;_pProgressBarItemControl._is_focus_accept=false;_pProgressBarItemControl.on_getIDCSSSelector=function(){return "progressbaritem";};delete _pProgressBarItemControl;}if(!nexacro.PopupDiv){nexacro.PopupDiv=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Div.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._attached_comp=this;};var _pPopupDiv=nexacro._createPrototype(nexacro.Div,nexacro.PopupDiv);nexacro.PopupDiv.prototype=_pPopupDiv;_pPopupDiv._type_name="PopupDiv";_pPopupDiv._p_returnvalue="";_pPopupDiv._p_visible=false;_pPopupDiv._callbackfunction=null;_pPopupDiv._callbackcontext=null;_pPopupDiv._eventclear_flag=false;_pPopupDiv._default_zindex=nexacro._zindex_popup;_pPopupDiv._is_window=true;_pPopupDiv._is_popup_control=true;_pPopupDiv._is_selfclose=true;_pPopupDiv._is_trackpopup=false;_pPopupDiv._track_capture=true;_pPopupDiv._is_fired_onsize=false;_pPopupDiv._p_accessibilityrole="none";_pPopupDiv._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onload":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"oncloseup":1,"onpopup":1,"onlayoutchanged":1,"canlayoutchange":1,"onmousewheel":1,"onmousedown":1,"onmouseup":1,"onvscroll":1,"onhscroll":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pPopupDiv.on_create_control_element=function(_a){var _b;if(this._is_scrollable){_b=this.on_create_popupscrollable_control_element(_a);}else{_b=this.on_create_popup_control_element(_a);}if(_b&&this._default_zindex>0){_b.setElementZIndex(this._default_zindex);}return _b;};_pPopupDiv.on_created=function(_a){nexacro.Div.prototype.on_created.call(this,_a);var _b=this._control_element;if(_b){_b.setElementPosition(-5000,0);}};_pPopupDiv.destroyComponent=function(){nexacro.PopupControl.prototype.destroyComponent.call(this);nexacro.Div.prototype.destroyComponent.call(this);this._callbackfunction=null;this._callbackcontext=null;return true;};_pPopupDiv.on_created_contents=function(_a){nexacro.Div.prototype.on_created_contents.call(this,_a);var _b=this._control_element;if(!this._p_visible&&_b){_b.setElementPosition(-5000,0);_b.setElementFont(this._getCurrentStyleInheritValue("font"));_b.setElementColor(this._getCurrentStyleInheritValue("color"));_b.setElementWordSpacing(this._getCurrentStyleInheritValue("wordSpacing"));_b.setElementLetterSpacing(this._getCurrentStyleInheritValue("letterSpacing"));}};_pPopupDiv.on_create_contents_command=function(){return "";};_pPopupDiv.on_attach_contents_handle=function(_a){nexacro.Div.prototype.on_created.call(this,_a);var _b=this._control_element;if(_b){_b.setElementPosition(-5000,0);}};_pPopupDiv._applyElementVisible=function(_a){nexacro.Component.prototype._applyElementVisible.call(this,_a);};_pPopupDiv.on_update_position=function(_a,_b,_c){if(this._p_visible||!nexacro._allow_default_pinchzoom){var _d=this._control_element;if(_d){if(_b){var _e=this._adjust_left;var _f=this._adjust_top;if(this._is_popup_control){var _g=this._getWindow();if(_g&&(_g._wheelZoom!=undefined)){_d.setElementZoom(_g._wheelZoom);if(_g._wheelZoom!=100){_e=_e* nexacro._getDevicePixelRatio(_d);_f=_f* nexacro._getDevicePixelRatio(_d);}}}_d.setElementPosition(_e,_f);this.on_fire_onmove(this._adjust_left,this._adjust_top);}if(_a||_c){_d.setElementSize(this._adjust_width,this._adjust_height,_c);if(_a){this.on_fire_onsize(this._adjust_width,this._adjust_height);}}}}else{var _d=this._control_element;if(_d){_d.setElementPosition(-5000,0);if(_b){this.on_fire_onmove(this._adjust_left,this._adjust_top);}if(_a){this.on_fire_onsize(this._adjust_width,this._adjust_height);}}}};_pPopupDiv._clearEventListener=function(_a){var _b=nexacro.getApplication();if(this._eventclear_flag&&_b&&_b.getActiveForm()){var _c=_b.getActiveForm()._event_list;if(!_c[_a]){return;}}nexacro._EventSinkObject.prototype._clearEventListener.apply(this,arguments);};_pPopupDiv.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){return nexacro.Form.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pPopupDiv._on_getFluidHorizontalContainerSize=function(_a){var _b=[0,0];var _c=0;var _d=0;var _e=this._getCurrentStyleBorder();var _f=this.fittocontents;switch(_f){case "height":case "both":_c=this._adjust_width;_d=_e?_a[1]+_e._getBorderHeight():_a[1];_b=[_c,_d];break;case "width":case "none":default:_b=[this._track_width!==undefined?this._track_width:this._adjust_width,this._track_height!==undefined?this._track_height:this._adjust_height];break;}return _b;};_pPopupDiv._on_getFluidVerticalContainerSize=function(_a){var _b=[0,0];var _c=0;var _d=0;var _e=this._getCurrentStyleBorder();var _f=this.fittocontents;switch(_f){case "width":case "both":_c=_e?_a[0]+_e._getBorderWidth():_a[0];_d=this._adjust_height;_b=[_c,_d];break;case "height":case "none":default:_b=[this._track_width!==undefined?this._track_width:this._adjust_width,this._track_height!==undefined?this._track_height:this._adjust_height];break;}return _b;};_pPopupDiv.set_visible=function(_a){if(this._is_trackpopup){nexacro.PopupControl.prototype.set_visible.apply(this,arguments);}};_pPopupDiv._properties=[{name:"visible"},{name:"returnvalue",readonly:true}];nexacro._defineProperties(_pPopupDiv,_pPopupDiv._properties);_pPopupDiv.trackPopup=function(_a,_b,_c,_d,_e,_f){if(this._is_trackpopup){return;}this._p_returnvalue="";this._track_capture=_f===false?false:true;var _g=nexacro._getLayoutManager();var _h=_g?_g.isFluidLayoutType(this._p_parent):false;_a= +_a;_b= +_b;if(_h){_c=(_c==null)?this._convToPixel(this.width,this._p_parent._adjust_width): +_c;_d=(_d==null)?this._convToPixel(this.height,this._p_parent._adjust_height): +_d;}else{_c=(_c==null)?this._adjust_width: +_c;_d=(_d==null)?this._adjust_height: +_d;}var _i=this._getWindow();var _j=0;var _k=0;if(_i){_j=_i.frame._adjust_width;_k=_i.frame._adjust_height;}var _l=_a+_c;if(_l>_j){if(_c<=_j){_a=_j-_c;}else{_a=0;_c=_j;}}var _m=_b+_d;if(_m>_k){if(_d<=_k){_b=_k-_d;}else{_b=0;_d=_k;}}if(this._is_fired_onsize==false&&this._p_form){this._p_form.on_fire_onsize(this._adjust_width,this._adjust_height);this._is_fired_onsize=true;}this._is_trackpopup=true;if(this._is_loading){this._wait_pop_position={obj:null,left:_a,top:_b,width:_c,height:_d};}else{var _n=_g?_g.isFluidLayoutType(this._p_form):false;if(_n){this._track_width=_c;this._track_height=_d;}this._popup(_a,_b,_c,_d);}if(_e&&typeof _e=="string"){var _o=this._p_parent;var _p=_o[_e];while(!_p&&!(_o._is_form&&_o._is_loaded)){_o=_o._p_parent;_p=_o[_e];}if(_p){this._callbackfunction=_p;this._callbackcontext=_o;}}else{this._callbackfunction=null;this._callbackcontext=null;}this.setFocus();this.on_fire_onpopup(this);return (this.async?true:this._p_returnvalue);};_pPopupDiv.trackPopupByComponent=function(_a,_b,_c,_d,_e,_f,_g){if(this._is_trackpopup){return;}this._p_returnvalue="";this._track_capture=_g===false?false:true;if(_d==null&&_e==null){_d=this._adjust_width;_e=this._adjust_height;}_b= +_b;_c= +_c;var _h=nexacro._getElementPositionInFrame(_a.getElement());var _i=_h.x;var _j=_h.y;var _k=this._getWindow();var _l=_k.clientWidth;var _m=_k.clientHeight;if(_k&&(_k._wheelZoom!=undefined)){if(_k._wheelZoom!=100){_l=_l/nexacro._getDevicePixelRatio(_a.getElement());_m=_m/nexacro._getDevicePixelRatio(_a.getElement());}}if(_i+_b+_d>_l){var _n=_l-_d;if(_n<0){_b= -_i;if(_d>_l){_d=_l;}}else{_b=_n-_i;}}if(_j+_c+_e>_m){var _o=_m-_e;if(_o<0){_c= -_j;_e=_m;}else{_c=_o-_j;}}if(_f&&typeof _f=="string"){var _p=this._p_parent;var _q=_p[_f];while(!_q&&!(_p._is_form&&_p._is_loaded)){_p=_p._p_parent;_q=_p[_f];}if(_q){this._callbackfunction=_q;this._callbackcontext=_p;}}else{this._callbackfunction=null;this._callbackcontext=null;}if(this._is_fired_onsize==false&&this._p_form){this._p_form.on_fire_onsize(this._adjust_width,this._adjust_height);this._is_fired_onsize=true;}this._is_trackpopup=true;if(this._is_loading){this._wait_pop_position={obj:_a,left:_b,top:_c,width:_d,height:_e};}else{this._popupBy(_a,_b,_c,_d,_e,true);}this.setFocus();this.on_fire_onpopup(this);return (this.async?true:this._p_returnvalue);};_pPopupDiv.closePopup=function(_a){this._p_returnvalue=_a;if(this._p_visible){this._closePopup(true);return true;}return false;};_pPopupDiv.isPopup=nexacro.PopupControl.prototype._is_popup;_pPopupDiv._on_init=function(){this._eventclear_flag=true;nexacro.FormBase.prototype._on_init.apply(this,arguments);this._eventclear_flag=false;};_pPopupDiv._on_load=function(){var _a=nexacro.Form.prototype._on_load.apply(this,arguments);var _b=this._wait_pop_position;if(_b){if(_b.obj){this._popupBy(_b.obj,_b.left,_b.top,_b.width,_b.height);}else{this._popup(_b.left,_b.top,_b.width,_b.height);}delete this._wait_pop_position;}return _a;};_pPopupDiv._on_bubble_mousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){if(!this._is_alive){return;}var _q,_r,_s,_t,_u,_v,_w,_x,_y;if(_l===undefined){if(!_n){_n=this;}if(this._p_visible&&this._isEnable()){_q=this._getClientXY(_h,_i);_l=this.on_fire_user_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_q[0],_q[0],this,_n,_p);_r=this._getFromComponent(this);if(_l!==true){if(!_r.onmousewheel||(_r.onmousewheel&&!_r.onmousewheel.defaultprevented)){_s=this.on_fire_sys_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_q[0],_q[0],this,_n,_p);if(_s){return;}if(!_f){if(_c){if(this.vscrollbar&&this.vscrollbar._p_enable){_t=this.vscrollbar;_u=_t._pos;this._setVScrollDefaultAction(_t,_c);_v=_t._pos;if(_u!=_v){return;}}}if(_b){if(nexacro._OSVersion=="Mac OS"){if(this.hscrollbar&&this.hscrollbar._p_enable){_w=this.hscrollbar;_x=_w._pos;this._setHScrollDefaultAction(_w,_b);_y=_w._pos;if(_x!=_y){return;}}}}}return;}if(_l===false){_l=undefined;}if(!_r.onmousewheel||(_r.onmousewheel&&!_r.onmousewheel.stoppropagation)){if(this._p_parent&&!this._p_parent._is_application){var _z=this._getRecalcCanvasXY(_a,_h,_i);_h=_z[0];_i=_z[1];if(this._is_subcontrol){return this._p_parent._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,null,_n,_o,_p);}else{return this._p_parent._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,false,this,_n,_o,_p);}}}}}}else{if(this._p_visible&&this._isEnable()){_q=this._getClientXY(_h,_i);_l=this.on_fire_user_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_q[0],_q[0],_m,_n,_p);_r=this._getFromComponent(this);if(_l!==true){if(!_r.onmousewheel||(_r.onmousewheel&&!_r.onmousewheel.defaultprevented)){_s=this.on_fire_sys_onmousewheel(_b,_c,_d,_e,_f,_g,_j,_k,_h,_i,_q[0],_q[0],_m,_n,_p);if(_s){return;}if(!_f){if(_c){if(this._isWheelScrollable(_c)&&this.vscrollbar&&this.vscrollbar._p_enable){_t=this.vscrollbar;_u=_t._pos;this._setVScrollbarDefaultAction(_t,_c);_v=_t._pos;if(_u!=_v){return;}}}if(_b){if(nexacro._OSVersion=="Mac OS"){if(this._isWheelScrollable(_b)&&this.hscrollbar&&this.hscrollbar._p_enable){_w=this.hscrollbar;_x=_w._pos;this._setHScrollDefaultAction(_w,_b);_y=_w._pos;if(_x!=_y){return;}}}}}return;}if(!_r.onmousewheel||(_r.onmousewheel&&!_r.onmousewheel.stoppropagation)){if(this._p_parent&&!this._p_parent._is_application){_h+=this._adjust_left-this._scroll_left||0;_i+=this._adjust_top-this._scroll_top||0;return this._p_parent._on_bubble_mousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,false,_m,_n,_o,_p);}}}}}};_pPopupDiv.on_fire_onpopup=function(_a){if(this.onpopup&&this.onpopup._has_handlers){var _b=new nexacro.EventInfo(_a,"onpopup");return this.onpopup._fireEvent(this,_b);}return false;};_pPopupDiv.on_fire_onmove=function(_a,_b){if(this.onmove&&this.onmove._has_handlers){var _c=new nexacro.MoveEventInfo(this,"onmove",_a,_b);return this.onmove._fireEvent(this,_c);}return false;};_pPopupDiv.on_fire_oncloseup=function(_a){if(this._callbackfunction){this._callbackfunction.call(this._callbackcontext,this.id,this._p_returnvalue);}if(this.oncloseup&&this.oncloseup._has_handlers){var _b=new nexacro.EventInfo(_a);_b.eventid="oncloseup";return this.oncloseup._fireEvent(this,_b);}return false;};_pPopupDiv.on_fire_sys_onslidestart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDiv.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDiv.on_fire_sys_onslideend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDiv.on_fire_sys_onflingstart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDiv.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDiv.on_fire_sys_onflingend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return true;};_pPopupDiv._detach=function(_a){this._attached_comp=null;};_pPopupDiv._popup=nexacro.PopupControl.prototype._popup;_pPopupDiv._popupBy=nexacro.PopupControl.prototype._popupBy;_pPopupDiv._closePopup=function(){nexacro.PopupControl.prototype._closePopup.apply(this,arguments);this._is_trackpopup=false;if(this._track_width){this._track_width=undefined;}if(this._track_height){this._track_height=undefined;}};_pPopupDiv._getWindow=nexacro.PopupControl.prototype._getWindow;_pPopupDiv._getWindowHandle=nexacro.PopupControl.prototype._getWindowHandle;_pPopupDiv._findOwnerElementHandle=nexacro.PopupControl.prototype._findOwnerElementHandle;_pPopupDiv._isPopupVisible=function(){return this._p_visible;};delete _pPopupDiv;}if(!nexacro._MenuItemControl){nexacro._MenuItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Static.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pMenuItemControl=nexacro._createPrototype(nexacro.Static,nexacro._MenuItemControl);nexacro._MenuItemControl.prototype=_pMenuItemControl;_pMenuItemControl._type_name="MenuItemControl";_pMenuItemControl._is_subcontrol=true;_pMenuItemControl._use_selected_status=true;_pMenuItemControl.index=0;_pMenuItemControl.datarow=0;_pMenuItemControl._canExpand=true;_pMenuItemControl._id="";_pMenuItemControl.enable=true;_pMenuItemControl.level="";_pMenuItemControl.userdata=undefined;_pMenuItemControl.accessibilityrole="menuitem";_pMenuItemControl._is_simple_control=false;_pMenuItemControl.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);if(nexacro._enableaccessibility){this._updateAccessibilityLabel(this);}};_pMenuItemControl.on_tap_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this.parent;var _h=_g._popupmenu;var _i=this._getRootComponent(this);if(_h){if(_h._is_popup()){if(_g._previtemindex!=this.index){var _j=_g._items[_g._previtemindex];if(_j){_j._changeUserStatus("selected",false);}_g._previtemindex=this.index;}_h.cancelPopup();_g._menuitemindex=this.index;_g._popupitemindex=-1;}}if(this._canExpand&&this._isEnable()){_g._showPopup(this);if(_i instanceof nexacro.Menu){_i._popupitemindex=this.index;}}else{if(this.enable==false||_i.popuptype=="none"){return;}if(_i.onmenuclick&&_i.onmenuclick._has_handlers){_i._popupitemindex=-1;}if(_i._isPopupVisible()){_i._closePopup(true);}}return nexacro.Component.prototype.on_tap_basic_action.call(this,_a,_b,_c,_d,_e,_f);};_pMenuItemControl.on_getIDCSSSelector=function(){return "menuitem";};_pMenuItemControl._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();var _e=this._getCurrentStylePadding();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=this._getTextSize(this.text);_b+=Math.ceil(_f[0]);_c+=Math.ceil(_f[1]);return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pMenuItemControl._apply_setfocus=function(_a){var _b=this._control_element;if(_b){var _c=((_a=="lbutton")?false:nexacro._enableaccessibility);_b.setElementFocus(_c);}this._on_apply_selected(true);var _d=this.parent;if(_d){_d._menuitemindex=this.index;}};_pMenuItemControl._on_dragleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){var _p=nexacro.Component.prototype._on_dragleave.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);var _q=this._getRootComponent(this);if(_q.ondragleave){_q._last_mouseleave_iteminfo.index=this.index;_q._last_mouseleave_iteminfo.bindindex=this._bindindex;_q._last_mouseleave_iteminfo.level=this.parent.level;}return _p;};_pMenuItemControl._getTextSize=function(_a){var _b=this._getCurrentStyleInheritValue("font");var _c=this._getReferenceAbsoluteFont(_b);return nexacro._getTextSize(_a,_b,false,undefined,this.wordWrap,this._getCurrentStyleInheritValue("wordSpacing"),this._getCurrentStyleInheritValue("letterSpacing"),undefined,undefined,undefined,_c);};_pMenuItemControl._on_apply_mouseover=function(_a){this._changeStatus("mouseover",_a);};_pMenuItemControl._on_apply_selected=function(_a){this._changeUserStatus("selected",_a);};_pMenuItemControl._getWindowPosition=function(){var _a=this._control_element;if(_a){var _b=nexacro._getElementXYInWindow(_a.handle);var _c=_b[0];var _d=_b[1];return {x:_c,y:_d};}return {x:0,y:0};};_pMenuItemControl._updateAccessibilityLabel=function(_a){var _b=this._getRootComponent(this);if(_b&&_b._innerdataset&&_a){var _c=_b._innerdataset.getRowCount();_a._setAccessibilityInfoIndex(_a.datarow+1);_a._setAccessibilityInfoCount(_c);_a._setAccessibilityFlagHasPopup(_a._canExpand?true:false);}};_pMenuItemControl._isSelected=function(){return this._userstatus=="selected"?true:false;};delete _pMenuItemControl;}if(!nexacro.Menu){nexacro.MenuClickEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.eventid=_b||"onmenuclick";this.id=_c;this.fromobject=_a;this.fromreferenceobject=_g?_g:_a;this.index=_e;this.level=_f;this.userdata=_d;};var _pMenuClickEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuClickEventInfo);nexacro.MenuClickEventInfo.prototype=_pMenuClickEventInfo;_pMenuClickEventInfo._type_name="MenuClickEventInfo";delete _pMenuClickEventInfo;nexacro.MenuDragEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u,_v,_w,_x,_y){this.eventid=_b||"onmenudrag";this.id=_c;if(!_k){_k=_j;}this.cancelable=true;this.bubbles=true;this.dragdata=_d;this.userdata=_e;this.datatype=_f;this.filelist=_g;this.sourceobject=_h;this.sourcereferenceobject=_i;this.fromobject=_j;this.fromreferenceobject=_k;this.altkey=_m||false;this.ctrlkey=_n||false;this.button=_l||"";this.shiftkey=_o||false;this.metakey=_y||false;this.screenx=_p||-1;this.screeny=_q||-1;this.canvasx=_r||-1;this.canvasy=_s||-1;this.clientx=_t||-1;this.clienty=_u||-1;this.level=_v;this.index=_w;this.bindindex=_x;};var _pEventMenuDragEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuDragEventInfo);nexacro.MenuDragEventInfo.prototype=_pEventMenuDragEventInfo;_pEventMenuDragEventInfo._type_name="MenuDragEventInfo";delete _pEventMenuDragEventInfo;nexacro.MenuMouseEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){this.eventid=_b||"onmenumouse";this.id=_c;this.cancelable=true;this.bubbles=true;this.fromobject=_n;this.fromreferenceobject=_o;this.altkey=_e||false;this.ctrlkey=_f||false;this.button=_d||"";this.shiftkey=_g||false;this.metakey=_s||false;this.screenx=_h||-1;this.screeny=_i||-1;this.canvasx=_j||-1;this.canvasy=_k||-1;this.clientx=_l||-1;this.clienty=_m||-1;this.level=_p;this.index=_q;this.bindindex=_r;};var _pEventMenuMouseEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuMouseEventInfo);nexacro.MenuMouseEventInfo.prototype=_pEventMenuMouseEventInfo;_pEventMenuMouseEventInfo._type_name="MenuMouseEventInfo";delete _pEventMenuMouseEventInfo;nexacro.MenuContextMenuEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){nexacro.ContextMenuEventInfo.call(this,_a,_b,_n,_o,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_s);this.eventid=_b||"oncontextmenu";this.id=_c;this.bubbles=true;this.level=_p;this.index=_q;this.bindindex=_r;};var _pEventMenuContextMenuEventInfo=nexacro._createPrototype(nexacro.MouseEventInfo,nexacro.MenuContextMenuEventInfo);nexacro.MenuContextMenuEventInfo.prototype=_pEventMenuContextMenuEventInfo;_pEventMenuContextMenuEventInfo._type_name="MenuContextMenuEventInfo";delete _pEventMenuContextMenuEventInfo;nexacro.Menu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._items=[];this._hot_key_list=[];this._items_width=[];};var _pMenu=nexacro._createPrototype(nexacro.Component,nexacro.Menu);nexacro.Menu.prototype=_pMenu;_pMenu._type_name="Menu";_pMenu.level=0;_pMenu._p_autohotkey=false;_pMenu._p_captioncolumn="";_pMenu._p_checkboxcolumn="";_pMenu._p_enablecolumn="";_pMenu._p_hotkeycolumn="";_pMenu._p_iconcolumn="";_pMenu._p_idcolumn="";_pMenu._p_levelcolumn="";_pMenu._p_userdatacolumn="";_pMenu._p_innerdataset=null;_pMenu._p_popuptype="normal";_pMenu._p_popupitemheight=undefined;_pMenu._p_navigationbuttonsize=undefined;_pMenu._p_popupnavigationbuttonsize=undefined;_pMenu._p_buttonalign="auto";_pMenu._p_accessibilityrole="menubar";_pMenu._p_accessibilityenable=true;_pMenu._p_accessibilitylabel="";_pMenu._p_accessibilitydescription="";_pMenu._p_accessibilityaction="";_pMenu._p_accessibilitydesclevel="all";_pMenu._menuitemindex=-1;_pMenu._menuitemonmouseenter=null;_pMenu._popupitemLR=-1;_pMenu._popupitemindex=-1;_pMenu._popupitempreviousindex=0;_pMenu._previtemindex=0;_pMenu._clickitemindex=0;_pMenu._hotkeytextgap=20;_pMenu._icontextpadding=5;_pMenu._focus_obj=null;_pMenu._innerdataset="";_pMenu._popupmenu=null;_pMenu._want_tab=nexacro._enableaccessibility;_pMenu._want_arrow=true;_pMenu._items_total_width=0;_pMenu._start_navigation_index=0;_pMenu._end_navigation_index=0;_pMenu._is_navigationbutton_visible=false;_pMenu._last_mouseleave_iteminfo={bindindex:-1,index:-1,level:-1};_pMenu._is_item_selected=false;_pMenu._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onmenuclick":1,"onmousedown":1,"onmouseup":1,"oninnerdatachanged":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pMenu.on_create_contents=function(){this._createMenu();};_pMenu.on_created_contents=function(){var _a=this.getElement();if(_a){var _b,_c,_d=this._items;if(_d){_c=this._items.length;for(_b=0;_b<_c;_b++ ){_d[_b].on_created();}}if(nexacro._enableaccessibility){this._setAccessibilityInfoLevel(this._p_level);}if(this._innerdataset&&this._p_enablecolumn){this.on_apply_enablecolumn();}var _e=this._hot_key_list;if(_e&&this._p_autohotkey==true){for(_b=0,_c=_e.length;_b<_c;_b++ ){this._registerItemHotkey(_e[_b].key);}}this._recalcLayout();}};_pMenu.on_create_contents_command=function(){var _a="";var _b=this._items;if(_b){var _c=this._items.length;for(var _d=0;_d<_c;_d++ ){_a+=_b[_d].createCommand();}}return _a;};_pMenu.on_attach_contents_handle=function(_a){var _b,_c,_d=this._items;if(_d){_c=this._items.length;for(_b=0;_b<_c;_b++ ){_d[_b].attachHandle(_a);}}if(this._innerdataset&&this._p_enablecolumn){this.on_apply_enablecolumn();}var _e=this._hot_key_list;if(this._p_autohotkey&&_e){for(_b=0,_c=_e.length;_b<_c;_b++ ){this._registerItemHotkey(_e[_b].key);}}this._recalcLayout();};_pMenu.on_destroy_contents=function(){var _a=this._popupmenu;if(_a){_a.destroy();}var _b,_c,_d=this._items;if(_d){_c=_d.length;for(_b=0;_b<_c;_b++ ){_d[_b].destroy();_d[_b]=null;}this._items=[];}var _e=this._hot_key_list;if(_e){for(_b=_e.length-1;_b>-1;_b-- ){var _f=_e[_b];this._unregisterItemHotkey(_f.key);_f.obj=null;}this._hot_key_list=[];}if(this._items_width){this._items_width.length=0;this._items_width=null;}this._removeEventHandlerToInnerDataset();};_pMenu.on_change_containerRect=function(_a,_b){var _c=this._items;var _d=_c.length;var _e=this._getCSSStyleValue("padding",this._status);if(_e){_b=_b-_e.top-_e.bottom;}var _f=this._isNavigationVisible();if(_f){this._showNavigationButton(true);this._rearrangeMenuItems();}else{var _g=this._end_navigation_index|0;this._end_navigation_index=0;this._showNavigationButton(false);var _h=this._items_width;var _i=0;for(var _l=0;_l<_d;_l++ ){var _j=_c[_l];var _k=_h[_l];_b=_b!=undefined?_b:_j.height;_j._applyElementVisible(true);if(_g){_j.move(_i,0,_k,_b);_i+=_k;}else{_j.resize(_k,_b);}}}};_pMenu._apply_setfocus=function(_a){var _b=this._control_element;if(_b){var _c=((_a=="lbutton")?false:nexacro._enableaccessibility);_b.setElementFocus(_c);}var _d=this._items[0];if(nexacro._enabletouchevent){if(_d&&_a!="tap"){this._select_menuitem(0);}}else{if(_d&&_a!="lbuttondown"){this._select_menuitem(0);}}};_pMenu._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();var _e=this._getCurrentStylePadding();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=this._items;var _g=_f.length;if(_g){var _h;var _i=0;var _j=0;var _k=this._items_width=[];var _l=null;for(var _m=0,_n=this._items.length;_m<_n;_m++ ){_h=_f[_m];_l=_h._on_getFitSize();_i=Math.ceil(_l[0]);_k.push(_i);_b+=_i;_j=Math.max(_j,_l[1]);}_c+=_j;}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pMenu._on_hotkey=function(_a,_b,_c,_d){var _e=this._hot_key_list;var _f=_e.length;var _g=null;var _h=null;var _i=this._hotkey;if(_i){if(_i._keycode==_a&&(((_i._modifierkey&0x02)==0x02)==_b)&&(((_i._modifierkey&0x01)==0x01)==_c)&&(((_i._modifierkey&0x04)==0x04)==_d)){this.setFocus();return;}}for(var _l=0;_l<_f;_l++ ){var _j=_e[_l];_g=_j.key;var _k=_j.obj;if(_g._keycode==_a){_h=_g._modifierkey;if(_b==((_h&0x02)==0x02)&&_c==((_h&0x01)==0x01)&&_d==((_h&0x04)==0x04)){this.setFocus();this.on_fire_onitemclick(this,_j.id,"",_k.index,_k.parent.level,_k);break;}}}};_pMenu.on_get_accessibility_label=function(){return this.text?this.text:this.id;};_pMenu._unregisterItemHotkey=function(_a){if(!_a||!_a._is_registered){return;}var _b=this._getMainForm();if(this._is_frame||this==_b){var _c=this.getOwnerFrame();if(_c){nexacro._unregisterHotkeyComp(_c,this,_a);}}else{if(_b){nexacro._unregisterHotkeyComp(_b,this,_a);}}};_pMenu._registerItemHotkey=function(_a){if(!_a||_a._is_registered){return;}this._setAccessibilityHotKey(this.hotkey);var _b=this._getMainForm();if(this._is_frame||this==_b){var _c=this.getOwnerFrame();if(_c){nexacro._registerHotkeyComp(_c,this,_a);}}else{if(_b){nexacro._registerHotkeyComp(_b,this,_a);}}};_pMenu._getDlgCode=function(_a){var _b=nexacro.Event;var _c=this._want_tab;var _d=!(nexacro._enableaccessibility&&(_a==_b.KEY_DOWN||_a==_b.KEY_UP));this._want_tab=_c;return {want_tab:_c,want_return:true,want_escape:false,want_chars:false,want_arrows:_d};};_pMenu.set_autohotkey=function(_a){var _b=nexacro._toBoolean(_a);if(_b!=this._p_autohotkey){this._p_autohotkey=_b;this.on_apply_autohotkey(_b);}};_pMenu.on_apply_autohotkey=function(_a){var _b=this._popupmenu;var _c,_d;var _e;if(_b){_b.set_autohotkey(_a);}if(_a==true){_c=this._hot_key_list;if(_c&&_c.length>-1){for(_e=_c.length-1;_e>-1;_e-- ){_d=_c[_e];this._registerItemHotkey(_d.key);}}}else{_c=this._hot_key_list;if(_c&&_c.length>-1){for(_e=_c.length-1;_e>-1;_e-- ){_d=_c[_e];this._unregisterItemHotkey(_d.key);}}}};_pMenu.set_popupitemheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_popupitemheight!=_a){this._p_popupitemheight=_a;this.on_apply_popupitemheight(_a);}};_pMenu.on_apply_popupitemheight=function(_a){var _b=this._popupmenu;if(_b){_b.set_itemheight(_a?_a:this._p_popupitemheight);}};_pMenu.set_popuptype=function(_a){var _b=["center","none","normal","system"];if(_b.indexOf(_a)==-1){return;}if(this._p_popuptype!=_a){this._p_popuptype=_a;this.on_apply_popuptype(_a);}};_pMenu.on_apply_popuptype=function(_a){var _b=this._popupmenu;if(_b){_b.set_popuptype(_a);}};_pMenu.set_navigationbuttonsize=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}this._p_navigationbuttonsize=_a;this.on_apply_navigationbuttonsize(_a);};_pMenu.on_apply_navigationbuttonsize=function(){if(this._is_created_contents){this.on_change_containerRect();}};_pMenu.set_popupnavigationbuttonsize=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}this._p_popupnavigationbuttonsize=_a;this.on_apply_popupnavigationbuttonsize(_a);};_pMenu.on_apply_popupnavigationbuttonsize=function(){if(this._is_created_contents){this.on_change_containerRect();}};_pMenu.on_apply_prop_enable=function(_a){var _b=this._popupmenu;if(_b){_b._setEnable(_a);}var _c=this._items;for(var _g=0,_h=_c.length;_g<_h;_g++ ){var _d=_c[_g];_d._setEnable(_a);}var _e=this.nextbutton;if(_e){_e._setEnable(_a);if(_a&&this._end_navigation_index==_h){_e._changeStatus("disabled",true);}}var _f=this.prevbutton;if(_f){_f._setEnable(_a);if(_a&&this._start_navigation_index==0){_f._changeStatus("disabled",true);}}};_pMenu.on_apply_prop_cssclass=function(){var _a=this._popupmenu;if(_a){_a.on_apply_cssclass();}var _b=this._items;for(var _d=0,_e=_b.length;_d<_e;_d++ ){var _c=_b[_d];_c.on_apply_cssclass();}};_pMenu.set_captioncolumn=function(_a){var _b=_a;var _c=this._popupmenu;if(_c){_c.set_captioncolumn(_b);}if(_b!=this._p_captioncolumn){this._p_captioncolumn=_b;this.on_apply_captioncolumn();}};_pMenu.on_apply_captioncolumn=function(){if(this._innerdataset){if(this._is_created){this._createMenu();}var _a=this._items;var _b=_a.length;for(var _d=0;_d<_b;_d++ ){var _c=this._innerdataset.getColumn(_a[_d].datarow,this._p_captioncolumn);if(_c){_a[_d].set_text(_c);}else{_a[_d].set_text("");}}}};_pMenu.set_checkboxcolumn=function(_a){var _b=_a;if(this._popupmenu){this._popupmenu.set_checkboxcolumn(_b);}if(_b!=this._p_checkboxcolumn){this._p_checkboxcolumn=_b;this._createMenu();}};_pMenu.set_enablecolumn=function(_a){if(_a!=this._p_enablecolumn){this._p_enablecolumn=_a;this.on_apply_enablecolumn();}};_pMenu.on_apply_enablecolumn=function(){if(this._innerdataset){this._createMenu();}if(this._popupmenu){this._popupmenu.set_enablecolumn(this._p_enablecolumn);}};_pMenu.set_hotkeycolumn=function(_a){var _b=this._popupmenu;if(_b){_b.set_hotkeycolumn(_a);}if(_a!=this._p_hotkeycolumn){this._p_hotkeycolumn=_a;this._createMenu();}};_pMenu.set_iconcolumn=function(_a){if(_a!=this._p_iconcolumn){this._p_iconcolumn=_a;this.on_apply_iconcolumn(_a);}};_pMenu.on_apply_iconcolumn=function(_a){var _b=this._items;if(_b){var _c=_b[this._menuitemindex];if(_c){_c._changeUserStatus("selected",true);}}if(this._is_created){this._recalcLayout();}var _d=this._popupmenu;if(_d){_d.set_iconcolumn(_a);}};_pMenu.set_idcolumn=function(_a){var _b=this._popupmenu;if(_b){_b.set_idcolumn(_a);}if(_a!=this._p_idcolumn){this._p_idcolumn=_a;this.on_apply_idcolumn();}};_pMenu.on_apply_idcolumn=function(){if(this._innerdataset){if(this._is_created){this._createMenu();}var _a=this._items;var _b=_a.length;for(var _d=0;_d<_b;_d++ ){var _c=this._innerdataset.getColumn(_a[_d].datarow,this._p_idcolumn);_a[_d]._id=_c?_c:"";}}};_pMenu.set_levelcolumn=function(_a){var _b=_a;var _c=this._popupmenu;if(_c){_c.set_levelcolumn(_b);}if(_b!=this._p_levelcolumn){this._p_levelcolumn=_b;this.on_apply_levelcolumn();}};_pMenu.on_apply_levelcolumn=function(){if(this._innerdataset){if(this._is_created){this._createMenu();}var _a=this._items;var _b=_a.length;for(var _d=0;_d<_b;_d++ ){var _c=this._innerdataset.getColumn(_a[_d].datarow,this._p_levelcolumn);_a[_d].level=_c?_c:-1;}}};_pMenu.set_userdatacolumn=function(_a){var _b=_a;var _c=this._popupmenu;if(_c){_c.set_userdatacolumn(_b);}if(_b!=this._p_userdatacolumn){this._p_userdatacolumn=_b;this.on_apply_userdatacolumn();}};_pMenu.on_apply_userdatacolumn=function(){if(this._innerdataset){if(this._is_created){this._recalcLayout();}var _a=this._items;var _b=_a.length;for(var _d=0;_d<_b;_d++ ){var _c=this._innerdataset.getColumn(_a[_d].datarow,this._p_userdatacolumn);if(_c){_a[_d].userdata=_c;}}}};_pMenu.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";this.on_apply_innerdataset();}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this._p_innerdataset=_a.id;this.on_apply_innerdataset();}};_pMenu._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this._p_innerdataset=_a;}};_pMenu.getInnerDataset=function(){return this._innerdataset;};_pMenu.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(_a!=this._p_innerdataset){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this._p_innerdataset=_a;}this.on_apply_innerdataset();}else if(this._p_innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this._p_innerdataset);this.on_apply_innerdataset();}};_pMenu.on_apply_innerdataset=function(){var _a=this._popupmenu;if(_a){_a.set_innerdataset(this._p_innerdataset);}this._setEventHandlerToInnerDataset();var _b=this.getElement();if(_b&&this._p_innerdataset){this._createMenu();this._last_focused=null;}};_pMenu.set_icontextpadding=function(_a){this._icontextpadding=_a;this.on_apply_icontextpadding();};_pMenu.on_apply_icontextpadding=function(){if(this._popupmenu){this._popupmenu.set_icontextpadding(this._icontextpadding);}};_pMenu.set_hotkeytextgap=function(_a){this._hotkeytextgap=_a;this.on_apply_hotkeytextgap();};_pMenu.on_apply_wordSpacing=function(_a){nexacro.Component.prototype.on_apply_wordSpacing.call(this,_a);this._createMenu();};_pMenu.on_apply_letterSpacing=function(_a){nexacro.Component.prototype.on_apply_letterSpacing.call(this,_a);this._createMenu();};_pMenu._properties=[{name:"autohotkey"},{name:"popupitemheight"},{name:"popuptype"},{name:"navigationbuttonsize"},{name:"popupnavigationbuttonsize"},{name:"captioncolumn"},{name:"checkboxcolumn"},{name:"enablecolumn"},{name:"hotkeycolumn"},{name:"iconcolumn"},{name:"idcolumn"},{name:"levelcolumn"},{name:"userdatacolumn"},{name:"innerdataset"},{name:"hotkeytextgap"}];nexacro._defineProperties(_pMenu,_pMenu._properties);_pMenu.isPopup=function(){return this._isPopupVisible();};_pMenu.trackPopup=function(_a,_b,_c,_d){_a=parseInt(_a);this._track_capture=_d==undefined?true:nexacro._toBoolean(_d);var _e=this._items;var _f=_e[_a];if(_e&&_f){this._showPopup(_f,_b-_f._adjust_left,_c,this._track_capture);this._menuitemindex=_e[_a]._p_index;return true;}return false;};_pMenu.cancelPopup=function(){var _a=this._popupmenu;if(_a){if(_a.isPopup()){_a.cancelPopup();}}return true;};_pMenu._callback_onvaluechanged=function(_a,_b){if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pMenu.on_notify_menuitem_onmouseleave=function(_a){this._last_mouseleave_iteminfo={index:_a.index,bindindex:_a._bindindex,level:_a.parent.level};};_pMenu.on_notify_menuitem_onmouseenter=function(_a){var _b=this._popupmenu;var _c;this._menuitemonmouseenter=_a;if(_b){if(_b._is_popup()||this._menuitemindex>-1){if(this._previtemindex!=_a.index){_b.cancelPopup();if(this._is_item_selected){this._showPopup(_a);_a._on_apply_selected(true);this._item_focus(_a,true);this._menuitemindex=_a.index;}_c=this._items[this._previtemindex];if(_c){_c._on_apply_selected(false);_c._changeStatus("focused",false);}this._previtemindex=_a.index;}}}else{if(this._previtemindex!=_a.index){_c=this._items[this._previtemindex];if(_c){_c._on_apply_selected(false);_c._changeStatus("focused",false);}}if(this._is_item_selected&&this._menuitemindex>-1&&_a.enable){this._showPopup(_a);this._item_focus(_a,true);_a._on_apply_selected(true);this._previtemindex=this._menuitemindex=_a.index;}else if(this._menuitemindex!=_a.index){this._menuitemindex=-1;}}this._popupitemindex=_a.index;return true;};_pMenu.on_notify_menuitem_onclick=function(_a){if(!_a){return;}var _b=this._p_popuptype;if(_a.enable==false||_b=="none"){return;}if(nexacro._enableaccessibility){this._want_tab=true;}if(!this._is_alive){return;}if(this._previtemindex!=_a.index){var _c=this._items[this._previtemindex];if(_c){_c._on_apply_selected(false);}this._previtemindex=_a.index;}if(this._isEnable()&&this._p_enableevent&&_a._isEnable()){var _d=this._getRootComponent(_a);if(!_a._canExpand){this.on_fire_onitemclick(_d,_a._id,_a.userdata,_a.index,_a.parent.level,_a);}}this._item_focus(_a,false);if(this._isPopupVisible()){_a._on_apply_selected(true);}if(this._menuitemindex>-1){this._is_item_selected=true;}};_pMenu.on_notify_menuitem_onlbuttondown=function(_a){if(this._previtemindex!=_a.index){var _b=this._items[this._previtemindex];if(_b){_b._on_apply_selected(false);}}var _c=this._popupmenu;if(_c){if(_c._is_popup()){_c.cancelPopup();this._popupitemindex=_a.index;this._is_item_selected=false;this._item_focus(_a,false);return;}}else{this._menuitemonmouseenter=_a;}if(_a._canExpand&&_a._isEnable()){this._showPopup(_a);this._menuitemindex=_a.index;}else if(this._menuitemindex>-1){this._item_focus(_a,false);_a._on_apply_selected(false);this._menuitemindex=-1;this._is_item_selected=false;return;}if(this._menuitemindex!=_a.index){this._item_focus(_a,true);_a._on_apply_selected(true);}this._previtemindex=this._menuitemindex=_a.index;};_pMenu.on_notify_navigationnext_onclick=function(){this._closePopup();this._navigationNext();};_pMenu.on_notify_navigationprev_onclick=function(){this._closePopup();this._navigationPrev();};_pMenu.on_notify_onclosepopup=function(_a){var _b=this._getWindow();if(_b&&this._track_capture){_b._releaseCaptureLock(this);}var _c=this._items;if(_c){var _d=this._previtemindex;var _e=_c[_d];if(_e){_e._on_apply_selected(false);}this._popupitemindex=this._menuitemindex=-1;}};_pMenu.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onlbuttondown",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onlbuttondown._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _o=this._getEventInfoComponent(_l);var _p=new nexacro.MenuMouseEventInfo(this,"onlbuttonup",_o.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_o,_o.level,_o.index,_o._bindindex,_n);return this.onlbuttonup._fireUserEvent(this,_p);}return false;};_pMenu.on_fire_user_onrbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onrbuttondown",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onrbuttondown._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _o=this._getEventInfoComponent(_l);var _p=new nexacro.MenuMouseEventInfo(this,"onrbuttonup",_o.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_o,_o.level,_o.index,_o._bindindex,_n);return this.onrbuttonup._fireUserEvent(this,_p);}return false;};_pMenu.on_fire_oncontextmenu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oncontextmenu&&this.oncontextmenu._has_handlers){var _n=this._getEventInfoComponent(_b);var _o=new nexacro.MenuContextMenuEventInfo(this,"oncontextmenu",_n.id,_c,_h,_i,_j,_k,_l,_d,_e,_f,_g,_a,_n,_n.level,_n.index,_n._bindindex,_m);return this.oncontextmenu._fireEvent(this,_o);}return false;};_pMenu.on_fire_user_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseup&&this.onmouseup._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmouseup",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onmouseup._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmousedown&&this.onmousedown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmousedown",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onmousedown._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_onmouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseenter&&this.onmouseenter._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmouseenter",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onmouseenter._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_onmouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseleave&&this.onmouseleave._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmouseleave",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,this._last_mouseleave_iteminfo.level,this._last_mouseleave_iteminfo.index,this._last_mouseleave_iteminfo.bindindex,_m);return this.onmouseleave._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_onmousemove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmousemove&&this.onmousemove._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmousemove",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onmousemove._fireUserEvent(this,_o);}return false;};_pMenu.on_fire_user_ondrag=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.ondrag&&this.ondrag._has_handlers){var _o=this._getDragData();var _p=this._getEventInfoComponent(_m);var _q=new nexacro.MenuDragEventInfo(this,"ondrag",_p.id,_o,null,"text",null,this,_m,_k,_l,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_p.level,_p.index,_p._bindindex,_n);return [this.ondrag._fireUserEvent(this,_q),this,_m,_o,_q.userdata];}return [false];};_pMenu.on_fire_user_ondrop=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondrop&&this.ondrop._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondrop",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.level,_t.index,_t._bindindex,_s);return this.ondrop._fireUserEvent(this,_u);}return false;};_pMenu.on_fire_user_ondragenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondragenter&&this.ondragenter._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondragenter",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.level,_t.index,_t._bindindex,_s);return this.ondragenter._fireUserEvent(this,_u);}return false;};_pMenu.on_fire_user_ondragleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondragleave&&this.ondragleave._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondragleave",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,this._last_mouseleave_iteminfo.level,this._last_mouseleave_iteminfo.index,this._last_mouseleave_iteminfo.bindindex,_s);return this.ondragleave._fireUserEvent(this,_u);}return false;};_pMenu.on_fire_user_ondragmove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondragmove&&this.ondragmove._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondragmove",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.level,_t.index,_t._bindindex,_s);return this.ondragmove._fireUserEvent(this,_u);}return false;};_pMenu.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro._enableaccessibility;var _i=this._popupmenu_find(this);var _j;var _k=this._isPopupmenuVisible(this);var _l=this._menuitemindex>-1?this._menuitemindex:this._popupitemindex;var _m=this._items;var _n;if(_m[_l]){_n=this._popupmenuitem_extend(_m[_l]);}var _o=nexacro.Event;var _p;switch(_a){case _o.KEY_UP:if(_h){break;}if(!_k){if(_n){_j=this._items[_l];if(_j){this._showPopup(_j);}}}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}break;case _o.KEY_DOWN:if(_h){break;}if(!_k){if(_n&&_l>-1){_j=this._items[_l];if(_j){this._showPopup(_j);this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}}else if(_l==-1){this._select_menuitem(0);}}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}break;case _o.KEY_LEFT:if(_h&&!_k&&this._menuitemindex<=-1){if(this._isNavigationVisible()){this._start_navigation_index=0;this._rearrangeMenuItems(false,1);}_p=_l;this._select_menuitem(this._getItemIndex(-1),_p,_k,"prev");}else if(!_h){if(_l==-1){this._select_menuitem(0);}else if(_l>-1&&(!_k||(nexacro._isNull(this._popupmenu))||this._popupmenu._popupitemindex<0)){this._select_menuitem(this._getItemIndex(-1),_l,_k,"prev");}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}}break;case _o.KEY_RIGHT:if(_h&&!_k&&this._menuitemindex<=-1){if(this._isNavigationVisible()){this._start_navigation_index=0;this.nextbutton._changeStatus("disabled",false);this.prevbutton._changeStatus("disabled",true);this._rearrangeMenuItems(false,-1);}_p=_l;this._select_menuitem(this._getItemIndex(1),_p,_k);}else if(!_h){if(_l==-1){this._select_menuitem(0);}else if(_l>-1&&(!_k||!_n)){this._select_menuitem(this._getItemIndex(1),_l,_k,"next");}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}}break;case _o.KEY_ENTER:if(!_k){_j=this._items[this._menuitemindex];if(_n){if(_j&&_j._isEnable()){this._showPopup(_j);}this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}else{if(_j){var _q=_j._userstatus=="selected"?true:false;this.on_notify_menuitem_onclick(_j);if(_q){_j._changeUserStatus("selected",false);this._is_item_selected=false;}else{_j._changeUserStatus("selected",true);}}}}else if(!_h){this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}break;case _o.KEY_ESC:if(_k){this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}else{_j=this._items[this._menuitemindex];if(_f._p_parent==_i){this._item_killfocus(_j);_j._on_apply_selected(false);this._menuitemindex=-1;}else{_j._on_focus(false);}}break;default:break;}return nexacro.Component.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pMenu.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pMenu.on_fire_onkillfocus=function(_a,_b){this._closePopup();var _c=this._menuitemindex;if(_c>-1){var _d=this._items[_c];if(_d){_d._on_apply_selected(false);}}var _e=this._last_focused;if(_e&&_e!=_a){this._do_defocus(_e,true);this._popupitemindex=-1;this._menuitemindex=-1;this._last_focused=null;}this._is_item_selected=false;nexacro.Component.prototype.on_fire_onkillfocus.call(this,_a,_b);};_pMenu.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f){if(this.onmenuclick&&this.onmenuclick._has_handlers){var _g=new nexacro.MenuClickEventInfo(_a,"onmenuclick",_b,_c,_d,_e,_f);this.onmenuclick._fireEvent(this,_g);}};_pMenu._fire_on_Popupmenu=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._popupmenu;if(_h){_h.on_fire_sys_onkeydown(_a,_b,_c,_d,_e,_f,_g);}};_pMenu._createMenu=function(){var _a=this.getElement();if(_a){this._deleteMenu();var _b=this._innerdataset;if(_b&&this._p_captioncolumn&&this._p_captioncolumn&&this._p_idcolumn){var _c=0;var _d=0;var _e=0;var _f=_b.getRowCount();var _g,_h,_i,_j,_k,_l;var _m;var _n=true;var _o=this._getMenuHeight();for(var _r=0;_r<_f;_r++ ){_i=_b.getColumn(_r,this._p_hotkeycolumn);_j=_b.getColumn(_r,this._p_idcolumn);_k=_b.getColumn(_r,this._p_levelcolumn);if(_r==(_f -1)||_k>=_b.getColumn(_r+1,this._p_levelcolumn)){_n=false;}if(_k==0){_g=_b.getColumn(_r,this._p_captioncolumn);_h=_b.getColumn(_r,this._p_enablecolumn);_l=_b.getColumn(_r,this._p_userdatacolumn);_m=new nexacro._MenuItemControl("item"+_r,0,0,0,0,null,null,null,null,null,null,this);this._items.push(_m);_m.userdata=_l;_m._bindindex=_r;_m.index=_e++ ;_m.datarow=_r;_m._id=_j?_j:"";_m.level=_k;if(_g){_m.set_text(_g);}_m._setEventHandler("onlbuttondown",this.on_notify_menuitem_onlbuttondown,this);_m._setEventHandler("onclick",this.on_notify_menuitem_onclick,this);if(!(nexacro._isTouchInteraction&&nexacro._SupportTouch)){_m._setEventHandler("onmouseenter",this.on_notify_menuitem_onmouseenter,this);_m._setEventHandler("onmouseleave",this.on_notify_menuitem_onmouseleave,this);}if(_r==_b.getRowCount()-1){_m._canExpand=false;}else{_k=_b.getColumn(_r+1,this._p_levelcolumn);if(_k<=this.level){_m._canExpand=false;}}_m.set_enable(_h==false||_h=="false"||_h==0||_h=="0"?false:true);_m.createComponent();}if(_i&&!_n){this._setHotkey(_j,_i,_m);}}if(this.fittocontents!=="none"){this._update_position();}if(this._items.length){this._items_width=[];var _p;var _q=this._items[0]._getCurrentStyleBorder();for(_r=0;_r<this._items.length;_r++ ){_m=this._items[_r];_p=_m._on_getFitSize();_d=_o-(_q?_q.top._width+_q.bottom._width:0);_m.move(_c,0,_p[0],_d);this._items_width.push(_p[0]);this._items_total_width+=_p[0];_c+=_p[0];}}}}};_pMenu._deleteMenu=function(){var _a=this._hot_key_list;var _b=_a.length;var _c,_d=this._getMainForm();for(_c=0;_c<_b;_c++ ){nexacro._unregisterHotkeyComp(_d,this,_a[_c].key);}this._hot_key_list=[];this._items_width=[];this._items_total_width=0;var _e=this._items;if(_e){_b=_e.length;for(_c=0;_c<_b;_c++ ){_e[_c].destroy();_e[_c]=null;}this._items=[];}};_pMenu._createNavigationButton=function(){var _a=new nexacro.Button("prevbutton",0,0,0,0,null,null,null,null,null,null,this);_a._setControl("ButtonControl");_a.createComponent();_a.set_visible(true);_a._setEventHandler("onclick",this.on_notify_navigationprev_onclick,this);_a.on_created();_a._changeStatus("disabled",true);this.prevbutton=_a;var _b=new nexacro.Button("nextbutton",0,0,0,0,null,null,null,null,null,null,this);_b._setControl("ButtonControl");_b.createComponent();_b.set_visible(true);_b._setEventHandler("onclick",this.on_notify_navigationnext_onclick,this);_b.on_created();this.nextbutton=_b;};_pMenu._recalcLayout=function(){if(this._isNavigationVisible()){this._showNavigationButton(true);}else{this._showNavigationButton(false);}this._rearrangeMenuItems();};_pMenu._showNavigationButton=function(_a){this._is_navigation_visible=_a;var _b,_c;if(_a){if(!this.nextbutton||!this.prevbutton){this._createNavigationButton();}if(!this.nextbutton._is_created){this.nextbutton.on_created();}if(!this.prevbutton._is_created){this.prevbutton.on_created();}_c=this.nextbutton;_b=this.prevbutton;var _d=this._p_navigationbuttonsize;var _e=0;var _f=0;if(!_d){var _g=this._getNavigationbuttonWidth(_b,_c);_e=_g[0];_f=_g[1];}else{_e=_d;_f=_d;}var _h=this._getClientWidth();var _i=this._getClientHeight();_b.set_visible(true);_b.move(0,0,_e,_i);_c.set_visible(true);_c.move(_h-_f,0,_f,_i);}else{_c=this.nextbutton;if(_c){_c.set_visible(false);_c.move(0,0,0,0);}_b=this.prevbutton;if(_b){_b.set_visible(false);_b.move(0,0,0,0);}}};_pMenu._rearrangeMenuItems=function(_a,_b){var _c,_d;var _e=this._items;var _f=this._items_width;var _g=_f.length;var _h=this._start_navigation_index;var _i=this._end_navigation_index;var _j=this._getClientWidth();var _k=this._is_navigation_visible?(this._p_navigationbuttonsize||this._prev_width||0):0;var _l=this._is_navigation_visible?(this._p_navigationbuttonsize||this._next_width||0):0;var _m=_k+_l;var _n=0;if(this.fittocontents=="height"||this.fittocontents=="both"){if(_e[0]){_n=_e[0]._on_getFitSize()[1];}}else{_n=this._getMenuHeight();}if(_a){for(_c=_i -1;_c>=0;_c-- ){_m+=_f[_c];_h=_c;if(_c==_i -1||_m>_j){break;}}for(_c=0,_d=_h;_c<_d;_c++ ){if(_e[_c]){_e[_c]._applyElementVisible(false);}}for(_c=_h;_c<_i;_c++ ){if(_e[_c]){_e[_c]._applyElementVisible(true);_e[_c].move(_k,0,_f[_c],_n);}_k+=_f[_c];}if(_i>0&&_i<_g){for(_c=_i+1;_c<_g;_c++ ){if(_e[_c]){_e[_c]._applyElementVisible(false);}}}}else{for(_c=0,_d=_h;_c<_d;_c++ ){if(_e[_c]){_e[_c]._applyElementVisible(false);}}for(_c=_h;_c<_g;_c++ ){_m+=_f[_c];if(_c==_h||_m<=_j){if(_e[_c]){_e[_c]._applyElementVisible(true);_e[_c].move(_k,0,_f[_c],_n);}}else{if(_b<0&&_c==_i&&_i==this._end_navigation_index){return true;}break;}_i=_c+1;_k+=_f[_c];}if(_i>0&&_i<_g){for(_c=_i;_c<_g;_c++ ){_e[_c]._applyElementVisible(false);}}}this._start_navigation_index=_h;this._end_navigation_index=_i;};_pMenu._navigationNext=function(_a){var _b=this._items.length;var _c=this._end_navigation_index;var _d=false;if(_c<_b){if(this._start_navigation_index==0){this.prevbutton._changeStatus("disabled",false);}this._start_navigation_index++ ;}if(_a&&_c>=_b){this._start_navigation_index=0;this.nextbutton._changeStatus("disabled",false);this.prevbutton._changeStatus("disabled",true);}var _e=this._rearrangeMenuItems(_d,-1);if(_e){this._navigationNext();}if(this._end_navigation_index==_b){this.nextbutton._changeStatus("disabled",true);}};_pMenu._navigationPrev=function(_a){var _b=this._start_navigation_index;var _c=this._items.length;var _d=false;if(_b>0){_b-- ;if(_b==0){this.prevbutton._changeStatus("disabled",true);}}else if(_a&&_b<=0){this._end_navigation_index=_c;this.nextbutton._changeStatus("disabled",true);this.prevbutton._changeStatus("disabled",false);_d=true;}this._start_navigation_index=_b;var _e=this._rearrangeMenuItems(_d,1);if(_e){this._navigationPrev(true);}if(_c>this._end_navigation_index){this.nextbutton._changeStatus("disabled",false);}};_pMenu._showPopup=function(_a,_b,_c,_d){var _e=this._p_popuptype;if(_e=="none"){return;}if(this._innerdataset&&this._p_levelcolumn&&this._p_captioncolumn&&this._p_idcolumn&&_a._canExpand===true){var _f=this._popupmenu;if(_f==null){_f=this._popupmenu=new nexacro.PopupMenu("menupopupmenu",0,0,0,0,null,null,null,null,null,null,this);_f._setControl();_f._is_focus_accept=false;this._setPopupContains(true);var _g=this._color?this._color:this._getCurrentStyleInheritValue("color");if(_g){_f.set_color(_g.value);}var _h=this._font?this._font:this._getCurrentStyleInheritValue("font");if(_h){_f.set_font(_h.value);}_f.level=1;_f.index=_a.index;_f.datarow=_a.datarow+1;_f.setInnerDataset(this._innerdataset);_f.set_iconcolumn(this._p_iconcolumn);_f.set_captioncolumn(this._p_captioncolumn);_f.set_checkboxcolumn(this._p_checkboxcolumn);_f.set_hotkeycolumn(this._p_hotkeycolumn);_f.set_idcolumn(this._p_idcolumn);_f.set_levelcolumn(this._p_levelcolumn);_f.set_userdatacolumn(this._p_userdatacolumn);_f.set_enablecolumn(this._p_enablecolumn);_f.set_navigationbuttonsize(this._p_popupnavigationbuttonsize);_f.set_cssclass(this.cssclass);_f.createComponent();_f._setEventHandler("oncloseup",this.on_notify_onclosepopup,this);}else{_f.datarow=_a.datarow+1;_f.set_cssclass(this.cssclass);}if(this._icontextpadding){_f.set_icontextpadding(this._icontextpadding);}if(this._p_popupitemheight){_f.set_itemheight(this._p_popupitemheight);}_f._p_popuptype=this._p_popuptype;_f._track_capture=_d;_f._trackPopup(_a,"vertical",_b,_c);this._is_item_selected=true;if(_f._is_popup()){var _i=this._getWindow();if(_i){if(this._track_capture){_i._setCaptureLock(this,true,false);}else{_i._releaseCaptureLock();}}}}};_pMenu._closePopup=function(){var _a=this._popupmenu;if(_a){_a.cancelPopup();var _b=this._getWindow();if(_b&&this._track_capture){_b._releaseCaptureLock(this);}}var _c=this._menuitemindex;{var _d=this._items[_c];if(_d){_d._on_apply_selected(false);}}this._popupitemindex=-1;this._menuitemindex=-1;};_pMenu._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pMenu._callbackFromDataset=function(_a,_b){var _c=_b.reason;if(_c==91){this._deleteMenu();}else{this._createMenu();if(this._is_created){this._recalcLayout();}}};_pMenu._item_focus=function(_a,_b){var _c=this._last_focused;if(_c&&_c!=_a){this._do_defocus(_c,false);}if(_c!=_a){if(nexacro._enableaccessibility){if(_a instanceof nexacro._PopupMenuItemControl){_a._on_focus(false,"downkey");}else{_a._on_focus(true,"downkey");}}else{_a._on_focus(false,"");}if(!(_a instanceof nexacro._PopupMenuItemControl)){this._last_focused=_a;}}};_pMenu._item_killfocus=function(_a){if(_a){if(nexacro._enableaccessibility){var _b=this._getWindow();if(_b){_b._removeFromCurrentFocusPath(_a,true);}}}};_pMenu._select_menuitem=function(_a,_b,_c,_d){var _e=this._items[_a>-1?_a:this._menuitemindex];var _f=this._items[_b];this._closePopup();if(_f&&_a!=_b){_f._on_apply_selected(false);this._do_defocus(_f,false);}if(this._isNavigationVisible()&&_d){if(_d=="next"){if(_a<this._previtemindex||_a>=this._end_navigation_index){this._navigationNext(true);}}else if(_d=="prev"){if(_a>this._previtemindex||_a<this._start_navigation_index){this._navigationPrev(true);}}}this._previtemindex=this._menuitemindex=_a;if(this._is_item_selected){this._showPopup(_e);_e._on_focus(false);var _g=this._popupmenu;if(_g){_g._select_menuitem(_g._getItemIndex(0));}}this._item_focus(_e,true);_e._on_apply_selected(true);};_pMenu._getItemIndex=function(_a){if(_a===undefined){_a=0;}var _b=this._menuitemindex>-1?this._menuitemindex:this._popupitemindex;_b+=_a;var _c=this._items?this._items.length-1:0;if(_b>_c){_b=0;}else if(_b<0){_b=_c;}var _d=this._items[_b];if(!nexacro._enableaccessibility&&_d&&_d._p_enable==false&&_a<5&&_a>-5){return this._getItemIndex(_a+_a);}return _b;};_pMenu._getMenuHeight=function(){var _a=0;if(this.fittocontents=="height"||this.fittocontents=="both"){_a=this._on_getFitSize()[1];}else{var _b=0;var _c=this._getCurrentStyleBorder();var _d=this._getCurrentStylePadding();if(_c){_b+=_c._getBorderHeight();}if(_d){_b+=_d.top+_d.bottom;}_a=this._adjust_height-_b;}return _a;};_pMenu._getNavigationbuttonWidth=function(_a,_b){var _c=0;var _d,_e,_f,_g=0;var _h=_a._getCSSStyleValue("icon","enabled");if(_h){_d=nexacro._getImageSize(_h.url,nexacro._emptyFn,this);if(_d){_g=_d.width;_e=_a._getCSSStyleValue("padding",this._status);_f=_a._getCSSStyleValue("border",this._status);if(_e){_g+=_e.left+_e.right;}if(_f){if(_f._single){_g+=_f.top._width+_f.top._width;}else{_g=_f.left._width+_f.right._width;}}this._prev_width=_g;}}var _i=_b._getCSSStyleValue("icon","enabled");if(_i){_d=nexacro._getImageSize(_i.url,nexacro._emptyFn,this);if(_d){_c=_d.width;_e=_b._getCSSStyleValue("padding",this._status);_f=_b._getCSSStyleValue("border",this._status);if(_e){_c+=_e.left+_e.right;}if(_f){if(_f._single){_c+=_f.top._width+_f.top._width;}else{_c=_f.top._width+_f.bottom._width;}}this._next_width=_c;}}return [_g,_c];};_pMenu._getPopupControl=function(){return this._getRootComponent(this)._popupmenu;};_pMenu._getEventInfoComponent=function(_a){while(!_a._is_eventinfo_control){_a=_a._p_parent;}return _a;};_pMenu._setEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._setEventHandler("onload",this._callbackFromDataset,this);this._innerdataset._setEventHandler("onrowposchanged",this._callbackFromDataset,this);this._innerdataset._setEventHandler("oncolumnchanged",this._callbackFromDataset,this);this._innerdataset._setEventHandler("onrowsetchanged",this._callbackFromDataset,this);this._innerdataset._setEventHandler("onvaluechanged",this._callback_onvaluechanged,this);}};_pMenu._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onload",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("onrowposchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("oncolumnchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("onvaluechanged",this._callback_onvaluechanged,this);this._innerdataset=null;}};_pMenu._setFocus=function(_a,_b){var _c=this._previtemindex;if(_b>-1||_b<4){this._focus_direction=_b;}else{this._focus_direction=-1;}var _d=this.setFocus(_a);var _e=this._items;var _f=_e.length-1;if(this._isNavigationVisible()){this._previtemindex=0;this._start_navigation_index=0;this._rearrangeMenuItems(false,1);}if(_f>0){if(_b>=2){this._focus_obj=this;this._menuitemindex=-1;}else{if(_b==0){this._menuitemindex=0;}else if(_b==1){this._menuitemindex=_f;}this._focus_obj=_e[this._menuitemindex];this._menuitemonmouseenter=this._focus_obj;this._select_menuitem(0,_c);}}else{if(nexacro._enableaccessibility){this._focus_obj=this;}this._previtemindex=0;this._menuitemindex=-1;var _g=this._last_focused;if(_g){this._do_defocus(_g,true);}this._on_focus(true);}return _d;};_pMenu._setHotkey=function(_a,_b,_c){var _d=new nexacro._HotKey(_b);if(_d._isEmpty()){delete _d;}else{if(this._is_created){this._registerItemHotkey(_d);}}var _e={id:_a,key:_d,obj:_c};this._hot_key_list.push(_e);};_pMenu._loaded_expImage=function(_a,_b,_c){this._expImage_width=_b;this._expImage_height=_c;};_pMenu._loaded_chkImage=function(_a,_b,_c){this._chkImage_width=_b;this._chkImage_height=_c;};_pMenu._load_image=function(_a,_b){var _c=this._control_element;if(_c){var _d=_a;if(_d){_d=nexacro._getURIValue(_d);_d=nexacro._getImageLocation(_d,this._getRefFormBaseUrl());var _e;if(_b){_e=nexacro._getImageSize(_d,this._loaded_expImage,this);if(_e){this._expImage_width=_e.width;this._expImage_height=_e.height;}}else{_e=nexacro._getImageSize(_d,this._loaded_chkImage,this);if(_e){this._chkImage_width=_e.width;this._chkImage_height=_e.height;}}}}};_pMenu._isPopupVisible=function(){return this._popupmenu?this._popupmenu._is_popup():false;};_pMenu._isPopupmenuVisible=function(_a){if(_a._popupmenu==null||_a._popupmenu.visible==false){return false;}return true;};_pMenu._isNavigationVisible=function(){if(this._items_total_width>this._getClientWidth()){return true;}return false;};_pMenu._item_find=function(_a){if(_a._popupmenu==null||_a._popupmenu.visible==false){return _a._items;}return _a._popupmenu._items;};_pMenu._popupmenu_find=function(_a){var _b=_a;while(_b){if(_b._popupmenu===null||_b._popupmenu.visible==false){break;}_b=_b._popupmenu;}return _b;};_pMenu._popupmenuitem_extend=function(_a){return _a._canExpand;};_pMenu._do_defocus=function(_a,_b){var _c=this._getWindow();_c._removeFromCurrentFocusPath(_a,true);_a._changeStatus("focused",false);if(_b){_c._removeFromCurrentFocusPath(this,false);}};delete _pMenu;}if(!nexacro._PopupMenuItemControl){nexacro._PopupMenuItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._MenuItemControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pPopupMenuItemControl=nexacro._createPrototype(nexacro._MenuItemControl,nexacro._PopupMenuItemControl);nexacro._PopupMenuItemControl.prototype=_pPopupMenuItemControl;_pPopupMenuItemControl._type_name="PopupMenuItemControl";_pPopupMenuItemControl._is_subcontrol=true;_pPopupMenuItemControl.expimgelem=null;_pPopupMenuItemControl.chkwidth=0;_pPopupMenuItemControl.textwidth=0;_pPopupMenuItemControl.hotkeywidth=0;_pPopupMenuItemControl.expwidth=0;_pPopupMenuItemControl.expheight=0;_pPopupMenuItemControl.index=0;_pPopupMenuItemControl.datarow=0;_pPopupMenuItemControl.icon="";_pPopupMenuItemControl.userdata=undefined;_pPopupMenuItemControl.buttonalign="";_pPopupMenuItemControl.accessibilityrole="menuitem";_pPopupMenuItemControl._id="";_pPopupMenuItemControl._check=false;_pPopupMenuItemControl._icon=null;_pPopupMenuItemControl._hotkeytext="";_pPopupMenuItemControl._canExpand=true;_pPopupMenuItemControl._hotkey_string="";_pPopupMenuItemControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=new nexacro.Static("popupmenuitemtext",0,0,0,0,null,null,null,null,null,null,this);_b._setControl();_b._is_eventinfo_control=false;_b._setEventHandler("onclick",this.on_notify_itemclick,this);_b.createComponent();var _c=new nexacro.Static("popupmenuitemhotkeytext",0,0,0,0,null,null,null,null,null,null,this);_c._setControl();_c._is_eventinfo_control=false;_c._setEventHandler("onclick",this.on_notify_itemclick,this);_c.set_text(this._hotkeytext?this._hotkeytext:"");_c.createComponent();this._textcontrol=_b;this._hotkeytextcontrol=_c;}};_pPopupMenuItemControl.on_created_contents=function(_a){this.on_apply_text();this._on_apply_hotkeytext();if(this._textcontrol){this._textcontrol.on_created(_a);}if(this._hotkeytextcontrol){this._hotkeytextcontrol.on_created(_a);}if(this._iconcontrol){this._iconcontrol.on_created(_a);}if(this._expiconcontrol){this._expiconcontrol.on_created(_a);}};_pPopupMenuItemControl.on_create_contents_command=function(){var _a="";if(this._textcontrol){_a+=this._textcontrol.createCommand();}if(this._hotkeytextcontrol){_a+=this._hotkeytextcontrol.createCommand();}if(this._iconcontrol){_a+=this._iconcontrol.createCommand();}if(this._expiconcontrol){_a+=this._expiconcontrol.createCommand();}return _a;};_pPopupMenuItemControl.on_attach_contents_handle=function(_a){if(this._textcontrol){this._textcontrol.attachHandle(_a);}if(this._hotkeytextcontrol){this._hotkeytextcontrol.attachHandle(_a);}if(this._iconcontrol){this._iconcontrol.attachHandle(_a);}if(this._expiconcontrol){this._expiconcontrol.attachHandle(_a);}};_pPopupMenuItemControl.on_destroy_contents=function(){if(this._textcontrol){this._textcontrol.destroy();this._textcontrol=null;}if(this._hotkeytextcontrol){this._hotkeytextcontrol.destroy();this._hotkeytextcontrol=null;}if(this._iconcontrol){this._iconcontrol.destroy();this._iconcontrol=null;}if(this._expiconcontrol){this._expiconcontrol.destroy();this._expiconcontrol=null;}};_pPopupMenuItemControl.on_change_containerRect=function(){this._updateControlPosition();};_pPopupMenuItemControl.on_get_accessibility_label=function(){var _a=this._p_text;var _b=this._hotkeytext;return _a+" "+_b;};_pPopupMenuItemControl.on_getIDCSSSelector=function(){return "popupmenuitem";};_pPopupMenuItemControl.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(this._textcontrol){this._textcontrol._setEnable(_a);}if(this._hotkeytextcontrol){this._hotkeytextcontrol._setEnable(_a);}if(this._iconcontrol){this._iconcontrol._setEnable(_a);}if(this._expiconcontrol){this._expiconcontrol._setEnable(_a);}};_pPopupMenuItemControl.on_apply_text=function(_a){if(this._textcontrol){this._textcontrol.set_text(_a);}};_pPopupMenuItemControl.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);if(nexacro._enableaccessibility){this._updateAccessibilityLabel(this);}};_pPopupMenuItemControl._on_apply_hotkeytext=function(){if(this._hotkeytextcontrol){this._hotkeytextcontrol.set_text(this._hotkeytext);}};_pPopupMenuItemControl.on_notify_itemclick=function(_a,_b){var _c=this._p_parent;if(_c){_c.on_notify_menuitem_onclick(this,_b);}};_pPopupMenuItemControl._on_apply_mouseover=function(_a){if(this.selected){return;}if(_a){this._changeStatus("mouseover",true);}else{this._changeStatus("mouseover",false);}};_pPopupMenuItemControl._isFocusAcceptable=function(){return false;};_pPopupMenuItemControl._load_image=function(_a){var _b=this._control_element;if(_b){if(_a){var _c=this._expiconcontrol;if(!_c){_c=new nexacro._IconText("popupmenuitemexpandimage",0,0,0,0,null,null,null,null,null,null,this);_c._setEventHandler("onclick",this.on_notify_itemclick,this);_c._setControl();_c.createComponent();this._expiconcontrol=_c;}else{_c.set_text("");}_c.set_icon(_a);}}};_pPopupMenuItemControl._updateControlPosition=function(){if(!this._is_created_contents){return;}var _a=this._getItemControlPosition();if(!_a){return;}var _b=this._getClientHeight();var _c=_a.icon_x;var _d=_a.iconimgwidth;var _e=_a.iconheight;var _f=_a.text_x;var _g=_a.textwidth;var _h=_a.textheight;var _i=_a.hotkey_x;var _j=_a.hotkeywidth;var _k=_a.hotkeyheight;var _l=_a.gap;var _m=_j?_i+_j+_l:_i;var _n=_a.expimgwidth?_a.expimgwidth:10;var _o=_a.expimgheight?_a.expimgheight:this.height;var _p=_o?((_b-_o)/2):0;var _q=this._iconcontrol;if(_q){_q.move(_c,0,_d,_e);}var _r=this._expiconcontrol;var _s=this._hotkeytextcontrol;if(this._canExpand&&_r){_r.move(_m,_p,_n,_o);if(_s){_s.set_visible(false);}}else if(_s){if(_s.text==""){_s.set_visible(false);}else{_s.set_visible(true);_s.move(_i,0,_j,_k);}}var _t=this._textcontrol;if(_t){_t.move(_f,0,_g,_h);}};_pPopupMenuItemControl._updateAccessibilityLabel=function(_a){var _b=this._getRootComponent(this);var _c=_b._innerdataset.getRowCount();if(_a){_a._setAccessibilityInfoIndex(_a.datarow+1);_a._setAccessibilityInfoCount(_c);_a._setAccessibilityFlagHasPopup(_a._canExpand?true:false);}};_pPopupMenuItemControl._getWindowPosition=function(){return nexacro.Component.prototype._getWindowPosition.call(this);};_pPopupMenuItemControl._isChecked=function(){var _a=this._check;if(!!_a||_a.toString().toLowerCase()=="true"){return true;}return false;};_pPopupMenuItemControl._getItemControlPosition=function(){return this._p_parent._itempos;};_pPopupMenuItemControl._getWidth=function(){var _a=this.chkwidth;var _b=this.textwidth;var _c=this.hotkeywidth;var _d=this.expwidth;var _e=this.gap;if(_b>0){_a+=(_b+_e);}if(_c>0&&_d>0){_a+=Math.max(_c,_d)+_e;}else{if(_c>0){_a+=(_c+_e);}_a+=_d;}return _a;};_pPopupMenuItemControl._setId=function(_a){this._id=_a;};_pPopupMenuItemControl._setCheck=function(_a){this._check=_a;if(this._check){var _b=this._iconcontrol;if(!_b){_b=new nexacro._Icon("popupmenuitemcheckbox",0,0,0,0,null,null,null,null,null,null,this);_b._setEventHandler("onclick",this.on_notify_itemclick,this);_b._setControl();_b.createComponent();this._iconcontrol=_b;if(this._is_created_contents){_b.on_created();}}}};_pPopupMenuItemControl._setIcon=function(_a){this._icon=_a;var _b=this._iconcontrol;if(!_b){_b=new nexacro._Icon("popupmenuitemicon",0,0,0,0,null,null,null,null,null,null,this);_b._setEventHandler("onclick",this.on_notify_itemclick,this);_b._setControl();_b.createComponent();this._iconcontrol=_b;}var _c=this._icon;if(_c){_b.set_icon(_c);}};_pPopupMenuItemControl._setHotkeyText=function(_a){if(this._hotkeytext!=_a){this._hotkeytext=_a;this._on_apply_hotkeytext();}};_pPopupMenuItemControl._setExpandimage=function(){if(this._canExpand){var _a=this._expiconcontrol;if(!_a){_a=new nexacro._IconText("popupmenuitemexpandimage",0,0,0,0,null,null,null,null,null,null,this);_a._setEventHandler("onclick",this.on_notify_itemclick,this);_a._setControl();_a.createComponent();this._expiconcontrol=_a;}var _b=_a._getCSSStyleValue("icon");if(!_b){_a.set_text(">");}}};_pPopupMenuItemControl._setUserdata=function(_a){if(this.userdata!=_a){this.userdata=_a;}};delete _pPopupMenuItemControl;}if(!nexacro.PopupMenu){nexacro.MenuCloseUpEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"oncloseup";this.fromobject=_a;this.fromreferenceobject=_d?_d:_a;this.isselect=_c;};var _pMenuCloseUpEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuCloseUpEventInfo);nexacro.MenuCloseUpEventInfo.prototype=_pMenuCloseUpEventInfo;_pMenuCloseUpEventInfo._type_name="MenuCloseUpEventInfo";delete _pMenuCloseUpEventInfo;nexacro.MenuClickEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.eventid=_b||"onmenuclick";this.id=_c;this.fromobject=_a;this.fromreferenceobject=_g?_g:_a;this.index=_e;this.level=_f;this.userdata=_d;};var _pMenuClickEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MenuClickEventInfo);nexacro.MenuClickEventInfo.prototype=_pMenuClickEventInfo;_pMenuClickEventInfo._type_name="MenuClickEventInfo";delete _pMenuClickEventInfo;nexacro.PopupMenu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.PopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._attached_comp=this;this._items=[];this._lineItems=[];this._hot_key_list=[];this._itempos={};this._last_mouseleave_iteminfo={bindindex:-1,index:-1,level:-1};this._iconImage_info={};};var _pPopupMenu=nexacro._createPrototype(nexacro.PopupControl,nexacro.PopupMenu);nexacro.PopupMenu.prototype=_pPopupMenu;_pPopupMenu._type_name="PopupMenu";_pPopupMenu._popupmenu=null;_pPopupMenu._innerdataset="";_pPopupMenu._p_autohotkey=false;_pPopupMenu._p_innerdataset="";_pPopupMenu._p_captioncolumn="";_pPopupMenu._p_checkboxcolumn="";_pPopupMenu._p_enablecolumn="";_pPopupMenu._p_hotkeycolumn="";_pPopupMenu._p_iconcolumn="";_pPopupMenu._p_idcolumn="";_pPopupMenu._p_levelcolumn="";_pPopupMenu._p_userdatacolumn="";_pPopupMenu._p_itemheight=undefined;_pPopupMenu._p_navigationbuttonsize=undefined;_pPopupMenu._p_accessibilityrole="menu";_pPopupMenu._closeflag=true;_pPopupMenu._is_updatedimages=false;_pPopupMenu._is_navigation_visible=false;_pPopupMenu._is_fire_onpopup=undefined;_pPopupMenu.level=0;_pPopupMenu.datarow=0;_pPopupMenu.beforeindex=-1;_pPopupMenu._start_navigation_index=0;_pPopupMenu._end_navigation_index=0;_pPopupMenu._previtemindex=0;_pPopupMenu._popupitemindex=-1;_pPopupMenu._popupitempreviousindex=-1;_pPopupMenu._selected_itemindex=-1;_pPopupMenu._itemheight=0;_pPopupMenu._items_total_height=0;_pPopupMenu._icontextpadding=5;_pPopupMenu._want_arrow=true;_pPopupMenu._want_tab=true;_pPopupMenu._is_subcontrol=false;_pPopupMenu._is_fluid_control=false;_pPopupMenu._is_trackpopup=false;_pPopupMenu._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onmenuclick":1,"onpopup":1,"onmousedown":1,"onmouseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"oncloseup":1,"oninnerdatachanged":1};_pPopupMenu.on_create_contents=function(){return;};_pPopupMenu.on_created_contents=function(_a){nexacro.PopupControl.prototype.on_created_contents.call(this,_a);var _b=this.getElement();if(_b){if(!this._innerdataset&&this._p_innerdataset){this._innerdataset=this._findDataset(this._p_innerdataset);this.on_apply_innerdataset();}this._createPopupMenu();var _c=this._lineItems;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].on_created();}}if(nexacro._enableaccessibility){this._setAccessibilityInfoLevel(this.level);}}};_pPopupMenu.on_create_contents_command=function(){return "";};_pPopupMenu.on_attach_contents_handle=function(_a){nexacro.PopupControl.prototype.on_created.call(this,_a);};_pPopupMenu.on_destroy_contents=function(){this._deletePopupMenu();if(this._popupmenu){this._popupmenu.destroyComponent();this._popupmenu=null;}this._removeEventHandlerToInnerDataset();};_pPopupMenu.on_change_containerRect=function(){this._reCalcSize();};_pPopupMenu.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(!_a){_a=this._p_enable;}var _b=this._popupmenu;if(_b){_b._setEnable(_a);}var _c=this._items;for(var _d=0,_e=_c.length;_d<_e;_d++ ){_c[_d]._setEnable(_a);}};_pPopupMenu.on_apply_prop_cssclass=function(){var _a=this._popupmenu;if(_a){_a.on_apply_cssclass(this._p_cssclass);}};_pPopupMenu._getCSSMapParent=function(){var _a=this._p_parent;while(_a._is_subcontrol){_a=_a._p_parent;}return _a;};_pPopupMenu._getDlgCode=function(){var _a=this._want_arrow;var _b=this._want_tab;this._want_tab=true;return {want_tab:_b,want_return:true,want_escape:false,want_chars:false,want_arrows:_a};};_pPopupMenu.on_get_accessibility_label=function(){return this.id;};_pPopupMenu._isPopupContains=function(){var _a=this._getRootComponent(this);return _a._is_popupcontains?true:false;};_pPopupMenu.set_autohotkey=function(_a){var _b=nexacro._toBoolean(_a);if(_b!=this._p_autohotkey){this._p_autohotkey=_b;this.on_apply_autohotkey(_b);}};_pPopupMenu.on_apply_autohotkey=function(_a){var _b;var _c=this._hot_key_list;if(_c){if(_a){}else{for(_b=_c.length-1;_b>-1;_b-- ){this._unregisterItemHotkey(_c[_b].key);}}}};_pPopupMenu.set_visible=function(_a){if(this._is_trackpopup){nexacro.PopupControl.prototype.set_visible.apply(this,arguments);}};_pPopupMenu.set_itemheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)||_a<0){return;}}if(_a!=this._p_itemheight){this._p_itemheight=_a;}};_pPopupMenu.set_navigationbuttonsize=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(_a!=this._p_navigationbuttonsize){this._p_navigationbuttonsize=_a;}};_pPopupMenu.set_popuptype=function(_a){var _b=["center","none","normal","system"];if(_b.indexOf(_a)==-1){return;}var _c=this._p_popuptype;if(_a!=_c){this._p_popuptype=_a;}};_pPopupMenu.set_captioncolumn=function(_a){if(_a!=this._p_captioncolumn){this._p_captioncolumn=_a;this.on_apply_captioncolumn();}};_pPopupMenu.on_apply_captioncolumn=function(){var _a=this._popupmenu;if(_a){_a.set_captioncolumn(this._p_captioncolumn);}var _b=this._innerdataset;if(_b){this._createPopupMenu();var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].set_text(_b.getColumn(_c[_e].datarow,this._p_captioncolumn)||"");}}}};_pPopupMenu.set_checkboxcolumn=function(_a){if(_a!=this._p_checkboxcolumn){this._p_checkboxcolumn=_a;this.on_apply_checkboxcolumn();}};_pPopupMenu.on_apply_checkboxcolumn=function(){var _a=this._popupmenu;if(_a){_a.set_checkboxcolumn(this._p_checkboxcolumn);}var _b=this._innerdataset;if(_b){this._createPopupMenu();var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._setCheck(nexacro._toBoolean(_b.getColumn(_c[_e].datarow,nexacro._toString(this._p_checkboxcolumn))));}}if(this._p_visible){this._reCalcSize();}}};_pPopupMenu.set_enablecolumn=function(_a){if(_a!=this._p_enablecolumn){this._p_enablecolumn=_a;this.on_apply_enablecolumn();}};_pPopupMenu.on_apply_enablecolumn=function(){var _a=this._popupmenu;if(_a){_a.set_enablecolumn(this._p_enablecolumn);}var _b=this._innerdataset;if(_b){this._createPopupMenu();}};_pPopupMenu.set_hotkeycolumn=function(_a){if(_a!=this._p_hotkeycolumn){this._p_hotkeycolumn=_a;this.on_apply_hotkeycolumn();}};_pPopupMenu.on_apply_hotkeycolumn=function(){var _a=this._popupmenu;if(_a){_a.set_hotkeycolumn(this._p_hotkeycolumn);}var _b=this._innerdataset;if(_b){this._createPopupMenu();var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._setHotkeyText(_b.getColumn(_c[_e].datarow,this._p_hotkeycolumn)||"");}}}};_pPopupMenu.set_iconcolumn=function(_a){if(_a!=this._p_iconcolumn){this._p_iconcolumn=_a;this.on_apply_iconcolumn();}};_pPopupMenu.on_apply_iconcolumn=function(){var _a=this._innerdataset;var _b=null;if(_a){var _c=this._popupitemindex;this._createPopupMenu();var _d=this._items;if(_d){var _e=_d.length;for(var _h=0;_h<_e;_h++ ){var _f=_d[_h];if(!_f._check){_f._setIcon(_a.getColumn(_d[_h].datarow,this._p_iconcolumn)||"");}if(_c==_h){_f._changeUserStatus("selected",true);_b=_f;}}}if(this._p_visible){this._reCalcSize();}}var _g=this._popupmenu;if(_g){_g.set_iconcolumn(this._p_iconcolumn);if(_b){_g._reCalcPopupPosition(_b);}}};_pPopupMenu.set_idcolumn=function(_a){if(_a!=this._p_idcolumn){this._p_idcolumn=_a;this.on_apply_idcolumn();}};_pPopupMenu.on_apply_idcolumn=function(){var _a=this._popupmenu;if(_a){_a.set_idcolumn(this._p_idcolumn);}var _b=this._innerdataset;if(_b){this._createPopupMenu();var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._setId(_b.getColumn(_c[_e].datarow,this._p_idcolumn)||"");}}}};_pPopupMenu.set_levelcolumn=function(_a){if(_a!=this._p_levelcolumn){this._p_levelcolumn=_a;this.on_apply_levelcolumn();}};_pPopupMenu.on_apply_levelcolumn=function(){var _a=this._popupmenu;if(_a){_a.set_levelcolumn(this._p_levelcolumn);}var _b=this._innerdataset;if(_b){this._createPopupMenu();var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].level=_b.getColumn(_c[_e].datarow,this._p_levelcolumn)||-1;}}}};_pPopupMenu.set_userdatacolumn=function(_a){if(_a!=this._p_userdatacolumn){this._p_userdatacolumn=_a;this.on_apply_userdatacolumn();}};_pPopupMenu.on_apply_userdatacolumn=function(){var _a=this._popupmenu;if(_a){_a.set_userdatacolumn(this._p_userdatacolumn);}var _b=this._innerdataset;if(_b){if(this._items.length==0){this._createPopupMenu();}var _c=this._items;if(_c){var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e]._setUserdata(_b.getColumn(_c[_e].datarow,this._p_userdatacolumn)||null);}}}};_pPopupMenu.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(_a!=this._p_innerdataset){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this._p_innerdataset=_a;}this.on_apply_innerdataset();}else if(this._p_innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this._p_innerdataset);this.on_apply_innerdataset();}};_pPopupMenu.on_apply_innerdataset=function(){var _a=this._innerdataset;if(_a){_a._setEventHandler("onrowposchanged",this._callbackFromDataset,this);_a._setEventHandler("oncolumnchanged",this._callbackFromDataset,this);_a._setEventHandler("onrowsetchanged",this._callbackFromDataset,this);_a._setEventHandler("onvaluechanged",this._callback_onvaluechanged,this);}if(this._popupmenu){this._popupmenu.set_innerdataset(this._p_innerdataset);}this._createPopupMenu();this.beforeindex=-1;};_pPopupMenu.set_icontextpadding=function(_a){this._icontextpadding= +_a;};_pPopupMenu._properties=[{name:"autohotkey"},{name:"captioncolumn"},{name:"checkboxcolumn"},{name:"enablecolumn"},{name:"hotkeycolumn"},{name:"iconcolumn"},{name:"idcolumn"},{name:"innerdataset"},{name:"itemheight"},{name:"levelcolumn"},{name:"navigationbuttonsize"},{name:"popuptype"},{name:"userdatacolumn"}];nexacro._defineProperties(_pPopupMenu,_pPopupMenu._properties);_pPopupMenu._on_hotkey=function(_a,_b,_c,_d){var _e,_f;var _g=this._hot_key_list;var _h=_g.length;for(var _i=0,_j,_k;_i<_h;_i++ ){_e=_g[_i];_f=_e.obj;_j=_e.key;if(_j._keycode==_a){_k=_j._modifierkey;if(_b==((_k&0x02)==0x02)&&_c==((_k&0x01)==0x01)&&_d==((_k&0x04)==0x04)){this.on_fire_onitemclick(this,_e.id,_f.userdata,_f.index,_f._p_parent.level,_f);break;}}}};_pPopupMenu._on_focus=function(_a,_b,_c,_d,_e,_f){if(_b=="focus"){this._is_fire_onpopup=false;}var _g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(_a==false){if(nexacro._enableaccessibility){if(!this._isAccessibilityEnable()){this._select_menuitem(0,-1);}}}return _g;};_pPopupMenu._do_defocus=function(_a,_b){var _c=this._getWindow();_c._removeFromCurrentFocusPath(_a,true);if(_b){_c._removeFromCurrentFocusPath(this,false);}};_pPopupMenu._item_focus=function(_a,_b,_c){if(nexacro._enableaccessibility){_c=_c?_c:"downkey";}if(_a){if(nexacro._enableaccessibility){if(_a instanceof nexacro._PopupMenuItemControl){_a._on_focus(false,_c);}else{_a._on_focus(true,_c);}}}};_pPopupMenu._item_killfocus=function(_a){if(_a){if(nexacro._enableaccessibility){var _b=this._getWindow();if(_b){_b._removeFromCurrentFocusPath(_a,true);}}if(_a._on_apply_mouseover){_a._on_apply_mouseover(false);}}};_pPopupMenu._fire_on_Popupmenu=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._popupmenu;if(_h){_h.on_fire_sys_onkeydown(_a,_b,_c,_d,_e,_f,_g);}};_pPopupMenu._callbackFromDataset=function(){this._createPopupMenu();this._closeAllPopup();};_pPopupMenu._callback_onvaluechanged=function(_a,_b){if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pPopupMenu.on_notify_menuitem_onclick=function(_a,_b){var _c=this._getPopupType();var _d=this._previtemindex;this._previtemindex=_a.index;if(_a.enable==false||!_c||_c=="none"){return;}var _e=this._getRootComponent(_a);var _f=this._p_parent;if(_d>-1){var _g=this._items[_d];if(_g){_g._changeUserStatus("selected",false);}}if(_a._canExpand){if(_d!=_a.index){var _h=this._popupmenu;if(_h){_h._closePopup();}}this._showPopup(_a);_a._changeUserStatus("selected",true);if(_e instanceof nexacro.Menu){_e._popupitemindex=_a.index;}this._popupitemindex=_a.index;}else if(_a._canExpand===false){if(_f&&_f._p_enable){if(_f instanceof nexacro.Menu){if(this._p_parent.onmenuclick&&this._p_parent.onmenuclick._has_handlers){this._p_parent.on_notify_menuitem_onclick(_a,_b);}this._closeAllPopup();}else if(!(_f instanceof nexacro.PopupMenu)){this._closeAllPopup();if(this.onmenuclick&&this.onmenuclick._has_handlers){this.on_fire_onitemclick(_e,_a._id,_a.userdata,_a.index,_a._p_parent.level,_a);}}else{_f.on_notify_menuitem_onclick(_a,_b);this._closeAllPopup();}}}};_pPopupMenu.on_notify_onmouseenter=function(_a){var _b=this._p_parent._menuitemonmouseenter;if(_b){var _c=_b._p_parent;if(_c&&_c.level<this.level){_b._changeUserStatus("selected",true);}}};_pPopupMenu.on_notify_menuitem_onmouseenter=function(_a){var _b=_a.index;var _c=this._p_parent._menuitemonmouseenter;var _d=this._popupitemindex;this._popupitemindex=_a.index;var _e=this._popupmenu;if(_e&&_e._is_popup()){if(this.beforeindex!=_a.index){_e.cancelPopup();this._showPopup(_a);}}else{var _f=this._getPopupType();if(_f&&_f!="none"){this._showPopup(_a);}}if(_d>-1&&_b!=_d){var _g=this._items[_d];if(_g){_g._changeUserStatus("selected",false);}}if(_c){var _h=_a._p_parent;var _i=_c._p_parent;if(this.beforeindex>-1&&this.beforeindex!=_b){var _j=this._items[this.beforeindex];if(_j){_j._changeUserStatus("selected",false);}}if(_h&&_h!=_i){if(_i&&_h.level>_i.level&&_c._userstatus!="selected"){_c._changeUserStatus("selected",true);}}}this.beforeindex=this._popupitemindex=_a.index;this._menuitemonmouseenter=_a;if(!nexacro._enableaccessibility){var _k=this._items;_k[_a.index]._on_apply_mouseover(true);if(this._popupitempreviousindex==-1||this._popupitemindex==-1){this._popupitempreviousindex=0;this._popupitemindex=0;}if(_k.length<=this._popupitemindex){this._popupitemindex=_k.length-1;this._popupitempreviousindex=this._popupitemindex;}if(_k[this._previtemindex]){_k[this._previtemindex]._on_apply_mouseover(false);}this._previtemindex=_a.index;}};_pPopupMenu.on_notify_menuitem_onmouseleave=function(_a){var _b=this._getRootComponent(this);_b._last_mouseleave_iteminfo={index:_a.index,bindindex:_a._bindindex,level:_a.parent.level};};_pPopupMenu.on_notify_menuitem_onlbuttondown=function(_a){this._menuitemonmouseenter=_a;var _b=this._popupmenu;if(_b){if(_b._is_popup()){if(this.beforeindex!=_a.index){this.beforeindex=_a.index;}_b.cancelPopup();}}if(_a._canExpand){this._showPopup(_a);var _c=this._getRootComponent(_a);if(_c instanceof nexacro.Menu){_c._popupitemindex=_a.index;}}};_pPopupMenu.on_notify_navigationprev_onclick=function(){var _a=this._popupmenu;if(_a){_a._closePopup();}this._navigationPrev();};_pPopupMenu.on_notify_navigationnext_onclick=function(){var _a=this._popupmenu;if(_a){_a._closePopup();}this._navigationNext();};_pPopupMenu.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onlbuttondown",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.parent.level,_n.index,_n._bindindex,_m);return this.onlbuttondown._fireUserEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _o=this._getEventInfoComponent(_l);var _p=new nexacro.MenuMouseEventInfo(_a,"onlbuttonup",_o.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_o,_o.parent.level,_o.index,_o._bindindex,_n);return this.onlbuttonup._fireUserEvent(this,_p);}return false;};_pPopupMenu.on_fire_user_onrbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onrbuttondown",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.level,_n.index,_n._bindindex,_m);return this.onrbuttondown._fireUserEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _o=this._getEventInfoComponent(_l);var _p=new nexacro.MenuMouseEventInfo(this,"onrbuttonup",_o.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_o,_o.level,_o.index,_o._bindindex,_n);return this.onrbuttonup._fireUserEvent(this,_p);}return false;};_pPopupMenu.on_fire_oncontextmenu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oncontextmenu&&this.oncontextmenu._has_handlers){var _n=this._getEventInfoComponent(_b);var _o=new nexacro.MenuContextMenuEventInfo(this,"oncontextmenu",_n.id,_c,_h,_i,_j,_k,_l,_d,_e,_f,_g,_a,_n,_n.level,_n.index,_n._bindindex,_m);return this.oncontextmenu._fireEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmousedown&&this.onmousedown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmousedown",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.parent.level,_n.index,_n._bindindex,_m);return this.onmousedown._fireUserEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseup&&this.onmouseup._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmouseup",_l.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.parent.level,_n.index,_n._bindindex,_m);return this.onmouseup._fireUserEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_onmouseenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseenter&&this.onmouseenter._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmouseenter",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.parent.level,_n.index,_n._bindindex,_m);return this.onmouseenter._fireUserEvent(this,_o);}};_pPopupMenu.on_fire_user_onmouseleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseleave&&this.onmouseleave._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=this._last_mouseleave_iteminfo;var _p=new nexacro.MenuMouseEventInfo(this,"onmouseleave",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_o.level,_o.index,_o.bindindex,_m);return this.onmouseleave._fireUserEvent(this,_p);}return false;};_pPopupMenu.on_fire_user_onmousemove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmousemove&&this.onmousemove._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.MenuMouseEventInfo(this,"onmousemove",_n.id,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_n,_n.parent.level,_n.index,_n._bindindex,_m);return this.onmousemove._fireUserEvent(this,_o);}return false;};_pPopupMenu.on_fire_user_ondrag=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.ondrag&&this.ondrag._has_handlers){var _o=this._getDragData();var _p=this._getEventInfoComponent(_m);var _q=new nexacro.MenuDragEventInfo(this,"ondrag",_l.id,_o,null,"text",null,this,_m,_k,_l,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_p.parent.level,_p.index,_p._bindindex,_n);return [this.ondrag._fireUserEvent(this,_q),this,_m,_o,_q.userdata];}return [false];};_pPopupMenu.on_fire_user_ondrop=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondrop&&this.ondrop._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondrop",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.parent.level,_t.index,_t._bindindex,_s);return this.ondrop._fireUserEvent(this,_u);}return false;};_pPopupMenu.on_fire_user_ondragenter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondragenter&&this.ondragenter._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondragenter",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.parent.level,_t.index,_t._bindindex,_s);return this.ondragenter._fireUserEvent(this,_u);}return false;};_pPopupMenu.on_fire_user_ondragleave=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondragleave&&this.ondragleave._has_handlers){var _t=this._last_mouseleave_iteminfo;var _u=this._getEventInfoComponent(_r);var _v=new nexacro.MenuDragEventInfo(this,"ondragleave",_u.id,_c,_d,_e,_f,_a,_b,_q,_u,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.level,_t.index,_t.bindindex,_s);return this.ondragleave._fireUserEvent(this,_v);}return false;};_pPopupMenu.on_fire_user_ondragmove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q,_r,_s){if(this.ondragmove&&this.ondragmove._has_handlers){var _t=this._getEventInfoComponent(_r);var _u=new nexacro.MenuDragEventInfo(this,"ondragmove",_t.id,_c,_d,_e,_f,_a,_b,_q,_t,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_t.parent.level,_t.index,_t._bindindex,_s);return this.ondragmove._fireUserEvent(this,_u);}return false;};_pPopupMenu.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._getRootComponent(this);var _i=this._popupmenu_find(this);var _j=this._isPopupmenuVisible(this);var _k=this._item_find(_i);var _l=_k.length-1;if(_a==nexacro.Event.KEY_TAB){if(!_j){if(!_d&&this._popupitemindex==_l||_d&&this._popupitemindex<0){this._want_tab=false;this._closePopup();}else{_i._item_killfocus(_k[_i._popupitemindex]);if(_d==false){this._popupitemindex++ ;}else{this._popupitemindex-- ;}if(_k[this._popupitemindex]){_h._menuitemonmouseenter=_k[this._popupitemindex];this._item_focus(_k[this._popupitemindex],true,"tabkey");}else{this._do_defocus(this._last_focused,true);this._on_focus(true);}}this._p_parent._getWindow()._keydown_element._event_stop=true;}else{if(!_d&&_i._popupitemindex==_l||_d&&_i._popupitemindex==0){_i._item_killfocus(_k[_i._popupitemindex]);_i._closePopup();_i=this._popupmenu_find(this);_k=this._item_find(_i);_i._item_focus(_k[_i._previtemindex],true,"tabkey");_i._popupitemindex=_i._previtemindex;}else{_i._item_killfocus(_k[_i._popupitemindex]);if(_d){_i._popupitemindex-- ;}else{_i._popupitemindex++ ;}_h._menuitemonmouseenter=_k[_i._popupitemindex];_i._item_focus(_k[_i._popupitemindex],true,"tabkey");}this._p_parent._getWindow()._keydown_element._event_stop=true;}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pPopupMenu.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._popupmenu_find(this);var _i=this._item_find(_h);var _j=this._isPopupmenuVisible(this);var _k=this._getPopupType();var _l=this._getRootComponent(this);var _m=nexacro.Event;var _n=nexacro._enableaccessibility;var _o,_p;var _q,_r;var _s=_l._isPopupVisible();switch(_a){case _m.KEY_UP:if(_n){break;}if(_h._popupitemindex>-1){if(!_j){_q=this._popupitemindex;_r=this._getItemIndex(-1);this._select_menuitem(_r,_q);}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}}else{_h._select_menuitem(this._getItemIndex(0));}break;case _m.KEY_DOWN:if(_n){break;}if(!_j){_q=this._popupitemindex;_r=this._getItemIndex(1);this._select_menuitem(_r,_q);}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}break;case _m.KEY_LEFT:if(_k=="none"){break;}if(_n){if(!_j){_q=this._popupitemindex;_r=this._getItemIndex(-1);this._select_menuitem(_r,_q);}else{}}else{if(_h._popupitemindex>-1){if(!_j){var _t=this._p_parent;if(_t instanceof nexacro.PopupMenu){_t._select_menuitem(_t._popupitemindex);this._closePopup();}else{_l._select_menuitem(_l._getItemIndex(-1),_l._popupitemindex,_s,"prev");}}else{this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}}else if(_j){this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}else{_i=this._items[this._popupitemindex];if(_i){_p=_h._popupmenuitem_extend(_i);}if(_p){this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}else if(this==_l){_l._select_menuitem(_l._getItemIndex(-1),_l._popupitemindex,_s,"prev");}else{this._closePopup();}}}break;case _m.KEY_RIGHT:if(_k=="none"){break;}if(_n){if(!_j){_q=this._popupitemindex;_r=this._getItemIndex(1);this._select_menuitem(_r,_q);}else{}}else{var _u=_h._popupitemindex;if(_u>-1){_i=_i[_u];if(!_i){return;}_p=_h._popupmenuitem_extend(_i);if(_p){_h._showPopup(_i);_o=this._popupmenu;if(_o){_h.on_fire_sys_onkeydown(_a,_b,_c,_d,_e,_f,_g);}else{_l._select_menuitem(_l._getItemIndex(1),0,_s);}}else{if(_j){_o=this._popupmenu;if(_o){_o.on_fire_sys_onkeydown(_a,_b,_c,_d,_e,_f,_g);}}else if(_l instanceof nexacro.PopupMenu&&this==_l){_l._select_menuitem(_l._getItemIndex(1),_l._popupitemindex,_s);}else if(!(_l instanceof nexacro.PopupMenu)){_l._select_menuitem(_l._getItemIndex(1),_l._popupitemindex,_s,"next");}}}else{_i=this._items[this._popupitemindex];if(_i){_p=_h._popupmenuitem_extend(_i);if(_p){_h._select_menuitem(this._getItemIndex(0));}else{_l._select_menuitem(_l._getItemIndex(1),_l._popupitemindex,_s,"next");}}else{_h._select_menuitem(this._getItemIndex(0));}}}break;case _m.KEY_ENTER:if(_k=="none"){break;}if(!_j){if(_h._popupitemindex>-1){_p=_h._popupmenuitem_extend(_i[_h._popupitemindex]);if(_p){_h._showPopup(_i[_h._popupitemindex]);_o=this._popupmenu;if(_o){_o.on_fire_sys_onkeydown(_a,_b,_c,_d,_e,_f,_g);}}else{_i=_h._items[_h._popupitemindex];if(_i){if(!_i._canExpand){_h.on_notify_menuitem_onclick(_i);}else{_h.on_notify_menuitem_onlbuttondown(_i);}}_l._closePopup();}}else{_h._select_menuitem(this._getItemIndex(0));}}else if(!nexacro._enableaccessibility){this._fire_on_Popupmenu(_a,_b,_c,_d,_e,_f,_g);}break;case _m.KEY_ESC:if(_k=="none"){break;}_o=this._popupmenu;if(_o&&this._isPopupmenuVisible(this)){_o.on_fire_sys_onkeydown(_a,_b,_c,_d,_e,_f,_g);}else{if(_f==_e||_f.parent==_e){this._closePopup();}else{_i=this._items[this._popupitemindex];if(_i){_i._on_focus(false);}}}break;default:break;}return nexacro.Component.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pPopupMenu.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f){var _g=this._getRootComponent(_a);if(_g.onmenuclick&&_g.onmenuclick._has_handlers){var _h=new nexacro.MenuClickEventInfo(_a,"onmenuclick",_b,_c,_d,_e,_f);_g.onmenuclick._fireEvent(_g,_h);}};_pPopupMenu.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pPopupMenu.on_fire_onpopup=function(_a){this._is_fire_onpopup=true;if(this.onpopup&&this.onpopup._has_handlers){var _b=new nexacro.EventInfo(_a,"onpopup");return this.onpopup._fireEvent(this,_b);}return false;};_pPopupMenu.on_fire_oncloseup=function(_a){if(!this._is_fire_onpopup){this.on_fire_onpopup(_a);}if(this.oncloseup&&this.oncloseup._has_handlers){var _b=(this._selected_itemindex>=0);var _c=new nexacro.MenuCloseUpEventInfo(_a,"oncloseup",_b);return this.oncloseup._fireEvent(this,_c);}return false;};_pPopupMenu.cancelPopup=function(){this._closePopup();};_pPopupMenu.closePopup=function(){this._closePopup();};_pPopupMenu.isPopup=function(){return this._is_popup();};_pPopupMenu.trackPopup=function(_a,_b,_c,_d){this._selected_itemindex=-1;this._track_capture=_d==undefined?true:nexacro._toBoolean(_d);if(!this._is_updatedimages){var _e=this._innerdataset;if(_e){var _f=this._items;var _g= +_e.getColumn(this.datarow+1,this._p_levelcolumn);for(var _i=0,_j=_f.length;_i<_j;_i++ ){if(_g>this.level){_f[_i]._setExpandimage();}}}this._is_updatedimages=true;}if(!this._is_subcontrol&&this._p_autohotkey){var _h=this._hot_key_list;for(var _i=0;_i<_h.length;_i++ ){this._registerItemHotkey(_h[_i].key);}}this._calcNavigationbutton(_b>0?_b:0);this._reCalcSize();this._setInheritStyleValues(this);this.on_created();this._adjustPopupPosition( +_a, +_b,_c);this.setFocus();if(!this._is_fire_onpopup){this.on_fire_onpopup(this);}};_pPopupMenu.trackPopupByComponent=function(_a,_b,_c,_d,_e){this._selected_itemindex=-1;this._track_capture=_e==undefined?true:nexacro._toBoolean(_e);if(!this._is_subcontrol&&this._p_autohotkey){var _f=this._hot_key_list;for(var _r=0;_r<_f.length;_r++ ){this._registerItemHotkey(_f[_r].key);}}this._reCalcSize();this._calcNavigationbutton(_c>0?_c:0);this.on_created();var _g=nexacro._getElementPositionInFrame(_a.getElement());var _h=_g.x;var _i=_g.y;var _j=this._getWindow();var _k=_j.clientWidth;var _l=_j.clientHeight;var _m=this._adjust_width;var _n=this._adjust_height;if(!_d){if(_h+_b+_m>_k){var _o=_k-_m;if(_o<0){_b= -_h;}else{_b=_o-_h;}}if(_i+_c+_n>_l){var _p=_l-_n;if(_p<0){_c= -_i;}else{_c=_p-_i;}}}var _q=this._getForm();_b= +_b+_h;_c= +_c+_i;this._adjustPopupPosition(_b,_c,_d,_q._getWindowPosition());this.setFocus();if(!this._is_fire_onpopup){this.on_fire_onpopup(this);}};_pPopupMenu.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";this.on_apply_innerdataset();}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this._p_innerdataset=_a.id;this.on_apply_innerdataset();}};_pPopupMenu.getInnerDataset=function(){return this._innerdataset;};_pPopupMenu._createPopupMenu=function(){var _a=this.getElement();if(_a){this._deletePopupMenu();var _b=this._innerdataset;if(_b&&this._p_levelcolumn&&this._p_captioncolumn&&this._p_idcolumn){var _c=0;var _d=this.datarow;var _e=_b.getRowCount();var _f=0;var _g=this._p_itemheight?this._p_itemheight:0;var _h=null;for(;_d<_e;_d++ ){var _i=this._getRootComponent(this);var _j=_b.getColumn(_d,this._p_idcolumn);var _k=_b.getColumn(_d,this._p_levelcolumn);var _l=_b.getColumn(_d,this._p_captioncolumn);var _m=_b.getColumn(_d,this._p_enablecolumn);var _n=_b.getColumn(_d,this._p_hotkeycolumn);var _o=_b.getColumn(_d,this._p_userdatacolumn);var _p=_b.getColumn(_d,this._p_iconcolumn);var _q=_b.getColumn(_d,this._p_checkboxcolumn);if(_k==this.level){if(_l=="-"){var _r=new nexacro.Static("separator",0,_f,0,1,null,null,null,null,null,null,this);_r._setControl();_r.set_background("black");_r.createComponent();_r._bLine=true;_f+=1;this._lineItems.push(_r);continue;}_h=new nexacro._PopupMenuItemControl("popupmenuitem"+_d,0,_f,0,_g,null,null,null,null,null,null,this);_h.createComponent();_f+=_g;_h._bindindex=_d;_h.index=_c++ ;_h.datarow=_d;_h.level=_k;_h.set_text(_l||"");_h._setEnable((_m===false||_m==="false"||_m===0||_m==="0")?false:true);_h._setId(_j||"");_h._setHotkeyText(_n||"");_h._setUserdata(_o);_q=nexacro._toBoolean(_q);if(_q){_h._setCheck(_q);}else if(_p){_h._setIcon(_p);}if(_d==_b.getRowCount()-1){_h._canExpand=false;}else{var _s= +_b.getColumn(_d+1,this._p_levelcolumn);if(_s<=this.level){_h._canExpand=false;}else{_h._setExpandimage();}}_h._setEventHandler("onclick",this.on_notify_menuitem_onclick,this);_h._setEventHandler("onlbuttondown",this.on_notify_menuitem_onlbuttondown,this);if(!(nexacro._isTouchInteraction&&nexacro._SupportTouch)){_h._setEventHandler("onmouseenter",this.on_notify_menuitem_onmouseenter,this);this._setEventHandler("onmouseenter",this.on_notify_onmouseenter,this);if(_i.onmouseleave){_h._setEventHandler("onmouseleave",this.on_notify_menuitem_onmouseleave,this);}}if(nexacro._enableaccessibility){_h.on_apply_accessibility();}this._items.push(_h);this._lineItems.push(_h);_h._real_visible=false;}else if(_k<this.level){break;}if(!this._is_subcontrol){if(_n){this._setHotkey(_j,_n,_h);}}}this._is_updatedimages=true;}}};_pPopupMenu._deletePopupMenu=function(){var _a;if(!this._is_subcontrol){for(_a=0;_a<this._hot_key_list.length;_a++ ){this._unregisterItemHotkey(this._hot_key_list[_a].key);this._hot_key_list[_a].hotkey=null;this._hot_key_list[_a].obj=null;}}for(_a=0;_a<this._items.length;_a++ ){this._items[_a].destroyComponent();this._items[_a]=null;}for(_a=0;_a<this._lineItems.length;_a++ ){this._lineItems[_a].destroyComponent();this._lineItems[_a]=null;}if(this.nextbutton){this.nextbutton.destroyComponent();this.nextbutton=null;}if(this.prevbutton){this.prevbutton.destroyComponent();this.prevbutton=null;}this._items=[];this._lineItems=[];this._hot_key_list=[];this._iconImage_info={};this._start_navigation_index=0;this._end_navigation_index=0;this._is_navigation_visible=false;};_pPopupMenu._showPopup=function(_a){var _b=this._getPopupType();if(_b=="none"){return;}if(this._innerdataset&&this._p_levelcolumn&&this._p_captioncolumn&&this._p_idcolumn&&_a._canExpand===true&&this._p_visible){var _c=this._popupmenu;if(!_c){_c=this._popupmenu=new nexacro.PopupMenu("menupopupmenu",0,0,0,0,null,null,null,null,null,null,this);_c._setControl();_c._is_focus_accept=false;var _d=this._color?this._color:this._getCurrentStyleInheritValue("color");if(_d){_c.set_color(_d.value);}var _e=this._font?this._font:this._getCurrentStyleInheritValue("font");if(_e){_c.set_font(_e.value);}_c.level=this.level+1;_c.datarow=_a.datarow+1;this._setPopupContains(true);_c._track_capture=false;_c._is_loading=true;_c.setInnerDataset(this._innerdataset);_c.set_captioncolumn(this._p_captioncolumn);_c.set_checkboxcolumn(this._p_checkboxcolumn);_c.set_hotkeycolumn(this._p_hotkeycolumn);_c.set_idcolumn(this._p_idcolumn);_c.set_levelcolumn(this._p_levelcolumn);_c.set_userdatacolumn(this._p_userdatacolumn);_c.set_enablecolumn(this._p_enablecolumn);_c.set_iconcolumn(this._p_iconcolumn);_c.set_popuptype(this._getPopupType());_c.set_cssclass(this._p_cssclass);_c.createComponent();}else{_c.datarow=_a.datarow+1;}var _f=this._p_itemheight;if(_f){_c.set_itemheight(_f);}_c._trackPopup(_a,"horizontal");}};_pPopupMenu._trackPopup=function(_a,_b,_c,_d){this._createPopupMenu();if(!this._is_subcontrol&&this._p_autohotkey){var _e=this._hot_key_list;for(var _ai=0;_ai<_e.length;_ai++ ){this._registerItemHotkey(_e[_ai].key);}}this._reCalcSize();this.on_created();var _f,_g,_h,_i;var _j=this._p_parent;var _k=this._getRootFrame();var _l=nexacro._getElementPositionInFrame(_k.getElement());var _m=this._getCSSStyleValue("padding",this._status);var _n=0,_o=0,_p=0,_q=0;if(_m){_n=_m.left;_o=_m.right;_p=_m.bottom;_q=_m.top;}var _r,_s,_t;var _u=this._width;var _v=this._height;var _w=_l.x+_k._adjust_width;var _x=_l.y+_k._adjust_height;var _y;var _z;_h=_u;_i=_v;if(_b=="horizontal"){var _aa=_j._padding?_j._padding:_j._getCSSStyleValue("padding",_j._status);var _ab=_aa?_aa.right:0;_t=nexacro._getElementPositionInFrame(_j.getElement());_r=_j._getClientWidth()+_ab;_f=_r;_g=0;if(!_d){_y=_t.y+_a._adjust_top+_v;if(_y>_x){if(_l.y<(_t.y-_v)){_g=_x-_y;}else{_i=this._getRootFrame()._adjust_height-_t.y-_a._adjust_top;this._showNavigationButton(true);}}else if(this._is_navigation_visible){this._showNavigationButton(false);}}else{_g=_d;}if(!_c){_z=_t.x;var _ac=_z+_r;if(_ac+_u>_w){if(_z-_u>0){_f= -_u;}}}else{_f=_c;}}else{_t=nexacro._getElementPositionInFrame(_a.getElement());_s=_a._adjust_height;_f=0;_g=_s;if(!_d){_y=_t.y+_s+_v;if(_y>_x){if(_l.y<(_t.y-_v)){_g= -_v;}else{_i=_x-_t.y-_j._adjust_height;this._showNavigationButton(true);}}else if(this._is_navigation_visible){this._showNavigationButton(false);}}else{_g+=_d;}if(!_c){_z=_t.x;if(_z+_u>_w){_f=_w-_z-_u;}}else{_f+=_c;}}var _ad=this._getPopupType();if(_ad=="center"){var _ae=_k._adjust_width;var _af=_k._adjust_height;if(nexacro._Browser=="Runtime"){_ae=Math.round(_ae/nexacro._getDevicePixelRatio(this.getElement()));_af=Math.round(_af/nexacro._getDevicePixelRatio(this.getElement()));}var _ag=(_ae/2)-(_h/2);var _ah=(_af/2)-(_i/2);this._adjustPopupPosition(_ag,_ah);}else{this._is_trackpopup=true;this._popupBy(_a,_f,_g -1,_h,_i);}};_pPopupMenu._adjustPopupPosition=function(_a,_b,_c,_d){var _e=this._getAlignPosition(_a,_b,_c);var _f=_e[0]<0?0:_e[0];var _g=_e[1]<0?0:_e[1];var _h=this._width;var _i=this._height;var _j=_f+_h;var _k=_g+_i;var _l=this._getWindow();var _m=_l.clientWidth;var _n=_l.clientHeight;var _o=_j-_m;if(_j>_m&&_f>_o){_f=_f-_o;}if(_k>_n){_g=_n-_i;}this._is_trackpopup=true;this._popup(_f,_g,_h,_i);};_pPopupMenu._reCalcPopupPosition=function(_a){var _b,_c,_d,_e;var _f=this._p_parent;var _g=this._getRootFrame();var _h=nexacro._getElementPositionInFrame(_g.getElement());var _i=this._getCSSStyleValue("padding",this._status);var _j=0,_k=0,_l=0,_m=0;if(_i){_j=_i.left;_k=_i.right;_l=_i.bottom;_m=_i.top;}var _n,_o;var _p=this._width;var _q=this._height;var _r=_h.x+_g._adjust_width;var _s=_h.y+_g._adjust_height;var _t;var _u;_d=_p+_j+_k;_e=_q+_l+_m;_o=nexacro._getElementPositionInFrame(_f.getElement());_n=_f._getClientWidth();_b=_n;_c=0;_t=_o.y+_a._adjust_top+_q;if(_t>_s){if(_h.y<(_o.y-_q)){_c=_s-_t;}else{_e=this._getRootFrame()._adjust_height-_o.y-_a._adjust_top;this._showNavigationButton(true);}}else if(this._is_navigation_visible){this._showNavigationButton(false);}_u=_o.x;var _v=_u+_n;if(_v+_p>_r){if(_u-_p>0){_b= -_p;}}var _w=this._getPopupType();if(_w=="center"){var _x=_g._adjust_width;var _y=_g._adjust_height;if(nexacro._Browser=="Runtime"){_x=Math.round(_x/nexacro._getDevicePixelRatio(this.getElement()));_y=Math.round(_y/nexacro._getDevicePixelRatio(this.getElement()));}var _z=(_x/2)-(_d/2);var _aa=(_y/2)-(_e/2);this._adjustPopupPosition(_z,_aa);}else{this._popupBy(_a,_b,_c -1,_d,_e);}};_pPopupMenu._closePopup=function(){var _a=this._popupmenu;if(_a){_a._closePopup();}var _b=this._getWindow();if(_b&&this._track_capture){_b._releaseCaptureLock(this);}var _c=this._hot_key_list;for(var _f=0;_f<_c.length;_f++ ){this._unregisterItemHotkey(_c[_f].key);}var _d=this._item_find(this);if(nexacro._enableaccessibility){this._item_killfocus(_d[this._popupitemindex]);}for(_f=0;_f<_d.length;_f++ ){var _e=_d[_f];_e._on_apply_mouseover(false);_e._on_apply_selected(false);}this._popupitemindex=-1;this.set_visible(false);this._is_trackpopup=false;};_pPopupMenu._closeAllPopup=function(){this._closePopup();};_pPopupMenu._reCalcSize=function(){var _a=this._innerdataset;if(_a&&this._p_captioncolumn){var _b=this._items;if(!_b||_b.length==0){return;}var _c=_b.length;var _d=this._status;var _e=_b[0]._getCurrentStyleInheritValue("font",this._status);var _f=_b[0]._getReferenceAbsoluteFont(_e);var _g=nexacro._getTextSize(">",_e,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,_f);var _h=parseInt(_g[0]);var _i=this._getControlInfo();var _j=_i[0];var _k=_i[1];var _l=_i[2];var _m=_i[3];var _n=_i[4];var _o=_i[5];var _p=0,_q=0;var _r=_i[6];var _s=0,_t=0,_u=0,_v=0;var _w=_i[7];var _x=_i[8];var _y=_i[9];var _z=_i[10];var _aa=_i[11];var _ab=0;var _ac=this._getCSSStyleValue("border",_d);var _ad=this._padding?this._padding:this._getCSSStyleValue("padding",_d);if(_r){_s=_r.left;_t=_r.right;_u=_r.top;_v=_r.bottom;}if(_o){if(_o.top){_p=_o.top._width;}if(_o.bottom){_q=_o.bottom._width;}}var _ae=0,_af=0,_ag=0,_ah=0;if(_ac){_ae=_ac.left._width;_af=_ac.top._width;_ag=_ac.right._width;_ah=_ac.bottom._width;}var _ai=0,_aj=0,_ak=0,_al=0;if(_ad){_ai=_ad.left;_ak=_ad.right;_aj=_ad.top;_al=_ad.bottom;}var _am=this._p_itemheight;var _an=0;if(_am==undefined){_am=_x+_p+_q+_u+_v;_an=_x;}else{_an=_am-_p-_q-_u-_v;}this._itemheight=_am;if(_aa){_ab=_am;}var _ao=0,_ap=0;if(!this._p_checkboxcolumn&&!this._p_iconcolumn){_w=0;_ab=0;_ap=0;}var _aq=0;if(_w&&_ab){if(_w>_ab){_aq=_w;}else{_aq=_ab;}}else if(_w){_aq=_w;}else{_aq=_ab;}var _ar=_s+_t+_ap+(_aq?_aq:0)+(_j?_j+_ao:0)+(_k?_k+_ao:0)+(_n?_y?_y+_ao:_ao+_h:0);var _as=_ar+_ai+_ak+_ae+_ag;var _at=this._items_total_height=_am* _c;var _au=_at+_af+_ah+_aj+_al;var _av=this.buttonsize|0;var _aw=this._isNavigationbuttonVisible();if(_aw){this._rearrangePopupMenuItems();}else{this._showNavigationButton(_aw);this.resize(_as,_au+this._lineItems.length-this._items.length);}var _ax=_aj+_av;var _ay=0;var _az=_aq;var _ba=_ay>_s?_az+_ap:_az;var _bb=_ba+_j+_ao;this._setItemControlPosition(_ay,_aq,_x,_ba,_j,_l,_bb,_k,_m,_ao,_ab,_y?_y:_h,_z?_z:0,_an);for(var _be=0;_be<this._lineItems.length;_be++ ){var _bc=this._lineItems[_be];if(_bc._bLine){var _bd=this._lineItems[_be+1];if(_bd&&_bd._p_height>0){_bc.move(0,_bd.top-1,_as,1);}else{if(_be>0&&this._lineItems[_be -1].height>0){_bc.move(0,this._lineItems[_be -1].height+this._lineItems[_be -1].top-1,_as,1);}else{_bc.move(0,0,0,0);}}}else{if(_aw==false){_bc.move(_ai,_ax,_ar,_am);}if(nexacro._enableaccessibility){_bc._updateAccessibilityLabel(_bc);}_ax+=_am;}}}};_pPopupMenu._rearrangePopupMenuItems=function(){var _a=this._start_navigation_index;var _b=this._itemheight;var _c=this._getClientWidth();var _d=this._getClientHeight();var _e=this._items;var _f=this._p_navigationbuttonsize||this._navigationbuttonsize||0;var _g=_f;var _h=_e.length;var _i=this._end_navigation_index;var _j=_g+_f;this._showNavigationButton(this._isNavigationbuttonVisible());var _k,_l;for(_k=0,_l=_a;_k<_l;_k++ ){_e[_k].move(0,0,0,0);}for(_k=_a;_k<=_h;_k++ ){var _m=_e[_k];_i=_k;_j+=_b;if(_k==_a||_j<_d){if(_m){_m.move(0,_g,_c,_b);}}else{break;}_g+=_b;}if(_i>0&&_i<_h){for(_k=_i;_k<_h;_k++ ){_e[_k].move(0,0,0,0);}}for(var _k=0;_k<this._lineItems.length;_k++ ){var _m=this._lineItems[_k];if(_m._bLine){var _n=this._lineItems[_k+1];if(_n&&_n.height>0){_m.move(0,_n.top-1,_c,1);}else{if(_k>0&&this._lineItems[_k -1].height>0){_m.move(0,this._lineItems[_k -1].height+this._lineItems[_k -1].top-1,_c,1);}else{_m.move(0,0,0,0);}}}}this._end_navigation_index=_i;};_pPopupMenu._select_menuitem=function(_a,_b){var _c=this._items;var _d=_c[_b];this._popupitemindex=_a;var _e=_c[_a];if(_b){this._previtemindex=_b;}if(_d&&_a!=_b){this._do_defocus(_d);_d._changeUserStatus("selected",false);}if(_e){this._item_focus(_e,true);_e._changeUserStatus("selected",true);this._menuitemonmouseenter=_e;}};_pPopupMenu._createNavigationButton=function(){var _a=new nexacro.Button("nextbutton",0,0,0,0,null,null,null,null,null,null,this);_a._setControl("ButtonControl");_a._is_focus_accept=false;_a.createComponent();_a.set_visible(true);_a._setEventHandler("onclick",this.on_notify_navigationnext_onclick,this);_a.on_created();this.nextbutton=_a;var _b=new nexacro.Button("prevbutton",0,0,0,0,null,null,null,null,null,null,this);_b._setControl("ButtonControl");_b._is_focus_accept=false;_b.createComponent();_b.set_visible(true);_b._setEventHandler("onclick",this.on_notify_navigationprev_onclick,this);_b.on_created();_b._changeStatus("disabled",true);this.prevbutton=_b;var _c=_b._getCSSStyleValue("icon","enabled");var _d;if(_c){_d=nexacro._getImageSize(_c.url,this._rearrangePopupMenuItems,this);if(_d){this._navigationbuttonsize=_d.height;this._rearrangePopupMenuItems();}}var _e=_a._getCSSStyleValue("icon","enabled");if(_e){_d=nexacro._getImageSize(_e.url,this._rearrangePopupMenuItems,this);if(_d){this._navigationbuttonsize=_d.height;this._rearrangePopupMenuItems();}}};_pPopupMenu._showNavigationButton=function(_a){this._is_navigation_visible=_a;var _b,_c;if(_a){if(!this.prevbutton||!this.nextbutton){this._createNavigationButton();}_b=this.prevbutton;_c=this.nextbutton;var _d=this._p_navigationbuttonsize;var _e=0;var _f=0;if(!_d){var _g=this._getNavigationbuttonHeight(_c,_b);_f=_g[0];_e=_g[1];}else{_f=_d;_e=_d;}this._navigationbuttonsize=_e;var _h=this._getClientWidth();var _i=this._getClientHeight();_b.set_visible(true);_b.move(0,0,_h,_e -1);_c.set_visible(true);_c.move(0,_i-_f,_h,_f -1);}else{_b=this.prevbutton;if(_b){_b.set_visible(false);_b.move(0,0,0,0);}_c=this.nextbutton;if(_c){_c.set_visible(false);_c.move(0,0,0,0);}}};_pPopupMenu._calcNavigationbutton=function(_a){var _b=this._getRootFrame();var _c=nexacro._getElementPositionInFrame(_b.getElement());var _d=_c.y+_b._adjust_height;if(this._items_total_height>_d){this._is_navigation_visible=true;if(this._itemheight<_d-_a){_d-=_a;}this.resize(this._width,_d);}else if(this._is_navigation_visible){this._is_navigation_visible=false;}};_pPopupMenu._navigationPrev=function(){var _a=this._start_navigation_index;if(_a>0){if(this._items.length==this._end_navigation_index){this.nextbutton._changeStatus("disabled",false);}_a-- ;if(_a==0){this.prevbutton._changeStatus("disabled",true);}}this._start_navigation_index=_a;this._rearrangePopupMenuItems();};_pPopupMenu._navigationNext=function(){var _a=this._items.length;if(this._end_navigation_index<_a){if(this._start_navigation_index==0){this.prevbutton._changeStatus("disabled",false);}this._start_navigation_index++ ;}this._rearrangePopupMenuItems();if(this._end_navigation_index==_a){this.nextbutton._changeStatus("disabled",true);}};_pPopupMenu._setHotkey=function(_a,_b,_c){var _d=new nexacro._HotKey(_b);if(_d._isEmpty()){delete _d;}var _e={id:_a,key:_d,obj:_c};this._hot_key_list.push(_e);};_pPopupMenu._registerItemHotkey=function(_a){if(!_a||_a._is_registered){return;}var _b=this._getMainForm();if(_b){nexacro._registerHotkeyComp(_b,this,_a);}this._setAccessibilityHotKey(_a);};_pPopupMenu._unregisterItemHotkey=function(_a){if(!_a||!_a._is_registered){return;}var _b=this._getMainForm();if(_b){nexacro._unregisterHotkeyComp(_b,this,_a);}};_pPopupMenu._loaded_expImage=function(_a,_b,_c){if(this._expImage_width!=_b||this._expImage_height!=_c){this._expImage_width=_b;this._expImage_height=_c;if(this._p_visible){this._reCalcSize();}}};_pPopupMenu._loaded_chkImage=function(_a,_b,_c){if(this._chkImage_width!=_b||this._chkImage_height!=_c){this._chkImage_width=_b;this._chkImage_height=_c;if(this._p_visible){this._reCalcSize();}}};_pPopupMenu._loaded_iconImage=function(_a,_b,_c){if(!this._iconImage_info[_a]){this._iconImage_info[_a]={width:0,height:0};}if(this._iconImage_info[_a].width!=_b||this._iconImage_info[_a].height!=_c){this._iconImage_info[_a].width=_b;this._iconImage_info[_a].height=_c;if(this._p_visible){this._reCalcSize();}}};_pPopupMenu._load_image=function(_a,_b){var _c=this._control_element;if(_c){var _d=_a;if(_d){_d=nexacro._getURIValue(_d);_d=nexacro._getImageLocation(_d,this._getRefFormBaseUrl());var _e;if(_b=="exp"){_e=nexacro._getImageSize(_d,this._loaded_expImage,this);if(_e){this._expImage_width=_e.width;this._expImage_height=_e.height;}}else if(_b=="chk"){_e=nexacro._getImageSize(_d,this._loaded_chkImage,this);if(_e){this._chkImage_width=_e.width;this._chkImage_height=_e.height;}}else if(_b=="icon"){_e=nexacro._getImageSize(_d,this._loaded_iconImage,this);if(_e){if(!this._iconImage_info[_d]){this._iconImage_info[_d]={width:0,height:0};}this._iconImage_info[_d].width=_e.width;this._iconImage_info[_d].height=_e.height;}}return _d;}}};_pPopupMenu._getPopupControl=function(){var _a=this._getRootComponent(this);return _a._popupmenu;};_pPopupMenu._getPopupType=function(){var _a=this._getRootComponent(this);var _b=_a._p_popuptype;return _b?_b:"normal";};_pPopupMenu._isPopupmenuVisible=function(_a){if(!_a||_a._popupmenu==null||_a._popupmenu._p_visible==false){return false;}return true;};_pPopupMenu._isNavigationbuttonVisible=function(){return this._is_navigation_visible;};_pPopupMenu._getNavigationbuttonHeight=function(_a,_b){var _c=0;var _d,_e,_f,_g=0;var _h=_a._getCSSStyleValue("icon","enabled");if(_h){_d=nexacro._getImageSize(_h.url,nexacro._emptyFn,this);if(_d){_g=_d.height;_e=_a._getCSSStyleValue("padding",this._status);if(_e){_g+=_e.top+_e.bottom;}_f=_a._getCSSStyleValue("border",this._status);if(_f){if(_f._single){_g+=_f.top._width+_f.top._width;}else{_g+=_f.top._width+_f.bottom._width;}}}}var _i=_b._getCSSStyleValue("icon","enabled");if(_i){_d=nexacro._getImageSize(_i.url,nexacro._emptyFn,this);if(_d){_c=_d.height;_e=_b._getCSSStyleValue("padding",this._status);if(_e){_c+=_e.top+_e.bottom;}_f=_b._getCSSStyleValue("border",this._status);if(_f){if(_f._single){_c+=_f.top._width+_f.top._width;}else{_c+=_f.top._width+_f.bottom._width;}}}}return [_g,_c];};_pPopupMenu._getMaxTextSize=function(_a){var _b=this._innerdataset;var _c=[0,0];if(_b){var _d;var _e=this._items;if(_e){var _f=_e.length;if(_f){var _g=_e[0]._getCurrentStyleInheritValue("font",this._status);var _h=_e[0]._getReferencsAbsoluteFont(_g);for(var _j=0;_j<_f;_j++ ){var _i=_b.getColumn(_e[_j].datarow,_a);if(_i===undefined){break;}_d=nexacro._getTextSize(_i,_g,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,_h);if(_d[0]>_c[0]){_c[0]=_d[0];}if(_d[1]>_c[1]){_c[1]=_d[1];}}}}}return _c;};_pPopupMenu._getMenuObj=function(){var _a=this._p_parent;while(!(_a instanceof nexacro.Menu)){_a=_a.parent;}return _a;};_pPopupMenu._getControlInfo=function(){var _a=this._items;var _b={};var _c={};var _d=0;var _e=0;var _f=0;var _g=0;var _h=0;var _i,_j,_k;var _l=0;var _m;var _n;var _o=false;var _p;var _q;var _r;var _s;var _t;var _u;var _v=0;var _w=0;var _x=0;var _y=false;for(var _al=0,_am=_a.length;_al<_am;_al++ ){var _z=_a[_al];var _aa=_z._textcontrol;var _ab=_z._hotkeytextcontrol;var _ac=_z._expiconcontrol;var _ad=_z._status;if(_z._check){_y=true;}var _ae=_z._iconcontrol;if(_ae){var _af=_ae._icon||_ae._getCSSStyleValue("icon",_ad);if(_af){var _ag=nexacro._getImageSize(_af.value,this._loaded_iconImage,this);if(_ag){_v=_ag.width;}}_p=_ae._getCSSStyleValue("border",_ad);if(_p){if(_p._single){_v=_v+_p.top._width+_p.top._width;}else{_v=_v+_p.top._width+_p.bottom._width;}}_q=_ae._getCSSStyleValue("padding",_ad);if(_q){_v=_v+_q.left+_q.right;}if(_v>_f){_f=_v;}}if(_aa){var _ah=_aa.text;if(_ah){if(!_i){_i=_aa._getCurrentStyleInheritValue("font",_ad);}_k=_aa._getReferenceAbsoluteFont(_i);_b=nexacro._getTextSize(_ah,_i,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,_k);if(_b[0]>_d){_d=_b[0];}}if(!_r){_r=_aa._getCSSStyleValue("border",_ad);}if(!_t){_t=_aa._getCSSStyleValue("padding",_ad);}}if(_ab){var _ai=_ab.text;if(_ai){if(!_j){_j=_ab._getCurrentStyleInheritValue("font",this._status);}_k=_ab._getReferenceAbsoluteFont(_j);_c=nexacro._getTextSize(_ai,_j,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,_k);if(_c[0]>_e){_e=_c[0];}}if(!_s){_s=_ab._getCSSStyleValue("border",_ad);}if(!_u){_u=_ab._getCSSStyleValue("padding",_ad);}}if(!_o&&_z._canExpand){_o=true;}if(_ac){var _aj=_ac._getCSSStyleValue("icon",_ad);if(_aj){var _ak=nexacro._getImageSize(_aj.value,this._loaded_expImage,this);if(_ak){_w=_ak.width;_x=_ak.height;}}}if(!_n){_n=_z._getCSSStyleValue("padding");}if(!_m){_m=_z._getCSSStyleValue("border");}}if(!_l){_g=_b[1];if(_r){if(_r._single){_g=_g+_r.top._width+_r.top._width;_d=_d+_r.top._width+_r.top._width;}else{_g=_g+_r.top._width+_r.bottom._width;_d=_d+_r.top._width+_r.bottom._width;}}if(_t){_g=_g+_t.top+_t.bottom;}if(_b&&_c.length>1){_h=_c[1];if(_s){if(_s._single){_h=_h+_s.top._width+_s.top._width;_e=_e+_s.top._width+_s.top._width;}else{_h=_h+_s.top._width+_s.bottom._width;_e=_e+_s.top._width+_s.bottom._width;}}if(_u){_h=_h+_u.top+_u.bottom;}_l=_g>_h?_g:_h;}else{_l=_g;}}if(_t){_d=_d+_t.left+_t.right;}if(_u){_e=_e+_u.left+_u.right;}return [Math.ceil(_d),Math.ceil(_e),_g,_h,_o,_m,_n,_f?_f:0,_l,_w,_x,_y];};_pPopupMenu._getAlignPosition=function(_a,_b,_c){if(_c){var _d=this._width;var _e=this._height;var _f=_c.split(/\s+/);var _g=_f.length;var _h=parseInt(_a,10)|0;var _i=parseInt(_b,10)|0;switch(_g){case 0:break;case 1:if(_f[0]=="left"){_a=_h-_d;}else if(_f[0]=="center"){_a=_h-(_d/2);}else if(_f[0]=="top"){_b=_i-_e;}else if(_f[0]=="middle"){_b=_i-(_e/2);}break;case 2:if(_f[0]=="left"||_f[0]=="center"||_f[0]=="right"){if(_f[0]=="left"){_a=_h-_d;}else if(_f[0]=="center"){_a=_h-(_d/2);}}else if(_f[0]=="top"||_f[0]=="middle"||_f[0]=="bottom"){if(_f[0]=="top"){_b=_i-_e;}else if(_f[0]=="middle"){_b=_i-(_e/2);}}if(_f[1]=="left"||_f[1]=="center"||_f[1]=="right"){if(_f[1]=="left"){_a=_h-_d;}else if(_f[1]=="center"){_a=_h-(_d/2);}}else if(_f[1]=="top"||_f[1]=="middle"||_f[1]=="bottom"){if(_f[1]=="top"){_b=_i-_e;}else if(_f[1]=="middle"){_b=_i-(_e/2);}}break;default:break;}}return [_a,_b];};_pPopupMenu._getItemIndex=function(_a){if(_a===undefined){_a=0;}var _b=_a<0?_a:1;var _c=_a===0?0:this._popupitemindex+_b;var _d=this._items;var _e=_d?_d.length:0;for(var _g=0;_g<_e;_g++ ){var _f=_d[_c];if(nexacro._enableaccessibility){if(_f){return _c;}}else{if(_f&&_f._real_enable){return _c;}}_c+=_b;if(_c>_e){_c=0;}else if(_c<0){_c=_e -1;}}return this._popupitemindex;};_pPopupMenu._getEventInfoComponent=function(_a){while(!_a._is_eventinfo_control){_a=_a._p_parent;}return _a;};_pPopupMenu._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pPopupMenu._setItemControlPosition=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=_n?_n:_c;this._itempos={icon_x:_a,iconimgwidth:_b,iconheight:_o,text_x:_d,textheight:_o,textwidth:_e,hotkey_x:_g,hotkeywidth:_h,hotkeyheight:_o,expimgwidth:_l,expimgheight:_m,chkimgwidth:_k,gap:_j};};_pPopupMenu._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this._p_innerdataset=_a;}};_pPopupMenu._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onrowposchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("oncolumnchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._callbackFromDataset,this);this._innerdataset._removeEventHandler("onvaluechanged",this._callback_onvaluechanged,this);this._innerdataset=null;}};_pPopupMenu._item_find=function(_a){if(_a._popupmenu==null||_a._popupmenu._p_visible==false){return _a._items;}return _a._popupmenu._items;};_pPopupMenu._popupmenu_find=function(_a){var _b=_a;while(_b){if(_b._popupmenu===null||_b._popupmenu._p_visible==false){break;}_b=_b._popupmenu;}return _b;};_pPopupMenu._popupmenuitem_extend=function(_a){return _a._canExpand;};delete _pPopupMenu;}if(!nexacro.Spin){nexacro.SpinEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.id=this.eventid=_b||"onspin";this.fromobject=this.fromreferenceobject=_a;this.pretext=_c;this.prevalue=_d;this.posttext=_e;this.postvalue=_f;this.up=_g;};var _pSpinEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.SpinEventInfo);nexacro.SpinEventInfo.prototype=_pSpinEventInfo;_pSpinEventInfo._type_name="SpinEventInfo";delete _pSpinEventInfo;_pSpinEventInfo=null;nexacro.Spin=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._FORMAT_TYPE={ZERO:"9.9",NEAR_ZERO:"0.9",OUTER_ZERO:"9.9",OUTER_ZERO_WITH_COMMA:"9,999.9"};};var _pSpin=nexacro._createPrototype(nexacro.Component,nexacro.Spin);nexacro.Spin.prototype=_pSpin;_pSpin._type_name="Spin";_pSpin._p_spinedit=null;_pSpin._p_spinupbutton=null;_pSpin._p_spindownbutton=null;_pSpin._p_buttonposition="right";_pSpin._p_buttonsize=undefined;_pSpin._p_circulation=false;_pSpin._p_displaycomma=false;_pSpin._p_displaynulltext="";_pSpin._p_displayinvalidtext="invalid value";_pSpin._p_increment=1;_pSpin._p_locale="";_pSpin._p_max=10000;_pSpin._p_min=0;_pSpin._p_readonly=false;_pSpin._p_text="";_pSpin._p_type="normal";_pSpin._p_usecontextmenu=true;_pSpin._p_value=undefined;_pSpin._initsoftkeyboard=undefined;_pSpin._p_usesoftkeyboard=true;_pSpin._default_value=undefined;_pSpin._default_text="";_pSpin._default_mask="9.9";_pSpin._default_commamask="9,999.9";_pSpin._want_arrow=true;_pSpin._has_inputElement=true;_pSpin._use_readonly_status=true;_pSpin._is_locale_control=true;_pSpin._is_editable_control=true;_pSpin._event_list={"oneditclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"onspin":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pSpin.accessibilityrole="spin";_pSpin._is_compound=true;_pSpin.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._p_spinedit=new nexacro._SpinEditControl("spinedit",0,0,0,0,null,null,null,null,null,null,this);var _c=this._p_spinupbutton=new nexacro._SpinButtonControl("spinupbutton",0,0,0,0,null,null,null,null,null,null,this);var _d=this._p_spindownbutton=new nexacro._SpinButtonControl("spindownbutton",0,0,0,0,null,null,null,null,null,null,this);_b.set_limitbymask("none");_b.createComponent(true);_c.createComponent(true);_d.createComponent(true);}};_pSpin.on_created_contents=function(){this._setEventHandlerToCalendarEdit();this._setEventHandlerToSpinButtons();this.on_apply_displaycomma(this._p_displaycomma);this.on_apply_type(this._p_type);this.on_apply_readonly(this._p_readonly);this.on_apply_value(this._p_value);this.on_apply_usecontextmenu(this._p_usecontextmenu);this._p_spinupbutton.on_created();this._p_spindownbutton.on_created();this._p_spinedit.on_created();this.on_apply_displaynulltext(this._p_displaynulltext);this.on_apply_displayinvalidtext(this._p_displayinvalidtext);this._recalcLayout();this._updateButton();this._setDefaultProp();if(nexacro._enableaccessibility){this._on_created_accessibility_contents();}if(this._p_spinedit){this._p_spinedit.on_apply_usesoftkeyboard();}};_pSpin.on_destroy_contents=function(){if(this._p_spinedit){this._p_spinedit.destroy();this._p_spinedit=null;}if(this._p_spinupbutton){this._p_spinupbutton.destroy();this._p_spinupbutton=null;}if(this._p_spindownbutton){this._p_spindownbutton.destroy();this._p_spindownbutton=null;}};_pSpin.on_create_contents_command=function(){this._setEventHandlerToCalendarEdit();this._setEventHandlerToSpinButtons();this.on_apply_displaycomma(this._p_displaycomma);this.on_apply_type(this._p_type);this.on_apply_readonly(this._p_readonly);this.on_apply_value(this._p_value);this.on_apply_usecontextmenu(this._p_usecontextmenu);this.on_apply_usesoftkeyboard();var _a="";if(this._p_spinedit){this._p_spinedit.on_apply_usesoftkeyboard();_a+=this._p_spinedit.createCommand();}if(this._p_spinupbutton){_a+=this._p_spinupbutton.createCommand();}if(this._p_spindownbutton){_a+=this._p_spindownbutton.createCommand();}return _a;};_pSpin.on_attach_contents_handle=function(_a){if(this._p_spinedit){this._p_spinedit.attachHandle(_a);}if(this._p_spinupbutton){this._p_spinupbutton.attachHandle(_a);}if(this._p_spindownbutton){this._p_spindownbutton.attachHandle(_a);}this.on_apply_displaynulltext(this._p_displaynulltext);this.on_apply_displayinvalidtext(this._p_displayinvalidtext);this._setEventHandlerToCalendarEdit();this._setEventHandlerToSpinButtons();this._recalcLayout();this._updateButton();this._setDefaultProp();if(nexacro._enableaccessibility){this._on_attach_accessibility_contents_handle(_a);}};_pSpin.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pSpin._apply_setfocus=function(_a){var _b=this._p_spinedit;if(_b){_b._on_focus(true,_a);}};_pSpin.on_apply_prop_cssclass=function(){var _a=this._p_spinedit;if(_a){_a.on_apply_cssclass();}var _b=this._p_spinupbutton;if(_b){_b.on_apply_cssclass();}var _c=this._p_spindownbutton;if(_c){_c.on_apply_cssclass();}};_pSpin.on_apply_prop_enable=function(_a){if(this._p_spinedit){this._p_spinedit._setEnable(_a);}if(this._p_spinupbutton&&!this._p_readonly){this._p_spinupbutton._setEnable(_a);}if(this._p_spindownbutton&&!this._p_readonly){this._p_spindownbutton._setEnable(_a);}};_pSpin.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this.on_apply_displaynulltext(this._getStringResourceProperty(this._p_displaynulltext));this.on_apply_displayinvalidtext(this._getStringResourceProperty(this._p_displayinvalidtext));};_pSpin.on_getBindableProperties=function(){return "value";};_pSpin.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){this._setValue(undefined);}};_pSpin.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=_b.getColumn(_c,_d);var _f=this._convertValueType(_e,true);if(isNaN(_f)){this._setValue(_e);}else{this._setValue(_f);}}};_pSpin.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);if(this._p_spinedit){this._p_spinedit.on_apply_accessibility();}};_pSpin._getAccessibilityReadLabel=function(_a){var _b=nexacro.Component.prototype._getAccessibilityReadLabel.call(this);if(_a&&this._p_spinedit._input_element&&this._status!="focus"){if(!this._p_spinedit._input_element._wantAccessibilityAdditionalLabel||!this._p_spinedit._input_element._wantAccessibilityAdditionalLabel()){_b=this._p_text+" "+_b;}}return _b;};_pSpin._getDlgCode=function(_a,_b,_c,_d){var _e=this._want_arrow;if((_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN)&&(_c||_b)){_e=true;}this._want_arrow=false;return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:_e};};_pSpin.set_text=nexacro._emptyFn;_pSpin.set_value=function(_a){_a=this._convertValueType(_a);if(this._p_value!==_a){if(!this.applyto_bindSource("value",_a)){return;}this._setValue(_a);}};_pSpin.on_apply_value=function(_a){if(nexacro._isNull(_a)||(_a.date||_a.time||_a.blob||_a.datetime)){_a=undefined;}var _b=this._p_spinedit;if(_b){_b.set_value(_a);_b.set_format(this._getSpinFormatType());if(nexacro._isNull(_a)){this._p_text="";}else{this._p_text=_b._p_text;}this._setAccessibilityInfoValueCur(_b._p_text);this._updateAccessibilityLabel();_b._updateAccessibilityLabel();}};_pSpin.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_usesoftkeyboard){this._p_usesoftkeyboard=_a;if(!this._initsoftkeyboard){this._initsoftkeyboard=true;}this.on_apply_usesoftkeyboard();}};_pSpin.on_apply_usesoftkeyboard=function(){if(this._p_spinedit){this._p_spinedit.set_usesoftkeyboard(this._getUseSoftKeyboardValue(this._initsoftkeyboard));}};_pSpin.set_displaynulltext=function(_a){var _b=nexacro._isNull(_a);if(_b){_a="";}else{_a=nexacro._toString(_a).replace(/&quot;/g,"\"");}if(this._p_displaynulltext!=_a){this._p_displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pSpin.on_apply_displaynulltext=function(_a){var _b=this._p_spinedit;if(_b){_b.set_displaynulltext(_a);}};_pSpin.set_displayinvalidtext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this._p_displayinvalidtext!=_a){this._p_displayinvalidtext=_a;this.on_apply_displayinvalidtext(_a);}};_pSpin.on_apply_displayinvalidtext=function(_a){var _b=this._p_spinedit;if(_b){_b.set_displayinvalidtext(_a);}};_pSpin.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pSpin.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this._p_spinedit;if(_b){if(this._p_type=="noneditable"){_b.set_readonly(true);}else{_b.set_readonly(_a);}}var _c=this._p_spinupbutton;if(_c){_c._setEnable(this.enable&&!_a);}var _d=this._p_spindownbutton;if(_d){_d._setEnable(this.enable&&!_a);}};_pSpin.set_type=function(_a){var _b=["noneditable","normal","spinonly"];if(_b.indexOf(_a)==-1){return;}if(this._p_type!=_a){this._p_type=_a;this.on_apply_type(_a);this.on_apply_readonly(this._p_readonly);this._recalcLayout();}};_pSpin.on_apply_type=function(_a){var _b=this._p_spinedit;if(_b){switch(_a){case "spinonly":_b.set_visible(false);break;case "noneditable":_b.set_visible(true);break;case "normal":default:_b.set_visible(true);break;}}};_pSpin.set_locale=function(_a){if(this._p_locale!=_a){this._p_locale=_a;this._locale=_a;this.on_apply_locale(_a);}};_pSpin.on_apply_locale=function(_a){var _b=this._p_spinedit;if(_b){_b._setLocale(_a);}};_pSpin.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usecontextmenu!=_a){this._p_usecontextmenu=_a;this.on_apply_usecontextmenu(_a);}};_pSpin.on_apply_usecontextmenu=function(_a){var _b=this._p_spinedit;if(_b){_b.set_usecontextmenu(_a);}};_pSpin.set_buttonposition=function(_a){var _b=["left","right"];if(_b.indexOf(_a)==-1){return;}if(this._p_buttonposition!=_a){this._p_buttonposition=_a;this.on_apply_buttonposition(_a);}};_pSpin.on_apply_buttonposition=function(_a){this._recalcLayout();};_pSpin.set_buttonsize=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_buttonsize!=_a){this._p_buttonsize=_a;this.on_apply_buttonsize(_a);}};_pSpin.on_apply_buttonsize=function(_a){this._recalcLayout();};_pSpin.set_circulation=function(_a){_a=nexacro._toBoolean(_a);if(this._p_circulation!=_a){this._p_circulation=_a;this.on_apply_circulation(_a);this._updateButton();}};_pSpin.on_apply_circulation=function(_a){this._updateButton();};_pSpin.set_displaycomma=function(_a){_a=nexacro._toBoolean(_a);if(this._p_displaycomma!=_a){this._p_displaycomma=_a;this.on_apply_displaycomma(_a);this.on_apply_value(this._p_value);this._setDefaultText();}};_pSpin.on_apply_displaycomma=function(_a){var _b=this._p_spinedit;if(_b){_b.set_format(this._getSpinFormatType());}};_pSpin.set_increment=function(_a){if(isNaN(_a= +_a)){return;}if(this._p_increment!=_a){this._p_increment=_a;}};_pSpin.set_max=function(_a){if(isNaN(_a= +_a)){return;}if(this._p_max!=_a){this._p_max=_a;this._setAccessibilityInfoValueMax(_a);this.on_apply_max(_a);this.on_apply_value(this._p_value);this._updateButton();this._setDefaultProp();}};_pSpin.on_apply_max=function(_a){if(this._p_value>_a){this._p_value=_a;}if(_a<this._p_min){this._p_min=_a;}};_pSpin.set_min=function(_a){if(isNaN(_a= +_a)){return;}if(this._p_min!=_a){this._p_min=_a;this._setAccessibilityInfoValueMin(_a);this.on_apply_min(_a);this.on_apply_value(this._p_value);this._updateButton();this._setDefaultProp();}};_pSpin.on_apply_min=function(_a){if(this._p_value<_a){this._p_value=_a;}if(this._p_max<_a){this._p_max=_a;}};_pSpin._properties=[{name:"buttonposition"},{name:"buttonsize"},{name:"circulation"},{name:"displaycomma"},{name:"displaynulltext"},{name:"displayinvalidtext"},{name:"increment"},{name:"locale"},{name:"max"},{name:"min"},{name:"readonly"},{name:"text"},{name:"type"},{name:"usecontextmenu"},{name:"value"},{name:"usesoftkeyboard"},{name:"spinedit",readonly:true},{name:"spinupbutton",readonly:true},{name:"spindownbutton",readonly:true}];nexacro._defineProperties(_pSpin,_pSpin._properties);_pSpin.setRange=function(_a,_b){this.set_min(_a);this.set_max(_b);if(this._p_min>this._p_max){var _c=this._p_min;this._p_min=this._p_max;this._p_max=_c;}};_pSpin.getCaretPos=function(){if(this._p_readonly){return -1;}var _a=this._p_spinedit;if(_a){return _a.getCaretPos();}return -1;};_pSpin.setCaretPos=function(_a){var _b=this._p_spinedit;if(_b){return _b.setCaretPos(_a);}return false;};_pSpin.getSelect=function(){var _a=this._p_spinedit;if(_a){return _a.getSelect();}return [0,0];};_pSpin.setSelect=function(_a,_b){var _c=this._p_spinedit;if(_c){return _c.setSelect(_a,_b);}return false;};_pSpin.getSelectedText=function(){var _a=this._p_spinedit;if(_a){return _a.getSelectedText();}return "";};_pSpin.updateToDataset=function(){return this.applyto_bindSource("value",this._p_value);};_pSpin._on_value_change=function(){var _a=this._p_spinedit;var _b=this._p_max;var _c=this._p_min;var _d=this._default_value;var _e=this._default_text;var _f=_a._p_value;var _g=_a._p_text;if(_a&&_a._p_text){_f=parseFloat(_a._p_text.replace(/\,/g,''));}if(_f>_b){_f=_b;}else if(_f<_c){_f=_c;}else if(!_f){_f=_c;}if(!this.on_fire_canchange(this,_e,_d,_g,_f)||!this.applyto_bindSource("value",_f)){this._setValue(_d);return false;}this._setValue(_f);this.on_fire_onchanged(this,_e,_d,_g,_f);return true;};_pSpin._on_spin_up=function(){if(this._p_readonly){return false;}var _a=this._getMaskObj();var _b=this._p_increment;var _c=this._p_max;var _d=this._p_min;var _e=parseFloat(this._p_spinedit._p_value);var _f=this._p_text;if(nexacro._isNull(_e)||isNaN(_e)){_e=0;}var _g=this._calcValue(_e,_b,true);if(this._p_circulation){if(_b>=0){_g=(_g>_c)?_d:_g;}else{_g=(_g<_d)?_c:_g;}}else{_g=(_g>_c)?_c:(_g<_d)?_d:_g;}var _h=_a.applyMask(_g);if(!this.on_fire_onspin(this,_f,_e,_h,_g,true)){_g=_e;}this._p_value=_g;this.on_apply_value(_g);this._updateButton();};_pSpin._on_spin_down=function(){if(this._p_readonly){return false;}var _a=this._getMaskObj();var _b=this._p_increment;var _c=this._p_max;var _d=this._p_min;var _e=parseFloat(this._p_spinedit._p_value);var _f=this._p_text;if(nexacro._isNull(_e)||isNaN(_e)){_e=0;}var _g=this._calcValue(_e,_b,false);if(this._p_circulation){if(_b>=0){_g=(_g<_d)?_c:_g;}else{_g=(_g>_c)?_d:_g;}}else{_g=(_g<_d)?_d:(_g>_c)?_c:_g;}var _h=_a.applyMask(_g);if(!this.on_fire_onspin(this,_f,_e,_h,_g,false)){_g=_e;}this._p_value=_g;this.on_apply_value(_g);this._updateButton();};_pSpin._on_edit_oneditclick=function(_a,_b){this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey);};_pSpin._on_edit_onkeydown=function(_a,_b){switch(_b.keycode){case nexacro.Event.KEY_UP:this._on_spin_up();break;case nexacro.Event.KEY_DOWN:this._on_spin_down();break;case nexacro.Event.KEY_ENTER:if(this._default_value!==this._p_spinedit._p_value){this._on_value_change();}break;}};_pSpin._on_edit_oninput=function(_a,_b){if(this._p_readonly||!this._isEnable()){return false;}this.on_fire_oninput();var _c=parseFloat(this._p_spinedit._p_value);if(isNaN(_c)){this._p_value=this._p_min;}};_pSpin._on_upbutton_onclick=function(_a,_b){this._on_spin_up();};_pSpin._on_downbutton_onclick=function(_a,_b){this._on_spin_down();};_pSpin.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){this._changeStatus("focused",true);if(!(_f instanceof nexacro.MaskEdit)){if(nexacro._enableaccessibility){if(nexacro._OS=="Android"||nexacro._OS=="iOS"){return;}}var _g=this._p_spinedit;if(_g){_g._on_focus(true,_b);}}};_pSpin.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);if(this._default_value!=this._p_spinedit._p_value){this._on_value_change();}var _c=this._p_spinedit;if(_c&&!_c._onlydisplay){var _d=this._getRootWindow();if(_d){var _e=_d._indexOfCurrentFocusPaths(this);if(_e<0){var _f=_c._input_element;if(_f){_f.setElementBlur();}}}}};_pSpin.on_fire_oneditclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.oneditclick&&this.oneditclick._has_handlers){var _p=new nexacro.EditClickEventInfo(this,"oneditclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o);return this.oneditclick._fireEvent(this,_p);}return false;};_pSpin.on_fire_canchange=function(_a,_b,_c,_d,_e){if(this.canchange&&this.canchange._has_handlers){var _f=new nexacro.ChangeEventInfo(this,"canchange",_b,_c,_d,_e);return this.canchange._fireCheckEvent(this,_f);}return true;};_pSpin.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangeEventInfo(_a,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}return true;};_pSpin.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pSpin.on_fire_onspin=function(_a,_b,_c,_d,_e,_f){if(this.onspin&&this.onspin._has_handlers){var _g=new nexacro.SpinEventInfo(_a,"onspin",_b,_c,_d,_e,_f);return this.onspin._fireCheckEvent(this,_g);}return true;};_pSpin._recalcLayout=function(){if(this._is_created_contents){var _a=this._p_spinedit;var _b=this._p_spinupbutton;var _c=this._p_spindownbutton;var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=this._p_buttonsize;if(_f==null){_f=_e;}else if(_f>_d){_f=_d;}var _g=Math.floor(_e/2);switch(this._p_type){case "spinonly":_f=_d;_b.move(0,0,_f,_g,null,null);_c.move(0,_e-_g,_f,_g,null,null);break;case "normal":case "noneditable":default:switch(this._p_buttonposition){case "left":_a.move(_f,0,_d-_f,_e,null,null);_b.move(0,0,_f,_g,null,null);_c.move(0,_e-_g,_f,_g,null,null);break;case "right":default:var _h=_d-_f;_a.move(0,0,_h,_e,null,null);_b.move(_h,0,_f,_g,null,null);_c.move(_h,_e-_g,_f,_g,null,null);break;}break;}}};_pSpin._updateButton=function(){var _a=this.getElement();if(_a){var _b=this._p_spinedit;var _c=this._p_spinupbutton;var _d=this._p_spindownbutton;var _e=_b._p_value;var _f=this._p_max;var _g=this._p_min;if(!this._isEnable()){_b._setEnable(false);_c._setEnable(false);_d._setEnable(false);}else{_b._setEnable(true);if(!this._p_circulation){if(nexacro._isNull(_e)||this._isInvalidValue(_e)){_d._setEnable(false);_c._setEnable(!this._p_readonly);}else{if(this._p_increment>=0){if(_f>_e){_c._setEnable(!this._p_readonly);}else{_c._setEnable(false);_c._changeStatus("mouseover",false);}if(_g<_e){_d._setEnable(!this._p_readonly);}else{_d._setEnable(false);_d._changeStatus("mouseover",false);}}else{if(_f>_e){_d._setEnable(!this._p_readonly);}else{_d._setEnable(false);_d._changeStatus("mouseover",false);}if(_g<_e){_c._setEnable(!this._p_readonly);}else{_c._setEnable(false);_c._changeStatus("mouseover",false);}}}}else{_c._setEnable(!this._p_readonly);_d._setEnable(!this._p_readonly);}}}};_pSpin._calcValue=function(_a,_b,_c){var _d=1;var _e=_a.toString();var _f=_b.toString();var _g=_e.indexOf(".");var _h=_f.indexOf(".");if(_g>-1||_h>-1){var _i=_g>-1?_e.substring(_g+1,_e.length):"";var _j=_h>-1?_f.substring(_h+1,_f.length):"";var _k=_i.length>=_j.length?_i.length:_j.length;_d=Math.pow(10,_k);_a=Math.round(_a* _d);_b=Math.round(_b* _d);}if(_c){return (_a+_b)/_d;}else{return (_a-_b)/_d;}};_pSpin._convertValueType=function(_a,_b){if(_a===""){return _a;}else{if(_b){return nexacro.Component.prototype._convertValueType.call(this,_a,2);}else{return nexacro._isNull(_a)?_a:parseFloat(_a);}}};_pSpin._setValue=function(_a){this._p_value=_a;this.on_apply_value(_a);this._updateButton();this._setDefaultProp();};_pSpin._setDefaultProp=function(){this._setDefaultValue();this._setDefaultText();};_pSpin._setDefaultValue=function(){this._default_value=this._p_value;};_pSpin._setDefaultText=function(){this._default_text=this._p_text;};_pSpin._setLocale=function(_a){if(this._p_locale){return;}if(this._locale!=_a){this._locale=_a;this.on_apply_locale(_a);this.on_apply_value(this._p_value);this._setDefaultText();}};_pSpin._setEnableView=function(_a){var _b=this._p_spinedit;if(_b){_b._setEnableView(_a);}};_pSpin._setEventHandlerToCalendarEdit=function(){var _a=this._p_spinedit;if(_a){_a._setEventHandler("oneditclick",this._on_edit_oneditclick,this);_a._setEventHandler("onkeydown",this._on_edit_onkeydown,this);_a._setEventHandler("oninput",this._on_edit_oninput,this);}};_pSpin._setEventHandlerToSpinButtons=function(){var _a=this._p_spinupbutton;if(_a){_a._setEventHandler("onclick",this._on_upbutton_onclick,this);}var _b=this._p_spindownbutton;if(_b){_b._setEventHandler("onclick",this._on_downbutton_onclick,this);}};_pSpin._getSpinFormatType=function(){var _a;var _b= +this._p_value;if(_b===0){_a=this._FORMAT_TYPE["ZERO"];}else if(_b<1&&_b>-1){_a=this._FORMAT_TYPE["NEAR_ZERO"];}else if(isNaN(_b)){if(this._p_displaycomma){_a=this._FORMAT_TYPE["OUTER_ZERO_WITH_COMMA"];}else{if(this._default_mask=="9.9"){_a=this._FORMAT_TYPE["OUTER_ZERO"];}else{_a=this._default_mask;}}}else{if(this._p_displaycomma){_a=this._FORMAT_TYPE["OUTER_ZERO_WITH_COMMA"];}else{if(this._default_mask=="9.9"){_a=this._FORMAT_TYPE["OUTER_ZERO"];}else{_a=this._default_mask;}}}return _a;};_pSpin._getMaskObj=function(){var _a=this._p_spinedit;if(_a){return _a._getMaskObj();}return null;};_pSpin._isInvalidValue=function(_a){if(nexacro._isNull(_a)||_a===""){return false;}_a=parseFloat(nexacro._toString(_a).replace(/\,/g,''));if(!isFinite( +_a)||isNaN( +_a)){return true;}return false;};_pSpin._on_getDisplayText=function(){var _a=this._p_spinedit;if(_a){return _a._on_getDisplayText();}};delete _pSpin;nexacro._SpinEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.MaskEdit.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._setControl();};var _pSpinEditControl=nexacro._createPrototype(nexacro.MaskEdit,nexacro._SpinEditControl);nexacro._SpinEditControl.prototype=_pSpinEditControl;_pSpinEditControl._getFromComponent=function(_a){var _b=_a._p_parent;if(_b&&_b._isPopupVisible()){return _b;}else{return nexacro.Component.prototype._getFromComponent.call(this,_a);}};_pSpinEditControl._isInvalidValue=function(_a){return this._p_parent._isInvalidValue(_a);};_pSpinEditControl._apply_setfocus=function(_a){this._processing_updateToDataset=false;var _b=this._input_element;if(_b){var _c=this._p_value;var _d="";var _e="";var _f=this._getMaskObj();if(_f){if(!this._onlydisplay){_f.setEditStatus(true);}_e=this._getEmptyText();if(this._isInvalidValue(_c)){_d=_f.applyMask("");}else{_d=_f.applyMask(_c);}if(_a){this._default_value=_c;this._default_text=_d;}if(!this._onlydisplay){this._changeUserStatus("nulltext",false);this._changeUserStatus("invalidtext",false);if(nexacro._isNull(_c)){_b.setElementDefaultValue(_e);_b.setElementValue(null);}else{_b.setElementValue(_d);}}}if(!this._onlydisplay){_b.setElementFocus(_a);_d=_b.getElementText();if(_d!=this._p_text){this._default_text=this._p_text=_d;}}}};delete _pSpinEditControl;nexacro._SpinButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pSpinButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._SpinButtonControl);nexacro._SpinButtonControl.prototype=_pSpinButtonControl;_pSpinButtonControl._type_name="ButtonControl";_pSpinButtonControl._is_subcontrol=true;_pSpinButtonControl._is_focus_accept=false;_pSpinButtonControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;if(_g){_g._apply_setfocus(_b);}};delete _pSpinButtonControl;}if(!nexacro.DatePickerControl){nexacro.DatePickerControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pDatePickerControl=nexacro._createPrototype(nexacro.Component,nexacro.DatePickerControl);nexacro.DatePickerControl.prototype=_pDatePickerControl;_pDatePickerControl._type_name="DatePickerControl";_pDatePickerControl._p_accessibilityrole="datepicker";_pDatePickerControl._is_subcontrol=true;_pDatePickerControl.head=null;_pDatePickerControl.body=null;_pDatePickerControl._changetype="spin";_pDatePickerControl._selected_year="";_pDatePickerControl._selected_month="";_pDatePickerControl._selected_day="";_pDatePickerControl._use_readonly_status=true;_pDatePickerControl._is_locale_control=true;_pDatePickerControl._event_list={"onclick":1,"ondayclick":1,"onspin":1,"oncloseup":1,"onmonthclick":1,"onyearclick":1};_pDatePickerControl._p_accessibilityrole="datepicker";_pDatePickerControl._has_accessibility_value=false;_pDatePickerControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.head=new nexacro._DatePickerHeadControl("head",0,0,0,0,null,null,null,null,null,null,this);var _c=this.body=new nexacro._DatePickerBodyControl("body",0,0,0,0,null,null,null,null,null,null,this);_b.createComponent(true);_c.createComponent(true);this.on_apply_datepickerchangetype(this._p_parent.datepickerchangetype);}};_pDatePickerControl.on_created_contents=function(_a){var _b=this.getElement();if(_b){var _c=this.head;var _d=this.body;_c._setEventHandler("onclick",this._on_head_onheadclick,this);_c._setEventHandler("onspin",this._on_head_onheadspin,this);_c._setEventHandler("onkeydown",this._on_head_onkeydown,this);_d._setEventHandler("ondayclick",this._on_body_ondayclick,this);if(this._changetype=="button"){_d._setEventHandler("onmonthclick",this._on_body_onmonthclick,this);_d._setEventHandler("onyearclick",this._on_body_onyearclick,this);}_d._setEventHandler("onkeydown",this._on_body_onkeydown,this);_c.on_created(_a);_d.on_created(_a);this._recalcLayout();}};_pDatePickerControl.on_create_contents_command=function(){var _a=this.head;var _b=this.body;var _c="";if(_a){_c+=_a.createCommand();}if(_b){_c+=_b.createCommand();}return _c;};_pDatePickerControl.on_attach_contents_handle=function(_a){var _b=this.head;var _c=this.body;_b._setEventHandler("onclick",this._on_head_onheadclick,this);_b._setEventHandler("onspin",this._on_head_onheadspin,this);_b._setEventHandler("onkeydown",this._on_head_onkeydown,this);_c._setEventHandler("ondayclick",this._on_body_ondayclick,this);if(this._changetype=="button"){_c._setEventHandler("onmonthclick",this._on_body_onmonthclick,this);_c._setEventHandler("onyearclick",this._on_body_onyearclick,this);}_c._setEventHandler("onkeydown",this._on_body_onkeydown,this);_c.attachHandle(_a);_b.attachHandle(_a);this._recalcLayout();};_pDatePickerControl.on_destroy_contents=function(){if(this.head){this.head.destroy();this.head=null;}if(this.body){this.body.destroy();this.body=null;}};_pDatePickerControl.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pDatePickerControl.on_apply_prop_enable=function(_a){var _b=this.head;var _c=this.body;if(_b){_b._setEnable(_a);}if(_c){_c._setEnable(_a);}};_pDatePickerControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pDatePickerControl.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this.head;if(_b){_b.set_readonly(_a);}var _c=this.body;if(_c){_c.set_readonly(_a);}};_pDatePickerControl.on_apply_datepickerchangetype=function(_a){if(_a=="auto"){if(nexacro._isDesktop()){this._changetype="spin";}else{this._changetype="button";}}else{this._changetype=_a;}};_pDatePickerControl._properties=[{name:"readonly"}];nexacro._defineProperties(_pDatePickerControl,_pDatePickerControl._properties);_pDatePickerControl._on_head_onkeydown=function(_a,_b){var _c=_b.keycode;var _d=nexacro._enableaccessibility;if((_b.fromreferenceobject.id=="spinedit")&&_c!=13){return;}if(this._changetype=="button"){if(this.head.monthstatic._p_visible){this._changeDate(_a,_b);}else if(!this.head.monthstatic._p_visible&&this.head.yearstatic.text.length<6){this._changeMonth(_a,_b);}else{this._changeYear(_a,_b);}}else{this._changeDate(_a,_b);}if(!_d){if(!(_a instanceof nexacro._CalendarEditControl)&&(_c==13||_c==37||_c==38||_c==39||_c==40)){if(this._changetype!="button"||this.head.monthstatic._p_visible){this.on_fire_ondayclick(_a);}}}};_pDatePickerControl._on_head_onheadclick=function(_a,_b){var _c=this._p_parent;if(_c&&_c._onlydisplay==true){_c.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,_c,_a,_b.meta_key);return false;}if(!this._p_enable||this._p_readonly){return false;}if(this._changetype=="button"){return false;}var _d=this.head;var _e=this.body;_e._setDate(_d._date.str_year,_d._date.str_month,_e._date.str_day);};_pDatePickerControl._on_head_onheadspin=function(_a,_b){var _c=this._p_parent;if(_c&&_c._onlydisplay==true){return false;}if(!this._p_enable||this._p_readonly==true){return false;}var _d=this.head;var _e=this.body;_e._setDate(_d._date.str_year,_d._date.str_month,_e._date.str_day);};_pDatePickerControl._on_body_ondayclick=function(_a,_b){this.on_fire_ondayclick(_a,_b);};_pDatePickerControl._on_body_onmonthclick=function(_a,_b){this._on_datepicker_onmonthclick(_a,_b);};_pDatePickerControl._on_body_onyearclick=function(_a,_b){this._on_datepicker_onyearclick(_a,_b);};_pDatePickerControl._on_body_onkeydown=function(_a,_b){var _c=_b.keycode;var _d=nexacro._enableaccessibility;if(this._changetype=="button"){if(this.head.monthstatic._p_visible){this._changeDate(_a,_b);}else if(!this.head.monthstatic._p_visible&&this.head.yearstatic.text.length<6){this._changeMonth(_a,_b);}else{this._changeYear(_a,_b);}}else{this._changeDate(_a,_b);}if(!_d){if(!(_a instanceof nexacro._CalendarEditControl||_a instanceof nexacro.Calendar)&&(_c==37||_c==38||_c==39||_c==40)){if(this._changetype!="button"||this.head.monthstatic._p_visible){this.on_fire_ondayclick(_a);}}}};_pDatePickerControl.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){var _l=_j.name;if(_l=="head"||_l=="prevbutton"||_l=="nextbutton"||_l=="body"||_l=="weekband"||_l.indexOf("weekitem")>-1||_l.indexOf("dayitem")>-1){this._refreshSpindate();}};_pDatePickerControl.on_touchend_basic_action=function(_a,_b,_c,_d){var _e=_d.name;if(_e=="head"||_e=="prevbutton"||_e=="nextbutton"||_e=="body"||_e=="weekband"||_e.indexOf("weekitem")>-1||_e.indexOf("dayitem")>-1){this._refreshSpindate();}};_pDatePickerControl._closeUp=function(){var _a=this.body;var _b=this.head.monthstatic;if(!_b._p_visible){this.body._setDate(this._selected_day,this._selected_month,this._selected_year);this.head._setDate(this._selected_day,this._selected_month,this._selected_year);}_a._months_visible(false);_a._years_visible(false);_a.weekband.set_visible(true);for(var _c=0;_c<_a._maxWeek;_c++ ){_a._weekitems[_c].set_visible(true);}_b.set_visible(true);};_pDatePickerControl.on_fire_oncloseup=function(_a){if(this.oncloseup&&this.oncloseup._has_handlers){this._closeUp();return this.oncloseup._fireEvent(this);}return false;};_pDatePickerControl.on_fire_ondayclick=function(_a,_b){if(this.ondayclick&&this.ondayclick._has_handlers){if(!_b){var _c=this.body._getDayItem(this._selected_day);_b=new nexacro.CalendarDayClickEventInfo(_c,"ondayclick",this._value);}return this.ondayclick._fireEvent(this,_b);}return false;};_pDatePickerControl._on_datepicker_onmonthclick=function(_a,_b){var _c=this._p_parent;if(_c._p_readonly){return;}var _d=_b.fromobject;var _e=parseInt(_d._year+_d._month+_d.text.padLeft(2,"0"));var _f=this.head;var _g=this.body;var _h=_f.yearstatic;var _i=_f.monthstatic;if(_e<10){_e="0"+_e;}else{_e=""+_e;}_g.weekband.set_visible(true);for(var _j=0;_j<_g._maxWeek;_j++ ){_g._weekitems[_j].set_visible(true);}_i.set_visible(true);_i.set_text(_e);_f._date.str_month=_e;_f._date.int_month=parseInt(_e);_h.set_text(_f._date.str_year+".");_f._recalcYearStatic(true);_f._setFocus(false);};_pDatePickerControl._on_datepicker_onyearclick=function(_a,_b){var _c=this._p_parent;if(_c._p_readonly){return;}var _d=_b.fromobject;var _e=_d._year+_d._month+_d.text.padLeft(2,"0");var _f=this.head;_f._date.str_year=_e;_f._date.int_year=_e;_f.yearstatic.set_text(_e);_f._recalcYearStatic();_f._setFocus(false);};_pDatePickerControl.on_killfocus_basic_action=function(){var _a=this._p_parent;if(_a._p_type=="monthonly"){var _b=this.head;var _c=this.body;_b.monthstatic.set_visible(true);_c._months_visible(false);_c._years_visible(false);_c.weekband.set_visible(true);for(var _d=0;_d<_c._maxWeek;_d++ ){_c._weekitems[_d].set_visible(true);}}};_pDatePickerControl._on_button_onnextlbuttondown=function(){var _a=this._p_parent;if(_a&&_a._onlydisplay==true){return false;}var _b=this.head;if(!_b._p_enable||_b._p_readonly){return false;}var _c=_b._date.int_year;var _d=_b._date.int_month;if((_d+=1)>12){_d=1;if((_c+=1)>9999){_c=0;}}_b._setDate(_c,_d);_b._refreshSpindate();this._on_head_onheadclick();};_pDatePickerControl._on_button_onprevlbuttondown=function(){var _a=this._p_parent;if(_a&&_a._onlydisplay==true){return false;}var _b=this.head;if(!_b._p_enable||_b._p_readonly){return false;}var _c=_b._date.int_year;var _d=_b._date.int_month;if((_d-=1)<=0){_d=12;if((_c-=1)<0){_c=9999;}}_b._setDate(_c,_d);_b._refreshSpindate();this._on_head_onheadclick();};_pDatePickerControl._setValue=function(_a){this._value=_a;this.on_apply_value(_a);};_pDatePickerControl.on_apply_value=function(_a){var _b=_a.substr(0,4);var _c=_a.substr(4,2);var _d=_a.substr(6,2);this._selected_year=_b;this._selected_month=_c;this._selected_day=_d;var _e=this.head;if(_e){_e._setDate(_b,_c);_e._recalcLayout();}var _f=this.body;if(_f){_f._setDate(_b,_c,_d);}};_pDatePickerControl._setHeadformatText=function(){var _a=this.head;if(_a){_a._setDate(_a._date.str_year,_a._date.str_month);_a._recalcLayout();}};_pDatePickerControl._setWeekformatText=function(){var _a=this.body;if(_a){_a._setWeekformatText();}};_pDatePickerControl._getInnerDataset=function(){var _a=this._p_parent;if(_a){return _a.getInnerDataset();}return null;};_pDatePickerControl._getBackgroundcolumn=function(){var _a=this._p_parent;if(_a){return _a._p_backgroundcolumn;}return null;};_pDatePickerControl._getBordercolumn=function(){var _a=this._p_parent;if(_a){return _a._p_bordercolumn;}return null;};_pDatePickerControl._getDatecolumn=function(){var _a=this._p_parent;if(_a){return _a._p_datecolumn;}return null;};_pDatePickerControl._getTextcolorcolumn=function(){var _a=this._p_parent;if(_a){return _a._p_textcolorcolumn;}return null;};_pDatePickerControl._getHeadheight=function(){var _a=this._p_parent;if(_a){return _a._p_headheight;}return null;};_pDatePickerControl._getDaysize=function(){var _a=this._p_parent;if(_a){return _a._p_daysize;}return "";};_pDatePickerControl._getHeadformat=function(){var _a=this._p_parent;if(_a){return _a._p_headformat;}return null;};_pDatePickerControl._getWeekformat=function(){var _a=this._p_parent;if(_a){return _a._p_weekformat;}return null;};_pDatePickerControl._getUsetrailingday=function(){var _a=this._p_parent;if(_a){return _a._p_usetrailingday;}return false;};_pDatePickerControl._getShowmonthspin=function(){var _a=this._p_parent;if(_a){return _a._p_showmonthspin;}return false;};_pDatePickerControl._getShowyearspin=function(){var _a=this._p_parent;if(_a){return _a._p_showyearspin;}return false;};_pDatePickerControl._getCurrentDate=function(){var _a=this._p_parent;if(_a){return _a._getCurrentDate();}return "";};_pDatePickerControl._getEndDay=function(_a,_b){var _c=this._p_parent;if(_c){return _c._getEndDay(_a,_b);}return "";};_pDatePickerControl._changeDate=function(_a,_b){var _c=this.body;var _d=_c._date;var _e=_d.int_year;var _f=_d.int_month;var _g=_d.int_day;var _h=this._getEndDay(_e,_f);var _i=false;var _j=false;var _k=false;var _l=false;var _m=false;var _n=nexacro._enableaccessibility;var _o=_b.keycode;if(_o==37||_o==38||_o==39||_o==40||_o==13||(this._use_space_key&&_o==32)){switch(_o){case 13:case 32:var _p=new nexacro.Date(_e,_f -1,_g);_e=_p.getFullYear();_f=_p.getMonth()+1;_g=_p.getDate();break;case 37:if(_b.ctrlkey){_l=true;}else{_m=true;}if(_m){_g-=1;if(_g<=0){_l=true;}}if(_l){_f-=1;if(_f<=0){if(_e<=0){_e=9999;}else{_e-=1;}_f=12;}if(!_b.ctrlkey){_g+=this._getEndDay(_e,_f);}_i=true;}break;case 38:if(_b.ctrlkey){_e-=1;_i=true;}else if(!_n){_g-=7;if(_g<=0){if(_f<=1){_f=12;if(_e<=0){_e=9999;}else{_e-=1;}}else{_f-=1;}_g+=this._getEndDay(_e,_f);}}break;case 39:if(_b.ctrlkey){_j=true;}else{_k=true;}if(_k){_g+=1;if(_g>_h){_j=true;}}if(_j){_f+=1;if(_f>12){if(_e>=9999){_e=0;}else{_e+=1;}_f=1;}if(_k){_g-=_h;}_i=true;}break;case 40:if(_b.ctrlkey){_e+=1;_i=true;}else if(!_n){_g+=7;if(_g>_h){if(_f>=12){_f=1;if(_e>=9999){_e=0;}else{_e+=1;}}else{_f+=1;}_g-=_h;}}break;}_e=nexacro._toString(_e).padLeft(4,"0");_f=nexacro._toString(_f).padLeft(2,"0");_g=nexacro._toString(_g).padLeft(2,"0");this._setValue(_e+_f+_g);if(nexacro._enableaccessibility){if(_i){var _q=this.body._getDayItem(this._selected_day);_q._setAccessibilityLabel(_e+" "+_f+" "+_g);}if(nexacro._accessibilitytype!=2){var _r=this._p_parent;if(_r){var _s=_r._p_calendaredit;if(_s){_s._setAccessibilityLabel(_i?_e+" "+_f+" "+_g:_g);}}}}}if(_n){if(_o==13){this.on_fire_ondayclick(_a);}else if(_o==27){this._p_parent._closePopup();}}};_pDatePickerControl._changeMonth=function(_a,_b){var _c=this.body;var _d=_c._date;var _e=_d.int_year;var _f=_d.int_month;var _g=_d.int_day;var _h=_b.keycode;if(_h==37||_h==38||_h==39||_h==40||_h==13){switch(_h){case 13:var _i=this.head;var _j=_i.yearstatic;var _k=_i.monthstatic;_c._months_visible(false);_c._days_visible(true);if(_f<10){_f="0"+_f;}else{_f=""+_f;}_c.weekband.set_visible(true);for(var _l=0;_l<_c._maxWeek;_l++ ){_c._weekitems[_l].set_visible(true);}_k.set_visible(true);_k.set_text(_f);_i._date.str_month=_f;_j.set_text(_i._date.str_year+".");_i._recalcYearStatic(true);_c._setDate(_i._date.str_year,_i._date.str_month,_c._date.str_day);break;case 37:_f-=1;if(_f<=0){if(_e<=0){_e=9999;}else{_e-=1;}_f=12;}break;case 38:_f-=4;if(_f<=0){if(_e<=0){_e=9999;}else{_e-=1;}_f=12;}break;case 39:_f+=1;if(_f>=13){if(_e<=0){_e=9999;}else{_e+=1;}_f=1;}break;case 40:_f+=4;if(_f>=13){if(_e<=0){_e=9999;}else{_e+=1;}_f=1;}break;}for(var _l=0;_l<this.body._maxMonth;_l++ ){if(parseInt(this.body._monthitems[_l].text)==_f){this.body._monthitems[_l]._changeUserStatus("selected",true);}else{this.body._monthitems[_l]._changeUserStatus("selected",false);}}if(_d.int_year!=_e){this.head.yearstatic.set_text(_e);_d.int_year=_e;this.head._date.str_year=String(_e);}else if(_e!=parseInt(this.head._date.str_year)){this.head._date.str_year=String(_e);}_d.int_month=_f;}};_pDatePickerControl._changeYear=function(_a,_b){var _c=this.body;var _d=_c._date;var _e=_d.int_year;var _f=_d.int_month;var _g=_d.int_day;var _h=_b.keycode;var _i=this.head.yearstatic.text.split(" - ");var _j=parseInt(_i[0]);var _k=parseInt(_i[1]);if(_h==37||_h==38||_h==39||_h==40||_h==13){switch(_h){case 13:_c._years_visible(false);_c._months_visible(true);this.head.yearstatic.set_text(_e);this.head._recalcYearStatic();break;case 37:_e-=1;break;case 38:_e-=4;break;case 39:_e+=1;break;case 40:_e+=4;break;}if(_e<_j+1&&_h!=13){_j=_j -10;_k=_k -10;var _l=_j+" - "+_k;this.head.yearstatic.set_text(_l);_c._years_visible(true,_j);this.head._recalcYearStatic();if(_h==38&&_e!=_k -1){_e+=2;if(_e==_k){_e-=1;}}}else if(_e>_k -1){_j=_j+10;_k=_k+10;var _l=_j+" - "+_k;this.head.yearstatic.set_text(_l);_c._years_visible(true,_j);this.head._recalcYearStatic();if(_h==40&&_e!=_j+1){_e-=2;if(_e==_j){_e+=1;}}}for(var _m=0;_m<this.body._maxYear;_m++ ){if(parseInt(this.body._yearitems[_m].text)==_e){this.body._yearitems[_m]._changeUserStatus("selected",true);}else{if(parseInt(this.body._yearitems[_m].text)!=_j&&parseInt(this.body._yearitems[_m].text)!=_j+11){this.body._yearitems[_m]._changeUserStatus("selected",false);}}}_d.int_year=_e;}};_pDatePickerControl._recalcLayout=function(){if(this._is_created_contents){var _a=this._getHeadheight();var _b=this._getClientWidth();var _c=this._getClientHeight();if(!_a){_a=_c/8;}var _d=0;var _e=0+_a;var _f=_b;var _g=_c-_a;var _h=0;var _i=0;var _j=_b;var _k=_a;this.body.move(_d,_e,_f,_g,null,null);this.head.move(_h,_i,_j,_k,null,null);}};_pDatePickerControl._refreshSpindate=function(){var _a=this.head;if(this._is_created){if(_a){_a._refreshSpindate();}}};_pDatePickerControl._refreshDay=function(){var _a=this.body;if(this._is_created){if(_a){_a._refreshDay();}}};_pDatePickerControl._on_beforerepeat=function(_a){var _b=this.head;if(_b){return _b._on_beforerepeat(_a);}};delete _pDatePickerControl;nexacro._DatePickerHeadControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._date={str_year:"",str_month:"",int_year:0,int_month:0};};var _pDatePickerHeadControl=nexacro._createPrototype(nexacro.Component,nexacro._DatePickerHeadControl);nexacro._DatePickerHeadControl.prototype=_pDatePickerHeadControl;_pDatePickerHeadControl._type_name="DatePickerHeadControl";_pDatePickerHeadControl._is_subcontrol=true;_pDatePickerHeadControl.prevbutton=null;_pDatePickerHeadControl.nextbutton=null;_pDatePickerHeadControl.yearstatic=null;_pDatePickerHeadControl.monthstatic=null;_pDatePickerHeadControl.yearspin=null;_pDatePickerHeadControl.monthspin=null;_pDatePickerHeadControl._use_readonly_status=true;_pDatePickerHeadControl._event_list={"onclick":1,"onspin":1,"onkeydown":1};_pDatePickerHeadControl.on_create_contents=function(){var _a=this.prevbutton=new nexacro.Button("prevbutton",0,0,0,0,null,null,null,null,null,null,this);var _b=this.nextbutton=new nexacro.Button("nextbutton",0,0,0,0,null,null,null,null,null,null,this);var _c=this.yearstatic=new nexacro.Static("yearstatic",0,0,0,0,null,null,null,null,null,null,this);var _d=this.monthstatic=new nexacro.Static("monthstatic",0,0,0,0,null,null,null,null,null,null,this);var _e=this.yearspin=new nexacro._YearSpinControl("yearspin",0,0,0,0,null,null,null,null,null,null,this);var _f=this.monthspin=new nexacro._MonthSpinControl("monthspin",0,0,0,0,null,null,null,null,null,null,this);_a._setControl();_b._setControl();_c._setControl();_d._setControl();_e._setControl();_f._setControl();_a.createComponent(true);_b.createComponent(true);_c.createComponent(true);_d.createComponent(true);_e.createComponent(true);_f.createComponent(true);_e.set_visible(false);_e.set_min("0");_e.set_max("9999");_e.set_circulation(true);_e.set_displaycomma(false);_f.set_visible(false);_f.set_min("1");_f.set_max("12");_f.set_circulation(true);_f.set_displaycomma(false);};_pDatePickerHeadControl.on_created_contents=function(_a){this.on_apply_prop_enable(this._p_enable);var _b=this.prevbutton;var _c=this.nextbutton;var _d=this.yearstatic;var _e=this.monthstatic;var _f=this.yearspin;var _g=this.monthspin;if(nexacro._isTouchInteraction&&nexacro._SupportTouch){_d._setEventHandler("onclick",this._on_static_mobile_onclick,this);_e._setEventHandler("onclick",this._on_static_mobile_onclick,this);}_d._setEventHandler("onlbuttondown",this._on_static_onlbuttondown,this);_e._setEventHandler("onlbuttondown",this._on_static_onlbuttondown,this);_b._setEventHandler("onclick",this._on_button_onprevclick,this);_c._setEventHandler("onclick",this._on_button_onnextclick,this);_f._setEventHandler("onspin",this._on_spin_onspin,this);_g._setEventHandler("onspin",this._on_spin_onspin,this);_f._setEventHandler("onkeydown",this._on_spin_onkeydown,this);_g._setEventHandler("onkeydown",this._on_spin_onkeydown,this);_b.on_created(_a);_c.on_created(_a);_d.on_created(_a);_e.on_created(_a);_f.on_created(_a);_g.on_created(_a);_f.set_value(this._date.str_year);_g.set_value(this._date.str_month);if(this._p_parent._is_popupcontains){_f._setEnableView(false);_g._setEnableView(false);}this._refreshSpindate();};_pDatePickerHeadControl.on_create_contents_command=function(){this._refreshSpindate();var _a="";if(this.prevbutton){_a+=this.prevbutton.createCommand();}if(this.nextbutton){_a+=this.nextbutton.createCommand();}if(this.yearstatic){_a+=this.yearstatic.createCommand();}if(this.monthstatic){_a+=this.monthstatic.createCommand();}if(this.yearspin){_a+=this.yearspin.createCommand();}if(this.monthspin){_a+=this.monthspin.createCommand();}return _a;};_pDatePickerHeadControl.on_attach_contents_handle=function(_a){var _b=this.prevbutton;var _c=this.nextbutton;var _d=this.yearstatic;var _e=this.monthstatic;var _f=this.yearspin;var _g=this.monthspin;if(nexacro._isTouchInteraction&&nexacro._SupportTouch){_d._setEventHandler("onclick",this._on_static_mobile_onclick,this);_e._setEventHandler("onclick",this._on_static_mobile_onclick,this);}_d._setEventHandler("onlbuttondown",this._on_static_onlbuttondown,this);_e._setEventHandler("onlbuttondown",this._on_static_onlbuttondown,this);_b._setEventHandler("onclick",this._on_button_onprevclick,this);_c._setEventHandler("onclick",this._on_button_onnextclick,this);_f._setEventHandler("onspin",this._on_spin_onspin,this);_g._setEventHandler("onspin",this._on_spin_onspin,this);_f._setEventHandler("onkeydown",this._on_spin_onkeydown,this);_g._setEventHandler("onkeydown",this._on_spin_onkeydown,this);_b.attachHandle(_a);_c.attachHandle(_a);_d.attachHandle(_a);_e.attachHandle(_a);_f.attachHandle(_a);_g.attachHandle(_a);_f.set_value(this._date.str_year);_g.set_value(this._date.str_month);if(this._p_parent._is_popupcontains){_f._setEnableView(false);_g._setEnableView(false);}};_pDatePickerHeadControl.on_destroy_contents=function(){this._date=null;if(this.prevbutton){this.prevbutton.destroy();this.prevbutton=null;}if(this.nextbutton){this.nextbutton.destroy();this.nextbutton=null;}if(this.yearstatic){this.yearstatic.destroy();this.yearstatic=null;}if(this.monthstatic){this.monthstatic.destroy();this.monthstatic=null;}if(this.yearspin){this.yearspin.destroy();this.yearspin=null;}if(this.monthspin){this.monthspin.destroy();this.monthspin=null;}};_pDatePickerHeadControl.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pDatePickerHeadControl.on_apply_prop_enable=function(_a){if(this.prevbutton){this.prevbutton._setEnable(_a);}if(this.nextbutton){this.nextbutton._setEnable(_a);}if(this.yearstatic){this.yearstatic._setEnable(_a);}if(this.monthstatic){this.monthstatic._setEnable(_a);}if(this.yearspin){this.yearspin._setEnable(_a);}if(this.monthspin){this.monthspin._setEnable(_a);}};_pDatePickerHeadControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pDatePickerHeadControl.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this.getElement();if(_b){var _c=this.yearspin;if(_c){_c.set_readonly(_a);}var _d=this.monthspin;if(_d){_d.set_readonly(_a);}}};_pDatePickerHeadControl._on_static_mobile_before_onclick=function(){return true;};_pDatePickerHeadControl._on_static_mobile_onclick=function(_a,_b){if(!this._on_static_mobile_before_onclick()){return false;}var _c=this._p_parent._p_parent;if(_c&&_c._onlydisplay==true){_c.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,_c,_a,_b.meta_key);return false;}var _d=this.yearstatic;var _e=this.monthstatic;var _f=this.yearspin;var _g=this.monthspin;var _h=this._p_parent.body;var _i=parseInt(this._date.str_year);var _j=parseInt(_i/10)* 10-1;var _k=_j+11;var _l=_j+" - "+_k;var _m=_a.name;if(_m=="yearstatic"){if(this._p_parent._changetype=="button"){_e.set_visible(false);_d.set_text(_l);this._recalcYearStatic();_h._months_visible(false);_h._days_visible(false);_h._years_visible(true,_j);}else{_d.set_visible(false);_f.set_visible(true);}}else if(_m=="monthstatic"){if(this._p_parent._changetype=="button"){_d.set_text(_i);this._recalcYearStatic();_e.set_visible(false);_h._years_visible(false);_h._days_visible(false);_h._months_visible(true);}else{_e.set_visible(false);_g.set_visible(true);}}};_pDatePickerHeadControl._on_static_before_onlbuttondown=function(){return true;};_pDatePickerHeadControl._on_static_onlbuttondown=function(_a,_b){if(this._p_readonly){return;}if(!this._on_static_before_onlbuttondown()){return false;}var _c=this._p_parent._p_parent;if(_c&&_c._onlydisplay==true){return false;}var _d=this.yearstatic;var _e=this.monthstatic;var _f=this.yearspin;var _g=this.monthspin;var _h=this._p_parent.body;var _i=parseInt(this._date.str_year);var _j=parseInt(_i/10)* 10-1;var _k=_j+11;var _l=_j+" - "+_k;var _m=_a.name;if(_m=="yearstatic"){if(this._p_parent._changetype=="button"){for(var _n=0;_n<_h._maxWeek;_n++ ){_h._weekitems[_n].set_visible(false);}_e.set_visible(false);_d.set_text(_l);this._recalcYearStatic();_h._months_visible(false);_h._days_visible(false);_h._years_visible(true,_j);}else{_d.set_visible(false);_f.set_visible(true);}}else if(_m=="monthstatic"){if(this._p_parent._changetype=="button"){for(var _n=0;_n<_h._maxWeek;_n++ ){_h._weekitems[_n].set_visible(false);}_d.set_text(_i);this._recalcYearStatic();_e.set_visible(false);_h._years_visible(false);_h._days_visible(false);_h._months_visible(true);}else{_e.set_visible(false);_g.set_visible(true);}}};_pDatePickerHeadControl._on_button_onprevclick=function(_a,_b){var _c=this._p_parent._p_parent;if(_c&&_c._onlydisplay==true){_c.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,_c,_a,_b.meta_key);}if(!this._p_enable||this._p_readonly){return false;}var _d=this._p_parent.body;var _e=parseInt(this._date.str_year)-11;var _f=parseInt(this.yearstatic.text.split(" - ")[0])-10;var _g=_f+11;var _h=_f+" - "+_g;if(!this.monthstatic._p_visible&&this._p_parent._changetype=="button"){if(this.yearstatic.text.length>6){this.yearstatic.set_text(_h);_d._years_visible(true,_f);this._recalcYearStatic();this._date.str_year=String(_e);}else{this._date.str_year=String(parseInt(this._date.str_year)-1);this.yearstatic.set_text(this._date.str_year);}return;}var _i=parseInt(this._date.str_year);var _j=parseInt(this._date.str_month);if((_j-=1)<=0){_j=12;if((_i-=1)<0){_i=9999;}}if(this._p_parent._changetype=="button"){var _k=this;var _d=this._p_parent.body;this._date.str_month=String(_j);this._date.str_year=String(_i);_d._setDate(_k._date.str_year,_k._date.str_month,_d._date.str_day);}this._setDate(_i,_j);this._refreshSpindate();this.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,this,_a,_b.meta_key);};_pDatePickerHeadControl._on_button_onnextclick=function(_a,_b){var _c=this._p_parent._p_parent;if(_c&&_c._onlydisplay==true){_c.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,_c,_a,_b.meta_key);return false;}if(!this._p_enable||this._p_readonly){return false;}var _d=this._p_parent.body;var _e=parseInt(this._date.str_year)+11;var _f=parseInt(this.yearstatic.text.split(" - ")[0])+10;var _g=_f+11;var _h=_f+" - "+_g;if(!this.monthstatic._p_visible&&this._p_parent._changetype=="button"){if(this.yearstatic.text.length>6){this.yearstatic.set_text(_h);_d._years_visible(true,_f);this._recalcYearStatic();this._date.str_year=String(_e);}else{this._date.str_year=String(parseInt(this._date.str_year)+1);this.yearstatic.set_text(this._date.str_year);}return;}var _i=parseInt(this._date.str_year);var _j=parseInt(this._date.str_month);if((_j+=1)>12){_j=1;if((_i+=1)>9999){_i=0;}}if(this._p_parent._changetype=="button"){var _k=this;var _d=this._p_parent.body;this._date.str_month=String(_j);this._date.str_year=String(_i);_d._setDate(_k._date.str_year,_k._date.str_month,_d._date.str_day);}this._setDate(_i,_j);this._refreshSpindate();this.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,this,_a,_b.meta_key);};_pDatePickerHeadControl._on_spin_onspin=function(_a,_b){var _c=nexacro._toString(_b.postvalue);var _d=this._date.str_year;var _e=this._date.str_month;var _f=_a.name;if(_f=="yearspin"){_d=_c;}else if(_f=="monthspin"){_e=_c;}this._setDate(_d,_e);this.on_fire_onspin(_a,_b);};_pDatePickerHeadControl._on_spin_onkeydown=function(_a,_b){if(_b.keycode==nexacro.Event.KEY_ENTER){var _c=this._date.str_year;var _d=this._date.str_month;var _e=_a.name;if(_e=="yearspin"){_c=_a.text;}else if(_e=="monthspin"){_d=_a.text;}this._setDate(_c,_d);this.on_fire_onspin(_a,_b);}};_pDatePickerHeadControl.on_fire_onspin=function(_a,_b,_c,_d,_e,_f){if(this.onspin&&this.onspin._has_handlers){var _g=new nexacro.SpinEventInfo(_a,"onspin",_b,_c,_d,_e,_f);return this.onspin._fireEvent(this,_g);}return true;};_pDatePickerHeadControl._refreshSpindate=function(){if(this._p_parent._changetype=="button"){return;}var _a=this.yearstatic;var _b=this.monthstatic;var _c=this.yearspin;var _d=this.monthspin;if(_a||_b){var _e=this._getShowyearspin();var _f=this._getShowmonthspin();if(_e){if(_f){_a.set_visible(false);_b.set_visible(false);_c.set_visible(true);_d.set_visible(true);}else{_a.set_visible(false);_b.set_visible(true);_c.set_visible(true);_d.set_visible(false);}}else{if(_f){_a.set_visible(true);_b.set_visible(false);_c.set_visible(false);_d.set_visible(true);}else{_a.set_visible(true);_b.set_visible(true);_c.set_visible(false);_d.set_visible(false);}}}};_pDatePickerHeadControl._recalcLayout=function(){if(this._is_created_contents){var _a=this._getHeadformat();var _b=this._getClientWidth();var _c=this._getClientHeight();var _d=0,_e=0,_f=0;var _g=0,_h=0,_i=0;var _j=this.prevbutton;if(_j){_j.move(0,0,_c,_c,null,null);}var _k=this.nextbutton;if(_k){_k.move(_b-_c,0,_c,_c,null,null);}var _l=this.yearstatic;if(_l){_d=_l._on_getFitSize();_f=_d[0];}var _m=this.monthstatic;if(_m){_g=_m._on_getFitSize();_i=_g[0];}var _n=((_b/2)-((_f+_i)/2));if(_a=="MM.yyyy"){_h=_n;_e=_n+_i;}else{_e=_n;_h=_n+_f;}if(_l){_l.move(_e,0,_f,_c,null,null);}if(_m){_m.move(_h,0,_i,_c,null,null);}var _o=this.yearspin;if(_o){_d=this._getSpinControlSize("year");_f=_d+_c;}var _p=this.monthspin;if(_p){_g=this._getSpinControlSize("month");_i=_g+_c;}_n=((_b/2)-((_f+_i)/2));if(_a=="MM.yyyy"){_h=_n;_e=_n+_i;}else{_e=_n;_h=_n+_f;}if(_o){_o.move(_e,0,_f,_c,null,null);}if(_p){_p.move(_h,0,_i,_c,null,null);}}};_pDatePickerHeadControl._recalcYearStatic=function(_a){var _b=this._getHeadformat();var _c=this._getClientWidth();var _d=this._getClientHeight();var _e=0,_f=0,_g=0;var _h=0,_i=0,_j=0;var _k=this.yearstatic;if(_k){_e=_k._on_getFitSize();_g=_e[0];}var _l=this.monthstatic;if(_l){_h=_l._on_getFitSize();_j=_h[0];}if(_a){var _m=((_c/2)-((_g+_j)/2));}else{var _m=((_c/2)-((_g)/2));}if(_b=="MM.yyyy"){_i=_m;_f=_m+_j;}else{_f=_m;_i=_m+_g;}if(_k){_k.move(_f,0,_g,_d,null,null);}};_pDatePickerHeadControl._on_beforerepeat=function(_a){if(_a==this.prevbutton||_a==this.nextbutton||_a instanceof nexacro._SpinButtonControl){return [true,true];}return [false,true];};_pDatePickerHeadControl._setDate=function(_a,_b){var _c=this._date;if(_c){_c.str_year=nexacro._toString(_a).padLeft(4,"0");_c.str_month=nexacro._toString(_b).padLeft(2,"0");_c.int_year= +_a;_c.int_month= +_b;}var _d=this.yearstatic;var _e=this.yearspin;var _f=this.monthstatic;var _g=this.monthspin;if(this._getHeadformat()=="MM.yyyy"){_d.set_text(_c.str_year);_f.set_text(_c.str_month+".");}else{_d.set_text(_c.str_year+".");_f.set_text(_c.str_month);}_e.set_value(_c.str_year);_g.set_value(_c.str_month);};_pDatePickerHeadControl._getHeadheight=function(){var _a=this._p_parent;if(_a){return _a._getHeadheight();}return null;};_pDatePickerHeadControl._getHeadformat=function(){var _a=this._p_parent;if(_a){return _a._getHeadformat();}return null;};_pDatePickerHeadControl._getShowyearspin=function(){var _a=this._p_parent;if(_a){return _a._getShowyearspin();}return null;};_pDatePickerHeadControl._getShowmonthspin=function(){var _a=this._p_parent;if(_a){return _a._getShowmonthspin();}return null;};_pDatePickerHeadControl._getSpinControlSize=function(_a){var _b;switch(_a){case "year":_b=this.yearspin;break;case "month":_b=this.monthspin;break;}var _c=0;if(_b){var _d=_b._getCurrentStyleBorder();if(_d){_c+=_d._getBorderWidth();}var _e=_b._getCurrentStylePadding();if(_e){_c+=_e.left+_e.right;}var _f=_b._p_spinedit;if(_f){var _g=_f.text;if(_g.length==1&&_a=="month"){_f._p_text+=".0";}else if(_g.length<4&&_a=="year"){_f._p_text="0000.";}else{_f._p_text+=".";}_c+=_f._on_getFitSize()[0];_f._p_text=_g;}}return _c;};nexacro._DatePickerBodyControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._weekitems=[];this._dayitems=[];this._monthitems=[];this._yearitems=[];this._changedDays=[];this._date={str_year:"",str_month:"",str_day:"",int_year:0,int_month:0,int_day:0};};var _pDatePickerBodyControl=nexacro._createPrototype(nexacro.Component,nexacro._DatePickerBodyControl);nexacro._DatePickerBodyControl.prototype=_pDatePickerBodyControl;_pDatePickerBodyControl._type_name="DatePickerBodyControl";_pDatePickerBodyControl.weekband=null;_pDatePickerBodyControl._preday="";_pDatePickerBodyControl._maxWeek=7;_pDatePickerBodyControl._maxDay=42;_pDatePickerBodyControl._maxMonth=12;_pDatePickerBodyControl._maxYear=12;_pDatePickerBodyControl._is_subcontrol=true;_pDatePickerBodyControl._use_readonly_status=true;_pDatePickerBodyControl._is_locale_control=true;_pDatePickerBodyControl._event_list={"onclick":1,"ondayclick":1,"onkeydown":1,"onmonthclick":1,"onyearclick":1};_pDatePickerBodyControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.weekband=new nexacro.Static("weekband",0,0,0,0,null,null,null,null,null,null,this);_b._setControl();_b.createComponent(true);var _c=this._getWeekformat();var _d=this._getMonthformat();var _e=this._getYearformat();var _f=this._weekitems;var _g=this._dayitems;var _h=this._monthitems;var _i=this._yearitems;var _j=this._maxWeek;var _k=this._maxDay;var _l=this._maxMonth;var _m=this._maxYear;var _n,_o,_p,_q;this._p_parent.on_apply_datepickerchangetype(this._p_parent._p_parent._p_datepickerchangetype);for(var _r=0;_r<_j;_r++ ){_n=_f[_r]=new nexacro._DatePickerWeekItemControl("weekitem"+_r,0,0,0,0,null,null,null,null,null,null,this);_n.set_text(_c[_r]);_n._setDaysOfWeek(_r%7);_n.createComponent(true);}for(_r=0;_r<_k;_r++ ){_o=_g[_r]=new nexacro._DatePickerDayItemControl("dayitem"+_r,0,0,0,0,null,null,null,null,null,null,this);_o._setDaysOfWeek(_r%7);_o.createComponent(true);}if(this._p_parent._changetype=="button"){for(_r=0;_r<_l;_r++ ){_p=_h[_r]=new nexacro._DatePickerMonthItemControl("monthitem"+_r,0,0,0,0,null,null,null,null,null,null,this);_p.set_text(_r+1);_p.set_textAlign("center");_p.set_visible(false);_p.createComponent(true);}for(_r=0;_r<_m;_r++ ){_q=_i[_r]=new nexacro._DatePickerYearItemControl("yearitem"+_r,0,0,0,0,null,null,null,null,null,null,this);_q.set_text(_e[_r]);_q.set_textAlign("center");_q.set_visible(false);_q.createComponent(true);}}}};_pDatePickerBodyControl.on_created_contents=function(_a){var _b=this.getElement();if(_b){var _c=this._weekitems;var _d=this._dayitems;var _e=this._monthitems;var _f=this._yearitems;var _g=this._maxWeek;var _h=this._maxDay;var _i=this._maxMonth;var _j=this._maxYear;this.weekband.on_created(_a);for(var _k=0;_k<_g;_k++ ){_c[_k].on_created(_a);}for(_k=0;_k<_h;_k++ ){_d[_k]._setEventHandler("onclick",this._on_dayitem_ondayclick,this);_d[_k].on_created(_a);}if(this._p_parent._changetype=="button"){for(_k=0;_k<_i;_k++ ){_e[_k]._setEventHandler("onclick",this._on_monthitem_onmonthclick,this);_e[_k].on_created(_a);}for(_k=0;_k<_j;_k++ ){_f[_k]._setEventHandler("onclick",this._on_yearitem_onyearclick,this);_f[_k].on_created(_a);}}}};_pDatePickerBodyControl.on_create_contents_command=function(){var _a=this.weekband;var _b=this._weekitems;var _c=this._dayitems;var _d=this._monthitems;var _e=this._yearitems;var _f=this._maxWeek;var _g=this._maxDay;var _h=this._maxMonth;var _i=this._maxYear;var _j="";_j+=_a.createCommand();for(var _k=0;_k<_f;_k++ ){_j+=_b[_k].createCommand();}for(_k=0;_k<_g;_k++ ){_j+=_c[_k].createCommand();}if(this._p_parent._changetype=="button"){for(_k=0;_k<_h;_k++ ){_j+=_d[_k].createCommand();}for(_k=0;_k<_i;_k++ ){_j+=_e[_k].createCommand();}}return _j;};_pDatePickerBodyControl.on_attach_contents_handle=function(_a){var _b=this.weekband;var _c=this._weekitems;var _d=this._dayitems;var _e=this._monthitems;var _f=this._yearitems;var _g=this._maxWeek;var _h=this._maxDay;var _i=this._maxMonth;var _j=this._maxYear;_b.attachHandle(_a);for(var _k=0;_k<_g;_k++ ){_c[_k].attachHandle(_a);}for(_k=0;_k<_h;_k++ ){_d[_k]._setEventHandler("onclick",this._on_dayitem_ondayclick,this);_d[_k].attachHandle(_a);}if(this._p_parent._changetype=="button"){for(_k=0;_k<_i;_k++ ){_e[_k]._setEventHandler("onclick",this._on_monthitem_onmonthclick,this);_e[_k].attachHandle(_a);}for(_k=0;_k<_j;_k++ ){_f[_k]._setEventHandler("onclick",this._on_yearitem_onyearclick,this);_f[_k].attachHandle(_a);}}};_pDatePickerBodyControl.on_destroy_contents=function(){if(this.weekband){this.weekband.destroy();this.weekband=null;}var _a=this._weekitems;var _b=this._dayitems;var _c=this._monthitems;var _d=this._yearitems;var _e=this._maxWeek;var _f=this._maxDay;var _g=this._maxMonth;var _h=this._maxYear;for(var _i=0;_i<_e;_i++ ){_a[_i].destroy();}for(_i=0;_i<_f;_i++ ){_b[_i].destroy();}if(this._p_parent._changetype=="button"){for(var _i=0;_i<_g;_i++ ){_c[_i].destroy();}for(_i=0;_i<_h;_i++ ){_d[_i].destroy();}this._monthitems=null;this._yearitems=null;}this._weekitems=null;this._dayitems=null;this._changedDays=null;this._date=null;};_pDatePickerBodyControl.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pDatePickerBodyControl.on_apply_prop_enable=function(_a){var _b;var _c=this._weekitems;var _d=this._dayitems;var _e=this._monthitems;var _f=this._yearitems;var _g=this._maxWeek;var _h=this._maxDay;var _i=this._maxMonth;var _j=this._maxYear;if(this.weekband){this.weekband._setEnable(_a);}for(_b=0;_b<_g;_b++ ){_c[_b]._setEnable(_a);}for(_b=0;_b<_h;_b++ ){_d[_b]._setEnable(_a);}if(this._p_parent._changetype=="button"){for(_b=0;_b<_i;_b++ ){_e[_b]._setEnable(_a);}for(_b=0;_b<_j;_b++ ){_f[_b]._setEnable(_a);}}};_pDatePickerBodyControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pDatePickerBodyControl.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this._weekitems;var _c=this._dayitems;var _d=this._monthitems;var _e=this._yearitems;var _f=this._maxWeek;var _g=this._maxDay;var _h=this._maxMonth;var _i=this._maxYear;for(var _j=0;_j<_f;_j++ ){_b[_j].set_readonly(_a);}for(_j=0;_j<_g;_j++ ){_c[_j].set_readonly(_a);}if(this._p_parent._changetype=="button"){for(var _j=0;_j<_h;_j++ ){_d[_j].set_readonly(_a);}for(_j=0;_j<_i;_j++ ){_e[_j].set_readonly(_a);}}};_pDatePickerBodyControl._on_dayitem_ondayclick=function(_a,_b){var _c=this._p_parent._p_parent;if(_c&&_c._onlydisplay==true){_c.on_fire_onclick(_b.button,_b.alt_key,_b.ctrl_key,_b.shift_key,_b.screenX,_b.screenY,_b.canvasX,_b.canvasY,_b.clientX,_b.clientY,_c,_a,_b.meta_key);return false;}this.on_fire_ondayclick(_a,_b);};_pDatePickerBodyControl.on_fire_ondayclick=function(_a,_b){if(this.ondayclick&&this.ondayclick._has_handlers){return this.ondayclick._fireEvent(this,_b);}return false;};_pDatePickerBodyControl._on_monthitem_onmonthclick=function(_a,_b){var _c=this._p_parent.head;this._months_visible(false);this._days_visible(true);this.on_fire_onmonthclick(_a,_b);this._setDate(_c._date.str_year,_c._date.str_month,this._date.str_day);};_pDatePickerBodyControl.on_fire_onmonthclick=function(_a,_b){if(this.onmonthclick&&this.onmonthclick._has_handlers){return this.onmonthclick._fireEvent(this,_b);}return false;};_pDatePickerBodyControl._on_yearitem_onyearclick=function(_a,_b){this._years_visible(false);this._months_visible(true);this.on_fire_onyearclick(_a,_b);};_pDatePickerBodyControl.on_fire_onyearclick=function(_a,_b){if(this.onyearclick&&this.onyearclick._has_handlers){return this.onyearclick._fireEvent(this,_b);}return false;};_pDatePickerBodyControl._days_visible=function(_a){var _b=this._dayitems;var _c=this._maxDay;for(var _d=0;_d<_c;_d++ ){if(_b[_d]){_b[_d].set_visible(_a);}}this.weekband.set_visible(_a);};_pDatePickerBodyControl._months_visible=function(_a){var _b=this._monthitems;var _c=this._maxMonth;for(var _d=0;_d<_c;_d++ ){if(_b[_d]){_b[_d].set_visible(_a);if(_d+1==parseInt(this._p_parent.head._date.int_month)){_b[_d]._changeUserStatus("selected",true);}else{_b[_d]._changeUserStatus("selected",false);}}}};_pDatePickerBodyControl._years_visible=function(_a,_b){var _c=this._yearitems;var _d=this._maxYear;if(_b){for(var _e=0;_e<_d;_e++ ){if(_c[_e]){_c[_e].set_text(_b+_e);_c[_e].set_visible(_a);if(_b+_e==parseInt(this._p_parent.head._date.int_year)){_c[_e]._changeUserStatus("selected",true);}else{_c[_e]._changeUserStatus("selected",false);}}}}else{for(var _e=0;_e<_d;_e++ ){if(_c[_e]){_c[_e].set_visible(_a);}}}};_pDatePickerBodyControl._recalcLayout=function(){if(this._is_created_contents){var _a=this._weekitems;var _b=this._dayitems;var _c=this._maxWeek;var _d=this._maxDay;var _e=this._getClientWidth();var _f=this._getClientHeight();var _g=this._getClientLeft();var _h=this._getClientTop();var _i=this._getDaysize();var _j=_i.width;var _k=_i.height;var _l=_j* 7;var _m=_k* 7;var _n=0;var _o=0;if(_l<_e){_n=(_e-_l)/14;}if(_m<_f){_o=(_f-_m)/8;}var _p=_g+_n;var _q=_h+(_o/2);this.weekband.move(_g,_q,_e,_k,null,null);var _r;for(_r=0;_r<_c;_r++ ){_a[_r].move(_p,_q,_j,_k,null,null);_p=_p+_j+(_n* 2);}var _s=_g+_n;var _t=_q+_k+_o;for(_r=0;_r<_d;_r++ ){_b[_r].move(_s,_t,_j,_k,null,null);_s=_s+_j+(_n* 2);if(((_r+1)%7)==0){_s=_g+_n;_t=_t+_k+_o;}}if(this._p_parent._changetype=="button"){var _u=this._monthitems;var _v=this._yearitems;var _w=this._maxMonth;var _x=this._maxYear;var _y=this._getMonthsize();var _z=this._getYearsize();var _aa=_y.width;var _ab=_y.height;var _ac=_z.width;var _ad=_z.height;var _ae=_g+_n;var _af=_q+_k+_o;for(_r=0;_r<_w;_r++ ){_u[_r].move(_ae,_af,_aa,_ab,null,null);_ae=_ae+_aa+(_n* 2);if(((_r+1)%4)==0){_ae=_g+_n;_af=_af+_ab+_o;}}var _ag=_g+_n;var _ah=_q+_k+_o;for(_r=0;_r<_x;_r++ ){_v[_r].move(_ag,_ah,_ac,_ad,null,null);_ag=_ag+_ac+(_n* 2);if(((_r+1)%4)==0){_ag=_g+_n;_ah=_ah+_ad+_o;}}}}};_pDatePickerBodyControl._refreshDay=function(){var _a,_b=this.getElement();if(_b){var _c={};var _d={};var _e=this._date;var _f=_e.int_year;var _g=_e.int_month;_a=_e.int_day;var _h=new Date(_f,_g -1,1);if(_f<100){_h.setFullYear(_f);}var _i=nexacro.Calendar.EndDayNormal;var _j=nexacro.Calendar.EndDayLeap;var _k=_h.getDay();var _l=this._getLeapYear(_f)?_j[_g -1]:_i[_g -1];var _m=this._getUsetrailingday();if(_m){_d=this._getUseTrailingDayInfo(_f,_g,_h,_l);}var _n=this._dayitems;var _o=this._maxDay;var _p=1;var _q=-1;for(var _s=0;_s<_o;_s++ ){if(_k<=_s&&_l>=_p){_c=this._getDayInfo(_p,false,true,_f,_g);this._setDayItemInfo(_n[_s],_c.text,_c.visible,_c.year,_c.month,_c.trailingday);_q=_s%7;if(_q>=0&&_q<=6){_n[_s]._changeDayUserStatus(_q,true);}else{if(this._isToday(_c.day)){_n[_s]._changeUserStatus("today",true);}else{_n[_s]._changeUserStatus("day",true);}}_p++ ;}else{if(_m){if(_d.idx>=0){_c=this._getDayInfo(_d.pre_endDay-_d.idx,true,true,_d.prev_year,_d.prev_month);_d.idx-- ;}else{_c=this._getDayInfo(_d.next_beginDay,true,true,_d.next_year,_d.next_month);_d.next_beginDay++ ;_d.endWeek++ ;}this._setDayItemInfo(_n[_s],_c.text,_c.visible,_c.year,_c.month,_c.trailingday);_n[_s]._changeUserStatus("trailingday",true);}else{_c=this._getDayInfo("",false,false,"","");this._setDayItemInfo(_n[_s],_c.text,_c.visible,_c.year,_c.month,_c.trailingday);}}}}this._initChangedDays();var _r=this._getInnerDataset();if(_r){this._setDatasetStyle(_r);}if(this._isSelectedDay(_a)){this._on_apply_day(true);}else{this._on_apply_day(false);}this._setCalendarAccessibility();};_pDatePickerBodyControl._on_apply_day=function(_a){var _b=this._preday;var _c=this._date.str_day;var _d=this._getDayItem(_b);var _e=this._getDayItem(_c);this._preday=_c;if(_d){_d._changeUserStatus("selected",false);if(_d._daysofweek>=0&&_d._daysofweek<=6){_d._changeDayUserStatus(_d._daysofweek,true);}else{_d._changeUserStatus("day",true);}}if(_e){if(_a){_e._changeUserStatus("selected",true);}else{_e._changeUserStatus("selected",false);if(_e._daysofweek>=0&&_e._daysofweek<=6){_e._changeDayUserStatus(_e._daysofweek,true);}else{_e._changeUserStatus("day",true);}}}var _f=new Date();var _g=_f.getDate();if(this._isToday(_g)){_g=nexacro._toString(_g).padLeft(2,"0");var _h=this._getDayItem(_g);if(_a){if(_h!=_e){_h._changeUserStatus("today",true);}}else{_h._changeUserStatus("today",true);}}};_pDatePickerBodyControl._initChangedDays=function(){var _a=this._changedDays.length;for(var _b=(_a -1);_b>=0;_b-- ){this._changedDays[_b].set_background(null);this._changedDays[_b].set_color(null);this._changedDays[_b].set_border(null);this._changedDays.pop();}};_pDatePickerBodyControl._setDate=function(_a,_b,_c){var _d=this._date;if(_d.str_year!=(_a=_a.padLeft(4,"0"))){_d.str_year=_a;_d.int_year= +_a;}if(_d.str_month!=(_b=_b.padLeft(2,"0"))){_d.str_month=_b;_d.int_month= +_b;}if(_d.str_day!=(_c=_c.padLeft(2,"0"))){this._preday=_d.str_day;_d.str_day=_c;_d.int_day= +_c;}this._refreshDay();};_pDatePickerBodyControl._setDayItemInfo=function(_a,_b,_c,_d,_e,_f){_a.set_text(_b);_a.set_wordWrap("none");_a.set_visible(_c);_a._year=_d;_a._month=_e;_a._trailingday=_f;};_pDatePickerBodyControl._setWeekformatText=function(){var _a=this.getElement();if(_a){var _b=this._getWeekformat();var _c=this._weekitems;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].set_text(_b[_e]);}}};_pDatePickerBodyControl._setDatasetStyle=function(_a){var _b,_c;var _d=this._dayitems;var _e=this._maxDay;var _f=this._getInnerDatasetColumns();var _g,_h,_i;var _j=_a.getRowCount();for(var _l=0;_l<_j;_l++ ){_c=_a.getColumn(_l,_f.datecolumn);for(var _m=0;_m<_e;_m++ ){_b=_d[_m];var _k=_b._year+_b._month+_b.text.padLeft(2,"0");if(_k==_c){_g=_a.getColumn(_l,_f.backgroundcolumn);_h=_a.getColumn(_l,_f.bordercolumn);_i=_a.getColumn(_l,_f.textcolorcolumn);if(_g){_b.set_background(_g);}if(_h){_b.set_border(_h);}if(_i){_b.set_color(_i);}this._changedDays[this._changedDays.length]=_b;}}}};_pDatePickerBodyControl._getLeapYear=function(_a){if((_a%4)==0&&(_a%100)!=0||(_a%400)==0){return true;}return false;};_pDatePickerBodyControl._getCurrentDate=function(){var _a=this._p_parent;if(_a){return _a._getCurrentDate();}return;};_pDatePickerBodyControl._getWeekformat=function(){var _a=this._p_parent;if(_a){var _b=_a._getWeekformat();if(_b){if(_b===" "){return [" "," "," "," "," "," "," "];}else{return _b.split(/\s+/);}}else{var _c=this._getLocale();var _d=nexacro.Locale.getLocaleInfo(_c);return _d.weekday_names_short;}}return null;};_pDatePickerBodyControl._getMonthformat=function(){var _a=this._getLocale();var _b=nexacro.Locale.getLocaleInfo(_a);return _b.month_names_long;};_pDatePickerBodyControl._getYearformat=function(){var _a=new Date();var _b=_a.getFullYear();var _c=[];for(var _d=0;_d<10;_d++ ){_c.push(_b+_d);_c.unshift(_b -1-_d);}return _c;};_pDatePickerBodyControl._getDaysize=function(){var _a=0;var _b=0;var _c=this._p_parent;if(_c){var _d=_c._getDaysize();if(!_d){_d=(this._getClientWidth()/7)+" "+(this._getClientHeight()/7);}_d=_d.split(/\s+/);_a= +_d[0];_b=_d[1]? +_d[1]:_a;}return {width:_a,height:_b};};_pDatePickerBodyControl._getMonthsize=function(){var _a=0;var _b=0;var _c=this._p_parent;if(_c){var _d=(this._getClientWidth()/4)+" "+(this._getClientHeight()/4);_d=_d.split(/\s+/);_a= +_d[0];_b=_d[1]? +_d[1]:_a;}return {width:_a,height:_b};};_pDatePickerBodyControl._getYearsize=function(){var _a=0;var _b=0;var _c=this._p_parent;if(_c){var _d=(this._getClientWidth()/4)+" "+(this._getClientHeight()/4);_d=_d.split(/\s+/);_a= +_d[0];_b=_d[1]? +_d[1]:_a;}return {width:_a,height:_b};};_pDatePickerBodyControl._getDayInfo=function(_a,_b,_c,_d,_e){_d=nexacro._toString(_d);_d=_d?_d.padLeft(4,"0"):"";_e=nexacro._toString(_e);_e=_e?_e.padLeft(2,"0"):"";var _f=nexacro._toString(_a);_f=_f?_f.padLeft(2,"0"):"";return {text:_a,trailingday:_b,visible:_c,year:_d,month:_e,day:_f};};_pDatePickerBodyControl._getDayItem=function(_a){if(_a==-1){return null;}var _b=this._dayitems;var _c=this._maxDay;for(var _d=0;_d<_c;_d++ ){if(!_b[_d]._trailingday&&_a==_b[_d].text.padLeft(2,"0")){return _b[_d];}}return null;};_pDatePickerBodyControl._getMonthItem=function(_a){if(_a==-1){return null;}var _b=this._monthitems;var _c=this._maxMonth;for(var _d=0;_d<_c;_d++ ){if(!_b[_d]._trailingday&&_a==_b[_d].text.padLeft(2,"0")){return _b[_d];}}return null;};_pDatePickerBodyControl._getYearItem=function(_a){if(_a==-1){return null;}var _b=this._yearitems;var _c=this._maxYear;for(var _d=0;_d<_c;_d++ ){if(!_b[_d]._trailingday&&_a==_b[_d].text.padLeft(2,"0")){return _b[_d];}}return null;};_pDatePickerBodyControl._getUsetrailingday=function(){var _a=this._p_parent;if(_a){return _a._getUsetrailingday();}return null;};_pDatePickerBodyControl._getUseTrailingDayInfo=function(_a,_b,_c,_d){var _e=_a;var _f=_a;var _g=_b;var _h=_b;if(_b==1){_e-=1;_g=12;_h+=1;}else{_g-=1;if(_b==12){_f+=1;_h=1;}else{_h+=1;}}var _i=_c.getDay()-1;_c.setDate(_d);var _j=_c.getDay();var _k=nexacro.Calendar.EndDayNormal;var _l=nexacro.Calendar.EndDayLeap;var _m=this._getLeapYear(_e);var _n=_m?_l[_g -1]:_k[_g -1];var _o=1;return {prev_year:_e,next_year:_f,prev_month:_g,next_month:_h,endWeek:_j,idx:_i,pre_endDay:_n,next_beginDay:_o};};_pDatePickerBodyControl._getInnerDataset=function(){var _a=this._p_parent;if(_a){return _a._getInnerDataset();}return null;};_pDatePickerBodyControl._getInnerDatasetColumns=function(){var _a=this._p_parent;if(_a){var _b=_a._getBackgroundcolumn();var _c=_a._getBordercolumn();var _d=_a._getDatecolumn();var _e=_a._getTextcolorcolumn();return {backgroundcolumn:_b,bordercolumn:_c,datecolumn:_d,textcolorcolumn:_e};}return null;};_pDatePickerBodyControl._isToday=function(_a){var _b=this._date.int_year;var _c=this._date.int_month;var _d=parseInt(_a,10);var _e=this._getCurrentDate();if(_b==_e.year&&_c==_e.month&&_d==_e.day){return true;}return false;};_pDatePickerBodyControl._isSelectedDay=function(_a){_a=parseInt(_a,10);var _b=this._date.int_year;var _c=this._date.int_month;if(_b==this._p_parent._selected_year&&_c==this._p_parent._selected_month&&_a==this._p_parent._selected_day){return true;}return false;};_pDatePickerBodyControl._setCalendarAccessibility=function(){if(nexacro._enableaccessibility){var _a=this._p_parent._p_parent;var _b=this._date;var _c=_b.str_year+_b.str_month+_b.str_day;var _d=_a._masktypeobj.applyMask(_c);this._p_parent._setAccessibilityLabel(_d);this._setAccessibilityLabel(_d);nexacro._notifyAccessibilityValue(this._control_element,_d,"daychange");}};_pDatePickerBodyControl.on_get_accessibility_label=function(){var _a=this._date;var _b=_a.str_year+_a.str_month+_a.str_day;return _b;};delete _pDatePickerBodyControl;nexacro._DatePickerDayItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._flag_dataset=-1;this._dataset_background="";this._refObj=_l._p_parent;};var _pDatePickerDayItemControl=nexacro._createPrototype(nexacro.Button,nexacro._DatePickerDayItemControl);nexacro._DatePickerDayItemControl.prototype=_pDatePickerDayItemControl;_pDatePickerDayItemControl._type_name="DatePickerDayItemControl";_pDatePickerDayItemControl._is_subcontrol=true;_pDatePickerDayItemControl._p_accessibilityrole="gridcell";_pDatePickerDayItemControl._trailingday=false;_pDatePickerDayItemControl._use_pushed_status=false;_pDatePickerDayItemControl._year="";_pDatePickerDayItemControl._month="";_pDatePickerDayItemControl._daysofweek=-1;_pDatePickerDayItemControl._use_readonly_status=true;_pDatePickerDayItemControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_readonly){this._p_readonly=_a;this.on_apply_readonly();}};_pDatePickerDayItemControl.on_apply_readonly=function(){var _a=this._p_readonly;this._changeStatus("readonly",_a);};_pDatePickerDayItemControl._setDaysOfWeek=function(_a){if(this._daysofweek!=_a){this._daysofweek=_a;this._on_apply_daysofweek(_a);}};_pDatePickerDayItemControl._changeDayUserStatus=function(_a,_b){var _c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];if(_c[_a]){this._changeUserStatus(_c[_a],_b);}};_pDatePickerDayItemControl._on_apply_daysofweek=function(_a){var _b=_a;if(_b&&_b.length>0){if(this.trailingday){this._changeUserStatus("trailingday",true);}else if(this._p_parent._isSelectedDay(_b)){this._changeUserStatus("selected",true);}else if(this._p_parent._isToday(_b)){this._changeUserStatus("today",true);}else if(this._daysofweek>=0&&this._daysofweek<=6){this._changeDayUserStatus(this._daysofweek,true);}}};_pDatePickerDayItemControl.on_changeStatus=function(_a,_b,_c,_d,_e){var _f=this._p_parent._p_parent._p_parent;if(_f&&_f._onlydisplay==true){if(_c!="disabled"){return "enabled";}}else{return _c;}};_pDatePickerDayItemControl.on_changeUserStatus=function(_a,_b,_c,_d,_e){if(_b){return _a;}else{return _c;}};_pDatePickerDayItemControl.on_getIDCSSSelector=function(){return "dayitem";};_pDatePickerDayItemControl.on_keydown_basic_action=function(){if(nexacro._enableaccessibility){nexacro.Button.prototype.on_apply_accessibility.call(this);}};delete _pDatePickerDayItemControl;nexacro._DatePickerWeekItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Static.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._refObj=_l._p_parent;};var _pDatePickerWeekItemControl=nexacro._createPrototype(nexacro.Static,nexacro._DatePickerWeekItemControl);nexacro._DatePickerWeekItemControl.prototype=_pDatePickerWeekItemControl;_pDatePickerWeekItemControl._type_name="DatePickerWeekItemControl";_pDatePickerWeekItemControl._is_subcontrol=true;_pDatePickerWeekItemControl._daysofweek=-1;_pDatePickerWeekItemControl._use_readonly_status=true;_pDatePickerWeekItemControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_readonly){this._p_readonly=_a;this.on_apply_readonly();}};_pDatePickerWeekItemControl.on_apply_readonly=function(){var _a=this._p_readonly;this._changeStatus("readonly",_a);};_pDatePickerWeekItemControl._setDaysOfWeek=function(_a){if(this._daysofweek!=_a){this._daysofweek=_a;this._on_apply_daysofweek(_a);}};_pDatePickerWeekItemControl._changeDayUserStatus=function(_a,_b){var _c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];if(_c[_a]){this._changeUserStatus(_c[_a],_b);}};_pDatePickerWeekItemControl._on_apply_daysofweek=function(_a){this._changeDayUserStatus(_a,true);};_pDatePickerWeekItemControl.on_changeUserStatus=function(_a,_b,_c,_d,_e){return _a;};_pDatePickerWeekItemControl.on_getIDCSSSelector=function(){return "weekitem";};delete _pDatePickerWeekItemControl;nexacro._DatePickerMonthItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._flag_dataset=-1;this._dataset_background="";this._refObj=_l._p_parent;};var _pDatePickerMonthItemControl=nexacro._createPrototype(nexacro.Button,nexacro._DatePickerMonthItemControl);nexacro._DatePickerMonthItemControl.prototype=_pDatePickerMonthItemControl;_pDatePickerMonthItemControl._type_name="ButtonControl";_pDatePickerMonthItemControl._is_subcontrol=true;_pDatePickerMonthItemControl._p_accessibilityrole="gridcell";_pDatePickerMonthItemControl._trailingday=false;_pDatePickerMonthItemControl._year="";_pDatePickerMonthItemControl._month="";_pDatePickerMonthItemControl._use_readonly_status=true;_pDatePickerMonthItemControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_readonly){this._p_readonly=_a;this.on_apply_readonly();}};_pDatePickerMonthItemControl.on_apply_readonly=function(){var _a=this._p_readonly;this._changeStatus("readonly",_a);};_pDatePickerMonthItemControl.on_changeStatus=function(_a,_b,_c,_d,_e){var _f=this._p_parent._p_parent._p_parent;if(_f&&_f._onlydisplay==true){if(_c!="disabled"){return "enabled";}}else{return _c;}};_pDatePickerMonthItemControl.on_changeUserStatus=function(_a,_b,_c,_d,_e){if(_b){return _a;}else{return _c;}};_pDatePickerMonthItemControl.on_getIDCSSSelector=function(){return "monthitem";};_pDatePickerMonthItemControl.on_keydown_basic_action=function(){if(nexacro._enableaccessibility){nexacro.Button.prototype.on_apply_accessibility.call(this);}};delete _pDatePickerMonthItemControl;nexacro._DatePickerYearItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._flag_dataset=-1;this._dataset_background="";this._refObj=_l._p_parent;};var _pDatePickerYearItemControl=nexacro._createPrototype(nexacro.Button,nexacro._DatePickerYearItemControl);nexacro._DatePickerYearItemControl.prototype=_pDatePickerYearItemControl;_pDatePickerYearItemControl._type_name="DatePickerYearItemControl";_pDatePickerYearItemControl._is_subcontrol=true;_pDatePickerYearItemControl._p_accessibilityrole="gridcell";_pDatePickerYearItemControl._year="";_pDatePickerYearItemControl._month="";_pDatePickerYearItemControl._use_readonly_status=true;_pDatePickerYearItemControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_readonly){this._p_readonly=_a;this.on_apply_readonly();}};_pDatePickerYearItemControl.on_apply_readonly=function(){var _a=this._p_readonly;this._changeStatus("readonly",_a);};_pDatePickerYearItemControl.on_changeStatus=function(_a,_b,_c,_d,_e){var _f=this._p_parent._p_parent._p_parent;if(_f&&_f._onlydisplay==true){if(_c!="disabled"){return "enabled";}}else{return _c;}};_pDatePickerYearItemControl.on_changeUserStatus=function(_a,_b,_c,_d,_e){if(_b){return _a;}else{return _c;}};_pDatePickerYearItemControl.on_getIDCSSSelector=function(){return "yearitem";};_pDatePickerYearItemControl.on_keydown_basic_action=function(){if(nexacro._enableaccessibility){nexacro.Button.prototype.on_apply_accessibility.call(this);}};delete _pDatePickerYearItemControl;nexacro._YearSpinControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Spin.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pYearSpinControl=nexacro._createPrototype(nexacro.Spin,nexacro._YearSpinControl);nexacro._YearSpinControl.prototype=_pYearSpinControl;_pYearSpinControl._type_name="Spin";_pYearSpinControl._default_mask="9999";_pYearSpinControl._is_subcontrol=true;_pYearSpinControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._p_spinedit=new nexacro._SpinEditControl("spinedit",0,0,0,0,null,null,null,null,null,null,this);var _c=this._p_spinupbutton=new nexacro._SpinButtonControl("spinupbutton",0,0,0,0,null,null,null,null,null,null,this);var _d=this._p_spindownbutton=new nexacro._SpinButtonControl("spindownbutton",0,0,0,0,null,null,null,null,null,null,this);_b.set_limitbymask("both");_b.createComponent(true);_c.createComponent(true);_d.createComponent(true);}};_pYearSpinControl=null;nexacro._MonthSpinControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Spin.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pMonthSpinControl=nexacro._createPrototype(nexacro.Spin,nexacro._MonthSpinControl);nexacro._MonthSpinControl.prototype=_pMonthSpinControl;_pMonthSpinControl._type_name="Spin";_pMonthSpinControl._is_subcontrol=true;_pMonthSpinControl._default_mask="99";_pMonthSpinControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._p_spinedit=new nexacro._SpinEditControl("spinedit",0,0,0,0,null,null,null,null,null,null,this);var _c=this._p_spinupbutton=new nexacro._SpinButtonControl("spinupbutton",0,0,0,0,null,null,null,null,null,null,this);var _d=this._p_spindownbutton=new nexacro._SpinButtonControl("spindownbutton",0,0,0,0,null,null,null,null,null,null,this);_b.set_limitbymask("both");_b.createComponent(true);_c.createComponent(true);_d.createComponent(true);}};_pMonthSpinControl=null;}if(!nexacro.Calendar){nexacro.CalendarCloseUpEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"oncloseup";this.fromobject=this.fromreferenceobject=_a;this.pretext=_c;this.posttext=_d;this.prevalue=_e;this.postvalue=_f;};var _pCalendarCloseUpEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.CalendarCloseUpEventInfo);nexacro.CalendarCloseUpEventInfo.prototype=_pCalendarCloseUpEventInfo;_pCalendarCloseUpEventInfo._type_name="CalendarCloseUpEventInfo";delete _pCalendarCloseUpEventInfo;_pCalendarCloseUpEventInfo=null;nexacro.CalendarDayClickEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"ondayclick";this.fromobject=this.fromreferenceobject=_a;this.date=_c;};var _pCalendarDayClickEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.CalendarDayClickEventInfo);nexacro.CalendarDayClickEventInfo.prototype=_pCalendarDayClickEventInfo;_pCalendarDayClickEventInfo._type_name="CalendarDayClickEventInfo";delete _pCalendarDayClickEventInfo;_pCalendarDayClickEventInfo=null;nexacro.CalendarSpinEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Event.call(this,_a,_b||"oncalendarspin");this.id=this.eventid=_b||"oncalendarspin";this.fromobject=_h||_a;this.fromreferenceobject=_i||_a;this.pretext=_c;this.posttext=_d;this.prevalue=_e;this.postvalue=_f;this.up=_g;};var _pCalendarSpinEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.CalendarSpinEventInfo);nexacro.CalendarSpinEventInfo.prototype=_pCalendarSpinEventInfo;_pCalendarSpinEventInfo._type_name="CalendarSpinEventInfo";delete _pCalendarSpinEventInfo;_pCalendarSpinEventInfo=null;nexacro.Calendar=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._masktypeobj=new nexacro._EditMaskTypeDate();this._onlydisplay=_m;};var _pCalendar=nexacro._createPrototype(nexacro.Component,nexacro.Calendar);nexacro.Calendar.prototype=_pCalendar;_pCalendar._type_name="Calendar";_pCalendar._p_calendaredit=null;_pCalendar._p_dropbutton=null;_pCalendar._p_datepicker=null;_pCalendar._p_calendarspinupbutton=null;_pCalendar._p_calendarspindownbutton=null;_pCalendar._popupcontrol=null;_pCalendar._p_value=undefined;_pCalendar._p_displaynulltext="";_pCalendar._p_displayinvalidtext="invalid value";_pCalendar._p_readonly=false;_pCalendar._p_autoselect=false;_pCalendar._p_autoskip=false;_pCalendar._p_type="normal";_pCalendar._p_datepickerchangetype="spin";_pCalendar._p_popuptype=undefined;_pCalendar._p_text="";_pCalendar._p_usecontextmenu=true;_pCalendar._initsoftkeyboard=undefined;_pCalendar._p_usesoftkeyboard=true;_pCalendar._p_locale="";_pCalendar._p_innerdataset=null;_pCalendar._p_backgroundcolumn="";_pCalendar._p_bordercolumn="";_pCalendar._p_datecolumn="";_pCalendar._p_textcolorcolumn="";_pCalendar._p_buttonsize=undefined;_pCalendar._p_headheight=undefined;_pCalendar._p_daysize=undefined;_pCalendar._p_popupsize=undefined;_pCalendar._p_dateformat="yyyy-MM-dd ddd";_pCalendar._p_editformat="yyyy-MM-dd";_pCalendar._p_headformat="yyyy.MM";_pCalendar._p_weekformat=undefined;_pCalendar._p_usetrailingday=false;_pCalendar._p_showmonthspin=false;_pCalendar._p_showyearspin=false;_pCalendar._masktypeobj=null;_pCalendar._innerdataset=null;_pCalendar._locale="";_pCalendar._type="normal";_pCalendar._systemformat="yyyy-MM-dd";_pCalendar._default_value=undefined;_pCalendar._default_text="";_pCalendar._default_type="";_pCalendar._want_arrows=false;_pCalendar._has_inputElement=true;_pCalendar._change_caret_from_method=false;_pCalendar._onlydisplay=false;_pCalendar._is_repeat=true;_pCalendar.__value_change=false;_pCalendar.__focus_from_spinbutton=false;_pCalendar._is_locale_control=true;_pCalendar._is_editable_control=true;_pCalendar._use_readonly_status=true;_pCalendar._event_list={"oneditclick":1,"ondayclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canchange":1,"onchanged":1,"oninput":1,"oncontextmenu":1,"ondropdown":1,"oncloseup":1,"onspin":1,"oninnerdatachanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pCalendar._p_accessibilityrole="calendar";_pCalendar._is_compound=true;nexacro.Calendar.EndDayNormal=new Array(31,28,31,30,31,30,31,31,30,31,30,31);nexacro.Calendar.EndDayLeap=new Array(31,29,31,30,31,30,31,31,30,31,30,31);_pCalendar.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._masktypeobj;if(_b){var _c="number";var _d=true;var _e=((nexacro._isMobile&&nexacro._isMobile())||(nexacro._isHybrid&&nexacro._isHybrid())||(!nexacro._isDesktop()&&nexacro._OS=="Android"&&nexacro._Browser=="Runtime"));if(_e){this._is_repeat=false;if((!this._p_popuptype||this._p_popuptype=="system")&&this._type=="normal"){_c="date";_d=false;this._type="system";}}_b.setInputMode(_c);_b.setUseEditBuffer(_d);}switch(this._type){case "normal":case "system":this._createCalendaredit();this._createDropbutton();break;case "spin":this._createCalendaredit();this._createSpinbutton();break;case "monthonly":this._createDatePicker();break;}}};_pCalendar.on_created_contents=function(_a){this.on_apply_innerdataset(this._innerdataset);this.on_apply_locale(this._getLocale());this.on_apply_editformat(this._p_editformat);this.on_apply_dateformat(this._p_dateformat);this.on_apply_weekformat(this._p_weekformat);if(this._p_expr){this._on_apply_expr(this._p_expr);}else{this.on_apply_value(this._p_value);}this._recalcLayout();switch(this._type){case "spin":this._setEventHandlerToCalendarEdit();this._setEventHandlerToSpinButton();this._p_calendaredit._on_apply_inputtype();this._p_calendaredit.on_created(_a);this._p_calendarspinupbutton.on_created(_a);this._p_calendarspindownbutton.on_created(_a);if(nexacro._accessibilitytype==5){this._p_calendaredit._setAccessibilityStatHidden(true);this._p_calendarspinupbutton._setAccessibilityStatHidden(true);this._p_calendarspindownbutton._setAccessibilityStatHidden(true);}break;case "monthonly":this._setEventHandlerToDatePicker();this._p_datepicker.on_created(_a);break;case "system":if(nexacro._enableaccessibility&&nexacro._accessibilitytype==4){var _b=this.getElement();if(_b){_b.setElementAccessibilityStatHidden(false);}}this._setEventHandlerToCalendarEdit();this._setEventHandlerToDropButton();this._p_calendaredit._on_apply_inputtype();this._p_calendaredit.on_created(_a);var _c=this._p_dropbutton;if(_c){_c.on_created(_a);}if(nexacro._accessibilitytype==5){this._p_calendaredit._setAccessibilityStatHidden(true);}if(this._p_accessibilitydesclevel!="none"&&this._p_accessibilitydesclevel!="child"){this._setAccessibilityActiveDescendant(this._p_calendaredit._input_element);}break;case "normal":default:this._setEventHandlerToCalendarEdit();this._setEventHandlerToDropButton();this._p_calendaredit._on_apply_inputtype();this._p_calendaredit.on_created(_a);if(nexacro._accessibilitytype==5){this._p_calendaredit._setAccessibilityStatHidden(true);}this._p_dropbutton.on_created(_a);break;}if(this._p_calendaredit){this._p_calendaredit.on_apply_usesoftkeyboard();}this._default_value=this._p_value;this._default_text=this._p_text;this.on_apply_displaynulltext(this._p_displaynulltext);this.on_apply_displayinvalidtext(this._p_displayinvalidtext);this.on_apply_readonly();};_pCalendar.on_destroy_contents=function(){this._destroyControl();this._removeEventHandlerToInnerDataset();};_pCalendar._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);this._innerdataset=null;}};_pCalendar.on_create_contents_command=function(){this.on_apply_innerdataset(this._innerdataset);this.on_apply_locale(this._getLocale());this.on_apply_editformat(this._p_editformat);this.on_apply_dateformat(this._p_dateformat);this.on_apply_weekformat(this._p_weekformat);this.on_apply_usesoftkeyboard();if(this._p_expr){this._on_apply_expr(this._p_expr);}else{this.on_apply_value(this._p_value);}this._recalcLayout();switch(this._type){case "system":case "normal":this._setEventHandlerToCalendarEdit();this._setEventHandlerToDropButton();break;case "spin":this._setEventHandlerToCalendarEdit();this._setEventHandlerToSpinButton();break;case "monthonly":this._setEventHandlerToDatePicker();break;}var _a="";if(this._p_calendaredit){this._p_calendaredit._on_apply_inputtype();this._p_calendaredit.on_apply_usesoftkeyboard();_a+=this._p_calendaredit.createCommand();}if(this._p_dropbutton){_a+=this._p_dropbutton.createCommand();}if(this._p_calendarspindownbutton){_a+=this._p_calendarspindownbutton.createCommand();}if(this._p_calendarspinupbutton){_a+=this._p_calendarspinupbutton.createCommand();}if(this._p_datepicker){_a+=this._p_datepicker.createCommand();}return _a;};_pCalendar.on_attach_contents_handle=function(_a){if(this._p_calendaredit){this._p_calendaredit.attachHandle(_a);}if(this._p_dropbutton){this._p_dropbutton.attachHandle(_a);}if(this._p_calendarspindownbutton){this._p_calendarspindownbutton.attachHandle(_a);}if(this._p_calendarspinupbutton){this._p_calendarspinupbutton.attachHandle(_a);}if(this._p_datepicker){this._p_datepicker.attachHandle(_a);}if(nexacro._enableaccessibility){this._on_attach_accessibility_contents_handle(_a);}this._default_value=this._p_value;this._default_text=this._p_text;this.on_apply_displaynulltext(this._p_displaynulltext);this.on_apply_displayinvalidtext(this._p_displayinvalidtext);this.on_apply_readonly();};_pCalendar.on_change_containerRect=function(){this._recalcLayout();};_pCalendar.on_change_containerPos=function(){};_pCalendar._getInputElement=function(){return this._p_calendaredit?this._p_calendaredit._getInputElement():null;};_pCalendar._apply_setfocus=function(_a){var _b=this._p_calendaredit;if(_b){_b._on_focus(true,nexacro._getBrowserEventName(_a));}};_pCalendar.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();if(this._p_calendaredit){this._p_calendaredit._setEnable(_a);}if(this._p_dropbutton&&!this._isReadOnly()){this._p_dropbutton._setEnable(_a);}if(this._p_calendarspinupbutton&&!this._isReadOnly()){this._p_calendarspinupbutton._setEnable(_a);}if(this._p_calendarspindownbutton&&!this._isReadOnly()){this._p_calendarspindownbutton._setEnable(_a);}if(this._p_datepicker){this._p_datepicker._setEnable(_a);}};_pCalendar.on_apply_prop_cssclass=function(){if(this._p_calendaredit){this._p_calendaredit.on_apply_cssclass();}if(this._p_dropbutton){this._p_dropbutton.on_apply_cssclass();}if(this._p_calendarspinupbutton){this._p_calendarspinupbutton.on_apply_cssclass();}if(this._p_calendarspindownbutton){this._p_calendarspindownbutton.on_apply_cssclass();}if(this._p_datepicker){this._p_datepicker.on_apply_cssclass();}};_pCalendar.on_init_bindSource=function(_a,_b,_c){if(_b=="value"){this._setValue(undefined);}};_pCalendar.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=_b.getColumn(_c,_d);var _f=this._masktypeobj;var _g=this._convertToDateObject(_e);if(_g){if(!this._isInvalidValue(_g)){_e=this._convertValueType(_e,_g,true);if(_e!=this._p_value){var _h=_f.changeNormalizeValue(_g.toString());if(_f){_f.setDate(_h);}this._p_value=_e;this.on_apply_value(_h);}}else{this._p_value=_e;this.on_apply_value(_e);}}else{if(_e!=this._p_value){this._setValue(_e);}}this._on_apply_text();}};_pCalendar.on_getBindableProperties=function(){return "value";};_pCalendar._getDragData=function(){var _a=this._p_calendaredit;if(_a){return _a.getSelectedText();}};_pCalendar._getDlgCode=function(_a,_b,_c){var _d=this._want_arrows;this._is_first_focus=false;if(_c==true){_d=true;}return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:_d};};_pCalendar._on_getAccessibilityAdditionalLabel=function(){var _a="";if(this._p_type!="monthonly"){_a=this._accessibilityvalue?this._accessibilityvalue:this._p_text?this._p_text:this._getCurrentDateStr();}else{_a=this._getCurrentDateStr();}return _a?_a:this._p_displaynulltext;};_pCalendar._getAccessibilityReadLabel=function(){if(this._accessibilityvalue){return this._accessibilityvalue;}if(this._p_text){return this._p_text;}return this._getCurrentDateStr();};_pCalendar.set_text=nexacro._emptyFn;_pCalendar.on_apply_text=function(_a){var _b=this._p_expr;if(_b){if(_b.substring(0,4)=="Date"){_a=new nexacro.Date(_a).toString();}if(this._p_value!=_a){var _c=this._convertToDateObject(_a);var _d=false;if(_c){_d=this._isInvalidValue(_c);if(!_d){_a=this._convertValueType(_a,_c);}}this.set_value(_a);}else{this.on_apply_value(_a);}}};_pCalendar.set_value=function(_a){var _b=this._convertToDateObject(_a);var _c=false;if(_b){_c=this._isInvalidValue(_b);if(!_c){_a=this._convertValueType(_a,_b);}}if(this._p_value!==_a){if(this.applyto_bindSource("value",_a)){this._p_value=_a;this.on_apply_value(_a,_c);}}};_pCalendar.on_apply_value=function(_a,_b){_a=nexacro._isNull(_a)?_a:nexacro._toString(_a).trim();var _c=this._masktypeobj;if(_c){if(nexacro._isNull(_b)){_b=this._isInvalidValue(_a);}if(_b){this._p_text=_c.applyMask("");}else{this._p_text=_c.applyMask(_a);}this._setCalendarEditValue(_a);this._setDatePickerValue(_c.getDatePickerValue());}};_pCalendar._on_apply_text=function(_a){var _b=this._expr_fn;if(_b){try{_a=nexacro._toString(_b.call(null,this));}catch(e){nexacro._settracemsg(e);}}if(this._p_expr.substring(0,4)=="Date"){_a=new nexacro.Date(_a).toString();}var _c=this._convertToDateObject(_a);var _d=false;if(_c){_d=this._isInvalidValue(_c);if(!_d){_a=this._convertValueType(_a,_c);}}this._displaytext=_a;if(nexacro._enableaccessibility){this.on_apply_prop_accessibilitylabel();}this.on_apply_text(_a);};_pCalendar.set_displaynulltext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this._p_displaynulltext!=_a){this._p_displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pCalendar.on_apply_displaynulltext=function(_a){var _b=this._p_calendaredit;if(_b){_b.set_displaynulltext(_a);}};_pCalendar.set_displayinvalidtext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this._p_displayinvalidtext!=_a){this._p_displayinvalidtext=_a;this.on_apply_displayinvalidtext(_a);}};_pCalendar.on_apply_displayinvalidtext=function(_a){var _b=this._p_calendaredit;if(_b){_b.set_displayinvalidtext(_a);}};_pCalendar.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly();}};_pCalendar._isReadOnly=function(){return this._p_readonly;};_pCalendar.on_apply_readonly=function(){var _a=this._isReadOnly();this._changeStatus("readonly",_a);var _b=this._p_calendaredit;if(_b){if(!this._onlydisplay){_b.set_readonly(_a);}else{_b._changeStatus("readonly",_a);}}var _c=this._p_dropbutton;if(_c){_c._setEnable(this._isEnable()&&!_a);}var _d=this._p_calendarspinupbutton;if(_d){_d._setEnable(this._isEnable()&&!_a);}var _e=this._p_calendarspindownbutton;if(_e){_e._setEnable(this._isEnable()&&!_a);}var _f=this._p_datepicker;if(_f){_f.set_readonly(_a);}};_pCalendar.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoselect!=_a){this._p_autoselect=_a;this.on_apply_autoselect(_a);}};_pCalendar.on_apply_autoselect=function(_a){var _b=this._p_calendaredit;if(_b){_b.set_autoselect(_a);}};_pCalendar.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoskip!=_a){this._p_autoskip=_a;this.on_apply_autoskip(_a);}};_pCalendar.on_apply_autoskip=function(_a){var _b=this._p_calendaredit;if(_b){_b.set_autoskip(_a);}};_pCalendar.set_type=function(_a){var _b=["normal","spin","monthonly"];if(_b.indexOf(_a)==-1){return;}if(this._p_type!=_a){this._default_type=this._p_type;this._p_type=_a;this.on_apply_type(_a);}};_pCalendar.on_apply_type=function(_a){var _b=true;var _c=this._getClientWidth();var _d=Math.round(_c/5);if(this._default_type!="monthonly"||_a=="monthonly"){_b=false;}if(_a!="spin"&&_a!="monthonly"&&this._masktypeobj.getInputMode()=="date"){_a="system";}this._type=_a;var _e=this.getElement();if(_e){this._destroyControl();switch(this._type){case "system":case "normal":this._createNormaltypeControl();this._p_calendaredit._on_apply_inputtype();if(_b){this.resize(_c,_d);}else{this._recalcLayout();}break;case "spin":this._createSpintypeControl();this._p_calendaredit._on_apply_inputtype();if(_b){this.resize(_c,_d);}else{this._recalcLayout();}break;case "monthonly":this._createMonthlytypeControl();var _f=this._getPopupSizeArr();if(this._adjust_width==_f.width&&this._adjust_height==_f.height){this._recalcLayout();}else{this.resize(_f.width,_f.height);}break;}}};_pCalendar.set_popuptype=function(_a){var _b=["center","none","normal","system"];if(_a&&_b.indexOf(_a)==-1){return;}if(this._p_popuptype!=_a){this._p_popuptype=_a;this.on_apply_popuptype(_a);}};_pCalendar.on_apply_popuptype=function(_a){var _b=this._type;var _c=this._masktypeobj;if(_c){var _d="number";var _e=true;if((!this._p_popuptype||this._p_popuptype=="system")&&(_b=="normal"||_b=="system")){var _f=((nexacro._isMobile&&nexacro._isMobile())||(nexacro._isHybrid&&nexacro._isHybrid())||(!nexacro._isDesktop()&&nexacro._OS=="Android"&&nexacro._Browser=="Runtime"));if(_f&&this._is_created){_d="date";_e=false;}}_c.setInputMode(_d);_c.setUseEditBuffer(_e);this.on_apply_type(this._p_type);}};_pCalendar.set_locale=function(_a){if(this._p_locale!=_a){this._p_locale=_a;this._locale=_a;this.on_apply_locale(_a);this.on_apply_weekformat(this._p_weekformat);this.on_apply_value(this._p_value);}};_pCalendar.on_apply_locale=function(_a){var _b=this._masktypeobj;if(_b){_b.setLocale(_a);if(nexacro._OS=="Android"&&nexacro._Browser=="Runtime"){this._systemformat=nexacro.Locale._makeDateMaskString(_a,"SHORTDATE");}}};_pCalendar.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usecontextmenu!=_a){this._p_usecontextmenu=_a;this.on_apply_usecontextmenu(_a);}};_pCalendar.on_apply_usecontextmenu=function(_a){var _b=this._p_calendaredit;if(_b){_b.set_usecontextmenu(_a);}};_pCalendar.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_usesoftkeyboard){this._p_usesoftkeyboard=_a;if(!this._initsoftkeyboard){this._initsoftkeyboard=true;}this.on_apply_usesoftkeyboard();}};_pCalendar.on_apply_usesoftkeyboard=function(){if(this._p_calendaredit){this._p_calendaredit.set_usesoftkeyboard(this._getUseSoftKeyboardValue(this._initsoftkeyboard));}};_pCalendar.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(this._p_innerdataset!=_a||(this._p_innerdataset&&!this._innerdataset)){this._setInnerDatasetStr(_a);this.on_apply_innerdataset(this._innerdataset);}};_pCalendar.on_apply_innerdataset=function(_a){if(_a){_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);}var _b=this._p_datepicker;if(_b){_b._refreshDay();}};_pCalendar.set_backgroundcolumn=function(_a){if(this._p_backgroundcolumn!=_a){this._p_backgroundcolumn=_a;this.on_apply_backgroundcolumn(_a);}};_pCalendar.on_apply_backgroundcolumn=function(){var _a=this._p_datepicker;if(_a){_a._refreshDay();}};_pCalendar.set_bordercolumn=function(_a){if(this._p_bordercolumn!=_a){this._p_bordercolumn=_a;this.on_apply_bordercolumn(_a);}};_pCalendar.on_apply_bordercolumn=function(){var _a=this._p_datepicker;if(_a){_a._refreshDay();}};_pCalendar.set_datecolumn=function(_a){if(this._p_datecolumn!=_a){this._p_datecolumn=_a;this.on_apply_datecolumn(_a);}};_pCalendar.on_apply_datecolumn=function(){var _a=this._p_datepicker;if(_a){_a._refreshDay();}};_pCalendar.set_textcolorcolumn=function(_a){if(this._p_textcolorcolumn!=_a){this._p_textcolorcolumn=_a;this.on_apply_textcolorcolumn(_a);}};_pCalendar.on_apply_textcolorcolumn=function(){var _a=this._p_datepicker;if(_a){_a._refreshDay();}};_pCalendar.set_buttonsize=function(_a){if(this._p_buttonsize!=_a){this._p_buttonsize=_a;this.on_apply_buttonsize(_a);}};_pCalendar.on_apply_buttonsize=function(){this._recalcLayout();};_pCalendar.set_headheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_headheight!=_a){this._p_headheight=_a;this.on_apply_headheight(_a);}};_pCalendar.on_apply_headheight=function(){var _a=this._p_datepicker;if(_a){_a._recalcLayout();}};_pCalendar.set_daysize=function(_a){if(this._p_daysize!=_a){this._p_daysize=_a;this.on_apply_daysize(_a);}};_pCalendar.on_apply_daysize=function(){var _a=this._p_datepicker;if(_a){_a._refreshDay();_a.body._recalcLayout();}};_pCalendar.set_popupsize=function(_a){if(this._p_popupsize!=_a){this._p_popupsize=_a;}};_pCalendar.on_apply_popupsize=nexacro._emptyFn;_pCalendar.set_dateformat=function(_a){if(this._p_dateformat!=_a){this._p_dateformat=_a;this.on_apply_dateformat(_a);this.on_apply_value(this._p_value);}};_pCalendar.on_apply_dateformat=function(_a){var _b=this._masktypeobj;if(_b){if(this._type=="system"){_a=this._systemformat;}_b.setDateMask(_a);}};_pCalendar.set_editformat=function(_a){if(this._p_editformat!=_a){this._p_editformat=_a;this.on_apply_editformat(_a);this._setValue(this._p_value);}};_pCalendar.on_apply_editformat=function(_a){var _b=this._masktypeobj;if(_b){if(this._type=="system"){_a=this._systemformat;}_b.setEditMask(_a);}};_pCalendar.set_headformat=function(_a){if(this._p_headformat!=_a){this._p_headformat=_a;this.on_apply_headformat(_a);}};_pCalendar.on_apply_headformat=function(){var _a=this._p_datepicker;if(_a){_a._setHeadformatText();}};_pCalendar.set_weekformat=function(_a){if(this._p_weekformat!=_a){this._p_weekformat=_a;this.on_apply_weekformat(_a);}};_pCalendar.on_apply_weekformat=function(){var _a=this._p_datepicker;if(_a){_a._setWeekformatText();}};_pCalendar.set_usetrailingday=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usetrailingday!=_a){this._p_usetrailingday=_a;this.on_apply_usetrailingday(_a);}};_pCalendar.on_apply_usetrailingday=function(){var _a=this._p_datepicker;if(_a){_a._refreshDay();}};_pCalendar.set_showmonthspin=function(_a){_a=nexacro._toBoolean(_a);if(this._p_showmonthspin!=_a){this._p_showmonthspin=_a;this.on_apply_showmonthspin(_a);}};_pCalendar.on_apply_showmonthspin=function(){var _a=this._p_datepicker;if(_a){_a._refreshSpindate();}};_pCalendar.set_showyearspin=function(_a){_a=nexacro._toBoolean(_a);if(this._p_showyearspin!=_a){this._p_showyearspin=_a;this.on_apply_showyearspin(_a);}};_pCalendar.on_apply_showyearspin=function(){var _a=this._p_datepicker;if(_a){_a._refreshSpindate();}};_pCalendar.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);if(this._p_calendaredit){this._p_calendaredit.on_apply_accessibility();}};_pCalendar.set_visible=function(_a){nexacro.Component.prototype.set_visible.call(this,_a);if(!this._p_visible&&this._isPopupVisible()){this._closePopup();}};_pCalendar.set_datepickerchangetype=function(_a){var _b=["auto","spin","button"];if(_b.indexOf(_a)==-1){return;}if(this._p_datepickerchangetype!=_a){this._p_datepickerchangetype=_a;this.on_apply_datepickerchangetype(_a);}};_pCalendar.on_apply_datepickerchangetype=function(_a){};_pCalendar.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this.on_apply_displaynulltext(this._getStringResourceProperty(this._p_displaynulltext));this.on_apply_displayinvalidtext(this._getStringResourceProperty(this._p_displayinvalidtext));};_pCalendar._properties=[{name:"text"},{name:"value"},{name:"displaynulltext"},{name:"displayinvalidtext"},{name:"readonly"},{name:"autoselect"},{name:"autoskip"},{name:"type"},{name:"datepickerchangetype"},{name:"popuptype"},{name:"locale"},{name:"usecontextmenu"},{name:"usesoftkeyboard"},{name:"innerdataset"},{name:"backgroundcolumn"},{name:"bordercolumn"},{name:"datecolumn"},{name:"textcolorcolumn"},{name:"buttonsize"},{name:"headheight"},{name:"daysize"},{name:"popupsize"},{name:"dateformat"},{name:"editformat"},{name:"headformat"},{name:"weekformat"},{name:"monthformat"},{name:"yearformat"},{name:"usetrailingday"},{name:"showmonthspin"},{name:"showyearspin"},{name:"visible"},{name:"calendaredit",readonly:true},{name:"calendarspindownbutton",readonly:true},{name:"calendarspinupbutton",readonly:true},{name:"datepicker",readonly:true},{name:"dropbutton",readonly:true}];nexacro._defineProperties(_pCalendar,_pCalendar._properties);_pCalendar.dropdown=function(){if(!this._p_enable||this._p_readonly||!this._p_visible||this._type=="system"){return false;}if(this._isPopupVisible()){return false;}this._setFocus(false);this._showPopup();this._setZeroCaret();};_pCalendar.isDropdown=function(){return this._isPopupVisible();};_pCalendar.getCaretPos=function(){if(this._p_readonly){return -1;}var _a=this._p_calendaredit;if(_a){return _a.getCaretPos();}return -1;};_pCalendar.setCaretPos=function(_a){var _b=this._p_calendaredit;if(_b){this._change_caret_from_method=true;return _b.setCaretPos(_a);}};_pCalendar.getSelect=function(){var _a=this._p_calendaredit;if(_a){return _a.getSelect();}return [0,0];};_pCalendar.setSelect=function(_a,_b){var _c=this._p_calendaredit;if(_c){this._change_caret_from_method=true;return _c.setSelect(_a,_b);}return false;};_pCalendar.getSelectedText=function(){var _a=this._p_calendaredit;if(_a){return _a.getSelectedText();}return "";};_pCalendar.getInnerDataset=function(){return this._innerdataset;};_pCalendar.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";this.on_apply_innerdataset(this._innerdataset);}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this._p_innerdataset=_a.id;this.on_apply_innerdataset(this._innerdataset);}};_pCalendar.getYear=function(){var _a=1970;if(this._p_value){var _b=this._masktypeobj;if(_b){return _b._dateObj.getFullYear();}}return _a;};_pCalendar.getMonth=function(){var _a=1;if(this._p_value){var _b=this._masktypeobj;if(_b){return _b._dateObj.getMonth()+1;}}return _a;};_pCalendar.getDay=function(){var _a=1;if(this._p_value){var _b=this._masktypeobj;if(_b){return _b._dateObj.getDate();}}return _a;};_pCalendar.getDayOfWeek=function(){var _a=4;if(this._p_value){var _b=this._masktypeobj;if(_b){return _b._dateObj.getDay();}}return _a;};_pCalendar.updateToDataset=function(){return this.applyto_bindSource("value",this._p_value);};_pCalendar._on_value_change=function(_a,_b){if(this._beginValueChange()){return false;}var _c=true;var _d=false;var _e=this._getEventInfoText(_a);var _f=this._getEventInfoText(_b);if(!this.on_fire_canchange(this,_e,_a,_f,_b)){_c=false;}else if(!this.applyto_bindSource("value",_b)){_d=true;_c=false;}if(!_c){this._p_value=_a;var _g=this._masktypeobj;var _h=_g.changeNormalizeValue(_a);this.on_apply_value(_h);if(_d){if(this._isPopupVisible()){this._closePopup();}}}else{if(this._p_value!=_a){if(this._p_value!=_b){if(this._isPopupVisible()){this._closePopup();}_c=false;}}}if(_c){this._setValue(_b);this._default_value=_a;this._default_text=_e;if(this._is_killfocusing==false){this._setZeroCaret();}this.on_fire_onchanged(this,_e,_a,_f,_b);if(this._isPopupVisible()){this._closePopup();}}this._finalValueChange();return _c;};_pCalendar._on_dataset_onvaluechanged=function(_a,_b){var _c=this._p_datepicker;if(_c){_c._refreshDay();}if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pCalendar._on_dataset_onrowsetchanged=function(){var _a=this._p_datepicker;if(_a){_a._refreshDay();}};_pCalendar._on_edit_oneditclick=function(_a,_b){this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey);var _c=(this._type=="system"&&!this._p_readonly);var _d=this.getElement()?true:false;if(!_c||!_d){return;}this._p_calendaredit._prevent_clickevent=false;var _e=this.on_fire_ondropdown(this);if(_e){var _f=false;var _g=-1;if(_a instanceof nexacro.MaskEdit){if(nexacro._OS=="iOS"&&nexacro._Browser=="MobileSafari"){var _h=parseFloat(nexacro._OSVersion);if(_h<15){this.dropbutton._control_element.setElementFocus();if(nexacro._SystemType=="ipad"){if(_h>=13){if(!nexacro._enableaccessibility){_f=true;}_g=350;}}else if(nexacro._SystemType=="iphone"){if(_h>=14){if(!nexacro._enableaccessibility){_f=true;}_g=5;}}}}}if(_f){var _i=this;setTimeout(function(){nexacro._openSystemCalendar(_i,_i._p_value,"_on_notify_mobile_valuechanged");},_g);}else{nexacro._openSystemCalendar(this,this._p_value,"_on_notify_mobile_valuechanged");}}this._p_calendaredit._prevent_clickevent=true;};_pCalendar._on_edit_onlbuttondown=function(){if(this._p_readonly){return false;}if(this._isPopupVisible()){this._closePopup();}};_pCalendar._on_edit_onlbuttonup=function(){};_pCalendar._on_edit_onkeydown=function(_a,_b){var _c=_b.keycode;var _d=this._p_calendaredit;var _e=this._p_datepicker;switch(this._p_type){case "normal":if(_c==nexacro.Event.KEY_ESC){if(this._isPopupVisible()){this._closePopup();}this._setZeroCaret();}else if(_c==nexacro.Event.KEY_ENTER){if(this._isPopupVisible()){if(this._p_datepickerchangetype!="button"||_e.head.monthstatic._p_visible){_e._changeDate(_a,_b);_e.on_fire_ondayclick(_e._value);}else{_e._on_body_onkeydown(_a,_b);}}else{if(this._p_value!=_d._p_value){this._on_value_change(this._p_value,_d._p_value);}else if(this._p_text!=_d._p_text){this._setValue(this._p_value);}}}else if(_b.altkey&&_c==nexacro.Event.KEY_DOWN){if(!this._isPopupVisible()){this._showPopup();this._setZeroCaret();if(_d&&this.datepicker){var _f=_d._p_value?_d._p_value:this._p_datepicker._value;this._setDatePickerValue(_f);}}}else{if(this._isPopupVisible()){if(_c>=nexacro.Event.KEY_LEFT&&_c<=nexacro.Event.KEY_DOWN){_e._on_body_onkeydown(_a,_b);}}}break;case "spin":if(_c==nexacro.Event.KEY_ENTER){if(this._p_value!=_d._p_value){this._on_value_change(this._p_value,_d._p_value);}else if(this._p_text!=_d._p_text){this._setValue(this._p_value);}this._setZeroCaret();}else if(_c==nexacro.Event.KEY_UP){if(!nexacro._enableaccessibility||_b.ctrlkey){this._on_spin_onspinup(_a,_b);}}else if(_c==nexacro.Event.KEY_DOWN){if(!nexacro._enableaccessibility||_b.ctrlkey){this._on_spin_onspindown(_a,_b);}}break;case "monthonly":if(_c>=nexacro.Event.KEY_LEFT&&_c<=nexacro.Event.KEY_DOWN){_e.on_keydown_default_action(_c,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.fromreferenceobject,_b.metakey);_e._refreshSpindate();_e.on_fire_ondayclick(_e);}break;default:break;}if(_c>=nexacro.Event.KEY_LEFT&&_c<=nexacro.Event.KEY_DOWN){if(this._isPopupVisible()){_d._input_element.stopSysEvent();}else{if(_c==nexacro.Event.KEY_UP||_c==nexacro.Event.KEY_DOWN){if(nexacro._Browser!="Runtime"){_d._input_element.stopSysEvent();}}}}return false;};_pCalendar._on_edit_oninput=function(){var _a;var _b=this._masktypeobj;if(_b._use_edit_buf){_a=_b.changeNormalizeValueFromBuffer();}else{_a=_b.changeNormalizeValue(this._p_calendaredit._p_value);}if(this._isPopupVisible()){this._setDatePickerValue(_a);}this.on_fire_oninput();if(this._type=="system"){if(this._p_value!=_a){this._on_value_change(this._p_value,_a);}}};_pCalendar._on_notify_mobile_valuechanged=function(_a){if(this._type=="system"){this._setCalendarEditValue(_a);this.on_fire_oninput();var _b;var _c=this._masktypeobj;if(_c){if(_c._use_edit_buf){_b=_c.changeNormalizeValueFromBuffer();}else{_b=_c.changeNormalizeValue(this._p_calendaredit._p_value);}if(this._p_value!=_b){this._on_value_change(this._p_value,_b);}}}};_pCalendar._on_drop_onlbuttondown=function(_a,_b){if(_b.button!="lbutton"){return;}if(this._p_readonly||!this._p_enable){return false;}if(this._isPopupVisible()){this._closePopup();if(!this._p_autoselect){this._setZeroCaret();}}else{var _c=this._p_datepicker;var _d=this._p_calendaredit;if(_c&&_d){var _e=_d._p_value;if(_e){var _f=_d._isInvalidValue(_e);if(_f){_e=_c._value;}}else{_e=_c._value;}this._setDatePickerValue(_e);}this._showPopup();if(!this._p_autoselect){this._setZeroCaret();}}return false;};_pCalendar._on_drop_mobile_onclick=function(){if(this._p_readonly||!this._p_enable){return false;}if(this._isPopupVisible()){this._closePopup();}else{var _a=this._p_datepicker;var _b=this._p_calendaredit;if(_a&&_b){var _c=_b._p_value?_b._p_value:_a._value;this._setDatePickerValue(_c);}this._showPopup();}return false;};_pCalendar._on_drop_onclick=function(_a,_b){if(_b.button!="touch"){return;}if(this._p_readonly||!this._p_enable){return false;}if(this._isPopupVisible()){this._closePopup();if(!this._p_autoselect){this._setZeroCaret();}}else{var _c=this._p_datepicker;var _d=this._p_calendaredit;if(_c&&_d){var _e=_d._p_value;if(_e){var _f=_d._isInvalidValue(_e);if(_f){_e=_c._value;}}else{_e=_c._value;}this._setDatePickerValue(_e);}this._showPopup();if(!this._p_autoselect){this._setZeroCaret();}}return false;};_pCalendar._on_spin_onspinup=function(){if(this._p_readonly){return false;}var _a=this._p_calendaredit;if(_a){var _b="";var _c;var _d;var _e=_a._p_value;var _f="";var _g=this.getCaretPos();var _h=_g;var _i=this._p_calendaredit._p_text.length;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){if(this._rtl){if(_g==0){_g=_i;}else if(_g==_i){_g=0;}}}var _j=this._masktypeobj;if(_j){if(!_j.date){var _k;if(_a._p_value){var _l=_j.changeNormalizeValue(_a._p_value);_k=_l;}else{var _m=this._getCurrentDate();var _n=nexacro._toString(_m.year).padLeft(4,"0");var _o=nexacro._toString(_m.month).padLeft(2,"0");var _p=nexacro._toString(_m.day).padLeft(2,"0");_k=_n+_o+_p;}var _q=_j.getEditFormatType();switch(_q){case 0:_c=_k;break;case 1:_c="000000000";break;case 2:_c=_k+"000000000";}_b=_j.applyMask(_c);_b=_j.applyMaskSpin(_g,1);this._setSpinValue(_c,_b,_h);}else{_b=_j.applyMaskSpin(_g,1);_c=_j.changeNormalizeValueFromBuffer();_d=this._getEventInfoText(_e);_f=this._getEventInfoText(_c);if(!this.on_fire_onspin(this,_d,_e,_f,_c,"1")){_b=_e?_d:_j.applyMask(this._p_value);_c=_e?_e:_j.removeMask(_b);}_j.applyMask(_c);this._setSpinValue(_c,_b,_h);}}}};_pCalendar._on_spin_onspindown=function(){if(this._p_readonly){return false;}var _a=this._p_calendaredit;if(_a){var _b="";var _c;var _d;var _e=_a._p_value;var _f="";var _g=this.getCaretPos();var _h=_g;var _i=this._p_calendaredit._p_text.length;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){if(this._rtl){if(_g==0){_g=_i;}else if(_g==_i){_g=0;}}}var _j=this._masktypeobj;if(_j){if(!_j.date){var _k;if(_a._p_value){var _l=_j.changeNormalizeValue(_a._p_value);_k=_l;}else{var _m=this._getCurrentDate();var _n=nexacro._toString(_m.year).padLeft(4,"0");var _o=nexacro._toString(_m.month).padLeft(2,"0");var _p=nexacro._toString(_m.day).padLeft(2,"0");_k=_n+_o+_p;}var _q=_j.getEditFormatType();switch(_q){case 0:_c=_k;break;case 1:_c="000000000";break;case 2:_c=_k+"000000000";}_b=_j.applyMask(_c);_b=_j.applyMaskSpin(_g,-1);this._setSpinValue(_c,_b,_h);}else{_b=_j.applyMaskSpin(_g,-1);_c=_j.changeNormalizeValueFromBuffer();_d=this._getEventInfoText(_e);_f=this._getEventInfoText(_c);if(!this.on_fire_onspin(this,_d,_e,_f,_c,"0")){_b=_e?_d:_j.applyMask(this._p_value);_c=_e?_e:_j.removeMask(_b);}_j.applyMask(_c);this._setSpinValue(_c,_b,_h);}}}};_pCalendar._on_spin_mobile_onspinup=function(){if(this._p_readonly){return false;}var _a=this._p_calendaredit;if(_a){var _b="";var _c;var _d;var _e=_a._p_value;var _f="";var _g=this.getCaretPos();var _h=this._masktypeobj;if(_h){if(!_h.date){var _i=this._getCurrentDate();var _j=nexacro._toString(_i.year).padLeft(4,"0");var _k=nexacro._toString(_i.month).padLeft(2,"0");var _l=nexacro._toString(_i.day).padLeft(2,"0");var _m=_h.getEditFormatType();switch(_m){case 0:_c=_j+_k+_l;break;case 1:_c="000000000";break;case 2:_c=_j+_k+_l+"000000000";}_b=_h.applyMask(_c);this._setSpinValue(_c,_b,_g);}else{_b=_h.applyMaskSpin(_g,1);_c=_h.changeNormalizeValueFromBuffer();_d=this._getEventInfoText(_e);_f=this._getEventInfoText(_c);if(!this.on_fire_onspin(this,_d,_e,_f,_c,"1")){_b=_e?_d:_h.applyMask(this._p_value);_c=_e?_e:_h.removeMask(_b);}_h.applyMask(_c);this._setSpinValue(_c,_b,_g);}}}};_pCalendar._on_spin_mobile_onspindown=function(){if(this._p_readonly){return false;}var _a=this._p_calendaredit;if(_a){var _b="";var _c;var _d;var _e=_a._p_value;var _f="";var _g=this.getCaretPos();var _h=this._masktypeobj;if(_h){if(!_h.date){var _i=this._getCurrentDate();var _j=nexacro._toString(_i.year).padLeft(4,"0");var _k=nexacro._toString(_i.month).padLeft(2,"0");var _l=nexacro._toString(_i.day).padLeft(2,"0");var _m=_h.getEditFormatType();switch(_m){case 0:_c=_j+_k+_l;break;case 1:_c="000000000";break;case 2:_c=_j+_k+_l+"000000000";}_b=_h.applyMask(_c);this._setSpinValue(_c,_b,_g);}else{_b=_h.applyMaskSpin(_g,-1);_c=_h.changeNormalizeValueFromBuffer();_d=this._getEventInfoText(_e);_f=this._getEventInfoText(_c);if(!this.on_fire_onspin(this,_d,_e,_f,_c,"0")){_b=_e?_d:_h.applyMask(this._p_value);_c=_e?_e:_h.removeMask(_b);}_h.applyMask(_c);this._setSpinValue(_c,_b,_g);}}}};_pCalendar._on_datepicker_ondayclick=function(_a,_b){if(this._p_readonly){return;}var _c=this._masktypeobj;var _d=_b.fromobject;var _e=_d._year+_d._month+_d._p_text.padLeft(2,"0");var _f=_c._date[3]?_c._date[3]:"";var _g=_c._date[4]?_c._date[4]:"";var _h=_c._date[5]?_c._date[5]:"";var _i=_c._date[6]?_c._date[6]:"";var _j=_c.getEditFormatType();var _k=this._p_value;var _l;if(_j==1){if(!nexacro._isNull(_f)){_f=_f.padLeft(2,"0");}if(!nexacro._isNull(_g)){_g=_g.padLeft(2,"0");}if(!nexacro._isNull(_h)){_h=_h.padLeft(2,"0");}if(!nexacro._isNull(_i)){_i=_i.padLeft(3,"0");}_l=_c.changeNormalizeValue(_f+_g+_h+_i);}else{_l=_c.changeNormalizeValue(_e+_f+_g+_h+_i);}this.on_fire_ondayclick(_e);if(_k!=_l){this._on_value_change(_k,_l);if(this._p_type=="monthonly"&&_d){_d._changeStatus("focused",false);}}else{this._setCalendarEditValue(this._p_value);if(this._isPopupVisible()){this._closePopup();}}if(this._p_autoskip){this._setFocusToNextComponent();}};_pCalendar._on_datepicker_oncloseup=function(){var _a=this._getWindow();if(_a&&this._track_capture){_a._releaseCaptureLock(this);}this._changeStatus("mouseover",false);this._p_calendaredit._changeStatus("mouseover",false);this._p_dropbutton._changeStatus("mouseover",false);this.on_fire_oncloseup(this,this._default_text,this._default_value,this._p_text,this._p_value);};_pCalendar.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){this._changeStatus("focused",true);if(this._p_type=="monthonly"){this._p_datepicker.body._apply_setfocus(_b);}var _g=this._p_calendaredit;if(_g){var _h=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_h&&_f instanceof nexacro.Calendar){if((this._p_type!="spin"&&this._p_popuptype!="none"&&(_b=="lbuttondown"||_b=="tap"))||this._type=="system"){var _i=this.getElement();if(_i){_i.setElementFocus(true);}}else{_g._on_focus(true,nexacro._getBrowserEventName(_b));}}else{_g._on_focus(true,nexacro._getBrowserEventName(_b));}}this._change_caret_from_method=false;};_pCalendar.on_killfocus_basic_action=function(){nexacro.Component.prototype.on_killfocus_basic_action.call(this);var _a=this._p_calendaredit;var _b=this._p_datepicker;if(this._p_type!="monthonly"){if(this._p_value!=_a._p_value){this._on_value_change(this._p_value,_a._p_value);}else if(this._p_text!=_a._p_text){this._setValue(this._p_value);}this.__focus_from_spinbutton=false;if(this._isPopupVisible()){this._closePopup();}if(_a&&!_a._onlydisplay){var _c=this._getRootWindow();if(_c){var _d=_c._indexOfCurrentFocusPaths(this);if(_d<0){var _e=_a._input_element;if(_e){_e._setElementLastSelectionRange();_e.setElementBlur();}}}}}else{if(_b){_b._refreshSpindate();}this.on_apply_value(this._p_value);}};_pCalendar.on_fire_sys_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro.Component.prototype.on_fire_user_onmousewheel.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);return (this._popupcontrol&&this._popupcontrol._is_popup())?true:false;};_pCalendar.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._updatePopupControlPosition();return _j;};_pCalendar.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onfling.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this._updatePopupControlPosition();return _j;};_pCalendar.on_fire_oneditclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this._p_visible&&this._isEnable()&&this._p_enableevent){if(this.oneditclick&&this.oneditclick._has_handlers){var _p=new nexacro.EditClickEventInfo(this,"oneditclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o);return this.oneditclick._fireEvent(this,_p);}}return true;};_pCalendar.on_fire_ondayclick=function(_a){if(this.ondayclick&&this.ondayclick._has_handlers){var _b=new nexacro.CalendarDayClickEventInfo(this,"ondayclick",_a);return this.ondayclick._fireEvent(this,_b);}return true;};_pCalendar.on_fire_canchange=function(_a,_b,_c,_d,_e){if(this.canchange&&this.canchange._has_handlers){var _f=new nexacro.ChangeEventInfo(this,"canchange",_b,_c,_d,_e);return this.canchange._fireCheckEvent(this,_f);}return true;};_pCalendar.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(this.onchanged&&this.onchanged._has_handlers){var _f=new nexacro.ChangedEventInfo(this,"onchanged",_b,_c,_d,_e);return this.onchanged._fireEvent(this,_f);}};_pCalendar.on_fire_oncloseup=function(_a,_b,_c,_d,_e){if(this.oncloseup&&this.oncloseup._has_handlers){var _f=new nexacro.CalendarCloseUpEventInfo(this,"oncloseup",_b,_d,_c,_e);return this.oncloseup._fireEvent(this,_f);}return false;};_pCalendar.on_fire_ondropdown=function(_a){if(this.ondropdown&&this.ondropdown._has_handlers){var _b=new nexacro.Event(this,"ondropdown");_b.fromreferenceobject=this._p_dropbutton;return this.ondropdown._fireCheckEvent(this,_b);}return true;};_pCalendar.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pCalendar.on_fire_onspin=function(_a,_b,_c,_d,_e,_f){if(this.onspin&&this.onspin._has_handlers){var _g=new nexacro.CalendarSpinEventInfo(this,"onspin",_b,_d,_c,_e,_f);return this.onspin._fireCheckEvent(this,_g);}return true;};_pCalendar.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pCalendar._createCalendaredit=function(){var _a=this._p_calendaredit;if(!_a){_a=this._p_calendaredit=new nexacro._CalendarEditControl("calendaredit",0,0,0,0,null,null,null,null,null,null,this,this._onlydisplay);_a.set_displaynulltext(this._p_displaynulltext);_a.set_readonly(this._p_readonly);_a.set_autoselect(this._p_autoselect);_a.set_autoskip(this._p_autoskip);_a.set_usecontextmenu(this._p_usecontextmenu);_a.createComponent(true);}};_pCalendar._createDropbutton=function(){var _a=this._p_dropbutton;if(!_a){_a=this._p_dropbutton=new nexacro._CalendarDropButtonControl("dropbutton",0,0,0,0,null,null,null,null,null,null,this);_a.createComponent(true);}};_pCalendar._createSpinbutton=function(){var _a=this._p_calendarspinupbutton;if(!_a){_a=this._p_calendarspinupbutton=new nexacro._CalendarSpinButtonControl("calendarspinupbutton",0,0,0,0,null,null,null,null,null,null,this);_a.createComponent(true);}var _b=this._p_calendarspindownbutton;if(!_b){_b=this._p_calendarspindownbutton=new nexacro._CalendarSpinButtonControl("calendarspindownbutton",0,0,0,0,null,null,null,null,null,null,this);_b.createComponent(true);}};_pCalendar._createDatePicker=function(){var _a=this._p_datepicker;if(!_a){_a=this._p_datepicker=new nexacro.DatePickerControl("datepicker",0,0,0,0,null,null,null,null,null,null,this);if(this._p_type=="monthonly"){_a._is_focus_accept=true;}else{_a._setPopupContains(true);_a._is_focus_accept=false;}_a.createComponent(true);}};_pCalendar._createPopupControl=function(){var _a=this._popupcontrol;if(!_a){_a=this._popupcontrol=new nexacro._CalendarPopupControl("calendarpopup",0,0,0,0,null,null,null,null,null,null,this);_a.createComponent(true);}};_pCalendar._createNormaltypeControl=function(){var _a=this.getElement();if(_a){this._createCalendaredit();this._createDropbutton();this._createPopupControl();this._createDatePicker();this._setEventHandlerToCalendarEdit();this._setEventHandlerToDropButton();this._setEventHandlerToDatePicker();this._applyAllProps();if(this._is_created){var _b=this._p_calendaredit;var _c=this._p_dropbutton;if(_b){_b._on_apply_inputtype();_b.on_created();}if(_c){_c.on_created();}}}};_pCalendar._createSpintypeControl=function(){var _a=this.getElement();if(_a){this._createCalendaredit();this._createSpinbutton();this._setEventHandlerToCalendarEdit();this._setEventHandlerToSpinButton();this._applyAllProps();if(this._is_created){var _b=this._p_calendaredit;var _c=this._p_calendarspinupbutton;var _d=this._p_calendarspindownbutton;if(_b){_b.on_created();}if(_c){_c.on_created();}if(_d){_d.on_created();}}}};_pCalendar._createMonthlytypeControl=function(){var _a=this.getElement();if(_a){this._createDatePicker();this._setEventHandlerToDatePicker();this._applyDatePickerProps();if(this._is_created){var _b=this._p_datepicker;if(_b){_b.on_created();}}}};_pCalendar._createSystemtypeControl=function(){var _a=this.getElement();if(_a){this._createCalendaredit();this._setEventHandlerToCalendarEdit();this._applyAllProps();if(this._is_created){var _b=this._p_calendaredit;if(_b){_b._on_apply_inputtype();_b.on_created();}}}};_pCalendar._createPopupDatePickerControl=function(){this._createPopupControl();this._createDatePicker();var _a=this._p_datepicker;var _b=this._popupcontrol;if(!_b._is_created){_b._attach(_a);_b.on_created();}if(!_a._is_created){this._setEventHandlerToDatePicker();this._applyDatePickerProps();_a.on_created();}};_pCalendar._destroyControl=function(){if(this._p_calendaredit){this._p_calendaredit.destroy();this._p_calendaredit=null;}if(this._p_dropbutton){this._p_dropbutton.destroy();this._p_dropbutton=null;}if(this._p_calendarspinupbutton){this._p_calendarspinupbutton.destroy();this._p_calendarspinupbutton=null;}if(this._p_calendarspindownbutton){this._p_calendarspindownbutton.destroy();this._p_calendarspindownbutton=null;}if(this._p_datepicker){this._p_datepicker.destroy();this._p_datepicker=null;}if(this._popupcontrol){this._popupcontrol.destroy();this._popupcontrol=null;}};_pCalendar._recalcLayout=function(){if(this._is_created_contents){var _a=this._p_calendaredit;var _b=this._p_dropbutton;var _c=this._p_calendarspinupbutton;var _d=this._p_calendarspindownbutton;var _e=this._p_datepicker;var _f=this._getClientWidth();var _g=this._getClientHeight();var _h=this._p_buttonsize;var _i,_j;if(_h==undefined){_i=_g;_j=_g;}else{_h=_h.split(" ");_i= +_h[0];_j=(_h[1])? +_h[1]:_g;}if(_i>_f){_i=_f;}if(_j>_g){_j=_g;}switch(this._type){case "system":case "normal":var _k=_f-_i;var _l=0;if(_j<_g){_l=(_g-_j)/2;}_b.move(_k,_l,_i,_j,null,null);_a.move(0,0,_k,_g,null,null);_a.set_visible(true);_b.set_visible(true);break;case "spin":var _m=_f-_i;var _n=0;var _o=Math.floor(_j/2);if(_j<_g){_n=(_g-_j)/2;}var _p=_m;var _q=_j-_o+_n;var _r=Math.floor(_j/2);_c.move(_m,_n,_i,_o,null,null);_d.move(_p,_q,_i,_r,null,null);_a.move(0,0,_m,_g,null,null);_a.set_visible(true);_c.set_visible(true);_d.set_visible(true);break;case "monthonly":this._applyDatePickerProps();_e.move(0,0,_f,_g,null,null);_e.set_visible(true);break;}}};_pCalendar._updatePopupControlPosition=function(){var _a=this._popupcontrol;if(_a){var _b=this.getElement();var _c=_a.getElement();var _d=this._getElementPosition(_b);var _e=_d.x;var _f=_d.y+(this._adjust_height);_c.setElementPosition(_e,_f);}};_pCalendar._showPopup=function(){if(this._p_type!="normal"){return;}if(nexacro._enableaccessibility){this._want_arrows=true;}var _a=this._getWindow();var _b=this.getElement();if(_b){var _c=this.on_fire_ondropdown(this);if(this._p_popuptype=="none"||this._type=="system"){return;}if(_c){this._createPopupDatePickerControl();var _d=this._popupcontrol;var _e=this._getPopupSizeArr();var _f=this._getElementPosition();var _g=_f.x;var _h=_f.y;var _i=_d._getPopupParentPos();var _j=_i.height;var _k=0;var _l=_j;var _m=_e.width;var _n=_e.height;var _o=_g+_m;var _p=_h+_j+_n;var _q=_a.clientWidth;var _r=_a.clientHeight;var _s=_o-_q;if(this._p_calendaredit&&nexacro._enableaccessibility){var _t=this._p_calendaredit._input_element;_b.setElementAccessibilityActiveDescendant(_d,_t);}if(_o>_q&&_g>_s){_k=_k-_s;}if(_g<0){_k= -_g;}if(_h>_n&&_p>_r){_l= -_n;}if(_p>_r){var _u=_r-_n;if(_u<0){_l= -_h;}else if(_n>_h){_l=_u-_h;}}if(this._p_popuptype=="center"){var _v=_a.frame;var _w=nexacro._getElementPositionInFrame(_v.getElement());var _x=_v._p_width;var _y=_v._p_height;if(nexacro._Browser=="Runtime"){_x=Math.round(_x/nexacro._getDevicePixelRatio(this.getElement()));_y=Math.round(_y/nexacro._getDevicePixelRatio(this.getElement()));}var _z=((_x/2)-(_m/2));var _aa=((_y/2)-(_n/2));_aa=_aa<0?0:_aa;_d._popup((_z+_w.x),(_aa+_w.y),_m,_n);}else{_d._popupBy(this,_k+_i.xgap,_l+_i.ygap,_m,_n);}if(_a&&this._track_capture){_a._setCaptureLock(this,true,false);}}}};_pCalendar._applyZoomPopup=function(){if(this._isPopupVisible()){this._showPopup();}};_pCalendar._closePopup=function(){if(this._type=="system"){nexacro._closeSystemCalendar();return;}else{var _a=this._popupcontrol;if(_a){_a._closePopup();}}if(nexacro._enableaccessibility){var _b=this._p_type;this._want_arrows=false;if(_b=="normal"&&nexacro._accessibilitytype!=2){var _c=this._getWindow();_c._removeFromCurrentFocusPath(this._p_calendaredit,true);this._p_calendaredit._on_focus(true);}}};_pCalendar._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0]._p_value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pCalendar._on_repeat=function(_a){var _b=this._type;var _c=_a;if(_b=="spin"){var _d=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_d){if(_c.id=="calendarspinupbutton"){this._on_spin_mobile_onspinup();}else if(_c.id=="calendarspindownbutton"){this._on_spin_mobile_onspindown();}}else{if(_c.id=="calendarspinupbutton"){this._on_spin_onspinup();}else if(_c.id=="calendarspindownbutton"){this._on_spin_onspindown();}}}else{var _e=_a._p_parent;if(_c.id=="spinupbutton"){_e._on_spin_up();}else if(_c.id=="spindownbutton"){_e._on_spin_down();}else if(_c.id=="nextbutton"){this._p_datepicker._on_button_onnextlbuttondown();}else if(_c.id=="prevbutton"){this._p_datepicker._on_button_onprevlbuttondown();}}};_pCalendar._on_beforerepeat=function(_a){if(this._type=="spin"){if(_a==this._p_calendarspindownbutton||_a==this._p_calendarspinupbutton){return [true,true];}}else{var _b=this._p_datepicker;if(_b){return _b._on_beforerepeat(_a);}}return [false,true];};_pCalendar._convertValueType=function(_a,_b,_c){var _d,_e;if(_c){_e=nexacro._getDatatypeRule();if(_e=="1.0"){return _a;}}_d=(_b===undefined||_b===null)?_b:nexacro._toString(_b);return _d;};_pCalendar._setValue=function(_a){var _b=this._masktypeobj;if(_b){_a=_b.changeNormalizeValue(_a);this._p_value=_a;this.on_apply_value(_a);}};_pCalendar._setSpinValue=function(_a,_b,_c){this._default_value=_a;this._p_text=this._default_text=_b;var _d=this._p_calendaredit;if(_d){_d._setSpinValue(_b,_c);}};_pCalendar._setCalendarEditValue=function(_a){var _b=this._p_calendaredit;if(_b){_b._setValue(_a);if(nexacro._enableaccessibility){this._accessibilityvalue=_b._p_text;this._updateAccessibilityLabel();_b._updateAccessibilityLabel();}}};_pCalendar._setDatePickerValue=function(_a){var _b=this._p_datepicker;if(_b){_b._setValue(_a);}};_pCalendar._setLocale=function(_a){if(this._p_locale){return;}if(this._locale!=_a){this._locale=_a;this.on_apply_locale(_a);this.on_apply_weekformat(this._p_weekformat);this.on_apply_value(this._p_value);}};_pCalendar._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this._p_innerdataset=_a;}};_pCalendar._setDefaultCaret=nexacro._emptyFn;_pCalendar._setZeroCaret=function(){var _a=this._p_calendaredit;if(_a&&this._type!="system"&&nexacro._checkActiveElement(_a._input_element)){_a.setCaretPos(0);}};_pCalendar._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm().getNextComponent(_a,true);if(_b){_b.setFocus();if(!_b._p_autoselect&&_b._is_editable_control){_b._setDefaultCaret();}}};_pCalendar._setEventHandlerToCalendarEdit=function(){var _a=this._p_calendaredit;if(_a){var _b=(nexacro._isTouchInteraction&&nexacro._SupportTouch&&(this._type=="system"||this.type!="spin"));if(_b){this._setEventHandler("onkeydown",this._on_edit_onkeydown,this);}else{_a._setEventHandler("onkeydown",this._on_edit_onkeydown,this);}_a._setEventHandler("onlbuttondown",this._on_edit_onlbuttondown,this);_a._setEventHandler("onlbuttonup",this._on_edit_onlbuttonup,this);_a._setEventHandler("oneditclick",this._on_edit_oneditclick,this);_a._setEventHandler("oninput",this._on_edit_oninput,this);}};_pCalendar._setEventHandlerToDropButton=function(){var _a=this._p_dropbutton;if(_a){var _b=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_b){if(this._type=="system"){_a._setEventHandler("onclick",this._on_edit_oneditclick,this);}else{_a._setEventHandler("onclick",this._on_drop_mobile_onclick,this);_a._setEventHandler("onkeydown",this._on_edit_onkeydown,this);}}else{_a._setEventHandler("onclick",this._on_drop_onclick,this);_a._setEventHandler("onlbuttondown",this._on_drop_onlbuttondown,this);}}};_pCalendar._setEventHandlerToSpinButton=function(){var _a=(nexacro._isTouchInteraction&&nexacro._SupportTouch);var _b=this._p_calendarspinupbutton;if(_b){if(_a){_b._setEventHandler("onclick",this._on_spin_mobile_onspinup,this);}else{_b._setEventHandler("onclick",this._on_spin_onspinup,this);}}var _c=this._p_calendarspindownbutton;if(_c){if(_a){_c._setEventHandler("onclick",this._on_spin_mobile_onspindown,this);}else{_c._setEventHandler("onclick",this._on_spin_onspindown,this);}}};_pCalendar._setEventHandlerToDatePicker=function(){var _a=this._p_datepicker;if(_a){_a._setEventHandler("ondayclick",this._on_datepicker_ondayclick,this);_a._setEventHandler("oncloseup",this._on_datepicker_oncloseup,this);}};_pCalendar._getDateMaskObj=function(){return this._masktypeobj;};_pCalendar._getFormatType=function(){var _a=this._masktypeobj;if(_a){return _a.getEditFormatType();}return;};_pCalendar._getCurrentDate=function(){var _a=this._masktypeobj;if(_a){return _a.getCurrentDate();}return;};_pCalendar._getCurrentDateStr=function(){var _a=this._masktypeobj;if(_a){var _b=_a.getCurrentDate();if(_b){var _c=nexacro._toString(_b.year).padLeft(4,"0");var _d=nexacro._toString(_b.month).padLeft(2,"0");var _e=nexacro._toString(_b.day).padLeft(2,"0");var _f=_a.getEditFormatType();var _g="";switch(_f){case 0:_g=_c+_d+_e;break;case 1:_g="000000000";break;case 2:_g=_c+_d+_e+"000000000";}return _a.applyMask(_g);}}return "";};_pCalendar._getEndDay=function(_a,_b){var _c=this._masktypeobj;if(_c){return _c.getEndDay(_a,_b);}return;};_pCalendar._getPopupSizeArr=function(){var _a=this._p_popupsize;if(!_a){_a="200 220";}_a=_a.split(/\s+/);var _b= +_a[0];var _c=_a[1]? +_a[1]:_b;return {width:_b,height:_c};};_pCalendar._getElementPosition=function(){return nexacro._getElementPositionInFrame(this.getElement());};_pCalendar._getEventInfoText=function(_a){var _b="";var _c=this._masktypeobj;if(_c){var _d=_c.getEditStatus();_c.setEditStatus(false);var _e=this._isInvalidValue(_a);if(_e){_b=_c.applyMask("");}else{var _f=_c.changeNormalizeValue(_a);_b=_c.applyMask(_f);}_c.setEditStatus(_d);}return _b;};_pCalendar._isPopupVisible=function(){var _a=false;if(this._p_type!="monthonly"){if(this._popupcontrol){_a=this._popupcontrol._p_visible;}}return _a;};_pCalendar._applyAllProps=function(){this.on_apply_innerdataset(this._innerdataset);this.on_apply_locale(this._getLocale());this.on_apply_weekformat(this._p_weekformat);this.on_apply_readonly();this.on_apply_editformat(this._p_editformat);this.on_apply_dateformat(this._p_dateformat);this.on_apply_value(this._p_value);};_pCalendar._applyDatePickerProps=function(){var _a=this._masktypeobj;var _b=this._p_datepicker;if(_b){_b._setEnable(this._p_enable);_b.set_readonly(this._p_readonly);_b._setValue(_a.getDatePickerValue());}};_pCalendar._makeCalendarText=function(_a){if(!_a){return "";}var _b=_a.toString();var _c=this._currentformat;this._currentformat="dateformat";var _d=this._makeMaskValue(_b);var _e=this._makeMask("dateformat",this._makeDateObj(_a));var _f=0;var _g="";var _h="yMdHhmsl";this._currentformat=_c;for(var _j=0,_k=_e.length;_j<_k;_j++ ){var _i=_e.charAt(_j);if(_h.indexOf(_i)>=0){_g+=_d.charAt(_f);_f++ ;}else{if(_i==="~"||_i==="^"){_g+=_d.charAt(_f);_f++ ;}else{_g+=_i;}}}return _g;};_pCalendar._isValidDate=function(_a,_b,_c){var _d,_e,_f;var _g,_h,_i,_j;switch(_b){case 0:_d=_a.substr(0,4);_e=_a.substr(4,2);_f=_a.substr(6,2);break;case 1:var _k=0;if(_c&&_c[0]<40){_g=_a.substr(_k,2);_k=2;}_h=_a.substr(_k,2);_i=_a.substr(_k+2,2);_j=_a.substr(_k+2,3);break;case 2:_d=_a.substr(0,4);_e=_a.substr(4,2);_f=_a.substr(6,2);_g=_a.substr(8,2);_h=_a.substr(10,2);_i=_a.substr(12,2);_j=_a.substr(14,3);break;}if((_d&&isNaN(_d= +_d))||(_e&&isNaN(_e= +_e))||(_f&&isNaN(_f= +_f))||(_g&&isNaN(_g= +_g))||(_h&&isNaN(_h= +_h))||(_i&&isNaN(_i= +_i))||(_j&&isNaN(_j= +_j))){return false;}var _l=this._masktypeobj;var _m=_l.getEndDay(_d,_e);if((_b!=1&&!_m)||(_e&&( +_e>12))||(_f&&( +_f>_m))||(_g&&( +_g>=24))||(_h&&( +_h>=60))||(_i&&( +_i>=60))||(_j&&( +_j>=1000))){return false;}return true;};_pCalendar._isInvalidValue=function(_a){if(nexacro._isNull(_a)||_a===""){return false;}var _b;if(_a instanceof Date||_a instanceof nexacro.Date){_b=_a;}else{_b=this._convertToDateObject(_a);}if(_b){if(_b._isInvalidDate?_b._isInvalidDate():isNaN(_b.valueOf())){return true;}var _c=_b.getFullYear();if(_c<0||_c>9999){return true;}}return false;};_pCalendar._beginValueChange=function(){return !(this.__value_change?false:this.__value_change=true);};_pCalendar._finalValueChange=function(){return !(this.__value_change=false);};_pCalendar._convertToDateObject=function(_a){if(nexacro._isNull(_a)||_a===""){return null;}var _b;var _c=this._masktypeobj;var _d=_c.getEditFormatType();if(_d<0){if(this._p_editformat){this.on_apply_editformat(this._p_editformat);}_d=_c.getEditFormatType();}if(_a instanceof Date||_a instanceof nexacro.Date){_b=_a;}else{_a=nexacro._toString(_a);if(/[^0-9]/.test(_a)){_b=new Date(_a);}else{_b=_c.convertToDateObject(_a,_d);}}if(_b){if(isNaN(_b.valueOf())){return _b;}switch(_d){case 0:_b=new nexacro.Date(_b.getFullYear(),_b.getMonth(),_b.getDate());break;case 1:_b=new nexacro.Date(_b.getFullYear(),_b.getMonth(),_b.getDate(),_b.getHours(),_b.getMinutes(),_b.getSeconds(),_b.getMilliseconds());_b._timeonly=true;break;case 2:_b=new nexacro.Date(_b.getFullYear(),_b.getMonth(),_b.getDate(),_b.getHours(),_b.getMinutes(),_b.getSeconds(),_b.getMilliseconds());break;default:break;}}return _b;};_pCalendar._on_getDisplayText=function(){var _a=this._p_calendaredit;if(_a){return _a._on_getDisplayText();}};delete _pCalendar;nexacro._CalendarDropButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCalendarDropButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._CalendarDropButtonControl);nexacro._CalendarDropButtonControl.prototype=_pCalendarDropButtonControl;_pCalendarDropButtonControl._type_name="ButtonControl";_pCalendarDropButtonControl._is_subcontrol=true;_pCalendarDropButtonControl._is_focus_accept=false;_pCalendarDropButtonControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;if(_g){var _h=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_h){nexacro.Component.prototype.on_focus_basic_action.call(this,_a,_b,_c,_d,_e,_f);}else{_g._apply_setfocus(_b);}}};_pCalendarDropButtonControl._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}if(this._p_visible&&this._p_parent._isEnable()&&this._p_enableevent){var _k=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this,_j);this.on_click_basic_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);}};delete _pCalendarDropButtonControl;nexacro._CalendarSpinButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCalendarSpinButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._CalendarSpinButtonControl);nexacro._CalendarSpinButtonControl.prototype=_pCalendarSpinButtonControl;_pCalendarSpinButtonControl._type_name="ButtonControl";_pCalendarSpinButtonControl._is_subcontrol=true;_pCalendarSpinButtonControl._is_focus_accept=false;_pCalendarSpinButtonControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;if(_g){_g.__focus_from_spinbutton=true;_g._apply_setfocus(_b);}};delete _pCalendarSpinButtonControl;nexacro._CalendarEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.MaskEdit.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};var _pCalendarEditControl=nexacro._createPrototype(nexacro.MaskEdit,nexacro._CalendarEditControl);nexacro._CalendarEditControl.prototype=_pCalendarEditControl;_pCalendarEditControl._type_name="MaskEditControl";_pCalendarEditControl._is_subcontrol=true;_pCalendarEditControl._prevent_clickevent=true;_pCalendarEditControl.on_created_contents=function(_a){var _b=this._input_element;if(_b){this.on_apply_value(this._p_value);_b.create(_a);if(nexacro._isNull(this._p_value)){this._changeUserStatus("nulltext",true);}else{this._changeUserStatus("nulltext",false);if(this._isInvalidValue(this._p_value)){this._changeUserStatus("invalidtext",true);}else{this._changeUserStatus("invalidtext",false);}}}if(nexacro._enableaccessibility){this._on_created_accessibility_contents(_a);}this.on_apply_displaynulltext(this._p_displaynulltext);this.on_apply_displayinvalidtext(this._p_displayinvalidtext);};_pCalendarEditControl.on_create_contents_command=function(){var _a=this._input_element;if(_a){this.on_apply_value(this._p_value);return _a.createCommand();}return "";};_pCalendarEditControl._apply_setfocus=function(_a){this._processing_updateToDataset=false;var _b=this._input_element;if(_b){var _c=this._p_value;var _d="";var _e="";var _f=this._p_parent;var _g=this._getMaskObj();if(_g){if(!this._onlydisplay){_g.setEditStatus(true);}_e=this._getEmptyText();if(this._isInvalidValue(_c)){_d=_g.applyMask("");}else{_d=_g.applyMask(_c);}if(_a){this._default_value=_c;this._default_text=_d;}if(!this._onlydisplay){var _h=_b._last_selection_range;if(_h&&!this._p_autoselect){this._caret_pos={begin:_h[0],end:_h[1]};}this._changeUserStatus("nulltext",false);this._changeUserStatus("invalidtext",false);if(nexacro._isNull(_c)){_b.setElementDefaultValue(_e);_b.setElementValue(null);}else{_b.setElementValue(_d);}}}if(!this._onlydisplay){_b.setElementFocus(_a);_d=_b.getElementText();if(_d!=this._p_text){this._default_text=this._p_text=_d;}if(!_f.__focus_from_spinbutton&&!this._p_autoselect){if(this._caret_pos==-1){_b.setElementSetSelect(0,0);}else{_b.setElementSetSelect(this._caret_pos.begin,this._caret_pos.end);}}}}};_pCalendarEditControl.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);var _c=this._getRootComponent(this);if(_c==_a){if(this._p_parent&&(!this._p_parent._is_subcontrol||this._p_parent==_b._p_parent)){return;}}var _d=this._input_element;if(_d){var _e=this._getMaskObj();var _f=this._default_value;var _g=this._default_text;var _h=this._p_value;var _i=this._p_text;if(_e){_e.setEditStatus(false);_i=_e.applyMask(_h);}if(_f!=_h||_i!=_g){if(!this._processing_canchange){if(!this._on_value_change(_g,_f,_i,_h)){this._p_value=_f;}}}this._caret_pos=_d.getElementCaretPos();if(nexacro._enableaccessibility&&nexacro._Browser=="Runtime"&&nexacro._accessibilitytype==5){this._setAccessibilityStatKillFocus();}}};_pCalendarEditControl._on_deactivate=function(){var _a=this._input_element;if(_a){var _b=_a.getElementSelectionRange();_a._setElementLastSelectionRange(_b);}nexacro.MaskEdit.prototype._on_deactivate.call(this);};_pCalendarEditControl.on_keydown_default_action=function(_a,_b,_c,_d,_e,_f){if(this._p_readonly||!this._isEnable()){return;}var _g=this._input_element;if(_g){var _h=this._getMaskObj();var _i=_g.value;var _j=_g.getElementCaretPos();var _k,_l;if(_a==nexacro.KeyCode_ImeInput){var _m=_g.handle;if(nexacro._Browser=="Chrome"||nexacro._Browser=="Edge"){_m.blur();_m.focus();_g.setElementSetSelect(_j.begin,_j.end);}_g.stopSysEvent();}else if(_a==nexacro.Event.KEY_BACKSPACE){if(_h&&_i){if(_j.end>0){_k=_j.end-1;while((_l=_i.charAt(_k))){if(_h.isDeletableChar(_l,_k)||_k==0){break;}_k-- ;}_h._is_filled=false;if(_k!=(_j.end-1)){_g.setElementSetSelect(_k+1,_k+1);}}}}else if(_a==nexacro.Event.KEY_DEL){if(_h&&_i){var _n=_i.length;if(_j.begin<_n){_k=_j.begin;while((_l=_i.charAt(_k))){if(_h.isDeletableChar(_l,_k)||_k==_n){break;}_k++ ;}_h._is_filled=false;if(_k!=_j.begin){_g.setElementSetSelect(_k,_k);}}}}}};_pCalendarEditControl.on_keypress_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this._input_element;if(_g){if(_a==nexacro.Event.KEY_TAB){if(!this._getDlgCode().want_tab){_g.stopSysEvent();return;}}if(_a!==0&&_b===0){return true;}else{if(_a==nexacro.Event.KEY_ENTER||_a==nexacro.Event.KEY_ESC){return true;}}_b=_b||_a;if(!_d&&!_c&&_b){var _h=String.fromCharCode(_b);if(_h.length>0){var _i=this._getMaskObj();var _j=_g.getElementCaretPos();var _k=_i.findNearEditablePos(_j.begin,1);if(_k<0||_i.isFilterChar(_h,_k,_j.end,true)){_g.stopSysEvent();this._on_input_autoskip();return;}_i.keyPressed(_h,_k);}}}};_pCalendarEditControl.on_keyinput_basic_action=function(){if(this._p_readonly||!this._isEnable()){return false;}var _a=this._input_element;if(_a){var _b=_a.value;var _c=_b?_b:"";var _d=this._getMaskObj();if(_d){if(_d._editmasked_empty_text==_c){_b="";}else{if(_d._use_edit_buf){_b=_d.changeNormalizeValueFromBuffer();}else{_b=_d.removeMask(_c.split(''));_b=_d.changeNormalizeValue(_b);}}}if(!_b&&!this._default_value){this._p_value=this._default_value;}else{this._p_value=_b;}this._p_text=_c;if(this._undostack){var _e=_a.getElementCaretPos();if(_e&&_e!=-1){this._undostack.push(_c,_e.begin,_e.end);}else{this._undostack.push(_c,0,0);}}}};_pCalendarEditControl._beforeinput_process_with_HTMLEvent=function(_a,_b,_c,_d,_e){var _f=this._input_element;var _g=this._getMaskObj();var _h=[];if(_g){var _i=_f._getInputValue();var _j,_k,_l,_m,_n;switch(_e){case "deleteContentBackward":if(_c==_d){_j=_i.substring(0,_c -1);_k=_i.substring(_d);_l=_j+_k;_m=_g.arrangeMask(_l,_c -1,_c -1);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}else{_j=_i.substring(0,_c);_k=_i.substring(_d);_l=_j+_k;if((_d-_c==_i.length)){_f._beforeinput_result_data=_g.applyMask(_l);_f._beforeinput_result_pos={begin:_c,end:_c};}else{_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}}_h.push(_f._BeforeinputState.REPLACE);break;case "deleteContentForward":if(_c==_d){_j=_i.substring(0,_c);_k=_i.substring(_d+1);_l=_j+_k;_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}else{_j=_i.substring(0,_c);_k=_i.substring(_d);_l=_j+_k;if((_d-_c==_i.length)){_f._beforeinput_result_data=_g.applyMask(_l);_f._beforeinput_result_pos={begin:_c,end:_c};}else{_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}}_h.push(_f._BeforeinputState.REPLACE);break;case "deleteByCut":if(_c==_d){}else{_j=_i.substring(0,_c);_k=_i.substring(_d);_l=_j+_k;if((_d-_c==_i.length)){_f._beforeinput_result_data=_g.applyMask(_l);_f._beforeinput_result_pos={begin:_c,end:_c};}else{_m=_g.arrangeMask(_l,_c,_c);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_m.pos,end:_m.pos};}}_h.push(_f._BeforeinputState.REPLACE);break;case "insertText":case "insertCompositionText":_a=_a?_a:"";_n=_g.findNearEditablePos(_c,1);var _o=_g.isFilterCharEx(_a,_n,_d);if(_n<0||(_o.ret&&!_o.date)){_h.push(_f._BeforeinputState.CANCEL);}else{if(_o.ret){_h.push(_f._BeforeinputState.REPLACE);_f._beforeinput_result_data=_g.applyMaskEx(_o.date);_f._beforeinput_result_pos={begin:_o.pos,end:_o.pos};if(_f._beforeinput_result_data.length==_g._edit_char_buf.length&&_o.pos==_g._edit_char_buf.length){_g._is_filled=true;}else{_g._is_filled=false;}}else{var _p=_d;if(_c==_d){_l=_i.substring(0,_c)+_a+_i.substring(_d);_d=_d+_a.length;}else{var _q=_a+"".padLeft(_d-_a.length," ");_l=_i.substring(0,_c)+_q+_i.substring(_c);_d=_q.length;}_m=_g.arrangeMask(_l,_c,_d,_p);if(_m==null){_h.push(_f._BeforeinputState.CANCEL);}else{_n=_g.findNearEditablePos(_n+_a.length,1);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_n,end:_n};_h.push(_f._BeforeinputState.REPLACE);if(this._p_autoskip&&_n==-1&&_m.pos==_m.text.length){if(_e=="insertCompositionText"){_g._is_filled=true;}else{_h.push(_f._BeforeinputState.REPLACE);}}else{if(_e=="insertCompositionText"){_g._is_filled=false;}_h.push(_f._BeforeinputState.REPLACE);}}}}break;case "insertFromPaste":_n=_g.findNearEditablePos(_c,1);if(_n<0||_g.isFilterChar(_a,_n)){_h.push(_f._BeforeinputState.CANCEL);}else{var _p=_d;if(_c==_d){_l=_i.substring(0,_c)+_a+_i.substring(_d);_d=_d+_a.length;}else{var _q=_a+"".padLeft(_d-_a.length," ");_l=_i.substring(0,_c)+_q+_i.substring(_c);_d=_q.length;}_m=_g.arrangeMask(_l,_c,_d,_p);if(_m==null){_h.push(_f._BeforeinputState.CANCEL);}else{_n=_g.findNearEditablePos(_m.pos,1);_f._beforeinput_result_data=_m.text;_f._beforeinput_result_pos={begin:_n,end:_n};_h.push(_f._BeforeinputState.REPLACE);}}break;default:_h.push(_f._BeforeinputState.PASS);break;}}return _h;};_pCalendarEditControl._beforeinput_process_with_NexacroInputEvent=function(_a,_b,_c,_d){var _e=this._input_element;if(_e){var _f=0;var _g=_e._paste_caret_pos?true:false;var _h=_a?_a:"";var _i="";var _j=_e.inputtype;var _k=this._getMaskObj();if(_k){if(_j=="date"){if(_k.getCurrentText()!=_h){_a=_k.removeMask(_h.split(''));_k.applyMask(_a);}}else{var _l=_k.arrangeMask(_h,_c,_d);if(_l==null){_e.replaceElementText("",_c,_d);_e.stopSysEvent();}else{if(_g){_f=_k.findNearEditablePos(_c,1);_i=_h.substring(_c,_d);if(_f<0||_k.isFilterChar(_i,_f)){_e.updateElementText(this._p_text,_f);}else{_f=_k.findNearEditablePos(_l.pos,1);if(nexacro._Browser=="Runtime"&&this._p_autoselect&&(this._p_text==_l.text)){_e.updateElementText(_l.text,_f,-99);}else{_e.updateElementText(_l.text,_f);}}}else{_f=_k.findNearEditablePos(_c,1);var _m=(_a?_a.substr(_c,1):"");var _n=_k.isFilterCharEx(_m,_f,_d);if(_n.ret){var _o=_k.applyMaskEx(_n.date);var _p=_n.pos;if(!/[0-9]/.test(_m)){_o=_l.text;_p=_l.pos;}if(nexacro._Browser=="Runtime"){_e.updateElementText(_o,_p,_c);}else{_e.updateElementText(_o,_p);}if(this._p_autoskip&&_p==_o.length&&_k._is_editing){_k._is_filled=true;}}else{if(_c<_d){_i=_h.substring(_c,_d);var _q=_k.removeMask(_l.text.split(''));var _r=this._p_parent;if(_r){if(!_r._isValidDate(_q,_k.getEditFormatType(),_k._edit_type_buf)){_e.replaceElementText("",_c,_c+_i.length);_e.stopSysEvent();return;}}}_f=_k.findNearEditablePos(_l.pos,1);if(_l.text!=_h||_l.pos!=_f){_e.updateElementText(_l.text,_f);}}}}}}}};_pCalendarEditControl._isInvalidValue=function(_a){return this._p_parent._isInvalidValue(_a);};_pCalendarEditControl._setSpinValue=function(_a,_b){var _c=this._input_element;if(_c){_c.setCompositionComplete();if(!this._onlydisplay){_c.updateElementText(_a,_b);}if(nexacro._enableaccessibility){this._setAccessibilityLabel(_a);}}};_pCalendarEditControl._getMaskObj=function(){var _a=this._p_parent;if(_a){return _a._masktypeobj;}return null;};_pCalendarEditControl._getEmptyText=function(){var _a=this._getMaskObj();if(_a){return _a.getEmptyText();}return "";};nexacro._CalendarPopupControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.PopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCalendarPopupControl=nexacro._createPrototype(nexacro.PopupControl,nexacro._CalendarPopupControl);nexacro._CalendarPopupControl.prototype=_pCalendarPopupControl;_pCalendarPopupControl._type_name="popupCalendar";_pCalendarPopupControl._getPopupParentPos=function(){var _a=this._p_parent;var _b=[_a._adjust_width,_a._adjust_height];var _c=nexacro._getElementPositionInFrame(_a.getElement());var _d=0,_e=0;if(nexacro._Browser=="MobileSafari"){var _f=this._getRootFrame();if(_f){var _g=nexacro._getElementPositionInFrame(_f.getElement());_d=_g.x<0?_g.x* (-1):0;_e=_g.y<0?_g.y* (-1):0;}}return {"x":_c.x,"y":_c.y,"width":_b[0],"height":_b[1],"xgap":_d,"ygap":_e};};delete _pCalendarPopupControl;}if(!nexacro.GroupBox){nexacro.GroupBox=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pGroupBox=nexacro._createPrototype(nexacro.Component,nexacro.GroupBox);nexacro.GroupBox.prototype=_pGroupBox;_pGroupBox._type_name="GroupBox";_pGroupBox._titlecontrol=null;_pGroupBox._boxcontrol=null;_pGroupBox._p_titlealign="topleft";_pGroupBox._p_titlegap=undefined;_pGroupBox.tabstop=false;_pGroupBox._title_adjust_width=8;_pGroupBox._is_focus_accept=false;_pGroupBox._p_accessibilityrole="groupbox";_pGroupBox._event_list={"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onmousedown":1,"onmouseup":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pGroupBox._accessibility_role="groupbox";_pGroupBox.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._boxcontrol=new nexacro.Static("groupboxcontents",0,0,0,0,null,null,null,null,null,null,this);_b._setControl();_b.createComponent(true);var _c=this._titlecontrol=new nexacro._IconText("groupboxtitle",0,0,0,0,null,null,null,null,null,null,this);_c._setControl();_c.set_text(this._displaytext);_c.createComponent(true);}};_pGroupBox.on_created_contents=function(_a){this._recalcLayout();var _b=this._boxcontrol;if(_b){_b.on_created(_a);}var _c=this._titlecontrol;if(_c){_c.on_created(_a);}};_pGroupBox.on_destroy_contents=function(){if(this._boxcontrol){this._boxcontrol.destroy();this._boxcontrol=null;}if(this._titlecontrol){this._titlecontrol.destroy();this._titlecontrol=null;}};_pGroupBox.on_create_contents_command=function(){this._recalcLayout();var _a=this._boxcontrol;var _b=this._titlecontrol;var _c="";if(_a){_c+=_a.createCommand();}if(_b){_c+=_b.createCommand();}return _c;};_pGroupBox.on_attach_contents_handle=function(_a){var _b=this._boxcontrol;var _c=this._titlecontrol;if(_b){_b.attachHandle(_a);}if(_c){_c.attachHandle(_a);}};_pGroupBox.on_change_containerRect=function(){if(this._is_created_contents){this._recalcLayout();}};_pGroupBox.on_change_containerPos=function(){};_pGroupBox.on_get_prop_tabstop=function(){if(nexacro._enableaccessibility){var _a=this._p_accessibility;if(_a&&_a.enable&&_a.role=="link"){return true;}}return false;};_pGroupBox._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pGroupBox.on_apply_prop_enable=function(_a){var _b=this._boxcontrol;if(_b){_b.set_enable(_a);}var _c=this._titlecontrol;if(_c){_c.set_enable(_a);}};_pGroupBox.set_titlealign=function(_a){var _b=["topleft","topcenter","topright","lefttop","leftcenter","leftbottom","righttop","rightcenter","rightbottom","bottomleft","bottomcenter","bottomright"];if(_b.indexOf(_a)==-1){return;}if(this._p_titlealign!=_a){this._p_titlealign=_a;this.on_apply_titlealign(_a);}};_pGroupBox.on_apply_titlealign=function(){this._recalcLayout();};_pGroupBox.set_titlegap=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)||_a<0){return;}}if(this._p_titlegap!=_a){this._p_titlegap=_a;this.on_apply_titlegap(_a);}};_pGroupBox.on_apply_titlegap=function(){this._recalcLayout();};_pGroupBox.on_apply_text=function(_a){var _b=this._titlecontrol;if(_b){_b.set_text(_a);this._recalcLayout();}};_pGroupBox.on_apply_font=function(_a){nexacro.Component.prototype.on_apply_font.call(this,_a);this._recalcLayout();};_pGroupBox.on_apply_prop_cssclass=function(){var _a=this._titlecontrol;if(_a){_a.on_apply_cssclass();}var _b=this._boxcontrol;if(_b){_b.on_apply_cssclass();}this._recalcLayout();};_pGroupBox._properties=[{name:"titlealign"},{name:"titlegap"}];nexacro._defineProperties(_pGroupBox,_pGroupBox._properties);_pGroupBox._recalcLayout=function(){var _a=this.getElement();if(_a&&this._is_created_contents){var _b=this._titlecontrol;var _c=this._boxcontrol;var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=this._p_titlealign;var _g=this._p_titlegap;if(!_g){_g=10;}var _h=_b._on_getFitSize();var _i=_h[0]+this._title_adjust_width;var _j=_h[1];var _k,_l;var _m,_n,_o,_p;if(_f.indexOf("top")==0){_m=0;_n=_j/2;_o=_d;_p=_e-(_j/2);_l=0;if(_f=="topleft"){_k=_g;}else if(_f=="topcenter"){_k=(_d/2)-(_i/2);}else if(_f=="topright"){_k=_d-_i-_g;}}else if(_f.indexOf("left")==0){_m=_i/2;_n=0;_o=_d-(_i/2);_p=_e;_k=0;if(_f=="lefttop"){_l=_g;}else if(_f=="leftcenter"){_l=(_e/2)-(_j/2);}else if(_f=="leftbottom"){_l=_e-_j-_g;}}else if(_f.indexOf("right")==0){_m=0;_n=0;_o=_d-(_i/2);_p=_e;_k=_d-_i;if(_f=="righttop"){_l=_g;}else if(_f=="rightcenter"){_l=(_e/2)-(_j/2);}else if(_f=="rightbottom"){_l=_e-_j-_g;}}else if(_f.indexOf("bottom")==0){_m=0;_n=0;_o=_d;_p=_e-(_j/2);_l=_e-_j;if(_f=="bottomleft"){_k=_g;}else if(_f=="bottomcenter"){_k=(_d/2)-(_i/2);}else if(_f=="bottomright"){_k=_d-_i-_g;}}_b.move(_k,_l,_i,_j);_c.move(_m,_n,_o,_p);}};delete _pGroupBox;}nexacro.TabIndexChangeEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"ontabindexchange";this.fromobject=this.fromreferenceobject=_a;this.postindex=_c;this.preindex=_d;};var _pTabIndexChangeEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ChangeEventInfo);nexacro.TabIndexChangeEventInfo.prototype=_pTabIndexChangeEventInfo;_pTabIndexChangeEventInfo._type_name="TabIndexChangeEventInfo";delete _pTabIndexChangeEventInfo;nexacro.TabMouseEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){nexacro.MouseEventInfo.call(this,_a,_b||"onextrabuttonclick",_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p);this.index=_c;};var _pTabMouseEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.MouseEventInfo);nexacro.TabMouseEventInfo.prototype=_pTabMouseEventInfo;_pTabMouseEventInfo._type_name="TabMouseEventInfo";delete _pTabMouseEventInfo;if(!nexacro.Tab){nexacro.Tab=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._tabbuttonitems=[];this._p_tabpages=new nexacro.Collection();};var _pTab=nexacro._createPrototype(nexacro.Component,nexacro.Tab);nexacro.Tab.prototype=_pTab;_pTab._type_name="Tab";_pTab._p_prevbutton=null;_pTab._p_nextbutton=null;_pTab._p_multiline=false;_pTab._p_tabindex=-1;_pTab._p_focusacceptable=false;_pTab._p_usecontrolkey=true;_pTab._p_rotatetext=false;_pTab._p_tabjustify=false;_pTab._p_selectchangetype="down";_pTab._p_tabposition="top";_pTab._p_extrabutton=null;_pTab._p_preload=false;_pTab._p_tabbuttongap=undefined;_pTab._p_tabbuttonstartgap=undefined;_pTab._p_usetabbutton=true;_pTab._bshow_tabpage_accordion=false;_pTab._p_tabstyle="normal";_pTab._buse_tabbuttonicon=true;_pTab._p_showtabbuttonicon=false;_pTab._p_tabbuttoniconsize=null;_pTab._p_accessibilityrole="tab";_pTab._default_spinbutton_size={width:14,height:14};_pTab._extrabutton_size=null;_pTab._tabbuttonicon_size=null;_pTab._prevbutton_size=null;_pTab._nextbutton_size=null;_pTab._prevbutton_extrasize=null;_pTab._nextbutton_extrasize=null;_pTab._is_containerset=true;_pTab._is_changed_focus=false;_pTab._init_tabindex=0;_pTab._next_button_idx=0;_pTab._show_button_cnt=0;_pTab._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"oncontextmenu":1,"onchanged":1,"onspin":1,"canchange":1,"oneditclick":1,"onextrabuttonclick":1,"onmouseup":1,"onmousedown":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pTab.on_create_contents=function(){var _a=this.getElement();if(_a){this._createSpinButton(true);this._createTabpages(true);}};_pTab.on_created_contents=function(_a){var _b=this._p_tabpages;var _c=_b.length;var _d=this._tabbuttonitems;var _e=_d.length;for(var _f=0;_f<_c;_f++ ){_b[_f].on_created(_a);}for(_f=0;_f<_e;_f++ ){_d[_f].on_created(_a);}if(this._p_nextbutton){this._p_nextbutton.on_created(_a);}if(this._p_prevbutton){this._p_prevbutton.on_created(_a);}this._is_created=true;this.on_apply_tabindex(this._init_tabindex);this._rearrangeContents();for(var _f=0;_f<_c;_f++ ){_b[_f]._createForm(_a);if(this._p_preload){_b[_f]._on_apply_url();}}};_pTab.on_destroy_contents=function(){var _a=this._p_tabpages;var _b=_a.length;var _c=this._tabbuttonitems;var _d=_c.length;if(this._p_nextbutton){this._p_nextbutton.destroy();this._p_nextbutton=null;}if(this._p_prevbutton){this._p_prevbutton.destroy();this._p_prevbutton=null;}for(var _e=_d -1;_e>=0;_e-- ){_c[_e].destroy();_c.splice(_e,1);}for(_e=_b -1;_e>=0;_e-- ){_a[_e].destroyComponent();}this._p_tabpages.clear();this._p_tabpages=null;this._tabbuttonitems=null;this._prevbutton_size=null;this._nextbutton_size=null;this._show_button_cnt=0;};_pTab.on_create_contents_command=function(){var _a="";var _b=this._p_tabpages;var _c=_b.length;var _d=this._tabbuttonitems;var _e=_d.length;for(var _f=0;_f<_c;_f++ ){_a+=_b[_f].createCommand();}if(this._p_prevbutton){_a+=this._p_prevbutton.createCommand();}for(_f=0;_f<_e;_f++ ){_a+=_d[_f].createCommand();}if(this._p_nextbutton){_a+=this._p_nextbutton.createCommand();}return _a;};_pTab.on_attach_contents_handle=function(_a){var _b=this._p_tabpages;var _c=_b.length;var _d=this._tabbuttonitems;var _e=_d.length;if(this._p_nextbutton){this._p_nextbutton.attachHandle(_a);}if(this._p_prevbutton){this._p_prevbutton.attachHandle(_a);}for(var _f=0;_f<_c;_f++ ){_b[_f].attachHandle(_a);}for(_f=0;_f<_e;_f++ ){_d[_f].attachHandle(_a);}this._is_created=true;this.on_apply_tabindex(this._init_tabindex);this._rearrangeContents();for(var _f=0;_f<_c;_f++ ){_b[_f]._attachForm(_a);if(this._p_preload){_b[_f]._on_apply_url();}}this._init_tabindex=-1;};_pTab.on_change_containerRect=function(_a,_b){this._rearrangeContents();};_pTab._on_beforeclose=function(_a){if(!this._is_alive){return;}var _b,_c="";var _d=this._p_tabpages;var _e=_d.length;for(var _f=0;_f<_e;_f++ ){_b=_d[_f];_c=_b._on_beforeclose(_a);}return _c;};_pTab._on_bubble_beforeclose=function(_a,_b,_c,_d){var _e=this._getParentForm();if(_e&&_e._on_bubble_beforeclose){return _e._on_bubble_beforeclose(_a,_b,_c,_d);}return "";};_pTab._on_close=function(){if(!this._is_alive){return;}var _a;var _b=this._p_tabpages;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a=_b[_d];_a._on_close();}};_pTab._on_bubble_close=function(_a,_b,_c){var _d=this._getParentForm();if(_d&&_d._on_bubble_close){return _d._on_bubble_close(_a,_b,_c);}};_pTab._on_activate=function(){nexacro.Component.prototype._on_activate.call(this);var _a=this._p_tabpages[this._p_tabindex];if(_a&&_a._p_form){_a._p_form._on_activate();}return true;};_pTab._on_deactivate=function(){nexacro.Component.prototype._on_deactivate.call(this);var _a=this._p_tabpages[this._p_tabindex];if(_a&&_a._p_form){_a._p_form._on_deactivate();}return true;};_pTab.getOwnerFrame=function(){return this._getOwnerFrame();};_pTab.on_apply_prop_enable=function(_a){var _b=this._p_tabpages;var _c=_b.length;var _d;var _e=this._p_prevbutton;var _f=this._p_nextbutton;for(var _g=0;_g<_c;_g++ ){_d=_b[_g];_d._setEnable(_a);}if(_e){_e._setEnable(_a);}if(_f){_f._setEnable(_a);}};_pTab.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=null;var _e=this._getTabIndex();if(_a){if(this._accessibility_tabindex==_e){_d=this._child_list[_e];}else{this._accessibility_tabindex++ ;if(this._accessibility_tabindex<this._p_tabpages.length){_d=this._tabButtons[this._accessibility_tabindex];}else{this._accessibility_tabindex=-1;this._accessibility_is_next=true;_d=this.parent._searchNextTabFocus(this,undefined,undefined,3)[0];}}}else{if(this._accessibility_tabindex==_e){this._accessibility_tabindex-- ;_d=this._tabButtons[this._accessibility_tabindex];}else{this._accessibility_tabindex-- ;if(this._accessibility_tabindex>=0){if(this._accessibility_tabindex==_e){_d=this._child_list[_e];}else{_d=this._tabButtons[this._accessibility_tabindex];}}}}if(_d){_d._setAccessibilityNotifyEvent(_a);return true;}return false;};_pTab._resetScrollPos=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;if(!this._is_popup_control&&_g&&_g!=this){var _h=this._adjust_top;var _i=this._adjust_left;_c+=_h;_b+=_i;_e+=_h;_d+=_i;_g._resetScrollPos(this,_b,_c,_d,_e,_f);}};_pTab.set_multiline=function(_a){_a=nexacro._toBoolean(_a);if(this._p_multiline!=_a){this._p_multiline=_a;this.on_apply_multiline(_a);}};_pTab.on_apply_multiline=function(_a){this._rearrangeContents();};_pTab.set_tabindex=function(_a){if(isNaN(_a= +_a)||_a<-1){return;}var _b=parseInt(_a,10)|0;var _c=this._p_tabindex;if(_b!=_c){this._oldtabindex=_c;if(!this._is_created){this._init_tabindex=_b;}else{this.on_apply_tabindex(_b);this._rearrangeContents();}}};_pTab.on_apply_tabindex=function(_a){var _b=false;var _c=this._getForm();if(_c._getTabOrderFirst() instanceof nexacro.Tab&&this._p_parent._last_focused&&this._p_parent._last_focused.name==this._p_name){_b=true;}var _d=this._changeTabIndex(_a,_b);if(_d){this._last_focused=null;this._tabbutton_obj=this._tabbuttonitems[_a];if(this.enableevent&&this._is_created&&this._oldtabindex>-1){this.on_fire_onchanged(this,_a,this._oldtabindex);}this._rearrangeContents(-1);}};_pTab.set_focusacceptable=function(_a){var _b=nexacro._toBoolean(_a);if(this._p_focusacceptable!=_b){this._p_focusacceptable=_b;}};_pTab.set_usecontrolkey=function(_a){this._p_usecontrolkey=nexacro._toBoolean(_a);};_pTab.set_rotatetext=function(_a){this._p_rotatetext=_a;};_pTab.on_apply_rotatetext=function(_a){};_pTab.set_tabjustify=function(_a){_a=nexacro._toBoolean(_a);if(this._p_tabjustify!=_a){this._p_tabjustify=_a;this.on_apply_tabjustify(_a);}};_pTab.on_apply_tabjustify=function(_a){this._rearrangeContents();};_pTab.set_selectchangetype=function(_a){switch(_a){case "down":case "up":this._p_selectchangetype=_a;break;default:break;}};_pTab.set_tabposition=function(_a){var _b=nexacro._toString(this._p_tabposition);var _c=nexacro._toString(_a);switch(_c){case "left":case "top":case "right":case "bottom":if(_b!=_c){this._p_tabposition=_c;this.on_apply_tabposition(_c);}break;default:return;}};_pTab.on_apply_tabposition=function(_a){this._rearrangeContents();};_pTab.set_showextrabutton=function(_a){_a=nexacro._toBoolean(_a);if(this._p_showextrabutton!=_a){this._p_showextrabutton=_a;this.on_apply_showextrabutton(_a);}};_pTab.on_apply_showextrabutton=function(_a){this._rearrangeContents();};_pTab.set_showtabbuttonicon=function(_a){_a=nexacro._toBoolean(_a);if(this._p_showtabbuttonicon!=_a){this._p_showtabbuttonicon=_a;this.on_apply_showtabbuttonicon(_a);}};_pTab.on_apply_showtabbuttonicon=function(_a){this._rearrangeContents();};_pTab.set_preload=function(_a){_a=nexacro._toBoolean(_a);if(this._p_preload!=_a){this._p_preload=_a;this.on_apply_preload(_a);}};_pTab.on_apply_preload=function(_a){};_pTab._tabbuttongap=0;_pTab.set_tabbuttongap=function(_a){if(this._p_tabbuttongap!=_a){this._p_tabbuttongap=_a;this._tabbuttongap=!_a?0:parseInt(_a);if(this._tabbuttongap<0){this._tabbuttongap=0;}this._rearrangeContents();}};_pTab._tabbuttonstartgap=0;_pTab.set_tabbuttonstartgap=function(_a){if(this._p_tabbuttonstartgap!=_a){this._p_tabbuttonstartgap=_a;this._tabbuttonstartgap=!_a?0:parseInt(_a);if(this._tabbuttonstartgap<0){this._tabbuttonstartgap=0;}this._rearrangeContents();}};_pTab.set_usetabbutton=function(_a){};_pTab.set_tabbuttonwidth=function(_a){if(this._p_tabbuttonwidth!=_a){this._p_tabbuttonwidth=(_a===undefined)?_a:(parseInt(_a)|0);this._rearrangeContents();}};_pTab.set_tabbuttonheight=function(_a){if(this._p_tabbuttonheight!=_a){this._p_tabbuttonheight=(_a===undefined)?_a:(parseInt(_a)|0);this._rearrangeContents();}};_pTab.set_selectedtabbuttonwidth=function(_a){if(this._p_selectedtabbuttonwidth!=_a){this._p_selectedtabbuttonwidth=(_a===undefined)?_a:(parseInt(_a)|0);this._rearrangeContents();}};_pTab.set_selectedtabbuttonheight=function(_a){if(this._p_selectedtabbuttonheight!=_a){this._p_selectedtabbuttonheight=(_a===undefined)?_a:(parseInt(_a)|0);this._rearrangeContents();}};_pTab.set_extrabuttonsize=function(_a){_a=nexacro._toString(_a).replace(/\s+/," ").trim();if(this._p_extrabuttonsize==_a){return;}this._p_extrabuttonsize=_a;this._extrabutton_size=null;this._rearrangeContents();};_pTab.set_tabbuttoniconsize=function(_a){_a=nexacro._toString(_a).replace(/\s+/," ").trim();if(this._p_tabbuttoniconsize==_a){return;}this._p_tabbuttoniconsize=_a;this._tabbuttonicon_size=null;this._rearrangeContents();};_pTab.set_tabstyle=function(_a){var _b=nexacro._toString(this._p_tabstyle);var _c=nexacro._toString(_a);if(_c=="accordion"){this._bshow_tabpage_accordion=true;}else{this._bshow_tabpage_accordion=false;}switch(_c){case "normal":case "accordion":if(_b!=_c){this._p_tabstyle=_c;this.on_apply_tabstyle(_c);}break;default:return;}};_pTab.on_apply_tabstyle=function(_a){this._rearrangeContents();};_pTab.getParentContext=function(){return this._p_parent;};_pTab.addChild=function(_a,_b){this._addChild(_a,_b,false);};_pTab.insertTabpage=function(_a,_b,_c,_d,_e,_f){var _g=parseInt(_b)|0;var _h=this._p_tabpages;var _i=_h.length;var _j=this._tabbuttonitems;var _k;var _l;for(var _p=0;_p<_i;_p++ ){_k=this._p_tabpages[_p];if(_a==_k.id){return -1;}}_k=new nexacro.Tabpage(_a,this);_k._refobj=this;if(_d){_k.set_text(_d);}else{_k.set_text(_a);}if(_e){_k.set_tabbuttonwidth(_e);}if(_f){_k.set_tabbuttonheight(_f);}_k._preload=this.preload;_k.createComponent(false);if(_g>_i){_g=-1;}this.on_fire_canchange(this,this._p_tabindex,this._p_tabpages.length);if(this._is_canchange){_l=this._p_tabindex;if(this[_a]){if(this[_a]._p_name==_k._p_name){_k.destroy();return -1;}}var _m=_l>-1?_h[_l]:undefined;var _n=_l>-1?this._tabbuttonitems[_l]:undefined;if(_m&&_n){if(_m._p_enable){_n._changeStatus("enabled",true);}else{_n._changeStatus("disabled",true);}this._changeUserStatusAll(_n,false);_m.set_visible(false);}}if(_g==-1){this._p_tabindex=_g=this._p_tabpages.length;this._addChild(_a,_k);}else{for(_p=_i;_p>_g;_p-- ){_j[_p]=_j[_p -1];_j[_p]._tabindex+=1;}this._addChild(_a,_k,true,_g);if(this._is_canchange){this._p_tabindex=_g;}else{if(this._p_tabindex>=_g){this._p_tabindex=this._p_tabindex+1;}}}var _o;if(this._is_canchange){_o=this._tabbutton_obj=_j[_g]=this._createTabbutton(_g,_k,false);if(_c&&!this._p_preload){_k.set_url(_c);}_k.set_visible(true);this._changeUserStatusAll(_o,true);this._last_focused=null;}else{_o=_j[_g]=this._createTabbutton(_g,_k,false);this._changeUserStatusAll(_o,false);}this._rearrangeContents();if(this._p_enableevent&&this._is_canchange){this.on_fire_onchanged(this,this._p_tabindex,this._oldtabindex);}return _g;};_pTab.destroy=function(_a){if(!this._is_alive){return;}var _b=this._p_tabpages;if(_b&&_b.length>0){var _c=this._on_beforeclose();if(_b[0]._checkAndConfirmClose(_c)==false){return;}this._on_close();}return nexacro.Component.prototype.destroy.call(this,_a);};_pTab.removeTabpage=function(_a){var _b=parseInt(_a)|0;var _c=this._p_tabpages;var _d=_c.length;if(_d==0){return -1;}var _e,_f=0;if(_d>0){var _g=_c[_b];if(!_g){return -1;}var _h=_g._on_beforeclose();if(_g._checkAndConfirmClose(_h)==false){return -1;}if(_g==this._last_focused){this._last_focused=null;}_g._on_close();this[_g.id]=null;delete this[_g.id];_c.delete_item(_g.id);_g.destroy();_e=this._tabbuttonitems;var _i=_e[_b];if(_i!=undefined){if(_i==this._tabbutton_obj){this._tabbutton_obj=null;}if(_i==this._last_focused){this._last_focused=null;}_i.destroy();}_e.splice(_b,1);_f=_e.length;for(var _m=0;_m<_f;_m++ ){_e[_m]._tabindex=_m;}}var _j=false;if(this._p_tabindex==_b){_j=true;}if(_b!=0&&this._p_tabindex==_b&&this._p_tabindex==_f){this._p_tabindex=_b -1;}else if(this._p_tabindex>_b||_f==0){this._p_tabindex-=1;}var _k=_c[this._p_tabindex];if(_k){_k.set_visible(true);if(!this._p_preload){_k._on_apply_url();}if(_e){this._changeUserStatusAll(_e[this._p_tabindex],true);}if(this._p_enableevent&&_j){this.on_fire_onchanged(this,this._p_tabindex,this._oldtabindex);}}if(_f>0){var _l=this._getFirstTabbuttonIndex();if(nexacro._enableaccessibility){_l-=(_d-_f);}this._rearrangeContents(_l);}return 0;};_pTab.moveTabpage=function(_a,_b){var _c=this._p_tabpages;var _d=_c.length;if(_b<0||_d<=_b||_d<=_a||_a<0){return -1;}if(_a==_b){return -1;}var _e=this._p_tabindex;var _f=_c[_e];var _g=_f.id;var _h=_c[_a];var _i=this._tabbuttonitems;var _j=_i[_a];_c.delete_item(_a);_c.insert_item(_b,_h.id,_h);var _k;if(_a<_b){for(_k=_a+1;_k<_d;_k++ ){_i[_k -1]=_i[_k];_i[_k -1]._tabindex=_k -1;if(_k==_b){_i[_k]=_j;_i[_k]._tabindex=_k;break;}}}else{for(_k=_a;_k>_b;_k-- ){_i[_k]=_i[_k -1];_i[_k]._tabindex=_k;}_i[_b]=_j;_i[_b]._tabindex=_b;}for(_k=0;_k<_d;_k++ ){if(_g==_c[_k].id){this._p_tabindex=_k;}}this._rearrangeContents();return 0;};_pTab.getTabpageCount=function(){return this._p_tabpages.length;};_pTab.getIndex=function(_a,_b){var _c=this._getTabIndex(parseInt(_a,10),parseInt(_b,10));return _c;};_pTab.setContents=function(_a){var _b=this._setContents(_a);return _b;};_pTab.on_fire_user_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmousedown&&this.onmousedown._has_handlers){var _n=this._getRootComponent(_k);if(_k instanceof nexacro.Tabpage){_n=_k;}var _o=new nexacro.MouseEventInfo(_n,"onmousedown",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onmousedown._fireUserEvent(this,_o);}return false;};_pTab.on_fire_sys_onmousedown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmousedown&&this.onmousedown._has_handlers){var _n=this._getRootComponent(_k);if(_k instanceof nexacro.Tabpage){_n=_k;}var _o=new nexacro.MouseEventInfo(_n,"onmousedown",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onmousedown._fireSysEvent(this,_o);}return false;};_pTab.on_fire_user_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseup&&this.onmouseup._has_handlers){var _n=this._getRootComponent(_k);if(_k instanceof nexacro.Tabpage){_n=_k;}var _o=new nexacro.MouseEventInfo(_n,"onmouseup",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onmouseup._fireUserEvent(this,_o);}return false;};_pTab.on_fire_sys_onmouseup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onmouseup&&this.onmouseup._has_handlers){var _n=this._getRootComponent(_k);if(_k instanceof nexacro.Tabpage){_n=_k;}var _o=new nexacro.MouseEventInfo(_n,"onmouseup",_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onmouseup._fireSysEvent(this,_o);}return false;};_pTab._on_focus=function(_a,_b,_c,_d,_e,_f){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(!this._focusobj){this._setTabFocusObj(this);}};_pTab.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);if(_a===this){return;}if(_a==null&&_b==null){return;}this._focusobj=null;};_pTab.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=false;if(!this.onkeydown||(this.onkeydown&&!this.onkeydown.defaultprevented)){if(_a==nexacro.Event.KEY_TAB||_a==nexacro.Event.KEY_RIGHT||_a==nexacro.Event.KEY_LEFT||_a==nexacro.Event.KEY_BACKSPACE){if(this._keydown_filter(null,_a,_b,_c,_d,undefined,_e,_f,_g)){if(this._getWindow()._keydown_element){this._getWindow()._keydown_element._event_stop=true;}return true;}}else if(nexacro._enableaccessibility){if(_a==nexacro.Event.KEY_DOWN||_a==nexacro.Event.KEY_UP){if(this._keydown_filter(null,_a,_b,_c,_d,undefined,_e,_f,_g)){return true;}}}}_h=nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);return _h;};_pTab.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){if(this.onkeydown&&this.onkeydown._has_handlers){var _h=new nexacro.KeyEventInfo(this,"onkeydown",_b,_c,_d,_a,_e,_f,_g);return this.onkeydown._fireSysEvent(this,_h);}return false;};_pTab.on_fire_user_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){if(this.onkeyup&&this.onkeyup._has_handlers){var _h=new nexacro.KeyEventInfo(this,"onkeyup",_b,_c,_d,_a,_e,_f,_g);return this.onkeyup._fireUserEvent(this,_h);}return false;};_pTab.on_fire_sys_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){if(this.onkeyup&&this.onkeyup._has_handlers){var _h=new nexacro.KeyEventInfo(this,"onkeyup",_b,_c,_d,_a,_e,_f,_g);return this.onkeyup._fireSysEvent(this,_h);}return false;};_pTab.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){var _l=nexacro.Component.prototype.on_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);if(!this._p_visible||this._isEnable()==false){return _l;}this._is_changed_focus=false;if(_j&&((_j instanceof nexacro._TabButtonItemControl)||_j.parent instanceof nexacro._TabButtonItemControl)){var _m=this._tabbutton_obj;if(_m&&_m._p_name=="extrabutton"){if(this._tabbuttonitems[_m._tabindex]){this._tabbuttonitems[_m._tabindex]._setFocus();}}if(_m&&this.selectchangetype=="down"){var _n=_m._tabindex;var _o=this._p_tabindex;var _p=this._focusobj;var _q=this._changeTabIndex(_n,true,true);if(_q){if(this._p_enableevent&&_o!=this.tabindex){this.on_fire_onchanged(_m,_n,_o);}if(_p!=this._focusobj){this._is_changed_focus=true;}}this._rearrangeContents(-1);}}return _l;};_pTab.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(_l.name=="extrabutton"){var _n=_l._p_parent;var _o=_n._tabindex;if(_o>=0){if(this===_k){this.on_fire_onextrabuttonclick(_n,_o,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);}}}if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _p=new nexacro.TabMouseEventInfo(this,"onlbuttondown",this.tabindex,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onlbuttondown._fireUserEvent(this,_p);}return false;};_pTab.on_lbuttonup_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){var _l=nexacro.Component.prototype.on_lbuttonup_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);if(!this._p_visible||this._isEnable()==false){return _l;}if(_j&&((_j instanceof nexacro._TabButtonItemControl)||_j._p_parent instanceof nexacro._TabButtonItemControl)){if(this._tabbutton_obj&&this._p_selectchangetype=="up"){var _m=this._tabbutton_obj;var _n=_m._tabindex;var _o=this._p_tabindex;var _p=this._changeTabIndex(_n,true,true);if(_p){if(this._p_enableevent&&_o!=this._p_tabindex){this.on_fire_onchanged(_m,_n,_o);}}this._rearrangeContents(-1);}}};_pTab.on_touchend_basic_action=function(_a,_b,_c){var _d=nexacro.Component.prototype.on_touchend_basic_action.call(this,_a,_b,_c);var _e=this._getControlFromElement(_a._start_elem);if(_e){var _f;if(_e instanceof nexacro._TabExtraButtonControl){var _g=_e._p_parent;_f=_g._tabindex;var _h,_i,_j,_k,_l,_m;if(_b&&_b.length>0){_h=_b[0].screenx;_i=_b[0].screeny;_j=_b[0].canvasx;_k=_b[0].canvasy;_l=_b[0].clientx;_m=_b[0].clienty;}if(_f>=0){this.on_fire_onextrabuttonclick(_g,_f,"touch",null,null,null,_h,_i,_j,_k,_l,_m,this,_e);}var _n=this._p_tabindex;if(_n==_f){return _d;}else{_e=_e._p_parent;}}if(_e instanceof nexacro._TabButtonItemControl){this._tabbutton_obj=_e;var _o=this._tabbutton_obj;_f=_o._tabindex;var _p=this._p_tabindex;var _q=this._changeTabIndex(_f,true,true);if(_q){if(this._p_enableevent&&_p!=this._p_tabindex){this.on_fire_onchanged(_o,_f,_p);}}this._rearrangeContents(-1);}}return _d;};_pTab.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _o=new nexacro.TabMouseEventInfo(this,"onlbuttonup",this.tabindex,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);return this.onlbuttonup._fireUserEvent(this,_o);}return false;};_pTab.on_fire_user_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _o=new nexacro.TabMouseEventInfo(this,"onrbuttonup",this.tabindex,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);return this.onrbuttonup._fireUserEvent(this,_o);}return false;};_pTab.on_fire_user_onrbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var _n=new nexacro.TabMouseEventInfo(this,"onrbuttondown",this.tabindex,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onrbuttondown._fireUserEvent(this,_n);}return false;};_pTab.on_fire_onextrabuttonclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.onextrabuttonclick&&this.onextrabuttonclick._has_handlers){var _p=new nexacro.TabMouseEventInfo(this,"onextrabuttonclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,this,_o);return this.onextrabuttonclick._fireEvent(this,_p);}return true;};_pTab.on_notify_prevbutton_onclick=function(_a,_b){this._adjustSpinPosition(-1);};_pTab.on_notify_nextbutton_onclick=function(_a,_b){this._adjustSpinPosition(1);};_pTab.on_fire_canchange=function(_a,_b,_c){this._is_canchange=true;if(this.canchange&&this.canchange._has_handlers){var _d=new nexacro.TabIndexChangeEventInfo(_a,"canchange",_b,_c);this._is_canchange=this.canchange._fireCheckEvent(this,_d);return this._is_canchange;}return true;};_pTab.on_fire_onchanged=function(_a,_b,_c){if(this.onchanged&&this.onchanged._has_handlers){var _d=new nexacro.TabIndexChangeEventInfo(this,"onchanged",_b,_c);return this.onchanged._fireEvent(this,_d);}return true;};_pTab.on_apply_prop_cssclass=function(){var _a=this._p_nextbutton;if(_a){_a.on_apply_cssclass();}var _b=this._p_prevbutton;if(_b){_b.on_apply_cssclass();}var _c=this._tabbuttonitems;var _d=_c.length;var _e;for(_e=0;_e<_d;_e++ ){var _f=_c[_e];if(_f){_f.on_apply_cssclass();}}var _g=this._p_tabpages;var _h=_g.length;var _i;for(_e=0;_e<_h;_e++ ){_i=_g[_e];if(_i){_i.on_apply_cssclass();}}};_pTab.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);if(this._p_tabpages){for(var _c=0;_c<this._tabbuttonitems.length;_c++ ){var _a=this._p_tabpages[_c];_a.on_apply_prop_stringresource();var _b=this._tabbuttonitems[_c];_b.on_apply_prop_stringresource();}}};_pTab._destroy=function(_a){return this.destroyComponent(_a);};_pTab._createSpinButton=function(_a){if(!this._p_prevbutton){this._p_prevbutton=new nexacro.Button("prevbutton",0,0,0,0,null,null,null,null,null,null,this);this._p_prevbutton._setControl();this._p_prevbutton.createComponent(_a);this._p_prevbutton.set_accessibilityenable(false);this._p_prevbutton.set_visible(false);this._p_prevbutton._setEventHandler("onclick",this.on_notify_prevbutton_onclick,this);}this._createTabButtons(_a);if(!this._p_nextbutton){this._p_nextbutton=new nexacro.Button("nextbutton",0,0,0,0,null,null,null,null,null,null,this);this._p_nextbutton._setControl();this._p_nextbutton.createComponent(_a);this._p_nextbutton.set_accessibilityenable(false);this._p_nextbutton.set_visible(false);this._p_nextbutton._setEventHandler("onclick",this.on_notify_nextbutton_onclick,this);}};_pTab._createTabpages=function(_a){var _b=this._p_tabpages;var _c=_b.length;var _d;var _e=this._p_tabindex;for(var _f=0;_f<_c;_f++ ){_d=_b[_f];_d._refobj=this;_d._preload=this._p_preload;if(_e!=_f){_d.set_visible(false);}if(!_d._is_created){_d.createComponent(_a);}}};_pTab._createTabButtons=function(_a){var _b=this._p_tabpages;var _c=_b.length;if(_c<=0){return;}this._show_button_cnt=0;for(var _e=0;_e<_c;_e++ ){var _d=this._createTabbutton(_e,_b[_e],_a);this._tabbuttonitems.push(_d);}};_pTab._createTabbutton=function(_a,_b,_c){if(!_b){return null;}var _d=this._next_button_idx++ ;var _e=_b._p_text;var _f=_a;var _g=new nexacro._TabButtonItemControl("tabbutton_"+_d,0,0,1,1,null,null,null,null,null,null,this);_g.createComponent(_c);_g.set_text(_e);_g._tabindex=_f;_g._tabpage=_b;_b._tabbuttonitem=_g;return _g;};_pTab._getTabIndex=function(_a,_b){var _c=-1;var _d=this._p_tabpages.length;if(_d<=0){return _c;}if(_a<0||_b<0){return _c;}var _e=0,_f=0,_g=0,_h=0;var _i,_j;_i=this._tabbuttonitems;for(var _k=0;_k<_d;_k++ ){_j=_i[_k];if(_j.visible){_e=_j._position.left;_f=_j._position.top;_h=_f+_j._position.height;_g=_e+_j._position.width;if(_a>=_e&&_a<=_g&&_b>=_f&&_b<=_h){_c=_k;break;}}}return _c;};_pTab._isSpinButtonVisible=function(){return this._p_nextbutton._p_visible||this._p_prevbutton._p_visible;};_pTab._getPrevButtonSize=function(){if(!this._prevbutton_size){var _a=0;var _b=0;var _c=this._p_prevbutton._getCSSStyleValue("border");var _d=this._p_prevbutton._getCSSStyleValue("padding");if(_c){_a=_c.left._width+_c.right._width;_b=_c.top._width+_c.bottom._width;}if(_d){_a+=_d.left+_d.right;_b+=_d.top+_d.bottom;}var _e=this.prevbutton._getCSSStyleValue("icon");if(_e instanceof Object){_e=_e.value;}this._prevbutton_size={width:0,height:0};this._prevbutton_extrasize={width:_a,height:_b};if(!_e){var _f=this._default_spinbutton_size;this._prevbutton_size.width+=_f.width;this._prevbutton_size.height+=_f.height;}else{var _g=nexacro._getImageSize(_e,this._onload_prevbutton_iconimage,this);if(_g){this._prevbutton_size.width=this._prevbutton_extrasize.width+_g.width;this._prevbutton_size.height=this._prevbutton_extrasize.height+_g.height;}else{return null;}}}return this._prevbutton_size;};_pTab._getNextButtonSize=function(){if(!this._nextbutton_size){var _a=0;var _b=0;var _c=this._p_nextbutton._getCSSStyleValue("border");var _d=this._p_nextbutton._getCSSStyleValue("padding");if(_c){_a=_c.left._width+_c.right._width;_b=_c.top._width+_c.bottom._width;}if(_d){_a+=_d.left+_d.right;_b+=_d.top+_d.bottom;}var _e=this._p_nextbutton._getCSSStyleValue("icon");if(_e instanceof Object){_e=_e.value;}this._nextbutton_size={width:0,height:0};this._nextbutton_extrasize={width:_a,height:_b};if(!_e){var _f=this._default_spinbutton_size;this._nextbutton_size.width+=_f.width;this._nextbutton_size.height+=_f.height;}else{var _g=nexacro._getImageSize(_e,this._onload_nextbutton_iconimage,this);if(_g){this._nextbutton_size.width=this._nextbutton_extrasize.width+_g.width;this._nextbutton_size.height=this._nextbutton_extrasize.height+_g.height;}else{return null;}}}return this._nextbutton_size;};_pTab._getTabpageBorder=function(){var _a;var _b=this._p_tabpages.length;var _c;if(_b>0){_c=this._p_tabpages[0];_a=_c._getCSSStyleValue("border");}return _a;};_pTab._addChild=function(_a,_b,_c,_d){if(_a&&_a.length<=0){return -1;}if(!_b){return -1;}if(this[_a]){return -1;}if(!(_b instanceof nexacro.Tabpage)){return -1;}_b._refform=this;if(!_b.id){_b.id=_b.name=_a;}else{_b.id=_a;}this[_a]=_b;if(_c&&_d>=0){this._p_tabpages.insert_item(_d,_a,_b);}else{this._p_tabpages.add_item(_a,_b);}if(this._p_preload||(this._init_tabindex>=0&&this._p_tabpages[this._init_tabindex]==_b)){_b._on_apply_url();}if(!_b._url){var _e=_b._p_form;if(_e){_e._is_loaded=true;}}};_pTab._getFirstTabbuttonIndex=function(){var _a=this._tabbuttonitems;var _b=_a.length;var _c;var _d=-1;for(var _e=0;_e<_b;_e++ ){_c=_a[_e];if(_c._p_visible){_d=_e;break;}}return _d;};_pTab._adjustSpinPosition=function(_a){var _b=this._tabbuttonitems.length;var _c=parseInt(_a);var _d=this._getFirstTabbuttonIndex();if(_d>=0){_c+=_d;}if(_c<0){_c=0;}if(_c>=_b){_c=_b -1;}this._rearrangeContents(_c);};_pTab._changeTabIndex=function(_a,_b,_c){var _d= +_a;if(this._p_tabstyle=="normal"){if(!this._is_created||this._p_tabindex==_a||(_d!=_d)||_a<0||(this._p_tabpages&&_a>=this._p_tabpages.length)){return;}}var _e=this._p_tabindex;if(_e>-1&&this._p_enableevent){var _f=this.on_fire_canchange(this,_a,_e);if(_f==false){this._changeUserStatusAll(this._tabbuttonitems[_a],false);return false;}}var _g=_e>-1?this._p_tabpages[_e]:undefined;var _h=this._p_tabpages[_a];var _i=_e>-1?this._tabbuttonitems[_e]:undefined;var _j=this._tabbuttonitems[_a];if(this._p_tabstyle=="accordion"){if(_e==_a){if(!this._bshow_tabpage_accordion){this._bshow_tabpage_accordion=true;}else if(this._bshow_tabpage_accordion){this._bshow_tabpage_accordion=false;_a=-1;_h=undefined;}}else{if(_a==-1){this._bshow_tabpage_accordion=false;}else if(_a>-1){this._bshow_tabpage_accordion=true;}}}if(_g&&_i){if(_g.enable){_i._changeStatus("enabled",true);}else{_i._changeStatus("disabled",true);}if(_i.visible){this._changeUserStatusAll(_i,false);if(_c){if(_a>-1){_i._changeStatus("mouseover",false);}}}_g.set_visible(false);}this._oldtabindex=_e;this._p_tabindex=_a;if(_h){if(!_h._p_visible){_h.set_visible(true);}if(!this._p_preload){_h._on_apply_url(false);}if(!_j._p_visible){_j.set_visible(true);}this._changeUserStatusAll(_j,true);if(_b){_j._on_focus(true);}if(_h._p_enable){_h._changeStatus("enabled",true);}else{_h._changeStatus("disabled",true);}}else{if(this._p_tabstyle=="accordion"){if(_a==-1||_e==_a){_i._changeStatus("focused",false);return true;}}if(_g&&_i){if(_i._p_enable){_i._changeStatus("focused",true);}else{_i._changeStatus("disabled",true);}this._changeUserStatusAll(_i,true);_g.set_visible(true);}}return true;};_pTab._adjustTabButtonPosition=function(_a,_b,_c,_d,_e){var _f=this._p_tabindex;var _g=this._p_tabposition;var _h=this._p_multiline;var _i=_b._position;var _j,_k;if(_g=="top"||_g=="bottom"){_j=_i.left;_k=_j+_i.width;}else{_j=_i.top;_k=_j+_i.height;}this._show_button_cnt=0;if(!_h&&_k>_d){_b.set_visible(false);}else{_b.set_visible(this._p_usetabbutton);if(_f!=_b._tabindex){this._changeUserStatusAll(_b,false);}}if(_b._p_visible){if(!_h&&_b._tabindex<_a){_b.set_visible(false);_k=_j;}}return _k;};_pTab._rearrangeContents=function(_a){if(!this._is_created){return;}if(this._p_tabstyle=="accordion"){this._rearrangeContentsForAccrdion(_a);return;}var _b=this._p_tabposition;var _c=this._p_multiline;var _d=this._p_tabjustify;var _e=this._p_showextrabutton;var _f;var _g=0;var _h=0;var _i=this._p_showtabbuttonicon;var _j;var _k=0;var _l=0;if(_e){if(!this._extrabutton_size){_f=this._getExtraButtonSize();if(_f){if(_f.width!=0||_f.height!=0){this._extrabutton_size=_f;}_g=_f.width;_h=_f.height;}}else{_g=this._extrabutton_size.width;_h=this._extrabutton_size.height;}}if(_i){if(!this._tabbuttonicon_size){_j=this._getTabButtonIconSize();if(_j){if(_j.width!=0||_j.height!=0){this._tabbuttonicon_size=_j;}_k=_j.width;_l=_j.height;}}else{_k=this._tabbuttonicon_size.width;_l=this._tabbuttonicon_size.height;}}var _m=this._p_tabindex;var _n=false;var _o;var _p;var _q;var _r;var _s=false;var _t=false;var _u={left:0,top:0,width:0,height:0};var _v=0;var _w=0;var _x=0;var _y=0;var _z=this._tabbuttonitems;var _aa=_z.length;var _ab;var _ac,_ad;var _ae=this._getClientWidth();var _af=this._getClientHeight();var _ag=this._p_tabpages;var _ah=_ag.length;var _ai;var _aj=this._getTabpageBorder();var _ak=0,_al=0,_am=0,_an=0;if(_aj){if(_aj.left){_ak=_aj.left._width;}if(_aj.top){_al=_aj.top._width;}if(_aj.right){_am=_aj.right._width;}if(_aj.bottom){_an=_aj.bottom._width;}}var _ao=_ae;var _ap=_af;if(_ao<=0||_ap<=0){return;}_u.width=_ae;_u.height=_af;var _aq=this._p_tabbuttonwidth;var _ar=this._p_tabbuttonheight;var _as=this._p_selectedtabbuttonwidth;var _at=this._p_selectedtabbuttonheight;this._setTabButtonItemsSizeInfo();var _au=this._getTabbuttonItemsMaxSize();var _av=_au[0];var _aw=_au[1];var _ax=0;var _ay=0;var _az=false;var _ba=false;var _bb=false;var _bc;for(_bc=0;_bc<_aa;_bc++ ){_ab=_z[_bc];_ai=_ab._tabpage;_ac=_ab._sizeinfo;_ad=_ab._position;var _bd=_ac.width;var _be=_ac.height;var _bf=_ai._p_tabbuttonwidth;var _bg=_ai._p_tabbuttonheight;var _bh=undefined;var _bi=undefined;if(!_c){if(_d){if(_b=="top"||_b=="bottom"){if(_ar!==undefined){_bi=_ar;}if(_bg!==undefined){_bi=_bg;}if(_ab._tabindex==_m){if(_at!==undefined){_bi=_at;}}}else{if(_aq!==undefined){_bh=_aq;}if(_bf!==undefined){_bh=_bf;}if(_ab._tabindex==_m){if(_as!==undefined){_bh=_as;}}}}else{if(_aq!==undefined){_bh=_aq;}if(_ar!==undefined){_bi=_ar;}if(_bf!==undefined){_bh=_bf;}if(_bg!==undefined){_bi=_bg;}if(_ab._tabindex==_m){if(_as!==undefined){_bh=_as;}if(_at!==undefined){_bi=_at;}}}}if(_e){if(!_bh){if(_g){_bd+=_g;}else{_bd+=_av;}}}if(_i){if(!_bh){if(_k){_bd+=_k;}else{_bd+=_av;}}}if(_bh!==undefined){if(_bh<0){_bd=0;}else{_bd=_bh;}}if(_bi!==undefined){if(_bi<0){_be=0;}else{_be=_bi;}}if(_b=="top"||_b=="bottom"){_ad.width=_bd;if(_bi===undefined){_ad.height=_aw;}else{_ad.height=_bi;}}else{if(_bh===undefined){_ad.width=_av;}else{_ad.width=_bh;}if(!_d){if(_aw>_be){_be=_aw;}}_ad.height=_be;}_ab._line_index=0;_v+=_bd;_w+=_be;_ba=((_bc+1)==_aa);if(_b=="top"||_b=="bottom"){_bb=_v>_ao;}else{_bb=_w>_ap;}if(_bb||_ba){if(!_c&&_bb&&!_n){_n=true;_q=this._getPrevButtonSize();_r=this._getNextButtonSize();if(!_q||!_r){return;}if(_b=="top"||_b=="bottom"){_ao-=(_q.width+_r.width);if(_q.height>_aw||_r.height>_aw){_aw=(_q.height>_r.height)?_q.height:_r.height;}}else{_ap-=(_q.height+_r.height);if(_q.width>_av||_r.height>_av){_av=(_q.width>_r.width)?_q.width:_r.width;}}_bc=-1;_x=0;_v=0;_w=0;continue;}if(_bb){_ay=_bc;_v-=_bd;_w-=_be;_az=true;}else{_ay=_bc+1;}if(_n&&_d){_d=false;_bc=-1;_x=0;_v=0;_w=0;continue;}if(_d||(_c&&_az)){var _bj=_ao-_v;var _bk=_ap-_w;var _bl=0;if(_b=="top"||_b=="bottom"){_bl=_bj;}else{_bl=_bk;}var _bm=1;for(var _bx=_ax;_bx<_ay;_bx++ ){_ab=_z[_bx];if(_c){_ab._line_index=_x;}else{_ab._line_index=0;}_ad=_ab._position;if(_b=="top"||_b=="bottom"){_bm=_ad.width/_v;if((_bx+1)==_ay){_ad.width+=_bl;}else{_ad.width+=Math.ceil(_bj* _bm);}_bl-=Math.ceil(_bj* _bm);}else{_bm=_ad.height/_w;if((_bx+1)==_ay){_ad.height+=_bl;}else{_ad.height+=Math.ceil(_bk* _bm);}_bl-=Math.ceil(_bk* _bm);}}}if(_ay==_aa||_ax==_ay){break;}_v=0;_w=0;_ax=_bc;_x++ ;_bc-- ;continue;}}_y=_x+1;if(_a<0){_a=this._getFirstTabbuttonIndex();}if(_a==undefined||_a==null){var _bn=0;var _bo=0;for(_bc=_m;_bc>=0;_bc-- ){_ab=_z[_bc];_ad=_ab._position;_bn+=_ad.width;_bo+=_ad.height;if(_b=="top"||_b=="bottom"){if(_bn<=_ao&&_z[_bc].left>-1){_a=_bc;}else{break;}}else{if(_bo<=_ap&&_z[_bc].top>-1){_a=_bc;}else{break;}}}}var _bp=0;var _bq=0;var _br;var _bs=0;var _bt=0;if(_m>0){_ab=_z[_m];_bt=_ab._line_index;}for(_bc=0;_bc<_aa;_bc++ ){_ab=_z[_bc];_ad=_ab._position;_x=_ab._line_index;if(_c){_x=(_x-_bt);if(_x<0){_x+=_y;}}else{_x=0;}if(_b=="top"||_b=="bottom"){if(_bs!=_x){_bp=0;}if(_b=="top"){if(_c){_bq=_aw* (_y-_x -1);}else{_bq=_aw-_ad.height;}_ad.height+=_al;}else{if(_c){_bq=_ap-_aw* (_y-_x);}else{_bq=_ap-_aw;}_bq-=_an;}if(!_d&&!_c){if(_bc==0){_bp+=this._tabbuttonstartgap;}else if(_bc>0){_bp+=this._tabbuttongap;}}_ad.left=_bp;_ad.top=_bq;_bp=this._adjustTabButtonPosition(_a,_ab,_ae,_ao,_az,_c);if(nexacro._enableaccessibility){_t=true;if(_s||(!_c&&_bp>_ao)){_s=true;}}else{_br=_z[_bc -1];if(_s||(!_c&&_bp>_ao)){_s=true;}if(_ab._p_visible&&_br&&!_br._p_visible){_t=true;}}}else{if(_bs!=_x){_bq=0;}if(_b=="left"){if(_c){_bp=_av* (_y-(_x+1));}else{_bp=_av-_ad.width;}_ad.width+=_ak;}else{if(_c){_bp=_ao-_av* (_y-_x);}else{_bp=_ao-_av;}_bp-=_am;}if(!_d&&!_c){if(_bc==0){_bq+=this._tabbuttonstartgap;}else if(_bc>0){_bq+=this._tabbuttongap;}}_ad.left=_bp;_ad.top=_bq;_bq=this._adjustTabButtonPosition(_a,_ab,_af,_ap,_az);if(nexacro._enableaccessibility){_s=true;_t=true;}else{_br=_z[_bc -1];if(_s||(!_c&&_bq>_ap)){_s=true;}if(_ab._p_visible&&_br&&!_br._p_visible){_t=true;}}}_bs=_x;if(_c){_ab.set_visible(this._p_usetabbutton);if(_m!=_ab._tabindex){this._changeUserStatusAll(_ab,false);}}if(_bc==_m){this._changeUserStatusAll(_ab,true);}if(_ab._p_visible){_ab.move(_ad.left,_ad.top,_ad.width,_ad.height);_ab._showTabButtonIcon(_i,_k,(_l>_ad.height?_ad.height:_l));_ab._showExtraButton(_e,_g,(_h>_ad.height?_ad.height:_h));_ab.set_cssclass(_ab._tabpage.tabbuttoncssclass);}}var _bu=_y;if(!_c||_y<=1){_bu=1;}if(_b=="top"||_b=="bottom"){_u.height-=_aw* _bu;if(_b=="top"){_u.top+=_aw* _bu;}}else{_u.width-=_av* _bu;if(_b=="left"){_u.left+=_av* _bu;}}for(_bc=0;_bc<_ah;_bc++ ){_ai=_ag[_bc];_ai.move(_u.left,_u.top,_u.width,_u.height);if(_ai._p_form&&_ai._p_form._is_loaded==true&&(!_ai._p_url||_ai._p_url.length<=0)){_ai._p_form.resetScroll();}}_o=this._p_prevbutton;_p=this._p_nextbutton;if(!_n||!this._p_usetabbutton){_o.set_visible(false);_p.set_visible(false);}else{var _bv={left:0,top:0,width:0,height:0};var _bw={left:0,top:0,width:0,height:0};_bv.width=_r.width;_bv.height=_r.height;_bw.width=_q.width;_bw.height=_q.height;if(_b=="top"||_b=="bottom"){_bw.left=_ao;_bv.left=_bw.left+_bw.width;if(_b=="top"){_bw.top=_u.top-_q.height;_bv.top=_u.top-_r.height;}else{_bw.top=_u.height;_bv.top=_u.height;}}else{_bw.top=_ap;_bv.top=_bw.top+_bw.height;if(_b=="left"){_bw.left=_u.left-_q.width;_bv.left=_u.left-_r.width;}else{_bw.left=_u.width;_bv.left=_u.width;}}_o.move(_bw.left,_bw.top,_bw.width,_bw.height);_p.move(_bv.left,_bv.top,_bv.width,_bv.height);if(!_o._p_visible){_o.set_visible(true);}if(!_p._p_visible){_p.set_visible(true);}_o._setEnable(_t);_p._setEnable(_s);if(!_t){_o._changeStatus("mouseover",false);}if(!_s){_p._changeStatus("mouseover",false);}}};_pTab._rearrangeContentsForAccrdion=function(_a,_b){var _c=this._p_showextrabutton;var _d;var _e=0;var _f=0;var _g=this._p_showtabbuttonicon;var _h;var _i=0;var _j=0;if(_c){if(!this._extrabutton_size){_d=this._getExtraButtonSize();if(_d){if(_d.width!=0||_d.height!=0){this._extrabutton_size=_d;}_e=_d.width;_f=_d.height;}}else{_e=this._extrabutton_size.width;_f=this._extrabutton_size.height;}}if(_g){if(!this._tabbuttonicon_size){_h=this._getTabButtonIconSize();if(_h){if(_h.width!=0||_h.height!=0){this._tabbuttonicon_size=_h;}_i=_h.width;_j=_h.height;}}else{_i=this._tabbuttonicon_size.width;_j=this._tabbuttonicon_size.height;}}var _k=this._p_tabindex;var _l={left:0,top:0,width:0,height:0};var _m=0;var _n=0;var _o=this._tabbuttonitems;var _p=_o.length;var _q;var _r,_s;var _t=this._getClientWidth();var _u=this._getClientHeight();var _v=this._p_tabpages;var _w=_v.length;var _x;_l.width=_t;_l.height=_u;var _y=this._p_tabbuttonheight;var _z=this._p_selectedtabbuttonheight;this._setTabButtonItemsSizeInfo();var _aa;for(_aa=0;_aa<_p;_aa++ ){_q=_o[_aa];_x=_q._tabpage;_r=_q._sizeinfo;_s=_q._position;var _ab=_r.height;if(_y>0){_ab=_y;}_s.width=_t;if(_z>0&&_q._tabindex==_k){_s.height=_z;_m+=_z;}else{if((_y==undefined&&_z==undefined)){if(_ab<_f){_ab=_f;}if(_ab<_j){_ab=_j;}}_s.height=_ab;_m+=_ab;}_q._line_index=0;}var _ac=this._getFirstTabbuttonIndex();if(this._bshow_tabpage_accordion){if(this._p_fittocontents=="both"||this._p_fittocontents=="height"){for(_aa=_ac;_aa<_w;_aa++ ){if(_aa==_k){if(_z>0){_l.top+=_z;}else{_l.top+=_ab;}if(_x=_v[_aa]){var _ad=_x._on_getFitSize();_l.height=_ad[1];if(this._p_fittocontents=="both"){_l.width=_ad[0];}_x.move(_l.left,_l.top,_l.width,_l.height);if(_x._p_form&&_x._p_form._is_loaded==true&&(!_x._p_url||_x._p_url.length<=0)){_x._p_form.resetScroll();}if(this._p_fittocontents=="height"){var _ae=_x._p_form?_x._p_form._p_hscrollbar:null;if(_ae&&_ae._p_visible){_l.height+=_ae._adjust_height;_x.set_height(_l.height);}}}}else{_l.top+=_ab;}}}else{if(_z>0){_l.height-=_ab* (_w -1);_l.height-=_z;}else{_l.height-=_ab* _w;}for(_aa=_ac;_aa<_w;_aa++ ){if(_aa==_k){if(_z>0){_l.top+=_z;}else{_l.top+=_ab;}if(_x=_v[_aa]){if(this._p_fittocontents=="width"){var _ad=_x._on_getFitSize();_l.width=_ad[0];}_x.move(_l.left,_l.top,_l.width,_l.height);if(_x._p_form&&_x._p_form._is_loaded==true&&(!_x._p_url||_x._p_url.length<=0)){_x._p_form.resetScroll();}if(this._p_fittocontents=="width"){var _af=_x._p_form?_x._p_form._p_vscrollbar:null;if(_af&&_af._p_visible){_l.width+=_af._adjust_width;_x.set_width(_l.width);}}}}else{_l.top+=_ab;}}}}var _ag=0;var _ah=0;if(_k>0){_q=_o[_k];}for(_aa=0;_aa<_p;_aa++ ){_q=_o[_aa];_s=_q._position;if(_aa>0&&this._bshow_tabpage_accordion){if(_v[_aa -1]._p_visible){_ag+=_v[_aa -1]._adjust_height;}}_s.left=0;_s.top=_ag;_q.set_visible(this._p_usetabbutton);if(_k!=_q._tabindex){this._changeUserStatusAll(_q,false);}if(_q._p_visible){_ag=_s.top+_s.height;}if(_q._p_visible){_q.move(_s.left,_s.top,_s.width,_s.height);_q._showTabButtonIcon(_g,_i,(_j>_s.height?_s.height:_j));_q._showExtraButton(_c,_e,(_f>_s.height?_s.height:_f));_q.set_cssclass(_q._tabpage._p_tabbuttoncssclass);}if(this._bshow_tabpage_accordion){if(_aa===_k){this._changeUserStatusAll(_q,true);}}}if(_b==undefined){if(this._p_fittocontents=="both"||this._p_fittocontents=="width"){this.set_width(_l.width);}if(this._p_fittocontents=="both"||this._p_fittocontents=="height"){this.set_height(_m+_l.height);}}else{_b[0]=this._adjust_width;_b[1]=this._adjust_height;if(this._p_fittocontents=="width"||this._p_fittocontents=="both"){_b[0]=_l.width;}if(this._p_fittocontents=="height"||this._p_fittocontents=="both"){_b[1]=_m+_l.height;}}};_pTab._on_getFitSize=function(){if(this._bshow_tabpage_accordion){var _a=0;var _b=0;var _c=this._getCurrentStyleBorder();if(_c){_a+=_c._getBorderWidth();_b+=_c._getBorderHeight();}var _d=this._getCurrentStylePadding();if(_d){_a+=_d.left+_d.right;_b+=_d.top+_d.bottom;}var _e=[0,0];this._rearrangeContentsForAccrdion(null,_e);_e[0]+=_a;_e[1]+=_b;return _e;}else{return [this._adjust_width,this._adjust_height];}};_pTab._getExtraButtonSize=function(){var _a,_b,_c;if(this._p_extrabuttonsize){_a=this._p_extrabuttonsize.split(" ");_b= +_a[0];if(!isNaN(_b)){_c= +_a[1];if(isNaN(_c)){_c=_b;}return {width:_b,height:_c};}}var _d=this._tabbuttonitems?this._tabbuttonitems[0]:null;if(!_d){return null;}return _d._getExtraButtonSize(this._p_showextrabutton);};_pTab._getTabButtonIconSize=function(){var _a,_b,_c;if(this._p_tabbuttoniconsize){_a=this._p_tabbuttoniconsize.split(" ");_b= +_a[0];if(!isNaN(_b)){_c= +_a[1];if(isNaN(_c)){_c=_b;}return {width:_b,height:_c};}}var _d=this._tabbuttonitems?this._tabbuttonitems[0]:null;if(!_d){return null;}return _d._getTabButtonIconElementSize(this._p_showtabbuttonicon);};_pTab._getTabbuttonItemsMaxSize=function(){var _a=this._tabbuttonitems;var _b=_a.length;var _c,_d;var _e=0;var _f=0;var _g=this._p_showextrabutton;var _h=this._p_showtabbuttonicon;var _i=0,_j=0;var _k=this._p_tabindex;var _l=this._p_multiline;var _m=this._p_tabjustify;var _n=this._p_tabposition;var _o=this._p_tabbuttonwidth;var _p=_l?undefined:this._p_tabbuttonheight;var _q=this._p_selectedtabbuttonwidth;var _r=this._p_selectedtabbuttonheight;var _s,_t;var _u,_v;var _w=0;var _x=0;var _y;for(var _ab=0;_ab<_b;_ab++ ){_c=_a[_ab];_y=_c._tabpage;_d=_c._sizeinfo;if(_d){_i=_d.width;_j=_d.height;}_s=_y._p_tabbuttonwidth;_t=_y._p_tabbuttonheight;_u=0;_v=0;if(!_l){if(_m){if(_n=="top"||_n=="bottom"){if(_p){_v=_p;}if(_t){_v=_t;}if(_c._tabindex==_k){if(_r){_v=_r;}}}else{if(_o){_u=_o;}if(_s){_u=_s;}if(_c._tabindex==_k){if(_q){_u=_q;}}}}else{if(_o){_u=_o;}if(_p){_v=_p;}if(_s){_u=_s;}if(_t){_v=_t;}if(_c._tabindex==_k){if(_q){_u=_q;}if(_r){_v=_r;}}}}if(_v>_x){_x=_v;}if(_u>_w){_w=_u;}if(_o){_i=_o;}if(_p){_j=_p;}if(_j>_f){_f=_j;}if(_i>_e){_e=_i;}}if(_g){var _z=this._extrabutton_size;if(_z){if(!_x&&_z.height>_f){_f=_z.height;}if(!_o){_e+=_z.width;}}else{if(!_o){_e+=_f;}}}if(_h){var _aa=this._tabbuttonicon_size;if(_aa){if(!_x&&_aa.height>_f){_f=_aa.height;}if(!_o){_e+=_aa.width;}}else{if(!_o){_e+=_f;}}}if(_w>_e){_e=_w;}if(_x>_f){_f=_x;}return [_e,_f];};_pTab._setTabButtonItemsSizeInfo=function(){var _a=this._tabbuttonitems;var _b=_a.length;var _c;var _d;for(var _e=0;_e<_b;_e++ ){_c=_a[_e];_d=_c._getItemSize();if(_d){_c._sizeinfo.width=_d[0];_c._sizeinfo.height=_d[1];}}};_pTab._on_get_extrabutton_iconsize=function(_a,_b){this._extrabutton_size=null;this._rearrangeContents();};_pTab._on_get_tabbutton_iconsize=function(_a,_b){this._tabbuttonicon_size=null;this._rearrangeContents();};_pTab._onload_prevbutton_iconimage=function(_a,_b,_c){if(this._prevbutton_size){if(_b==0||_c==0){var _d=this._default_spinbutton_size;_b=_d.width;_c=_d.height;}this._prevbutton_size.width=this._prevbutton_extrasize.width+_b;this._prevbutton_size.height=this._prevbutton_extrasize.height+_c;}this._rearrangeContents();};_pTab._onload_nextbutton_iconimage=function(_a,_b,_c){if(this._nextbutton_size){if(_b==0||_c==0){var _d=this._default_spinbutton_size;_b=_d.width;_c=_d.height;}this._nextbutton_size.width=this._nextbutton_extrasize.width+_b;this._nextbutton_size.height=this._nextbutton_extrasize.height+_c;}this._rearrangeContents();};_pTab._keydown_filter=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=this._p_tabpages.length;if(_j<=0){return false;}var _k=this._p_tabindex;var _l=this._p_tabindex;var _m=-1;var _n,_o=[],_p;var _q,_r;var _s,_t;var _u;var _v=this._isComponentKeydownAction();switch(_b){case 9:if(_d==true&&this._p_usecontrolkey){if(_e!=true){if(_k<_j -1){_m=_k+1;}else{_m=0;}}else{if(_k>0){_m=_k -1;}else{_m=_j -1;}}if(this._focusobj instanceof nexacro._TabButtonItemControl){this._setTabFocusObj(this._tabbuttonitems[_m]);}else if(this._focusobj instanceof nexacro.Tabpage){this._setTabFocusObj(this.tabpages[_m]);}break;}else{var _w;if(this._focusobj instanceof nexacro.Tab){var _x;var _y;var _z;var _aa;if(_e==false){if(this.focusacceptable){this._setTabFocusObj(this._tabbuttonitems[_k]);this._tabbuttonitems[_k]._setFocus(false,0);}else{_q=this._p_tabpages[_k];_r=_q._p_form;_s=_r._getTabOrderFirst();if(_s){if(_r._last_focused){_aa=this._getWindow();_aa._removeFromCurrentFocusPath(_r._last_focused);}_s._setFocus(false,0);this._setTabFocusObj(_q);}else{_w=this._p_parent._searchNextTabFocus(this,null,null,0);if(_w){if(_w[0]==null){if(_w[2]==1){_x=nexacro.getEnvironment();if(_x){_y=_x._p_accessibilitylastovertext;_z=this._control_element;_z.notifyAccessibility(_y,"notify",true);}}else if(_w[2]==-1){_x=nexacro.getEnvironment();if(_x){_y=_x._p_accessibilityfirstovertext;_z=this._control_element;_z.notifyAccessibility(_y,"notify",true);}}}else{if(_w[0] instanceof nexacro.Form&&_w[0]._last_focused){_aa=this._getWindow();_aa._removeFromCurrentFocusPath(_w[0]._last_focused);}_w[0]._setFocus(true,1,true);}}}}}else{_w=this._p_parent._searchPrevTabFocus(this);if(_w){if(_w[0]==null){if(_w[2]==1){_x=nexacro.getEnvironment();if(_x){_y=_x._p_accessibilitylastovertext;_z=this._control_element;_z.notifyAccessibility(_y,"notify",true);}}else if(_w[2]==-1){_x=nexacro.getEnvironment();if(_x){_y=_x._p_accessibilityfirstovertext;_z=this._control_element;_z.notifyAccessibility(_y,"notify",true);}}}else{if(_w[0] instanceof nexacro.Form&&_w[0]._last_focused){_aa=this._getWindow();_aa._removeFromCurrentFocusPath(_w[0]._last_focused);}_w[0]._setFocus(true,1,true);}}}}else if(this._focusobj instanceof nexacro._TabButtonItemControl){if(_e==false){_w=this._searchNextTabFocus(this._focusobj,false,false,0);if(_w&&_w[0]){_w[0]._setFocus(true,0,true);}this._setTabFocusObj(_w[0]);}else{_w=this._searchPrevTabFocus(this._focusobj,false,false,0);if(_w&&_w[0]){_w[0]._setFocus(true,0,true);}}}else if(this._focusobj instanceof nexacro.Tabpage){if(!this._p_focusacceptable&&!_v){return false;}_q=this._focusobj;_r=_q._p_form;_t=_r._getLastFocused();_s=_r._getTabOrderFirst(0);if(_e==false){if(_t){_n=this._focusobj._p_form._searchNextTabFocus(_t,undefined,undefined,0);if(_n&&_n[0]){_n[0]._setFocus(true,0,true);}}else if(_s){_s._setFocus(true,0,true);}else{_n=this._p_parent._searchNextTabFocus(this,undefined,undefined,0);if(_n&&_n[0]){_n[0]._setFocus(true,0,true);}}}else{if(!_t||_t==_s){if(this._p_focusacceptable){_o.push(this._tabbuttonitems[_k]);}else{_o=this._p_parent._searchPrevTabFocus(this,undefined,undefined,0);}if(_o[0]){_o[0]._setFocus(true,1,true);}}else{_n=this._focusobj.form._searchPrevTabFocus(_t,undefined,undefined,0);if(_n&&_n[0]){_n[0]._setFocus(true,0,true);}}}}return true;}case 8:if(_d==true&&this._p_usecontrolkey){this.on_fire_onextrabuttonclick(this,_k,"",false,false,false,-1,-1,-1,-1,-1,-1,this,this);return true;}break;case 38:{if(nexacro._enableaccessibility&&_v){_u=this._focusobj;_p=null;if(_u instanceof nexacro.Tab){_p=this._p_parent._searchPrevTabFocus(_u,undefined,undefined,7+8);}else if(_u instanceof nexacro._TabButtonItemControl){if(this._isAccessibilityEnable()){_o=this;}else{_p=this._p_parent._searchPrevTabFocus(this,undefined,undefined,7+8);}}else if(_u instanceof nexacro.Tabpage){_r=_u._p_form;_t=_r._getLastFocused();if(!_d){if(_t){_n=_r._searchPrevTabFocus(_t,undefined,undefined,7+8);if(_n&&_n[0]){_o=_n[0];}}else{if(this._p_focusacceptable){_o=this._tabbuttonitems[_u._p_parent._p_tabindex];}else{if(!this._isAccessibilityEnable()){_p=this._p_parent._searchPrevTabFocus(this,undefined,undefined,7+8);if(_p&&_p[0]){_o=_p[0];}}else{_o=this;}}}}}if(_p&&_p[0]){_o=_p[0];_o._setFocus(true,3,true);}else{if(_o&&!(_o instanceof Array)){_o._setFocus(true,3,true);this._setTabFocusObj(_o);}}return true;}}break;case 40:{if(nexacro._enableaccessibility&&_v){_u=this._focusobj;_p=null;if(_u instanceof nexacro.Tab){if(this.focusacceptable){_o=this._tabbuttonitems[this._p_tabindex];}else{_o=this._p_tabpages[this._p_tabindex];_r=_o._p_form;if(_r._last_focused){_r._last_focused=null;}if(!_o._isAccessibilityEnable()){_p=_r._searchNextTabFocus(_u._last_focused,false,false,7+8);}}}else if(_u instanceof nexacro._TabButtonItemControl){_q=this._p_tabpages[this._p_tabindex];_r=_q._p_form;if(_r._last_focused){_r._last_focused=null;}if(!_q._isAccessibilityEnable()){_p=_r._searchNextTabFocus(null,true,false,7+8);if(!_p){_n=this._p_parent._searchNextTabFocus(this,undefined,undefined,7+8);if(_n&&_n[0]){_n[0]._setFocus(true,2,true);}}}else{_o=_q;}}else if(_u instanceof nexacro.Tabpage){_q=_u;_r=_q._p_form;_s=_r._getTabOrderFirst(7+8);_t=_r._getLastFocused();if(!_d&&!_c&&!_e){if(_t){_n=_r._searchNextTabFocus(_t,undefined,undefined,7+8);if(_n&&_n[0]){_n[0]._setFocus(true,2,true);}}else if(_s){_o=_s;}else{_p=this._p_parent._searchNextTabFocus(this,undefined,undefined,7+8);}}}if(_p&&_p[0]){_o=_p[0];_o._setFocus(true,2,true);}else{if(_o&&!(_o instanceof Array)){_o._setFocus(true,2,true);this._setTabFocusObj(_o);}}return true;}}break;case 39:if(this._p_focusacceptable&&_d==false&&_v){_u=this._focusobj;if(_u instanceof nexacro._TabButtonItemControl){if(_k<_j -1){_m=_k+1;}else{_m=0;}this._setTabFocusObj(this._tabbuttonitems[_m]);}}break;case 37:if(this._p_focusacceptable&&_d==false&&_v){_u=this._focusobj;if(_u instanceof nexacro._TabButtonItemControl){if(_k>0){_m=_k -1;}else{_m=_j -1;}this._setTabFocusObj(this._tabbuttonitems[_m]);}}break;default:break;}if(_m>-1){if(this._changeTabIndex(_m,true)==true){if(this._p_enableevent){this.on_fire_onchanged(this,_m,_l);}this._rearrangeContents();}}};_pTab._getDlgCode=function(_a,_b,_c,_d){var _e=this._focusobj;if(_e&&!(_e instanceof nexacro.Tab||_e instanceof nexacro._TabButtonItemControl||_e instanceof nexacro.Tabpage)){return _e._getDlgCode(_a,_b,_c,_d);}else{return {want_tab:true,want_return:false,want_escape:false,want_chars:false,want_arrows:this._isEnable()};}};_pTab._setTabFocusObj=function(_a){this._focusobj=_a;};_pTab._getTabFocusObj=function(){return this._focusobj;};_pTab._getComponentsByTaborder=function(_a,_b){if(_b===undefined){_b=4;}if(_a&&_a!==this){return nexacro.FormBase._getComponentsByTaborder.call(this,_a,_b);}if(!this._isEnable()){return null;}var _c=this._p_tabpages[this._p_tabindex];var _d=this._tabbuttonitems[this._p_tabindex];var _e;var _f=(this._p_focusacceptable&&_d)?[_d]:[];if((_b&4)||(_c&&_c._p_form._child_list&&_c._p_form._child_list.length>0)){_f.push(_c);}var _g=_f.length;for(var _h=0,_i=[];_h<_g;_h++ ){_e=_f[_h];if(!_e||!_e._is_created||!_e._p_visible||((_e._isEnable&&!_e._isEnable()||!_e._p_enable)&&!(_b&2))||_e._popup){continue;}if(!(_b&1)&&!_e.on_get_prop_tabstop()){continue;}_i[_i.length]=_e;}return _i;};_pTab._searchNextTabFocus=function(_a,_b,_c,_d){var _e=nexacro.FormBase.prototype._searchNextTabFocus.call(this,_a,_b,_c,_d);if(_e&&_b&&_e[0] instanceof nexacro.Tabpage){if(_e[0]._p_form._child_list==0&&!(_d&4)){return [this];}}return _e;};_pTab._searchPrevTabFocus=function(_a,_b,_c,_d){var _e=nexacro.FormBase.prototype._searchPrevTabFocus.call(this,_a,_b,_c,_d);if(_e&&_b){var _f=_e[0];if(_f instanceof nexacro.Tabpage){if(_f._p_form._child_list==0&&!(_d&4)){return [this];}}}return _e;};_pTab._getTabOrderNext=function(_a,_b,_c){var _d=this._tabbuttonitems[this._p_tabindex];var _e=this._p_tabpages[this._p_tabindex];if(nexacro._isNull(_c)){_c=4;}if(_b>0){if(_a===_e){return null;}else if(_a===_d){if(_c&4){return _e;}else{return _e._p_form._getTabOrderFirst(_c);}}}else{if(_a===_e&&this._p_focusacceptable){return _d;}else if(_a===_d){if(_c&4){return this;}}}return null;};_pTab._getTabOrderFirst=function(_a){return nexacro.FormBase.prototype._getTabOrderFirst.call(this,_a);};_pTab._getTabOrderLast=function(_a){return nexacro.FormBase.prototype._getTabOrderLast.call(this,_a);};_pTab._getControlFromElement=function(_a){var _b=null;var _c=_a;while(_c&&_c!==this){if(_c instanceof nexacro._TabButtonItemControl||_c instanceof nexacro._TabExtraButtonControl){return _c;}_c=_c._p_parent;}return _b;};_pTab._on_orientationchange=function(_a){var _b=this._p_tabpages[this._p_tabindex];if(_b){_b._on_orientationchange(_a);}};_pTab._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Tabpages")[0];if(!_c){return false;}var _d,_e;var _f,_g;var _h,_i;var _j=this._p_tabindex;for(_d=0,_e=this._p_tabpages.length;_d<_e;_d++ ){this.removeTabpage(0);}var _k=_c.getElementsByTagName("Tabpage");var _l;var _m;var _n={};var _o={};var _p;var _q;var _r;var _s={};var _t={};var _u,_v;for(_d=0;_d<_k.length;_d++ ){_l=_k[_d];_n={};_o={};for(_f=0,_g=_l.attributes.length;_f<_g;_f++ ){_h=_l.attributes[_f].name;_i=_l.attributes[_f].value;if(/^(id|text|)$/.test(_h)){_n[_h]=_i;}else{_o[_h]=_i;}}_m=new nexacro.Tabpage(_n["id"],this);_m._refobj=this;_m._preload=this._p_preload;_m.set_text(_n["text"]||_n["id"]);for(_h in _o){if(_m["set_"+_h]){_m["set_"+_h](_o[_h]);}else{_m[_h]=_o[_h];}}_m.createComponent(false);this._addChild(_n["id"],_m);if(!_o["url"]){_p=_l.getElementsByTagName("Layout")[0];if(!_p){continue;}_q=_p.firstChild;while(_q){if(_q.nodeType!=1){_q=_q.nextSibling;continue;}_u=nexacro._getRegisterClass(_q.tagName);if(!_u){return false;}_v=nexacro._executeGlobalEvalStr(_u);if(!_v){return false;}if(_v.prototype&&_v.prototype._is_component){_s={};_t={};for(_f=0;_f<_q.attributes.length;_f++ ){_h=_q.attributes[_f].name;_i=_q.attributes[_f].value;if(/^(id|left|top|width|height|right|bottom|minwidth|maxwidth|minheight|maxheight|)$/.test(_h)){_s[_h]=_i;}else{_t[_h]=_i;}}_r=new _v(_s["id"],_s["left"],_s["top"],_s["width"],_s["height"],_s["right"],_s["bottom"],_s["minwidth"],_s["maxwidth"],_s["minheight"],_s["maxheight"],_m.form);for(_h in _t){if(_r["set_"+_h]){_r["set_"+_h](_t[_h]);}else{_r[_h]=_t[_h];}}if(_q.firstChild){var _w=_q.firstChild;var _x="";while(_w){if(_w.nodeType==1){_x+=nexacro._documentToXml(_w);}_w=_w.nextSibling;}if(!_r._setContents(_x)){return false;}}_m.form.addChild(_r.id,_r);_r.show();}_q=_q.nextSibling;}}}if(this._is_created){this._createSpinButton(false);this.on_apply_tabindex(_j);this._rearrangeContents();}return true;};_pTab._applyMultiContainerScrollPos=function(){var _a=this._p_tabpages;var _b=_a.length;var _c=0;var _d;for(_c=_b -1;_c>=0;_c-- ){_d=_a[_c];if(_d&&_d._p_form){_d._p_form._applyScrollPos();}}};_pTab._changeUserStatusAll=function(_a,_b){if(_a){_a._changeUserStatus("selected",_b);_a._setAccessibilityStatSelected(_b);if(_a._tabbuttonitemicon){_a._tabbuttonitemicon._changeUserStatus("selected",_b);_a._tabbuttonitemicon._setAccessibilityStatSelected(_b);}if(_a._extrabutton){_a._extrabutton._changeUserStatus("selected",_b);_a._extrabutton._setAccessibilityStatSelected(_b);}}};_pTab._properties=[{name:"extrabuttonsize"},{name:"focusacceptable"},{name:"multiline"},{name:"nextbutton",readonly:true},{name:"preload"},{name:"prevbutton",readonly:true},{name:"roatatetext"},{name:"selectchangetype"},{name:"selectedtabbuttonheight"},{name:"selectedtabbuttonwidth"},{name:"showextrabutton"},{name:"showtabbuttonicon"},{name:"tabbuttongap"},{name:"tabbuttonheight"},{name:"tabbuttoniconsize"},{name:"tabbuttonstartgap"},{name:"tabbuttonwidth"},{name:"tabindex"},{name:"tabjustify"},{name:"tabpages",readonly:true},{name:"tabposition"},{name:"tabstyle"},{name:"usecontrolkey"},{name:"usetabbutton"}];nexacro._defineProperties(_pTab,_pTab._properties);delete _pTab;}if(!nexacro.Tabpage){nexacro.Tabpage=function(_a,_b){nexacro.Div.call(this,_a,0,0,0,0,null,null,null,null,null,null,_b);};var _pTabpage=nexacro._createPrototype(nexacro.Div,nexacro.Tabpage);nexacro.Tabpage.prototype=_pTabpage;_pTabpage._type_name="TabpageControl";_pTabpage._is_subcontrol=true;_pTabpage._p_accessibilityrole="tabpage";_pTabpage._p_tabbuttonwidth=undefined;_pTabpage._p_tabbuttonheight=undefined;_pTabpage._p_tabbuttoncssclass="";_pTabpage._preload=false;_pTabpage._tabbuttonitem=null;_pTabpage.bringToFront=nexacro._emptyFn;_pTabpage.bringToPrev=nexacro._emptyFn;_pTabpage.moveToNext=nexacro._emptyFn;_pTabpage.moveToPrev=nexacro._emptyFn;_pTabpage.sendToBack=nexacro._emptyFn;_pTabpage.sendToNext=nexacro._emptyFn;_pTabpage.on_attach_contents_handle=function(_a){};_pTabpage.on_created_contents=function(_a){if(this.parent&&this.parent instanceof nexacro.Tab){if(this.parent._is_created){this._createForm(_a);}}};_pTabpage._createForm=function(_a){var _b=this._p_form;if(!this._p_url){_b.on_created(_a);}else{if(!_b._url){if(this.parent&&this.parent instanceof nexacro.Tab&&this.parent.preload==false){}else{_b.loadForm(this._p_url,this._p_async,true,this._url);}}if(_b._is_loaded){if(!_b._is_created_contents&&!_b._is_created){_b.createComponent();}else{_b.on_created(_a);}}}if(this._isAccessibilityCotainerComponent()){var _c=_b.getFirstAccessibilityComponent();if(_c){_c._setAccessibilityDescriptionBy(this._unique_id);}}this.on_apply_text();this._recalcLayout();};_pTabpage._attachForm=function(_a){var _b=this._p_form;if(!this._p_url){_b.on_created(_a);}else{if(this._p_url&&_b._is_loaded){if(!_b._is_created_contents&&!_b._is_created){_b.createComponent();}else{_b.on_created(_a);}}}if(this._isAccessibilityCotainerComponent()){var _c=_b.getFirstAccessibilityComponent();if(_c){_c._setAccessibilityDescriptionBy(this._unique_id);}}this.on_apply_text();this._recalcLayout();};_pTabpage.on_apply_text=function(_a){var _b=this._p_parent;if(_b){var _c;if(_b._tabbuttonitems){var _d=_b._tabbuttonitems.length;for(var _e=0;_e<_d;_e++ ){_c=_b._tabbuttonitems[_e];if(_c._tabpage===this){_c.set_text(this._p_text);}}}_b._rearrangeContents();}};_pTabpage._getForm=function(){var _a=this._refform;if(_a instanceof nexacro.Tab){return _a._refform;}return this._refform;};_pTabpage.on_apply_prop_tooltip=function(){var _a=this.getElement();if(_a){var _b=this._getStringResourceProperty(this._p_tooltiptext);_a.setElementToolTip(_b?_b:this._p_tooltiptext);}this.on_apply_prop_accessibilitydescription();this._updateAccessibilityLabel();};_pTabpage.set_tabbuttonwidth=function(_a){this._p_tabbuttonwidth=(_a===null||_a===undefined)?undefined:parseInt(_a)|0;var _b=this._p_parent;if(_b){_b._rearrangeContents();}};_pTabpage.set_tabbuttonheight=function(_a){this._p_tabbuttonheight=(_a===null||_a===undefined)?undefined:parseInt(_a)|0;var _b=this._p_parent;if(_b){_b._rearrangeContents();}};_pTabpage.set_tabbuttoncssclass=function(_a){_a=nexacro._toString(_a);if(this._p_tabbuttoncssclass!=_a){this._p_tabbuttoncssclass=_a;}var _b=this._tabbuttonitem;if(_b){_b.set_cssclass(_a);}};_pTabpage._initControlElementNormalProps=function(){this._applyElementVisible(this._p_visible);this.on_apply_prop_rtl();this._registerHotkey();};_pTabpage.set_url=function(_a){if(_a&&_a.substring(0,4).toLowerCase()=="url("){_a=_a.substring(4,_a.length-1);}if(_a!=this._p_url){this._p_url=_a;if(this._p_parent._is_created==true){this._p_url=_a;this.on_apply_url();}}};_pTabpage._on_apply_url=function(){if(!this._is_loadedform&&!this._p_form._is_loading&&this._p_url&&this._p_url.length>0){this.on_apply_url(false);}};_pTabpage.set_semantictag=function(_a){if(this._p_semantictag!=_a){this._p_semantictag=_a;}};_pTabpage.getParentContext=function(){return this._p_parent.getParentContext();};_pTabpage.on_getIDCSSSelector=function(){return "tabpage";};_pTabpage.on_apply_prop_enable=function(_a){if(this._p_form){this._p_form._setEnable(_a);}var _b=this._tabbuttonitem;if(_b){_b._setEnable(_a);}};_pTabpage._on_focus=function(_a,_b,_c,_d,_e,_f){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(nexacro._enableAccessibility&&_e&&this._contains(_e)){this._setTabFocusObj(_e);}else{this._setTabFocusObj(this);}};_pTabpage.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);if(_a===this){return;}if(_a==null&&_b==null){return;}};_pTabpage.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){if(!this._p_enable||_a==nexacro.Event.KEY_TAB){return;}return nexacro.Div.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pTabpage.on_destroy_contents=function(){nexacro.Div.prototype.on_destroy_contents.call(this);this._tabbuttonitem=null;};_pTabpage.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=null;var _e=this._p_parent;var _f=_e._getTabIndex();var _g=_e._tabButtons.length;var _h=this._getWindow();var _i=_h._accessibility_last_focused_comp;if(_a){_d=this._searchNextTabFocus(_i,undefined,undefined,3)[0];if(_d._p_parent!=_b){_f++ ;_e._accessibility_tabindex=_f;_d=(_g>_f)?_e._tabButtons[_f]:_d;}}else{_d=this._searchPrevTabFocus(_i,undefined,undefined,true)[0];if(_d==_b){_d=_e._tabButtons[_f];}}if(_d){_d._setAccessibilityNotifyEvent(_a);return true;}return false;};_pTabpage._setAccessibilityNotifyEvent=function(_a){var _b=null;var _c=this._index;var _d=this._p_parent;var _e=_d._getTabIndex();if(_a){if(_c!=_e){_b=_d._tabButtons[_c];}else{_b=this._getTabOrderFirst(true,false);}}else{if(_c!=_e){_b=_d._tabButtons[_c];}else{_b=this._getTabOrderLast(true,false);}}if(_b){_b._setAccessibilityNotifyEvent(_a);}};_pTabpage._setTabFocusObj=function(_a){this._p_parent._focusobj=_a;};_pTabpage._getTabFocusObj=function(){return this._p_parent._getTabFocusObj();};_pTabpage._checkAndConfirmClose=function(_a){if(this._p_form){return this._p_form._checkAndConfirmClose(_a);}return true;};_pTabpage._properties=[{name:"tabbuttonwidth"},{name:"tabbuttonheight"},{name:"tabbuttoncssclass"},{name:"url"},{name:"semantictag"}];nexacro._defineProperties(_pTabpage,_pTabpage._properties);delete _pTabpage;}if(!nexacro._TabButtonItemControl){nexacro._TabButtonItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._sizeinfo={width:0,height:0};this._position={left:0,top:0,width:0,height:0};};var _pTabButtonItemControl=nexacro._createPrototype(nexacro.Component,nexacro._TabButtonItemControl);nexacro._TabButtonItemControl.prototype=_pTabButtonItemControl;_pTabButtonItemControl._type_name="TabButtonItemControl";_pTabButtonItemControl._is_subcontrol=true;_pTabButtonItemControl._use_selected_status=true;_pTabButtonItemControl._extrabutton=null;_pTabButtonItemControl._tabindex=-1;_pTabButtonItemControl._tabpage=null;_pTabButtonItemControl._extrabutton_iconsize=null;_pTabButtonItemControl._line_index=0;_pTabButtonItemControl._tabbuttonitemicon=null;_pTabButtonItemControl._tabbuttonitemicon_size=null;_pTabButtonItemControl._p_accessibilityrole="tabitem";_pTabButtonItemControl.on_created_contents=function(_a){if(this._tabbuttonitemtext){this._tabbuttonitemtext.on_created(_a);}if(this._tabbuttonitemicon){this._tabbuttonitemicon.on_created(_a);}if(this._extrabutton){this._extrabutton.on_created(_a);}};_pTabButtonItemControl.on_create_contents_command=function(_a){var _b="";if(this._tabbuttonitemtext){_b+=this._tabbuttonitemtext.createCommand();}if(this._tabbuttonitemicon){_b+=this._tabbuttonitemicon.createCommand();}if(this._extrabutton){_b+=this._extrabutton.createCommand();}return _b;};_pTabButtonItemControl.on_attach_contents_handle=function(_a){if(this._tabbuttonitemtext){this._tabbuttonitemtext.attachHandle(_a);}if(this._tabbuttonitemicon){this._tabbuttonitemicon.attachHandle(_a);}if(this._extrabutton){this._extrabutton.attachHandle(_a);}};_pTabButtonItemControl.on_destroy_contents=function(){if(this._tabbuttonitemtext){this._tabbuttonitemtext.destroy();this._tabbuttonitemtext=null;}if(this._tabbuttonitemicon){this._tabbuttonitemicon.destroy();this._tabbuttonitemicon=null;}if(this._extrabutton){this._extrabutton.destroy();this._extrabutton=null;}this._tabpage=null;this._extrabutton_iconsize=null;};_pTabButtonItemControl.on_apply_text=function(_a){var _b=this.getElement();if(_b){var _c=this._tabbuttonitemtext;var _d=0;var _e=0;if(this._extrabutton){_d=this._extrabutton._adjust_width;}if(this._tabbuttonitemicon){_e=this._tabbuttonitemicon._adjust_width;}var _f=this._getClientWidth()-_d-_e;var _g=this._getClientHeight();if(!_a){_a=this._displaytext;}if(!_c){_c=this._tabbuttonitemtext=new nexacro.Static("tabbuttonitemtext",0,0,_f,_g,null,null,null,null,null,null,this);_c._p_accessibilityenable=false;_c._setControl();_c.set_text(_a);_c.createComponent();}else{_c.set_text(_a);_c.move(_e,0,_f,_g,null,null);if(!_c._is_created){_c.on_created();}}}};_pTabButtonItemControl.on_changeStatus=function(_a,_b,_c,_d,_e){return _c;};_pTabButtonItemControl.on_changeUserStatus=function(_a,_b,_c,_d,_e){return _c;};_pTabButtonItemControl.on_apply_status=function(_a,_b){};_pTabButtonItemControl.on_change_containerRect=function(_a,_b){var _c=this._tabbuttonitemtext;if(_c){var _d=0;var _e=0;if(this._extrabutton){_d=this._extrabutton._getClientWidth();}if(this._tabbuttonitemicon){_e=this._tabbuttonitemicon._adjust_width;}var _f=this._getClientWidth()-_d-_e;var _g=this._getClientHeight();_c.move(_e,0,_f,_g,null,null);}};_pTabButtonItemControl.on_apply_prop_enable=function(_a){var _b=this._extrabutton;if(_b){_b._setEnable(_a);}var _c=this._tabbuttonitemtext;if(_c){_c._setEnable(_a);}var _d=this._tabbuttonitemicon;if(_d){_d._setEnable(_a);}};_pTabButtonItemControl.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){this._p_parent._tabbutton_obj=this;var _l=nexacro.Component.prototype.on_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);return _l;};_pTabButtonItemControl._on_focus=function(_a,_b,_c,_d,_e,_f){if(this._p_parent._p_tabindex!=this._tabindex){return;}var _g=this._getWindow();var _h=_g._getLastModalFrame();if(_h&&!_h._contains(this)){var _i=this._getParentForm();if(_i){_i._setLastFocus(this);}}else{if(!this._p_parent._is_changed_focus){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);this._setTabFocusObj(this);}}this._p_parent._is_changed_focus=false;};_pTabButtonItemControl._setTabFocusObj=function(_a){if(!this._is_alive){return;}this._p_parent._setTabFocusObj(_a);};_pTabButtonItemControl._getTabFocusObj=function(){if(!this._is_alive){return;}return this._p_parent._getTabFocusObj();};_pTabButtonItemControl.on_getIDCSSSelector=function(){return "tabbuttonitem";};_pTabButtonItemControl._onload_extra_iconimage=function(_a,_b,_c){if(!this._extrabutton_iconsize){this._extrabutton_iconsize={imageurl:_a,width:_b,height:_c};}else{var _d=this._extrabutton_iconsize;if(_d.imageurl!=_a||_d.width!=_b||_d.height!=_c){this._extrabutton_iconsize={imageurl:_a,width:_b,height:_c};}else{return;}}this._p_parent._on_get_extrabutton_iconsize(_b,_c);};_pTabButtonItemControl._onload_tabbutton_iconimage=function(_a,_b,_c){if(!this._tabbuttonitemicon_size){this._tabbuttonitemicon_size={imageurl:_a,width:_b,height:_c};}else{var _d=this._tabbuttonitemicon_size;if(_d.imageurl!=_a||_d.width!=_b||_d.height!=_c){this._tabbuttonitemicon_size={imageurl:_a,width:_b,height:_c};}else{return;}}this._p_parent._on_get_tabbutton_iconsize(_b,_c);};_pTabButtonItemControl._showExtraButton=function(_a,_b,_c){_a=nexacro._toBoolean(_a);if(_a){var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=_b||_e;var _g=_c||_e;var _h=_d-_f;var _i=(_e-_g)/2;var _j=_f;var _k=_g;if(!this._extrabutton){this._extrabutton=new nexacro._TabExtraButtonControl("extrabutton",0,0,0,0,null,null,null,null,null,null,this);this._extrabutton.createComponent();}else{if(!this._extrabutton.is_created){this._extrabutton.on_created(this._getWindow());}}this._extrabutton.move(_h,_i,_j,_k);}else{if(this._extrabutton){this._extrabutton.destroy();this._extrabutton=null;}}this.on_apply_text();};_pTabButtonItemControl._showTabButtonIcon=function(_a,_b,_c){_a=nexacro._toBoolean(_a);if(_a){var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=_b||_d;var _g=_c||_e;var _h=0;var _i=(_e-_g)/2;var _j=_f;var _k=_g;if(!this._tabbuttonitemicon){this._tabbuttonitemicon=new nexacro._TabButtonIconControl("tabbuttonitemicon",0,0,0,0,null,null,null,null,null,null,this);this._tabbuttonitemicon.createComponent();}else{if(!this._tabbuttonitemicon.is_created){this._tabbuttonitemicon.on_created(this._getWindow());}}this._tabbuttonitemicon.move(_h,_i,_j,_k);}else{if(this._tabbuttonitemicon){this._tabbuttonitemicon.destroy();this._tabbuttonitemicon=null;}}};_pTabButtonItemControl._getItemSize=function(){var _a=0;var _b=0;var _c=this._getCSSStyleValue("padding");var _d=this._getCSSStyleValue("border");var _e=0,_f=0,_g=0,_h=0;if(_c){_e=_c.left||0;_f=_c.right||0;_g=_c.top||0;_h=_c.bottom||0;}var _i=0;var _j=0;if(_d){_i=_d._getBorderWidth()||0;_j=_d._getBorderHeight()||0;}_a=_e+_f+_i;_b=_g+_h+_j;var _k=this._getItemTextSize();if(_k){_a+=_k[0];_b+=_k[1];}return [_a,_b];};_pTabButtonItemControl._getItemTextSize=function(){var _a=[0,0];if(!this._tabbuttonitemtext){return _a;}var _b=this._tabbuttonitemtext;var _c=_b._getCSSStyleValue("padding");var _d=_b._getCSSStyleValue("border");var _e=0,_f=0,_g=0,_h=0;if(_c){_e=_c.left||0;_f=_c.right||0;_g=_c.top||0;_h=_c.bottom||0;}var _i=0;var _j=0;if(_d){_i=_d._getBorderWidth()||0;_j=_d._getBorderHeight()||0;}_a[0]+=_e+_f+_i;_a[1]+=_g+_h+_j;var _k=this._displaytext;var _l=_b._getCurrentStyleInheritValue("font");var _m=this._getReferenceAbsoluteFont(_l);var _n=_b._getCurrentStyleInheritValue("wordSpacing");var _o=_b._getCurrentStyleInheritValue("letterSpacing");if(_l){var _p,_q=false;if(_k){_p=_k.search("\n");}_q=(_p==-1)?false:true;var _r=nexacro._getTextSize(_k,_l,_q,null,"none",_n,_o,undefined,undefined,undefined,_m);_a[0]+=(Math.ceil(_r[0])|0);_a[1]+=(Math.ceil(_r[1])|0);}return _a;};_pTabButtonItemControl._getExtraButtonSize=function(_a){if(!this._extrabutton){this._extrabutton=new nexacro._TabExtraButtonControl("extrabutton",0,0,0,0,null,null,null,null,null,null,this);this._extrabutton.createComponent();}var _b={width:0,height:0};var _c=this._extrabutton._getCSSStyleValue("padding");var _d=this._extrabutton._getCSSStyleValue("border");var _e=0,_f=0,_g=0,_h=0;if(_c){_e=_c.left||0;_f=_c.right||0;_g=_c.top||0;_h=_c.bottom||0;}var _i=0;var _j=0;if(_d){_i=_d._getBorderWidth()||0;_j=_d._getBorderHeight()||0;}_b.width+=_e+_f+_i;_b.height+=_g+_h+_j;var _k=this._getExtraButtonIconSize();if(_k){_b.width+=_k.width;_b.height+=_k.height;}if(!_a){this._extrabutton.destroy();this._extrabutton=null;}return _b;};_pTabButtonItemControl._getExtraButtonIconSize=function(){var _a=this._extrabutton._getCSSStyleValue("icon");if(_a instanceof Object){_a=_a.value;}if(_a){var _b=this._extrabutton_iconsize;if(_b){var _c=_a;if(_c.substring(0,4).toLowerCase()=="url("){_c=_c.substring(5,_c.length-2);}_c=nexacro._getImageLocation(_c,this._getRefFormBaseUrl());if(_b.imageurl==_c){return {width:_b.width,height:_b.height};}}var _d=nexacro._getImageSize(_a,this._onload_extra_iconimage,this);if(_d){return {width:_d.width,height:_d.height};}}return null;};_pTabButtonItemControl._getTabButtonIconElementSize=function(_a){if(!this._tabbuttonitemicon){this._tabbuttonitemicon=new nexacro._TabButtonIconControl("tabbuttonitemicon",0,0,0,0,null,null,null,null,null,null,this);this._tabbuttonitemicon.createComponent();}var _b={width:0,height:0};var _c=this._tabbuttonitemicon._getCSSStyleValue("padding");var _d=this._tabbuttonitemicon._getCSSStyleValue("border");var _e=0,_f=0,_g=0,_h=0;if(_c){_e=_c.left||0;_f=_c.right||0;_g=_c.top||0;_h=_c.bottom||0;}var _i=0;var _j=0;if(_d){_i=_d._getBorderWidth()||0;_j=_d._getBorderHeight()||0;}_b.width+=_e+_f+_i;_b.height+=_g+_h+_j;var _k=this._getTabButtonIconSize();if(_k){_b.width+=_k.width;_b.height+=_k.height;}if(!_a){this._tabbuttonitemicon.destroy();this._tabbuttonitemicon=null;}return _b;};_pTabButtonItemControl._getTabButtonIconSize=function(){var _a=this._tabbuttonitemicon._getCSSStyleValue("icon");if(_a instanceof Object){_a=_a.value;}if(_a){var _b=this._tabbuttonitemicon_size;if(_b){var _c=_a;if(_c.substring(0,4).toLowerCase()=="url("){_c=_c.substring(5,_c.length-2);}_c=nexacro._getImageLocation(_c,this._getRefFormBaseUrl());if(_b.imageurl==_c){return {width:_b.width,height:_b.height};}}var _d=nexacro._getImageSize(_a,this._onload_tabbutton_iconimage,this);if(_d){return {width:_d.width,height:_d.height};}}return null;};delete _pTabButtonItemControl;}if(!nexacro._TabExtraButtonControl){nexacro._TabExtraButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pTabExtraButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._TabExtraButtonControl);nexacro._TabExtraButtonControl.prototype=_pTabExtraButtonControl;_pTabExtraButtonControl._type_name="TabExtraButtonControl";_pTabExtraButtonControl._is_subcontrol=true;_pTabExtraButtonControl.on_getIDCSSSelector=function(){return "extrabutton";};delete _pTabExtraButton;}if(!nexacro._TabButtonIconControl){nexacro._TabButtonIconControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pTabButtonIconControl=nexacro._createPrototype(nexacro.Button,nexacro._TabButtonIconControl);nexacro._TabButtonIconControl.prototype=_pTabButtonIconControl;_pTabButtonIconControl._type_name="TabButtonIconControl";_pTabButtonIconControl._is_subcontrol=true;_pTabButtonIconControl.on_getIDCSSSelector=function(){return "tabbuttonitemicon";};delete _pTabButtonIconControl;}if(!nexacro.FileDialog){nexacro.FileDialogEventInfo=function(_a,_b,_c,_d){this.eventid=_a;this.reason=_b;this.path=_c;this.virtualfiles=_d;};var _pFileDialogEventInfo=nexacro.FileDialogEventInfo.prototype=nexacro._createPrototype(nexacro.Event,nexacro.FileDialogEventInfo);_pFileDialogEventInfo._type_name="FileDialogEventInfo";delete _pFileDialogEventInfo;_pFileDialogEventInfo=null;nexacro.FileDialog=function(_a,_b){nexacro._EventSinkObject.call(this,_a);this.EnvironmentPath=1;this._handle=nexacro._createFileDialogHandle(this);};var _pFileDialog=nexacro.FileDialog.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.FileDialog);_pFileDialog._type_name="FileDialog";_pFileDialog._p_accept="";_pFileDialog._p_defaultextension=true;_pFileDialog._p_dialogtype=undefined;_pFileDialog._p_filter="";_pFileDialog._p_filterindex=0;_pFileDialog._event_list={"onclose":1};nexacro.FileDialog.LOAD=1;nexacro.FileDialog.SAVE=2;nexacro.FileDialog.MULTILOAD=3;nexacro.FileDialog.SELFOLDER=4;_pFileDialog.destroy=function(){nexacro._destroyFileDialogHandle(this);this._handle=null;return true;};_pFileDialog.set_accept=function(_a){_a=nexacro._toString(_a);if(this._p_accept!=_a){this._p_accept=_a;this.on_apply_accept();}};_pFileDialog.on_apply_accept=function(){nexacro._setFileDialogHandleAccept(this,this._p_accept);};_pFileDialog.set_defaultextension=function(_a){_a=nexacro._toBoolean(_a);if(this._p_defaultextension!=_a){this._p_defaultextension=_a;this.on_apply_defaultextension();}};_pFileDialog.on_apply_defaultextension=function(){nexacro._setFileDialogHandleDefaultExtension(this,this._p_defaultextension);};_pFileDialog.set_dialogtype=function(_a){if(this._p_dialogtype!=_a){this._p_dialogtype=_a;}};_pFileDialog.set_filter=function(_a){_a=nexacro._toString(_a);if(this._p_filter!=_a){if(this._isValidPropertyFilter(_a)){this._p_filter=_a;this.on_apply_filter();}}};_pFileDialog.on_apply_filter=function(){nexacro._setFileDialogHandleFilter(this,this._p_filter);};_pFileDialog.set_filterindex=function(_a){if(isNaN(_a= +_a)||_a<0){return;}if(this._p_filterindex!=_a){this._p_filterindex=_a;this.on_apply_filterindex();}};_pFileDialog.on_apply_filterindex=function(){nexacro._setFileDialogHandleFilterIndex(this,this._p_filterindex);};_pFileDialog._properties=[{name:"accept"},{name:"defaultextension"},{name:"filter"},{name:"filterindex"},{name:"id",readonly:true},{name:"name"},{name:"parent",readonly:true}];nexacro._defineProperties(_pFileDialog,_pFileDialog._properties);_pFileDialog.open=function(_a,_b,_c,_d,_e,_f){if(isNaN(_b= +_b)||(_b<1||_b>4)){return;}_a=_a?_a:this.id;_c=_c?_c:"%USERAPP%";_d=_d?_d:"";_e=_e?_e:-1;_f=_f?_f:-1;var _g=this._p_filter?this._p_filter:"All(*.*)|*.*|";var _h=_g.split("|");if(this._p_filter==""){nexacro._setFileDialogHandleFilter(this,"All(*.*)|*.*|");}if(this._p_defaultextension&&this._p_filterindex>=(_h.length/2)){return false;}nexacro._openFileDialogHandle(this,_a,_b,_c,_d,this._p_dialogtype,_e,_f);return true;};_pFileDialog.on_close=function(_a,_b,_c){this.on_fire_onclose(_a,_b,_c);};_pFileDialog._onclose=function(_a){var _b=_a.virtualfiles;var _c=new Array(_b.length);for(var _e=0;_e<_b.length;_e++ ){var _d=new nexacro.VirtualFile("VirtualFile","");_d._p_filename=_b[_e].filename;_d._p_fullpath=_b[_e].fullpath;_d._p_path=_b[_e].path;_c[_e]=_d;}this.on_fire_onclose(_a.reason,_a.reason==4?_a.path:undefined,_c);};_pFileDialog.on_fire_onclose=function(_a,_b,_c){if(this.onclose&&this.onclose._has_handlers){var _d=new nexacro.FileDialogEventInfo("onclose",_a,_b,_c);return this.onclose._fireEvent(this,_d);}return true;};_pFileDialog._isValidPropertyFilter=function(_a){if(_a===""){return true;}var _b=_a.split("|");var _c=_b.length;if(_c<2){return false;}if((_c%2==1)&&_b[_c -1]!=""){return false;}var _d=/[\*].[a-zA-Z0-9가-힣\*]/gi;for(var _e=0;_e<_c;_e++ ){if(_e%2==1){if(_d.test(_b[_e])==false){return false;}_d.lastIndex=0;}}return true;};delete _pFileDialog;}if(!nexacro.FileDownload){nexacro.FileDownloadEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"onsuccess";this.fromobject=this.fromreferenceobject=_a;this.url=_c;this.targetfullpath=_d;};var _pFileDownloadEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileDownloadEventInfo);nexacro.FileDownloadEventInfo.prototype=_pFileDownloadEventInfo;_pFileDownloadEventInfo._type_name="FileDownloadEventInfo";delete _pFileDownloadEventInfo;nexacro.FileDownloadErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.ErrorEventInfo.call(this,_a,_b,_c,_d,_e,_f,_g,_h);};var _pFileDownloadErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.FileDownloadErrorEventInfo);nexacro.FileDownloadErrorEventInfo.prototype=_pFileDownloadErrorEventInfo;_pFileDownloadErrorEventInfo._type_name="FileDownloadErrorEventInfo";delete _pFileDownloadErrorEventInfo;nexacro.FileDownload=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._IconText.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pFileDownload=nexacro._createPrototype(nexacro._IconText,nexacro.FileDownload);nexacro.FileDownload.prototype=_pFileDownload;_pFileDownload._type_name="FileDownload";_pFileDownload._p_tabstop=true;_pFileDownload._p_downloadurl="";_pFileDownload._p_downloadfilename="";_pFileDownload._p_filefilter="";_pFileDownload._p_filefilterindex=0;_pFileDownload._is_simple_control=true;_pFileDownload._is_focus_accept=true;_pFileDownload._use_pushed_status=true;_pFileDownload._event_list={"onclick":1,"ondblclick":1,"ondrag":1,"ondragenter":1,"ondragmove":1,"ondragleave":1,"ondrop":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmousemove":1,"onmouseleave":1,"onmove":1,"onsize":1,"onsuccess":1,"onerror":1,"oncontextmenu":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pFileDownload.accessibilityrole="button";_pFileDownload.on_create_contents=function(){nexacro._IconText.prototype.on_create_contents.call(this);nexacro._create_hidden_frame("",this._on_download_onload,this,"filedownload");};_pFileDownload.on_destroy_contents=function(){nexacro._IconText.prototype.on_destroy_contents.call(this);nexacro._destroy_hidden_frame("",this,"filedownload");};_pFileDownload._getDlgCode=function(){return {want_tab:false,want_return:true,want_escape:false,want_chars:false,want_arrows:false};};_pFileDownload._isFocusAcceptable=function(){return this._is_focus_accept;};_pFileDownload.set_downloadurl=function(_a){if(_a!=this._p_downloadurl){this._p_downloadurl=_a;}};_pFileDownload.set_downloadfilename=function(_a){if(_a!=this._p_downloadfilename){this._p_downloadfilename=_a;}};_pFileDownload.set_filefilter=function(_a){this._p_filefilter=_a;};_pFileDownload.set_filefilterindex=function(_a){this._p_filefilterindex=_a;};_pFileDownload._properties=[{name:"tabstop"},{name:"downloadurl"},{name:"downloadfilename"},{name:"filefilter"},{name:"filefilterindex"}];nexacro._defineProperties(_pFileDownload,_pFileDownload._properties);_pFileDownload.download=function(_a,_b){var _c=null;var _d=this._p_downloadurl;var _e=this._p_downloadfilename;if(_b!=undefined){_b=nexacro._toString(_b);}var _f=this._getOwnerFrame();var _g=_f?_f._is_popup_frame:false;if(!_g){_g=nexacro._isPopupWindowApp();}if(_a!=undefined){_a=nexacro._toString(_a);_a=nexacro._getImageLocation(_a);_c=nexacro._download(_a,_g,this._hidden_frame_handle,_e,_b,this._p_filefilter,this._p_filefilterindex);}else if(_d!=undefined&&_d!=""){_d=nexacro._getServiceLocation(_d);_c=nexacro._download(_d,_g,this._hidden_frame_handle,_e,_b,this._p_filefilter,this._p_filefilterindex);}return _c===null?false:true;};_pFileDownload._on_download_onload_android=function(_a){if(_a.status<0){nexacro._onHttpSystemError(this,true,this,_a.errcode,_a.url,_a.httpcode,_a.url,null,_a.extramsg);var _b=nexacro.MakeCommunicationError(this,_a.errcode,_a.url,_a.httpcode,_a.url,null,_a.extramsg);this.on_fire_onerror(this,"ObjectError",_b.message,this,9901,null,null);}else{this.on_fire_onsuccess(_a.url,_a.data);}};_pFileDownload._on_download_onload=function(_a,_b,_c,_d,_e,_f,_g){if(_a<0){nexacro._onHttpSystemError(this,true,this,_d,_c,_e,_c,null,_g);var _h=nexacro.MakeCommunicationError(this,_d,_c,_e,_c,null,_g);this.on_fire_onerror(this,"ObjectError",_h.message,this,9901,null,null);}else{this.on_fire_onsuccess(_c,_b);}};_pFileDownload.on_fire_sys_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Component.prototype.on_fire_sys_onkeyup.call(this,_a,_b,_c,_d,_e,_f,_g);if(_a==13||_a==32){this.on_fire_onclick("none",false,false,false,-1,-1,-1,-1,-1,-1,this,this);}return _h;};_pFileDownload.on_fire_onsuccess=function(_a,_b){var _c=nexacro.getApplication();if(_c){_c._endCommProgress();}if(this.onsuccess&&this.onsuccess._has_handlers&&_a!=""){var _d=new nexacro.FileDownloadEventInfo(this,"onsuccess",_a,_b);return this.onsuccess._fireEvent(this,_d);}};_pFileDownload.on_fire_onerror=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.getApplication();if(_h){_h._endCommProgress();}if(this.onerror&&this.onerror._has_handlers){var _i=new nexacro.FileDownloadErrorEventInfo(_a,"onerror",_b,_c,_d,_e,_f,_g);return this.onerror._fireEvent(this,_i);}};_pFileDownload.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=nexacro.Component.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this.download();return _n;};delete _pFileDownload;}if(!nexacro.FileDownTransfer){nexacro.FileDownTransferEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"onsuccess";this.fromobject=this.fromreferenceobject=_a;this.url=_c;this.targetfullpath=_d;};var _pFileDownTransferEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileDownTransferEventInfo);nexacro.FileDownTransferEventInfo.prototype=_pFileDownTransferEventInfo;_pFileDownTransferEventInfo._type_name="FileDownTransferEventInfo";delete _pFileDownTransferEventInfo;nexacro.FileDownTransferErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.ErrorEventInfo.call(this,_a,_b,_c,_d,_e,_f,_g,_h);};var _pFileDownTransferErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.FileDownTransferErrorEventInfo);nexacro.FileDownTransferErrorEventInfo.prototype=_pFileDownTransferErrorEventInfo;_pFileDownTransferErrorEventInfo._type_name="FileDownTransferErrorEventInfo";delete _pFileDownTransferErrorEventInfo;nexacro.FileDownTransfer=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);this._p_postdatalist=new nexacro.Collection();if(nexacro._OS=="Android"&&nexacro._isHybrid&&nexacro._isHybrid()){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;var _c={id:this._id,div:"FileDownTransfer",method:"constructor",params:""};var _d=JSON.stringify(_c);nexacro.Device.exec(_d);}};var _pFileDownTransfer=nexacro.FileDownTransfer.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.FileDownTransfer);_pFileDownTransfer._type_name="FileDownTransfer";_pFileDownTransfer._p_url="";_pFileDownTransfer._p_downloadfilename="";_pFileDownTransfer._event_list={"onsuccess":1,"onerror":1};_pFileDownTransfer.destroy=function(){this._p_postdatalist=null;if(nexacro._OS=="Android"&&nexacro._isHybrid&&nexacro._isHybrid()){delete nexacro.Device._userCreatedObj[this._id];var _a={id:this._id,div:"FileDownTransfer",method:"destroy",params:""};var _b=JSON.stringify(_a);nexacro.Device.exec(_b);}return true;};_pFileDownTransfer.set_postdatalist=nexacro._emptyFn;_pFileDownTransfer.set_url=function(_a){if(this._p_url!=_a){this._p_url=_a;}};_pFileDownTransfer.set_downloadfilename=function(_a){if(this._p_downloadfilename!=_a){this._p_downloadfilename=_a;}};_pFileDownTransfer._properties=[{name:"downloadfilename"},{name:"id",readonly:true},{name:"name"},{name:"postdatalist",readonly:true},{name:"url"}];nexacro._defineProperties(_pFileDownTransfer,_pFileDownTransfer._properties);_pFileDownTransfer.setPostData=function(_a,_b){if(!_a){return;}this._p_postdatalist.setItem(_a,_b);};_pFileDownTransfer.removePostData=function(_a){this._p_postdatalist.delete_item(_a);};_pFileDownTransfer.getPostData=function(_a){return this._p_postdatalist.getItem(_a);};_pFileDownTransfer.clearPostDataList=function(){this._p_postdatalist.clear();};_pFileDownTransfer.download=function(_a,_b){_a=_a?nexacro._getImageLocation(_a):(this._p_url?nexacro._getServiceLocation(this._p_url,null,null,false):"");_b=nexacro._toString(_b);if(!_a){return;}var _c={};for(var _d=0,_e=this._p_postdatalist.length;_d<_e;_d++ ){_c[this._p_postdatalist._idArray[_d]]=this._p_postdatalist[_d];}nexacro._downloadTransfer(_c,_a,_b,this);};_pFileDownTransfer._on_load_android=function(_a){this.on_load(_a.status,_a.fullpath,_a._p_url,"",_a.httpcode,_a.errmsg,"");};_pFileDownTransfer.on_load=function(_a,_b,_c,_d,_e,_f,_g){if(_b){if(!nexacro._isArray(_b)){if(_a<0){return this.on_fire_onerror("ObjectError",_f,this,_e,_c,_c);}else{return this.on_fire_onsuccess(_c,_b);}}else{}}return this.on_fire_onerror("ObjectError","fail to get",this,9901,_c,_c);};_pFileDownTransfer.on_error=function(_a,_b,_c,_d){this.on_fire_onerror("ObjectError",_d,this,_c,_a,_a);};_pFileDownTransfer.on_fire_onsuccess=function(_a,_b){if(this.onsuccess&&this.onsuccess._has_handlers){var _c=new nexacro.FileDownTransferEventInfo(this,"onsuccess",_a,_b);this.onsuccess._fireEvent(this,_c);}};_pFileDownTransfer.on_fire_onerror=function(_a,_b,_c,_d,_e,_f){if(this.onerror&&this.onerror._has_handlers){var _g=new nexacro.FileDownTransferErrorEventInfo(this,"onerror",_a,_b,_c,_d,_e,_f);return this.onerror._fireEvent(this,_g);}return true;};_pFileDownTransfer._getForm=function(){if(this.parent instanceof nexacro.Form){return this.parent;}return null;};delete _pFileDownTransfer;}if(!nexacro.FileUpload){nexacro.FileUploadItemEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"onfileuploaditem";this.fromobject=this.fromreferenceobject=_a;this.index=_c;};var _pEventFileUploadItemEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileUploadItemEventInfo);nexacro.FileUploadItemEventInfo.prototype=_pEventFileUploadItemEventInfo;_pEventFileUploadItemEventInfo._type_name="FileUploadItemEventInfo";delete _pEventFileUploadItemEventInfo;nexacro.FileUploadMouseEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){this.id=this.eventid=_b||"onmouse";this.fromobject=_n;this.fromreferenceobject=_o;this.altkey=_d||false;this.ctrlkey=_e||false;this.shiftkey=_f||false;this.metakey=_p||false;this.button=_c||"";this.index=_g;this.screenx=_h||-1;this.screeny=_i||-1;this.canvasx=_j||-1;this.canvasy=_k||-1;this.clientx=_l||-1;this.clienty=_m||-1;};var _pFileUploadMouseEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileUploadMouseEventInfo);nexacro.FileUploadMouseEventInfo.prototype=_pFileUploadMouseEventInfo;_pFileUploadMouseEventInfo._type_name="FileUploadMouseEventInfo";_pFileUploadMouseEventInfo._xposConvertToRtl=function(_a,_b){if(_a&&_a._isRtl&&_a._isRtl()){this._orgcanvasx=this.canvasx;this._orgcliendx=this.clientx;this.canvasx=nexacro._getRTLCanvasXForMouseEvent(_a,_b,this.canvasx);this.clientx=_a._getClientXY(this.canvasx,this.canvasy)[0];return true;}return false;};_pFileUploadMouseEventInfo._xposConvertToLtr=function(_a){if(_a&&_a._isRtl&&_a._isRtl()){this.canvasx=this._orgcanvasx;this.clientx=this._orgclientx;delete this._orgcanvas;delete this._orgclientx;}};delete _pFileUploadMouseEventInfo;nexacro.FileUploadContextMenuEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){nexacro.ContextMenuEventInfo.call(this,_a,_b,_n,_o,_c,_d,_e,_f,_h,_i,_j,_k,_l,_m,_p);this.index=_g;};var _pFileUploadContextMenuEventInfo=nexacro._createPrototype(nexacro.MouseEventInfo,nexacro.FileUploadContextMenuEventInfo);nexacro.FileUploadContextMenuEventInfo.prototype=_pFileUploadContextMenuEventInfo;_pFileUploadContextMenuEventInfo._type_name="FileUploadContextMenuEventInfo";delete _pFileUploadContextMenuEventInfo;nexacro.FileUploadEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"onsuccess";this.fromobject=this.fromreferenceobject=_a;this.datasets=_c;this.errorcode=_d;this.errormsg=_e;this.url=_f;};var _pFileUploadEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileUploadEventInfo);nexacro.FileUploadEventInfo.prototype=_pFileUploadEventInfo;_pFileUploadEventInfo._type_name="FileUploadEventInfo";delete _pFileUploadEventInfo;nexacro.FileUploadItemChangeEventInfo=function(_a,_b,_c,_d,_e){this.id=this.eventid=_b||"onitemchanged";this.fromobject=this.fromreferenceobject=_a;this.index=_a._p_index;this.oldvalue=_d;this.newvalue=_e;};var _pFileUploadItemChangeEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileUploadItemChangeEventInfo);nexacro.FileUploadItemChangeEventInfo.prototype=_pFileUploadItemChangeEventInfo;_pFileUploadItemChangeEventInfo._type_name="FileUploadItemChangeEventInfo";delete _pFileUploadItemChangeEventInfo;nexacro.FileUploadErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ErrorEventInfo.call(this,_a,_b,_c,_d,_e,_f,_g,_h);this.index=_i;};var _pFileUploadErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.FileUploadErrorEventInfo);nexacro.FileUploadErrorEventInfo.prototype=_pFileUploadErrorEventInfo;_pFileUploadErrorEventInfo._type_name="FileUploadErrorEventInfo";delete _pFileUploadErrorEventInfo;nexacro.FileUpload=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this.filelist=[];this.filepathedits=new nexacro.Collection();this.filefindbuttons=new nexacro.Collection();this._items=[];this.context=this._refform;};var _pFileUpload=nexacro._createPrototype(nexacro.Component,nexacro.FileUpload);nexacro.FileUpload.prototype=_pFileUpload;_pFileUpload._type_name="FileUpload";_pFileUpload._p_buttonsize=undefined;_pFileUpload._p_buttontext="find";_pFileUpload._p_index=-1;_pFileUpload._p_itemcount=1;_pFileUpload._p_itemheight=undefined;_pFileUpload._p_multiselect=false;_pFileUpload._p_text="";_pFileUpload._p_uploadurl="";_pFileUpload._p_value=undefined;_pFileUpload._p_filefilter="";_pFileUpload._p_filefilterindex=0;_pFileUpload._hidden_frame_handle=null;_pFileUpload._last_id=-1;_pFileUpload._bresetscroll=0;_pFileUpload._onPopupWin=false;_pFileUpload._is_listtype=true;_pFileUpload._calc_scroll=false;_pFileUpload._cnt_resetscroll=0;_pFileUpload._iscors=false;_pFileUpload._is_scrollable=true;_pFileUpload._p_accessibilityaction="";_pFileUpload._p_accessibilityrole="fileupload";_pFileUpload._p_accessibilitydesclevel="all";_pFileUpload._p_accessibilitydescription="";_pFileUpload._p_accessibilityenable=true;_pFileUpload._p_accessibilitylabel="";_pFileUpload.buttonaccessibilityaction="";_pFileUpload.buttonaccessibilityrole="";_pFileUpload.buttonaccessibilitydesclevel="all";_pFileUpload.buttonaccessibilitydescription="";_pFileUpload.buttonaccessibilityenable=true;_pFileUpload.buttonaccessibilitylabel="";_pFileUpload.editaccessibilityaction="";_pFileUpload.editaccessibilityrole="";_pFileUpload.editaccessibilitydesclevel="all";_pFileUpload.editaccessibilitydescription="";_pFileUpload.editaccessibilityenable=true;_pFileUpload.editaccessibilitylabel="";_pFileUpload._want_tab=true;_pFileUpload._want_arrow=false;_pFileUpload._first_focus=false;_pFileUpload._editFlag=null;_pFileUpload._buttonFlag=false;_pFileUpload._event_list={"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondrop":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"onmove":1,"onsize":1,"onsuccess":1,"onerror":1,"oncontextmenu":1,"onappenditem":1,"ondeleteitem":1,"onitemclick":1,"onfindclick":1,"onitemchanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pFileUpload.on_create_contents=function(){var _a=this.getElement();if(_a){var _b;var _c=this._items;var _d=this._p_itemcount;for(var _e=0;_e<_d;_e++ ){_b=this._createFileItem(_e,0,0,0,0,true);this.filepathedits.add_item(_b.id,_b.fileitemedit);this.filefindbuttons.add_item(_b.id,_b.fileitembutton);_c[_e]=_b;}}};_pFileUpload.on_created_contents=function(){nexacro._create_hidden_frame(this._unique_id,this._on_manager_onload,this,"fileupload");if(!this.context){this.context=this._refform;}this.on_apply_index(this._p_index);this.on_apply_prop_enable(this._isEnable());this._recalcLayout();var _a;var _b=this._items;var _c=this._p_itemcount;for(var _d=0;_d<_c;_d++ ){_a=_b[_d];_a.on_created();_a._setEventHandler("onfindclick",this._on_item_onfindclick,this);_a._setEventHandler("onitemclick",this._on_item_onitemclick,this);if(nexacro._enableaccessibility){_a._setAccessibilityInfoIndex(_d+1);_a._setAccessibilityInfoCount(_c);}}this._buttonFlag=true;if(nexacro._enableaccessibility){this.on_apply_editaccessibility();this.on_apply_buttonaccessibility();}this._onRecalcScrollSize();};_pFileUpload.on_destroy_contents=function(){var _a=this._items;var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].destroy();}this.filelist=null;this._items=null;this.filepathedits.clear();this.filepathedits=null;this.filefindbuttons.clear();this.filefindbuttons=null;nexacro._destroy_hidden_frame(this._unique_id,this,"fileupload");};_pFileUpload.on_create_contents_command=function(){this.on_apply_index(this._p_index);this.on_apply_prop_enable(this._isEnable());this._recalcLayout();var _a="";var _b=this._items;var _c=this._p_itemcount;for(var _d=0;_d<_c;_d++ ){_a+=_b[_d].createCommand();}return _a;};_pFileUpload.on_attach_contents_handle=function(_a){nexacro._create_hidden_frame(this._unique_id,this._on_manager_onload,this,"fileupload");var _b;var _c=this._items;var _d=this._p_itemcount;for(var _e=0;_e<_d;_e++ ){_b=_c[_e];_b.attachHandle(_a);_b._setEventHandler("onfindclick",this._on_item_onfindclick,this);_b._setEventHandler("onitemclick",this._on_item_onitemclick,this);if(nexacro._enableaccessibility){_b._setAccessibilityInfoIndex(_e+1);_b._setAccessibilityInfoCount(_d);}if(this._p_index==_e){if(this._editFlag){_b.fileitemedit.setFocus(false);}if(this._buttonFlag){_b.fileitembutton.setFocus(false);}this._p_value=_b._p_value;}}this._buttonFlag=true;if(nexacro._enableaccessibility){this.on_apply_editaccessibility(this.editaccessibility);this.on_apply_buttonaccessibility(this.buttonaccessibility);}if(this._p_multiselect){this.on_apply_multiselect(this._p_multiselect);}this._onRecalcScrollSize();};_pFileUpload.on_change_containerRect=function(_a,_b){if(this._is_created_contents){this._recalcLayout();if(!this._calc_scroll){this._onRecalcScrollSize();}else{this._cnt_resetscroll++ ;this._onResetScrollBar();}}};_pFileUpload.on_change_containerPos=function(_a,_b){};_pFileUpload._apply_setfocus=function(_a){var _b=nexacro._enableaccessibility;var _c=((_a=="lbutton")?false:_b);var _d=this._items;if(_d.length<-1||_b){var _e=this._control_element;if(_e){_e.setElementFocus(_c);}}else{var _f=_d[this._p_index];if(_f){_f.fileitembutton._control_element.setElementFocus(_c);}}};_pFileUpload.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setEnable(_a);_b[_d].fileitemedit._setEnable(_a);_b[_d].fileitembutton._setEnable(_a);}};_pFileUpload.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this.on_apply_buttontext(this._getStringResourceProperty(this._p_buttontext));};_pFileUpload._onRecalcScrollSize=function(){var _a=this.getElement();if(_a){var _b=this._getClientWidth();var _c=this._p_itemcount* this._getItemHeight();if(_c>this._getClientHeight()){var _d=this.vscrollbar;if(_d){if(!_d.visible){_b-=_d._getClientWidth();}}else{_b-=this._getVScrollBarSize();}}this._calc_scroll=true;_a.setElementScrollMaxSize(_b,_c);if(!this._cnt_resetscroll){this._onResetScrollBar();}this._calc_scroll=false;this._cnt_resetscroll=0;}};_pFileUpload._on_getAccessibilityAdditionalLabel=function(){if(this._first_focus==false){var _a=0;var _b=this._items;if(_b){_a=_b.length;}return ( +this._p_index)+1+" "+_a;}return "";};_pFileUpload._getDlgCode=function(_a,_b,_c,_d){var _e=this._want_tab;this._want_tab=true;this._want_arrow=this._want_arrow&&this._isEnable();return {want_tab:_e,want_return:true,want_escape:false,want_chars:false,want_arrows:this._want_arrow};};_pFileUpload._isAccessibilityEnable=function(){return true;};_pFileUpload.set_text=nexacro._emptyFn;_pFileUpload.set_value=nexacro._emptyFn;_pFileUpload.set_buttonsize=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_buttonsize!=_a){this._p_buttonsize=_a;this.on_apply_buttonsize(_a);}};_pFileUpload.on_apply_buttonsize=function(_a){var _b=this._items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d]){_b[_d]._recalcLayout();}}};_pFileUpload.set_buttontext=function(_a){if(this._p_buttontext!=_a){this._p_buttontext=_a;this.on_apply_buttontext(_a);}};_pFileUpload.on_apply_buttontext=function(_a){var _b;var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_b=_c[_e].fileitembutton;if(_b){_b.set_text(_a);}}};_pFileUpload.set_index=function(_a){if(isNaN(_a= +_a)||_a<-1){return;}if(this._p_index!=_a){this._p_index=_a;this.on_apply_index(_a);this._setAccessibilityStatSelected(_a);}};_pFileUpload.on_apply_index=function(_a){var _b=this.getElement();if(_b){var _c=this._items[_a];if(_c){if(this._editFlag){_c.fileitemedit.setFocus(false);}if(this._buttonFlag){_c.fileitembutton.setFocus(false);}this._p_value=_c._p_value;}}};_pFileUpload.set_itemcount=function(_a){if(isNaN(_a= +_a)||_a<0){return;}if(this._p_itemcount!=_a){var _b=this._p_itemcount;this._p_itemcount=_a;this.on_apply_itemcount(_a,_b);}};_pFileUpload.on_apply_itemcount=function(_a,_b){var _c=this.getElement();if(_c){var _d;var _e=this._items;var _f=_e.length;if(_f){while(_b>_a){_b-- ;_e.pop().destroy();}}for(var _g=_f;_g<_a;_g++ ){_d=this._items[_g]=this._createFileItem(_g);this.filepathedits.add_item(_d.id,_d.fileitemedit);this.filefindbuttons.add_item(_d.id,_d.fileitembutton);}this._recalcLayout();this._onRecalcScrollSize();}};_pFileUpload.set_itemheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_itemheight!=_a){this._p_itemheight=_a;this.on_apply_itemheight(_a);}};_pFileUpload.on_apply_itemheight=function(_a){this._recalcLayout();this._onRecalcScrollSize();};_pFileUpload.set_multiselect=function(_a){_a=nexacro._toBoolean(_a);if(this._p_multiselect!=_a){this._p_multiselect=_a;this.on_apply_multiselect(_a);}};_pFileUpload.on_apply_multiselect=function(_a){var _b=this.getElement();if(_b){var _c;var _d=this._items;var _e=_d.length;var _f=this._unique_id;for(var _g=0;_g<_e;_g++ ){_c=_d[_g];nexacro._setMultipleFile(_f,_c.name,_a,_c);}}};_pFileUpload.set_uploadurl=function(_a){if(this._p_uploadurl!=_a){this._p_uploadurl=_a;}};_pFileUpload.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);this.on_apply_editaccessibility();this.on_apply_buttonaccessibility();};_pFileUpload.on_apply_editaccessibility=function(){var _a=this._items.length;var _b=null;var _c=this.editaccessibilityrole;var _d=this.editaccessibilitylabel;var _e=this.editaccessibilitydesclevel;var _f=this.editaccessibilitydescription;var _g=this.editaccessibilityenable;var _h=this.editaccessibilityaction;for(var _j=0;_j<_a;_j++ ){_b=this._getItem(_j);var _i=_b.fileitemedit;if(_i){if(_c){_i.set_accessibilitydescrole(_c);}if(_d){_i.set_accessibilitydesclabel(_d);}if(_e){_i.set_accessibilitydesclevel(_e);}if(_h){_i.set_accessibilityaction(_h);}if(_f){_i.set_accessibilitydesclevel(_f);}_i.set_accessibilityenable(_g);}}};_pFileUpload.on_apply_buttonaccessibility=function(_a){var _b=this._items.length;var _c=null;var _d=this.editaccessibilityrole;var _e=this.editaccessibilitylabel;var _f=this.editaccessibilitydesclevel;var _g=this.editaccessibilitydescription;var _h=this.editaccessibilityenable;var _i=this.editaccessibilityaction;for(var _k=0;_k<_b;_k++ ){_c=this._getItem(_k);var _j=_c.fileitembutton;if(_j){if(_d){_j.set_accessibilitydescrole(_d);}if(_e){_j.set_accessibilitydesclabel(_e);}if(_f){_j.set_accessibilitydesclevel(_f);}if(_i){_j.set_accessibilityaction(_i);}if(_g){_j.set_accessibilitydesclevel(_g);}_j.set_accessibilityenable(_h);}}};_pFileUpload.set_filefilter=function(_a){this._p_filefilter=_a;};_pFileUpload.set_filefilterindex=function(_a){this._p_filefilterindex=_a;};_pFileUpload._properties=[{name:"text",readonly:true},{name:"value",readonly:true},{name:"buttonsize"},{name:"buttontext"},{name:"index"},{name:"itemcount"},{name:"itemheight"},{name:"multiselect"},{name:"uploadurl"},{name:"filefilter"},{name:"filefilterindex"}];nexacro._defineProperties(_pFileUpload,_pFileUpload._properties);_pFileUpload.appendItem=function(){var _a=this.getElement();if(_a){var _b=this._p_itemcount;var _c=this._items[_b]=this._createFileItem(_b);this.filepathedits.add_item(_c.id,_c.fileitemedit);this.filefindbuttons.add_item(_c.id,_c.fileitembutton);this._p_itemcount++ ;if(nexacro._enableaccessibility){_c._setAccessibilityInfoIndex(_b);_c._setAccessibilityInfoCount(_b+1);}this._recalcLayout();this._onRecalcScrollSize();this.on_fire_onappenditem(this,_b);}};_pFileUpload.deleteItem=function(_a){if(_a<0){return;}var _b=this._p_index;var _c=this.getElement();if(_c){_a=parseInt(_a,10);var _d=this._items;if(this._p_itemcount<=_a){return;}var _e=this._p_itemcount;var _f=_e -1;for(var _g=_a+1;_g<_e;_g++ ){if(_b==_g){this._p_index-- ;}_d[_g]._p_index-- ;if(nexacro._enableaccessibility){_d[_g]._setAccessibilityInfoIndex(_g);_d[_g]._setAccessibilityInfoCount(_f);}}_d[_a].destroy();_d.splice(_a,1);if(_b==_a){this._p_index=-1;this._p_value=undefined;this._setText("");}this._p_itemcount-- ;this._recalcLayout();this._onRecalcScrollSize();this.on_fire_ondeleteitem(this,_a);this._updateFileList();}};_pFileUpload.changeItem=function(_a,_b){if(nexacro._Browser=="Runtime"&&nexacro._OS!="Android"){var _c=this.getElement();if(_c){_a=parseInt(_a,10);if(this._p_itemcount<=_a){return;}var _d=this._items[_a];var _e;var _f=_b.length;var _g=new Array();if(_f>0){_e="";for(var _l=0;_l<_f;_l++ ){var _h=_b[_l];_h=_h.split("/").join("\\");var _i=_h.lastIndexOf("\\");var _j="";if(_i>0){_j=_h.substring(0,_i+1);}var _k=this._getWindow();if(nexacro._isTrustPath(_k,_j)){_e+=(_g.length>0?", ":"")+_b[_l];_g.push(_b[_l]);}}}if(_e!=_d._p_value){_d.oldvalue=_d._p_value;_d._p_value=_e;_d._changeFiles(_g);if(_d.fileitemedit){_d.fileitemedit.set_value(_e);}if(((this._p_index==-1)?0:this._p_index)==_a){_d._p_parent._setText(_e);_d._p_parent._setValue(_e);}_d._p_parent.on_fire_onitemchanged(_d,_a,_d.oldvalue,_d._p_value,_b);}_g.length=0;}}};_pFileUpload.getItemCount=function(_a){var _b=this.getElement();if(_b){_a=nexacro._toBoolean(_a);var _c=0;var _d=0;var _e=this._items;var _f=_e.length;while(_d<_f){if(_a==true){if(_e[_d]._p_value){_c++ ;}}else{return _f;}++ _d;}return _c;}};_pFileUpload.getItemIndex=function(_a){var _b=this.getElement();if(_b){if(typeof _a=="object"){var _c=0;var _d=this._items;while(_c<_d.length){if(_a==_d[_c].fileitembutton){return _c;}if(_a==_d[_c].fileitemedit){return _c;}++ _c;}return -1;}}};_pFileUpload.hasValue=function(_a){var _b=this.getElement();if(_b){var _c=0,_d=0;var _e=this._items;if(_a==-1){while(_c<_e.length){if(_e[_c]._p_value){ ++_d;}++ _c;}if(_d==_e.length){return true;}return false;}if(_a<_e.length&&_e[_a]._p_value){return true;}return false;}};_pFileUpload.upload=function(_a){var _b=false;var _c;if(_a==undefined){if(this._p_uploadurl){_c=nexacro._getServiceLocation(this._p_uploadurl,null,null,false,true);}}else{_c=nexacro._getServiceLocation(_a,null,null,false,true);}if(nexacro._Browser!="Runtime"){var _d=nexacro._getParsedUri(_c);if(_d.host!=undefined&&_d.protocol!=undefined){if(!nexacro._isSameOrigin(_c,nexacro._project_url)){this._iscors=true;}}}if(_c){var _e=this._items;var _f=_e?_e.length:0;var _g;if(nexacro._Browser=="Runtime"&&nexacro._OS!="Android"){var _h=false;var _i=0;var _j=[];var _k=0;for(_g=0;_g<_f;_g++ ){if(_e[_g]._files){var _l=_e[_g]._files.length;while(_l>0){_l-- ;_e[_g]._files[_l].id="upfile"+_i;_i++ ;if(_e[_g]._files[_l] instanceof nexacro.VirtualFile){_h=true;}}_j[_k]=_e[_g]._files;_k++ ;}}for(_g=0;_g<_f;_g++ ){if(_e[_g]&&_e[_g]._p_value){if(_h==true){nexacro._submit(this._unique_id,_c,this._hidden_frame_handle,null,_e[_g]._p_value,_j);}else{nexacro._submit(this._unique_id,_c,this._hidden_frame_handle,null,_e[_g]._p_value);}return true;}}}else if(nexacro._Browser=="Runtime"&&nexacro._OS=="Android"){if(_f>1){var _j=[];var _k=0;for(_g=0;_g<_f;_g++ ){if(_e[_g]._files){_j[_k]=_e[_g]._files;_k++ ;}}nexacro._submit(this._unique_id,_c,this._hidden_frame_handle,null,_e[0]._p_value,_j);_b=true;}else{nexacro._submit(this._unique_id,_c,this._hidden_frame_handle,null,_e[0]._p_value);_b=true;}}else if(nexacro._OS=="iOS"&&nexacro._isHybrid&&nexacro._isHybrid()){var _m=this;var _n=function(){return function(_p,_q,_d,_r,_s,_t,_u){var _v;var _w=-1;var _x="fail to get";try{if(_p==4){}else{if(_q){_q=_q.trimLeft();var _y=_q.slice(0,5).toUpperCase();if(_y.indexOf("<?XML")==0){_y="XML";}if(_y.indexOf("SSV")==0){_y="SSV";}if(_y.indexOf("{")==0){_y="JSON";}if(_y=="XML"){_q=nexacro._parseXMLDocument(_q);}if(nexacro._Deserializer[_y]){_v=nexacro._Deserializer[_y](_q);}var _z=_v?_v[0]:null;if(_z){_w=_z["ErrorCode"];_x=_z["ErrorMsg"];}else{_x=_q;}if(_w<0){_m.on_fire_onerror(_m,"ObjectError",_x,_m,9901,null,null,-1);}else{_m.on_fire_onsuccess(_v[1],_w,_x,_d,_v);}}}}catch(e){if(e&&e.message){_x=e.message;}_m.on_fire_onerror(_m,"ObjectError",_x,_m,9901,null,null,-1);}};};var _j=[];var _o=0;for(_g=0;_g<_f;_g++ ){if(_e[_g]._p_value&&_e[_g]._files){for(var _p in _e[_g]._files){_j[_o++ ]=_e[_g]._files[_p];}}}if(_j.length>0){nexacro._uploadTransferXHR(_j,"",_c,_n());_b=true;}}else{for(_g=0;_g<_f;_g++ ){if(_e[_g]._p_value){_b=true;if(nexacro._Browser=="MobileSafari"||nexacro._Browser=="Gecko"){nexacro._request_submit(this._unique_id,_c,this);}else{nexacro._submit(this._unique_id,_c,this._hidden_frame_handle,null,_e[_g]._p_value);}break;}}}}return _b;};if(nexacro._Browser=="Runtime"){_pFileUpload._on_manager_onload=function(_a,_b,_c,_d,_e,_f,_g){var _h;var _i=-1;var _j="fail to get";if(_a<0){nexacro._onHttpSystemError(this,true,this,_d,_c,_e,_c,null);var _k=nexacro.MakeCommunicationError(this,_d,_c,_e,_c,null,_g);this.on_fire_onerror(this,"ObjectError",_k.message,this,_e,null,null,-1);}else{try{if(_b){_b=_b.trimLeft();var _l=_b.slice(0,5).toUpperCase();if(_l.indexOf("<?XML")==0){_l="XML";}if(_l.indexOf("SSV")==0){_l="SSV";}if(_l.indexOf("{")==0){_l="JSON";}if(_l=="XML"){_b=nexacro._getXMLDocument(this._unique_id,_b,_c);}if(nexacro._Deserializer[_l]){_h=nexacro._Deserializer[_l](_b);}var _m=_h?_h[0]:null;if(_m){_i=_m["ErrorCode"];_j=_m["ErrorMsg"];}if(_i<0){this.on_fire_onerror(this,"ObjectError",_j,this,9901,null,null,-1);}else{this.on_fire_onsuccess(_h[1],_i,_j,_c,_h);}}else if(_a!=4){this.on_fire_onerror(this,"ObjectError",_j,this,9901,null,null,-1);}}catch(e){if(e&&e.message){_j=e.message;}this.on_fire_onerror(this,"ObjectError",_j,this,9901,null,null,-1);}}};}else{_pFileUpload._bindUploadDataHandler=function(_a){var _b=this._comp;if(this.readyState==4){var _c;var _d=-1;var _e="fail to get";if(this.status==200){var _f=this.responseText.trim();var _g=_f.slice(0,5).toUpperCase();if(_g.indexOf("<?XML")==0){_g="XML";}if(_g.indexOf("SSV")==0){_g="SSV";}if(_g.indexOf("{")==0){_g="JSON";}if(_g=="XML"){_f=this.responseXML;}if(nexacro._Deserializer[_g]){_c=nexacro._Deserializer[_g](_f);}var _h=_c?_c[0]:null;if(_h){_d=_h["ErrorCode"];_e=_h["ErrorMsg"];}if(_d<0){_b.on_fire_onerror(_b,"ObjectError",_e,_b,9901,null,null,-1);}else{_b.on_fire_onsuccess(_c[1],_d,_e,this.responseURL,_c);}}else{_b.on_fire_onerror(_b,"ObjectError",_e,_b,9901,null,null,-1);}}};_pFileUpload._on_manager_onload=function(_a,_b,_c,_d,_e,_f){var _g,_h,_i;var _j=-1;var _k="fail to get";try{if(this._iscors){nexacro._setPostMessage(this._unique_id,this);this._iscors=false;}else{_h=nexacro._getXMLDocument(this._unique_id,_b,_c);if(_h){_c=_h.URL?_h.URL:_c;if(_c=="about:blank"){return;}this.context=this._p_parent;var _l=nexacro._getContentType(_h);if(_l=="XML"){_b=_h;_i="XML";}else{_b=nexacro._getDataFromDOM(_h,this).trimLeft();_i=_b.substring(0,5).toUpperCase();if(_i.indexOf("<?XML")==0){_i="XML";}if(_i.indexOf("SSV")==0){_i="SSV";}if(_i.indexOf("{")==0){_i="JSON";}}if(nexacro._Deserializer[_i]){_g=nexacro._Deserializer[_i](_b);}var _m=_g?_g[0]:null;if(_m){_j=_m["ErrorCode"];_k=_m["ErrorMsg"];}else{_k=_b;}if(_j<0){this.on_fire_onerror(this,"ObjectError",_k,this,9901,null,null,-1);}else{this.on_fire_onsuccess(_g[1],_j,_k,_c,_g);}}}}catch(e){if(e&&e.message){_k=e.message;}this.on_fire_onerror(this,"ObjectError",_k,this,9901,null,null,-1);}};}_pFileUpload.on_after_load=function(_a){var _b=_a.message;var _c,_d,_e;var _f=-1;var _g="failed to get";var _h="";try{_e=_b.slice(0,5).toUpperCase();if(_e.indexOf("SSV")==0){_h=_b;_e="SSV";}else if(_e.indexOf("{")==0){_h=_b;_e="JSON";}else{var _i=nexacro.trimLeft(decodeURIComponent(_b.replace(/\+/g," ")));var _j=nexacro._parseXMLDocument(_i);_d=_j.URL?_j.URL:_j.url;if(_d=="about:blank"){return;}this.context=this._p_parent;if(nexacro._getContentType(_j)=="XML"){_h=_j;_e="XML";}else{_h=nexacro._getDataFromDOM(_j,this).trimLeft();_e=_h.substring(0,5).toUpperCase();if(_e.indexOf("SSV")==0){_e="SSV";}else if(_e.indexOf("{")==0){_e="JSON";}}}if(nexacro._Deserializer[_e]){_c=nexacro._Deserializer[_e](_h);}var _k=_c?_c[0]:null;if(_k){_f=(_k["ErrorCode"]!=null)?_k["ErrorCode"]:-1;_g=(_k["ErrorMsg"]!=null)?_k["ErrorMsg"]:"";}else{_g=_h;}if(_f<0){this.on_fire_onerror(this,"ObjectError","failed to get",this,9901,null,null,-1);}else{this.on_fire_onsuccess(_c[1],_f,_g,_d,_c);}delete this.context;}catch(e){this.on_fire_onerror(this,"ObjectError",_g,this,9901,null,null,-1);}};_pFileUpload._setParamter=nexacro._emptyFn;_pFileUpload._on_item_onfindclick=function(_a,_b){this.set_index(_a._p_index);var _c=false;var _d=nexacro._indexOf(this._items,_a);if(this._isEnable()&&this.enableevent){_c=this.on_fire_onfindclick(_a,_d);if(_c){try{nexacro._findclick(this._unique_id,_a.name,_a,this._hidden_frame_handle,this._p_filefilter,this._p_filefilterindex);}catch(_b){var _e=nexacro.MakeError("ObjectError",this,"comp_incorrect_file");this.on_fire_onerror(this,_e.name,_e.message,_a,null,null,null,_d);}}}return _c;};_pFileUpload._on_item_onitemclick=function(_a,_b){this.set_index(_a._p_index);if(this.visible&&this._isEnable()&&this.enableevent){this.on_fire_onitemclick(_a,_a._p_index);}};_pFileUpload._on_getAccessibilityAdditionalLabel=function(){if(this._first_focus==false){var _a=0;var _b=this._items;if(_b){_a=_b.length;}return ( +this._p_index)+1+" "+_a;}return "";};_pFileUpload._isAccessibilityEnable=function(){return true;};_pFileUpload.on_get_accessibility_label=function(){var _a="";return _a;};_pFileUpload.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=this._p_index;var _e=this._items;while(true){if(_a){if(!this._buttonFlag&&_e[_d].fileitembutton._isAccessibilityEnable()){this._editFlag=false;this._buttonFlag=true;}else{if(_e[ ++_d]){this._editFlag=true;this._buttonFlag=false;if(!_e[_d].fileitemedit._isAccessibilityEnable()){continue;}}else{this._editFlag=false;this._buttonFlag=false;return this._want_arrow=false;}}}else{if(!this._editFlag&&_e[_d].fileitemedit._isAccessibilityEnable()){this._editFlag=true;this._buttonFlag=false;}else{if(_e[ --_d]){this._editFlag=false;this._buttonFlag=true;if(!_e[_d].fileitembutton._isAccessibilityEnable()){continue;}}else{this._editFlag=false;this._buttonFlag=false;return this._want_arrow=false;}}}break;}if(_e[_d]){if(this._editFlag){_e[_d].fileitemedit._setAccessibilityNotifyEvent();}else if(this._buttonFlag){_e[_d].fileitembutton._setAccessibilityNotifyEvent();}this._p_index=_d;this._p_value=_e[_d]._p_value;return this._want_arrow=true;}else{return this._want_arrow=false;}};_pFileUpload._setAccessibilityNotifyEvent=function(_a){this._editFlag=false;this._buttonFlag=false;var _b;var _c=this._items;var _d=_c.length;if(_d){if(_a){_b=0;if(_c[_b]&&_c[_b].fileitemedit._isAccessibilityEnable()){this._editFlag=true;}else if(_c[_b]&&_c[_b].fileitembutton._isAccessibilityEnable()){this._buttonFlag=true;}}else{_b=_d -1;if(_c[_b]&&_c[_b].fileitembutton._isAccessibilityEnable()){this._buttonFlag=true;}else if(_c[_b]&&_c[_b].fileitemedit._isAccessibilityEnable()){this._editFlag=true;}}if(this._buttonFlag||this._editFlag){if(this._editFlag){_c[_b].fileitemedit._setAccessibilityNotifyEvent();}else if(this._buttonFlag){_c[_b].fileitembutton._setAccessibilityNotifyEvent();}this._p_index=_b;this._p_value=_c[_b]._p_value;return this._want_arrow=true;}}this._want_arrow=false;return nexacro.Component.prototype._setAccessibilityNotifyEvent.call(this,_a);};_pFileUpload._setAccessibilityInfoByHover=function(_a){if(_a){this._editFlag=false;this._buttonFlag=false;var _b=_a._p_parent;if(_a instanceof nexacro.FileItemEditCtrl){this._editFlag=true;}else if(_a instanceof nexacro.FileItemButtonCtrl){this._buttonFlag=true;}this._p_index=_b._p_index;this._want_arrow=true;_a._setAccessibilityNotifyEvent();return true;}return false;};_pFileUpload.on_fire_onerror=function(_a,_b,_c,_d,_e,_f,_g,_h){if(this.onerror&&this.onerror._has_handlers){var _i=new nexacro.FileUploadErrorEventInfo(_a,"onerror",_b,_c,_d,_e,_f,_g,_h);return this.onerror._fireEvent(this,_i);}return true;};_pFileUpload.on_fire_user_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onlbuttondown&&this.onlbuttondown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.FileUploadMouseEventInfo(this,"onlbuttondown",_a,_b,_c,_d,_n._p_index,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onlbuttondown._fireEvent(this,_o);}return false;};_pFileUpload.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _o=this._getEventInfoComponent(_l);var _p=new nexacro.FileUploadMouseEventInfo(this,"onlbuttonup",_a,_b,_c,_d,_o._p_index,_e,_f,_g,_h,_i,_j,_k,_l,_n);return this.onlbuttonup._fireUserEvent(this,_p);}return false;};_pFileUpload.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._items;var _i=this._p_index;var _j=nexacro.Event;var _k=this._getWindow();var _l=(_k&&_k._keydown_element)?_k._keydown_element:null;if(_a==_j.KEY_TAB){if((_d&&_i==0)||(!_d&&_i==_h.length-1)){this._want_tab=false;this.set_index(-1);}else{if(_d){_i-- ;}else{_i++ ;}this.set_index(_i);}if(_l){_l._event_stop=true;}}else{var _m=this._getItemHeight();var _n=this._getClientHeight();var _o=_m?_n/_m:0;var _p=Math.ceil(_o);var _q=this._vscroll_pos;var _r=this.vscrollbar.max;if(_a==nexacro.Event.KEY_PAGE_UP){_q=_q-(_m* _p);if(_q<0){_q=0;}this.vscrollbar.set_pos(_q);}else if(_a==nexacro.Event.KEY_PAGE_DOWN){_q=_q+(_m* _p);if(_q>_r){_q=_r;}this.vscrollbar.set_pos(_q);}if(nexacro._enableaccessibility){var _s=_a==_j.KEY_UP;var _t=_a==_j.KEY_DOWN;var _u=this._p_accessibilityenable;var _v=this.buttonaccessibilityenable;var _w=this.editaccessibilityenable;if(_s||_t){var _x=this._getWindow();if((_s&&_i<0)||(_t&&this._buttonFlag&&_i==_h.length-1)){this._want_arrow=false;}else{if(_w||_v){while(true){if(_s){if(!this._editFlag&&_w){this._p_index=-1;this._editFlag=true;this._buttonFlag=false;}else{_i-- ;if(_v){if(_i<0){if(_u){this._editFlag=false;this._buttonFlag=false;_x._removeFromCurrentFocusPath(this,false);this._setFocus(false);}else{this._want_arrow=false;break;}}else{this._p_index=-1;this._editFlag=false;this._buttonFlag=true;}}else{if(_i>0){this._buttonFlag=false;continue;}else{this._want_arrow=false;if(_u){this._editFlag=false;this._buttonFlag=false;_x._removeFromCurrentFocusPath(this,false);this._setFocus(false);}}}}}else{if(!this._editFlag&&_w){_i++ ;this._editFlag=true;this._buttonFlag=false;}else{if(_v){this._p_index=-1;this._editFlag=false;this._buttonFlag=true;}else{if(_i<_h.length-1){this._editFlag=false;continue;}else{this._want_arrow=false;break;}}}}this.set_index(_i);this._want_arrow=true;if(_l){_l._event_stop=true;}break;}}}}else{this._want_arrow=false;}}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pFileUpload._on_focus=function(_a,_b,_c,_d,_e,_f){nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);var _g,_h;var _i=this._items;var _j=_i.length;if(_j){this._want_tab=true;_h=_b=="shifttabkey";if(_b=="shifttabkey"||_b=="tabkey"){this._editFlag=false;this._buttonFlag=true;if(_h){_g=this._p_index<0?_j -1:this._p_index;}else{_g=this._p_index<0?0:this._p_index;this._first_focus=true;}this._p_index=-1;this.set_index(_g);}else{_h=_b=="upkey";if(nexacro._enableaccessibility&&this._isAccessibilityEnable()){this._editFlag=false;this._buttonFlag=false;this._want_arrow=true;var _k=nexacro._toBoolean(this._p_accessibilityenable);var _l=nexacro._toBoolean(this.editaccessibilityenable);var _m=nexacro._toBoolean(this.buttonaccessibilityenable);if(_h){this._p_index=-1;_g=_j -1;if(_m){this._buttonFlag=true;}else if(_l){this._editFlag=true;}}else{_g=-1;if(_k==false){_g=0;this._p_index=-1;if(_l){this._editFlag=true;}else if(_m){this._buttonFlag=true;}this._first_focus=(this._editFlag||this._buttonFlag)?true:false;}}this.set_index(_g);}}if(nexacro._enableaccessibility){this._first_focus=false;}}};_pFileUpload._find_item_status=function(_a){this._editFlag=(_a.fileitemedit._status=="focused");this._buttonFlag=(_a.fileitembutton._status=="focused");};_pFileUpload.on_fire_ondeleteitem=function(_a,_b){if(this.ondeleteitem&&this.ondeleteitem._has_handlers){var _c=new nexacro.FileUploadItemEventInfo(_a,"ondeleteitem",_b);this.ondeleteitem._fireEvent(this,_c);}};_pFileUpload.on_fire_onfindclick=function(_a,_b){if(this.onfindclick&&this.onfindclick._has_handlers){var _c=new nexacro.FileUploadItemEventInfo(this,"onfindclick",_b);return this.onfindclick._fireCheckEvent(this,_c);}return true;};_pFileUpload.on_fire_onitemchanged=function(_a,_b,_c,_d){if(this.onitemchanged&&this.onitemchanged._has_handlers){var _e=new nexacro.FileUploadItemChangeEventInfo(_a,"onitemchanged",_b,_c,_d);this.onitemchanged._fireEvent(this,_e);}};_pFileUpload.on_fire_onitemclick=function(_a,_b){if(this.onitemclick&&this.onitemclick._has_handlers){var _c=new nexacro.FileUploadItemEventInfo(this,"onitemclick",_b);this.onitemclick._fireEvent(this,_c);}};_pFileUpload.on_fire_onappenditem=function(_a,_b){if(this.onappenditem&&this.onappenditem._has_handlers){var _c=new nexacro.FileUploadItemEventInfo(_a,"onappenditem",_b);this.onappenditem._fireEvent(this,_c);}};_pFileUpload.on_fire_onsuccess=function(_a,_b,_c,_d,_e){var _f=nexacro.getApplication();if(_f){_f._endCommProgress();}if(this.onsuccess&&this.onsuccess._has_handlers){var _g;if(_e&&_e.length>0){_g=new nexacro.FileUploadEventInfo(this,"onsuccess",_a,_b,_c,_d);return this.onsuccess._fireEvent(this,_g);}else{_g=new nexacro.FileUploadEventInfo(this,"onsuccess",_a,undefined,undefined,_d);return this.onsuccess._fireEvent(this,_g);}}};_pFileUpload.on_fire_oncontextmenu=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.oncontextmenu&&this.oncontextmenu._has_handlers){var _n=this._getEventInfoComponent(_b);var _o=new nexacro.FileUploadContextMenuEventInfo(this,"oncontextmenu",_c,_h,_i,_j,_n._p_index,_k,_l,_d,_e,_f,_g,_a,_b,_m);return this.oncontextmenu._fireEvent(this,_o);}return false;};_pFileUpload.on_fire_user_onrbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onrbuttondown&&this.onrbuttondown._has_handlers){var _n=this._getEventInfoComponent(_l);var _o=new nexacro.FileUploadMouseEventInfo(this,"onrbuttondown",_a,_b,_c,_d,_n._p_index,_e,_f,_g,_h,_i,_j,_k,_l,_m);return this.onrbuttondown._fireEvent(this,_o);}return false;};_pFileUpload.on_fire_user_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _o=this._getEventInfoComponent(_l);var _p=new nexacro.FileUploadMouseEventInfo(this,"onrbuttonup",_a,_b,_c,_d,_o._p_index,_e,_f,_g,_h,_i,_j,_k,_l,_n);return this.onrbuttonup._fireUserEvent(this,_p);}return false;};_pFileUpload._createFileItem=function(_a){var _b=this._is_created?false:true;var _c=this._p_itemcount<1?this._last_id=0: ++this._last_id;var _d=new nexacro._FileUploadItemControl("upfile"+_c,0,0,0,0,null,null,null,null,null,null,this);_d._setControl();_d._setItemInfo(_a,this._p_buttontext);_d.createComponent(_b);_d._setEventHandler("onfindclick",this._on_item_onfindclick,this);_d._setEventHandler("onitemclick",this._on_item_onitemclick,this);return _d;};_pFileUpload._recalcLayout=function(){var _a=this._items;var _b=_a.length;if(!_b){return;}var _c=this._getClientLeft();var _d;var _e=this._getClientWidth();var _f=this._getItemHeight();for(var _g=0;_g<_b;_g++ ){_d=_f* _g;_a[_g].move(_c,_d,_e,_f,null,null);}};_pFileUpload._updateFileList=function(){this.filelist=[];for(var _a=0,_b=this._items.length,_c;_a<_b;_a++ ){_c=this._items[_a]._files;if(_c){for(var _d=0,_e=_c.length,_f;_d<_e;_d++ ){_f=new nexacro.VirtualFile("upfile"+_a+"-"+_d,"",_c[_d]);_f._setFullPath(_c[_d].fullpath||"");_f._setPath(_c[_d].path||"");_f._setFileName(_c[_d].name||"");this.filelist.push(_f);}}}};_pFileUpload._setText=function(_a){if(this._p_text!=_a){this._p_text=_a;}};_pFileUpload._setValue=function(_a){if(this._p_value!=_a){this._p_value=_a;}};_pFileUpload._setControlFlag=function(_a){this._editFlag=(_a.fileitemedit._status=="focused");this._buttonFlag=(_a.fileitembutton._status=="focused");};_pFileUpload._getItem=function(_a){if(_a>=0&&this._items.length>0){return this._items[_a];}return null;};_pFileUpload._getItemHeight=function(){var _a=this._items[0];if(!_a){return 0;}var _b=this._p_itemheight;if(_b){return _b;}return _a._on_getFitSize()[1];};_pFileUpload._getEventInfoComponent=function(_a){while(!_a._is_eventinfo_control){_a=_a._p_parent;}return _a;};_pFileUpload._isPopupFrame=function(){return this._onPopupWin;};delete _pFileUpload;nexacro._FileUploadItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);if(nexacro._OS=="iOS"&&nexacro._isHybrid&&nexacro._isHybrid()){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;var _m='""';var _n={id:this._id,div:"FileUpload",method:"constructor",params:_m};var _o=JSON.stringify(_n);nexacro.Device.exec(_o);}};var _pFileUploadItemControl=nexacro._createPrototype(nexacro.Component,nexacro._FileUploadItemControl);nexacro._FileUploadItemControl.prototype=_pFileUploadItemControl;_pFileUploadItemControl._type_name="FileUploadItemControl";_pFileUploadItemControl._is_subcontrol=true;_pFileUploadItemControl.fileitemedit=null;_pFileUploadItemControl.fileitembutton=null;_pFileUploadItemControl._p_buttontext="find";_pFileUploadItemControl._p_index=0;_pFileUploadItemControl._p_value=undefined;_pFileUploadItemControl._oldvalue="";_pFileUploadItemControl._newvalue="";_pFileUploadItemControl._p_index=0;_pFileUploadItemControl._p_accessibilityrole="none";_pFileUploadItemControl._event_list={"onfindclick":1,"onitemclick":1};_pFileUploadItemControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.fileitemedit=new nexacro._FileUploadItemEditControl("fileuploaditemedit",0,0,0,0,null,null,null,null,null,null,this);var _c=this.fileitembutton=new nexacro._FileUploadItemButtonControl("fileuploaditembutton",0,0,0,0,null,null,null,null,null,null,this);_b.set_readonly("true");_b.createComponent(true);_c.set_text(this._p_buttontext);_c.createComponent(true);}};_pFileUploadItemControl.on_created_contents=function(){var _a=this._p_parent;if(_a){nexacro._append_hidden_item(_a._unique_id,this.name,this._on_itemedit_onchange,this,_a._hidden_frame_handle,_a._p_multiselect);}var _b=this.fileitemedit;var _c=this.fileitembutton;_b.on_created();_b._setEventHandler("oneditclick",this._on_itemedit_oneditclick,this);_b._setEventHandler("onlbuttondown",this._on_itemedit_oneditlbuttondown,this);_c.on_created();_c._setEventHandler("onclick",this._on_itembutton_onfindclick,this);_c._setEventHandler("onlbuttondown",this._on_itembutton_onfindlbuttondown,this);};_pFileUploadItemControl.on_destroy_contents=function(){if(this.fileitemedit){this._p_parent.filepathedits.delete_item(this.id);this.fileitemedit.destroy();this.fileitemedit=null;}if(this.fileitembutton){this._p_parent.filefindbuttons.delete_item(this.id);this.fileitembutton.destroy();this.fileitembutton=null;}if(this._files){this._files=null;}var _a=this._p_parent;nexacro._remove_hidden_item(_a._unique_id,this.name,_a._hidden_frame_handle);if(this._input_node){this._input_node=null;}if(nexacro._OS=="iOS"&&nexacro._isHybrid&&nexacro._isHybrid()){delete nexacro.Device._userCreatedObj[this._id];var _b='""';var _c={id:this._id,div:"FileUpload",method:"destroy",params:_b};var _d=JSON.stringify(_c);nexacro.Device.exec(_d);}};_pFileUploadItemControl.on_create_contents_command=function(){var _a="";var _b=this.fileitemedit;if(_b){_a+=_b.createCommand();}var _c=this.fileitembutton;if(_c){_a+=_c.createCommand();}return _a;};_pFileUploadItemControl.on_attach_contents_handle=function(_a){var _b=this.fileitemedit;var _c=this.fileitembutton;_b.attachHandle(_a);_b._setEventHandler("oneditclick",this._on_itemedit_oneditclick,this);_b._setEventHandler("onlbuttondown",this._on_itemedit_oneditlbuttondown,this);_c.attachHandle(_a);_c._setEventHandler("onclick",this._on_itembutton_onfindclick,this);_c._setEventHandler("onlbuttondown",this._on_itembutton_onfindlbuttondown,this);var _d=this._p_parent;nexacro._append_hidden_item(_d._unique_id,this.name,this._on_itemedit_onchange,this,_d._hidden_frame_handle,_d._multiselect);};_pFileUploadItemControl.on_change_containerRect=function(_a,_b){if(this._is_created_contents){this._recalcLayout();}};_pFileUploadItemControl.on_getIDCSSSelector=function(){return "fileuploaditem";};_pFileUploadItemControl._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=[0,0];var _e=[0,0];var _f=this._getCurrentStyleBorder();if(_f){_b+=_f._getBorderWidth();_c+=_f._getBorderHeight();}var _g=this._getCurrentStylePadding();if(_g){_b+=_g.left+_g.right;_c+=_g.top+_g.bottom;}var _h=this.fileitemedit;if(_h){_d=_h._on_getFitSize();}var _i=this.fileitembutton;if(_i){_e=_i._on_getFitSize();}var _j=this._getPropItemHeight();if(_j==null){_j=Math.max(_d[1],_e[1]);}var _k=this._getPropButtonSize();if(_k==null){_k=_e[0];}_b+=_k+_d[1];_c+=_j;return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pFileUploadItemControl._on_itemedit_oneditclick=function(_a,_b){if(this.onitemclick&&this.onitemclick._has_handlers){this.onitemclick._fireEvent(this,_b);}return false;};_pFileUploadItemControl._on_itemedit_oneditlbuttondown=function(_a,_b){this._accessibility_find_focus_flag(true,false);this._p_parent.set_index(this._p_index);};_pFileUploadItemControl._on_itemedit_onchange=function(_a,_b,_c){if(nexacro._OS=="iOS"&&nexacro._isHybrid&&nexacro._isHybrid()){var _d=_a;_a="";_c=[];for(var _g=0;_g<_d.virtualfiles.length;_g++ ){_a+=_d.virtualfiles[_g].filename;_a+=", ";_c[_g]=_d.virtualfiles[_g].filename;}if(!!_a){_a=_a.substr(0,_a.length-2);}_b=_d.virtualfiles;}if(this._p_value!=_a){this._p_value=_a;this._oldvalue=this._newvalue;this._newvalue=_c;var _e=this.fileitemedit;if(_e){_e.set_value(_a);}var _f=this._p_parent;if(_f){_f.set_index(this._p_index);_f._setText(_a);_f._setValue(_a);}if(_b){this._files=_b;if(_f){_f._updateFileList();}}_f.on_fire_onitemchanged(this,this._p_index,this._oldvalue,this._newvalue);}};_pFileUploadItemControl._on_itembutton_onfindclick=function(_a,_b){if(this.onfindclick&&this.onfindclick._has_handlers){return this.onfindclick._fireCheckEvent(this,_b);}return false;};_pFileUploadItemControl._on_itembutton_onfindlbuttondown=function(_a,_b){this._accessibility_find_focus_flag(false,true);this._p_parent.set_index(this._p_index);};_pFileUploadItemControl._recalcLayout=function(){var _a=this.getElement();if(_a){var _b=this.fileitemedit;var _c=this.fileitembutton;var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=[0,0];if(_c){_f=_c._on_getFitSize();}var _g=this._getPropItemHeight();if(_g==null){var _h=[0,0];if(_b){_h=_b._on_getFitSize();}_g=Math.max(_h[1],_f[1]);}else{if(_g>_e){_g=_e;}}var _i=this._getPropButtonSize();if(_i==null){_i=_f[0];}if(_d<_i){_i=_d;}var _j=this._getClientLeft();var _k=this._getClientTop();var _l=_d-_i;var _m=_g;var _n=_j+_l;var _o=_k;var _p=_i;var _q=_g;if(_b){_b.move(_j,_k,_l,_m,null,null);}if(_c){_c.move(_n,_o,_p,_q,null,null);}}};_pFileUploadItemControl._setItemInfo=function(_a,_b){this._p_index=_a;this._p_buttontext=_b;};_pFileUploadItemControl._getPropButtonSize=function(){var _a=this._p_parent;if(_a){return _a._p_buttonsize;}return;};_pFileUploadItemControl._getPropItemHeight=function(){var _a=this._p_parent;if(_a){return _a._p_itemheight;}return;};_pFileUploadItemControl._accessibility_find_focus_flag=function(_a,_b){if(nexacro._enableaccessibility){this._p_parent._editFlag=_a;this._p_parent._buttonFlag=_b;}};_pFileUploadItemControl._isPopupFrame=function(){return this._p_parent._onPopupWin;};_pFileUploadItemControl._changeFiles=function(_a){this._files=[];if(_a){var _b=[];this._files.length=_a.length;var _c;for(var _f=0;_f<this._files.length;_f++ ){_c=new nexacro.VirtualFile("upfile"+this._p_index+"-"+_f);var _d=_a[_f];var _e=_d.lastIndexOf("\\");if(_e>0){_c.fullpath=_d;_c.path=_d.substring(0,_e+1);_c.filename=_d.substring(_e+1);}else{_c.filename=_d;}_b[_f]=_c;}this._files=_b;}else{this._files=[];}};delete _pFileUploadItemControl;nexacro._FileUploadItemEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Edit.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pFileUploadItemEditControl=nexacro._createPrototype(nexacro.Edit,nexacro._FileUploadItemEditControl);nexacro._FileUploadItemEditControl.prototype=_pFileUploadItemEditControl;_pFileUploadItemEditControl._type_name="EditControl";_pFileUploadItemEditControl._is_subcontrol=true;_pFileUploadItemEditControl._is_eventinfo_control=false;_pFileUploadItemEditControl._getAccessibilityLabel=function(_a){var _b="";if(this._p_parent._p_parent._first_focus){var _c=this._p_parent._p_parent;var _d=_c.getElement();if(_d){_b=_d._makeAccessibilityLabelbyReadtype();}}_b+=" "+nexacro.Component.prototype._getAccessibilityLabel.call(this,_a);return _b;};_pFileUploadItemEditControl.on_focus_basic_action=function(_a,_b){if(this._isAccessibilityEnable()){this.on_apply_accessibility();}return nexacro.Component.prototype.on_focus_basic_action.call(this,_a,_b);};delete _pFileUploadItemEditControl;nexacro._FileUploadItemButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pFileUploadItemButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._FileUploadItemButtonControl);nexacro._FileUploadItemButtonControl.prototype=_pFileUploadItemButtonControl;_pFileUploadItemButtonControl._type_name="ButtonControl";_pFileUploadItemButtonControl._is_subcontrol=true;_pFileUploadItemButtonControl._is_eventinfo_control=false;_pFileUploadItemButtonControl._getAccessibilityLabel=function(_a){var _b="";if(this._p_parent._p_parent._first_focus){var _c=this._p_parent._p_parent;var _d=_c.getElement();if(_d){_b=_d._makeAccessibilityLabelbyReadtype();}}_b+=" "+nexacro.Component.prototype._getAccessibilityLabel.call(this,_a);return _b;};_pFileUploadItemButtonControl.on_keyup_default_action=function(_a,_b,_c,_d,_e,_f){var _g=this._getWindow();if(_g){var _h=_g._cur_ldown_elem||_g._keydown_element;if(_h==this._cur_ldown_elem){if(_a==13||(_a==32&&!this._isComponentBlockProcess())){this._click(_a);}}}this._cur_ldown_elem=null;};delete _pFileUploadItemButtonControl;}if(!nexacro.FileUpTransfer){nexacro.FileUpTransferEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.id=this.eventid=_b||"onsuccess";this.fromobject=this.fromreferenceobject=_a;this.datasets=_c;this.code=_d;this.message=_e;this.url=_f;};var _pFileUpTransferEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.FileUpTransferEventInfo);nexacro.FileUpTransferEventInfo.prototype=_pFileUpTransferEventInfo;_pFileUpTransferEventInfo._type_name="FileUpTransferEventInfo";delete _pFileUpTransferEventInfo;nexacro.FileUpTransferErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.ErrorEventInfo.call(this,_a,_b,_c,_d,_e,_f,_g,_h);};var _pFileUpTransferErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.FileUpTransferErrorEventInfo);nexacro.FileUpTransferErrorEventInfo.prototype=_pFileUpTransferErrorEventInfo;_pFileUpTransferErrorEventInfo._type_name="FileUpTransferErrorEventInfo";delete _pFileUpTransferErrorEventInfo;nexacro.FileUpTransferProgressEventInfo=function(_a,_b,_c,_d,_e){this.id=this.eventid=_b||"onprogress";this.fromobject=this.fromreferenceobject=_a;this.loaded=_c;this.total=_d;};var _pFileUpTransferProgressEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.FileUpTransferProgressEventInfo);nexacro.FileUpTransferProgressEventInfo.prototype=_pFileUpTransferProgressEventInfo;_pFileUpTransferProgressEventInfo._type_name="FileUpTransferProgressEventInfo";delete _pFileUpTransferProgressEventInfo;nexacro.FileUpTransfer=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);this._p_filelist=new nexacro.Collection();this._p_postdatalist=new nexacro.Collection();if(nexacro._OS=="Android"&&nexacro._isHybrid&&nexacro._isHybrid()){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;var _c={id:this._id,div:"FileUpTransfer",method:"constructor",params:""};var _d=JSON.stringify(_c);nexacro.Device.exec(_d);}};var _pFileUpTransfer=nexacro.FileUpTransfer.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.FileUpTransfer);_pFileUpTransfer._type_name="FileUpTransfer";_pFileUpTransfer._p_url="";_pFileUpTransfer._handle=null;_pFileUpTransfer._aborted=false;_pFileUpTransfer._user_aborted=false;_pFileUpTransfer._TransferType={ALL:1,PART:2,PARTALL:3};_pFileUpTransfer._event_list={"onsuccess":1,"onerror":1,"onprogress":1};_pFileUpTransfer.destroy=function(){if(this._p_filelist){this._p_filelist.destroy();this._p_filelist=null;}if(this._p_postdatalist){this._p_postdatalist.destroy();this._p_postdatalist=null;}if(nexacro._OS=="Android"&&nexacro._isHybrid&&nexacro._isHybrid()){delete nexacro.Device._userCreatedObj[this._id];var _a={id:this._id,div:"FileUpTransfer",method:"destroy",params:""};var _b=JSON.stringify(_a);nexacro.Device.exec(_b);}return true;};_pFileUpTransfer.set_filelist=nexacro._emptyFn;_pFileUpTransfer.set_postdatalist=nexacro._emptyFn;_pFileUpTransfer.set_url=function(_a){if(this._p_url!=_a){this._p_url=_a;}};_pFileUpTransfer._properties=[{name:"filelist",readonly:true},{name:"postdatalist",readonly:true},{name:"url"}];nexacro._defineProperties(_pFileUpTransfer,_pFileUpTransfer._properties);_pFileUpTransfer.setFile=function(_a,_b){if(!_b||!(_b instanceof nexacro.VirtualFile)){return false;}return this._p_filelist.set_item(_a,_b);};_pFileUpTransfer.addFile=function(_a,_b){if(_a===null||_a===undefined||_a===""||this._p_filelist[_a]){return -1;}if(!_b||!(_b instanceof nexacro.VirtualFile)){return -1;}return this._p_filelist.add_item(_a,_b);};_pFileUpTransfer.removeFile=function(_a){return this._p_filelist.delete_item(_a);};_pFileUpTransfer.removeFileByIndex=function(_a){_a=_a|0;if(_a<0||_a>=this._p_filelist.length){return -1;}return this._p_filelist.delete_item(_a);};_pFileUpTransfer.getFileArrayByFileName=function(_a){var _b=null;for(var _c=0,_d,_e=this._p_filelist,_f=_e.length;_c<_f;_c++ ){_d=_e[_c];if(_a==_d.filename){if(!_b){_b=[];}_b.push(_d);}}return _b;};_pFileUpTransfer.getIndexArrayByFileName=function(_a){var _b=null;for(var _c=0,_d=this._p_filelist,_e=_d.length;_c<_e;_c++ ){if(_a==_d[_c].filename){if(!_b){_b=[];}_b.push(_c);}}return _b;};_pFileUpTransfer.existFile=function(_a){var _b=false;if(!_a||!(_a instanceof nexacro.VirtualFile)){return _b;}for(var _c=0,_d=this._p_filelist,_e=_d.length;_c<_e;_c++ ){if(nexacro._isEqualTransferFile(_d[_c],_a)){_b=true;break;}}return _b;};_pFileUpTransfer.setPostData=function(_a,_b){if(!_a){return;}this._p_postdatalist.setItem(_a,_b);};_pFileUpTransfer.removePostData=function(_a){this._p_postdatalist.delete_item(_a);};_pFileUpTransfer.getPostData=function(_a){return this._p_postdatalist.getItem(_a);};_pFileUpTransfer.clearFileList=function(){this._p_filelist.clear();};_pFileUpTransfer.clearPostDataList=function(){this._p_postdatalist.clear();};_pFileUpTransfer.upload=function(_a){this._aborted=false;this._user_aborted=false;_a=_a?nexacro._getServiceLocation(_a,null,null,false):(this._p_url?nexacro._getServiceLocation(this._p_url,null,null,false):"");if(!_a){return;}nexacro._uploadTransfer(this._p_filelist,this._p_postdatalist,_a,-1,this);};_pFileUpTransfer.on_load=function(_a,_b,_c){if(_a){var _d=_a[0];var _e=_a[1];if(_d){var _f=_d["ErrorCode"];var _g=_d["ErrorMsg"];if(_f<0){return this.on_fire_onerror("ObjectError",_g,this,9901,_b,_b,_c);}else{return this.on_fire_onsuccess(_e,_f,_g,_b,_c);}}}return this.on_fire_onerror("ObjectError","fail to get",this,9901,_b,_b,_c);};_pFileUpTransfer.on_message=function(_a){var _b;var _c=_a.data[0];var _d=_a.data[1];var _e=_a.message;if(_e){var _f;var _g=nexacro.trimLeft(decodeURIComponent(_e.replace(/\+/g," ")));var _h=nexacro._parseXMLDocument(_g);if(nexacro._getContentType(_h)=="XML"){_e=_h;_f="XML";}else{_f=_e.substring(0,5).toUpperCase();if(_f.indexOf("<?XML")==0){_f="XML";}if(_f.indexOf("SSV")==0){_f="SSV";}if(_f.indexOf("{")==0){_f="JSON";}}if(nexacro._Deserializer[_f]){_b=nexacro._Deserializer[_f](_e);}}this.on_load(_b,_c,_d);};_pFileUpTransfer.on_load_android_webview=function(_a){if(_a.status<0){this.on_error(9901,"",_a.httpcode,_a._p_url);}else if(_a.status==4){this.on_progress(_a.loaded,_a.total);}else{var _b=_a.data.trimLeft();if(_b){var _c=_b.slice(0,5).toUpperCase();if(_c.indexOf("<?XML")==0){_c="XML";}if(_c.indexOf("SSV")==0){_c="SSV";}if(_c.indexOf("{")==0){_c="JSON";}if(_c=="XML"){_b=nexacro._parseXMLDocument(_b);}if(nexacro._Deserializer[_c]){_b=nexacro._Deserializer[_c](_b);}this.on_load(_b,_a._p_url);}}};_pFileUpTransfer.on_error=function(_a,_b,_c,_d,_e){this.on_fire_onerror("ObjectError",_b,this,_c||_a,_d,_d,_e);};_pFileUpTransfer.on_progress=function(_a,_b,_c){this.on_fire_onprogress(_a,_b,_c);};_pFileUpTransfer.on_fire_onsuccess=function(_a,_b,_c,_d,_e){if(this.onsuccess&&this.onsuccess._has_handlers){var _f=new nexacro.FileUpTransferEventInfo(this,"onsuccess",_a,_b,_c,_d,_e);this.onsuccess._fireEvent(this,_f);}};_pFileUpTransfer.on_fire_onerror=function(_a,_b,_c,_d,_e,_f,_g){if(this.onerror&&this.onerror._has_handlers){var _h=new nexacro.FileUpTransferErrorEventInfo(this,"onerror",_a,_b,_c,_d,_e,_f,_g);this.onerror._fireEvent(this,_h);}};_pFileUpTransfer.on_fire_onprogress=function(_a,_b,_c){if(this.onprogress&&this.onprogress._has_handlers){var _d=new nexacro.FileUpTransferProgressEventInfo(this,"onprogress",_a,_b,_c);return this.onprogress._fireEvent(this,_d);}return true;};_pFileUpTransfer._getForm=function(){if(this.parent instanceof nexacro.Form){return this.parent;}return null;};_pFileUpTransfer._getTransferType=function(){return this._TransferType[this.type.toUpperCase()]||0;};delete _pFileUpTransfer;}if(!nexacro.VideoPlayer){nexacro.VideoPlayStateChangedEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"onplaystatuschanged";this.fromobject=this.fromreferenceobject=_a;this.newstate=_c;};var _pPlayStatusChangedInfo=nexacro._createPrototype(nexacro.Event,nexacro.VideoPlayStateChangedEventInfo);nexacro.VideoPlayStateChangedEventInfo.prototype=_pPlayStatusChangedInfo;_pPlayStatusChangedInfo._type_name="VideoPlayStatusChangedInfo";delete _pPlayStatusChangedInfo;nexacro.VideoCurrentTimeChangedEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"oncurrenttimechanged";this.fromobject=this.fromreferenceobject=_a;this.currenttime=_c;};var _pCurrentTimeChangedInfo=nexacro._createPrototype(nexacro.Event,nexacro.VideoCurrentTimeChangedEventInfo);nexacro.VideoCurrentTimeChangedEventInfo.prototype=_pCurrentTimeChangedInfo;_pCurrentTimeChangedInfo._type_name="VideoCurrentTimeChangedInfo";delete _pCurrentTimeChangedInfo;nexacro.VideoErrorEventInfo=function(_a,_b,_c,_d,_e,_f){nexacro.ErrorEventInfo.call(this,_a,_b,_c,_d,_e,_f,undefined,undefined);};var _pVideoErrorInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.VideoErrorEventInfo);nexacro.VideoErrorEventInfo.prototype=_pVideoErrorInfo;_pVideoErrorInfo._type_name="VideoErrorInfo";delete _pVideoErrorInfo;nexacro.VideoPlayer=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pVideo=nexacro.VideoPlayer.prototype=nexacro._createPrototype(nexacro.Component,nexacro.VideoPlayer);_pVideo._type_name="VideoPlayer";_pVideo._p_codebase="";_pVideo._p_mimetype="";_pVideo._p_url="";_pVideo._p_adjustalpha=false;_pVideo._p_aspectratio="";_pVideo._p_currenttime=0;_pVideo._p_duration=0;_pVideo._p_mute=false;_pVideo._p_repeat=false;_pVideo._p_showcontrolbar=false;_pVideo._p_videosize={};_pVideo._p_autoplay=false;_pVideo._p_status="stop";_pVideo._p_volume=50;_pVideo._p_vr360mode=false;_pVideo._obj_id="";_pVideo._obj_elem=null;_pVideo._params=null;_pVideo._url="";_pVideo._new_currenttime=0;_pVideo._is_simple_control=true;_pVideo._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondrop":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"onmove":1,"onsize":1,"onsuccess":1,"onerror":1,"onappenditem":1,"ondeleteitem":1,"onitemclick":1,"onfindclick":1,"onitemchanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncurrenttimechanged":1,"onplaystatuschanged":1};_pVideo.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._obj_elem=new nexacro._VideoPlayerPluginElement(_a);_b.setElementSize(this._getClientWidth(),this._getClientHeight());}};_pVideo.on_create_contents_command=function(){this.on_apply_mute();this.on_apply_volume();this.on_apply_repeat();this.on_apply_autoplay();this.on_apply_showcontrolbar();this.on_apply_url();this.on_apply_vr360mode();return this._obj_elem.createCommand();};_pVideo.on_attach_contents_handle=function(_a){if(this._obj_elem){this._obj_elem.attachHandle(_a);}};_pVideo.on_created_contents=function(_a){var _b=this._obj_elem;if(_b){_b.component=this;_b.create(_a);_b.initEvent();this.on_apply_adjustalpha();this.on_apply_mute();this.on_apply_volume();this.on_apply_repeat();this.on_apply_autoplay();this.on_apply_showcontrolbar();this.on_apply_url();this.on_apply_vr360mode();}};_pVideo.on_destroy_contents=function(){var _a=this._obj_elem;if(_a){_a.destroy();this._obj_elem=null;}};_pVideo.on_update_position=function(_a,_b,_c){nexacro.Component.prototype.on_update_position.call(this,_a,_b,_c);var _d=this._obj_elem;if(_d){_d.on_update_position();}};_pVideo.on_change_containerRect=function(_a,_b){var _c=this._obj_elem;if(_c){_c.setElementSize(_a,_b);}};_pVideo.set_duration=nexacro._emptyFn;_pVideo.set_status=nexacro._emptyFn;_pVideo.set_videosize=nexacro._emptyFn;_pVideo.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);nexacro.Component.prototype.set_visible.call(this,_a);var _b=this._obj_elem;if(_b){if(_b.setElementVisible!=null){_b.setElementVisible(_a);}}};_pVideo.set_codebase=function(_a){this._p_codebase=_a;this.on_apply_codebase();};_pVideo.on_apply_codebase=function(){var _a=this._obj_elem;if(_a){var _b=this._p_codebase;if(_b){_a.setElementCodebase(_b);}}};_pVideo.set_url=function(_a){if(this._p_url!=_a){this._p_url=_a;_a=nexacro._getURIValue(_a);if(_a==system.convertRealPath(_a)||undefined===system.convertRealPath(_a)){_a=nexacro._getServiceLocation(_a,this._getRefFormBaseUrl());}else{_a=system.convertRealPath(_a);}if(this._url!=_a){this._url=_a;this.on_apply_url();}}};_pVideo.on_apply_url=function(){if(this._url===""){return;}var _a=this._obj_elem;if(_a){_a._setVideoUrl("URL",this._url);}};_pVideo.set_adjustalpha=function(_a){_a=nexacro._toBoolean(_a);if(this._p_adjustalpha!=_a){this._p_adjustalpha=_a;this.on_apply_adjustalpha();}};_pVideo.on_apply_adjustalpha=function(){var _a=this._obj_elem;if(_a){_a.setElementAdjustAlpha(this._p_adjustalpha);}};_pVideo.set_currenttime=function(_a){_a= +_a;if(isNaN(_a)){return;}if(_a<0){_a=0;}else if(_a>this._p_duration){_a=this._p_duration;}this._new_currenttime=_a;this.on_apply_currenttime();};_pVideo.on_apply_currenttime=function(){var _a=this._obj_elem;if(_a){var _b=this._new_currenttime;if(_b>-1){_a._setVideoCurrentTime("currentPosition",_b);}}};_pVideo.set_mute=function(_a){_a=nexacro._toBoolean(_a);if(this._p_mute!=_a){this._p_mute=_a;this.on_apply_mute();}};_pVideo.on_apply_mute=function(){var _a=this._obj_elem;if(_a){_a._setVideoMute("settings",this._p_mute);}};_pVideo.set_repeat=function(_a){_a=nexacro._toBoolean(_a);if(this._p_repeat!=_a){this._p_repeat=_a;this.on_apply_repeat();}};_pVideo.on_apply_repeat=function(){var _a=this._obj_elem;if(_a){_a._setVideoLoop("AutoRewind",this._p_repeat);}};_pVideo.set_showcontrolbar=function(_a){_a=nexacro._toBoolean(_a);if(this._p_showcontrolbar!=_a){this._p_showcontrolbar=_a;this.on_apply_showcontrolbar();}};_pVideo.on_apply_showcontrolbar=function(){var _a=this._obj_elem;if(_a){_a._setVideoShowControlBar("uiMode",this._p_showcontrolbar);}};_pVideo.set_autoplay=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoplay!=_a){this._p_autoplay=_a;this.on_apply_autoplay();}};_pVideo.on_apply_autoplay=function(){var _a=this._obj_elem;if(_a){_a._setVideoAutoPlay("AutoStart",this._p_autoplay);}};_pVideo.set_volume=function(_a){_a= +_a;if(isNaN(_a)){return;}if(_a<0){_a=0;}else if(_a>100){_a=100;}if(this._p_volume!=_a){this._p_volume=_a;this.on_apply_volume();}};_pVideo.on_apply_volume=function(){var _a=this._obj_elem;if(_a){_a._setVideoVolume("Volume",this._p_volume);}};_pVideo.on_apply_prop_enable=function(){var _a=this._obj_elem;if(_a){var _b=this._p_enable;if(_b!=null){_a._setVideoEnable("Enabled",_b);}}};_pVideo.set_vr360mode=function(_a){_a=nexacro._toBoolean(_a);if(this._p_vr360mode!=_a){this._p_vr360mode=_a;this.on_apply_vr360mode();}};_pVideo.on_apply_vr360mode=function(){var _a=this._obj_elem;if(_a){_a._setVideo360VRMode("VRMode",this._p_vr360mode);}};_pVideo.play=function(){var _a=this._obj_elem;if(_a){_a._play();}};_pVideo.pause=function(){var _a=this._obj_elem;if(_a){_a._pause();}};_pVideo.rewind=function(){var _a=this._obj_elem;if(_a){_a._rewind();}};_pVideo.stop=function(){var _a=this._obj_elem;if(_a){_a._stop();}};_pVideo.on_fire_onerror=function(_a,_b,_c,_d,_e){if(this.onerror&&this.onerror._has_handlers){var _f=new nexacro.VideoErrorEventInfo(_a,"onerror",_b,_c,_d,_e);return this.onerror._fireEvent(this,_f);}};_pVideo.on_fire_oncurrenttimechanged=function(_a,_b){if(this.oncurrenttimechanged&&this.oncurrenttimechanged._has_handlers){var _c=new nexacro.VideoCurrentTimeChangedEventInfo(_a,"oncurrenttimechanged",_b);return this.oncurrenttimechanged._fireEvent(this,_c);}};_pVideo.on_fire_onplaystatuschanged=function(_a,_b){if(this.onplaystatuschanged&&this.onplaystatuschanged._has_handlers){var _c=new nexacro.VideoPlayStateChangedEventInfo(_a,"onplaystatuschanged",_b);return this.onplaystatuschanged._fireEvent(this,_c);}};_pVideo._on_currenttimechanged=function(_a){var _b=this._p_currenttime;if(_b!=_a){this.on_fire_oncurrenttimechanged(this,_a);}this._p_currenttime=_a;};_pVideo._on_volumechangechanged=function(_a,_b){this._p_volume=_a;this._p_mute=_b;};_pVideo._on_statuschanged=function(_a){var _b=this._p_status;if(_b!=_a){this._p_status=_a;this.on_fire_onplaystatuschanged(this,_a);}};_pVideo._on_error=function(_a,_b,_c){this.on_fire_onerror(this,_a,_b,this,_c);};_pVideo._properties=[{name:"aspectratio",readonly:true},{name:"autoplay"},{name:"duration",readonly:true},{name:"currenttime"},{name:"mute"},{name:"repeat"},{name:"showcontrolbar"},{name:"url"},{name:"videosize",readonly:true},{name:"volume"}];nexacro._defineProperties(_pVideo,_pVideo._properties);delete _pVideo;}if(!nexacro.WebBrowser){nexacro.WebLoadCompEventInfo=function(_a,_b,_c){this.id=this.eventid=_c||"onloadcompleted";this.fromobject=this.fromreferenceobject=_a;this.url=_b;};var _pWebLoadCompEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.WebLoadCompEventInfo);nexacro.WebLoadCompEventInfo.prototype=_pWebLoadCompEventInfo;_pWebLoadCompEventInfo._type_name="WebLoadCompEventInfo";delete _pWebLoadCompEventInfo;nexacro.WebUserNotifyEventInfo=function(_a,_b,_c){this.id=this.eventid=_c||"onusernotify";this.fromobject=this.fromreferenceobject=_a;this.userdata=_b;};var _pWebUserNotifyEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.WebUserNotifyEventInfo);nexacro.WebUserNotifyEventInfo.prototype=_pWebUserNotifyEventInfo;_pWebUserNotifyEventInfo._type_name="WebUserNotifyEventInfo";delete _pWebUserNotifyEventInfo;nexacro.WebBrowser=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pWebBrowser=nexacro._createPrototype(nexacro.Component,nexacro.WebBrowser);nexacro.WebBrowser.prototype=_pWebBrowser;_pWebBrowser._type_name="WebBrowser";_pWebBrowser._ifrm_elem=null;_pWebBrowser._old_evt_name="";_pWebBrowser.window=null;_pWebBrowser.document=null;_pWebBrowser._p_url="";_pWebBrowser._p_useurlhistory=true;_pWebBrowser._url="";_pWebBrowser._current_url="";_pWebBrowser._p_accessibilityrole="webbrowser";_pWebBrowser._p_accessibilityleavemessage="";_pWebBrowser._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"oncontextmenu":1,"onloadcompleted":1,"onusernotify":1,"ondevicebuttonup":1};_pWebBrowser.on_get_accessibility_label=function(){return this.id;};_pWebBrowser.on_create_contents=function(){var _a=this.getElement();if(_a){this._ifrm_elem=new nexacro._WebBrowserPluginElement(_a);this._ifrm_elem.setElementSize(this._getClientWidth(),this._getClientHeight());}};_pWebBrowser.on_create_contents_command=function(){return "";};_pWebBrowser.on_attach_contents_handle=function(_a){this.on_created_contents(_a);return;};_pWebBrowser.on_created_contents=function(_a){var _b=this._ifrm_elem;if(_b){_b.component=this;_b.create(_a);_b.initEvent();this.document=_b._document;this.window=_b._winodw;nexacro._observeSysEvent(_b.handle,"mouseover","onmouseover",this._webbrowser_mouseover);}if(this._url===""){this._url="about:blank";}this.on_apply_url();this._on_apply_accessibilityleavemessage();};_pWebBrowser.on_destroy_contents=function(){var _a=this._ifrm_elem;if(_a){nexacro._stopSysObserving(_a.handle,"mouseover","onmouseover",this._webbrowser_mouseover);this.window=null;this.document=null;_a.destroy();this._ifrm_elem=null;}};_pWebBrowser.on_update_position=function(_a,_b,_c){nexacro.Component.prototype.on_update_position.call(this,_a,_b,_c);var _d=this._ifrm_elem;if(_d){_d.on_update_position();}};_pWebBrowser.on_change_containerRect=function(_a,_b){var _c=this._ifrm_elem;if(_c){_c.setElementSize(_a,_b);}};_pWebBrowser.on_fire_onloadcompleted=function(_a,_b){if(this.onloadcompleted&&this.onloadcompleted._has_handlers){var _c=new nexacro.WebLoadCompEventInfo(_a,_b);_c.eventid="onloadcompleted";return this.onloadcompleted._fireEvent(this,_c);}return true;};_pWebBrowser.on_fire_onusernotify=function(_a,_b){if(this.onusernotify&&this.onusernotify._has_handlers){var _c=new nexacro.WebUserNotifyEventInfo(_a,_b);_c.eventid="onusernotify";return this.onusernotify._fireEvent(this,_c);}return true;};_pWebBrowser.on_ondevicebuttonup_default_action=function(_a){if(_a==2){this.goback();}};_pWebBrowser._getDlgCode=function(_a){var _b=this._ifrm_elem;if(_b){if((!_b._prev_outfocus_message_elem||(_b._prev_outfocus_message_elem._killfocus_flag==true&&_a==nexacro.Event.KEY_UP))||(!_b._next_outfocus_message_elem||(_b._next_outfocus_message_elem._killfocus_flag==true&&_a==nexacro.Event.KEY_DOWN))){this._want_arrow=false;}else{this._want_arrow=true;}}return {want_tab:true,want_return:true,want_escape:false,want_chars:false,want_arrows:this._want_arrow};};_pWebBrowser.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Event;if(_a==_h.KEY_TAB){this._getWindow()._keydown_element._event_stop=false;}else if(nexacro._enableaccessibility){var _i=this._ifrm_elem;if(_i){_i._setElementInternalFocus(_a);}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pWebBrowser.on_killfocus_basic_action=function(_a,_b){var _c=this._ifrm_elem;if(_c&&this._old_evt_name=="downkey"){this._old_evt_name="";}nexacro.Component.prototype.on_killfocus_basic_action.call(this);};_pWebBrowser.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){if(nexacro._enableaccessibility){this._setAccessibilityStatFocus(_b);}this._apply_setfocus(_b,_a,_d,_f);};_pWebBrowser._apply_setfocus=function(_a,_b,_c,_d){var _e=this._ifrm_elem;if(_e){_e._setElementFocus();}};_pWebBrowser._webbrowser_mouseover=function(){if(this._linked_element&&!this._linked_element._document){nexacro._initDragInfo();nexacro._cur_track_info=null;}};_pWebBrowser.set_text=function(_a){_a=nexacro._toString(_a);if(_a&&_a!=this._p_text){this._p_text=_a;this._displaytext=_a.replace(/ /g,"\u00a0");this.on_apply_text(_a);}};_pWebBrowser.set_enable=function(_a){_a=nexacro._toBoolean(_a);if(this._p_enable!=_a){this._p_enable=_a;if(this._is_created){var _b=(this._p_parent._real_enable&&_a);if(this._real_enable!=_b){this._real_enable=_b;this._changeStatus("disabled",!_b);this.on_apply_prop_enable(this._real_enable);}}}};_pWebBrowser.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);nexacro.Component.prototype.set_visible.call(this,_a);var _b=this._ifrm_elem;if(_b){_b.setElementVisible(_a);}};_pWebBrowser.set_cookiesynctype=function(){};_pWebBrowser.set_url=function(_a){if(_a==undefined){return;}var _b=_a.toString();if(_b!="about:blank"&&_b.match(/http:\/\/|file:\/\/|https:\/\//gi)==null){_b="http://"+_b;}this._url=_b;this._p_url=_a;this.on_apply_url();};_pWebBrowser.set_useurlhistory=function(_a){this._p_useurlhistory=nexacro._toBoolean(_a);};_pWebBrowser.set_accessibilityleavemessage=function(_a){this._p_accessibilityleavemessage=_a;this._on_apply_accessibilityleavemessage();};_pWebBrowser.on_apply_url=function(){if(this._url==="http://"||this._url==="file://"||this._url==="https://"||this._url===""){return;}var _a=this._ifrm_elem;if(_a){_a._setUrl(this._url,this._p_useurlhistory);}};_pWebBrowser.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);this._on_apply_accessibilityleavemessage();};_pWebBrowser.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(this._ifrm_elem){this._ifrm_elem.setElementEnable(_a);}};_pWebBrowser._properties=[{name:"text"},{name:"enable"},{name:"visible"},{name:"cookiesynctype"},{name:"url"},{name:"useurlhistory"},{name:"accessibilityleavemessage"}];nexacro._defineProperties(_pWebBrowser,_pWebBrowser._properties);_pWebBrowser.stoploading=function(){};_pWebBrowser.reload=function(){var _a=this._ifrm_elem;if(_a){if(this._isCrossDomain(this._current_url)){var _b=this._url;_a._setUrl("");_a._setUrl(_b);}else{_a._setGo();}}};_pWebBrowser.goback=function(){var _a=this._ifrm_elem;if(_a){if(!this._isCrossDomain(this._current_url)){return _a._setBack();}}};_pWebBrowser.goforward=function(){var _a=this._ifrm_elem;if(_a){if(!this._isCrossDomain(this._current_url)){return _a._setForward();}}};_pWebBrowser.on_load_handler=function(_a){this._current_url=_a;this.document=this._ifrm_elem._getDoc();if(_a!="about:blank"){this.on_fire_onloadcompleted(this,_a==""?this._p_url:_a);}};_pWebBrowser.getProperty=function(_a){var _b=this._ifrm_elem;if(_b){return _b.getProperty(_a);}};_pWebBrowser.setProperty=function(_a,_b){var _c=this._ifrm_elem;if(_c){_c.setProperty(_a,_b);}};_pWebBrowser.callMethod=function(){var _a=this._ifrm_elem;if(_a){return nexacro._WebBrowserPluginElement.prototype.callMethod.apply(_a,arguments);}};_pWebBrowser.addEventHandler=function(_a,_b,_c){if(_a in this._event_list==false){this._event_list[_a]=1;}return nexacro.Component.prototype.addEventHandler.call(this,_a,_b,_c);};_pWebBrowser.removeEventHandler=function(_a,_b,_c){return nexacro.Component.prototype.removeEventHandler.call(this,_a,_b,_c);};_pWebBrowser._isCrossDomain=function(_a){if(_a==""){return true;}var _b=this._getRootForm();var _c=_b._getRefFormBaseUrl();if(_c.match(/^(file):\/\//)){return false;}if(nexacro._isSameOrigin(_a,_c)){return false;}return true;};_pWebBrowser._on_apply_accessibilityleavemessage=function(){var _a=this._p_accessibilityleavemessage;if(_a){var _b=this._ifrm_elem;if(_b){_b._setElementLeaveMessage(_a);}}};_pWebBrowser.updateWindow=function(){var _a=this._ifrm_elem;if(_a){_a.updateWindow();}};delete _pWebBrowser;}if(!nexacro.GoogleMap){nexacro.GoogleMapEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.id=this.eventid=_b;this.fromobject=this.fromreferenceobject=_a;this.centerlatitude=_c.latitude;this.centerlongitude=_c.longitude;this.latitude=_d.latitude;this.longitude=_d.longitude;this.viewmode=_e;this.zoomlevel=_f;this.addresses=_g;};var _pGoogleMapEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GoogleMapEventInfo);nexacro.GoogleMapEventInfo.prototype=_pGoogleMapEventInfo;_pGoogleMapEventInfo._type_name="GoogleMapEventInfo";delete _pGoogleMapEventInfo;nexacro.GoogleMapErrorEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b;this.fromobject=this.fromreferenceobject=_a;this.errortype="ObjectError";this.statuscode=_c;this.errormsg=_d;};var _pGoogleMapErrorEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GoogleMapErrorEventInfo);nexacro.GoogleMapErrorEventInfo.prototype=_pGoogleMapErrorEventInfo;_pGoogleMapErrorEventInfo._type_name="GoogleMapErrorEventInfo";delete _pGoogleMapErrorEventInfo;nexacro.GoogleMapClickEventInfo=function(_a,_b,_c){this.id=this.eventid=_b;this.fromobject=this.fromreferenceobject=_a;this.latitude=_c.latitude;this.longitude=_c.longitude;};var _pGoogleMapClickEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GoogleMapClickEventInfo);nexacro.GoogleMapClickEventInfo.prototype=_pGoogleMapClickEventInfo;_pGoogleMapClickEventInfo._type_name="GoogleMapClickEventInfo";delete _pGoogleMapClickEventInfo;nexacro.GoogleMapDragEventInfo=function(_a,_b,_c){this.id=this.eventid=_b;this.fromobject=this.fromreferenceobject=_a;this.latitude=_c.latitude;this.longitude=_c.longitude;};var _pGoogleMapDragEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.GoogleMapDragEventInfo);nexacro.GoogleMapDragEventInfo.prototype=_pGoogleMapDragEventInfo;_pGoogleMapDragEventInfo._type_name="GoogleMapDragEventInfo";delete _pGoogleMapDragEventInfo;if(nexacro.Device&&nexacro._OS=="Android"&&nexacro._Browser=="Runtime"){nexacro.GoogleMap=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h);this._ifrm_elem=null;this.window=null;this.document=null;this._p_latitude=0;this._p_longitude=0;this.centerlocation={latitude:0,longitude:0};this.location={latitude:0,longitude:0};this.showmode=0;this._p_zoomlevel=15;this._p_showzoom=false;this.showmode=false;this.shownavigator=false;this._p_viewmode=0;this._p_language=undefined;this._p_region=undefined;this._p_items=[];this.itemsname=[];this._itemsname=[];this._items=[];this._infowindowname=[];this._infowindow=[];this.bSensor=false;this.bLoaded=false;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onload":1,"onerror":1,"onrecvsuccess":1,"oncenterchanged":1,"onmapdragstart":1,"onmapdrag":1,"onmapdragend":1,"ondevicebuttonup":1};this._location={latitude:0,longitude:0};this._pixel={x:0,y:0};};var _pGoogleMap=nexacro._createPrototype(nexacro.Component,nexacro.GoogleMap);nexacro.GoogleMap.prototype=_pGoogleMap;_pGoogleMap._type_name="GoogleMap";_pGoogleMap.on_create_contents=function(){var _a=this.getElement();if(_a){this._ifrm_elem=new nexacro._GoogleMapPluginElement(_a);this._ifrm_elem.setElementSize(this._getClientWidth(),this._getClientHeight());}};_pGoogleMap.on_create_contents_command=function(){var _a=this.getElement();if(_a){this._ifrm_elem=new nexacro._GoogleMapPluginElement(_a);this._ifrm_elem.setElementSize(this._getClientWidth(),this._getClientHeight());return this._ifrm_elem.createCommand();}return "";};_pGoogleMap.on_attach_contents_handle=function(_a){if(this._ifrm_elem){this._ifrm_elem.attachHandle(_a);}};_pGoogleMap.on_created_contents=function(_a){var _b=this._ifrm_elem;if(_b){_b.create(_a);_b.initEvent();this.document=_b._document;this.window=_b._winodw;}};_pGoogleMap.on_destroy_contents=function(){var _a=this._ifrm_elem;if(_a){this.window=null;this.document=null;_a.destroy();this._ifrm_elem=null;}this._p_items=null;this.itemsname=null;this._itemsname=null;this._items=null;this._infowindowname=null;this._infowindow=null;};_pGoogleMap.on_update_position=function(_a,_b,_c){nexacro.Component.prototype.on_update_position.call(this,_a,_b,_c);var _d=this._ifrm_elem;if(_d){_d.on_update_position();}};_pGoogleMap.on_change_containerRect=function(_a,_b){var _c=this._ifrm_elem;if(_c){_c.setElementSize(_a,_b);}};_pGoogleMap.on_fire_onload=function(_a,_b,_c,_d,_e,_f,_g){if(this.onload&&this.onload._has_handlers){var _h=new nexacro.GoogleMapEventInfo(_a,_b,_c,_d,_e,_f,_g);return this.onload._fireEvent(this,_h);}return true;};_pGoogleMap.on_fire_onerror=function(_a,_b,_c,_d){if(this.onerror&&this.onerror._has_handlers){var _e=new nexacro.GoogleMapErrorEventInfo(_a,_b,_c,_d);return this.onerror._fireEvent(this,_e);}return true;};_pGoogleMap.on_fire_onrecvsuccess=function(_a,_b,_c,_d,_e,_f,_g){if(this.onrecvsuccess&&this.onrecvsuccess._has_handlers){var _h=new nexacro.GoogleMapEventInfo(_a,_b,_c,_d,_e,_f,_g);return this.onrecvsuccess._fireEvent(this,_h);}return true;};_pGoogleMap.on_fire_oncenterchanged=function(_a,_b,_c,_d,_e,_f,_g){this.centerlocation=_c;this._p_latitude=this.centerlocation.latitude;this._p_longitude=this.centerlocation.longitude;this._p_zoomlevel=_f;if(this.oncenterchanged&&this.oncenterchanged._has_handlers){var _h=new nexacro.GoogleMapEventInfo(_a,_b,_c,_d,_e,_f,_g);return this.oncenterchanged._fireEvent(this,_h);}return true;};_pGoogleMap.on_fire_onclick=function(_a,_b,_c){if(this.onclick&&this.onclick._has_handlers){var _d=new nexacro.GoogleMapClickEventInfo(_a,_b,_c);return this.onclick._fireEvent(this,_d);}return true;};_pGoogleMap.on_fire_ondrag=function(_a,_b,_c){if(this.ondrag&&this.ondrag._has_handlers){var _d=new nexacro.GoogleMapDragEventInfo(_a,_b,_c);return this.ondrag._fireEvent(this,_d);}return true;};_pGoogleMap.on_fire_onmapdragstart=function(_a,_b,_c){if(this.onmapdragstart&&this.onmapdragstart._has_handlers){var _d=new nexacro.GoogleMapDragEventInfo(_a,_b,_c);return this.onmapdragstart._fireEvent(this,_d);}return true;};_pGoogleMap.on_fire_onmapdrag=function(_a,_b,_c){if(this.onmapdrag&&this.onmapdrag._has_handlers){var _d=new nexacro.GoogleMapDragEventInfo(_a,_b,_c);return this.onmapdrag._fireEvent(this,_d);}return true;};_pGoogleMap.on_fire_onmapdragend=function(_a,_b,_c){if(this.onmapdragend&&this.onmapdragend._has_handlers){var _d=new nexacro.GoogleMapDragEventInfo(_a,_b,_c);return this.onmapdragend._fireEvent(this,_d);}return true;};_pGoogleMap._apply_setfocus=function(){var _a=this._ifrm_elem;if(_a){_a.setElementFocus(true);}};_pGoogleMap.set_text=function(_a){_a=nexacro._toString(_a);if(_a&&_a!=this.text){this.text=_a;this._displaytext=_a.replace(/ /g,"\u00a0");}};_pGoogleMap.set_viewmode=function(_a){if(_a!=null){this._p_viewmode=_a;var _b=this._ifrm_elem;if(_b){var _c='{"value":"'+this._p_viewmode+'"}';_b.setElementParam("viewmode",_c);}}else{return false;}};_pGoogleMap.set_zoomlevel=function(){};_pGoogleMap.set_showzoom=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this._p_showzoom=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this._p_showzoom=false;}else{return false;}var _b=this._ifrm_elem;if(_b){var _c='{"value":"'+this._p_showzoom+'"}';_b.setElementParam("showzoom",_c);}return true;}};_pGoogleMap.set_shownavigator=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.shownavigator=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.shownavigator=false;}else{return false;}var _b=this._ifrm_elem;if(_b){var _c='{"value":"'+this.shownavigator+'"}';_b.setElementParam("shownavigator",_c);}return true;}};_pGoogleMap.set_showmapscale=function(){};_pGoogleMap.set_showmode=function(){};_pGoogleMap.set_showcompass=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.showcompass=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.showcompass=false;}else{return false;}if(this.bLoaded){var _b=this._ifrm_elem;if(_b){var _c='{"value":"'+this.showcompass+'"}';_b.setElementParam("showcompass",_c);}}return true;}};_pGoogleMap.set_apikey=nexacro._emptyFn;_pGoogleMap.set_language=nexacro._emptyFn;_pGoogleMap.set_region=nexacro._emptyFn;_pGoogleMap.set_enable=function(_a){_a=nexacro._toBoolean(_a);if(this._p_enable!=_a){this._p_enable=_a;if(this._is_created){var _b=(this._p_parent._real_enable&&_a);if(this._ifrm_elem){this._ifrm_elem.setElementEnable(_b);}}}};_pGoogleMap.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);nexacro.Component.prototype.set_visible.call(this,_a);var _b=this._ifrm_elem;if(_b){if(_b.setElementVisible!=null){_b.setElementVisible(_a);}}};_pGoogleMap._properties=[{name:"apikey"},{name:"items",readonly:true},{name:"language"},{name:"latitude",readonly:true},{name:"longitude",readonly:true},{name:"region"},{name:"showzoom"},{name:"viewmode"},{name:"zoomlevel"},{name:"enable"},{name:"visible"}];nexacro._defineProperties(_pGoogleMap,_pGoogleMap._properties);_pGoogleMap.load=function(_a,_b,_c,_d,_e){var _f=0;if(_e!=null){try{_f=_e.toString().split(" ").join("");}catch(e){return false;}if(_e.length==0){return false;}var _g=0;try{_g=Number(_e.toString());}catch(e){return false;}if(_g>=0){this._p_zoomlevel=_g;}else{return false;}}if((_b!=null)&&(_c!=null)){_f=0;try{_f=_b.toString().split(" ").join("");}catch(e){return false;}if(_f.length==0){return false;}try{_f=_c.toString().split(" ").join("");}catch(e){return false;}if(_f.length==0){return false;}var _h=0;var _i=0;try{_h=Number(_b.toString());}catch(e){return false;}if(_h!=_h){return false;}try{_i=Number(_c.toString());}catch(e){return false;}if(_i!=_i){return false;}this.centerlocation.latitude=_h;this.centerlocation.longitude=_i;this._p_latitude=_h;this._p_longitude=_i;_pGoogleMap.centerlocation={latitude:_h,longitude:_i};}if(_d!=null){if(_d==0||(typeof (_d)=="string"&&_d=="0")){this._p_viewmode=0;}else if(_d==1||(typeof (_d)=="string"&&_d=="1")){this._p_viewmode=1;}else if(_d==2||(typeof (_d)=="string"&&_d=="2")){this._p_viewmode=2;}else if(_d==3||(typeof (_d)=="string"&&_d=="3")){this._p_viewmode=3;}else{return false;}}else{this._p_viewmode=0;}if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.bSensor=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.bSensor=false;}else{return false;}}else if(_a==null){this.bSensor=false;}var _j='{"bUseSensor":"'+this.bSensor+'","nLatitude":"'+this.centerlocation.latitude+'","nLongitude":"'+this.centerlocation.longitude+'","constViewMode":"'+this._p_viewmode+'","nZoomLevel":"'+this._p_zoomlevel+'"}';var _k=this._ifrm_elem;if(_k){_k._setLoad(_j);}this.bLoaded=true;return true;};_pGoogleMap.setMarkerLoc=function(_a,_b,_c){this._p_items[_a].location.latitude=_b;this._p_items[_a].location.longitude=_c;};_pGoogleMap.getAddress=function(_a,_b,_c,_d){if(_a==null||_b==null||_c<0){return false;}if(_c==null){_c=1;}var _e='{"nLatitude":"'+_a+'","nLongitude":"'+_b+'","nMaxResultCount":"'+_c+'","strLocale":"'+_d+'"}';var _f=this._ifrm_elem;if(_f){_f._getAddress(_e);}return true;};_pGoogleMap.getCoordinates=function(_a){if(_a==null||_a==""){return false;}var _b=this._ifrm_elem;if(_b){_b._getCoordinates(_a);}return true;};var _itemsname=[];var _items=[];var _infowindowname=[];var _infowindow=[];_pGoogleMap.addItem=function(_a,_b){var _c=this._ifrm_elem;if(_a==null||_b==null){return false;}if(_a==""||_b==""||_b=="undefined"||_a.trim()==""){return false;}if(typeof (this._p_items[_a])!="undefined"){this.on_fire_onerror(this,"onerror","1501","item is already exist.");return false;}if(_b instanceof nexacro.GoogleMapMarker||_b instanceof nexacro.GoogleMapPolyline||_b instanceof nexacro.GoogleMapPolygon||_b instanceof nexacro.GoogleMapCircle){this._p_items[_a]=_b;this._p_items.push(_a);if(this.bLoaded){if(_b._type==0||_b._type==1){_pGoogleMap.addMarker(_c,_a,_b);}else if(_b._type==2){_pGoogleMap.addPolyline(_c,_a,_b);}else if(_b._type==3){_pGoogleMap.addPolygon(_c,_a,_b);}else if(_b._type==4){_pGoogleMap.addCircle(_c,_a,_b);}}return true;}else{return false;}};_pGoogleMap.addMarker=function(_a,_b,_c){if(_c.imageurl.length>0){var _d=_c.imageurl.toString().split(" ").join("");if(_d.substring(0,9).toLowerCase()!="%userapp%"&&_d.substring(0,9).toLowerCase()!="%sd_card%"){var _e=nexacro._getFileCache(_d);if(null==_e){return false;}}}_itemsname.push(_b);_items[_b]="marker";_c._map=this;_c._name=_b;var _f='{"itemName":"'+_b+'","nLatitude":"'+_c._p_latitude+'","nLongitude":"'+_c._p_longitude+'","text":"'+_c.text+'","visible":"'+_c.visible+'","imageurl":"'+_c.imageurl+'","draggable":"'+_c.draggable+'"}';if(_a){_a._setMarker(_f);}};_pGoogleMap.addPolygon=function(_a,_b,_c){var _d,_e,_f,_g;var _h=[];var _i=[];_d=_c.locationdata.toString().split("]");for(_g=0;_g<(_d.length-1);_g++ ){_e=_d[_g].toString().split(",")[0].split(" ").join().substring(1);_f=_d[_g].toString().split(",")[1].split(" ").join().substring(1);if(_e.length>0&&_f.length>0){_h.push(_e);_i.push(_f);}}_itemsname.push(_b);_items[_b]="polygon";_c._map=this;_c._name=_b;var _j='{"itemName":"'+_b+'","nLatitude":'+JSON.stringify(_h)+',"nLongitude":'+JSON.stringify(_i)+',"visible":"'+_c.visible+'","linecolor":"'+_c.linecolor+'","linewidth":"'+_c.linewidth+'","fillbrushcolor":"'+_c.fillbrushcolor+'"}';if(_a){_a._setPolygon(_j);}};_pGoogleMap.addPolyline=function(_a,_b,_c){var _d,_e,_f,_g;var _h=[];var _i=[];_d=_c.locationdata.toString().split("]");for(_g=0;_g<(_d.length-1);_g++ ){_e=_d[_g].toString().split(",")[0].split(" ").join().substring(1);_f=_d[_g].toString().split(",")[1].split(" ").join().substring(1);if(_e.length>0&&_f.length>0){_h.push(_e);_i.push(_f);}}_itemsname.push(_b);_items[_b]="polyline";_c._map=this;_c._name=_b;var _j='{"itemName":"'+_b+'","nLatitude":'+JSON.stringify(_h)+',"nLongitude":'+JSON.stringify(_i)+',"visible":"'+_c.visible+'","linecolor":"'+_c.linecolor+'","linewidth":"'+_c.linewidth+'"}';if(_a){_a._setPolyline(_j);}};_pGoogleMap.addCircle=function(_a,_b,_c){_itemsname.push(_b);_items[_b]="circle";_c._map=this;_c._name=_b;var _d='{"itemName":"'+_b+'","nLatitude":'+_c._p_latitude+',"nLongitude":'+_c._p_longitude+',"radius":'+_c.radius+',"visible":"'+_c.visible+'"}';if(_a){_a._setCircle(_d);}};_pGoogleMap.removeItem=function(_a){var _b=this._ifrm_elem;if(_a==null){return false;}if(_a==""){return false;}if(typeof (this._p_items[_a])=="undefined"){this.on_fire_onerror(this,"onerror","1502","item is not exist.");return false;}else{delete this._p_items[_a];for(var _d=0;_d<this._p_items.length;_d++ ){if(this._p_items[_d]==_a){var _c=this._p_items.indexOf(this._p_items[_d]);this._p_items.splice(_c,_d+1);}}if(this.bLoaded){_pGoogleMap._removeItem(_b,_a);}return true;}};_pGoogleMap._removeItem=function(_a,_b){var _c='{"item":"'+_items[_b]+'","itemname":"'+_b+'"}';if(_a){_a._setRemove(_c);}delete _items[_b];for(var _d=0;_d<_itemsname.length;_d++ ){if(_itemsname[_d]==_b){_itemsname.splice(_d+1,_d+1);}}return true;};_pGoogleMap.on_load_handler=function(_a,_b,_c,_d,_e,_f){this.on_fire_onload(this,_a,_b,_c,_d,_e,_f);};_pGoogleMap.on_error_handler=function(_a,_b,_c){this.on_fire_onerror(this,_a,_b,_c);};_pGoogleMap.on_recvsuccess_handler=function(_a,_b,_c,_d,_e,_f){this.on_fire_onrecvsuccess(this,_a,_b,_c,_d,_e,_f);};_pGoogleMap.on_centerchanged_handler=function(_a,_b,_c,_d,_e){this.on_fire_oncenterchanged(this,_a,_b,_c,_d,_e);};_pGoogleMap.on_click_handler=function(_a,_b){this.on_fire_onclick(this,_a,_b);};_pGoogleMap.on_drag_handler=function(_a,_b){this.on_fire_ondrag(this,_a,_b);};_pGoogleMap.on_mapdragstart_handler=function(_a,_b){this.on_fire_onmapdragstart(this,_a,_b);};_pGoogleMap.on_mapdrag_handler=function(_a,_b){this.on_fire_onmapdrag(this,_a,_b);};_pGoogleMap.on_mapdragend_handler=function(_a,_b){this.on_fire_onmapdragend(this,_a,_b);};_pGoogleMap.callMethod=function(_a){if(this._ifrm_elem){this._ifrm_elem.callScriptMethod(_a);}};if(!nexacro.GoogleMapMarker){nexacro.GoogleMapMarker=function(_a){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=0;this.longitude=0;this.latitude=0;this.text="";this.imageurl="";this.visible=true;this.draggable=false;this.style={_GoogleMapMarkerID:0,set_parentID:function(_b){this._GoogleMapMarkerID=_b;},align:{_GoogleMapMarkerID:0,set_parentID:function(_b){this._GoogleMapMarkerID=_b;},halign:"center",valign:"middle",set_halign:function(_b){var _c=_b.toString().split(" ").join("").toLowerCase();if(_c=="left"||_c=="center"||_c=="right"){this.halign=_c;return true;}else{return false;}},set_valign:function(_b){var _c=_b.toString().split(" ").join("").toLowerCase();if(_c=="top"||_c=="middle"||_c=="bottom"){this.valign=_c;return true;}else{return false;}},$s:function(_a,_b,_c){this[_a]=_c;}},set_align:function(_b){var _c=_b.split(" ");var _d=true;if(_c.length!=2){return false;}_d=this.align.set_halign(_c[0]);if(!_d){return _d;}_d=this.align.set_valign(_c[1]);return _d;},$s:function(_a,_b,_c){this[_a]=_c;}};this._name=null;};var _pGoogleMapMarker=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapMarker);nexacro.GoogleMapMarker.prototype=_pGoogleMapMarker;_pGoogleMapMarker._type_name="GoogleMapMarker";_pGoogleMapMarker.set_longitude=function(_a){try{this.longitude=Number(_a.toString());}catch(e){return false;}return true;};_pGoogleMapMarker.set_latitude=function(_a){try{this.latitude=Number(_a.toString());}catch(e){return false;}return true;};_pGoogleMapMarker.set_text=function(_a){this.text=_a;return true;};_pGoogleMapMarker.set_imageurl=function(_a){if(_a){this._type=1;}else{this._type=0;}this.imageurl=_a;return true;};_pGoogleMapMarker.set_draggable=function(_a){if(_a==null){return false;}else if(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.draggable=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.draggable=false;}}else{return false;}};_pGoogleMapMarker.set_visible=function(_a){this.visible=nexacro._toBoolean(_a);return true;};}if(!nexacro.GoogleMapPolyline){nexacro.GoogleMapPolyline=function(_a){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=2;this.locationdata="";this.visible=true;this.linewidth="";this.linecolor="";this._name=null;};var _pGoogleMapPolyline=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapPolyline);nexacro.GoogleMapPolyline.prototype=_pGoogleMapPolyline;_pGoogleMapPolyline._type_name="GoogleMapPolyline";_pGoogleMapPolyline.set_locationdata=function(_a){var _b=_a.toString().split("]");if(_b.length<2){return false;}this.locationdata=_a;return true;};_pGoogleMapPolyline.set_linewidth=function(_a){try{this.linewidth=Number(_a.toString());}catch(e){return false;}return true;};_pGoogleMapPolyline.set_linecolor=function(_a){this.linecolor=_a;return true;};_pGoogleMapPolyline.set_visible=function(_a){this.visible=nexacro._toBoolean(_a);return true;};}if(!nexacro.GoogleMapPolygon){nexacro.GoogleMapPolygon=function(_a){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=3;this.locationdata="";this.visible=true;this.linewidth="";this.linecolor="";this.fillbrushcolor="";this._name=null;};var _pGoogleMapPolygon=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapPolygon);nexacro.GoogleMapPolygon.prototype=_pGoogleMapPolygon;_pGoogleMapPolygon._type_name="GoogleMapPolygon";_pGoogleMapPolygon.set_locationdata=function(_a){var _b=_a.toString().split("]");if(_b.length<2){return false;}this.locationdata=_a;return true;};_pGoogleMapPolygon.set_linewidth=function(_a){try{this.linewidth=Number(_a.toString());}catch(e){return false;}return true;};_pGoogleMapPolygon.set_linecolor=function(_a){this.linecolor=_a;return true;};_pGoogleMapPolygon.set_fillbrushcolor=function(_a){this.fillbrushcolor=_a;return true;};_pGoogleMapPolygon.set_visible=function(_a){this.visible=nexacro._toBoolean(_a);return true;};}if(!nexacro.GoogleMapCircle){nexacro.GoogleMapCircle=function(_a){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=4;this.longitude=0;this.latitude=0;this.radius=100;this.visible=true;this._name=null;};var _pGoogleMapCircle=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapCircle);nexacro.GoogleMapCircle.prototype=_pGoogleMapCircle;_pGoogleMapCircle._type_name="GoogleMapCircle";_pGoogleMapCircle.set_longitude=function(_a){try{this.longitude=Number(_a.toString());}catch(e){return false;}return true;};_pGoogleMapCircle.set_latitude=function(_a){try{this.latitude=Number(_a.toString());}catch(e){return false;}return true;};_pGoogleMapCircle.set_visible=function(_a){this.visible=nexacro._toBoolean(_a);return true;};_pGoogleMapCircle.set_radius=function(_a){this.radius=(_a==null)?100:Number(_a.toString());};}}else if((nexacro.Device&&nexacro._OS!="Windows")||nexacro._Browser!="Runtime"&&!(nexacro._Browser=="IE"&&nexacro._BrowserVersion<=8)){nexacro.googlemaps_loaded=false;nexacro.googlemaps_callback=function(){nexacro.googlemaps_loaded=true;};nexacro.load_googlemaps=function(_a,_b,_c){if(nexacro.googlemaps_loaded){return;}var _d=document.createElement("script");var _e="";_d.type="text/javascript";if(_a){_e+="key="+_a+"&";}if(_b){_e+="language="+_b+"&";}if(_c){_e+="region="+_c+"&";}_e+="callback=nexacro.googlemaps_callback";_d.src="https://maps.googleapis.com/maps/api/js?"+_e;document.body.appendChild(_d);};nexacro.GoogleMap=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this._p_name=_a||"";this._p_latitude=0;this._p_longitude=0;this.centerlocation={latitude:0,longitude:0};this.location={latitude:0,longitude:0};this.coordinates={latitude:0,longitude:0};this._map_elem=null;this._google_map=null;this.maptype=0;this._p_viewmode=0;this._p_zoomlevel=15;this.zoomalign_halign="left";this.zoomalign_valign="middle";this.showmode=false;this._p_showzoom=false;this.shownavigator=false;this.showmapscale=false;this._p_enableevent=true;this._p_apikey=null;this._p_language=undefined;this._p_region=undefined;this._p_items=[];this.itemsname=[];this._itemsname=[];this._items=[];this._infowindowname=[];this._infowindow=[];this.bSensor=false;this.bLoaded=false;this._p_enable=true;this.draggable=false;this.googleloaded=null;this._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondragstart":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondragend":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onload":1,"onrecvsuccess":1,"onoverlayclick":1,"oncenterchanged":1,"onviewmodechanged":1,"onzoomchanged":1,"onmapdragstart":1,"onmapdrag":1,"onmapdragend":1,"onerror":1,"ondevicebuttonup":1};};var _pGoogleMap=nexacro._createPrototype(nexacro.Component,nexacro.GoogleMap);nexacro.GoogleMap.prototype=_pGoogleMap;_pGoogleMap._type_name="GoogleMap";_itemsname=[];_items=[];_infowindowname=[];_infowindow=[];_pGoogleMap.on_create_contents=function(){var _a=this.getElement();if(_a){this._map_elem=new nexacro.Element(_a);this._map_elem.setElementSize(this._getClientWidth(),this._getClientHeight());}};_pGoogleMap.on_create_contents_command=function(){var _a=this.getElement();if(_a){this._map_elem=new nexacro.Element(_a);this._map_elem.setElementSize(this._getClientWidth(),this._getClientHeight());this._map_elem.setElementTypeCSSSelector("nexamap");return this._map_elem.createCommand();}return "";};_pGoogleMap.on_attach_contents_handle=function(_a){if(this._map_elem){this._map_elem.attachHandle(_a);}};_pGoogleMap.on_created_contents=function(_a){var _b=this._map_elem;if(_b){_b.setElementTypeCSSSelector("nexamap");_b.create(_a);this.document=_b._document;this.window=_b._winodw;}};_pGoogleMap.on_destroy_contents=function(){var _a=this._map_elem;if(_a){_a.destroy();this._map_elem=null;}};_pGoogleMap.on_change_containerRect=function(_a,_b){var _c=this._map_elem;if(_c){_c.setElementSize(_a,_b);}};_pGoogleMap.on_apply_text=function(){var _a=this._control_element;if(this._control_element){var _b=this._text_elem;if(!_b){_b=new nexacro.TextBoxElement(_a);this._text_elem=_b;_b.setElementSize(this._getClientWidth(),this._getClientHeight());if(this.currentstyle){_b.setElementColor(this.currentstyle.color);_b.setElementFont(this.currentstyle.font);_b.setElementAlign(this.currentstyle.align);}if(this._is_created){_b.create();}}if(this.text!=""){_b.setElementText(this.text);this._text_width=-1;this._text_height=-1;if(this._img_elem){if(this.currentstyle){this._updateElementPositions(this.currentstyle.align,this.currentstyle.imagealign);}}}else{_b.setElementText("");this._text_width=0;this._text_height=0;if(this._img_elem){if(this.currentstyle){this._updateElementPositions(this.currentstyle.align,this.currentstyle.imagealign);}}}}};_pGoogleMap.on_apply_expr=function(){var _a=this.getElement();var _b=this.expr;if(_a&&_b.length>0){_b=_b.trim().split(":");var _c=_b.length;var _d=new nexacro.ExprParser();var _e,_f;var _g;if(_c==1){_g=_b[0];}else{if(_b[0].trim().toUpperCase()!="EXPR"){_g=_b.join(":");}else{_g=_b.slice(1).join(":");}}_e=_d.makeExpr(this,_g);_f=nexacro._createInlineFunc(_e,[]);if(_f){try{this.set_text(_f.call(this));}catch(e){return;}}}};_pGoogleMap.on_apply_prop_taborder=function(){var _a=this._text_elem;if(_a){if(this.tabstop){_a.setElementTabIndex(this.taborder);}else{_a.setElementTabIndex(-1);}}};_pGoogleMap.set_draggable=function(_a){if(_a==null){return false;}else if(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.draggable=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.draggable=false;}}else{return false;}};_pGoogleMap.set_zoomalign=function(_a,_b){if(_a=="halign"){this.zoomalign_halign=_b;}else if(_a=="valign"){this.zoomalign_valign=_b;}else{return false;}this.zoomalign=this._getalign(this.zoomalign_halign,this.zoomalign_valign);this._google_map_option_test={zoomControlOptions:{position:this.zoomalign,style:google.maps.ZoomControlStyle.DEFAULT}};return true;};_pGoogleMap.set_enableevent=function(_a){this._p_enableevent=nexacro._toBoolean(_a);return _a;};_pGoogleMap.set_viewmode=function(_a){if(_a!=null){this._p_viewmode=_a;if(this.bLoaded){this._google_map_option={mapTypeId:this._getMapType(this._p_viewmode)};this._google_map.setOptions(this._google_map_option);}return true;}else{return false;}};_pGoogleMap.set_showmode=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.showmode=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.showmode=false;}else{return false;}if(this.bLoaded){this._google_map_option_test={mapTypeControl:this.showmode,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DEFAULT,position:this.modealign}};this._google_map.setOptions(this._google_map_option_test);}return true;}};_pGoogleMap.set_showmapscale=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.showmapscale=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.showmapscale=false;}else{return false;}if(this.bLoaded){this._google_map_option_test={scaleControl:this.showmapscale};this._google_map.setOptions(this._google_map_option_test);}return true;}};_pGoogleMap.set_shownavigator=function(_a){if(_a!=null){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.shownavigator=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.shownavigator=false;}else{return false;}if(this.bLoaded){this._google_map_option_test={panControl:this.shownavigator};this._google_map.setOptions(this._google_map_option_test);}return true;}};_pGoogleMap.set_apikey=function(_a){if(_a==null){return false;}this._p_apikey=_a;};_pGoogleMap.set_language=function(_a){_a=nexacro._toString(_a);this._p_language=_a;};_pGoogleMap.set_region=function(_a){_a=nexacro._toString(_a);this._p_region=_a;};_pGoogleMap.set_zoomlevel=function(_a){this._p_zoomlevel=Number(_a.toString());};_pGoogleMap.set_enable=function(_a){if(_a==null){return false;}else if(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this._p_enable=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this._p_enable=false;}if(this.bLoaded){this._google_map_option={draggable:this.enable};this._google_map.setOptions(this._google_map_option);}return true;}else{return false;}};_pGoogleMap.set_showzoom=function(_a){if(_a==null){return false;}if(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this._p_showzoom=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this._p_showzoom=false;}else{return false;}if(this.bLoaded){this._google_map_option_test={center:new google.maps.LatLng(this.centerlocation.latitude,this.centerlocation.longitude),zoomControl:this._p_showzoom};this._google_map.setOptions(this._google_map_option_test);}return true;}};_pGoogleMap._properties=[{name:"apikey"},{name:"items",readonly:true},{name:"language"},{name:"latitude",readonly:true},{name:"longitude",readonly:true},{name:"region"},{name:"showzoom"},{name:"viewmode"},{name:"zoomlevel"},{name:"enable"},{name:"enableevent"}];nexacro._defineProperties(_pGoogleMap,_pGoogleMap._properties);_pGoogleMap.load=function(_a,_b,_c,_d,_e,_f){var _g=this._google_map;if(nexacro.googlemaps_loaded==false){if(!_f){nexacro.load_googlemaps(this._p_apikey,this._p_language,this._p_region);}var _h=this;nexacro._OnceCallbackTimer.callonce(_h,function(){_h.load(_a,_b,_c,_d,_e,true);},500);return;}this._id=nexacro.Device.makeID();var _i=nexacro.Device._userCreatedObj[this._id]=this;var _j=0;var _k;if(_e){try{_j=_e.toString().split(" ").join("");}catch(e){return false;}if(_e.length==0){return false;}var _l=0;try{_l=Number(_e.toString());}catch(e){return false;}if(_l>=0){this._p_zoomlevel=_l;}else{return false;}}if(_d){if(_d==0||(typeof (_d)=="string"&&_d=="0")){this._p_viewmode=0;}else if(_d==1||(typeof (_d)=="string"&&_d=="1")){this._p_viewmode=1;}else if(_d==2||(typeof (_d)=="string"&&_d=="2")){this._p_viewmode=2;}else if(_d==3||(typeof (_d)=="string"&&_d=="3")){this._p_viewmode=3;}else{return false;}}else{this._p_viewmode=0;}if(_b&&_c){_j=0;try{_j=_b.toString().split(" ").join("");}catch(e){return false;}if(_j.length==0){return false;}try{_j=_c.toString().split(" ").join("");}catch(e){return false;}if(_j.length==0){return false;}var _m=0;var _n=0;try{_m=Number(_b.toString());}catch(e){return false;}if(_m!=_m){return false;}try{_n=Number(_c.toString());}catch(e){return false;}if(_n!=_n){return false;}this.centerlocation.latitude=_m;this.centerlocation.longitude=_n;this._p_latitude=_m;this._p_longitude=_n;_pGoogleMap.centerlocation={latitude:_m,longitude:_n};}if(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.bSensor=true;}else{this.bSensor=false;}if(_d==null){this._p_viewmode=0;}}else{this.bSensor=false;}var _o=this._map_elem;if(_o){_o.create();}if(this.bSensor){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(_q){var _r=new google.maps.LatLng(_q.coords._p_latitude,_q.coords._p_longitude);_g.setCenter(_r);},function(){_i._apply_onerror({errorcode:"1503",errormsg:"Device provider disable"});});}else if(google.gears){var _p=google.gears.factory.create('beta.geolocation');_p.getCurrentPosition(function(_q){var _r=new google.maps.LatLng(_q._p_latitude,_q._p_longitude);_k=new google.maps.LatLng(_q._p_latitude,_q._p_longitude);_g.setCenter(_r);},function(){_i._apply_onerror({errorcode:"1503",errormsg:"Device provider disable"});});return false;}}else{_k=new google.maps.LatLng(this.centerlocation.latitude,this.centerlocation.longitude);}this._google_map_option={center:_k,panControl:this.shownavigator,zoomControl:this._p_showzoom,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},mapTypeControl:this.showmode,scaleControl:this.showmapscale,zoom:this._p_zoomlevel,disableDefaultUI:false,draggable:this.enable,mapTypeId:_pGoogleMap._getMapType(this._p_viewmode)};_g=new google.maps.Map(_o.handle,this._google_map_option);this._google_map=_g;_pGoogleMap._google_map=this._google_map;for(var _q=0;_q<this.itemsname.length;_q++ ){if(this._p_items[this.itemsname[_q]]._type==0||this._p_items[this.itemsname[_q]]._type==1){_pGoogleMap.addMarker(this.itemsname[_q],this._p_items[this.itemsname[_q]]);}else if(this._p_items[this.itemsname[_q]]._type==2){_pGoogleMap.addPolyline(this.itemsname[_q],this._p_items[this.itemsname[_q]]);}else if(this._p_items[this.itemsname[_q]]._type==3){_pGoogleMap.addPolygon(this.itemsname[_q],this._p_items[this.itemsname[_q]]);}else if(this._p_items[this.itemsname[_q]]._type==4){_pGoogleMap.addCircle(this.itemsname[_q],this._p_items[this.itemsname[_q]]);}}google.maps.event.addListener(_g,'click',function(_r){if(_i.onclick&&_i.onclick._has_handlers&&_i.enableevent){_i.location.latitude=_r.latLng.lat();_i.location.longitude=_r.latLng.lng();var _s=new nexacro.GoogleMapClickEventInfo(_i,"onclick",_i.location);_i.onclick._fireEvent(this,_s);}return true;});google.maps.event.addListenerOnce(_g,'tilesloaded',function(){_i.bLoaded=true;_i._apply_onload();google.maps.event.addListenerOnce(_g,'tilesloaded',function(){});});google.maps.event.addListener(_g,'dragstart',function(_r){});google.maps.event.addListener(_g,'mouseout',function(_r){});google.maps.event.addListener(_g,'dragenter',function(_r){});google.maps.event.addListener(_g,'drag',function(_r){});google.maps.event.addListener(_g,'dragend',function(_r){});google.maps.event.addListener(_g,'center_changed',function(_r){var _s=_g.getCenter().lat();var _t=_g.getCenter().lng();_i.centerlocation.latitude=_s;_i.centerlocation.longitude=_t;_i._p_latitude=_s;_i._p_longitude=_t;if(_i.oncenterchanged&&_i.oncenterchanged._has_handlers&&_i.enableevent){var _u=new nexacro.GoogleMapEventInfo(_i,"oncenterchanged",_i.centerlocation,_i.coordinates,_i._p_viewmode,_i._p_zoomlevel,_i.addresses);_i.oncenterchanged._fireEvent(this,_u);}return true;});google.maps.event.addListener(_g,'maptypeid_changed',function(_r){if(_i.onviewmodechanged&&_i.onviewmodechanged._has_handlers&&_i.enableevent){var _s=new nexacro.GoogleMapEventInfo(_i,"onviewmodechanged",_i.centerlocation,_i.coordinates,_i._p_viewmode,_i._p_zoomlevel,_i.addresses);_i.onviewmodechanged._fireEvent(this,_s);}return true;});google.maps.event.addListener(_g,'zoom_changed',function(_r){if(_i.onzoomchanged&&_i.onzoomchanged._has_handlers&&_i.enableevent){_i._p_zoomlevel=_g.getZoom();var _s=new nexacro.GoogleMapEventInfo(_i,"onzoomchanged",_i.centerlocation,_i.coordinates,_i._p_viewmode,_i._p_zoomlevel,_i.addresses);_i.onzoomchanged._fireEvent(this,_s);}return true;});return true;};_pGoogleMap.setMarkerLoc=function(_a,_b,_c){this._p_items[_a].location.latitude=_b;this._p_items[_a].location.longitude=_c;};_pGoogleMap.getAddress=function(_a,_b,_c,_d){if(_a==null||_b==null||_c<0){return false;}if(_c==null){_c=1;}var _e={nLatitude:_a,nLongitude:_b,nMaxResultCount:_c,strLocale:_d};var _f={id:this._id,div:"NexacroMap",method:"getAddress",params:_e};var _g=JSON.stringify(_f);nexacro.Device.exec(_g);return true;};_pGoogleMap.getCoordinates=function(_a){if(_a==null||_a==""){return false;}var _b={straddress:_a};var _c={id:this._id,div:"NexacroMap",method:"getCoordinates",params:_b};var _d=JSON.stringify(_c);nexacro.Device.exec(_d);return true;};_pGoogleMap.addItem=function(_a,_b){this._id=nexacro.Device.makeID();var _c=nexacro.Device._userCreatedObj[this._id]=this;if(_a==null||_b==null){return false;}if(_a==""||_b==""||_b=="undefined"||_a.trim()==""){return false;}if(typeof (this._p_items[_a])!="undefined"){this._apply_onerror({errorcode:"1501",errormsg:"item is already exist."});return false;}if(_b instanceof nexacro.GoogleMapMarker||_b instanceof nexacro.GoogleMapPolyline||_b instanceof nexacro.GoogleMapPolygon||_b instanceof nexacro.GoogleMapCircle){this._p_items[_a]=_b;this._p_items.push(_a);if(this.bLoaded){if(_b._type==0||_b._type==1){_pGoogleMap.addMarker(_a,_b,_c,this);}else if(_b._type==2){_pGoogleMap.addPolyline(_a,_b);}else if(_b._type==3){_pGoogleMap.addPolygon(_a,_b);}else if(_b._type==4){_pGoogleMap.addCircle(_a,_b);}}return true;}else{return false;}};_pGoogleMap.setMarkerOptions=function(_a,_b){if(typeof (_infowindow[_a])=="undefined"){var _c=new google.maps.InfoWindow({content:""});_infowindowname.push(_a);_infowindow[_a]=_c;}var _d;if(_b.imageurl.length>0){var _e=_b.imageurl.toString().split(" ").join("");var _f="";if(_e.substring(0,9).toLowerCase()=="%userapp%"){_f="../"+_e.substring(9,_e.length);}else{_f=_e;}_d={position:new google.maps.LatLng(_b._location.latitude,_b._location.longitude),title:_b.text,visible:_b.visible,icon:_f,draggable:_b.draggable};}else{_d={position:new google.maps.LatLng(_b._location.latitude,_b._location.longitude),title:_b.text,visible:_b.visible,draggable:_b.draggable};}var _g="<div title=\"\" style='width:100%;height:100%;'><div title=\"\" style='vertical-align:"+_b.style.align.valign+";text-align:"+_b.style.align.halign+";'>"+_b.text+"</div></div>";_infowindow[_a].setContent(_g);google.maps.event.addListener(_items[_a],'click',function(_h){if(_items[_a].title.length>0){_infowindow[_a].open(_pGoogleMap._google_map,_items[_a]);}});google.maps.event.addListener(_items[_a],'drag',function(_h){});google.maps.event.addListener(_pGoogleMap._google_map,'click',function(_h){_infowindow[_a].close();});if(!_d.visible&&_infowindow[_a]!=null){_infowindow[_a].close();}_items[_a].setOptions(_d);};_pGoogleMap.addMarker=function(_a,_b,_c,_d){if(typeof (_infowindow[_a])=="undefined"){var _e=new google.maps.InfoWindow({content:""});_infowindowname.push(_a);_infowindow[_a]=_e;}var _f="<div title=\"\" style='width:100%;height:100%;'><div title=\"\" style='vertical-align:"+_b.style.align.valign+";text-align:"+_b.style.align.halign+";'>"+_b.text+"</div></div>";_infowindow[_a].setContent(_f);var _g;if(_b.imageurl.length>0){var _h=_b.imageurl.toString().split(" ").join("");var _i="";if(_h.substring(0,9).toLowerCase()=="%userapp%"){_i=_h.substring(9,_h.length);if(_i.charAt(0)!="/"){_i="/"+_i;}_i=nexacro.System.userapppath+_i;}else{_i=_h;}_g=new google.maps.Marker({position:new google.maps.LatLng(_b._location.latitude,_b._location.longitude),title:_b.text,visible:_b.visible,icon:_i,draggable:_b.draggable});}else{_g=new google.maps.Marker({position:new google.maps.LatLng(_b._location.latitude,_b._location.longitude),title:_b.text,visible:_b.visible,draggable:_b.draggable});}google.maps.event.addListener(_g,'dragstart',function(_j){if(_c.onmapdragstart&&_c.onmapdragstart._has_handlers&&_c.enableevent){_b._location.latitude=_g.getPosition().lat();_b._location.longitude=_g.getPosition().lng();var _k=new nexacro.GoogleMapDragEventInfo(_c,"onmapdragstart",_b._location);_c.onmapdragstart._fireEvent(_d,_k);}});google.maps.event.addListener(_g,'drag',function(_j){if(_c.onmapdrag&&_c.onmapdrag._has_handlers&&_c.enableevent){_b._location.latitude=_g.getPosition().lat();_b._location.longitude=_g.getPosition().lng();var _k=new nexacro.GoogleMapDragEventInfo(_c,"onmapdrag",_b._location);_c.onmapdrag._fireEvent(_d,_k);}});google.maps.event.addListener(_g,'dragend',function(_j){if(_c.onmapdragend&&_c.onmapdragend._has_handlers&&_c.enableevent){_b._location.latitude=_g.getPosition().lat();_b._location.longitude=_g.getPosition().lng();var _k=new nexacro.GoogleMapDragEventInfo(_c,"onmapdragend",_b._location);_c.onmapdragend._fireEvent(_d,_k);}});google.maps.event.addListener(_g,'click',function(_j){if(_g.title.length>0){_infowindow[_a].open(_pGoogleMap._google_map,_g);}_pGoogleMap.gmap_onoverlayclick(_b,_j.latLng.lat(),_j.latLng.lng(),_j.pixel.x,_j.pixel.y);});google.maps.event.addListener(_g,'drag',function(_j){});_g.setMap(_pGoogleMap._google_map);_pGoogleMap._google_map.setCenter(_g.getPosition());_itemsname.push(_a);_items[_a]=_g;_b._map=this;_b._name=_a;};_pGoogleMap.setPolygonOptions=function(_a,_b){var _c=[];var _d,_e,_f,_g;_d=_b.locationdata.toString().split("]");for(_g=0;_g<(_d.length-1);_g++ ){_e=_d[_g].toString().split(",")[0].split(" ").join().substring(1);_f=_d[_g].toString().split(",")[1].split(" ").join().substring(1);if(_e.length>0&&_f.length>0){_c.push(new google.maps.LatLng(Number(_e),Number(_f)));}}var _h;if(typeof (this._p_parent.nexacro._xreNamedColorList[_b.linecolor])!="undefined"){_h=this._p_parent.nexacro._xreNamedColorList[_b.linecolor]+"FF";}else{_h=_b.linecolor;}var _i;if(typeof (this._p_parent.nexacro._xreNamedColorList[_b.fillbrushcolor])!="undefined"){_i=this._p_parent.nexacro._xreNamedColorList[_b.fillbrushcolor]+"FF";}else{_i=_b.fillbrushcolor;}var _j;var _k=1.0;if(_h.length>7){_j=parseInt(_h.substring(7),16);_k=_j/255.0;}var _l;var _m=1.0;if(_i.length>7){_l=parseInt(_i.substring(7),16);_m=_l/255.0;}var _n={paths:_c,strokeColor:_h.substring(0,7),strokeOpacity:_k,strokeWeight:_b.linewidth,fillColor:_i.substring(0,7),fillOpacity:_m,visible:_b.visible};google.maps.event.addListener(_items[_a],'click',function(_o){_pGoogleMap.gmap_onoverlayclick(_items[_a],_o.latLng.lat(),_o.latLng.lng(),0,0);});_items[_a].setOptions(_n);};_pGoogleMap.addPolygon=function(_a,_b){var _c=[];var _d,_e,_f;_d=_b.locationdata.toString().split("]");for(var _n=0;_n<(_d.length-1);_n++ ){_e=_d[_n].toString().split(",")[0].split(" ").join().substring(1);_f=_d[_n].toString().split(",")[1].split(" ").join().substring(1);if(_e.length>0&&_f.length>0){_c.push(new google.maps.LatLng(Number(_e),Number(_f)));}}var _g;if(typeof (nexacro._xreNamedColorList[_b.linecolor])!="undefined"){_g=nexacro._xreNamedColorList[_b.linecolor]+"FF";}else{_g=_b.linecolor;}var _h;if(typeof (nexacro._xreNamedColorList[_b.fillbrushcolor])!="undefined"){_h=nexacro._xreNamedColorList[_b.fillbrushcolor]+"FF";}else{_h=_b.fillbrushcolor;}var _i;var _j=1.0;if(_g.length>7){_i=parseInt(_g.substring(7),16);_j=_i/255.0;}var _k;var _l=1.0;if(_h.length>7){_k=parseInt(_h.substring(7),16);_l=_k/255.0;}var _m=new google.maps.Polygon({paths:_c,strokeColor:_g.substring(0,7),strokeOpacity:_j,strokeWeight:_b.linewidth,fillColor:_h.substring(0,7),fillOpacity:_l,visible:_b.visible});_m.setMap(_pGoogleMap._google_map);_itemsname.push(_a);_items[_a]=_m;_b._map=this;_b._name=_a;google.maps.event.addListener(_items[_a],'click',function(_o){_pGoogleMap.gmap_onoverlayclick(_b,_o.latLng.lat(),_o.latLng.lng(),0,0);});};_pGoogleMap.setPolylineOptions=function(_a,_b){var _c=[];var _d,_e,_f;_d=_b.locationdata.toString().split("]");for(var _k=0;_k<(_d.length-1);_k++ ){_e=_d[_k].toString().split(",")[0].split(" ").join().substring(1);_f=_d[_k].toString().split(",")[1].split(" ").join().substring(1);if(_e.length>0&&_f.length>0){_c.push(new google.maps.LatLng(Number(_e),Number(_f)));}}var _g;if(typeof (this._p_parent.nexacro._xreNamedColorList[_b.linecolor])!="undefined"){_g=this._p_parent.nexacro._xreNamedColorList[_b.linecolor]+"FF";}else{_g=_b.linecolor;}var _h;var _i=1.0;if(_g.length>7){_h=parseInt(_g.substring(7),16);_i=_h/255.0;}var _j={path:_c,strokeColor:_g.substring(0,7),strokeOpacity:_i,strokeWeight:_b.linewidth,visible:_b.visible};google.maps.event.addListener(_items[_a],'click',function(_l){_pGoogleMap.gmap_onoverlayclick(_items[_a],_l.latLng.lat(),_l.latLng.lng(),0,0);});_items[_a].setOptions(_j);};_pGoogleMap.addPolyline=function(_a,_b){var _c=[];var _d,_e,_f;_d=_b.locationdata.toString().split("]");for(var _k=0;_k<(_d.length-1);_k++ ){_e=_d[_k].toString().split(",")[0].split(" ").join().substring(1);_f=_d[_k].toString().split(",")[1].split(" ").join().substring(1);if(_e.length>0&&_f.length>0){_c.push(new google.maps.LatLng(Number(_e),Number(_f)));}}var _g;if(typeof (nexacro._xreNamedColorList[_b.linecolor])!="undefined"){_g=nexacro._xreNamedColorList[_b.linecolor]+"FF";}else{_g=_b.linecolor;}var _h;var _i=1.0;if(_g.length>7){_h=parseInt(_g.substring(7),16);_i=_h/255.0;}var _j=new google.maps.Polyline({path:_c,strokeColor:_g.substring(0,7),strokeOpacity:_i,strokeWeight:_b.linewidth,visible:_b.visible});_j.setMap(_pGoogleMap._google_map);_itemsname.push(_a);_items[_a]=_j;_b._map=this;_b._name=_a;google.maps.event.addListener(_items[_a],'click',function(_l){_pGoogleMap.gmap_onoverlayclick(_b,_l.latLng.lat(),_l.latLng.lng(),0,0);});};_pGoogleMap.setCircleOptions=function(_a,_b){_items[_a].setOptions(_b);};_pGoogleMap.addCircle=function(_a,_b){var _c=new google.maps.Circle({fillOpacity:0,strokeWeight:1.5,center:new google.maps.LatLng(_b._p_latitude,_b._p_longitude),radius:_b.radius,visible:_b.visible});_c.setMap(_pGoogleMap._google_map);_itemsname.push(_a);_items[_a]=_c;_b._map=this;_b._name=_a;};_pGoogleMap.removeItem=function(_a){if(_a==null){return false;}if(_a==""){return false;}if(typeof (this._p_items[_a])=="undefined"){this._apply_onerror({errorcode:"1502",errormsg:"item is not exist."});return false;}else{delete this._p_items[_a];for(var _c=0;_c<this._p_items.length;_c++ ){if(this._p_items[_c]==_a){var _b=this._p_items.indexOf(this._p_items[_c]);this._p_items.splice(_b,_c+1);}}if(this.bLoaded){_pGoogleMap._removeItem(_a);}return true;}};_pGoogleMap.gmap_ondrag=function(_a,_b){this.on_fire_ondragstart(this,new nexacro.GoogleMapDragEventInfo("ondrag"));};_pGoogleMap.gmap_ondragenter=function(_a){this._fire_ondragenter(this,new nexacro.GoogleMapDragEventInfo("ondragenter"));};_pGoogleMap.gmap_ondragmove=function(_a,_b){this._location.latitude=_a;this._location.longitude=_b;this.centerlocation.latitude=this._location.latitude;this.centerlocation.longitude=this._location.longitude;this._p_latitude=this._location.latitude;this._p_longitude=this._location.longitude;};_pGoogleMap.gmap_ondragleave=function(_a){this._fire_ondragleave(this,new nexacro.GoogleMapDragEventInfo("ondragleave"));};_pGoogleMap.gmap_dragend=function(_a,_b){this._location.latitude=_a;this._location.longitude=_b;};_pGoogleMap.gmap_onclick=function(_a,_b,_c,_d){this._location.latitude=_a;this._location.longitude=_b;this._pixel.x=_c;this._pixel.y=_d;this.kindClick="normalclick";};_pGoogleMap.gmap_onoverlayclick=function(_a,_b,_c,_d,_e){this._location.latitude=_b;this._location.longitude=_c;this._pixel.x=_d;this._pixel.y=_e;this.overlayfromobj=_a;this.kindClick="overlayclick";};_pGoogleMap._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){};_pGoogleMap._on_sys_click=function(_a,_b,_c){var _d=_b.changedTouches?_b.changedTouches[0]:_b;nexacro.ajaxlog("_on_sys_click"+_d.screenx+","+_d.screeny+":"+_a+":"+_d+":"+_c+"]");if(this.$IsReadyFireEvent()&&this.$isEnable()&&this.enableevent){if(this.kindClick=="normalclick"){this._fire_onclick(_a._comp,_d);}else{if(this.kindClick=="overlayclick"&&typeof (this.overlayfromobj)!="undefined"){this._fire_onoverlayclick(_a._comp,_d);}}}return true;};_pGoogleMap._fire_onclick=function(_a,_b){if(this.onclick._has_handlers&&this.enableevent){this.bClicked=false;var _c=new nexacro.GoogleMapClickEventInfo(this,_a,"onclick",_b,this._location,this._pixel);return this.onclick._fireEvent(this,_c);}else{this.bClicked=true;}return false;};_pGoogleMap._fire_onoverlayclick=function(_a,_b){if(this.onoverlayclick&&this.onoverlayclick._has_handlers&&this.enableevent){var _c=new nexacro.GoogleMapClickEventInfo(this,this.overlayfromobj,"onoverlayclick",_b,this._location,this._pixel);return this.onoverlayclick._fireEvent(this,_c);}};_pGoogleMap._apply_onload=function(){if(this._p_enable==false){}else if(this._p_enable==true){}this.on_fire_onload(this);};_pGoogleMap.on_fire_onload=function(_a){if(this.onload&&this.onload._has_handlers&&this.enableevent){var _b=new nexacro.GoogleMapEventInfo(_a,"onload",this.centerlocation,this.coordinates,this._p_viewmode,this._p_zoomlevel,this.addresses);return this.onload._fireEvent(this,_b);}};_pGoogleMap._onrecvsuccess=function(_a){if(this.enableevent){if(_a._p_latitude==undefined||_a._p_latitude==null||_a._p_latitude==""||_a._p_longitude==undefined||_a._p_longitude==null||_a._p_longitude==""){this.on_fire_onrecvsuccess(this,_a.eventid,_a.addresses,this.coordinates);}else{this.coordinates.latitude=_a._p_latitude;this.coordinates.longitude=_a._p_longitude;this.on_fire_onrecvsuccess(this,_a.eventid,_a.addresses,this.coordinates);}}};_pGoogleMap.on_fire_onrecvsuccess=function(_a,_b,_c,_d){if(this.enableevent){var _e=new nexacro.GoogleMapEventInfo(_a,_b,this.centerlocation,this.coordinates,this._p_viewmode,this._p_zoomlevel,_c);return this.onrecvsuccess._fireEvent(this,_e);}};_pGoogleMap._apply_onerror=function(_a){if(this.enableevent){this.on_fire_onerror(this,_a);}};_pGoogleMap.on_fire_onerror=function(_a,_b){if(this.enableevent){var _c=new nexacro.GoogleMapErrorEventInfo(this,"onerror",_b.errorcode,_b.errormsg);return this.onerror._fireEvent(this,_c);}};_pGoogleMap.__onDragEnter=function(_a,_b){console.debug("__ondragEnter");};_pGoogleMap._getalign=function(_a,_b){if(_a=="left"){if(_b=="top"){return google.maps.ControlPosition.TOP_LEFT;}else if(_b=="middle"){return google.maps.ControlPosition.LEFT_CENTER;}else if(_b=="bottom"){return google.maps.ControlPosition.LEFT_BOTTOM;}}else if(_a=="center"){if(_b=="top"){return google.maps.ControlPosition.TOP;}else if(_b=="bottom"){return google.maps.ControlPosition.BOTTOM;}}else if(_a=="right"){if(_b=="top"){return google.maps.ControlPosition.TOP_LEFT;}else if(_b=="middle"){return google.maps.ControlPosition.RIGHT_CENTER;}else if(_b=="bottom"){return google.maps.ControlPosition.RIGHT_BOTTOM;}}};_pGoogleMap._getMapType=function(_a){var _b;switch(_a){default:case 0:_b=google.maps.MapTypeId.ROADMAP;break;case 1:_b=google.maps.MapTypeId.SATELLITE;break;case 2:_b=google.maps.MapTypeId.HYBRID;break;case 3:_b=google.maps.MapTypeId.TERRAIN;break;}return _b;};_pGoogleMap.__map=function(){var _a=document.getElementById(this._id);var _b=_a.contentWindow||_a.contentDocument;return _b;};_pGoogleMap._set_option=function(){var _a=this._getMapType();return {center:new google.maps.LatLng(this.centerlocation.latitude,this.centerlocation.longitude),mapTypeId:_a,zoom:this._p_zoomlevel,disableDefaultUI:true,mapTypeControl:this.showmode,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DEFAULT,position:this.modealign},scaleControl:this.showmapscale,scaleControlOptions:{position:this.mapscalealign},panControl:this.shownavigator,panControlOptions:{position:this.navigatoralign},zoomControl:this._p_showzoom,zoomControlOptions:{position:this.zoomalign,style:google.maps.ZoomControlStyle.SMALL}};};_pGoogleMap.map_starter=function(_a){this._google_map.setOptions(this.setOptions());};_pGoogleMap.__onTextchanged=function(){};_pGoogleMap._removeItem=function(_a){_items[_a].setMap(null);var _b;if(typeof (_items[_a].title)!="undefined"){delete _infowindow[_a];for(_b=0;_b<_infowindow.length;_b++ ){if(_infowindowname[_b]==_a){_infowindowname.splice(_b+1,_b+1);}}}delete _items[_a];for(_b=0;_b<_itemsname.length;_b++ ){if(_itemsname[_b]==_a){_itemsname.splice(_b+1,_b+1);}}return true;};if(!nexacro.GoogleMapMarker){nexacro.GoogleMapMarker=function(_a,_b){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=0;this.enableevent=true;this.longitude=0;this.latitude=0;this._location={latitude:0,longitude:0};this.text="";this.visible=true;this.draggable=false;this.imageurl="";this.style={_GoogleMapMarkerID:0,set_parentID:function(_c){this._GoogleMapMarkerID=_c;},align:{_GoogleMapMarkerID:0,set_parentID:function(_c){this._GoogleMapMarkerID=_c;},halign:"center",valign:"middle",set_halign:function(_c){var _d=_c.toString().split(" ").join("").toLowerCase();if(_d=="left"||_d=="center"||_d=="right"){this.halign=_d;var _e=nexacro.Device._userCreatedObj[this._GoogleMapMarkerID];if(_e._map!=null){_e._map.setMarkerOptions(_e._name,_e);}return true;}else{return false;}},set_valign:function(_c){var _d=_c.toString().split(" ").join("").toLowerCase();if(_d=="top"||_d=="middle"||_d=="bottom"){this.valign=_d;var _e=nexacro.Device._userCreatedObj[this._GoogleMapMarkerID];if(_e._map!=null){_e._map.setMarkerOptions(_e._name,_e);}return true;}else{return false;}},$s:function(_a,_c,_d){var _e=this[_c];if(_e){return _e.call(this,_d);}return (this[_a]=_d);}},image:"",set_align:function(_c){var _d=_c.split(" ");var _e=true;if(_d.length!=2){return false;}_e=this.align.set_halign(_d[0]);if(!_e){return _e;}_e=this.align.set_valign(_d[1]);var _f=nexacro.Device._userCreatedObj[this._GoogleMapMarkerID];if(_f._map!=null){_f._map.setMarkerOptions(_f._name,_f);}return _e;},$s:function(_a,_c,_d){var _e=this[_c];if(_e){return _e.call(this,_d);}return (this[_a]=_d);}};this._map=null;this._name=null;this.style.set_parentID(this._id);this.style.align.set_parentID(this._id);};var _pGoogleMapMarker=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapMarker);nexacro.GoogleMapMarker.prototype=_pGoogleMapMarker;_pGoogleMapMarker._type_name="GoogleMapMarker";_pGoogleMapMarker.set_longitude=function(_a){try{this.longitude=Number(_a.toString());}catch(e){return false;}if(isNaN(this.longitude)){return false;}this._location.longitude=this.longitude;if(this._map!=null){this._map.setMarkerOptions(this._name,this);}return true;};_pGoogleMapMarker.set_latitude=function(_a){try{this.latitude=Number(_a.toString());}catch(e){return false;}if(isNaN(this.latitude)){return false;}this._location.latitude=this.latitude;if(this._map!=null){this._map.setMarkerOptions(this._name,this);}return true;};_pGoogleMapMarker.set_text=function(_a){this.text=_a;if(this._map!=null){this._map.setMarkerOptions(this._name,this);}return true;};_pGoogleMapMarker.set_draggable=function(_a){if(_a==null){return false;}else if(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.draggable=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.draggable=false;}}else{return false;}};_pGoogleMapMarker.set_visible=function(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.visible=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.visible=false;}else{return false;}if(this._map!=null){this._map.setMarkerOptions(this._name,this);}return true;};_pGoogleMapMarker.set_imageurl=function(_a){this._type=1;this.imageurl=_a;if(this._map!=null){this._map.setMarkerOptions(this._name,this);}return true;};_pGoogleMapMarker.set_style=function(_a){var _b=_a.split(";");var _c;var _d;var _e=true;for(_c=0;_c<_b.length;_c++ ){_d=_b[_c].split(":");if(_d.length!=2){return false;}else if(_d[0].split(" ").join("").toLowerCase()=="align"){_e=this.style.set_align(_d[1]);}else{_e=false;}if(!_e){return _e;}}if(this._map!=null){this._map.setMarkerOptions(this._name,this);}return _e;};nexacro._addRegisterClass("GoogleMapMarker","nexacro.GoogleMapMarker");}if(!nexacro.GoogleMapPolyline){nexacro.GoogleMapPolyline=function(_a,_b){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=2;this.locationdata="";this.visible=true;this.linewidth="";this.linecolor="";this.enableevent=true;this._map=null;this._name=null;};var _pGoogleMapPolyline=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapPolyline);nexacro.GoogleMapPolyline.prototype=_pGoogleMapPolyline;_pGoogleMapPolyline._type_name="GoogleMapPolyline";_pGoogleMapPolyline.set_locationdata=function(_a){var _b;_b=_a.toString().split("]");if(_b.length<2){return false;}this.locationdata=_a;if(this._map!=null){this._map.setPolylineOptions(this._name,this);}return true;};_pGoogleMapPolyline.set_visible=function(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.visible=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.visible=false;}else{return false;}if(this._map!=null){this._map.setPolylineOptions(this._name,this);}return true;};_pGoogleMapPolyline.set_linewidth=function(_a){var _b=0;try{_b=Number(_a.toString());}catch(e){return false;}if(_b!=_b){return false;}this.linewidth=_b;if(this._map!=null){this._map.setPolylineOptions(this._name,this);}return true;};_pGoogleMapPolyline.set_linecolor=function(_a){this.linecolor=_a;return true;};}if(!nexacro.GoogleMapPolygon){nexacro.GoogleMapPolygon=function(_a,_b){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=3;this.locationdata="";this.visible=true;this.linewidth="";this.linecolor="";this.fillbrushcolor="";this.enableevent=true;this._map=null;this._name=null;};var _pGoogleMapPolygon=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapPolygon);nexacro.GoogleMapPolygon.prototype=_pGoogleMapPolygon;_pGoogleMapPolygon._type_name="GoogleMapPolygon";_pGoogleMapPolygon.set_locationdata=function(_a){var _b;_b=_a.toString().split("]");if(_b.length<2){return false;}this.locationdata=_a;if(this._map!=null){this._map.setPolygonOptions(this._name,this);}return true;};_pGoogleMapPolygon.set_visible=function(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.visible=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.visible=false;}else{return false;}if(this._map!=null){this._map.setPolygonOptions(this._name,this);}return true;};_pGoogleMapPolygon.set_linewidth=function(_a){var _b=0;try{_b=Number(_a.toString());}catch(e){return false;}if(_b!=_b){return false;}this.linewidth=_b;if(this._map!=null){this._map.setPolygonOptions(this._name,this);}return true;};_pGoogleMapPolygon.set_linecolor=function(_a){this.linecolor=_a;return true;};_pGoogleMapPolygon.set_fillbrushcolor=function(_a){this.fillbrushcolor=_a;return true;};}if(!nexacro.GoogleMapCircle){nexacro.GoogleMapCircle=function(_a,_b){this._id=nexacro.Device.makeID();nexacro.Device._userCreatedObj[this._id]=this;this.name=_a||"";this._type=4;this.longitude=0;this.latitude=0;this.enableevent=true;this.visible=true;this._map=null;this._name=null;this.radius=100;};var _pGoogleMapCircle=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapCircle);nexacro.GoogleMapCircle.prototype=_pGoogleMapCircle;_pGoogleMapCircle._type_name="GoogleCircle";_pGoogleMapCircle.set_longitude=function(_a){try{this.longitude=Number(_a.toString());}catch(e){return false;}if(isNaN(this.longitude)){return false;}if(this._map!=null){this._map.setCircleOptions(this._name,this);}return true;};_pGoogleMapCircle.set_latitude=function(_a){try{this.latitude=Number(_a.toString());}catch(e){return false;}if(isNaN(this.latitude)){return false;}if(this._map!=null){this._map.setCircleOptions(this._name,this);}return true;};_pGoogleMapCircle.set_visible=function(_a){if(_a==true||(typeof (_a)=="string"&&_a=="true")){this.visible=true;}else if(_a==false||(typeof (_a)=="string"&&_a=="false")){this.visible=false;}else{return false;}if(this._map!=null){this._map.setCircleOptions(this._name,this);}return true;};_pGoogleMapCircle.set_radius=function(_a){if(_a==null){this.radius=100;}else{this.radius=Number(_a.toString());}};}}else{nexacro.GoogleMap=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h);};var _pGoogleMap=nexacro._createPrototype(nexacro.Component,nexacro.GoogleMap);nexacro.GoogleMap.prototype=_pGoogleMap;_pGoogleMap._type_name="GoogleMap";_pGoogleMap._p_showzoom=false;_pGoogleMap._p_language=undefined;_pGoogleMap._p_region=undefined;_pGoogleMap.set_viewmode=function(_a){};_pGoogleMap.set_zoomlevel=function(_a){};_pGoogleMap.set_showzoom=function(_a){_a=nexacro._toBoolean(_a);this._p_showzoom=_a;};_pGoogleMap.set_shownavigator=function(_a){};_pGoogleMap.set_showcompass=function(_a){};_pGoogleMap.set_showmapscale=function(_a){};_pGoogleMap.set_centerlocation=function(_a){};_pGoogleMap.set_showmode=function(_a){};_pGoogleMap.set_zoomalign=function(_a){};_pGoogleMap.set_navigatoralign=function(_a){};_pGoogleMap.set_mapscalealign=function(_a){};_pGoogleMap.set_draggable=function(_a){};_pGoogleMap.set_apikey=function(_a){this._p_apikey=_a;};_pGoogleMap.set_language=nexacro._emptyFn;_pGoogleMap.set_region=nexacro._emptyFn;_pGoogleMap._properties=[{name:"apikey"},{name:"items",readonly:true},{name:"language"},{name:"latitude",readonly:true},{name:"longitude",readonly:true},{name:"region"},{name:"showzoom"},{name:"viewmode"},{name:"zoomlevel"}];nexacro._defineProperties(_pGoogleMap,_pGoogleMap._properties);_pGoogleMap.load=function(_a,_b,_c,_d,_e){};_pGoogleMap.setMarkerLoc=function(_a,_b,_c){};_pGoogleMap.getAddress=function(_a,_b,_c,_d){};_pGoogleMap.getCoordinates=function(_a){};_pGoogleMap.addItem=function(_a,_b){};_pGoogleMap.setMarkerOptions=function(_a,_b){};_pGoogleMap.addMarker=function(_a,_b,_c){};_pGoogleMap.addPolyline=function(_a,_b,_c){};_pGoogleMap.removeItem=function(_a){};_pGoogleMap.on_fire_onclick=function(){};_pGoogleMap._removeItem=function(_a,_b){};if(!nexacro.GoogleMapMarker){nexacro.GoogleMapMarker=function(_a,_b){};var _pGoogleMapMarker=nexacro.GoogleMapMarker.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapMarker);_pGoogleMapMarker._type_name="GoogleMapMarker";_pGoogleMapMarker.set_latitude=function(_a){};_pGoogleMapMarker.set_longitude=function(_a){};_pGoogleMapMarker.set_text=function(_a){};_pGoogleMapMarker.set_draggable=function(_a){};_pGoogleMapMarker.set_visible=function(_a){};_pGoogleMapMarker.set_style=function(_a){};}if(!nexacro.GoogleMapPolyline){nexacro.GoogleMapPolyline=function(_a,_b){};var _pGoogleMapPolyline=nexacro.GoogleMapPolyline.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapPolyline);_pGoogleMapPolyline._type_name="GoogleMapPolyline";_pGoogleMapPolyline.set_locationdata=function(_a){};_pGoogleMapPolyline.set_linewidth=function(_a){};_pGoogleMapPolyline.set_linecolor=function(_a){};_pGoogleMapPolyline.set_visible=function(_a){};}if(!nexacro.GoogleMapPolygon){nexacro.GoogleMapPolygon=function(_a,_b){};var _pGoogleMapPolygon=nexacro.GoogleMapPolygon.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapPolygon);_pGoogleMapPolygon._type_name="GoogleMapPolygon";_pGoogleMapPolygon.set_locationdata=function(_a){};_pGoogleMapPolygon.set_linewidth=function(_a){};_pGoogleMapPolygon.set_linecolor=function(_a){};_pGoogleMapPolygon.set_fillbrushcolor=function(_a){};_pGoogleMapPolygon.set_visible=function(_a){};}if(!nexacro.GoogleMapCircle){nexacro.GoogleMapCircle=function(_a,_b){};var _pGoogleMapCircle=nexacro.GoogleMapCircle.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.GoogleMapCircle);_pGoogleMapCircle._type_name="GoogleMapCircle";_pGoogleMapCircle.set_latitude=function(_a){};_pGoogleMapCircle.set_longitude=function(_a){};_pGoogleMapCircle.set_radius=function(_a){};_pGoogleMapCircle.set_visible=function(_a){};}}delete _pGoogleMap;delete _pGoogleMapMarker;delete _pGoogleMapPolyline;delete _pGoogleMapPolygon;delete _pGoogleMapCircle;}if(!nexacro.Sketch){nexacro.SketchLoadEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"onload";this.fromobject=this.fromreferenceobject=_a;this.url=_c;};var _pSketchLoadEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.SketchLoadEventInfo);nexacro.SketchLoadEventInfo.prototype=_pSketchLoadEventInfo;_pSketchLoadEventInfo._type_name="SketchLoadEventInfo";delete _pSketchLoadEventInfo;_pSketchLoadEventInfo=null;nexacro.SketchErrorEventInfo=function(_a,_b,_c,_d,_e,_f,_g,_h){this.id=this.eventid=_b||"onerror";this.errormsg=_d;this.errorobj=_a;this.errortype=_e;this.locationuri=_h;this.requesturi=_g;this.statuscode=_f?_f:0;};var _pSketchErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.SketchErrorEventInfo);nexacro.SketchErrorEventInfo.prototype=_pSketchErrorEventInfo;_pSketchErrorEventInfo._type_name="SketchErrorEventInfo";delete _pSketchErrorEventInfo;_pSketchErrorEventInfo=null;nexacro.SketchEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"onsuccess";this.handle=_c;this.fromobject=this.fromreferenceobject=_a;};var _pSketchEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.SketchEventInfo);nexacro.SketchEventInfo.prototype=_pSketchEventInfo;_pSketchEventInfo._type_name="SketchEventInfo";delete _pSketchEventInfo;nexacro.Sketch=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._history=[];this._image_format=["bmp","gif","jpeg","jpg","png","tif","tiff","icon"];this._default_stroke_style=nexacro.ColorObject("black");this._currentPath=[];this._path_style={};};var _pSketch=nexacro._createPrototype(nexacro.Component,nexacro.Sketch);nexacro.Sketch.prototype=_pSketch;_pSketch._type_name="Sketch";_pSketch._p_undoable=false;_pSketch._p_redoable=false;_pSketch._p_editmode="stroke";_pSketch._p_enableredraw=true;_pSketch.imemode="none";_pSketch._p_usecontextmenu=true;_pSketch._p_text="";_pSketch._p_readonly=false;_pSketch._p_value=null;_pSketch.sketchtextarea=null;_pSketch._p_accessibilityrole="image";_pSketch._canvas_elem_bg=null;_pSketch._canvas_elem=null;_pSketch._canvas_elem_tmp=null;_pSketch._current_strokes=null;_pSketch._image=null;_pSketch._clr_history=true;_pSketch._current_state=-1;_pSketch._freeze_state=-1;_pSketch._drawpathcount=0;_pSketch._const_stroke="stroke";_pSketch._const_stroke_user="strokeu";_pSketch._const_text="text";_pSketch._const_erase="erase";_pSketch._const_none="none";_pSketch._const_erase_user="eras_handleeu";_pSketch._const_image="image";_pSketch._const_composit_source_over="source-over";_pSketch._const_composit_destination_out="destination-out";_pSketch._const_form="this._p_parent";_pSketch._const_dot=".";_pSketch._default_line_cap="round";_pSketch._default_line_join="round";_pSketch._default_line_width=1;_pSketch._default_edit_gap=0.5;_pSketch._default_edit_x=0;_pSketch._default_edit_y=0;_pSketch._default_edit_width=100;_pSketch._default_edit_height=50;_pSketch._startDrawStroke=true;_pSketch._startDrawErase=true;_pSketch.texteditmode="text";_pSketch.undocount=5;_pSketch.undotype="draw";_pSketch._pre_draw_status="";_pSketch._butt_count=0;_pSketch._const_code_parameter="0001";_pSketch._const_code_io="1101";_pSketch._const_code_permission="1102";_pSketch._const_code_Irregular="1103";_pSketch._const_code_target="1104";_pSketch._const_code_loadinvalidimage="1105";_pSketch._const_code_incorrectfile="1106";_pSketch._const_code_savefile="1107";_pSketch._const_errortype_obj="ObjectError";_pSketch._const_errortype_type="TypeError";_pSketch._const_code_parameter_msg="comp_fail_parameter";_pSketch._const_code_loadinvalidimage_msg="comm_fail_loadinvalidimage";_pSketch._const_code_incorrectfile_msg="comp_incorrect_file";_pSketch._const_code_savefile_msg="comp_fail_save_file";_pSketch._is_undo=false;_pSketch._apply_client_padding=true;_pSketch._is_touch=false;_pSketch._img_type="url";_pSketch._touch_status=0;_pSketch._font=null;_pSketch._imgurl="";_pSketch._touch_count=0;_pSketch._use_readonly_status=true;_pSketch._event_list={"oninit":1,"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"ontouch":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onlbuttondown":1,"onlbuttonup":1,"onmousemove":1,"onload":1,"onerror":1,"onsuccess":1,"onsize":1,"onmove":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousewheel":1,"onkeydown":1,"onkeyup":1,"oninput":1,"ondrag":1,"ondrop":1,"ondragenter":1,"ondragleave":1,"oncontextmenu":1,"ondragmove":1,"ondevicebuttonup":1};_pSketch.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._color||this._getCurrentStyleInheritValue("color");nexacro.addErrorMessage(nexacro._getLanguage(),this._const_code_parameter_msg,"Parameter Error.");nexacro.addErrorMessage(nexacro._getLanguage(),this._const_code_savefile_msg,"Failed to save file.");this._canvas_elem=new nexacro.CanvasElement(_a);this._canvas_elem_tmp=new nexacro.CanvasElement(_a);var _c=new nexacro.SketchEditControl("sketchtextarea",this._default_edit_x,this._default_edit_y,this._default_edit_width,this._default_edit_height,null,null,null,null,null,null,this);_c._setControl("TextAreaControl");_c.createComponent();_c._setEventHandler("oninput",this.on_notify_oninput,this);_c._setEventHandler("onkillfocus",this.on_notify_edit_onkillfocus,this);this.sketchtextarea=_c;if(!this._font){this._font=this._getCurrentStyleInheritValue("font");}if(this._p_text){var _d=new nexacro.TextBoxElement(_a);_d.setElementSize(this._getClientWidth(),this._getClientHeight());_d.setElementText(this._p_text);this._text_elem=_d;}this._path_style={tool:_b,globalCompositeOperation:this._const_composit_source_over,strokeColor:_b,lineWidth:this._default_line_width,eraseWidth:this._default_line_width,lineCap:this._default_line_cap,lineJoin:this._default_line_join,font:this._font||_c._getCurrentStyleInheritValue("font"),fontColor:_b,text:""};}};_pSketch.on_created_contents=function(_a){var _b=this.getElement();if(_b){var _c=this._canvas_elem_bg;var _d=this._canvas_elem;var _e=this._canvas_elem_tmp;var _f=this._getClientWidth();var _g=this._getClientHeight();var _h=this._default_line_cap;var _i=this._default_line_join;if(_c){_c.create(_a);_c.setElementLineCap(_h);_c.setElementLineJoin(_i);_c.setElementSize(_f,_g);}if(_d){_d.create(_a);_d.setElementLineCap(_h);_d.setElementLineJoin(_i);_d.setElementSize(_f,_g);}if(_e){_e.create(_a);_e.setElementLineCap(_h);_e.setElementLineJoin(_i);}this.on_apply_text(this._p_text);var _j=this._text_elem;if(_j){_j.create(this._getWindow());_b.bringToFrontElement(this._canvas_elem);}var _k=this.sketchtextarea;_k.on_created();_k.set_width(this._default_edit_width);_k.set_height(this._default_edit_height);_k.set_imemode(this._p_imemode);_k.set_usecontextmenu(this._p_usecontextmenu);_k.set_readonly(this._p_readonly);_k.set_visible(false);}var _l=this._canvas_elem._getElementScreenXY();if(_l){this._screenX=_l.x;this._screenY=_l.y;}};_pSketch.on_create_contents_command=function(){return "";};_pSketch.on_attach_contents_handle=function(_a){var _b=this._canvas_elem_bg;var _c=this._canvas_elem;var _d=this._canvas_elem_tmp;if(_b){_b.create(_a);}if(_c){_c.create(_a);}if(_d){_d.create(_a);}var _e=this.getElement();if(_e){_b=this._canvas_elem_bg;_c=this._canvas_elem;_d=this._canvas_elem_tmp;var _f=this._getClientWidth();var _g=this._getClientHeight();var _h=this._default_line_cap;var _i=this._default_line_join;if(_b){_b.setElementLineCap(_h);_b.setElementLineJoin(_i);_b.setElementSize(_f,_g);}if(_c){_c.setElementLineCap(_h);_c.setElementLineJoin(_i);_c.setElementSize(_f,_g);}if(_d){_d.setElementLineCap(_h);_d.setElementLineJoin(_i);}this.on_apply_text(this._p_text);var _j=this._text_elem;if(_j){_j.create(this._getWindow());_e.bringToFrontElement(this._canvas_elem);}var _k=this.sketchtextarea;_k.on_created();_k.set_width(this._default_edit_width);_k.set_height(this._default_edit_height);_k.set_imemode(this._p_imemode);_k.set_usecontextmenu(this._p_usecontextmenu);_k.set_readonly(this._p_readonly);_k.set_visible(false);}var _l=this._canvas_elem._getElementScreenXY();if(_l){this._screenX=_l.x;this._screenY=_l.y;}};_pSketch.on_destroy_contents=function(){var _a=this._canvas_elem_bg;var _b=this._canvas_elem;var _c=this._canvas_elem_tmp;if(_a){_a.destroy();}if(_b){_b.destroy();}if(_c){_c.destroy();}};_pSketch.on_change_containerRect=function(_a,_b){if(this._canvas_elem){this._canvas_elem.setElementSize(_a,_b);}if(this._canvas_elem_bg){this._canvas_elem_bg.setElementSize(_a,_b);}var _c=this._text_elem;if(_c){_c.setElementSize(_a,_b);}if(this._adjust_height>0&&this._adjust_width>0){this._restoreSketch();}};_pSketch.on_change_containerPos=function(_a,_b){};_pSketch.set_enableredraw=function(_a){this._p_enableredraw=nexacro._toBoolean(_a);if(this._p_enableredraw){this._redrawPath();}return _a;};_pSketch.set_editmode=function(_a){var _b=this._const_stroke;switch(_a){case this._const_text:this.set_cursor("text");_b=_a;break;case this._const_erase:case this._const_none:this.set_cursor("default");_b=_a;break;case this._const_stroke:this.set_cursor("default");break;default:break;}this._p_editmode=_b;};_pSketch.set_imemode=function(_a){if(_a!=this._p_imemode){this._p_imemode=nexacro._toString(_a);this.on_apply_imemode();}};_pSketch.on_apply_imemode=function(){this.sketchtextarea.set_imemode(this._p_imemode);};_pSketch.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_usecontextmenu){this._p_usecontextmenu=_a;this.on_apply_usecontextmenu();}};_pSketch.on_apply_usecontextmenu=function(){this.sketchtextarea.set_usecontextmenu(this._p_usecontextmenu);};_pSketch.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_readonly){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pSketch.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this.sketchtextarea;if(_b){_b.set_readonly(this._p_readonly);}};_pSketch.set_value=nexacro._emptyFn;_pSketch._set_value=function(_a){this._p_value=_a;};_pSketch.on_apply_color=function(_a){nexacro.Component.prototype.on_apply_color.call(this,_a);var _b=this.sketchtextarea;if(_b){_b.set_color(_a);}this._path_style.fontColor=this._color;};_pSketch.on_apply_text=function(_a){if(this._current_state!=-1){return;}var _b=this._control_element;if(_b){var _c=this._text_elem;if(!_c){_c=new nexacro.TextBoxElement(_b);this._text_elem=_c;this.on_apply_wordWrap();_c.setElementSize(this._getClientWidth(),this._getClientHeight());_c.setElementTextAlign("center");_c.setElementVerticalAlign("middle");if(this._is_created){_c.create(this._getRootWindow());_b.sendToBackElement(_c);}}_c.setElementText(_a);}};_pSketch.on_apply_wordWrap=function(){if(this._text_elem){this._text_elem.setElementWordWrap(this._p_wordWrap);}};_pSketch._properties=[{name:"editmode"},{name:"enableredraw"},{name:"redoable",readonly:true},{name:"undoable",readonly:true},{name:"usecontextmenu"},{name:"readonly"},{name:"value",readonly:true}];nexacro._defineProperties(_pSketch,_pSketch._properties);_pSketch.loadSketch=function(_a){if(this._p_readonly){return;}this._imgurl=_a;return this._loadSketch(_a);};_pSketch.saveSketch=function(_a,_b){var _c=this._canvas_elem;if(_c){var _d=nexacro._ImageType.getImageType("base64",_a);var _e;_e=nexacro._ImageType.calcImageQuality(_d.datatype,_b);var _f;_f=_c.toDataURL(_d.datatype,_e);if(_f&&_f.src){_f.setBase64String(_f.src);this._set_value(_f);this.on_fire_onsuccess(_f);return true;}}return false;};_pSketch._restoreSketch=function(){var _a=this._currentStrokes();var _b=this._drawpathcount;this._drawpathcount=0;var _c=this._imgurl;if(_c){var _d="";var _e=this._img_type;if(_e=="url"){_d=nexacro._getURIValue(_c);_d=nexacro._getImageLocation(_d,this._getRefFormBaseUrl());}else{if(_c._base64str){_d=_c._base64str;}}if(!this._image){this._image=new nexacro.ImageSketchBackground(this);}this._image.set_src(_d);}for(var _f=0,_g=_a.length;_f<_g;_f++ ){this._regenStroke(_a[_f],this._canvas_elem);this._regenStroke(_a[_f],this._canvas_elem_tmp);}this._drawpathcount=_b;};_pSketch.saveSketchToFile=function(_a,_b,_c){var _d="";if(!_a){_d=nexacro._GetSystemErrorMsg(this,this._const_code_savefile_msg);this.on_fire_onerror(this,this._const_code_savefile,_d,this._const_errortype_obj,this._const_code_savefile,_a,this._getRefFormBaseUrl());return false;}var _e=nexacro._ImageType.getImageType("file",_b);_b=_e.type;if(_b=="JPG"&&!_c){_c=100;}if(_a.lastIndexOf(".")<0){var _f=_e.ext;_a=_a+this._const_dot+_f;}var _g=nexacro._saveToImageFile(this,_a,_b,_c,false,true);if(_g!==undefined){if(_g){if(typeof _g!="string"){_d=nexacro._GetSystemErrorMsg(this,this._const_code_savefile_msg);this.on_fire_onerror(this,this._const_code_savefile,_d,this._const_errortype_obj,this._const_code_savefile,_a,this._getRefFormBaseUrl());return false;}else{var _h=new nexacro.Image();_h.set_src(_g);_h.setBase64String(_h.src);this._set_value(_h);this.on_fire_onsuccess(_h);return true;}}else{_d=nexacro._GetSystemErrorMsg(this,this._const_code_savefile_msg);this.on_fire_onerror(this,this._const_code_savefile,_d,this._const_errortype_obj,this._const_code_savefile,_a,this._getRefFormBaseUrl());return false;}}return false;};_pSketch.undo=function(){if(this._checkEditmode()==false||this._p_readonly){return;}this._undo();};_pSketch.redo=function(){if(this._checkEditmode()==false||this._p_readonly){return;}this._redo();};_pSketch.on_getBindableProperties=function(){return "value";};_pSketch.updateToDataset=function(){var _a=this.applyto_bindSource("value",this._p_value);return _a;};_pSketch.setBrushType=function(_a){if(this._checkEditmode()==false){return;}switch(_a){case "square":case "butt":this._path_style.lineCap=_a;break;default:this._path_style.lineCap=this._default_line_cap;break;}};_pSketch.setBrushSize=function(_a){if(this._checkEditmode()==false){return;}if(_a>0){this._path_style.lineWidth=_a;}else{this._path_style.lineWidth=this._default_line_width;}};_pSketch.setBrushColor=function(_a){if(this._checkEditmode()==false){return;}if(_a){if(this._color==null||this._color.value!=_a){var _b=nexacro.ColorObject(_a);this._color=_b;this.on_apply_color(_b);}}else{if(this._color){this._color=null;this.on_apply_color(null);}}this._path_style.strokeStyle=this._color;};_pSketch.setTextFont=function(_a){if(this._checkEditmode()==false){return;}this._p_font=_a;if(_a){if(this._font==null||this._font.value!=_a){var _b=nexacro.FontObject(_a);this._font=_b;this._path_style.font=_b;}}else{if(this._font){this._font=null;this._path_style.font=this._getCurrentStyleInheritValue("font");}}var _c=this.sketchtextarea;if(_c){_c.set_font(_a);}};_pSketch.setEraseSize=function(_a){if(this._checkEditmode()==false){return;}_a= +_a;if(_a!=_a||_a<0){_a=this._default_line_width;}this._path_style.eraseWidth=_a;};_pSketch.drawText=function(_a,_b,_c,_d){if(this._checkEditmode()==false){return;}if(this.readonly){return;}var _e=this._canvas_elem;if(_e){this._initPath(this._path_style,this._const_text,_a,_b,true);var _f=this._currentPath[0];_f.text=_c;_f.globalCompositeOperation=this._const_composit_source_over;this._drawText(_f,_f.x,_f.y,_f.text,_d);}};_pSketch.drawStroke=function(_a,_b,_c){if(this._checkEditmode()==false||this._p_readonly){return;}if(!_a&&_a==undefined){return;}if(!_b&&_b==undefined){return;}_a=(_a>=0||_a<0)?_a:this._default_edit_x;_b=(_b>=0||_a<0)?_b:this._default_edit_y;_c=(!_c&&_c==undefined)?false:_c;if(this._startDrawStroke){_c=true;this._startDrawStroke=false;}this._drawStroke(this._path_style,this._const_stroke,_a,_b,_c);};_pSketch.drawErase=function(_a,_b,_c){if(this._checkEditmode()==false||this._p_readonly){return;}if(!_a&&_a==undefined){return;}if(!_b&&_b==undefined){return;}_a=(_a>=0||_a<0)?_a:this._default_edit_x;_b=(_b>=0||_a<0)?_b:this._default_edit_y;_c=(!_c&&_c==undefined)?false:_c;if(this._startDrawErase){_c=true;this._startDrawErase=false;}this._drawStroke(this._path_style,this._const_erase,_a,_b,_c);};_pSketch.drawStamp=function(){};_pSketch.drawTextBox=function(){};_pSketch.setStampImage=function(){};_pSketch.setTextBoxBkColor=function(){};_pSketch.moveTextEditor=function(){};_pSketch.resizeTextEditor=function(){};_pSketch.clear=function(){if(this._checkEditmode()==false){return;}this._clear(this._isEnableRedraw());if(this._current_state==-1){this.on_apply_text(this.getDisplayText());}};_pSketch.showTextEditor=function(_a,_b,_c,_d,_e){if(!(arguments.length>=4&&arguments.length<6)){return;}var _f=false;this._initPath(this._path_style,this._const_text,_a,_b,null,_c,_d,_e);if(_e!==undefined&&_e!=""){_f=true;}return this._showTextEditor(_a,_b,_c,_d,_e,_f);};_pSketch.hideTextEditor=function(_a){_a=(_a==true||_a==false)?_a:true;return this._hideTextEditor(_a);};_pSketch.redraw=function(){var _a=this._p_enableredraw;this._p_enableredraw=true;this._redrawPath();this._p_enableredraw=_a;};_pSketch.on_notify_edit_onkillfocus=function(_a,_b){var _c=_a.text;var _d=(_c.length>0)?true:false;var _e=true;if(_d){var _f=this._canvas_elem;if(_f){this._initPath(this._path_style,this._const_text,_a._left,_a._top,true);var _g=this._currentPath[0];_g.text=_c;_g.globalCompositeOperation=this._const_composit_source_over;this._drawText(_g,_g.x,_g.y,_g.text,_e);}}this._resetTextEdit(_d);};_pSketch.on_killfocus_basic_action=function(_a,_b){this._touch_count=0;if(this._use_pushed_status){this._changeUserStatus("pushed",false);}return;};_pSketch._no_bubble_scroll=true;_pSketch.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onfling.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);if(this._no_bubble_scroll){_j=true;}return _j;};_pSketch.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){var _k=nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);if(this._no_bubble_scroll){_k=true;}return _k;};_pSketch.on_fire_ontouchmove=function(_a,_b,_c,_d){if(_a.length==0){return;}var _e=_a[0];this.on_fire_onmousemove("lbutton",null,null,null,_e.screenx,_e.screeny,_e.canvasx,_e.canvasy,_e._canvasx,_e._canvasy,_c,_d);};_pSketch.on_fire_sys_ontouchmove=_pSketch.on_fire_ontouchmove;_pSketch.on_fire_onmousemove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){var _n=this._getWindow();if(_n._cur_ldown_elem&&_n._cur_ldown_elem.parent&&_n._cur_ldown_elem.parent.linkedcontrol&&_n._cur_ldown_elem.parent.linkedcontrol instanceof nexacro.Sketch){nexacro._getElementPositionInFrame(this.getElement(),true);var _o=_i;var _p=_j;if(nexacro._isMobile&&nexacro._isMobile()&&nexacro._Browser!="Runtime"){_o=_i-this._getWindowHandle().scrollX;_p=_j-this._getWindowHandle().scrollY;}this._moveAction(_a,_o,_p);}return false;};_pSketch.on_fire_sys_ondragmove=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q){var _r=nexacro.Component.prototype.on_fire_sys_ondragmove.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p,_q);var _s=_m;var _t=_n;if(nexacro._isMobile&&nexacro._isMobile()&&nexacro._Browser!="Runtime"){_s=_m-this._getWindowHandle().scrollX;_t=_n-this._getWindowHandle().scrollY;}this._moveAction(_e,_s,_t);return _r;};_pSketch.on_fire_sys_onmousemove=_pSketch.on_fire_onmousemove;_pSketch._moveAction=function(_a,_b,_c){if(nexacro._isMobile&&nexacro._isMobile()){if(this._touch_count<2){return;}}if(_a=="lbutton"||_a=="touch"){if(this._checkEditmode()==false||this._p_readonly){return;}_c-=nexacro._getCurrentBodyScrollTop();if(_a=="touch"){if(this._touch_status==3){this._touch_status=0;}else if(this._touch_status==1){this._touch_status=2;}if(this._touch_status!=0){if(this._path_style.lineCap=="butt"){if(this._butt_count==3){this._drawPath(_b,_c);this._butt_count=0;}this._butt_count++ ;}else{this._drawPath(_b,_c);}}}else{if(this._path_style.lineCap=="butt"){if(this._butt_count==3){this._drawPath(_b,_c);this._butt_count=0;}this._butt_count++ ;}else{this._drawPath(_b,_c);}}}};_pSketch.on_fire_ontouchstart=function(_a,_b,_c,_d){if(_a.length==0){return;}var _e=_a[0];this.on_fire_onlbuttondown("lbutton",null,null,null,_e.screenx,_e.screeny,_e.canvasx,_e.canvasy,_e._canvasx,_e._canvasy,_c,_d);};_pSketch._on_touch_lbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._skipDragEventAfterMsgBox=false;var _n;var _o=this._getFromComponent(this);if(!_o.onlbuttondown||(_o.onlbuttondown&&!_o.onlbuttondown.defaultprevented)){this._on_onlbuttondown(_b,_c,_d,_e,_f,_g,_h,_i,_f,_g,_k,_l,false,_m);_n=this._on_bubble_touch_lbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,false,_m);}return _n;};_pSketch._on_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._checkEditmode()==false){return;}if(this._p_readonly){if(this.sketchtextarea.visible){this.sketchtextarea.set_visible(false);}return;}var _n=_i;var _o=_j;if(nexacro._isMobile&&nexacro._isMobile()&&nexacro._Browser!="Runtime"){_n=_i-this._getWindowHandle().scrollX;_o=_j-this._getWindowHandle().scrollY;}if(nexacro._isMobile&&nexacro._isMobile()){if(this._getForm().getFocus()==this){this._touch_count+=2;}else{this._on_focus(true,"lbuttondown");this._touch_count++ ;}}this._delete_text();if(_a=="touch"){this._touch_status=1;this._is_touch=true;}_j-=nexacro._getCurrentBodyScrollTop();this.button=_a;if(nexacro._isMobile&&nexacro._isMobile()){if(this._getForm().getFocus()==this&&this._touch_count>1){this._initPath(this._path_style,this._p_editmode,(_n-this._default_edit_gap),_o);this._drawPath(_n,_o);}}else{this._initPath(this._path_style,this._p_editmode,(_n-this._default_edit_gap),_o);this._drawPath(_n,_o);}};_pSketch.on_fire_sys_ontouchstart=_pSketch.on_fire_ontouchstart;_pSketch.on_fire_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(nexacro._isTouchInteraction&&nexacro._SupportTouch&&!nexacro._enabletouchevent){return;}return this._on_onlbuttondown(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};_pSketch.on_fire_sys_onlbuttondown=_pSketch.on_fire_onlbuttondown;_pSketch.on_fire_ontouchend=function(_a,_b,_c,_d){if(_a.length==0){return;}var _e=_a[0];this.on_fire_onlbuttonup("lbutton",null,null,null,_e.screenx,_e.screeny,_e.canvasx,_e.canvasy,_e.clientx-this._screenX,_e.clienty-this._screenY,_c,_d);};_pSketch.on_fire_sys_ontouchend=_pSketch.on_fire_ontouchend;_pSketch.on_fire_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._checkEditmode()==false||this._p_readonly){return;}if(_a=="touch"){this._touch_status=3;}if(nexacro._isMobile&&nexacro._isMobile()){if(this._getForm().getFocus()==this&&this._touch_count>1){this._endPath();}}else{this._endPath();}if(_a=="touch"){this._delete_text();}};_pSketch.on_fire_sys_onlbuttonup=_pSketch.on_fire_onlbuttonup;_pSketch._endPath=function(){var _a=this._canvas_elem;if(!_a||this._currentPath.length==0){return;}var _b=this._currentPath[0];var _c=this._path_style;if(this._p_editmode==this._const_text&&!this.sketchtextarea.visible&&_b){var _d=_c.font;var _e=_c.fontColor;if(_d){_b.font=_c.font;}if(_e&&_e.value){_b.fontColor=nexacro.ColorObject(_e.value);}}this._regenStroke(this._currentPath,_a);this._regenStroke(this._currentPath,this._canvas_elem_tmp);};_pSketch.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pSketch.on_notify_oninput=function(){return this.on_fire_oninput();};_pSketch.on_fire_onload=function(_a,_b){var _c=this.onload;if(_c&&_c._has_handlers){var _d=new nexacro.SketchLoadEventInfo(this,"onload",_b);_c._fireEvent(this,_d);}};_pSketch.on_fire_onerror=function(_a,_b,_c,_d,_e,_f,_g){var _h=this.onerror;if(_h&&_h._has_handlers){var _i=new nexacro.SketchErrorEventInfo(this,"onerror",_b,_c,_d,_e,_f,_g);_h._fireEvent(this,_i);}};_pSketch.on_fire_onsuccess=function(_a){var _b=this.onsuccess;if(_b&&_b._has_handlers){var _c=new nexacro.SketchEventInfo(this,"onsuccess",_a);return this.onsuccess._fireEvent(this,_c);}};_pSketch._getDlgCode=function(_a,_b,_c,_d){return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:false,want_touchstart:true,want_touchmove:true};};_pSketch._refresh_contents=function(){};_pSketch._setImageValue=function(_a){if(_a instanceof nexacro.ImageSketchBackground){var _b=_a.getBase64String();if(!_b){var _c=this._canvas_elem.toDataURL();if(_c&&_c.src){_c.setBase64String(_c.src);this._p_value=_c;}}}};_pSketch._setImageType=function(_a){if(_a){if(_a instanceof nexacro.Image){_a=_a._base64str;this._img_type="base64";}else{_a=_a.toString();var _b=nexacro._transImageBase64StringFormat(_a);if(_b){_a=_b.alldata;this._img_type="base64";}else{this._img_type="url";}}}else{_a="";this._img_type="url";}return _a;};_pSketch._loadSketch=function(_a){var _b="";this._clearCanvas(this._isEnableRedraw());if(this._image){}if(typeof (_a)=="string"){_a=this._setImageType(_a);}else{this._setImageType(_a);}var _c=this._img_type;if(_a){if(_c=="url"){_a=nexacro._getURIValue(_a);_a=nexacro._getImageLocation(_a,this._getRefFormBaseUrl());if(nexacro._OS=="iOS"&&nexacro._isHybrid()){var _d={div:"sketch",method:"toBase64String",params:_a};var _e=JSON.stringify(_d);_a=nexacro.Device.exec(_e,true);if(_a==""){_a=undefined;}else{_c=this._img_type="base64";}}}else{if(_a._base64str){_a=_a._base64str;}}}if(_a==undefined||arguments.length>1){_b=nexacro._GetSystemErrorMsg(this,this._const_code_parameter_msg);this.on_fire_onerror(this,this._const_code_parameter,_b,this._const_errortype_obj,this._const_code_parameter,_a,this._getRefFormBaseUrl());return false;}if(_c=="url"&&_a){var _f=_a.substring(_a.lastIndexOf(".")+1).toLowerCase();if((this._image_format).indexOf(_f)==-1){_b=nexacro._GetSystemErrorMsg(this,this._const_code_incorrectfile_msg);this.on_fire_onerror(this,this._const_code_incorrectfile,_b,this._const_errortype_type,this._const_code_incorrectfile,_a,this._getRefFormBaseUrl());return false;}}nexacro._getImageSize(_a,this._imageload,this,this._p_parent._getRefFormBaseUrl());if(!this._image||!(this._image instanceof nexacro.ImageSketchBackground)){this._image=null;this._image=new nexacro.ImageSketchBackground(this);}var _g=this._image.set_src(_a);if(_g){if(this._apply_client_padding){this._delete_text();}this._set_value(this._image);if(this._clr_history){this._initHistory();this._setRedoUndo();}return true;}return false;};_pSketch._imageload=function(_a,_b,_c,_d,_e){if(_b<=0){this._image=null;this._set_value(null);this._p_value=null;delete nexacro._ImgInfoCacheList[_a];nexacro._ImgInfoCacheList[_a]=null;}};_pSketch._drawText=function(_a,_b,_c,_d,_e){if(this.readonly){return;}if(!_d||_d.length==0){return;}var _f=this._canvas_elem;var _g=this._canvas_elem_tmp;if(_f){if(this._apply_client_padding){this._delete_text();}_b=(_b>=0||_b<0)? +_b:this._default_edit_x;_c=(_c>=0||_b<0)? +_c:this._default_edit_y;var _h=this._font;if(_h==null){_h=this.sketchtextarea._getCurrentStyleInheritValue("font");}_f.setElementFont(_h);_f.setElementGlobalCompositeOperation(_a.globalCompositeOperation);_g.setElementFont(_h);_g.setElementGlobalCompositeOperation(_a.globalCompositeOperation);var _i;if(_a.fontColor instanceof nexacro.ColorObject){_i=_a.fontColor;}else{_i=nexacro.ColorObject(_a.fontColor);}_f.setElementFillStyle(_i);_g.setElementFillStyle(_i);var _j=Number(_c);if(_e){if(_d!=""){_d=_d.replace(/&quot;/g,"\"");if(_d.indexOf("\r\n")!=-1||_d.indexOf("\n\r")!=-1){_d=_d.replace(/\r\n/g,"\n").replace(/\n\r/g,"\n");}else{if(_d.indexOf("\r")!=-1){_d=_d.replace(/\r/g,"");}}var _k=(_d.replace(/\\n/g,'\n')).split("\n");var _l=this._p_linspace?this._p_linspace:10;var _m="";if(_h){_m=_h._size;}for(var _n=0;_n<_k.length;_n++ ){if(this._isEnableRedraw()){_f.drawFillText(_k[_n],_b,_j);_g.drawFillText(_k[_n],_b,_j);}_j+=Number(_l)+Number(_m);}}}else{if(this._isEnableRedraw()){_f.drawFillText(_d,_b,_j);_g.drawFillText(_d,_b,_j);}}}};_pSketch._drawStroke=function(_a,_b,_c,_d,_e){if(this._checkEditmode()==false||this._p_readonly){return;}if(this._apply_client_padding){this._delete_text();}var _f=Number(_c);var _g=Number(_d);if(this._currentPath[0]&&this._currentPath[0].tool!=_b){_e=true;}if(_e==true){this._initPath(this._path_style,_b,_f,_g);this._drawPath(_f,_g);}else{this._drawPath(_f,_g);this._endPath();}};_pSketch._showTextEditor=function(_a,_b,_c,_d,_e){if(this._checkEditmode()==false){return;}var _f=0;var _g=null;var _h=this.sketchtextarea;var _i=_h.value;if(_e){_g=_e;_f=-1;}else{_g=_i;}if(_a>=0||_a<0){_h.set_left(_a);}else{_h.set_left(this._default_edit_x);}if(_b>=0||_a<0){_h.set_top(_b);}else{_h.set_top(this._default_edit_y);}if(_c>=0||_a<0){_h.set_width(Number(_c));}else{_h.set_width(Number(this._default_edit_width));}if(_d>=0||_a<0){_h.set_height(Number(_d));}else{_h.set_height(Number(this._default_edit_height));}_h.set_value(_g);if(this._isEnableRedraw()){_h.set_visible(true);_h.setFocus(true);_h.setCaretPos(_f);if(_e!==undefined&&_e!=""){if(_e.length>0){_h.setSelect(0,_e.length);}}}return _i;};_pSketch._hideTextEditor=function(_a){if(this._checkEditmode()==false){return;}var _b=this.sketchtextarea;var _c=_b._p_value;if(_a){_b.set_value(undefined);}if(this._isEnableRedraw()){_b.set_visible(false);var _d=this._getWindow();_d._removeFromCurrentFocusPath(_b,true);}return _c;};_pSketch._redrawPathData=function(_a){this._clearCanvas(this._isEnableRedraw());if(this._image){this._loadSketch(this._image._p_src);}for(var _b=0,_c=_a.length;_b<_c;_b++ ){this._regenStroke(_a[_b],this._canvas_elem);this._regenStroke(_a[_b],this._canvas_elem_tmp);}};_pSketch._undoPathData=function(_a){this._clearPathCanvas(this._isEnableRedraw());var _b=this._imgurl;if(_b){this._loadSketch(_b);}for(var _c=0,_d=_a.length;_c<_d;_c++ ){if(_a[_c][0].strokeStyle==undefined){_a[_c][0].strokeStyle=this._default_stroke_style;}this._regenStroke(_a[_c],this._canvas_elem);this._regenStroke(_a[_c],this._canvas_elem_tmp);}};_pSketch._redoPathData=function(_a){for(var _b=this._current_state,_c=_a.length;_b<_c;_b++ ){this._regenStroke(_a[_b],this._canvas_elem);this._regenStroke(_a[_b],this._canvas_elem_tmp);}};_pSketch._drawBcurve=function(_a,_b){var _c=_a.length-1;if(_c<1){return;}if(this.button=="touch"||this.button=="lbutton"){for(var _g=this._drawpathcount;_g<_c;_g++ ){var _d=_a[_g];var _e=_a[_g+1];if(_g==0){this._setupCanvasElem(_b,_d);}else{_b.moveTo(_d.x,_d.y);}_b.lineTo(_e.x,_e.y);}}else{for(var _g=this._drawpathcount;_g<_c;_g++ ){var _d=_a[_g];var _e=_a[_g+1];if(_g==this._drawpathcount){var _f=this._clone(_a[0]);_f.x=_d.x;_f.y=_d.y;this._setupCanvasElem(_b,_f);}else{_b.moveTo(_d.x,_d.y);}_b.lineTo(_e.x,_e.y);}}_b.stroke();};_pSketch._drawUserStroke=function(_a,_b){var _c=_a.length-1;if(_c<1){return;}for(var _f=0;_f<_c;_f++ ){var _d=_a[_f];var _e=_a[_f+1];if(_f==0){this._setupCanvasElem(_b,_d);_b.lineTo(_e.x,_e.y);_b.lineTo(_d.x,_d.y);}else{_b.moveTo(_d.x,_d.y);_b.lineTo(_e.x,_e.y);_b.lineTo(_d.x,_d.y);}_b.lineTo(_e.x,_e.y);}_b.stroke();};_pSketch._setupCanvasElem=function(_a,_b){_a.beginPath();_a.setElementLineCap(_b.lineCap);_a.setElementGlobalCompositeOperation(_b.globalCompositeOperation);_a.moveTo(_b.x,_b.y);switch(_b.tool){case this._const_erase:case this._const_erase_user:_a.setElementStrokeStyle(this._default_stroke_style);_a.setElementLineWidth(_b.eraseWidth+1.5);break;case this._const_stroke:case this._const_stroke_user:default:_a.setElementStrokeStyle(_b.strokeStyle);if(_b.lineWidth){_a.setElementLineWidth(_b.lineWidth);}}};_pSketch._regenStroke=function(_a,_b){if(this._isEnableRedraw()){var _c=this._clone(_a);var _d=(this._is_undo&&_c[0].tool!=this._const_text)?this._const_stroke_user:_c[0].tool;switch(_d){case this._const_text:{var _e=_c[0];this._drawText(_e,_e.x,_e.y,_e.text,true);}break;case this._const_stroke:case this._const_erase:{this._drawBcurve(_c,_b);}break;case this._const_stroke_user:case this._const_erase_user:{this._drawUserStroke(_c,_b);}break;}}};_pSketch._clone=function(_a){if(!_a||typeof (_a)!=='object'){return _a;}var _b=new _a.constructor();for(var _c in _a){if(!_a[_c]||typeof (_a[_c])!=='object'){_b[_c]=_a[_c];}else{_b[_c]=this._clone(_a[_c]);}}return _b;};_pSketch._undo=function(){if(this._undoable()){this._current_state-- ;this._current_strokes=null;this._is_undo=true;var _a=this._currentStrokes();this._clr_history=false;if(this._isEnableRedraw()){this._undoPathData(_a);this._setRedoUndo();if(this._current_state==-1&&!this._image){this.on_apply_text(this.getDisplayText());var _b=this.getElement();if(_b){_b.bringToFrontElement(this._canvas_elem);}}}this._clr_history=true;this._is_undo=false;}};_pSketch._redo=function(){if(this._redoable()){if(this._current_state==-1){this._delete_text();}this._current_state++ ;this._current_strokes=null;this._drawpathcount=0;this._clr_history=false;var _a=this._currentStrokes();this._redoPathData(_a);this._setRedoUndo();this._clr_history=true;if(this._current_state==-1&&!this._image){this.on_apply_text(this.getDisplayText());}}};_pSketch._redrawPath=function(){var _a=this._currentStrokes();this._clr_history=false;this._drawpathcount=0;this._redrawPathData(_a);this._setRedoUndo();this._clr_history=true;if(this._current_state==-1&&!this._image){this.on_apply_text(this.getDisplayText());}else{this._delete_text();}};_pSketch._checkEditmode=function(){if(this._p_editmode==this._const_none){return false;}return true;};_pSketch._clearCanvasElem=function(_a){if(_a){_a.clearRect(0,0,this._adjust_width,this._adjust_height);}};_pSketch._clearCanvas=function(_a){var _b=this._canvas_elem;var _c=this._canvas_elem_tmp;if(_b){this._clearCanvasElem(_b);}if(_c){this._clearCanvasElem(_c);}};_pSketch._clearPathCanvas=function(_a){var _b=this._canvas_elem;var _c=this._canvas_elem_tmp;if(_b){this._clearCanvasElem(_b);}if(_c){this._clearCanvasElem(_c);}};_pSketch._clear=function(_a){this._hideTextEditor(true);if(_a){this._clearCanvas(_a);}this._image=null;this._imgurl="";this._initHistory();this._setRedoUndo();this._startDrawStroke=true;this._set_value(null);};_pSketch._setRedoUndo=function(){this._p_redoable=this._redoable();this._p_undoable=this._undoable();};_pSketch._drawPath=function(_a,_b){var _c={};_c.x=_a;_c.y=_b;var _d=this._canvas_elem;if(!_d||!this._currentPath[0]){return;}var _e=_d;var _f=this._currentPath[0].tool;if(_f!=this._const_text&&!this._is_touch){this._delete_text();}switch(_f){case this._const_text:return;case this._const_erase:case this._const_erase_user:{}break;}this._currentPath.push(_c);this._regenStroke(this._currentPath,_e);this._regenStroke(this._currentPath,this._canvas_elem_tmp);this._drawpathcount=this._currentPath.length-1;};_pSketch._initPath=function(_a,_b,_c,_d,_e,_f,_g,_h){if((this._currentPath[0]&&this._currentPath[0].tool)==this._const_stroke_user){this._endPath();}var _i=this._clone(_a);var _j={};_j.x=_c;_j.y=_d;_j.beginPath=true;_i.tool=_b;this._drawpathcount=0;var _k=this._const_composit_source_over;if(_i.tool!=this._const_text&&this.sketchtextarea.visible){this._resetTextEdit(true);return;}switch(_i.tool){case this._const_erase:case this._const_erase_user:_k=this._const_composit_destination_out;break;case this._const_text:{if(_e==null){if(this.sketchtextarea._p_visible){this._resetTextEdit(true);return;}else{this._showTextEditor(_j.x,_j.y,_f,_g,_h);}}}break;case this._const_stroke:case this._const_stroke_user:default:break;}_i.globalCompositeOperation=_k;for(var _l in _i){_j[_l]=_i[_l];}this._currentPath=this._add({type:_b,stroke:[_j]});this._setRedoUndo();};_pSketch._resetTextEdit=function(_a){var _b=this.sketchtextarea;if(_b._p_visible==false){return;}var _c=_b._p_value;this._hideTextEditor(true);if(_c&&_a){this._currentPath[0]._p_text=_c;}else{this._undo();this._setRedoUndo();}_b.set_left(this._default_edit_x);_b.set_top(this._default_edit_y);};_pSketch._initHistory=function(){this._history=[];this._current_state=-1;this._freeze_state=-1;this._current_strokes=null;};_pSketch._add=function(_a){if(this._current_state+1<this._history.length){this._history.splice(this._current_state+1,this._history.length-(this._current_state+1));}this._history.push(_a);this._current_state=this._history.length-1;this._current_strokes=null;return _a.stroke;};_pSketch._freeze=function(_a){if(_a===undefined){this._freeze_state=this._current_state;}else{this._freeze_state=_a;}};_pSketch._undoable=function(){return (this._current_state>-1&&this._current_state>this._freeze_state);};_pSketch._redoable=function(){return this._current_state<this._history.length-1;};_pSketch._currentStrokes=function(){var _a=this._current_strokes;if(_a==null){var _b=[];for(var _d=0;_d<=this._current_state;_d++ ){var _c=this._history[_d];switch(_c.type){case "init":case "json":case "strokes":case "batch":break;case "clear":_b=[];break;case this._const_stroke:case this._const_stroke_user:case this._const_image:case this._const_erase:case this._const_erase_user:case this._const_text:default:_b.push(_c.stroke);break;}}_a=_b;}this._current_strokes=_a;return _a;};_pSketch._delete_text=function(){if(!this._isEnableRedraw()){return;}this._apply_client_padding=false;if(this._text_elem){this._text_elem.destroy();this._text_elem=null;}};_pSketch._isParentdefaultprevented=function(_a,_b){return true;};_pSketch._getClientXY=function(_a,_b){var _c=0,_d=0;var _e=this._getCurrentStyleBorder();if(_e){_d=_e._getBorderTopWidth();_c=_e._getBorderLeftWidth();}var _f=_a-_c;var _g=_b-_d-nexacro._getCurrentBodyScrollTop();return [_f,_g];};delete _pSketch;_pSketch=null;nexacro.SketchEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.TextArea.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pSketchEditControl=nexacro._createPrototype(nexacro.TextArea,nexacro.SketchEditControl);nexacro.SketchEditControl.prototype=_pSketchEditControl;_pSketchEditControl._type_name="TextAreaControl";_pSketchEditControl.on_fire_sys_onlbuttondown=function(){nexacro.TextArea.prototype.on_fire_sys_onlbuttondown.call(this);return true;};_pSketchEditControl.on_fire_sys_ontouchstart=function(){nexacro.TextArea.prototype.on_fire_sys_ontouchstart.call(this);return true;};_pSketchEditControl.on_fire_onclick=function(){nexacro.TextArea.prototype.on_fire_onclick.call(this);return true;};_pSketchEditControl.on_fire_ontab=function(){nexacro.TextArea.prototype.on_fire_ontab.call(this);return true;};delete _pSketchEditControl;_pSketchEditControl=null;nexacro.ImageSketchBackground=function(_a){nexacro.Image.call(_a);this._p_parent=_a;};var _pImageSketchBackground=nexacro._createPrototype(nexacro.Image,nexacro.ImageSketchBackground);nexacro.ImageSketchBackground.prototype=_pImageSketchBackground;_pImageSketchBackground.on_load=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){this._p_width=_b;this._p_height=_c;var _k=this._p_parent;if(_e<0){var _l="";if(_g){_l=nexacro._GetSystemErrorMsg(this,_g);}else{_l=nexacro._GetSystemErrorMsg(this,_k._const_code_loadinvalidimage_msg).replace("%0",_k._const_code_loadinvalidimage);}if(!_j){_j=_k._getRefFormBaseUrl();}if(_k._clr_history){_k.on_fire_onerror(this,_g,_l,_k._const_errortype_obj,_k._const_code_loadinvalidimage,_a,_j);}}else{if(_d){this.handle=_d;}var _m=_k._canvas_elem;var _n=_k._image;if(_m&&_n){if(_k._isEnableRedraw()){_m.drawImage(_n,0,0,_b,_c);if(_k._canvas_elem_tmp){_k._canvas_elem_tmp.drawImage(_n,0,0,_b,_c);}_k._setImageValue(_n);}if(_k._clr_history){_k.on_fire_onload(this,_a);}}}};_pImageSketchBackground.set_src=function(_a){if(this._p_src!=_a){this._p_src=_a;this.handle=nexacro._getImageObject(_a,this.on_load,this,this._p_parent._getRefFormBaseUrl());if(this.handle){return true;}}else{var _b=this._p_width;var _c=this._p_height;var _d=this._p_parent;var _e=_d._canvas_elem;var _f=_d._image;if(_e&&_f){if(_d._isEnableRedraw()){_e.drawImage(_f,0,0,_b,_c);if(_d._canvas_elem_tmp){_d._canvas_elem_tmp.drawImage(_f,0,0,_b,_c);}return true;}}}return false;};_pImageSketchBackground._properties=[{name:"src"}];nexacro._defineProperties(_pImageSketchBackground,_pImageSketchBackground._properties);delete _pImageSketchBackground;}if(!nexacro.ExcelExportObject){nexacro.ExcelExportProgressEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"onprogress";this.fromobject=_a;this.fromreferenceobject=_f;this.itemindex=_c;this.itemtype=_d;this.recordindex=_e;};var _pExportEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ExcelExportProgressEventInfo);nexacro.ExcelExportProgressEventInfo.prototype=_pExportEventInfo;_pExportEventInfo._type_name="ExcelExportProgressEventInfo";delete _pExportEventInfo;nexacro.ExcelExportEventInfo=function(_a,_b,_c,_d){this.id=this.eventid=_b||"onsuccess";this.fromobject=_a;this.fromreferenceobject=_d;this.url=_c;};var _pExcelExportEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ExcelExportEventInfo);nexacro.ExcelExportEventInfo.prototype=_pExcelExportEventInfo;_pExcelExportEventInfo._type_name="ExcelExportEventInfo";delete _pExcelExportEventInfo;nexacro.ExcelExportErrorEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"onerror";this.fromobject=_a;this.fromreferenceobject=_e;this.errortype=_c;this.errormsg=_d;this.statuscode=_f;};var _pExportErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.ExcelExportErrorEventInfo);nexacro.ExcelExportErrorEventInfo.prototype=_pExportErrorEventInfo;_pExportErrorEventInfo._type_name="ExcelExportErrorEventInfo";delete _pExportErrorEventInfo;nexacro.ExcelExportObject=function(_a,_b){this.id=this._p_name=_a;if(!_b){var _c=nexacro.getApplication();if(_c){_b=_c.getActiveForm();if(!_b){var _d=_c._p_mainframe._window;var _e=_d.getCurrentFocusPaths();var _f=(_e?_e.length:0);for(var _h=0;_h<_f;_h++ ){var _g=_e[_h];if(!_g){continue;}if(_g._is_form){_b=_g;break;}}}}}this._p_parent=_b;this._grids=[];this._dataset=[];this._xml=[];this.onsuccess=new nexacro.EventListener("onsuccess");this.onprogress=new nexacro.EventListener("onprogress");this.onerror=new nexacro.EventListener("onerror");this._hidden_frame_handle=null;nexacro._create_hidden_frame("",this.on_complete_download,this,"export");};var _pExcelExport=nexacro.ExcelExportObject.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.ExcelExportObject);_pExcelExport._type_name="ExcelExportObject";_pExcelExport.activepagename="";_pExcelExport._p_exportactivemode="noactive";_pExcelExport._p_exporteventtype="itemrecord";_pExcelExport._p_exportfilename="";_pExcelExport._p_exportmessagealert="";_pExcelExport._p_exportmessagecomplete="";_pExcelExport._p_exportmessageprocess="";_pExcelExport._p_exportmessageready="";_pExcelExport.exportopenmode="noopen";_pExcelExport._exporttype=nexacro.ExportTypes.EXCEL;_pExcelExport._p_exporttype=nexacro.ExportTypes.EXCEL;_pExcelExport._p_exportuitype="none";_pExcelExport.templatefilename="";_pExcelExport._p_commdataformat="SSV";_pExcelExport._p_commcompress="none";_pExcelExport._p_exporturl="";_pExcelExport._p_transferrowcount=500;_pExcelExport.exportfilepasswrod="";_pExcelExport._p_exportwordwrap=true;_pExcelExport._p_filefilter="";_pExcelExport._p_filefilterindex=0;_pExcelExport._p_separator="";_pExcelExport._p_quotechar="default";_pExcelExport._p_commandversion="1.0";_pExcelExport._commdatadelimiter=String.fromCharCode(29);_pExcelExport._defaultseparator="0x2c";_pExcelExport._exportuitype=0;_pExcelExport._exporturl="";_pExcelExport._commcompress=false;_pExcelExport._commdataformat=2;_pExcelExport._allRowCount=0;_pExcelExport._progress_pos=0;_pExcelExport._uniqueIndex=0;_pExcelExport._fileURL="";_pExcelExport._itemsIndex=0;_pExcelExport._argsParam=null;_pExcelExport._argsDsParam=null;_pExcelExport._orgval_type=0;_pExcelExport._file_pw=null;_pExcelExport._wrap_text=true;_pExcelExport._filedownload=true;_pExcelExport._righttoleft=true;_pExcelExport._exportBar=null;_pExcelExport._tempSaveMethod=null;_pExcelExport.excelTypeTable={EXCEL:0x0100,EXCEL97:0x0110,EXCEL2007:0x0120,HANCELL2010:0x0400,HANCELL2014:0x0410,CSV:0x0500,TXT:0x0510,256:0x0100,272:0x0110,288:0x0120,1024:0x0400,1040:0x0410,1280:0x0500,1296:0x0510};_pExcelExport._event_list={"onsuccess":1,"onerror":1,"onprogress":1};_pExcelExport.set_templatefilename=function(_a){if(_a!=this.templatefilename){this.templatefilename=_a;}return _a;};_pExcelExport.set_commdataformat=function(_a){if(_a!=this._p_commdataformat){this._p_commdataformat=_a;switch(_a.toString().toUpperCase()){case "XML":this._commdataformat=0;break;case "BINARY":this._commdataformat=1;break;case "JSON":this._commdataformat=3;break;default:this._commdataformat=2;break;}}return _a;};_pExcelExport.set_commandversion=function(_a){this._p_commandversion=_a;};_pExcelExport.set_commcompress=function(_a){if(_a!=this._p_commcompress){this._p_commcompress=_a;if(_a.toString().toUpperCase()=="COMPRESS"){this._commcompress=true;}else{this._commcompress=false;}}return _a;};_pExcelExport.set_exporturl=function(_a){if(_a!=this._p_exporturl){this._p_exporturl=this._exporturl=_a;if(_a){this._exporturl=nexacro._getServiceLocation(_a,this._p_parent._getFormBaseUrl(),null,false);}}return _a;};_pExcelExport.set_exporttype=function(_a){if(_a!=this._p_exporttype){this._p_exporttype=_a;var _b=this.excelTypeTable[(_a+"").toUpperCase()];if(!_b){_b=256;}this._exporttype=_b;}return _a;};_pExcelExport.set_separator=function(_a){var _b=false;if(_a.length==4){if((_a.substr(0,2)=="0x")||(_a.substr(0,2)=="0X")){_a=parseInt(_a,16);}else{_b=true;}}_a=parseInt(_a);var _c=/^(0|3|10|13|29|34|39|40|41|58|61)$/g;if(_b||_c.test(_a)||_a>=0x80||_a<=0x00){this._p_separator=_a=this._defaultseparator;}if(_a!=this._p_separator&&nexacro._isInt(_a)){this._p_separator="0x"+_a.toString(16);}return _a;};_pExcelExport.set_quotechar=function(_a){var _b=['"',"'","none","default"];if(_b.indexOf(_a)==-1){this._p_quotechar=_a="default";}if(_a!=this._p_quotechar){this._p_quotechar=_a;}return _a;};_pExcelExport.set_activepagename=function(_a){if(_a!=this.activepagename){this.activepagename=_a;}return _a;};_pExcelExport.set_exportactivemode=function(_a){if(_a!=this._p_exportactivemode){this._p_exportactivemode=_a;}return _a;};_pExcelExport.set_exporteventtype=function(_a){if(_a!=this._p_exporteventtype){this._p_exporteventtype=_a;}return _a;};_pExcelExport.set_exportopenmode=function(_a){if(_a!=this.exportopenmode){this.exportopenmode=_a;}return _a;};_pExcelExport.set_exportfilename=function(_a){_a=_a+"";if(_a!=this._p_exportfilename){this._p_exportfilename=_a;}return _a;};_pExcelExport.set_exportfilepath=function(_a){if(_a!=this._p_exportfilepath){this._p_exportfilepath=_a;}return _a;};_pExcelExport.set_exportmessagealert=function(_a){if(_a!=this._p_exportmessagealert){this._p_exportmessagealert=_a;}return _a;};_pExcelExport.set_exportuitype=function(_a){if(_a!=this._p_exportuitype){this._p_exportuitype=_a;switch(_a){case "exportprogress":this._exportuitype=1;break;case "statusbar":this._exportuitype=2;break;default:this._exportuitype=0;break;}}return _a;};_pExcelExport.set_exportmessageready=function(_a){if(_a!=this._p_exportmessageready){this._p_exportmessageready=_a;}return _a;};_pExcelExport.set_exportmessageprocess=function(_a){if(_a!=this._p_exportmessageprocess){this._p_exportmessageprocess=_a;}return _a;};_pExcelExport.set_exportmessagecomplete=function(_a){if(_a!=this._p_exportmessagecomplete){this._p_exportmessagecomplete=_a;}return _a;};_pExcelExport.set_transferrowcount=function(_a){this._p_transferrowcount=nexacro._toInt(_a);};_pExcelExport.set_exportfilepassword=function(_a){if(_a!=this._p_exportfilepassword){this._p_exportfilepassword=_a;}};_pExcelExport.set_exportwordwrap=function(_a){if(_a!=this._p_exportwordwrap){this._p_exportwordwrap=_a;}};_pExcelExport.set_filefilter=function(_a){this._p_filefilter=_a;};_pExcelExport.set_filefilterindex=function(_a){this._p_filefilterindex=_a;};_pExcelExport._properties=[{name:"exporturl"},{name:"exportactivemode"},{name:"exporteventtype"},{name:"exportfilename"},{name:"exportfilepath"},{name:"exportmessagealert"},{name:"exportmessagecomplete"},{name:"exportmessageprocess"},{name:"exportmessagready"},{name:"exporttype"},{name:"exportuitype"},{name:"templatefilename"},{name:"commdataformat"},{name:"commandversion"},{name:"commcompress"},{name:"separator"},{name:"quotechar"},{name:"transferrowcount"},{name:"exportfilepassword"},{name:"exportmessageready"},{name:"exportwordwrap"},{name:"filefilter"},{name:"filefilterindex"}];nexacro._defineProperties(_pExcelExport,_pExcelExport._properties);_pExcelExport.addExportItem=function(_a,_b){var _c=-1;var _d;if(_a&&_b){var _e=arguments.length;if(_b instanceof nexacro.ExportItem){_d=_b;_d.parent=this;}else if(_a==this._getItemType(_b)){_d=new nexacro.ExportItem(this.id+"item"+this._uniqueIndex++ ,this);_d.parent=this;}else{return -1;}if(_e!=2){if(_e<5&&nexacro._isArray(arguments[2])){switch(_e){case 4:arguments[3]&&_d.set_valuetypebandid(arguments[3]);arguments[2]&&_d.set_valuetypecellindex(arguments[2]);break;case 3:arguments[2]&&_d.set_valuetypecellindex(arguments[2]);break;default:break;}}else{switch(_e){case 12:arguments[11]&&_d.set_valuetypebandid(arguments[11]);case 11:arguments[10]&&_d.set_valuetypecellindex(arguments[10]);case 10:arguments[9]&&_d.set_exportsize(arguments[9]);case 9:arguments[8]&&_d.set_exceptstyle(arguments[8]);case 8:arguments[7]&&_d.set_exportimage(arguments[7]);case 7:arguments[6]&&_d.set_exportvalue(arguments[6]);case 6:arguments[5]&&_d.set_exportmerge(arguments[5]);case 5:arguments[4]&&_d.set_exportselect(arguments[4]);case 4:arguments[3]&&_d.set_exporthead(arguments[3]);case 3:arguments[2]&&_d.set_range(arguments[2]);case 2:arguments[1]&&_d.set_source(arguments[1]);break;default:break;}}}_d._setEventHandler("onprogress",this.on_notify_onprogress,this);_d._setEventHandler("onsuccess",this.on_notify_onsuccess,this);_d._setEventHandler("onerror",this.on_notify_onerror,this);}else{return -1;}switch(_a){case nexacro.ExportItemTypes.GRID:_d.set_type(_a);_c=this._grids.push(_d)-1;_d._righttoleft=_d.source._isRtl();break;case nexacro.ExportItemTypes.DATA:break;case nexacro.ExportItemTypes.XML:break;}return _c;};_pExcelExport.clear=function(){var _a=0;_a+=this._grids.length;_a+=this._dataset.length;_a+=this._xml.length;for(var _c=0,_d=this._grids.length;_c<_d;_c++ ){var _b=this._grids.pop();if(_b){_b._clear();}}this._grids=[];this._dataset=[];this._xml=[];return _a;};_pExcelExport.clearExportItems=function(_a){var _b;if(_a==nexacro.ExportItemTypes.GRID){_b=this._grids.length;for(var _d=0;_d<_b;_d++ ){var _c=this._grids.pop();if(_c){_c._clear();}}this._grids=[];}if(_b==0){this._uniqueIndex=0;}return _b;};_pExcelExport.count=function(){var _a=0;_a+=this._grids.length;_a+=this._dataset.length;_a+=this._xml.length;return _a;};_pExcelExport.countExportItems=function(_a){var _b=0;if(_a==nexacro.ExportItemTypes.GRID){_b+=this._grids.length;}return _b;};_pExcelExport.delExportItem=function(_a,_b){var _c=false;if(_a==nexacro.ExportItemTypes.GRID){if(this._grids.splice(_b,1).length>0){_c=true;}}return _c;};_pExcelExport.getExportItem=function(_a,_b){var _c=null;if(_a==nexacro.ExportItemTypes.GRID){_c=this._grids[_b];}return _c?_c:null;};_pExcelExport.setExportItem=function(_a,_b,_c){if(!_c||!(_c instanceof nexacro.ExportItem)){return false;}var _d=false;if(_a==nexacro.ExportItemTypes.GRID){if(_b>-1&&_b<this._grids.length){_c._p_parent=this;this._grids[_b]=_c;_d=true;}}return _d;};_pExcelExport.exportItems=function(_a){var _b=-1;if(!this._p_exporturl){return _b;}if(_a==nexacro.ExportItemTypes.GRID){var _c=this._grids;_b=this._gCount=_c.length;this._allCount=_b;if(_b>0){if(this._p_exportmessagealert!=""){nexacro.alert(this._p_exportmessagealert);}_c[0]._gridItemExport(this);}}return _b;};_pExcelExport.exportDataEx=function(_a,_b,_c){this._is_export_ex=true;var _d=this.exportData(_a,_b,0,_c);return _d;};_pExcelExport.exportData=function(_a,_b,_c,_d){this._argsParam=_a;this._argsDsParam=_b;if(typeof _c=="string"){_c=_c.toLowerCase();switch(_c){case "false":case "0":this._orgval_type=0;break;case "true":case "1":this._orgval_type=1;break;case "2":this._orgval_type=2;break;default:this._orgval_type=0;break;}}else if(typeof _c=="number"){_c=nexacro._toInt(_c);if(_c<0||_c>2){this._orgval_type=0;}else{this._orgval_type=_c;}}else{if(_c===true||_c===false){this._orgval_type=_c?1:0;}else{this._orgval_type=0;}}this._filedownload=(_d!==undefined)?!!_d:true;var _e;this._file_pw=null;if(this._p_exportfilepassword){this._file_pw=this._p_exportfilepassword;}if(this._p_exportwordwrap!==""){var _f=nexacro._toBoolean(this._p_exportwordwrap);if(_f!=this._wrap_text){this._wrap_text=_f;}}var _g=-1;if(!this._p_exporturl){return _g;}if(this._commdataformat==0||(this._p_commandversion!="1.0"&&this._commdataformat==3)){this._commdatadelimiter="_x001D_";}var _h=this._grids;var _i=this._gCount=_h.length;this._allCount=_i;if(this._allCount>0&&this._p_exportmessagealert!=""){nexacro.alert(this._p_exportmessagealert);}for(_e=0;_e<_i;_e++ ){this._allRowCount+=_h[_e]._p_source._getGridRowCount();}if(_i>0){_h[0]._gridItemExport(this);}return this.count();};_pExcelExport.destroy=function(){var _a=this._exportBar;if(_a){_a.destroy();}for(var _c=0,_d=this._grids.length;_c<_d;_c++ ){var _b=this._grids.pop();if(_b){_b._clear();}}this._grids=null;this._dataset=null;this._grids=null;this._dataset=null;this._excel_suppress_info=null;this._merge_datas=null;this._xml.length=0;if(this._p_parent){this._p_parent.removeChild(this.id);}nexacro._EventSinkObject.prototype.destroy.call(this);return true;};_pExcelExport.on_fire_onprogress=function(_a,_b){var _c=this.onprogress;if(_c&&_c._has_handlers){_c._fireEvent(this,_b);}};_pExcelExport.on_fire_onsuccess=function(_a,_b){var _c=this.onsuccess;if(_c&&_c._has_handlers){_c._fireEvent(this,_b);}};_pExcelExport.on_fire_onerror=function(_a,_b){var _c=this.onerror;var _d;if(_c&&_c._has_handlers){_d=_c._fireEvent(this,_b);}return _d;};_pExcelExport.on_notify_onprogress=function(_a,_b){this.on_fire_onprogress(_a,_b);return false;};_pExcelExport.on_notify_onsuccess=function(_a,_b){this.on_fire_onsuccess(_a,_b);return false;};_pExcelExport.on_notify_onerror=function(_a,_b){this.on_fire_onerror(_a,_b);return false;};_pExcelExport.on_complete_download=function(_a,_b,_c,_d,_e,_f){if(_a>=0){if(this._p_exportactivemode=="active"){nexacro._execShell(_b);}}};_pExcelExport._getItemType=function(_a){var _b;switch(_a&&_a._type_name){case "Grid":_b=nexacro.ExportItemTypes.GRID;break;case "Dataset":break;case "Xml":break;default:if(_a instanceof nexacro.Grid){_b=nexacro.ExportItemTypes.GRID;}break;}return _b;};_pExcelExport._getProcessStr=function(_a,_b,_c){var _d="";_d=this._p_exportmessageprocess.replace("%d",_a);_d=_d.replace("%d",_b);_d=_d.replace("%d",_c);return _d;};_pExcelExport._getForm=function(){if(this._p_parent instanceof nexacro.Form){return this._p_parent;}return null;};_pExcelExport._getExportBar=function(_a){var _b=this._getForm();var _c="_exportBar";var _d=_b[_c];if(_d){_d.destroy();}_d=new nexacro.ExportProgress(_c,0,0,10,10,null,null,null,null,null,null,_b);_b.addChild(_d._p_name,_d);_d._uitype=_a;if(_d.createComponent(true)){_d.on_created();}return _d;};delete _pExcelExport;nexacro.ExportItem=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);this._merge_datas=null;this._gridTempInfo=null;this._tmpSuppressInfos=undefined;this._stylecache={};this._excel_suppress_info={};this._style_map1=null;this._style_map2=null;this._ds_style2=null;this._ds_style=null;this._ds_cell=null;this._ds_response=null;this._load_manager=null;this._orgvalue_cells=null;this._orgvalue_bands=null;};var _pExportItem=nexacro.ExportItem.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.ExportItem);_pExportItem._type_name="ExportItem";_pExportItem._p_exceptstyle="none";_pExportItem._p_exporthead="allband";_pExportItem._exporthead="";_pExportItem._p_exportimage="none";_pExportItem._p_exportmerge="suppress";_pExportItem._exportmerge=1;_pExportItem._p_exportselect="allrecord";_pExportItem._p_exportvalue="allstyle";_pExportItem._p_exportsize="width";_pExportItem.valuetypecellindex=[];_pExportItem.valuetypebandid="";_pExportItem._p_range="";_pExportItem._p_source="";_pExportItem._p_type="";_pExportItem._applyA=true;_pExportItem._applyB=true;_pExportItem._applyC=true;_pExportItem._applyF=true;_pExportItem._applyHead=true;_pExportItem._applySumm=true;_pExportItem._applyL=true;_pExportItem._d_BLColor="";_pExportItem._seq=1;_pExportItem._preStartRow=0;_pExportItem._startRow=0;_pExportItem._eof=false;_pExportItem._instanceId="";_pExportItem._a_ct=0;_pExportItem._bg_ct=0;_pExportItem._c_ct=0;_pExportItem._f_ct=0;_pExportItem._l_ct=0;_pExportItem._t_ct=0;_pExportItem._sm_ct=0;_pExportItem._g_ct=0;_pExportItem._s_ct=0;_pExportItem._selectcount=0;_pExportItem._righttoleft=false;_pExportItem._event_list={"onsuccess":1,"onprogress":1,"onerror":1};_pExportItem._suppress_align_table={"first":"top","first,over":"top","middle":"middle","middle,over":"middle","last":"bottom","last,over":"bottom"};_pExportItem._clear=function(){if(this._ds_style2){this._ds_style2.destroy();this._ds_style2=null;delete this._ds_style2;}if(this._ds_style){this._ds_style.destroy();this._ds_style=null;delete this._ds_style;}if(this._style_map1){this._style_map1=null;}if(this._style_map2){this._style_map2=null;}if(this._ds_command){this._ds_command.destroy();this._ds_command=null;delete this._ds_command;}if(this._ds_cell){this._ds_cell.destroy();this._ds_cell=null;delete this._ds_cell;}if(this._ds_response){this._ds_response.destroy();this._ds_response=null;delete this._ds_response;}if(this._load_manager){this._load_manager.destroy();this._load_manager=null;delete this._load_manager;}if(this._merge_datas){this._merge_datas=null;}if(this._stylecache){this._stylecache=null;}if(this.source){this.source=null;}if(this._gridTempInfo){this._gridTempInfo=null;}if(this._excel_suppress_info){this._excel_suppress_info=null;}if(this._tmpSuppressInfos){this._tmpSuppressInfos=null;}this._righttoleft=false;this._orgvalue_cells=null;this._orgvalue_bands=null;};_pExportItem.set_exceptstyle=function(_a){if(_a!=this._p_exceptstyle){var _b=0;var _c=_a.replace(/ /g,"").split(",");var _d=_c.length;for(var _e=0;_e<_d;_e++ ){switch(_c[_e].toLowerCase()){case "align":this._applyA=false;_b+=1;break;case "background":this._applyB=false;_b+=1;break;case "color":this._applyC=false;_b+=1;break;case "font":this._applyF=false;_b+=1;break;case "border":this._applyL=false;_b+=1;break;case "none":this._applyA=true;this._applyB=true;this._applyC=true;this._applyF=true;this._applyL=true;_b+=1;break;}}if(_d===_b){this._p_exceptstyle=_a;}}return _a;};_pExportItem.set_exporthead=function(_a){if(_a!=this._p_exporthead){this._p_exporthead=_a;var _b=_a.replace(/ /g,"").split(",");var _c=_b.length;for(var _d=0;_d<_c;_d++ ){switch(_b[_d].toLowerCase()){case "nohead":this._applyHead=false;break;case "nosumm":this._applySumm=false;break;default:this._applySumm=true;this._applySumm=true;break;}}}if(!this._applyHead||!this._applySumm){if(!this._applyHead&&!this._applySumm){this._exporthead="nohead, nosumm";}else if(!this._applyHead){this._exporthead="nohead";}else{this._exporthead="nosumm";}}else{this._exporthead="allband";}return _a;};_pExportItem.set_exportimage=function(_a){if(_a!=this._p_exportimage){this._p_exportimage=_a;}return _a;};_pExportItem.set_exportmerge=function(_a){if(_a!=this._p_exportmerge){this._p_exportmerge=_a;switch(_a){case "nosuppress":this._exportmerge=0;break;case "merge":this._exportmerge=2;break;default:this._exportmerge=1;break;}}return _a;};_pExportItem.set_exportselect=function(_a){if(_a!=this._p_exportselect){this._p_exportselect=_a;}return _a;};_pExportItem.set_exportvalue=function(_a){if(_a!=this._p_exportvalue){this._p_exportvalue=_a;}return _a;};_pExportItem.set_range=function(_a){if(_a!=this._p_range){this._p_range=_a;}return _a;};_pExportItem.set_source=function(_a){if(_a!=this._p_source){this._p_source=_a;}return _a;};_pExportItem.set_type=function(_a){if(_a!=this._p_type){this._p_type=_a;}return _a;};_pExportItem.set_exportsize=function(_a){if(_a!=this._p_exportsize){this._p_exportsize=_a;}return _a;};_pExportItem.set_valuetypecellindex=function(_a){if(_a!=this._p_valuetypecellindex){this._p_valuetypecellindex=_a;if(nexacro._isArray(_a)){var _b=[];for(var _c=0;_c<_a.length;_c++ ){_b[(_a[_c]|0)]=true;}this._orgvalue_cells=_b;}}};_pExportItem.set_valuetypebandid=function(_a){if(_a!=this._p_valuetypebandid){this._p_valuetypebandid=_a;if(nexacro._isString(_a)){var _b=[];switch(_a){case "head":case "body":case "summ":_b[_a]=true;break;default:_b=null;break;}this._orgvalue_bands=_b;}}};_pExportItem.on_fire_onprogress=function(_a,_b,_c,_d){var _e=this._p_parent.onprogress;if(_e&&_e._has_handlers){var _f=new nexacro.ExcelExportProgressEventInfo(_a,"onprogress",_b,_c,_d,this);_e._fireEvent(this._p_parent,_f);}};_pExportItem.on_fire_onsuccess=function(_a,_b,_c){var _d=this._p_parent.onsuccess;if(_d&&_d._has_handlers){var _e=new nexacro.ExcelExportEventInfo(_a,"onsuccess",_c,this);_d._fireEvent(this._p_parent,_e);}};_pExportItem.on_fire_onerror=function(_a,_b,_c,_d){var _e=this._p_parent.onerror;if(_e&&_e._has_handlers){var _f=new nexacro.ExcelExportErrorEventInfo(_a,"onerror",_b,_c,this,_d);_e._fireEvent(this._p_parent,_f);}};_pExportItem._getWindow=function(){var _a=this._p_parent;if(_a){var _b=_a._p_parent;if(_b._is_form){return _b._getWindow();}}return null;};_pExportItem._getWindowHandle=function(){var _a=this._p_parent;if(_a){var _b=_a._p_parent;if(_b._is_form){return _b._getWindowHandle();}}return null;};_pExportItem._getCellStyle=function(_a,_b,_c,_d,_e){var _f;var _g=_e==true?"selected":undefined;switch(_d){case "align":_f=_a._query_status_align(_b,_a.displaytype,_g,true);break;case "background":_f=_a._query_status_background(_b,_g,true);if(_f&&_f.indexOf("linear-gradient")>=0){_f=this._getGradientValue(_f);}break;case "border":_f=_a._query_status_border(_b,_g,true);break;case "color":_f=_a._query_status_color(_b,_g,true);break;case "font":_f=_a._query_status_font(_b,_g,true);break;case "textDecoration":_f=_a._grid._getCellStyleInfo(_a._cellidx,"textDecoration",_b,_g);if(_f){_f=_f.match(/underline|line-through/g);if(_f){_f=_f.join(",");_f=_f.replace("line-through","strikeout");}}break;}return _f;};_pExportItem._getCellText=function(_a,_b,_c,_d){var _e;if(_a&&_a instanceof nexacro.Grid){var _f;var _g=_a._curFormat;var _h;if(_b==-1){_f="head";_h=_g._headcells[_c];}else if(_b==-2){_f="summ";_h=_g._summcells[_c];}else{_f="body";_h=_g._bodycells[_c];}var _i=this._p_parent;var _j=_h._getDisplaytype(_b);var _k=this._orgvalue_cells;var _l=false;if(_j=="decoratetext"){_l=true;}var _m=this._orgvalue_bands;var _n=false;if(!nexacro._isNull(_m)&&!nexacro._isNull(_m[_f])){_n=true;}if(_a.getSubCellCount(_f,_c)){if(_d==undefined){return null;}if(_k&&_k[_c]&&_n){_e=_a.getSubCellValue(_b,_c,_d);}else if(_i._orgval_type){if(_i._orgval_type!=2||(_i._orgval_type==2&&_j!="date")){_e=_a.getSubCellValue(_b,_c,_d);_l=false;}else{_e=_a.getSubCellText(_b,_c,_d);}}else{_e=_a.getSubCellText(_b,_c,_d);}}else{if(_k&&_k[_c]&&_n){_e=_a.getCellValue(_b,_c);}else if(_i._orgval_type){if(_i._orgval_type!=2||(_i._orgval_type==2&&_j!="date")){_e=_a.getCellValue(_b,_c);_l=false;}else{_e=_a.getCellText(_b,_c);}}else{_e=_a.getCellText(_b,_c);}}if(_l){_e=nexacro._getDisplayTextfromDecorateText(_e);}}return _e;};_pExportItem.__localeinfo={"ko":"ko_KR","ja":"ja_JP","en":"en_US","af":"af_ZA","ar":"ar_SA","as":"as_IN","az":"az_AZ","be":"be_BY","bg":"bg_BG","bn":"bn_IN","br":"br_FR","bs":"bs_BA","ca":"ca_ES","cs":"cs_CZ","cy":"cy_GB","da":"da_DK","de":"de_DE","dz":"dz_BT","el":"el_GR","es":"es_ES","et":"et_EE","eu":"eu_ES","fa":"fa_IR","fi":"fi_FI","fo":"fo_FO","fr":"fr_FR","fy":"fy_NL","ga":"ga_IE","gd":"gd_GB","gl":"gl_ES","gu":"gu_IN","gv":"gv_GB","he":"he_IL","hi":"hi_IN","hr":"hr_HR","hu":"hu_HU","hy":"hy_AM","id":"id_ID","is":"is_IS","it":"it_IT","iw":"iw_IL","ka":"ka_GE","kk":"kk_KZ","kl":"kl_GL","km":"km_KH","kn":"kn_IN","ku":"ku_TR","kw":"kw_GB","ky":"ky_KG","lg":"lg_UG","lo":"lo_LA","lt":"lt_LT","lv":"lv_LV","mg":"mg_MG","mi":"mi_NZ","mk":"mk_MK","ml":"ml_IN","mn":"mn_MN","mr":"mr_IN","ms":"ms_MY","mt":"mt_MT","my":"my_MM","nb":"nb_NO","ne":"ne_NP","nl":"nl_NL","nn":"nn_NO","no":"no_NO","nr":"nr_ZA","oc":"oc_FR","om":"om_ET","or":"or_IN","pa":"pa_IN","pl":"pl_PL","pt":"pt_PT","ro":"ro_RO","ru":"ru_RU","rw":"rw_RW","se":"se_NO","si":"si_LK","sk":"sk_SK","sl":"sl_SI","so":"so_SO","sq":"sq_AL","sr":"sr_RS","ss":"ss_ZA","st":"st_ZA","sv":"sv_SE","ta":"ta_IN","te":"te_IN","tg":"tg_TJ","th":"th_TH","ti":"ti_ET","tl":"tl_PH","tn":"tn_ZA","tr":"tr_TR","ts":"ts_ZA","tt":"tt_RU","uk":"uk_UA","ur":"ur_PK","uz":"uz_UZ","ve":"ve_ZA","vi":"vi_VN","wa":"wa_BE","xh":"xh_ZA","yi":"yi_US","zh":"zh_CN"};_pExportItem._getCellLocale=function(_a,_b){var _c=_a?_a._getLocale(_b):"";if(!_c){_c=nexacro._locale?nexacro._locale:nexacro._getLocale();}_c=_c.replace(/-/g,"_");if(_c.length==2){var _d=_c.toLowerCase();var _e=_pExportItem.__localeinfo[_d];return (_e?_e:_c);}return _c;};_pExportItem._find_styleName=function(_a,_b,_c,_d,_e){var _f;if(_a.id=="STYLE"){_f=this._style_map1;if(!_f){_f=this._style_map1={};}}else if(_a.id=="STYLE2"){_f=this._style_map2;if(!_f){_f=this._style_map2={};}}var _g;if(_f){_g=_f[_b];}else{_f={};}if(!_g){_g=_f[_b]=[];}var _h=_g.length;var _i,_j;if(_h>0){for(var _n=0;_n<_h;_n++ ){_j=_f[_b][_n].value;if(_c==_j){_i=_f[_b][_n].name;break;}}}if(!_i){_i=_b+( ++_d);_f[_b][_h]={value:_c,name:_i};var _k=_a.getRowCount();_a.addRow();_a.setColumn(_k,"type",_b);_a.setColumn(_k,"name",_i);if(_c){_j=_c.toString();var _l=_j.split(_e);if(_l.length>1){_c=_l[0];var _m=_l[1];_a.setColumn(_k,"locale",_m);}}_a.setColumn(_k,"value",_c);}return [_i,_d];};_pExportItem._getFitValue=function(_a){if(!_a){return;}var _b=this._fontParseInfo(_a._sysvalue);return _b;};_pExportItem._getFitFontValue=function(_a){var _b=this._default_size,_c=this._default_face,_d;var _e;if(_a){var _f=new nexacro._FontObject(_a);_f._parseInfo(_a);_b=_f.size;_d=_f.type;if(_f.face){_f.face=_f.face.replace(/"/gi,"");}_c=_f.face;_e=_f._unit;if(_e=="px"){_b=parseInt(nexacro._convertPxToPt(_b));}}return _d+","+_b+","+_c;};_pExportItem._getColortoRGB=function(_a){var _b="transparent";if(_a){if(typeof _a=="object"){_b=this._getHexColor(_a.value.split(" ")[0]);}else if(typeof (_a)=="string"&&(_a.indexOf("rgb(")>=0)||(_a.indexOf("RGB(")>=0)){_b="rgbstring";}else if(typeof (_a)=="string"&&(_a.indexOf("rgba(")>=0)||(_a.indexOf("RGBA(")>=0)){_b="rgbastring";}else if(typeof (_a)=="string"&&(_a.indexOf("hsl(")>=0)||(_a.indexOf("HSL(")>=0)){_b="hslstring";}else if(typeof (_a)=="string"&&(_a.indexOf("hsla(")>=0)||(_a.indexOf("HSLA(")>=0)){_b="hslastring";}else{_b=this._getHexColor(_a);}var _c=[];if(_b===""){_b=_a._value;if(_b===undefined){_b=_a.value;if(typeof (_b)=="string"&&((_b.indexOf("rgb(")>=0)||(_b.indexOf("RGB(")>=0)||(_b.indexOf("rgba(")>=0)||(_b.indexOf("RGBA(")>=0))){_b=this._getRGBAtoRGB(_b);}else if(typeof (_b)=="string"&&((_b.indexOf("hsl(")>=0)||(_b.indexOf("HSL(")>=0)||(_b.indexOf("hsla(")>=0)||(_b.indexOf("HSLA(")>=0))){_b=this._getHSLAtoRGB(_b);}}}else{if(_b.indexOf("#")>-1){_c.push(parseInt(_b.substring(1,3),16));_c.push(parseInt(_b.substring(3,5),16));_c.push(parseInt(_b.substring(5,7),16));_b=_c.join(",");}else if(_b=="rgbstring"||_b=="rgbastring"){_b=this._getRGBAtoRGB(_a);}else if(_b=="hslstring"||_b=="hslastring"){_b=this._getHSLAtoRGB(_a);}else if(_b=="transparent"){_b="transparent";}else{var _d=_b.indexOf("(");var _e=_b.indexOf(")");_c=_b.substring(_d+1,_e -1).split(",");_c.pop();_b=_c.join(",");}}}return _b;};_pExportItem._getHSLAtoRGB=function(_a){var _b="transparent";var _c=_a.indexOf("(")+1;var _d=_a.indexOf(")");_a=_a.substring(_c,_d);_a=_a.split(",");var _e=_a.length;if(_e==4&&_a[3]==0){_b="transparent";}else{var _f=_a[0].trim();var _g=_a[1].trim();var _h=_a[2].trim();_g=_g.substring(0,_g.indexOf("%"));_g=_g/100;_h=_h.substring(0,_h.indexOf("%"));_h=_h/100;function hueToRgb(_i,_j,_k){if(_k<0){_k+=6;}if(_k>=6){_k-=6;}if(_k<1){return (_j-_i)* _k+_i;}else if(_k<3){return _j;}else if(_k<4){return (_j-_i)* (4-_k)+_i;}else{return _i;}}function hslToRgb(_i,_j,_k){var _l,_m,_n,_o,_p;_i=_i/60;if(_k<=0.5){_m=_k* (_j+1);}else{_m=_k+_j-(_k* _j);}_l=_k* 2-_m;_n=hueToRgb(_l,_m,_i+2)* 255;_o=hueToRgb(_l,_m,_i)* 255;_p=hueToRgb(_l,_m,_i -2)* 255;return parseInt(_n)+","+parseInt(_o)+","+parseInt(_p);}_b=hslToRgb(_f,_g,_h);}return _b;};_pExportItem._getRGBAtoRGB=function(_a){var _b="transparent";var _c=_a.indexOf("(")+1;var _d=_a.indexOf(")");_a=_a.substring(_c,_d);_a=_a.split(",");var _e=_a.length;for(var _f=0;_f<_e;_f++ ){if(_f>2){_a[_f]=parseFloat(_a[_f]);}else{_a[_f]=parseInt(_a[_f]);}}if(_e==4&&_a[3]==0){_b="transparent";}else if(_e==4){_b=_a.join(",");_b=_b.substring(0,_b.lastIndexOf(","));}else{_b=_a.join(",");}return _b;};_pExportItem._makeforDsStyle=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j,_k="";var _l="";var _m=this._p_parent?this._p_parent._commdatadelimiter:String.fromCharCode(29);if(this._applyA){_j=this._find_styleName(_a,"align",_b,this._a_ct,_m);_k=_j[0];this._a_ct=_j[1];_l+="align:"+_k+",";}if(this._applyB){_j=this._find_styleName(_a,"background",_c,this._bg_ct,_m);_k=_j[0];this._bg_ct=_j[1];_l+="background:"+_k+",";}if(this._applyC){_j=this._find_styleName(_a,"color",_d,this._c_ct,_m);_k=_j[0];this._c_ct=_j[1];_l+="color:"+_k+",";}if(this._applyF){_j=this._find_styleName(_a,"font",_e,this._f_ct,_m);_k=_j[0];this._f_ct=_j[1];_l+="font:"+_k+",";}_f=_f.replace(/transparent,[^:]*/g,"empty");_j=this._find_styleName(_a,"line",_f,this._l_ct,_m);_k=_j[0];this._l_ct=_j[1];_l+="line:"+_k+",";_j=this._find_styleName(_a,"type",_g,this._t_ct,_m);_k=_j[0];this._t_ct=_j[1];_l+="type:"+_k;if(_h>1){_j=this._find_styleName(_a,"rowsuppress",_h,this._sm_ct,_m);_k=_j[0];this._sm_ct=_j[1];_l+=",rowsuppress:"+_k;}if(_i>1){_j=this._find_styleName(_a,"colsuppress",_i,this._sm_ct,_m);_k=_j[0];this._sm_ct=_j[1];_l+=",colsuppress:"+_k;}_j=this._find_styleName(_a,"style",_l,this._s_ct,_m);_k=_j[0];this._s_ct=_j[1];return _k;};_pExportItem._checkExpr=function(_a,_b){if(_b&&_b._bindtype>0){return true;}if(_a&&_a._bindtype>0){return true;}return false;};_pExportItem._checkGradation=function(_a){return false;};_pExportItem._getHexColor=function(_a){_a=_a.toLowerCase();var _b=nexacro._xreNamedColorList[_a];if(_b){return _b;}var _c=_a.length;if(_a.substring(0,1)=='#'){if(_c==7){return _a;}if(_c>7){return _a.substr(0,7);}}if(_a.substring(0,2)=="0x"){if(_c==8){return "#"+_a.substring(2);}if(_c==10){return "#"+_a.substring(2,8);}}return "";};_pExportItem._getGradationColor=function(_a){var _b;var _c;var _d=[];if(_a){_b=_a._value;if(_b!=""){_b=this._getHexColor(_a.start_color);_c=this._getHexColor(_a.end_color);if(_b.indexOf("#")>-1){var _e=_b+_c;if(this._stylecache[_e]){return this._stylecache[_e];}else{_d.push(Math.round((parseInt(_b.substring(1,3),16)+parseInt(_c.substring(1,3),16))/2));_d.push(Math.round((parseInt(_b.substring(3,5),16)+parseInt(_c.substring(3,5),16))/2));_d.push(Math.round((parseInt(_b.substring(5),16)+parseInt(_c.substring(5),16))/2));_b=_d.join(",");this._stylecache[_e]=_b;}}return _b;}}return "";};_pExportItem._getGradationColor=function(_a,_b){var _c=[];if(_a!=""){_a=this._getColortoRGB(_a);_b=this._getColortoRGB(_b);var _d=_a+_b;if(this._stylecache[_d]){return this._stylecache[_d];}else{_a=_a.split(',');_b=_b.split(',');_c.push(Math.round((parseInt(_a[0])+parseInt(_b[0]))/2));_c.push(Math.round((parseInt(_a[1])+parseInt(_b[1]))/2));_c.push(Math.round((parseInt(_a[2])+parseInt(_b[2]))/2));_a=_c.join(",");this._stylecache[_d]="rgb("+_a+")";}return "rgb("+_a+")";}return "";};_pExportItem._getGradientValue=function(_a){var _b=nexacro.BackgroundObject(_a);if(_b){if(_b.gradient){_b.gradient._parseInfo(_b.gradient.value);if(_b.gradient.color_stops){var _c=_b.gradient.color_stops.length;var _d=_b.gradient.color_stops[0];var _e=_b.gradient.color_stops[_c -1];_a=this._getGradationColor(nexacro.ColorObject(_d.color),nexacro.ColorObject(_e.color));return _a;}}}return "transparent";};_pExportItem._getCellBodyStyle=function(_a,_b){var _c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n;var _o=this._ds_style;var _p=false;var _q=_a._getDisplaytype(0);var _r="empty:empty:empty:empty";var _s={vertical:"empty",horizon:"empty",vertical1:"empty",horizon1:"empty"};_c=_a._query_status_align(0,_q,null,true);if(_c==","){_c="left,";}if(_a._getVirtualMergeInfo(0+2)){var _t=_a._grid._getTempCell(_b,0,null,null,null,true);var _u=_t.cell;_d=_a.background||_u._getCSSStyleValue("background");_f=_a.color||_u._getCSSStyleValue("color");}else{_d=_a._query_status_background(0,null,true);_f=_a._query_status_color(0,null,true);}if(_d&&_d.indexOf("linear-gradient")>=0){_d=this._getGradientValue(_d);}_h=_a._query_status_font(0,null,true);if(this._applyL){_i=_a._query_status_border(0,null,true);}if(_a._getVirtualMergeInfo(1+2)){_e=_a.background;_g=_a.color;}else{_e=_a._query_status_background(1,null,true);_g=_a._query_status_color(1,null,true);}if(_e&&_e.indexOf("linear-gradient")>=0){_e=this._getGradientValue(_e);}var _v;var _w=_c;if(this._checkGradation(_d)){}else{_v=this._getColortoRGB(_d);}var _x=this._getColortoRGB(_f);var _y=nexacro._nvl(this._getFitFontValue(_h),"");var _z=this._getCellStyle(_a,0,false,"textDecoration","enabled");if(_z){_y=_z+","+_y;}if(this._applyL&&_i){if(_i.right&&_i.right.style!="none"&&_i.right._width!=0){if(_i.right.color=="transparent"){_s.vertical="empty";}else{_s.vertical=this._getColortoRGB(_i.right.color)+(_i.right.style=="solid"?"":","+_i.right.style);}}if(_i.left&&_i.left.style!="none"&&_i.left._width!=0){if(_i.left.color=="transparent"){_s.vertical1="empty";}else{_s.vertical1=this._getColortoRGB(_i.left.color)+(_i.left.style=="solid"?"":","+_i.left.style);}}if(_i.bottom&&_i.bottom.style!="none"&&_i.bottom._width!=0){if(_i.bottom.color=="transparent"){_s.horizon="empty";}else{_s.horizon=this._getColortoRGB(_i.bottom.color)+(_i.bottom.style=="solid"?"":","+_i.bottom.style);}}if(_i.top&&_i.top.style!="none"&&_i.top._width!=0){if(_i.top.color=="transparent"){_s.horizon1="empty";}else{_s.horizon1=this._getColortoRGB(_i.top.color)+(_i.top.style=="solid"?"":","+_i.top.style);}}if(this._applyHead){_r=(_a._col==0?_s.vertical1:"empty")+":"+"empty"+":";}else{_r=(_a._col==0?_s.vertical1:"empty")+":"+(_a._row==0?_s.horizon1:"empty")+":";}_r+=_s.vertical+":"+_s.horizon;}if(this._checkExpr(_c,_a.cssclass)){_w=undefined;}else{this._stylecache[_b+"align"]=_w;}if(this._checkExpr(_d,_a.cssclass)){_v=undefined;}else{this._stylecache[_b+"background0"]=_v;}if(this._checkExpr(_f,_a.cssclass)){_x=undefined;}else{this._stylecache[_b+"color0"]=_x;}if(this._checkExpr(_h,_a.cssclass)){_y=undefined;}else{this._stylecache[_b+"font"]=_y;}if(this._checkExpr(_i,_a.cssclass)){}else{this._stylecache[_b+"line"]=_r;}if(_e){if(this._checkGradation(_e)){_j=_a._stylecache.gradationtruefalsenormal;if(!_j){_j=_a.style.gradation2;if(!_j){_j=_a._query_pseudo_gradation(0,true,false,"enabled");}}_m=this._getGradationColor(_j);}else{_m=this._getColortoRGB(_e);}if(this._checkExpr(_e,_a.cssclass)){_m=undefined;}else{this._stylecache[_b+"background1"]=_m;}if(_v!=_m){_p=true;}}else{this._stylecache[_b+"background1"]=_m=_v;}if(_g){_n=this._getColortoRGB(_g);if(this._checkExpr(_g,_a.cssclass)){_n=undefined;}else{this._stylecache[_b+"color1"]=_n;}if(_x!=_n){_p=true;}}else{this._stylecache[_b+"color1"]=_n=_x;}var _aa=this._getFixedCellType(_a,0);_k=this._makeforDsStyle(_o,_w,_v,_x,_y,_r,_aa);if(_p){_l=this._makeforDsStyle(_o,_w,_m,_n,_y,_r,_aa);}var _ab=_a._subcells;var _ac=_ab.length;if(_ac){var _ad="";for(var _ae=0;_ae<_ac;_ae++ ){_ad+=this._modifyFormat(_ab[_ae],_k,_l,0,_a);}return _ad;}else{return this._modifyFormat(_a,_k,_l,0);}};_pExportItem._getFixedCellType=function(_a,_b){var _c=_a._getDisplaytype(_b);var _d="";var _e;var _f;var _g=this._p_parent;if(_g._is_export_ex){var _h=this._orgvalue_cells;if(_h){var _i=this._orgvalue_bands;var _j=(_b>-1)?"body":(_b>-2)?"head":"summ";var _k=false;if(!nexacro._isNull(_i)&&!nexacro._isNull(_i[_j])){_k=true;}if(!_h[_a._cellidx]||!_k){return "text";}}}switch(_c){case "number":break;case "maskeditcontrol":case "mask":_e=_a._getAttrValue(_a._p_maskeditformat,_b);_f=_a._getAttrValue(_a._p_maskeditpostfixtext,_b);if(_e!=null&&_e.length!=0){_d=_e;if(_f){_d+=_f;}}var _l=_a._getAttrValue(_a._p_maskedittype,_b);if(_l=="number"){_c="number";}else{_c="text";_d="";}break;case "calendarcontrol":case "date":case "time":case "datetime":_c="date";var _m;_e=_a._getAttrValue(_a._p_calendardateformat,_b);if(_e==null||_e.length==0||!_e.match(/LONGDATE|SHORTDATE|[yMdHhms]/)){_e="yyyy-MM-dd";}else{_m=_a._getLocale(_b);if(_e=="SHORTDATE"){_e=nexacro.Locale._makeDateMaskString(_m,_e);if(_e==""){_e=nexacro.Locale._default_shortdate_format;}}else if(_e=="LONGDATE"){_e=nexacro.Locale._makeDateMaskString(_m,"SHORTDATE");if(_e==""){_e=nexacro.Locale._default_longdate_format;}}}_d=_e;_m=this._getCellLocale(_a,_b);var _n=_g._commdatadelimiter;if(_m){_d+=_n+_m;}break;case "imagecontrol":if(this.exportimage.toLowerCase()=="image"){_d+="image";var _o=_a._getAttrValue(_a._p_imagestretch,_b);if(_o){_d+=","+_o;}}_c="text";break;case "text":if(_a._getAttrValue(_a._p_displaytype,_b)=="normal"){_c="normal";}else{_c="text";}break;default:_c="text";break;}return _c+(_d?":"+_d:"");};_pExportItem._modifyFormat=function(_a,_b,_c,_d,_e,_f){var _g,_h,_i;_h=_i="";var _j=_a._colspan;var _k=_a._rowspan;var _l=_a._row;var _m=_a._col;var _n=_l;var _o=_m;var _p=_a._getDisplaytype(_d);if(_d<0){_g=_a._getDisplayText(_d);if(_p=="decoratetext"){_g=nexacro._getDisplayTextfromDecorateText(_g);}else if(_p=="imagecontrol"){var _q=this._p_exportimage.toLowerCase();if(_q=="url"||_q=="image"){var _r=this._getCellText(this.source,_d,_a._cellidx);if(_r){var _s=nexacro._getURIValue(_r);_g=nexacro._getImageLocation(_s,this._getForm()._getFormBaseUrl());}else{_g=_r;}}else{_g="";}}else if(_g&&_p=="mask"){var _t=_a._getAttrValue(_a._p_maskeditpostfixtext,_d);if(_t){_g=_g.replace(_t,"");}}}else{_g=_a.text._value;}if(nexacro._isString(_g)){_g=nexacro._encodeXml(_g);}if(_e){_l=_n+_e._row;_m=_o+_e._col;}_i+="<Cell ";_i+="row=\""+_l+"\" col=\""+_m+"\" ";_h+="rowspan=\""+_k+"\" ";_h+="colspan=\""+_j+"\" ";if(this._exportmerge==1){if(_f!=null){_g=_f;}}else if(this._exportmerge==2){if(_f!=null){_h=_f;}}_i+=_h;if(_g){_i+="text=\""+_g+"\" ";}var _u="";_i+="style1=\""+_b+"\" ";if(_c){_i+="style2=\""+_c+"\" ";}var _v=_a._p_displaytype;if(_v){_u=_p;switch(_u){case "imagecontrol":if(this._p_exportimage.toLowerCase()=="image"){_i+="displaytype=\"imagecontrol\" ";}case "text":_u="string";break;case "number":_u="int";break;case "calendarcontrol":case "date":case "time":case "datetime":_u="date";var _w=_a._getAttrValue(_a._p_calendardateformat,_d);if(_w==null||_w.length==0||!_w.match(/[yMdHhms]/)){_w="yyyy-MM-dd";}_i+="displaytype=\""+_w+"\" ";break;default:_u="text";break;}_i+="type=\""+_u+"\" ";}_i+="/>";return _i;};_pExportItem._getSubCellLine=function(_a,_b,_c,_d,_e){var _f,_g,_h,_i;var _j=_a._col;var _k=_a._row;if(_j==_e){_h=_c.vertical;}else{_h="empty";}if(_j==0){_f=_b.vertical;}else{_f="empty";}if(_k==_d){_i=_c.horizon;}else{_i="empty";}if(_k==0){_g=_b.horizon;}else{_g="empty";}return _f+":"+_g+":"+_h+":"+_i;};_pExportItem._makeVirtualLine=function(_a,_b,_c){var _d;switch(_a){case "topvirtual":case "bottomvirtual":_d="empty:empty:"+_b.vertical+":empty";break;case "rightvirtual":if(_c){_d="empty:empty:empty:"+_b.horizon;}else{_d="empty:"+_b.horizon+":empty:empty";}break;case "righttopvirtual":case "rightbottomvirtual":_d="empty:empty:empty:empty";break;default:if(_c){_d="empty:empty:"+_b.vertical+":"+_b.horizon;}else{_d="empty:"+_b.horizon+":"+_b.vertical+":empty";}break;}return _d;};_pExportItem._makeFormat=function(_a){var _b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l;var _m=_a._curFormat;var _n=_m._headcells;var _o=_n?_n.length:0;var _p=_m._bodycells;var _q=_p?_p.length:0;var _r=_m._summcells;var _s=_r?_r.length:0;var _t="";var _u=this._ds_style;var _v;var _w;var _x=0;var _y=_m._cols;var _z=_m._headrows;var _aa=_m._bodyrows;var _ab=_m._summrows;var _ac,_ad,_ae,_af;var _ag;var _ah=false;var _ai=null;var _aj,_ak,_al;_t="<Formats><Format><Columns>";for(_ac=0,_ae=_y.length;_ac<_ae;_ac++ ){_t+='<Column size="'+Math.round(_y[_ac].size)+'" />';}_t+="</Columns><Rows>";for(_ac=0,_af=_z?_z.length:0;_ac<_af;_ac++ ){_t+='<Row size="'+Math.round(_z[_ac].size)+'" band="head" />';}for(_ac=0,_af=_aa?_aa.length:0;_ac<_af;_ac++ ){_t+='<Row size="'+Math.round(_aa[_ac].size)+'" />';}for(_ac=0,_af=_ab?_ab.length:0;_ac<_af;_ac++ ){_t+='<Row size="'+Math.round(_ab[_ac].size)+'" band="summ" />';}_t+="</Rows>";if(_o>0&&this._applyHead){_t+="<Head>";for(_ac=0;_ac<_o;_ac++ ){if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(this._getWindow());}_i=_n[_ac];_k=this._getCellStyle(_i,-1,false,"background","enabled");if(this._checkGradation(_k)){_l=this._getCellStyle(_i,-1,false,"gradation","enabled");_b=this._getGradationColor(_l);}else{_b=this._getColortoRGB(_k);}_c=this._getCellStyle(_i,-1,false,"align","enabled");_d=this._getFitFontValue(this._getCellStyle(_i,-1,false,"font","enabled"));_e=this._getCellStyle(_i,-1,false,"textDecoration","enabled");if(_e){_d=_e+","+_d;}_f=this._getColortoRGB(this._getCellStyle(_i,-1,false,"color","enabled"));_v={vertical:"empty",horizon:"empty",vertical1:"empty",horizon1:"empty"};if(this._applyL){_g=this._getCellStyle(_i,-1,false,"border","enabled");if(_g){if(_g.right&&_g.right.style!="none"&&_g.right._width!=0){if(_g.right.color=="transparent"){_v.vertical="empty";}else{_v.vertical=this._getColortoRGB(_g.right.color)+(_g.right.style=="solid"?"":","+_g.right.style);}}if(_g.left&&_g.left.style!="none"&&_g.left._width!=0){if(_g.left.color=="transparent"){_v.vertical1="empty";}else{_v.vertical1=this._getColortoRGB(_g.left.color)+(_g.left.style=="solid"?"":","+_g.left.style);}}if(_g.bottom&&_g.bottom.style!="none"&&_g.bottom._width!=0){if(_g.bottom.color=="transparent"){_v.horizon="empty";}else{_v.horizon=this._getColortoRGB(_g.bottom.color)+(_g.bottom.style=="solid"?"":","+_g.bottom.style);}}if(_g.top&&_g.top.style!="none"&&_g.top._width!=0){if(_g.top.color=="transparent"){_v.horizon1="empty";}else{_v.horizon1=this._getColortoRGB(_g.top.color)+(_g.top.style=="solid"?"":","+_g.top.style);}}}}_ag=this._getFixedCellType(_i,-1);_j=_i._subcells;_x=_j.length;if(_x){for(_ad=0;_ad<_x;_ad++ ){_w=this._getSubCellLine(_j[_ad],_v,_v,_i._rowspan-1,_i._colspan-1);_h=this._makeforDsStyle(_u,_c,_b,_f,_d,_w,_ag);_t+=this._modifyFormat(_j[_ad],_h,null,-1,_i);}}else{_w=(_i._col==0?_v.vertical1:"empty")+":"+(_i._row==0?_v.horizon1:"empty")+":";_w+=_v.vertical+":"+_v.horizon;_ah=false;_ai=null;if(this._exportmerge==1){if(!!_a._checkVirtualMerge(_i,-1)){_w=this._makeVirtualLine(_i._getVirtualMergeInfo(1).remove,_v,true);_ai="";_aj=this._getMergeDatas(-1,_ac);if(_aj){if(_aj.isVirtualStart){_ai=nexacro._encodeXml(_i._getDisplayText(-1));if(_c!="left,top"){_ak=_c.split(",");_al=_aj[_ak[1]]+"_"+_aj[_ak[0]];if(this._merge_datas[_al]){this._merge_datas[_al].disPlayText=_ai;this._merge_datas[_al].showText=true;}else{this._merge_datas[_al]={disPlayText:_ai,showText:true};}}_ai="";}else if(_aj.showText){_ai=_aj.disPlayText;}}}}else if(this._exportmerge==2){_aj=this._getMergeDatas(-1,_ac);if(_aj){if(_aj.isVirtualStart){_ai="rowspan=\""+_aj.rowspan+"\" colspan=\""+_aj.colspan+"\" ";}else{_ah=true;}}}if(!_ah){_h=this._makeforDsStyle(_u,_c,_b,_f,_d,_w,_ag);_t+=this._modifyFormat(_i,_h,null,-1,false,_ai);}}}_t+="</Head>";}if(_q>0){_t+="<Body>";for(_ac=0;_ac<_q;_ac++ ){if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(this._getWindow());}_i=_p[_ac];_t+=this._getCellBodyStyle(_i,_ac);}_t+="</Body>";}if(_s>0&&this._applySumm){_t+="<Summary>";for(_ac=0;_ac<_s;_ac++ ){if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(this._getWindow());}_i=_r[_ac];_k=this._getCellStyle(_i,-2,false,"background","enabled");if(this._checkGradation(_k)){_l=this._getCellStyle(_i,-2,false,"gradation","enabled");_b=this._getGradationColor(_l);}else{_b=this._getColortoRGB(_k);}_c=this._getCellStyle(_i,-2,false,"align","enabled");_d=this._getFitFontValue(this._getCellStyle(_i,-2,false,"font","enabled"));_e=this._getCellStyle(_i,-2,false,"textDecoration","enabled");if(_e){_d=_e+","+_d;}_f=this._getColortoRGB(this._getCellStyle(_i,-2,false,"color","enabled"));_v={vertical:"empty",horizon:"empty"};if(this._applyL){_g=this._getCellStyle(_i,-2,false,"border","enabled");if(_g){if(_g.right&&_g.right.style!="none"&&_g.right._width!=0){_v.vertical=this._getColortoRGB(_g.right.color)+(_g.right.style=="solid"?"":","+_g.right.style);}if(_a._p_summarytype=="default"){if(_g.top&&_g.top.style!="none"&&_g.top._width!=0){_v.horizon=this._getColortoRGB(_g.top.color)+(_g.top.style=="solid"?"":","+_g.top.style);}}else{if(_g.bottom&&_g.bottom.style!="none"&&_g.bottom.width!=0){_v.horizon=this._getColortoRGB(_g.bottom.color)+(_g.bottom.style=="solid"?"":","+_g.bottom.style);}}}}_ag=this._getFixedCellType(_i,-2);_j=_i._subcells;_x=_j.length;if(_x){for(_ad=0;_ad<_x;_ad++ ){_w=this._getSubCellLine(_j[_ad],_v,_v,_i._rowspan-1,_i._colspan-1);_h=this._makeforDsStyle(_u,_c,_b,_f,_d,_w,_ag);_t+=this._modifyFormat(_j[_ad],_h,null,-2,_i);}}else{_ah=false;_w=_v.vertical+":"+_v.horizon+":"+_v.vertical+":"+_v.horizon;if(this._exportmerge==1){if(!!_a._checkVirtualMerge(_i,-2)){_w=this._makeVirtualLine(_i._getVirtualMergeInfo(0).remove,_v);_ai="";_aj=this._getMergeDatas(-2,_ac);if(_aj){if(_aj.isVirtualStart){_ai=nexacro._encodeXml(_i._getDisplayText(-2));if(_c!="left,top"){_ak=_c.split(",");_al=_aj[_ak[1]]+"_"+_aj[_ak[0]];if(this._merge_datas[_al]){this._merge_datas[_al].disPlayText=_ai;this._merge_datas[_al].showText=true;}else{this._merge_datas[_al]={disPlayText:_ai,showText:true};}_ai="";}}else if(_aj.showText){_ai=_aj.disPlayText;}}}}else if(this._exportmerge==2){if(!!_a._checkVirtualMerge(_i,-2)){_aj=this._getMergeDatas(-2,_ac);if(_aj){if(_aj.isVirtualStart){_ai="rowspan=\""+_aj.rowspan+"\" colspan=\""+_aj.colspan+"\" ";}else{_ah=true;}}}}if(!_ah){_h=this._makeforDsStyle(_u,_c,_b,_f,_d,_w,_ag);_t+=this._modifyFormat(_i,_h,null,-2,false,_ai);}}}_t+="</Summary>";}_t+="</Format></Formats>";return _t;};_pExportItem._getForm=function(){return this._p_parent._p_parent;};_pExportItem._eventExport=function(_a,_b,_c,_d){var _e=_a._p_exporteventtype;var _f=_a._itemsIndex;var _g=_a._exportBar;if(_e!="none"){var _h=_c+1;var _i="";var _j=_h==this._bodyRowCnt;var _k=_a._progress_pos+_h;if(_e=="item"&&_j){this.on_fire_onprogress(_a,_f,this.type,_d==null?_c:_d);if(_g){_i=_a._getProcessStr(_f+1,_k,_a._allRowCount);_g._set_text(_i);_g._set_pos((_f+1)/_a._allCount* 100);}}else if(_e=="itemrecord"){this.on_fire_onprogress(_a,_f,this._p_type,_d==null?_c:_d);if(_g){_i=_a._getProcessStr(_f+1,_h,this._bodyRowCnt);_g._set_text(_i);_g._set_pos(_h/this._bodyRowCnt* 100);}}else if(_e=="totalrecord"){this.on_fire_onprogress(_a,_f,this._p_type,_d==null?_c:_d);if(_g){_i=_a._getProcessStr(_f+1,_k,_a._allRowCount);_g._set_text(_i);_g._set_pos(_k/_a._allRowCount* 100);}}if(_k==_a._allRowCount&&_a._p_exportmessagecomplete!=""){if(_g){_g._set_text(_a._p_exportmessagecomplete);}}if(_j&&_g){if(_e=="itemrecord"){_a._progress_pos=_k;}else{_a._progress_pos+=this._startRow-this._preStartRow;}}}};_pExportItem._updateBarPos=function(_a,_b){if(_b!="none"&&_a._exportuitype){var _c=_a._itemsIndex+1;var _d=_a._exportBar;_a._progress_pos+=this._startRow-this._preStartRow;var _e="";var _f=this._startRow==this._bodyRowCnt;if(_b=="item"&&_f){_e=_a._getProcessStr(_c,_a._progress_pos,_a._allRowCount);_d._set_text(_e);_d._set_pos(_c/_a._allCount* 100);}else if(_b=="itemrecord"){_e=_a._getProcessStr(_c,this._startRow,this._bodyRowCnt);_d._set_text(_e);_d._set_pos(this._startRow/this._bodyRowCnt* 100);}else if(_b=="totalrecord"){_e=_a._getProcessStr(_c,_a._progress_pos,_a._allRowCount);_d._set_text(_e);_d._set_pos(_a._progress_pos/_a._allRowCount* 100);}if(_a._progress_pos==_a._allRowCount&&_a._p_exportmessagecomplete!=""){_d._set_text(_a._p_exportmessagecomplete);}}};_pExportItem._rollbackSuppressInfo=function(){var _a=this._p_source._curFormat._bodycells;var _b=this._tmpSuppressInfos&&this._tmpSuppressInfos.length;for(var _c=0;_c<_b;_c++ ){_a[_c]._suppress_infos=this._tmpSuppressInfos.shift();}};_pExportItem._gridSuppressUpdate=function(_a,_b){var _c=_a._curFormat._bodycells;var _d=_c.length;this._tmpSuppressInfos=[];var _e;for(_e=0;_e<_d;_e++ ){this._tmpSuppressInfos.push(_c[_e]._suppress_infos);}_a._analyzeSuppress(true);for(_e=0;_e<_b;_e++ ){if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(this._getWindow());}_a._suppressUpdateRow(_e,0,_b -1,true);}};_pExportItem._gridExportContinue=function(_a){var _b=this._p_source;var _c=this._ds_command;_c.setColumn(0,"command","export");_c.setColumn(0,"type",_a._exporttype);_c.setColumn(0,"item",_b.id);_c.setColumn(0,"seq",this._seq);_c.setColumn(0,"startrow",this._startRow);_c.setColumn(0,"instanceid",this._instanceId);_c.setColumn(0,"url",_a._fileURL);_c.setColumn(0,"summarytype",_b._p_summarytype);_c.setColumn(0,"range",this._p_range);_c.setColumn(0,"exportsize",this._p_exportsize);_c.setColumn(0,"exporthead",this._exporthead);_c.setColumn(0,"exportimage",this._p_exportimage);_c.setColumn(0,"exportfilename",_a._p_exportfilename);_c.setColumn(0,"exportfilepath",_a._p_exportfilepath);_c.setColumn(0,"format","");_c.setColumn(0,"password",_a._file_pw);_c.setColumn(0,"wraptext",_a._wrap_text);_c.setColumn(0,"righttoleft",this._righttoleft);_c.setColumn(0,"separator",_a._p_separator?_a._p_separator:_a._defaultseparator);_c.setColumn(0,"quotechar",_a._p_quotechar);_c.setColumn(0,"commandversion",_a._p_commandversion);var _d=this._ds_style;var _e=this._ds_style2;if(!_e){_e=this._ds_style2=new nexacro.Dataset("STYLE2");_e.addColumn("type","String",10);_e.addColumn("name","String",32);_e.addColumn("value","String",1024);_e.addColumn("locale","String",32);}else{this._ds_style2.clearData();}delete this._ds_cell;var _f=new nexacro.Dataset("CELL");this._ds_cell=_f;var _g=_b.getCellCount("body");var _h=this._bodyRowCnt;var _i;var _j="";var _k=false;if(this._exportmerge&&_b._is_use_suppress&&_h>=_b._bodyBand._get_rows().length){this._gridSuppressUpdate(_b,_h);}var _l=null;var _m=null;if(_g>0){for(var _cl=0;_cl<_g;_cl++ ){_f.addColumn("Column"+_cl,"String",256);}var _n=this._partitionRow+this._startRow;if(_n>=_h){_n=_h;this._eof=true;_l=this._p_parent._argsParam;_m=this._p_parent._argsDsParam;}var _o=_b._curFormat._bodycells;var _p=false;var _q=0;var _r;var _s,_t,_u,_v;var _w=false;var _x=this._getWindow();for(var _cm=this._startRow;_cm<_n;_cm++ ){if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(_x);}_r=0;var _y,_z;var _aa=false;for(_z=0;_z<_g;_z++ ){_aa=_aa||_b.isSelectedCell(_z,"body",_cm,-9);}var _ab=this.exportselect=="selectrecord";var _ac;if(_aa||!_ab){_ac=_f.addRow();if(_ab){this._eventExport(_a,this._p_type,_cm,this._selectcount++ );}else{this._eventExport(_a,this._p_type,_cm);}}else{continue;}var _ad=_cm%2;var _ae=(this.exportvalue=="selectstyle");for(_z=0;_z<_g;_z++ ){_w=false;_p=_b.isSelectedCell(_z,"body",_cm,-9);if(!_p){if(_ab){_w=true;}}var _af;var _ag;var _ah;var _ai;var _aj;var _ak=_o[_z];var _al=_ak._rowspan;var _am=_ak._suppress_infos;var _an=_p&&_ae;var _ao=this._checkExpr(null,_ak.cssclass);var _ap=_ao?_ak._getAttrValue(_ak._p_cssclass,_cm):"";var _aq=_z+(_ap?_ap:"");var _ar=_an?"-c":"";var _as=this._stylecache[_aq+"align"+_ar];var _at=this._stylecache[_aq+"line"+_ar];var _au,_av,_aw;{if(_w){_au="255,255,255";_av="255,255,255";_s=this._d_BLColor;_at=_s+":"+_s+":"+_s+":"+_s;_k=true;}else{_au=this._stylecache[_aq+"background"+_ad+_ar];_av=this._stylecache[_aq+"color"+_ad+_ar];}_aw=this._stylecache[_aq+"font"+_ar];}if(!nexacro._isNull(_as)){_ag=_as;if(_ao){_k=true;}}else{if(this._applyA){_k=true;_ag=nexacro._nvl(this._getCellStyle(_ak,_cm,_ad,"align",_an),"");if(_ao){this._stylecache[_aq+"align"+_ar]=_ag;}}}if(!nexacro._isNull(_au)){_af=_au;if(_ao){_k=true;}}else{if(this._applyB){_k=true;_af=nexacro._nvl(this._getColortoRGB(this._getCellStyle(_ak,_cm,_ad,"background",_an)),"");if(_ao){this._stylecache[_aq+"background"+_ad+_ar]=_af;}}}if(!nexacro._isNull(_av)){_ai=_av;if(_ao){_k=true;}}else{if(this._applyC){_k=true;_ai=nexacro._nvl(this._getColortoRGB(this._getCellStyle(_ak,_cm,_ad,"color",_an)),"");if(_ao){this._stylecache[_aq+"color"+_ad+_ar]=_ai;}}}if(!nexacro._isNull(_aw)){_ah=_aw;if(_ao){_k=true;}}else{if(this._applyF){_k=true;_ah=nexacro._nvl(this._getFitFontValue(this._getCellStyle(_ak,_cm,_ad,"font",_an)),"");var _ax=this._getCellStyle(_ak,_cm,_ad,"textDecoration",_an);if(_ax){_ah=_ax+","+_ah;}if(_ao){this._stylecache[_aq+"font"+_ar]=_ah;}}}var _ay=false,_az=null,_ba=null,_bb=null,_bc=null,_bd;var _be=0;var _bf=0;var _bg=false;switch(this._exportmerge){case 0:break;case 1:if(_ak._getSuppress(_cm)>0){_k=_ay=true;if(_am[_cm]){if(_am[_cm].border_proc){_bc="empty";}if(_am[_cm].text_proc){_w=true;}}}_b._checkVirtualMerge(_ak,_cm);if(_ak._getVirtualMergeInfo(_cm+2)){var _bh=_ak._getVirtualMergeInfo(_cm+2).remove;if(_bh){_k=_ay=true;switch(_bh){case "bottomvirtual":_bc="empty";break;case "rightbottomvirtual":_bb=_bc="empty";break;case "rightvirtual":_bb="empty";break;}}}break;case 2:if(_ak._getSuppress(_cm)>0){_k=_ay=true;if(_al>1){_bg=true;}var _bi=_z+"count";var _bj=this._excel_suppress_info;if(!_bj[_bi]){_bj[_bi]=0;_ag=_ag.split(",")[0]+","+this._suppress_align_table[_ak.suppressalign];}if(_am[_cm]&&_am[_cm].border_proc){this._excel_suppress_info[_bi]++ ;}else{_be= ++_bj[_bi];if(_bg){_be=_be* _al;}if(_bg&&_be==1){_bg=false;}_bj[_bi]=0;}}_t=this._getMergeDatas(_cm,_z);if(_t&&_t.isVirtualEnd){_k=_ay=true;_be=_t.rowspan;_bf=_t.colspan;}break;}if(_b._supphorztype>0){if(_ak._area=="left"||_ak._area=="right"){_k=_ay=true;if(_am[_cm]){if(_am[_cm].horz_text_proc){_w=true;}}}}if(!_ay&&!nexacro._isNull(_at)){_aj=_at;if(_ao){_k=true;}}else{if(this._applyL){_u=this._getCellStyle(_ak,_cm,_ad,"border",_an);if(!_az){_az=this._getColortoRGB(_u.left.color)+(_u.left.style=="solid"?"":","+_u.left.style);}if(!_ba){_ba=this._getColortoRGB(_u.top.color)+(_u.top.style=="solid"?"":","+_u.top.style);}if(!_bb){_bb=this._getColortoRGB(_u.right.color)+(_u.right.style=="solid"?"":","+_u.right.style);}if(!_bc){_bc=this._getColortoRGB(_u.bottom.color)+(_u.bottom.style=="solid"?"":","+_u.bottom.style);}_aj=_az+":"+_ba+":"+_bb+":"+_bc;if(_ao){this._stylecache[_aq+"line"+_ar]=_aj;}}else{_aj="empty:empty:empty:empty:";}}_v=this._getFixedCellType(_ak,_cm);if(_j){{_j=_v;_k=true;}}else{_j=_v;}_i=this._makeforDsStyle(_e,_ag,_af,_ai,_ah,_aj,_v,_be,_bf);var _bk=false;if(_v.indexOf("date")>-1&&(this._checkExpr(_ak.locale)||this._checkExpr(_ak.calendardateformat))){_k=true;if(_ak._p_calendardateformat=="LONGDATE"){_bk=true;}}var _bl=_ak._getDisplaytype(_cm);if(!_k){if(_bl=="mask"||_bl=="maskeditcontrol"){var _bm=_ak._getAttrValue(_ak._p_maskedittype,_cm);if(_bm=="number"){_k=true;}}}var _bn=this._getCellText(_b,_cm,_z);_y=_w?"":_bn;var _bo=this._orgvalue_cells;var _bp=this._orgvalue_bands;var _bq=false;if(!nexacro._isNull(_bp)&&!nexacro._isNull(_bp["body"])){_bq=true;}var _br=(_bo&&_bo[_z]&&_bq);if(_bk){_ak.calendardateformat="SHORTDATE";_y=_ak._getDisplayText_date(_cm);_ak.calendardateformat="LONGDATE";}if(_bl=="imagecontrol"){var _bs=this._p_exportimage.toLowerCase();if(_bs=="url"||_bs=="image"){var _bt=this._getCellText(_b,_cm,_z);if(_bt){var _bu=nexacro._getURIValue(_bt);_y=nexacro._getImageLocation(_bu,this._getForm()._getFormBaseUrl());}else{_y=_bt;}}else{_y="";}}else if(_y&&_bl=="mask"){if(!_bv){var _bv=new Map();}var _bw=_bv.get(_z);if(_bw==undefined){_bw=_ak._getAttrValue(_ak._p_maskeditpostfixtext,_cm);_bv.set(_z,_bw?_bw:"none");}if(_bw&&_bw!="none"){_y=_y.replace(_bw,"");}}var _bx=_a._commdatadelimiter;if(this._exportmerge==1){if(_ak._getSuppress(_cm)>0){if(_am[_cm]&&_am[_cm].text_proc){_y="";}}if(_b._supphorztype>0){if(_ak._area=="left"||_ak._area=="right"){if(_am[_cm]){if(_am[_cm].horz_text_proc){_y="";}}}}if(!!_b._checkVirtualMerge(_ak,_cm)){_y="";_t=this._getMergeDatas(_cm,_z);if(_t){if(_t.isVirtualStart){if(_ag=="left,top"){_y=_bn;}else{var _by=_ag.split(",");var _bz=_t[_by[1]]+"_"+_t[_by[0]];if(this._merge_datas[_bz]){this._merge_datas[_bz].disPlayText=_bn;this._merge_datas[_bz].showText=true;}else{this._merge_datas[_bz]={disPlayText:_bn,showText:true};}}}if(_t.showText){_y=_t.disPlayText;}}}}else if(this._exportmerge==2){if(_b._supphorztype>0){if(_ak._area=="left"||_ak._area=="right"){if(_am[_cm]){if(_am[_cm].horz_text_proc){_y="";}}}}}if(_a._orgval_type||_br){_y=nexacro._isNumber(_y)?_y:nexacro._isDecimal(_y)?_y.toString():nexacro._nvl(_y,"");}else{_y=nexacro._nvl(_y,"");}if(_a._p_commandversion=="2.0"){_y=nexacro.base64Encode(_y);}else if(_a._p_commandversion=="3.0"){_y=nexacro.base32Encode(_y);}if(_bg){_f.setColumn(_ac,"Column"+(_z+_r),_y+_bx+(_k||(_p&&_ae)?_i:"")+_bx+_bg);_bg=false;}else{_f.setColumn(_ac,"Column"+(_z+_r),_y+_bx+(_k||(_p&&_ae)?_i:""));}if(_ak._subcells.length){var _ca=_ak._subcells;var _cb=_ca.length;var _cc=_ak._rowspan-1;var _cd=_ak._colspan-1;var _ce="";_s=this._d_BLColor;if(this._applyL){_u=this._getCellStyle(_ak,_cm,_ad,"border",_an);_bd=this._getColortoRGB(_u.right.color)+(_u.right.style=="solid"?"":","+_u.right.style);}else{_bd=_s;}var _cf;var _cg;var _ch;var _ci;for(var _cn=0;_cn<_cb;_cn++ ){var _cj=_ca[_cn]._col;var _ck=_ca[_cn]._row;if(_cj==_cd){_ch=_bd;}else{_ch="empty";}if(_cj==0){_cf=_s;}else{_cf="empty";}if(_ck==_cc){_ci=_bd;}else{_ci="empty";}if(_ck==0){_cg=_s;}else{_cg="empty";}_ce=_cf+":"+_cg+":"+_ch+":"+_ci;_v=this._getFixedCellType(_ca[_cn],0);_i=this._makeforDsStyle(_e,_ag,_af,_ai,_ah,_ce,_v);if(_cn!=0){_f.addColumn("Column"+(_cl+_r),"String",256);_r++ ;}_bn=this._getCellText(_b,_cm,_z,_cn);_y=_w?"":_bn;if(_a._orgval_type||_br){_y=nexacro._isNumber(_y)?_y:nexacro._isDecimal(_y)?_y.toString():nexacro._nvl(_y,"");}else{_y=nexacro._nvl(_y,"");}if(_a._p_commandversion=="1.0"){_f.setColumn(_ac,"Column"+(_z+_r),_y+_bx+_i);}else if(_a._p_commandversion=="2.0"){_f.setColumn(_ac,"Column"+(_z+_r),nexacro.base64Encode(_y)+_bx+_i);}else if(_a._p_commandversion=="3.0"){_f.setColumn(_ac,"Column"+(_z+_r),nexacro.base32Encode(_y)+_bx+_i);}}}}_q++ ;}this._preStartRow=this._startRow;this._startRow=_n;}else{this._eof=true;_l=this._p_parent._argsParam;_m=this._p_parent._argsDsParam;}_c.setColumn(0,"eof",this._eof);if(this._ds_response){delete this._ds_response;}this._ds_response=new nexacro.Dataset("RESPONSE");this._rollbackSuppressInfo();if(_m!=undefined){this._transaction(this.id,_a._exporturl,"COMMAND=_ds_command STYLE=_ds_style2 CELL=_ds_cell"+" "+_m,"_ds_response=RESPONSE",_l,"_exportCallback",true,_a._commdataformat,_a._commcompress);}else{this._transaction(this.id,_a._exporturl,"COMMAND=_ds_command STYLE=_ds_style2 CELL=_ds_cell","_ds_response=RESPONSE",_l,"_exportCallback",true,_a._commdataformat,_a._commcompress);}this._updateBarPos(_a,_a._p_exporteventtype);};_pExportItem._onHttpTransactionError=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=false;var _k=nexacro.MakeCommunicationError(this,_d,_e,_f,_g,_h,_i);if(_b){_j=this.on_fire_onerror(_a,_k._p_name,_k.message,_c,_f,_g,_h);}return _j;};_pExportItem._exportCallback=function(_a,_b,_c){var _d=this._p_source;var _e=this._p_parent;var _f=_e._exportBar;if(_b<0){_c=nexacro._decodeXml(_c);this.on_fire_onerror(_e,"ObjectError",_c,_b);nexacro._stopTransaction(this,0);if(_f){_f._hide();_f._set_pos(0);_f._set_text("");}if(_d._hasTree){_d.set_treeinitstatus(this._gridTempInfo.treeinitstatus);nexacro.Grid.prototype._recreate_contents_all=_e._tempSaveMethod;_e._tempSaveMethod=null;_d._treeIndexes=this._gridTempInfo.treeIndexes;_d._treeStates=this._gridTempInfo.treeStates;_d._p_enableevent=this._gridTempInfo.enableevent;this._gridTempInfo=null;}}else{this._instanceId=this._ds_response.getColumn(0,"instanceid");var _g=this._ds_response.getColumn(0,"url");if(_g!=null&&_g!=""){_e._fileURL=_g;}var _h=_e._itemsIndex;var _i=_h+1==_e._allCount;var _j=this._startRow==this._bodyRowCnt;this._seq++ ;if(_j){if(_d._hasTree){_d.set_treeinitstatus(this._gridTempInfo.treeinitstatus);nexacro.Grid.prototype._recreate_contents_all=_e._tempSaveMethod;_e._tempSaveMethod=null;_d._treeIndexes=this._gridTempInfo.treeIndexes;_d._treeStates=this._gridTempInfo.treeStates;_d._p_enableevent=this._gridTempInfo.enableevent;this._gridTempInfo=null;}if(_i){var _k=_e._p_exportmessagecomplete;if(_k){_f._set_text(_k);}if(_f){_f._hide();_f._set_pos(0);_f._set_text("");}this._tmpSuppressInfos=null;_e._fileURL="";_e._allRowCount=0;_e._progress_pos=0;_e._itemsIndex=0;var _l;if(_g!=null&&_g!=""){var _m=_g.lastIndexOf("/");if(_m==-1){_m=_g.lastIndexOf("\\");}if(_m!=-1){_l=_g.substring(_m+1);}}var _n=nexacro.getApplication();if(_n){_n._endCommProgress();}if(_e._filedownload){if(_e._p_exportfilename==""){var _o=_l.lastIndexOf(".");if(_o!=-1){_l=_l.substring(0,_o);}else{_l="";}}else{_l=_e._p_exportfilename;}switch(_e._p_exporttype){case nexacro.ExportTypes.EXCEL:case nexacro.ExportTypes.EXCEL97:_l+=".xls";break;case nexacro.ExportTypes.EXCEL2007:_l+=".xlsx";break;case nexacro.ExportTypes.HANCELL2010:case nexacro.ExportTypes.HANCELL2014:_l+=".cell";break;case nexacro.ExportTypes.CSV:_l+=".csv";break;case nexacro.ExportTypes.TXT:_l+=".txt";break;}var _p;if(_e._p_exportfilepath!=null&&_e._p_exportfilepath!=""){_p=_e._p_exportfilepath;if(_p.charAt(_p.length-1)!='\\'){_p+="\\";}}if(nexacro._Browser=="Runtime"){nexacro._downloadExport(_g,false,_e._hidden_frame_handle,_l,_p,_e._p_filefilter,_e._p_filefilterindex,"export");}else{nexacro._downloadExport(_g,false,this);}}this.on_fire_onsuccess(_e,this,_g);}else{_e._itemsIndex++ ;if(_e._itemsIndex==_e._gCount){}else{_e._grids[_e._itemsIndex]._gridItemExport(_e);}}this._instanceId="";this._startRow=0;this._seq=1;this._eof=false;this._selectcount=0;}else{this._gridExportContinue(_e);}if(this._is_export_ex){this._is_export_ex=false;}}};_pExportItem._makeMergeDatas=function(_a,_b,_c){var _d=_b;var _e=this._merge_datas={};var _f,_g,_h,_i,_j;_i=0;var _k,_l,_m,_n,_o,_p,_q,_r,_s,_t,_u;var _v=_a._getGridRowCount()-1;for(var _ad=0,_ae=_a._virtual_mergecell_arr.length;_ad<_ae;_ad++ ){if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(this._getWindow());}_f=_a._virtual_mergecell_arr[_ad];if(_f.start_subrow!=null){_i=_f.start_subrow;}if(_f.end_row>_v){_h=_g=_v;}else{_h=_g=_f.end_row;}if(_f.start_row==-1){_d=_a._curFormat._headrows?_a._curFormat._headrows.length:0;_g=_u=0;}else if(_f.start_row==-2){_d=_a._curFormat._summrows?_a._curFormat._summrows.length:0;_g=_u=0;}else{_u=_f.start_row;}_k=(_d* _g+_f.end_subrow)-(_d* _u+_i)+1;_l=_f.end_column-_f.start_column+1;_j=((_d* _u+_i+1)+(_d* _g+_f.end_subrow+1))/2<<0;_m=_f.start_row;_n=(_j -1)/_d<<0;_o=_h;_s=_c* _i+_f.start_column;_t=_c* _f.end_subrow+_f.end_column;_p=((_j -1)%_d* _c+_f.start_column)<<0;_q=((_j -1)%_d* _c+(_f.start_column+_f.end_column)/2)<<0;_r=((_j -1)%_d* _c+_f.end_column)<<0;if(_f.start_row<0){_n=_f.start_row;}var _w=_f.cellinfos;var _x;for(var _af=0;_af<_w.length;_af++ ){_x=_w[_af];var _y=[];var _z=false;var _aa=false;var _ab=false;var _ac=-1;if(_x._colspan>1||_x._rowspan>1){for(var _ag=_x._col;_ag<(_x._col+_x._colspan);_ag++ ){for(var _ah=_x._row;_ah<(_x._row+_x._rowspan);_ah++ ){_ac=_ag+(_ah* _c);if(!_z&&_p==_ac){_z=true;_p=_x._cellidx;}if(!_aa&&_q==_ac){_aa=true;_q=_x._cellidx;}if(!_ab&&_r==_ac){_ab=true;_r=_x._cellidx;}}}}}_e[_m+"_"+_s]={isVirtualStart:true,left:_p,center:_q,right:_r,top:_m,middle:_n,bottom:_o,rowspan:_k,colspan:_l,cellinfos:_w};_e[_o+"_"+_t]={isVirtualEnd:true,rowspan:_k,colspan:_l,cellinfos:_w};}};_pExportItem._getMergeDatas=function(_a,_b){var _c=this._p_source;var _d=_c._curFormat;var _e,_f;var _g=_d._cols?_d._cols.length:0;var _h,_i;var _j;if(_g==0){return null;}if(_a==-2){_e=_d._summcells;}else if(_a==-1){_e=_d._headcells;}if(_a>=0){_e=_d._bodycells;}_f=_e[_b];_h=(_g* _f._row)+_f._col;_i=(_g* (_f._row+_f._rowspan-1))+(_f._col+_f._colspan-1);_j=this._merge_datas&&this._merge_datas[_a+"_"+_h];if(_j){return _j;}_j=this._merge_datas&&this._merge_datas[_a+"_"+_i];if(_j){_j.rowspan-=(_f._rowspan-1);_j.colspan-=(_f._colspan-1);return _j;}return null;};_pExportItem._gridItemExport=function(_a){var _b=_a._exportuitype;if(_a._p_exporteventtype!="none"&&_b){var _c=_a._exportBar;if(!_c||_c._uitype!=_b){_c=_a._exportBar=_a._getExportBar(_b);var _d=_a._getProcessStr(_a.count(),_a._allRowCount,_a._allRowCount);_d=nexacro._getLongerStr(_d,_a._p_exportmessagecomplete,_a._p_exportmessageready);var _e=_c._textbox;var _f=_e?_e._getCurrentStyleInheritValue("font"):_c.font||_c._getCurrentStyleInheritValue("font");var _g=_e._getReferenceAbsoluteFont(_f);var _h=nexacro._getTextSize(_d,_f,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,_g);_c._textWidth=_h[0];_c._textHeight=_h[1];}if(_a._itemsIndex==0&&_a._p_exportmessageready!=""){_c._set_text(_a._p_exportmessageready);}_c._show();}var _i=this._p_source;var _j=_i._curFormat._cols?_i._curFormat._cols.length:0;var _k=_i._curFormat._bodyrows?_i._curFormat._bodyrows.length:0;if(_i._hasTree){this._gridTempInfo={};_a._tempSaveMethod=nexacro.Grid.prototype._recreate_contents_all;nexacro.Grid.prototype._recreate_contents_all=nexacro._emptyFn;this._gridTempInfo.enableevent=_i._p_enableevent;_i._p_enableevent=false;this._gridTempInfo.treeIndexes=_i._treeIndexes.slice(0);this._gridTempInfo.treeStates=_i._treeStates.slice(0);this._gridTempInfo.treeinitstatus=_i._p_treeinitstatus;_i.set_treeinitstatus("expand,all");}if(_i._hasVirtualMergeCell()){this._makeMergeDatas(_i,_k,_j);}this._style_map1=null;this._style_map2=null;var _l=this._ds_style;if(!_l){_l=this._ds_style=new nexacro.Dataset("STYLE");_l.addColumn("type","String",10);_l.addColumn("name","String",32);_l.addColumn("value","String",1024);_l.addColumn("locale","String",32);}else{_l.clearData();}var _m=this._ds_command;if(!_m){_m=new nexacro.Dataset("COMMAND");this._ds_command=_m;_m.addColumn("command","String",32);_m.addColumn("type","int",32);_m.addColumn("item","String",256);_m.addColumn("seq","int");_m.addColumn("startrow","int",32);_m.addColumn("eof","boolean",32);_m.addColumn("instanceid","String",256);_m.addColumn("url","String",256);_m.addColumn("summarytype","String",256);_m.addColumn("range","String",32);_m.addColumn("exportsize","String",32);_m.addColumn("exporthead","String",32);_m.addColumn("exportimage","String",32);_m.addColumn("exportfilename","String",32);_m.addColumn("exportfilepath","String",256);_m.addColumn("format","String",1024* 1024);_m.addColumn("password","String",256);_m.addColumn("wraptext","boolean",32);_m.addColumn("locale","String",32);_m.addColumn("righttoleft","boolean",32);_m.addColumn("separator","String",32);_m.addColumn("quotechar","String",32);_m.addColumn("commandversion","String",32);}else{_m.clearData();}_m.addRow();_m.setColumn(0,"command","export");_m.setColumn(0,"type",_a._exporttype);_m.setColumn(0,"item",_i.id);_m.setColumn(0,"seq",this._seq);_m.setColumn(0,"startrow",this._startRow);_m.setColumn(0,"instanceid",this._instanceId);_m.setColumn(0,"url",_a._fileURL);_m.setColumn(0,"summarytype",_i._p_summarytype);_m.setColumn(0,"commandversion",_a._p_commandversion);_m.setColumn(0,"range",this._p_range);var _n=this._p_exportselect=="selectrecord";var _o=((_i._p_selecttype!="area")&&(_i._p_selecttype!="multiarea")&&(_i._p_selecttype!="treecell"))?true:false;if(_o){if(_n){if(this._exporthead==""){this._exporthead="nohead, nosumm";this._applyHead=false;this._applySumm=false;}this._exportmerge=false;}}else{this._exporthead="nohead, nosumm";this._applyHead=false;this._applySumm=false;}_m.setColumn(0,"exportsize",this._p_exportsize);_m.setColumn(0,"exporthead",this._exporthead);_m.setColumn(0,"exportimage",this._p_exportimage);_m.setColumn(0,"exportfilename",_a._p_exportfilename);_m.setColumn(0,"exportfilepath",_a._p_exportfilepath);if(nexacro._Browser=="Runtime"){nexacro._flushCommand(this._getWindow());}var _p=nexacro._replaceAll(this._makeFormat(_i),"&#13;","");if(_a._p_commandversion=="2.0"){_p=nexacro.base64Encode(_p);}else if(_a._p_commandversion=="3.0"){_p=nexacro.base32Encode(_p);}_m.setColumn(0,"format",_p);_m.setColumn(0,"password",_a._file_pw);_m.setColumn(0,"wraptext",_a._wrap_text);_m.setColumn(0,"righttoleft",this._righttoleft);_m.setColumn(0,"separator",_a._p_separator?_a._p_separator:_a._defaultseparator);_m.setColumn(0,"quotechar",_a._p_quotechar);var _q=_i._getLocale();if(_q){_q=_q.replace(/-/g,"_");_m.setColumn(0,"locale",_q);}var _r=new nexacro.Dataset("CELL");this._ds_cell=_r;var _s=_i.getCellCount("body");var _t=this._bodyRowCnt=_i._getGridRowCount();var _u="";var _v="";if(this._exportmerge&&_i._is_use_suppress&&_t>=_i._bodyBand._get_rows().length){this._gridSuppressUpdate(_i,_t);}var _w=null;var _x=null;if(_s>0){for(var _cx=0;_cx<_s;_cx++ ){_r.addColumn("Column"+_cx,"String",256);}var _y=this._p_parent?(this._p_parent._p_transferrowcount||_t):_t;var _z=this._partitionRow=_y;if(_z>=_t){_z=_t;this._eof=true;_w=this._p_parent._argsParam;_x=this._p_parent._argsDsParam;}var _aa=_i._curFormat._bodycells;var _ab=(this._p_exportvalue=="selectstyle");var _ac;var _ad;var _ae=false;var _af,_ag,_ah,_ai;var _aj,_ak;var _al=this._getWindow();for(_aj=0;_aj<_z;_aj++ ){_ad=0;if(nexacro._Browser=="Runtime"){nexacro._peekWindowHandleMessageQueuePassing(_al);}var _am;var _an=false;var _ao;for(_ak=0;_ak<_s;_ak++ ){_an=_an||_i.isSelectedCell(_ak,"body",_aj,-9);}if(_an||!_n){_ao=_r.addRow();if(_n){this._eventExport(_a,this._p_type,_aj,this._selectcount++ );}else{this._eventExport(_a,this._p_type,_aj);}}else{continue;}var _ap=_aj%2;for(_ak=0;_ak<_s;_ak++ ){_ae=false;_ac=_i.isSelectedCell(_ak,"body",_aj,-9);if(!_ac){if(_n){_ae=true;}}var _aq,_ar,_as,_at,_au;var _av=_aa[_ak];var _aw=_av._suppress_infos;var _ax=_ac&&_ab;var _ay=false;var _az=_av._rowspan;var _ba=this._checkExpr(null,_av._p_cssclass);var _bb=_ba?_av._getAttrValue(_av._p_cssclass,_aj):"";var _bc=_ak+(_bb?_bb:"");var _bd=_ax?"-c":"";var _be=this._stylecache[_bc+"align"+_bd];var _bf=this._stylecache[_bc+"line"+_bd];var _bg=undefined,_bh=undefined,_bi=undefined;{if(_ae){_bg="255,255,255";_bh="255,255,255";_af=this._d_BLColor;_bf=_af+":"+_af+":"+_af+":"+_af;_ay=true;}else{if(!_av._getVirtualMergeInfo(_aj+2)){_bg=this._stylecache[_bc+"background"+_ap+_bd];_bh=this._stylecache[_bc+"color"+_ap+_bd];}}_bi=this._stylecache[_bc+"font"+_bd];}if(!nexacro._isNull(_be)){_ar=_be;if(_ba){_ay=true;}}else{if(this._applyA){_ay=true;_ar=nexacro._nvl(this._getCellStyle(_av,_aj,_ap,"align",_ax),"");if(_ba){this._stylecache[_bc+"align"+_bd]=_ar;}}else{_ar=null;}}if(!nexacro._isNull(_bg)){_aq=_bg;if(_ba){_ay=true;}}else{if(this._applyB){_ay=true;_aq=nexacro._nvl(this._getColortoRGB(this._getCellStyle(_av,_aj,_ap,"background",_ax)),"");if(!_ba&&!_av._getVirtualMergeInfo(_aj+2)){this._stylecache[_bc+"background"+_ap+_bd]=_aq;}}else{_aq=null;}}if(!nexacro._isNull(_bh)){_at=_bh;if(_ba){_ay=true;}}else{if(this._applyC){_ay=true;_at=nexacro._nvl(this._getColortoRGB(this._getCellStyle(_av,_aj,_ap,"color",_ax)),"");if(!_ba&&!_av._getVirtualMergeInfo(_aj+2)){this._stylecache[_bc+"color"+_ap+_bd]=_at;}}else{_at=null;}}if(!nexacro._isNull(_bi)){_as=_bi;if(_ba){_ay=true;}}else{if(this._applyF){_ay=true;_as=nexacro._nvl(this._getFitFontValue(this._getCellStyle(_av,_aj,_ap,"font",_ax)),"");var _bj=this._getCellStyle(_av,_aj,_ap,"textDecoration",_ax);if(_bj){_as=_bj+","+_as;}if(!_ba){this._stylecache[_bc+"font"+_bd]=_as;}}else{_as=null;}}var _bk=false,_bl=null,_bm=null,_bn=null,_bo=null,_bp;var _bq=0;var _br=0;var _bs=false;switch(this._exportmerge){case 0:break;case 1:if(_av._getSuppress(_aj)>0){_ay=_bk=true;if(_aw[_aj]){if(_aw[_aj].border_proc){_bo="empty";}if(_aw[_aj].text_proc){_ae=true;}}}_i._checkVirtualMerge(_av,_aj);if(_av._getVirtualMergeInfo(_aj+2)){var _bt=_av._getVirtualMergeInfo(_aj+2).remove;if(_bt){_ay=_bk=true;switch(_bt){case "bottomvirtual":_bo="empty";break;case "rightbottomvirtual":_bn=_bo="empty";break;case "rightvirtual":_bn="empty";break;}}}break;case 2:if(_av._getSuppress(_aj)>0){if(_az>1){_bs=true;}_ay=_bk=true;var _bu=_ak+"count";var _bv=this._excel_suppress_info;if(!_bv[_bu]){_bv[_bu]=0;_ar=_ar.split(",")[0]+","+this._suppress_align_table[_av.suppressalign];}if(_aw[_aj]&&_aw[_aj].border_proc){this._excel_suppress_info[_bu]++ ;}else{_bq= ++_bv[_bu];if(_bs){_bq=_bq* _az;}if(_bs&&_bq==1){_bs=false;}_bv[_bu]=0;}}_ag=this._getMergeDatas(_aj,_ak);if(_ag&&_ag.isVirtualEnd){_ay=_bk=true;_bq=_ag.rowspan;_br=_ag.colspan;}break;}if(_i._supphorztype>0){if(_av._area=="left"||_av._area=="right"){_ay=_bk=true;if(_aw[_aj]){if(_aw[_aj].horz_text_proc){_ae=true;}}}}if(!_bk&&!nexacro._isNull(_bf)){_au=_bf;if(_ba){_ay=true;}}else{if(this._applyL){_ah=this._getCellStyle(_av,_aj,_ap,"border",_ax);if(!_bl){if(_ah.left){_bl=this._getColortoRGB(_ah.left.color)+(_ah.left.style=="solid"?"":","+_ah.left.style);}else{_bl="transparent,none";}}if(!_bm){if(_ah.top){_bm=this._getColortoRGB(_ah.top.color)+(_ah.top.style=="solid"?"":","+_ah.top.style);}else{_bm="transparent,none";}}if(!_bn){if(_ah.right){_bn=this._getColortoRGB(_ah.right.color)+(_ah.right.style=="solid"?"":","+_ah.right.style);}else{_bn="transparent,none";}}if(!_bo){if(_ah.bottom){_bo=this._getColortoRGB(_ah.bottom.color)+(_ah.bottom.style=="solid"?"":","+_ah.bottom.style);}else{_bo="transparent,none";}}_au=_bl+":"+_bm+":"+_bn+":"+_bo;if(!_ba){this._stylecache[_bc+"line"+_bd]=_au;}}else{_au="empty:empty:empty:empty:";}}_ai=this._getFixedCellType(_av,_aj);if(_v){{_v=_ai;_ay=true;}}else{_v=_ai;}_u=this._makeforDsStyle(_l,_ar,_aq,_at,_as,_au,_ai,_bq,_br);var _bw=false;if(_ai.indexOf("date")>-1&&(this._checkExpr(_av._p_locale)||this._checkExpr(_av._p_calendardateformat))){_ay=true;if(_av._p_calendardateformat=="LONGDATE"){_bw=true;}}var _bx=_av._getDisplaytype(_aj);if(!_ay){if(_bx=="mask"||_bx=="maskeditcontrol"){var _by=_av._getAttrValue(_av._p_maskedittype,_aj);if(_by=="number"){_ay=true;}}}var _bz=this._getCellText(_i,_aj,_ak);_am=_ae?"":_bz;var _ca=this._orgvalue_cells;var _cb=this._orgvalue_bands;var _cc=false;if(!nexacro._isNull(_cb)&&!nexacro._isNull(_cb["body"])){_cc=true;}var _cd=(_ca&&_ca[_ak]&&_cc);if(_bw){_av._p_calendardateformat="SHORTDATE";_am=_av._getDisplayText_date(_aj);_av._p_calendardateformat="LONGDATE";}if(_bx=="imagecontrol"){var _ce=this._p_exportimage.toLowerCase();if(_ce=="url"||_ce=="image"){var _cf=this._getCellText(_i,_aj,_ak);if(_cf){var _cg=nexacro._getURIValue(_cf);_am=nexacro._getImageLocation(_cg,this._getForm()._getFormBaseUrl());}else{_am=_cf;}}else{_am="";}}else if(_am&&_bx=="mask"){if(!_ch){var _ch=new Map();}var _ci=_ch.get(_ak);if(_ci==undefined){_ci=_av._getAttrValue(_av._p_maskeditpostfixtext,_aj);_ch.set(_ak,_ci?_ci:"none");}if(_ci&&_ci!="none"){_am=_am.replace(_ci,"");}}var _cj=_a._commdatadelimiter;if(this._exportmerge==1){if(_av._getSuppress(_aj)>0){if(_aw[_aj]&&_aw[_aj].text_proc){_am="";}}if(_i._supphorztype>0){if(_av._area=="left"||_av._area=="right"){if(_aw[_aj]){if(_aw[_aj].horz_text_proc){_am="";}}}}if(!!_i._checkVirtualMerge(_av,_aj)){_am="";_ag=this._getMergeDatas(_aj,_ak);if(_ag){if(_ag.isVirtualStart){if(_ar=="left,top"){_am=_bz;}else{var _ck=_ar.split(",");var _cl=_ag[_ck[1]]+"_"+_ag[_ck[0]];if(this._merge_datas[_cl]){this._merge_datas[_cl].disPlayText=_bz;this._merge_datas[_cl].showText=true;}else{this._merge_datas[_cl]={disPlayText:_bz,showText:true};}}}if(_ag.showText){_am=_ag.disPlayText;}}}}else if(this._exportmerge==2){if(_i._supphorztype>0){if(_av._area=="left"||_av._area=="right"){if(_aw[_aj]){if(_aw[_aj].horz_text_proc){_am="";}}}}}if(_a._orgval_type||_cd){_am=nexacro._isNumber(_am)?_am:nexacro._isDecimal(_am)?_am.toString():nexacro._nvl(_am,"");}else{_am=nexacro._nvl(_am,"");}if(_a.commandversion=="2.0"){_am=nexacro.base64Encode(_am);}else if(_a.commandversion=="3.0"){_am=nexacro.base32Encode(_am);}if(_bs){_r.setColumn(_ao,"Column"+(_ak+_ad),_am+_cj+(_ay||(_ac&&_ab)?_u:"")+_cj+_bs);_bs=false;}else{_r.setColumn(_ao,"Column"+(_ak+_ad),_am+_cj+(_ay||(_ac&&_ab)?_u:""));}if(_av._subcells.length){var _cm=_av._subcells;var _cn=_cm.length;var _co=_av._rowspan-1;var _cp=_av._colspan-1;var _cq="";_af=this._d_BLColor;if(this._applyL){_ah=this._getCellStyle(_av,_aj,_ap,"border",_ax);_bp=this._getColortoRGB(_ah.right.color)+(_ah.right.style=="solid"?"":","+_ah.right.style);}else{_bp=_af;}var _cr;var _cs;var _ct;var _cu;for(var _cy=0;_cy<_cn;_cy++ ){var _cv=_cm[_cy]._col;var _cw=_cm[_cy]._row;if(_cv==_cp){_ct=_bp;}else{_ct="empty";}if(_cv==0){_cr=_af;}else{_cr="empty";}if(_cw==_co){_cu=_bp;}else{_cu="empty";}if(_cw==0){_cs=_af;}else{_cs="empty";}_cq=_cr+":"+_cs+":"+_ct+":"+_cu;_ai=this._getFixedCellType(_cm[_cy],0);_u=this._makeforDsStyle(_l,_ar,_aq,_at,_as,_cq,_ai);if(_cy!=0){_r.addColumn("Column"+(_cx+_ad),"String",256);_ad++ ;}_bz=this._getCellText(_i,_aj,_ak,_cy);_am=_ae?"":_bz;if(_a._orgval_type||_cd){_am=nexacro._isNumber(_am)?_am:nexacro._isDecimal(_am)?_am.toString():nexacro._nvl(_am,"");}else{_am=nexacro._nvl(_am,"");}if(_a._p_commandversion=="1.0"){_r.setColumn(_ao,"Column"+(_ak+_ad),_am+_cj+_u);}else if(_a._p_commandversion=="2.0"){_r.setColumn(_ao,"Column"+(_ak+_ad),nexacro.base64Encode(_am)+_cj+_u);}else if(_a._p_commandversion!="1.0"){_r.setColumn(_ao,"Column"+(_ak+_ad),nexacro.base32Encode(_am)+_cj+_u);}}}}}this._preStartRow=this._startRow;this._startRow=_z;}else{this._eof=true;_w=this._p_parent._argsParam;_x=this._p_parent._argsDsParam;}_m.setColumn(0,"eof",this._eof);if(this._ds_response){delete this._ds_response;}this._ds_response=new nexacro.Dataset("RESPONSE");this._rollbackSuppressInfo();if(_x!=undefined){this._transaction(this.id,_a._exporturl,"COMMAND=_ds_command STYLE=_ds_style CELL=_ds_cell"+" "+_x,"_ds_response=RESPONSE",_w,"_exportCallback",true,_a._commdataformat,_a._commcompress);}else{this._transaction(this.id,_a._exporturl,"COMMAND=_ds_command STYLE=_ds_style CELL=_ds_cell","_ds_response=RESPONSE",_w,"_exportCallback",true,_a._commdataformat,_a._commcompress);}return true;};_pExportItem._transaction=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._load_manager=new nexacro._LoadManager(this);var _j=nexacro._getServiceObject(_b,true);this._load_manager.loadDataModule(_b,_a,_c,_d,_e,_f,_g,_h,_i,_j);};_pExportItem._stopTransaction=function(){nexacro.Form.prototype._stopTransaction.apply(this,arguments);};_pExportItem._getDatasetObject=function(_a){var _b=this[_a];var _c=this._p_parent._p_parent;if(_b==null&&_c){_b=_c._getDatasetObject(_a);}if(_b==null){var _d=nexacro.getApplication();_b=_d[_a];}return _b;};_pExportItem._waitCursor=nexacro._emptyFn;_pExportItem._removeUrl=function(_a){if(_a&&_a.length){var _b=_a.indexOf("'");var _c=-1;if(_b>-1){_c=_a.lastIndexOf("'");_a=_a.substring(_b+1,_c);}_b=_a.indexOf("(");if(_b>-1){_c=_a.lastIndexOf(")");_a=_a.substring(_b+1,_c);}}return _a;};_pExportItem._properties=[{name:"exceptstyle"},{name:"exporthead"},{name:"exportimage"},{name:"exportmerge"},{name:"exportselect"},{name:"exportvalue"},{name:"exportsize"},{name:"range"},{name:"source"},{name:"type"}];nexacro._defineProperties(_pExportItem,_pExportItem._properties);delete _pExportItem;nexacro.ExportProgress=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.PopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._uitype=0;this.visible=false;this.progressbar=null;this._textWidth=0;this._textHeight=0;};var _pExportProgress=nexacro.ExportProgress.prototype=nexacro._createPrototype(nexacro.PopupControl,nexacro.ExportProgress);_pExportProgress._type_name="ExportProgress";_pExportProgress.on_apply_color=function(_a){var _b=this._textbox;if(_b){if(_a){_b.set_color(_a);}else{_b.set_color("");}}};_pExportProgress.on_apply_font=function(_a){var _b=this._textbox;if(_b){_b.set_font(_a);}};_pExportProgress.on_create_contents=function(){var _a=this.getElement();if(_a){switch(this._uitype){case 1:var _b=new nexacro.ProgressBar("progressbar",0,0,1,1,null,null,null,null,null,null,this);_b._setControl();_b.createComponent();this.progressbar=_b;var _c=new nexacro.Static("progressbar:text",0,0,1,1,null,null,null,null,null,null,this);_c.set_textAlign("center");_c._setControl();_c.createComponent();this._textbox=_c;break;case 2:var _d=nexacro.getApplication();if(_d){this.progressbar=_d.mainframe.statusbar;}break;}}};_pExportProgress.createCommand=function(){return "";};_pExportProgress.on_created_contents=function(_a){nexacro.PopupControl.prototype.on_created_contents.call(this,_a);_a=_a||this._getWindow();switch(this._uitype){case 1:var _b=this._textbox;var _c=this.progressbar;if(_c){_c.on_created();}if(_b){_b.on_created();}break;case 2:break;}};_pExportProgress.on_change_containerRect=function(_a,_b){switch(this._uitype){case 1:var _c=this._textbox;if(_c){_c.move(0,0,_a,_b);}var _d=this.progressbar;if(_d){_d.move(null,null,_a,_b,0,0);}break;case 2:break;}};_pExportProgress.on_destroy_contents=function(){switch(this._uitype){case 1:var _a=this._textbox;if(_a){_a.destroy();}this.progressbar.destroy();this.progressbar=null;break;case 2:this.textbox=null;this.progressbar=null;break;}};_pExportProgress._getWindow=function(){return nexacro.Component.prototype._getWindow.call(this);};_pExportProgress.on_fire_onlbuttondown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return true;};_pExportProgress._on_keydown=function(_a,_b,_c,_d,_e,_f){if(_b==nexacro.Event.KEY_TAB){_a._event_stop=true;}else if(_b==nexacro.Event.KEY_ESC){nexacro._stopTransaction(this,2);}return true;};_pExportProgress._show=function(){if(!this._is_created||!this._p_parent){return;}var _a=this._getWindow();if(_a){var _b,_c;if(_a.frame){var _d=_a.frame;_b=_d.getOffsetWidth();_c=_d.getOffsetHeight();}else{_b=_a.getClientWidth();_c=_a.getClientHeight();}var _e=_a._isContainsComp(true,true,this);if(!_e){_a._setCaptureLock(this,true,true);}var _f=this._getCurrentStylePadding();var _g=0;var _h=0;var _i=0;var _j=0;var _k=20;var _l=10;if(this._uitype==1){_g=(this._textWidth<80?100:this._textWidth+_k);_h=this._textHeight+_l;if(_f){_g+=_f.left+_f.right;_h+=_f.top+_f.bottom;}_i=Math.round((_b-_g)/2);_j=Math.round((_c-_h)/2);}this.move(_i,_j,_g,_h,null,null);this.set_visible(true);}};_pExportProgress._hide=function(){var _a=this._p_parent;if(_a){var _b=_a._getWindow();if(_b){_b._releaseCaptureLock(this);if(nexacro._resize_popup_inbound==true){var _c=this._control_element;if(_c){_c.setElementSize(1,1);}}}}if(this._is_created&&this._is_alive){this.set_visible(false);}};_pExportProgress._closePopup=nexacro._emptyFn;nexacro._getLongerStr=function(_a,_b,_c){var _d=arguments.length;if(_d<2){return;}var _e=arguments[0];for(var _f=1;_f<_d;_f++ ){if(_e.length<arguments[_f].length){_e=arguments[_f];}}return _e;};_pExportProgress._set_text=function(_a){switch(this._uitype){case 1:this._textbox.set_text(_a);break;case 2:var _b=this._getForm();_b.set_statustext(_a);break;}};_pExportProgress._set_pos=function(_a){switch(this._uitype){case 1:if(this.progressbar){this.progressbar.set_pos(_a);}break;case 2:var _b=this;while(_b&&!_b._is_top_frame){if(_b._is_frame){_b.statusbar&&_b.statusbar.progressbar.set_pos(_a);}_b=_b._p_parent;}break;}};delete _pExportProgress;}if(!nexacro.ExcelImportObject){nexacro.ExcelImportEventInfo=function(_a,_b,_c,_d,_e){this.id=this.eventid=_b||"onsuccess";this.fromobject=_a;this.fromreferenceobject=_d;this.url=_c;this.importid=_e;};var _pExcelImportEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ExcelImportEventInfo,nexacro.ExcelImportEventInfo);nexacro.ExcelImportEventInfo.prototype=_pExcelImportEventInfo;_pExcelImportEventInfo._type_name="ExcelImportEventInfo";delete _pExcelImportEventInfo;nexacro.ExcelImportErrorEventInfo=function(_a,_b,_c,_d,_e,_f){this.id=this.eventid=_b||"onerror";this.fromobject=_a;this.fromreferenceobject=_e;this.errortype=_c;this.errormsg=_d;this.statuscode=_f;};var _pExcelImportErrorEventInfo=nexacro._createPrototype(nexacro.ErrorEventInfo,nexacro.ExcelImportErrorEventInfo);nexacro.ExcelImportErrorEventInfo.prototype=_pExcelImportErrorEventInfo;_pExcelImportErrorEventInfo._type_name="ExcelImportErrorEventInfo";delete _pExcelImportErrorEventInfo;nexacro.ImportTypes={EXCEL:0x0100,EXCEL97:0x0110,EXCEL2007:0x0120,HANCELL2014:0x0410,CSV:0x0500,TXT:0x0510};nexacro.ExcelImportObject=function(_a,_b){this.id=this._p_name=_a;if(!_b){var _c=nexacro.getApplication();if(_c){_b=_c.getActiveForm();if(!_b){_b=_c.mainframe.childframe.form;}}}this._p_parent=_b;this._initUniqueID();if(nexacro._get_hidden_frame(this._unique_id,this._hidden_frame_handle)){nexacro._destroy_hidden_frame(this._unique_id,this._hidden_frame_handle);}nexacro._create_hidden_frame(this._unique_id,this._uploadComplete,this,"import");nexacro._append_hidden_item(this._unique_id,"upfile",this._checkUploadFile,this,this._hidden_frame_handle);nexacro._append_hidden_textitem(this._unique_id,"ds_command");this.onerror=new nexacro.EventListener("onerror");this.onsuccess=new nexacro.EventListener("onsuccess");};var _pExcelImport=nexacro.ExcelImportObject.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.ExcelImportObject);_pExcelImport._type_name="ExcelImportObject";_pExcelImport._hidden_frame_handle=null;_pExcelImport._p_importfilemode="local";_pExcelImport._importfilemode=0;_pExcelImport._p_commcompress="none";_pExcelImport._commcompress=false;_pExcelImport._p_importtype=nexacro.ImportTypes.EXCEL;_pExcelImport._p_importurl="";_pExcelImport._importurl="";_pExcelImport._uploadurl="";_pExcelImport._uploadservlet="";_pExcelImport._p_separator="";_pExcelImport._p_quotechar="default";_pExcelImport._defaultseparator="0x2c";_pExcelImport._fileurl="";_pExcelImport._range="";_pExcelImport._applyAllsheet=false;_pExcelImport._responseData="";_pExcelImport._responseRVal=null;_pExcelImport._responseLVal=null;_pExcelImport._p_userawdatevalue=false;_pExcelImport._userawdatevalue=false;_pExcelImport._p_userawnumbervalue=true;_pExcelImport._userawnumbervalue=true;_pExcelImport._user_data=null;_pExcelImport._file_pw=null;_pExcelImport._usehtmltag=nexacro._Browser=="IE"?false:true;_pExcelImport._importSheet="";_pExcelImport._importStartCell=null;_pExcelImport._importEndCell=null;_pExcelImport._tran_item=null;_pExcelImport._file_url_ds=null;_pExcelImport._iscors=false;_pExcelImport._importid="";_pExcelImport._importid_list=[];_pExcelImport._p_filefilter="";_pExcelImport._p_filefilterindex=0;_pExcelImport._p_commdataformat="XML";_pExcelImport._commdataformat=0;_pExcelImport._p_commandversion="1.0";_pExcelImport._event_list={"onerror":1,"onsuccess":1};_pExcelImport._initUniqueID=function(){this._unique_id=this._p_parent._unique_id+"_"+this.id;};_pExcelImport.set_importtype=function(_a){switch((_a+"").toUpperCase()){case "EXCEL":_a=0x0100;break;case "EXCEL97":_a=0x0110;break;case "EXCEL2007":_a=0x0120;break;case "HANCELL2010":_a=0x0400;break;case "HANCELL2014":_a=0x0410;break;case "CSV":_a=0x0500;break;case "TXT":_a=0x0510;break;}if(_a!=this._p_importtype){this._p_importtype=_a;}return _a;};_pExcelImport.set_separator=function(_a){var _b=false;if(_a.length==4){if((_a.substr(0,2)=="0x")||(_a.substr(0,2)=="0X")){_a=parseInt(_a,16);}else{_b=true;}}_a=parseInt(_a);var _c=/^(0|3|10|13|29|34|39|40|41|58|61)$/g;if(_b||_c.test(_a)||_a>=0x80||_a<=0x00){this._p_separator=_a=this._defaultseparator;}if(_a!=this._p_separator&&nexacro._isInt(_a)){this._p_separator="0x"+_a.toString(16);}return _a;};_pExcelImport.set_quotechar=function(_a){var _b=['"',"'","none","default"];if(_b.indexOf(_a)==-1){this._p_quotechar=_a="default";}if(_a!=this._p_quotechar){this._p_quotechar=_a;}return _a;};_pExcelImport.set_importurl=function(_a){if(_a!=this._p_importurl){this._p_importurl=_a;if(_a==null){this._importurl="";}else{var _b=this._uploadservlet=nexacro._getServiceLocation(_a,this._p_parent._getFormBaseUrl());var _c=_b.substring(0,_b.lastIndexOf("/")+1);this._importurl=_c+"XExportImport";}}return _a;};_pExcelImport.set_commdataformat=function(_a){if(_a!=this._p_commdataformat){this._p_commdataformat=_a;switch(_a.toString().toUpperCase()){case "SSV":this._commdataformat=2;break;case "JSON":this._commdataformat=3;break;default:this._commdataformat=0;break;}}return _a;};_pExcelImport.set_commcompress=function(_a){if(_a!=this._p_commcompress){this._p_commcompress=_a;_a=_a.toString().toUpperCase();if(_a=="COMPRESS"){this._commcompress=true;}else{this._commcompress=false;}}return _a;};_pExcelImport.set_importfilemode=function(_a){if(this._p_importfilemode!=_a){this._p_importfilemode=_a;this._importfilemode=_a=="server"?1:0;}return _a;};_pExcelImport.set_userawdatevalue=function(_a){if(this._p_userawdatevalue!=_a){this._p_userawdatevalue=_a;this._userawdatevalue=nexacro._toBoolean(_a);}return _a;};_pExcelImport.set_userawnumbervalue=function(_a){if(this._p_userawnumbervalue!=_a){this._p_userawnumbervalue=_a;this._userawnumbervalue=nexacro._toBoolean(_a);}return _a;};_pExcelImport.set_filefilter=function(_a){this._p_filefilter=_a;};_pExcelImport.set_filefilterindex=function(_a){this._p_filefilterindex=_a;};_pExcelImport.set_commandversion=function(_a){this._p_commandversion=_a;};_pExcelImport._properties=[{name:"importtype"},{name:"separator"},{name:"quotechar"},{name:"importurl"},{name:"commdataformat"},{name:"commcompress"},{name:"importfilemode"},{name:"userawdatevalue"},{name:"userawnumbervalue"},{name:"filefilter"},{name:"filefilterindex"},{name:"commandversion"}];nexacro._defineProperties(_pExcelImport,_pExcelImport._properties);_pExcelImport._setImportRange=function(_a){var _b={};if(_a){if(_a.indexOf("!")>=0){var _c=_a.split("!");_b.sheet=_c[0];var _d=_c[1];var _e;if(_d.indexOf(":")>=0){_d=_d.split(":");_e=this._getExcelRowCol(_d[0]);_b.startRow=_e[1]?_e[1]:"";_b.startCol=_e[0]?_e[0]:"";_e=this._getExcelRowCol(_d[1]);_b.endRow=_e[1]?_e[1]:"";_b.endCol=_e[0]?_e[0]:"";}else{_e=this._getExcelRowCol(_d);_b.startRow=_e[1]?_e[1]:"";_b.startCol=_e[0]?_e[0]:"";_b.endRow="";_b.endCol="";}}}else{_b.sheet="";_b.startRow="";_b.startCol="";_b.endRow="";_b.endCol="";}this._range.push(_b);};_pExcelImport.importData=function(_a,_b,_c,_d){this._file_pw=null;this._fileurl="";if(arguments.length<3){return false;}if(!this._p_importurl){return false;}var _e=this.importfilemode.toLowerCase();if(_e!="server"||!_a){this._importfilemode=0;}else{this._importfilemode=1;}if(_b){this._range=_b;}else{this._range="";}var _f,_g,_h;if(_c){this._responseLVal=[];this._responseRVal=[];var _i="";var _j=_c.split(",");if(_j.length<=1&&_j[0]){_j=_j[0].split(" ");}for(_f=0,_g=_j.length;_f<_g;_f++ ){if(_j[_f].length){var _k=_j[_f].match(/[_A-Za-z0-9]+/g);this._responseLVal.push(_k[0]);if(_k[1]==null){_k[1]="output"+(_f+1);}this._responseRVal.push(_k[1]);_i+=" "+_k[0]+"="+_k[1];}}this._responseData=_i;}if(_d){var _l=nexacro.replaceAll(_d," ","").split(",");for(_f=0,_h=_l.length;_f<_h;_f++ ){var _m=_l[_f].split("=");if(_m[0]=="filepassword"){this._file_pw=_m[1];_l.splice(_f,1);_d=_l.join(",");break;}}}this._user_data=_d;if(!this._importfilemode){nexacro._change_inputnode_name(this._input_node,"upfile");nexacro._findclick(this._unique_id,"upfile",this,this._hidden_frame_handle,this._p_filefilter,this._p_filefilterindex);}else{nexacro._change_inputnode_name(this._input_node,"");if(this._checkFileName(_a)){this._fileurl=_a;this._requestImport(_a);}else{var _n="the file extension is wrong";var _o=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError",_n,this,-1);this.on_fire_onerror(this,_o);return false;}}return true;};_pExcelImport.importDataEx=function(_a,_b,_c,_d,_e){this._importid=_a;this.importData(_b,_c,_d,_e);};_pExcelImport._addImportId=function(_a){var _b=this._importid_list;var _c=_b?_b.length:0;var _d;for(var _e=0;_e<_c;_e++ ){_d=_b[_e];if(_d==_a){return false;}}_b.push(_a);return true;};_pExcelImport._removeImportId=function(_a){var _b=this._importid_list;var _c=_b?_b.length:0;var _d;for(var _e=0;_e<_c;_e++ ){_d=_b[_e];if(_d==_a){return _b.splice(_e,1);}}return null;};_pExcelImport.destroy=function(){var _a=this._unique_id;if(this._p_parent){this._p_parent.removeChild(this.id);}if(this._hidden_frame_handle){nexacro._remove_hidden_item(_a,"upfile",this._hidden_frame_handle);nexacro._remove_hidden_item(_a,"ds_command",this._hidden_frame_handle);nexacro._destroy_hidden_frame(_a,this,"import");}this._hidden_frame_handle=null;this._p_parent=null;return true;};_pExcelImport.on_fire_onerror=function(_a,_b){this._setWaitCursor(false);var _c=this.onerror;if(_c&&_c._has_handlers){_c._fireEvent(this,_b);}};_pExcelImport.on_fire_onsuccess=function(_a,_b){this._setWaitCursor(false);var _c=this.onsuccess;if(_c&&_c._has_handlers){_c._fireEvent(this,_b);}};_pExcelImport._getExcelRowCol=function(_a){var _b=_a.length;var _c=[];for(var _d=0;_d<_b;_d++ ){if(!isNaN(_a[_d])){_c.push(_a.substring(0,_d));_c.push(_a.substring(_d));break;}}return _c;};_pExcelImport._transaction=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._load_manager=new nexacro._LoadManager(this);var _j=nexacro._getServiceObject(_b,true);this._load_manager.loadDataModule(_b,_a,_c,_d,_e,_f,_g,_h,_i,_j);};_pExcelImport._getDataset=function(_a){var _b=this._responseRVal;var _c=this._responseLVal;var _d=_b.length;for(var _e=0;_e<_d;_e++ ){if(_b[_e]==_a){return this._getDatasetObject(_c[_e]);}else if(_a=="IMPORTFILES"){return this._getDatasetObject("_file_url_ds");}}return null;};_pExcelImport._waitCursor=nexacro._emptyFn;_pExcelImport._setParamter=nexacro._emptyFn;_pExcelImport._getDatasetObject=function(_a){var _b=this[_a];var _c=nexacro.getApplication();if(_b==null&&this._p_parent&&this._p_parent!=_c){_b=this._p_parent._getDatasetObject(_a);}if(_b==null){_b=_c[_a];}return _b;};_pExcelImport._getForm=function(){var _a=nexacro.getApplication();var _b;if(_a){_b=_a.getActiveForm();if(!_b){var _c=_a.getActiveFrame();var _d=this;while(_d&&_c!=_d){if(!_d._is_frame){_d=_d._p_parent;}else if(_d.form){return _d.form;}}}}return _b;};_pExcelImport._isPopupFrame=function(){return false;};_pExcelImport._makeImportFormat=function(){var _a="<Import>";_a+="<Sheets>";var _b=this._range.split("]");var _c=_b.length-1;_c=_c==0?1:_c;var _d,_e;var _f=1;for(var _q=0;_q<_c;_q++ ){_a+="<Sheet ";_d=_b[_q].match(/[_A-Za-z0-9]+=[\(\)_!:A-Za-z0-9가-힣 \.\-\,]+/g);if(_d==null){var _g=_b[_q];if(_g.indexOf("!")>=0){var _h=_g.split("!");if(_h[1].indexOf(":")>=0){var _i=_h[0];var _j=_h[1].split(":");var _k=_j[0].match(/[0-9]+/);var _l=_j[0].match(/[A-Z]+/);var _m=_j[1].match(/[0-9]+/);var _n=_j[1].match(/[A-Z]+/);_a+='command=\"getsheetdata\" output=\"'+this._responseRVal+'\" head=\"'+_i+'!'+_l+_k+':'+_n+_k+'\" body=\"'+_i+'!'+_l+( +_k+1)+':'+_n+_m+'\" />';}else{_a+='command=\"getsheetdata\" output=\"'+this._responseRVal+'\" Body=\"'+_b[_q]+'\" />';}}else{_a+='command=\"getsheetdata\" output=\"'+this._responseRVal+'\" Body=\"'+_b[_q]+'\" />';}}else{var _o=false;for(var _r=0,_s=_d.length;_r<_s;_r++ ){_e=_d[_r].match(/[\(\)_!:A-Za-z0-9가-힣 \.\-\,]+/g);var _p=_e[0].toLowerCase();if(_p!="command"){if(_r==0){_a+='command=\"getsheetdata\" ';}if(_p=="output"){_o=true;}}_a+=_p+"=\""+_e[1]+"\" ";}if(!_o){_a+='output=\"output'+_f+'\" ';_f++ ;}_a+="/>";}}_a+="</Sheets>";_a+="</Import>";return _a;};_pExcelImport._requestImport=function(_a){if(nexacro._Browser!="Runtime"){if(!nexacro._isSameOrigin(this._importurl,nexacro._project_url)){this._iscors=true;}}var _b=this._ds_command=new nexacro.NormalDataset("COMMAND");_b.addColumn("command","String",32);_b.addColumn("type","int",32);_b.addColumn("url","String",256);_b.addColumn("format","String",256);_b.addColumn("filemode","String",256);_b.addColumn("password","String",256);_b.addColumn("rawdatevalue","String",256);_b.addColumn("rawnumbervalue","String",256);_b.addColumn("importid","String",256);_b.addColumn("usehtmltag","String",256);_b.addColumn("separator","String",256);_b.addColumn("quotechar","String",256);_b.addColumn("formatversion","String",256);_b.addRow();_b.setColumn(0,"command","import");_b.setColumn(0,"type",this._importType);_b.setColumn(0,"url",_a);var _c=this._makeImportFormat();_b.setColumn(0,"format",this._p_commandversion=="1.0"?_c:(this._p_commandversion=="2.0"?nexacro.base64Encode(_c):nexacro.base32Encode(_c)));_b.setColumn(0,"filemode",this._importfilemode?"server":"local");_b.setColumn(0,"password",this._file_pw);_b.setColumn(0,"rawdatevalue",this._userawdatevalue);_b.setColumn(0,"rawnumbervalue",this._userawnumbervalue);_b.setColumn(0,"importid",this._importid);_b.setColumn(0,"usehtmltag",this._usehtmltag);_b.setColumn(0,"separator",this._p_separator?this._p_separator:this._defaultseparator);_b.setColumn(0,"quotechar",this._p_quotechar);_b.setColumn(0,"commandversion",this._p_commandversion);if(this._iscors){_b.addColumn("responsetype","String",256);_b.setColumn(0,"responsetype",1);}if(this._ds_response){delete this._ds_response;}var _d;var _e=this._responseLVal;if(_e){for(var _g=0,_h=_e.length;_g<_h;_g++ ){var _f=this._p_parent[_e[_g]];if(_f){}else{_d=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError","Dataset is null",this,-2011);this.on_fire_onerror(this,_d);return;}}}else{_d=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError","Dataset is null",this,-2011);this.on_fire_onerror(this,_d);return;}this._file_url_ds=new nexacro.NormalDataset("_file_url_ds",this);this._tran_item=new nexacro.TransactionItem(this._importurl,this,this.id,"COMMAND=_ds_command",this._responseData+", _file_url_ds=IMPORTFILES",this._user_data,this._commdataformat,true);nexacro._setImportCommand(this._unique_id,"ds_command",this,this._hidden_frame_handle,this._tran_item._sendData);nexacro._submit(this._unique_id,this._uploadservlet,this._hidden_frame_handle,this._tran_item._sendData,_a);};if(nexacro._Browser=="Runtime"){_pExcelImport._uploadComplete=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.getApplication();if(_h){_h._endCommProgress();}var _i,_j,_k,_l=this._unique_id,_m=-1,_n="",_o=null,_p,_q=9901;if(_a<0){nexacro._onHttpSystemError(this,true,this,_d,_c,_e,_c,null,_g);var _r=nexacro.MakeCommunicationError(this,_d,_c,_e,_c,null,_g);_i=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError",_r.message,this,_q);this.on_fire_onerror(this,_i);}else{if(_b){if(_b.indexOf("<noscript>")>=0){_b=_b.substr(_b.indexOf("<noscript>")+10);_b=_b.substr(0,_b.indexOf("</noscript>"));}this.context=this._p_parent;_b=_b.trimLeft();var _s=_b.slice(0,5).toUpperCase();if(_s.indexOf("<?XML")==0){_s="XML";}if(_s.indexOf("SSV")==0){_s="SSV";}if(_s.indexOf("{")==0){_s="JSON";}if(_s=="XML"){_b=nexacro._getXMLDocument(this._unique_id,_b,_c);}if(nexacro._Deserializer[_s]){_o=nexacro._Deserializer[_s](_b,this);}_j=_o?_o[0]:null;if(_j){_m=_j["ErrorCode"];_n=_j["ErrorMsg"];}}if(_m<0){if(_m<=-2001&&_m>=-2020){_q=_m;}if(_a!=4){_i=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError",_n,this,_q);this.on_fire_onerror(this,_i);}}else{_k=this._fileurl=this._file_url_ds?this._file_url_ds.getColumn(0,3):null;_p=this._file_url_ds?this._file_url_ds.getColumn(0,"importid"):null;this._file_url_ds=null;_i=new nexacro.ExcelImportEventInfo(this,"onsuccess",_k,this,_p);this.on_fire_onsuccess(this,_i);this._removeImportId(_p);}}nexacro._remove_hidden_item(_l,"upfile",this._hidden_frame_handle);nexacro._append_hidden_item(_l,"upfile",this._checkUploadFile,this,this._hidden_frame_handle);};}else{_pExcelImport._uploadComplete=function(_a,_b,_c){var _d=-1;var _e="";var _f=this._unique_id;var _g,_h,_i,_j,_k=9901;try{if(this._iscors){nexacro._setPostMessage(this._unique_id,this);this._iscors=false;}else{var _l=nexacro._getXMLDocument(_f);_c=_l.URL?_l.URL:_l.url;if(_c=="about:blank"){return;}_b=nexacro._getDataFromDOM(_l);if(!_b||_b.length<=0){var _m=_l.childNodes[0];if(_m){_b=_l.head.innerHTML;_b=nexacro._decodeXml(_b);}}if(_b.indexOf("<noscript>")>=0){_b=_b.substr(_b.indexOf("<noscript>")+10);_b=_b.substr(0,_b.indexOf("</noscript>"));}_g=_b.slice(0,5).toUpperCase();if(_g.indexOf("<?XML")==0){_g="XML";}if(_g.indexOf("SSV")==0){_g="SSV";}if(_g.indexOf("{")==0){_g="JSON";}if(_g=="XML"){_b=nexacro._parseXMLDocument(_b);}this.context=this._p_parent;if(nexacro._Deserializer[_g]){_i=nexacro._Deserializer[_g](_b,this);}if(_i){_d=_i[0]["ErrorCode"];_e=_i[0]["ErrorMsg"];}if(_d<0){if(_d<=-2001&&_d>=-2020){_k=_d;}_h=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError",_e,this,_k);this.on_fire_onerror(this,_h);}else{this._fileurl=this._file_url_ds?this._file_url_ds.getColumn(0,3):null;_j=this._file_url_ds?this._file_url_ds.getColumn(0,"importid"):null;this._file_url_ds=null;_h=new nexacro.ExcelImportEventInfo(this,"onsuccess",this._fileurl,this,_j);this.on_fire_onsuccess(this,_h);this._removeImportId(_j);}}}catch(e){_h=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError","failed to get",this,_k);this.on_fire_onerror(this,_h);}nexacro._remove_hidden_item(_f,"upfile",this._hidden_frame_handle);nexacro._append_hidden_item(_f,"upfile",this._checkUploadFile,this,this._hidden_frame_handle);};}_pExcelImport.on_after_load=function(_a){var _b=_a.message;var _c,_d,_e,_f=-1,_g="",_h="",_i;var _j,_k,_l=9901;try{_i=_b.slice(0,5).toUpperCase();if(_i.indexOf("SSV")==0){_h=_b;_i="SSV";}else if(_i.indexOf("{")==0){_h=_b;_i="JSON";}else{var _m=nexacro.trimLeft(decodeURIComponent(_b.replace(/\+/g," ")));var _n=nexacro._parseXMLDocument(_m);_e=_n.URL?_n.URL:_n.url;if(_e=="about:blank"){return;}if(nexacro._getContentType(_n)=="XML"){_h=_n;_i="XML";}else{_h=nexacro._getDataFromDOM(_n,this).trimLeft();_i=_h.substring(0,5).toUpperCase();if(_i.indexOf("SSV")==0){_i="SSV";}else if(_i.indexOf("{")==0){_i="JSON";}}}if(nexacro._Deserializer[_i]){_c=nexacro._Deserializer[_i](_h,this);}var _o=_c?_c[0]:null;if(_o){_f=(_o["ErrorCode"]!=null)?_o["ErrorCode"]:-1;_g=(_o["ErrorMsg"]!=null)?_o["ErrorMsg"]:"";}else{_g=_h;}if(_f<0){if(_f<=-2001&&_f>=-2020){_l=_f;}_d=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError",_g,this,_l);this.on_fire_onerror(this,_d);}else{_j=this._fileurl=this._file_url_ds?this._file_url_ds.getColumn(0,3):null;_k=this._file_url_ds?this._file_url_ds.getColumn(0,"importid"):null;this._file_url_ds=null;_d=new nexacro.ExcelImportEventInfo(this,"onsuccess",_j,this,_k);this.on_fire_onsuccess(this,_d);this._removeImportId(_k);}}catch(e){_d=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError","failed to get",this,_l);this.on_fire_onerror(this,_d);}};_pExcelImport._checkFileName=function(_a){if(_a==null){return false;}var _b=false;var _c="";var _d=_a.lastIndexOf("\\");var _e=_a.substring(_d+1);var _f=_e.split(".");var _g=_f.length;if(_g>1){_c=_f[_g -1];_c=_c.toLowerCase();switch(_c){case "xls":_b=true;this._importType=nexacro.ImportTypes.EXCEL97;break;case "xlsx":case "xlsm":_b=true;this._importType=nexacro.ImportTypes.EXCEL2007;break;case "cell":_b=true;this._importType=this._p_importtype;break;case "csv":_b=true;this._importType=nexacro.ImportTypes.CSV;break;case "txt":_b=true;this._importType=nexacro.ImportTypes.TXT;break;}}return _b;};_pExcelImport._checkUploadFile=function(_a){this._setWaitCursor(true);if(this._checkFileName(_a)){this._requestImport(_a);}else{var _b="the file extension is wrong";var _c=new nexacro.ExcelImportErrorEventInfo(this,"onerror","ObjectError",_b,this,-1);this.on_fire_onerror(this,_c);}};_pExcelImport._setWaitCursor=function(_a){var _b=this._getForm();if(_b){_b.setWaitCursor(_a,true);}};_pExcelImport._getWindow=function(){var _a=this._p_parent;if(_a._is_form){return _a._getWindow();}return null;};_pExcelImport._getWindowHandle=function(){var _a=this._p_parent;if(_a._is_form){return _a._getWindowHandle();}return null;};_pExcelImport._changeFiles=nexacro._emptyFn;delete _pExcelImport;}if(!nexacro.Tray){nexacro.TrayBalloonTipHideEventInfo=function(_a,_b,_c){this.id=this.eventid=_b||"onballoontiphide";this.fromobject=this.fromreferenceobject=_a;this.reason=_c;};var _pTrayBalloonTipHideEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.TrayBalloonTipHideEventInfo);nexacro.TrayBalloonTipHideEventInfo.prototype=_pTrayBalloonTipHideEventInfo;_pTrayBalloonTipHideEventInfo._type_name="TrayBalloonTipHideEventInfo";delete _pTrayBalloonTipHideEventInfo;nexacro.Tray=function(_a,_b){this.id=_a;this._p_icon="default";this._p_tooltip="";this._p_items=new nexacro.Collection();this._p_name=_a;this._handle=null;this._event_list={"onlbuttonup":1,"onrbuttonup":1,"ondblclick":1,"oninnerdatachanged":1,"onballoontipshow":1,"onballoontiphide":1,"onballoontipclick":1};};var _pTray=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.Tray);nexacro.Tray.prototype=_pTray;_pTray._type_name="Tray";_pTray.on_created=function(){this._handle=nexacro._createTrayHandle(this._p_icon,this._p_tooltip);var _a=this._p_items._p_length;for(var _b=0;_b<_a;_b++ ){this._p_items[_b].on_created();}};_pTray._destroy=function(){var _a=this._p_items._p_length;for(var _c=_a -1;_c>=0;_c-- ){this._p_items.delete_item(_c);}nexacro._removeTrayHandle(this._handle);this._handle=null;var _b=nexacro.getApplication();if(_b){_b._p_trays.delete_item(this.id);_b._p_all.delete_item(this.id);}};_pTray.set_icon=function(_a){if(_a!=this._p_icon){this._p_icon=_a;}if(this._handle){nexacro._setTrayIconHandle(this._handle,this._p_icon);}};_pTray.set_tooltip=function(_a){if(_a!=this._p_tooltip){this._p_tooltip=_a;}if(this._handle){nexacro._setTrayTooltipHandle(this._handle,this._p_tooltip);}};_pTray._properties=[{name:"icon"},{name:"name"},{name:"items",readonly:true},{name:"tooltip"}];nexacro._defineProperties(_pTray,_pTray._properties);_pTray.show=function(){this.on_created();};_pTray.destroy=function(){this._destroy();};_pTray.init=function(_a,_b,_c){this.set_id(_a);this.set_icon(_b);this.set_tooltip(_c);};_pTray.showBalloonTip=function(_a,_b,_c,_d){var _e=-1;if(!_d){_d=false;}nexacro._showTrayBalloonTipHandle(this._handle,_a,_b,_c,_e,_d);};_pTray.hideBalloonTip=function(){nexacro._hideTrayBalloonTipHandle(this._handle);};_pTray.addItem=function(_a,_b){if(_b._type_name=="TrayPopupMenu"){if(this._p_items.indexOf(_a)>=0){return -1;}else{return this._p_items.add_item(_a,_b);}}};_pTray.insertItem=function(_a,_b,_c){if(_c._type_name=="TrayPopupMenu"){if(this._p_items.indexOf(_b)>=0){return -1;}else{return this._p_items.insert_item(_a,_b,_c);}}};_pTray.deleteItem=function(_a){return this._p_items.delete_item(_a);};_pTray.findItem=function(_a){var _b=this._p_items.indexOf(_a);return _b;};_pTray.getItemCount=function(){var _a=this._p_items.length;return _a;};_pTray.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g){if(this.ondblclick&&this.ondblclick._has_handlers){var _h=new nexacro.ClickEventInfo(this,"ondblclick","lbutton",_b,_c,_d,_e,_f,-1,-1,-1,-1,this,this,_g);return this.ondblclick._fireEvent(this,_h);}return false;};_pTray.on_fire_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g){if(this.onlbuttonup&&this.onlbuttonup._has_handlers){var _h=new nexacro.MouseEventInfo(this,"onlbuttonup","lbutton",_b,_c,_d,_e,_f,-1,-1,-1,-1,this,this,_g);return this.onlbuttonup._fireEvent(this,_h);}return false;};_pTray.on_fire_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g){if(this.onrbuttonup&&this.onrbuttonup._has_handlers){var _h=new nexacro.MouseEventInfo(this,"onrbuttonup","rbutton",_b,_c,_d,_e,_f,-1,-1,-1,-1,this,this,_g);return this.onrbuttonup._fireEvent(this,_h);}return false;};_pTray.on_fire_onballoontipshow=function(){if(this.onballoontipshow&&this.onballoontipshow._has_handlers){var _a=new nexacro.EventInfo(this,"onballoontipshow");return this.onballoontipshow._fireEvent(this,_a);}return false;};_pTray.on_fire_onballoontiphide=function(_a){if(this.onballoontiphide&&this.onballoontiphide._has_handlers){var _b=new nexacro.TrayBalloonTipHideEventInfo(this,"onballoontiphide",_a);return this.onballoontiphide._fireEvent(this,_b);}return false;};_pTray.on_fire_onballoontipclick=function(_a,_b,_c,_d,_e,_f,_g){if(this.onballoontipclick&&this.onballoontipclick._has_handlers){var _h=new nexacro.ClickEventInfo(this,"onballoontipclick","lbutton",_b,_c,_d,_e,_f,-1,-1,-1,-1,this,this,_g);return this.onballoontipclick._fireEvent(this,_h);}return false;};delete _pTray;}if(!nexacro.TrayPopupMenu){nexacro.TrayPopupMenu=function(_a,_b){this.id=this._p_name=_a;this._p_parent=_b;this._popupmenu=null;this._handle=null;this._is_created=false;this._p_innerdataset="";this._innerdataset="";this._level=0;this._rowindex=0;this._p_captioncolumn="";this._p_checkboxcolumn="";this._p_enablecolumn="";this._p_hotkeycolumn="";this._p_iconcolumn="";this._p_idcolumn="";this._p_levelcolumn="";this._p_userdatacolumn="";this._event_list={"onmenuclick":1};};var _pTrayPopupMenu=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.TrayPopupMenu);nexacro.TrayPopupMenu.prototype=_pTrayPopupMenu;_pTrayPopupMenu._type_name="TrayPopupMenu";_pTrayPopupMenu.on_created=function(){this._is_created=true;if(this._innerdataset==null&&this._p_innerdataset!=null){var _a=this._p_innerdataset;var _b=nexacro.getApplication();if(_b){this._innerdataset=_b._getDatasetObject(_a);this.on_apply_innerdataset();}}this._handle=nexacro._createTrayPopupMenuHandle(this._p_parent._handle);this._createPopupMenu(this._handle);};_pTrayPopupMenu._createPopupMenu=function(_a){if(this._handle==null||_a==null||_a==0){return;}var _b=this._innerdataset;if(_b&&this._p_levelcolumn&&this._p_captioncolumn&&this._p_idcolumn){var _c=_b.getRowCount();for(var _m=this._rowindex;_m<_c;_m++ ){var _d=_b.getColumn(_m,this._p_levelcolumn);if(_d==this._level){var _e="string";var _f=_b.getColumn(_m,this._p_captioncolumn);if(_f=="-"){_e="separator";}var _g=_b.getColumn(_m,this._p_iconcolumn);if(_g){_e="bitmap";_g=this._getSysURL(_g);}var _h=_b.getColumn(_m,this._p_enablecolumn);if(_h){if(!nexacro._toBoolean(_h)){_e="disabled";}}var _i=_b.getColumn(_m,this._p_idcolumn);if(_i){_i=_m;}var _j=_b.getColumn(_m,this._p_checkboxcolumn);if(_j){if(nexacro._toBoolean(_j)){_e="checked";}}var _k=_b.getColumn(_m+1,this._p_levelcolumn);if(_k-_d==1){_e="popup";var _l=nexacro._createTrayPopupMenuHandle(this._p_parent._handle);this._level++ ;this._rowindex=_m+1;this._createPopupMenu(_l);nexacro._setTrayPopupMenuItemHandle(this._p_parent._handle,_a,_e,_l,_f,_g);this._level-- ;_k=_b.getColumn(this._rowindex+1,this._p_levelcolumn);if(_k-_d<0){break;}}else if(_k-_d<0){nexacro._setTrayPopupMenuItemHandle(this._p_parent._handle,_a,_e,_i,_f,_g);this._rowindex=_m;break;}else{nexacro._setTrayPopupMenuItemHandle(this._p_parent._handle,_a,_e,_i,_f,_g);}}}}};_pTrayPopupMenu._updatePopupMenu=function(_a){this._level=0;this._rowindex=0;nexacro._destroyTrayPopupMenuHandle(this._p_parent._handle,_a);this._handle=nexacro._createTrayPopupMenuHandle(this._p_parent._handle);this._createPopupMenu(this._handle);};_pTrayPopupMenu.trackPopup=function(){if(this._handle){nexacro._current_tray_popup=this;nexacro._displayTrayPopupMenuHandle(this._p_parent._handle,this._handle);}};_pTrayPopupMenu.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(_a!=this.innerdataset){if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");var _b=nexacro.getApplication();if(_b){this._innerdataset=_b._getDatasetObject(_a);}this._p_innerdataset=_a;}this.on_apply_innerdataset();}else if(this._p_innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this._p_innerdataset);this.on_apply_innerdataset();}};_pTrayPopupMenu.on_apply_innerdataset=function(){var _a=this._innerdataset;if(_a){var _b=this._callbackFromDataset;_a._setEventHandler("onrowposchanged",_b,this);_a._setEventHandler("oncolumnchanged",_b,this);_a._setEventHandler("onrowsetchanged",_b,this);_a._setEventHandler("onvaluechanged",this._callback_onvaluechanged,this);if(this._handle){this._updatePopupMenu(this._handle);}}};_pTrayPopupMenu._callbackFromDataset=function(_a,_b){if(this._handle){if(_b.eventid=="onrowsetchanged"){this._updatePopupMenu(this._handle);}}};_pTrayPopupMenu._setInnerDatasetStr=function(_a){if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");var _b=nexacro.getApplication();if(_b){this._innerdataset=_b._getDatasetObject(_a);}this._p_innerdataset=_a;}};_pTrayPopupMenu.getInnerDataset=function(){return this._innerdataset;};_pTrayPopupMenu.setInnerDataset=function(_a){if(!_a){this._innerdataset=null;this._p_innerdataset="";this.on_apply_innerdataset();}else if(_a instanceof nexacro.Dataset){this._innerdataset=_a;this._p_innerdataset=_a.id;this.on_apply_innerdataset();}};_pTrayPopupMenu.set_captioncolumn=function(_a){if(_a!=this._p_captioncolumn){this._p_captioncolumn=_a;this.on_apply_captioncolumn();}};_pTrayPopupMenu.on_apply_captioncolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_checkboxcolumn=function(_a){if(_a!=this._p_checkboxcolumn){this._p_checkboxcolumn=_a;this.on_apply_checkboxcolumn();}};_pTrayPopupMenu.on_apply_checkboxcolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_enablecolumn=function(_a){if(_a!=this._p_enablecolumn){this._p_enablecolumn=_a;this.on_apply_enablecolumn();}};_pTrayPopupMenu.on_apply_enablecolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_hotkeycolumn=function(_a){if(_a!=this._p_hotkeycolumn){this._p_hotkeycolumn=_a;this.on_apply_hotkeycolumn();}};_pTrayPopupMenu.on_apply_hotkeycolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_iconcolumn=function(_a){if(_a!=this._p_iconcolumn){this._p_iconcolumn=_a;this.on_apply_iconcolumn();}};_pTrayPopupMenu.on_apply_iconcolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_idcolumn=function(_a){if(_a!=this._p_idcolumn){this._p_idcolumn=_a;this.on_apply_idcolumn();}};_pTrayPopupMenu.on_apply_idcolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_levelcolumn=function(_a){if(_a!=this._p_levelcolumn){this._p_levelcolumn=_a;this.on_apply_levelcolumn();}};_pTrayPopupMenu.on_apply_levelcolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.set_userdatacolumn=function(_a){if(_a!=this._p_userdatacolumn){this._p_userdatacolumn=_a;this.on_apply_userdatacolumn();}};_pTrayPopupMenu.on_apply_userdatacolumn=function(){var _a=this._innerdataset;if(_a){this._updatePopupMenu(this._handle);}};_pTrayPopupMenu.on_fire_onmenuclick=function(_a){var _b=this._innerdataset;var _c=_a;var _d=_b.getColumn(_c,this._p_idcolumn);var _e=_b.getColumn(_c,this._p_userdatacolumn);var _f=_b.getColumn(_c,this._p_levelcolumn);if(this.onmenuclick&&this.onmenuclick._has_handlers){var _g=new nexacro.MenuClickEventInfo(this,"onmenuclick",_d,_e,_c,_f);this.onmenuclick._fireEvent(this,_g);}};_pTrayPopupMenu.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pTrayPopupMenu._callback_onvaluechanged=function(_a,_b){if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);if(this._handle){this._updatePopupMenu(this._handle);}}};_pTrayPopupMenu._getSysURL=function(_a,_b){var _c=_a;if(_a&&(typeof (_a)=="string")){var _d;var _e=_a.trim();if(_e){if(_e.substring(0,3).toLowerCase()=="url"){var _f;var _g=_e.charAt(4);if(_g=='\''||_g=='\"'){_f=_e.substring(5,_e.lastIndexOf(_g));}else{_f=_e.substring(4,_e.length-1);}_d=_b?_b._getRefFormBaseUrl():nexacro._project_absolutepath;_c=nexacro._getSupportedImageUrl(_f,_d);}else{_d=_b?_b._getRefFormBaseUrl():nexacro._project_absolutepath;_c=nexacro._getSupportedImageUrl(_e,_d);}}}return _c;};_pTrayPopupMenu._properties=[{name:"captioncolumn"},{name:"checkboxcolumn"},{name:"enablecolumn"},{name:"hotkeycolumn"},{name:"iconcolumn"},{name:"idcolumn"},{name:"innerdataset"},{name:"levelcolumn"},{name:"userdatacolumn"}];nexacro._defineProperties(_pTrayPopupMenu,_pTrayPopupMenu._properties);delete _pTrayPopupMenu;}if(!nexacro.Plugin){nexacro.Plugin=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._params=new nexacro.Collection();this._events=new nexacro.Collection();};var _pPlugin=nexacro._createPrototype(nexacro.Component,nexacro.Plugin);nexacro.Plugin.prototype=_pPlugin;_pPlugin._type_name="Plugin";_pPlugin._p_classid="";_pPlugin._p_classid64="";_pPlugin._p_codebase="";_pPlugin._p_code="";_pPlugin._p_archive="";_pPlugin._p_mimetype="";_pPlugin._p_pluginsrc="";_pPlugin._p_pluginpage="";_pPlugin._p_license="";_pPlugin._p_lpkpath="";_pPlugin._p_contents="";_pPlugin._p_adjustalpha=false;_pPlugin._p_usepersistdata=false;_pPlugin._p_windowed=false;_pPlugin._p_popupstyle=false;_pPlugin._obj_id="";_pPlugin._obj_elem=null;_pPlugin._params=null;_pPlugin._event_params=null;_pPlugin.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);nexacro.Component.prototype.set_visible.call(this,_a);var _b=this._obj_elem;if(_b){_b.setElementVisible(_a);}};_pPlugin.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._obj_elem=new nexacro.PluginElement(_a);_b.setElementSize(this._getClientWidth(),this._getClientHeight());var _c=this._params;var _d,_e=_c.length;for(_d=0;_d<_e;_d++ ){_b.setElementParam(_c.get_id(_d),_c.get_item(_d));}var _f=this._events;var _g=_f.length;for(_d=0;_d<_g;_d++ ){_b.addEventHandler(_f.get_id(_d),_f.get_item(_d));}}this.on_apply_classid();this.on_apply_classid64();this.on_apply_codebase();this.on_apply_code();this.on_apply_archive();this.on_apply_mimetype();this.on_apply_pluginsrc();this.on_apply_pluginpage();this.on_apply_plugintype();this.on_apply_license();this.on_apply_lpkpath();this.on_apply_adjustalpha();this.on_apply_usepersistdata();this.on_apply_windowed();this.on_apply_popupstyle();};_pPlugin.on_create_contents_command=function(){if(this._obj_elem){return this._obj_elem.createCommand();}return "";};_pPlugin.on_attach_contents_handle=function(_a){if(this._obj_elem){this._obj_elem.component=this;this._obj_elem.attachHandle(_a);}};_pPlugin.on_created_contents=function(_a){var _b=this._obj_elem;if(_b){_b.component=this;_b.create(_a);_b.setElementVisible(this.visible);}};_pPlugin.on_destroy_contents=function(){var _a=this._obj_elem;if(_a){_a.destroy();this._obj_elem=null;}};_pPlugin.on_update_position=function(_a,_b,_c){nexacro.Component.prototype.on_update_position.call(this,_a,_b,_c);var _d=this._obj_elem;if(_d){if(_a||_b){_d.on_update_position(_a,_b,this._adjust_left,this._adjust_top);}}};_pPlugin._apply_setfocus=function(){var _a=this._obj_elem;if(_a){_a.setElementFocus();}};_pPlugin.on_change_containerRect=function(_a,_b){var _c=this._obj_elem;if(_c){_c.setElementSize(_a,_b);}};_pPlugin._setContents=function(_a){if(_a&&_a.length){if(_a.indexOf("<Contents/>")!=0&&_a.indexOf("<Contents>")!=0){_a="<Contents>"+_a+"</Contents>";}var _b=nexacro._parseXMLDocument(_a);if(_b){this._params.clear();var _c=_b.getElementsByTagName("Param");if(_c){var _d=_c.length;for(var _j=0;_j<_d;_j++ ){var _e=_c[_j];var _f=_e.getAttribute("name");var _g=_e.getAttribute("value");var _h=this._obj_elem;if(_h){_h.setElementParam(_f,_g);}else{this._params.add_item(_f,_g);}}}_c=_b.getElementsByTagName("_persistdata");if(_c){var _d=_c.length;for(var _j=0;_j<_d;_j++ ){var _i=_c[_j];if(_i.childNodes&&_i.childNodes.length>0){var _f="__persistdata";var _g=_i.childNodes[0].source;var _h=this._obj_elem;if(_h){_h.setElementParam(_f,_g);}else{this._params.add_item(_f,_g);}}}}}}};_pPlugin.set_contents=function(_a){this._p_contents=_a;this._setContents(_a);};_pPlugin.set_classid=function(_a){this._p_classid=_a;this.on_apply_classid();};_pPlugin.on_apply_classid=function(){var _a=this._obj_elem;if(_a){var _b=this._p_classid;_a.setElementClassId(_b);}};_pPlugin.set_classid64=function(_a){this._p_classid64=_a;this.on_apply_classid64();};_pPlugin.on_apply_classid64=function(){var _a=this._obj_elem;if(_a){var _b=this._p_classid64;_a.setElementClassId64(_b);}};_pPlugin.set_codebase=function(_a){this._p_codebase=_a;this.on_apply_codebase();};_pPlugin.on_apply_codebase=function(){var _a=this._obj_elem;if(_a){var _b=this._p_codebase;if(_b){_a.setElementCodebase(_b);}}};_pPlugin.set_code=function(_a){this._p_code=_a;this.on_apply_code();};_pPlugin.on_apply_code=function(){var _a=this._obj_elem;if(_a){var _b=this._p_code;if(_b){_a.setElementCode(_b);}}};_pPlugin.set_archive=function(_a){this._p_archive=_a;this.on_apply_archive();};_pPlugin.on_apply_archive=function(){var _a=this._obj_elem;if(_a){var _b=this._p_archive;if(_b){_a.setElementArchive(_b);}}};_pPlugin.set_mimetype=function(_a){this._p_mimetype=_a;this.on_apply_mimetype();};_pPlugin.on_apply_mimetype=function(){var _a=this._obj_elem;if(_a){var _b=this._p_mimetype;if(_b){_a.setElementMIMEType(_b);}}};_pPlugin.set_pluginsrc=function(_a){this._p_pluginsrc=_a;this.on_apply_pluginsrc();};_pPlugin.on_apply_pluginsrc=function(){var _a=this._obj_elem;if(_a){var _b=this._p_pluginsrc;if(_b){_a.setElementPluginSrc(_b);}}};_pPlugin.set_plugintype=function(_a){this.plugintype=_a;this.on_apply_plugintype();};_pPlugin.on_apply_plugintype=function(){var _a=this._obj_elem;if(_a){var _b=this.plugintype;if(_b){_a.setElementPluginMIMEType(_b);}}};_pPlugin.set_pluginpage=function(_a){this._p_pluginpage=_a;this.on_apply_pluginpage();};_pPlugin.on_apply_pluginpage=function(){var _a=this._obj_elem;if(_a){var _b=this._p_pluginpage;if(_b){_a.setElementPluginPage(_b);}}};_pPlugin.set_license=function(_a){this._p_license=_a;this.on_apply_license();};_pPlugin.on_apply_license=function(){var _a=this._obj_elem;if(_a){var _b=this._p_license;if(_b){_a.setElementLicense(_b);}}};_pPlugin.set_lpkpath=function(_a){this._p_lpkpath=_a;this.on_apply_lpkpath();};_pPlugin.on_apply_lpkpath=function(){var _a=this._obj_elem;if(_a){var _b=this._p_lpkpath;if(_b){_a.setElementLicenseFile(_b);}}};_pPlugin.set_adjustalpha=function(_a){this._p_adjustalpha=nexacro._toBoolean(_a);this.on_apply_adjustalpha();};_pPlugin.on_apply_adjustalpha=function(){var _a=this._obj_elem;if(_a){var _b=this._p_adjustalpha;if(_b){_a.setElementAdjustAlpha(_b);}}};_pPlugin.set_usepersistdata=function(_a){this._p_usepersistdata=_a;this.on_apply_usepersistdata();};_pPlugin.get_usepersistdata=function(_a){var _b=this._obj_elem;if(_b){return _b.getElementUsePersistData();}};_pPlugin.on_apply_usepersistdata=function(){var _a=this._obj_elem;if(_a){var _b=this._p_usepersistdata;if(_b){_a.setElementUsePersistData(_b);}}};_pPlugin.set_windowed=function(_a){this._p_windowed=nexacro._toBoolean(_a);};_pPlugin.on_apply_windowed=function(){var _a=this._obj_elem;if(_a){var _b=this._p_windowed;if(_b){_a.setElementWindowed(_b);}}};_pPlugin.set_popupstyle=function(_a){this._p_popupstyle=nexacro._toBoolean(_a);this.on_apply_popupstyle();};_pPlugin.on_apply_popupstyle=function(){var _a=this._obj_elem;if(_a){var _b=this._p_popupstyle;if(_b){_a.setElementPopupStyle(_b);}}};_pPlugin._properties=[{name:"classid"},{name:"classid64"},{name:"codebase"},{name:"code"},{name:"archive"},{name:"mimetype"},{name:"pluginsrc"},{name:"pluginpage"},{name:"license"},{name:"lpkpath"},{name:"contents"},{name:"adjustalpha"},{name:"usepersistdata"},{name:"windowed"},{name:"popupstyle"}];nexacro._defineProperties(_pPlugin,_pPlugin._properties);_pPlugin.install=function(){var _a=this._obj_elem;if(_a){_a.install();}};_pPlugin.isInstalled=function(){var _a=this._obj_elem;if(_a){return _a.isInstalled();}return false;};_pPlugin.isLoaded=function(){var _a=this._obj_elem;if(_a){return _a.isLoaded();}return false;};_pPlugin.setProperty=function(_a,_b){var _c="set_"+_a;var _d=this[_c];if(_d){_d.call(this,_b);}else{var _e=this._obj_elem;if(_e){if(_a.toLowerCase()=="movie"){_e.setElementPluginSrc(_b);_e.setElementPluginMIMEType("application/x-shockwave-flash");}}this._setParam(_a,_b);}};_pPlugin.getProperty=function(_a){var _b=this._getParam(_a);if(_b==null){_b=this[_a];}return _b;};_pPlugin.callMethod=function(){var _a=this._obj_elem;if(_a){var _b=Array.prototype.slice.call(arguments);for(var _d=0;_d<_b.length;_d++ ){if(_b[_d] instanceof nexacro.Plugin){var _c=_b[_d]._obj_elem;if(_c){_b[_d]=_c.getPluginObject();}}}return this._callMethod.apply(this,_b);}};_pPlugin._fireEvent=function(){var _a,_b;var _c=this._user_handlers;var _d=_c.length;for(_a=0;_a<_d;_a++ ){var _e=_c[_a];if(_e){_b=_e.handler.apply(_e.target,arguments);}}return _b;};_pPlugin.addEventHandler=function(_a,_b,_c){if(!_b){return;}var _d=false;var _e=this._obj_elem;if(_e){_d=_e.addEventHandler(_a,_b);}if(_d==false){this._events.add_item(_a,_b);}if(_a in this._event_list==false){this._event_list[_a]=1;}_d=nexacro.Component.prototype.addEventHandler.call(this,_a,_b,_c);if(this[_a]){this[_a]._firePluginEvent=_pPlugin._fireEvent;}return _d;};_pPlugin.removeEventHandler=function(_a,_b,_c){var _d=this._obj_elem;if(_d){_d.removeEventHandler(_a,_b);}else{this._events.delete_item(_a);}return nexacro.Component.prototype.removeEventHandler.call(this,_a,_b,_c);};_pPlugin._getParam=function(_a){var _b;var _c=this._obj_elem;if(_c){_b=_c.getElementParam(_a);}else{_b=this._params.get_item(_a);}return _b;};_pPlugin._setParam=function(_a,_b){var _c=this._obj_elem;if(_c){_c.setElementParam(_a,_b);}else{this._params.add_item(_a,_b);}};_pPlugin._callMethod=function(){var _a=this._obj_elem;if(_a){return _a.callMethod.apply(_a,arguments);}};delete _pPlugin;}if(!nexacro.VirtualFile){nexacro.VirtualFileEventInfo=function(_a,_b,_c,_d,_e,_f,_g){this.eventid=_a;this.reason=_b;this.textdata=_c;this.binarydata=_d;this.fileattributelist=nexacro._getFileAttributeList(_e);this.filesize=_f;this.fileisexist=_g;};var _pVirtualFileEventInfo=nexacro.VirtualFileEventInfo.prototype=nexacro._createPrototype(nexacro.Event,nexacro.VirtualFileEventInfo);_pVirtualFileEventInfo._type_name="VirtualFileEventInfo";delete _pVirtualFileEventInfo;nexacro.VirtualFileErrorEventInfo=function(_a,_b,_c){this.id=this.eventid=_a;this.errortype="ObjectError";this.statuscode=_b;this.errormsg=_c;};var _pVirtualFileErrorEventInfo=nexacro.VirtualFileErrorEventInfo.prototype=nexacro._createPrototype(nexacro.Event,nexacro.VirtualFileErrorEventInfo);_pVirtualFileErrorEventInfo._type_name="VirtualFileErrorEventInfo";delete _pVirtualFileErrorEventInfo;nexacro._FileAttribute=function(_a){this.accesstime=_a.accesstime;this.createtime=_a.createtime;this.filename=_a.filename;this.groupid=_a.groupid;this.modifytime=_a.modifytime;this.size=_a.size;this.userid=_a.userid;this.isdirectory=_a.isdirectory;this.isreadonly=_a.isreadonly;};var _pFileAttribute=nexacro._FileAttribute.prototype=nexacro._createPrototype(nexacro.Object,nexacro._FileAttribute);_pFileAttribute._type_name="_FileAttribute";_pFileAttribute.isDirectory=function(){return this.isdirectory;};_pFileAttribute.isHidden=function(){};_pFileAttribute.isLink=function(){};_pFileAttribute.isReadOnly=function(){return this.isreadonly;};delete _pFileAttribute;nexacro.VirtualFile=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);if(arguments.length==3){this._handle=nexacro._createVirtualFileHandle(this,arguments[2]);}else{this._handle=nexacro._createVirtualFileHandle(this);}};var _pVirtualFile=nexacro.VirtualFile.prototype=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.VirtualFile);_pVirtualFile._type_name="VirtualFile";_pVirtualFile._p_filename="";_pVirtualFile._p_fullpath="";_pVirtualFile._p_path="";_pVirtualFile._p_async="true";_pVirtualFile._file=null;_pVirtualFile._event_list={"onsuccess":1,"onerror":1};nexacro.VirtualFile.openRead=0x0001;nexacro.VirtualFile.openWrite=0x0002;nexacro.VirtualFile.openAppend=0x0010;nexacro.VirtualFile.openCreate=0x1000;nexacro.VirtualFile.openText=0x0100;nexacro.VirtualFile.openBinary=0x0200;nexacro.VirtualFile.seekBegin=0x0000;nexacro.VirtualFile.seekCurrent=0x0001;nexacro.VirtualFile.seekEnd=0x0002;nexacro.VirtualFile.findAll=0x0001;nexacro.VirtualFile.findFileOnly=0x0002;nexacro.VirtualFile.findDirectoryOnly=0x0004;nexacro.VirtualFile.findRecursive=0x0008;nexacro.VirtualFile.findCaseless=0x0010;_pVirtualFile.destroy=function(){nexacro._destroyVirtualFileHandle(this);if(this._handle){this._handle=null;}return true;};_pVirtualFile.set_filename=nexacro._emptyFn;_pVirtualFile.set_fullpath=nexacro._emptyFn;_pVirtualFile.set_path=nexacro._emptyFn;_pVirtualFile.set_async=function(_a){_a=nexacro._toBoolean(_a);if(this._p_async!=_a){this._p_async=_a;this.on_apply_async();}};_pVirtualFile.on_apply_async=function(){nexacro._setVirtualFileHandleAsync(this,this._p_async);};_pVirtualFile._properties=[{name:"filename"},{name:"fullpath"},{name:"path"},{name:"async"}];nexacro._defineProperties(_pVirtualFile,_pVirtualFile._properties);_pVirtualFile.open=function(_a,_b){if(arguments.length<2){return false;}var _c=this._IsValidConstOptions(_b);if(!_c){return false;}if(!_a){if(this._p_fullpath||this._p_path||this._p_filename){return nexacro._openVirtualFileHandle(this,this._p_fullpath,_b);}}else{var _d=_a.split("\\").join("/");this._setFullPath(_d);this._setPath(this._getPath(_d));this._setFileName(this._getFileName(_d));return nexacro._openVirtualFileHandle(this,_a,_b);}return false;};_pVirtualFile.close=function(){nexacro._closeVirtualFileHandle(this);};_pVirtualFile.read=function(_a,_b){_a=_a||-1;_b=_b||"utf-8";if(isNaN(_a)==false){_a=nexacro._toInt(_a);}if(typeof _a!="number"||typeof _b!="string"){return false;}return nexacro._readVirtualFileHandle(this,_a,_b);};_pVirtualFile.readLine=function(_a,_b){_a=_a||"\n";_b=_b||"utf-8";return nexacro._readlineVirtualFileHandle(this,_a,_b);};_pVirtualFile.seek=function(_a,_b){if(isNaN(_a= +_a)){return false;}if(arguments.length==1){_b=nexacro.VirtualFile.seekCurrent;}if(isNaN(_b= +_b)){return false;}return nexacro._seekVirtualFileHandle(this,_a,_b);};_pVirtualFile.write=function(_a,_b){var _c=_a;var _d="utf-8";if(typeof (_c)=="undefined"||_c.length==0){return false;}if(arguments.length==2){_d=_b;}return nexacro._writeVirtualFileHandle(this,_c,_d);};_pVirtualFile.remove=function(_a){if(!_a){return false;}if(_a instanceof nexacro.VirtualFile){_a=_a._p_fullpath;}return nexacro._removeVirtualFileHandle(this,_a);};_pVirtualFile.copy=function(_a,_b){if(!_a||!_b){return false;}return nexacro._copyVirtualFileHandle(this,_a,_b);};_pVirtualFile.rename=function(_a,_b){if(!_a||!_b){return false;}if(typeof _a!='string'){return false;}if(typeof _b!='string'){return false;}return nexacro._renameVirtualFileHandle(this,_a,_b);};_pVirtualFile.getFileList=function(_a,_b,_c){if(!_a||!_b){return false;}if(arguments.length<=2){_c=nexacro.VirtualFile.findAll;}if(!(_c&nexacro.VirtualFile.findAll)&&!(_c&nexacro.VirtualFile.findFileOnly)&&!(_c&nexacro.VirtualFile.findDirectoryOnly)&&!(_c&nexacro.VirtualFile.findRecursive)&&!(_c&nexacro.VirtualFile.findCaseless)){return false;}return nexacro._getFileListVirtualFileHandle(this,_a,_b,_c);};_pVirtualFile.getFileSize=function(){return nexacro._getFileSizeVirtualFileHandle(this,this._p_fullpath);};_pVirtualFile.isExist=function(_a){if(!_a){return false;}return nexacro._isExistVirtualFileHandle(this,_a);};_pVirtualFile.createDirectory=function(_a,_b){if(!_a){return false;}if(arguments.length==1){_b=false;}else if(arguments.length==2){if(typeof _b!='boolean'){if(typeof _b=='number'){if(_b>=1){_b=true;}}else{_b=false;}}}return nexacro._createDirectoryVirtualFileHandle(this,_a,_b);};_pVirtualFile.deleteDirectory=function(_a,_b){if(!_a){return false;}if(arguments.length==1){_b=false;}else if(arguments.length==2){if(typeof _b!='boolean'){if(typeof _b=='number'){if(_b>=1){_b=true;}else{_b=false;}}else if(typeof _b=='string'){if(_b=="true"){_b=true;}else{_b=false;}}else{_b=false;}}}return nexacro._deleteDirectoryVirtualFileHandle(this,_a,_b);};_pVirtualFile.renameDirectory=function(_a,_b){if(!_a||!_b){return false;}if(_b.match(/[\"\/:*?<>|]/)){return false;}return nexacro._renameDirectoryVirtualFileHandle(this,_a,_b);};_pVirtualFile.on_success=function(_a,_b,_c,_d,_e,_f){_b=this._replaceEntity(_b,["&amp;","&lt;","&gt;","&quot;","&apos;","&#32;","&#13;","&#10;","&#9;"])||"";_c=this._replaceEntity(_c,["&amp;","&lt;","&gt;","&quot;","&apos;","&#32;","&#13;","&#10;","&#9;"])||"";return this.on_fire_onsuccess(_a,_b,_c,_d,_e,_f);};_pVirtualFile._onsuccess=function(_a){var _b=nexacro.base64Decode(_a.textdata);var _c=this._replaceEntity(_a.binarydata,["&amp;","&lt;","&gt;","&quot;","&apos;","&#32;","&#13;","&#10;","&#9;"])||"";this.on_fire_onsuccess(_a.reason,_b,_c,_a.fileattributelist,_a.filesize,_a.fileisexist);};_pVirtualFile.on_fire_onsuccess=function(_a,_b,_c,_d,_e,_f){if(this.onsuccess&&this.onsuccess._has_handlers){var _g=new nexacro.VirtualFileEventInfo("onsuccess",_a,_b,_c,_d,_e,_f);this.onsuccess._fireEvent(this,_g);}return true;};_pVirtualFile.on_error=function(_a,_b){this.on_fire_onerror(_a,_b);};_pVirtualFile._onerror=function(_a){this.on_fire_onerror(_a.errorcode,_a.errormsg);};_pVirtualFile.on_fire_onerror=function(_a,_b){if(this.onerror&&this.onerror._has_handlers){var _c=new nexacro.VirtualFileErrorEventInfo("onerror",_a,_b);this.onerror._fireEvent(this,_c);}return true;};_pVirtualFile._createVirtualFileHandle=function(_a){this._handle=nexacro._createVirtualFileHandle(_a);};_pVirtualFile._setPath=function(_a){this._p_path=_a;};_pVirtualFile._setFullPath=function(_a){this._p_fullpath=_a;};_pVirtualFile._setFileName=function(_a){this._p_filename=_a;};_pVirtualFile._getPath=function(_a){if(!_a){return _a;}_a=_a.split("\\").join("/");var _b=_a.lastIndexOf("/");if(_b==-1){_b=_a.lastIndexOf("%");}return _a.substring(0,_b+1);};_pVirtualFile._getFileName=function(_a){if(!_a){return _a;}_a=_a.split("\\").join("/");var _b=_a.lastIndexOf("/");if(_b==-1){_b=_a.lastIndexOf("%");}return _a.substring(_b+1,_a.length);};_pVirtualFile._replaceEntity=function(_a,_b){if(!_a){return _a;}var _c={"\&amp\;":"\&","\&lt\;":"\<","\&gt\;":"\>","\&quot\;":"\"","\&apos\;":"\'","\&\#32\;":"\ ","\&\#13\;":"\\r","\&\#10\;":"\\n","\&\#9\;":"\\t"};if(_b.length){var _d=_b.pop();return this._replaceEntity(_a.replace(new RegExp(_d,"g"),_c[_d]),_b);}return _a;};_pVirtualFile._IsValidConstOptions=function(_a){if(_a==1||_a==2||_a==16||_a==4096||_a==256||_a==512||_a==3||_a==17||_a==4097||_a==257||_a==513||_a==18||_a==4098||_a==258||_a==514||_a==4112||_a==528||_a==4352||_a==4608||_a==768||_a==19||_a==4099||_a==259||_a==515||_a==4114||_a==274||_a==530||_a==4368||_a==4624||_a==4864||_a==4115||_a==275||_a==531||_a==4370||_a==4626||_a==4880||_a==4371||_a==4627||_a==4882||_a==4883){return true;}return false;};delete _pVirtualFile;}if(!nexacro.View){nexacro.View=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._p_form=new nexacro._InnerForm("form",0,0,_d,_e,null,null,null,null,null,null,this);this._p_form._initLayoutManager();};var _pView=nexacro._createPrototype(nexacro.Div,nexacro.View);nexacro.View.prototype=_pView;_pView._type_name="View";_pView._p_viewdataset="";_pView._p_viewtype="";_pView._p_sourceview="";_pView._viewdataset=null;_pView._ismodeltrigger=false;_pView._is_view=true;_pView._event_list={"onclick":1,"ondblclick":1,"onkillfocus":1,"onsetfocus":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmousewheel":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"oncontextmenu":1,"onvscroll":1,"onhscroll":1,"onmouseup":1,"onmousedown":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pView.on_create_contents=function(){this.on_apply_viewdataset(this._p_viewdataset);this.on_apply_sourceview();this._p_form.createComponent(true);};_pView.on_created_contents=function(_a){var _b=this._p_form;_b.on_created(_a);this.on_apply_text();this._recalcLayout();};_pView.on_destroy_contents=function(){this._destroyTextElement();this._destroyFormControl();this._user_property_list=null;this._viewdataset=null;};_pView.on_attach_contents_handle=function(_a){var _b=this._p_form;_b.on_created(_a);this.on_apply_text();this._recalcLayout();};_pView.set_viewtype=function(_a){if(this._is_created){return;}this._p_viewtype=_a;};_pView.set_viewdataset=function(_a){if(this._is_created){return;}this._p_viewdataset=_a;};_pView.on_apply_viewdataset=function(_a){if(typeof _a!="string"){this._viewdataset=_a;}if(this._p_viewdataset!=_a){if(!_a){this._viewdataset=null;this._p_viewdataset="";}else{_a=_a.replace("@","");var _b=this._findViewDataset(_a);this._viewdataset=_b?_b:"";this._p_viewdataset=_a;}}else if(this._p_viewdataset&&!this._viewdataset){this._setViewDatasetStr(this._p_viewdataset);}};_pView.on_apply_text=function(_a){var _b=this._p_form;if(_b&&((_b._child_list&&_b._child_list.length>0))||!this._is_alive){return;}var _c=_b.getElement();if(_c){if(!_a){_a=this._displaytext;}var _d=this._cell_elem;if(!_d&&_a){var _e=this._getWindow();_d=this._cell_elem=new nexacro.TextBoxElement(_c);_d.create(_e);}if(_d){_d.setElementSize(this._getClientWidth(),this._getClientHeight());_d.setElementVerticalAlign(this._p_verticalAlign);_d.setElementTextAlign(this._p_textAlign);_d.setElementText(_a);}}};_pView.set_sourceview=function(_a){if(this._is_created){return;}this._p_sourceview=_a;};_pView.on_apply_sourceview=function(){if(this._p_sourceview&&this.getSourceView()){var _a=this.getSourceView().getViewDataset();if(_a){this._viewdataset=_a;this._p_form[this._p_viewdataset]=_a;}}};_pView.set_semantictag=function(_a){if(this._p_semantictag!=_a){this._p_semantictag=_a;}};_pView.set_url=nexacro._emptyFn;_pView.set_urlchangeeffect=nexacro._emptyFn;_pView.set_async=nexacro._emptyFn;_pView._properties=[{name:"form",readonly:true},{name:"viewdataset",readonly:true},{name:"viewtype"},{name:"sourceview"},{name:"semantictag"}];nexacro._defineProperties(_pView,_pView._properties);_pView.reload=nexacro._emptyFn;_pView.getViewDataset=function(){if(this._viewdataset){return this._viewdataset;}var _a=this.getSourceView();if(this._p_sourceview&&_a){return _a._findViewDataset(_a._p_viewdataset);}return this._findViewDataset(this._p_viewdataset);};_pView.getSourceView=function(){if(this._p_sourceview){return this._getSourceView(this._p_sourceview);}else{return;}};_pView._getSourceView=function(_a){if(_a&&this._p_parent){return this._p_parent[_a];}else{return;}};_pView.on_notifytrigger=function(_a,_b){var _c=this._p_parent;if(!_c){return;}if(_b){var _d=this._p_parent._trigger_manager;var _e=_b.eventid;for(var _h in nexacro._trigger_type_table){if(nexacro._trigger_type_table[_h]==_b.eventid){_e=_h;break;}}var _f=_a;var _g=this;if(_d){_d._notifyTrigger(_e,_f,_g);}}};_pView._loadedForm=function(){this._on_apply_formscroll();};_pView._setScript=function(_a){};_pView._setViewDatasetStr=function(_a){if(_a){_a=_a.replace("@","");this._viewdataset=this._findViewDataset(_a);this._p_viewdataset=_a;}else{this._viewdataset=null;this._p_viewdataset="";}};_pView._findViewDataset=function(_a){if(_a&&_a.length>0){var _b=this[_a];if(_b&&(_b._type_name=="Dataset")){return _b;}if(this._p_form){_b=this._p_form.lookup(_a);if(_b&&(_b._type_name=="Dataset")){return _b;}}}return undefined;};_pView._setViewDataset=function(_a){this._p_viewdataset=_a;};delete _pView;}if(!nexacro.Action){"use strict";nexacro.ActionEventInfo=function(_a,_b){this.id=this.eventid=_b;this.fromobject=this.fromreferenceobject=_a;};var _pActionEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.ActionEventInfo);nexacro.ActionEventInfo.prototype=_pActionEventInfo;_pActionEventInfo._type_name="ActionEventInfo";nexacro.Action=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);this._p_name=_a;};var _pAction=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.Action);nexacro.Action.prototype=_pAction;_pAction._type_name="Action";_pAction._p_targetview="";_pAction._targetview=null;_pAction._contents=null;_pAction._event_list={"onsuccess":1,"onerror":1};_pAction.destroy=function(){this._contents=null;this._targetview=null;if(this._p_parent){this._p_parent.removeChild(this.id);}this._p_parent=null;nexacro._EventSinkObject.prototype.destroy.call(this);};_pAction.set_targetview=function(_a){if(this._p_targetview!==_a){this._p_targetview=_a;this._targetview=null;}};_pAction.set_name=function(_a){if(this._p_name!=_a){this._p_name=_a;}};_pAction._properties=[{name:"targetview"},{name:"name"}];nexacro._defineProperties(_pAction,_pAction._properties);_pAction.on_fire_onsuccess=function(){var _a=this.onsuccess;if(_a&&_a._has_handlers){var _b=new nexacro.ActionEventInfo(this,"onsuccess");_a._fireEvent(this,_b);}};_pAction.on_fire_onerror=function(){var _a=this.onerror;if(_a&&_a._has_handlers){var _b=new nexacro.ActionEventInfo(this,"onerror");_a._fireEvent(this,_b);}};_pAction._setContents=function(_a){if(nexacro._isObject(_a)){this._contents=_a;}else{this._contents=JSON.parse(_a);}};_pAction.getContents=function(_a){_a=nexacro._toString(_a);return this._contents?(this._contents[_a]):null;};_pAction._findViewObject=function(_a){var _b=this._p_parent;if(!_b){return null;}var _c=_b[_a];if(_c instanceof nexacro.View){return _c;}return null;};_pAction.getTargetView=function(){if(this._targetview){return this._targetview;}return this._targetview=this._findViewObject(this._p_targetview);};_pAction.run=nexacro._emptyFn;}if(!nexacro.WebView){if(!nexacro.WebLoadCompEventInfo){nexacro.WebLoadCompEventInfo=function(_a,_b,_c){this.id=this.eventid=_c||"onloadcompleted";this.fromobject=this.fromreferenceobject=_a;this.url=_b;};var _pWebLoadCompEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.WebLoadCompEventInfo);nexacro.WebLoadCompEventInfo.prototype=_pWebLoadCompEventInfo;_pWebLoadCompEventInfo._type_name="WebLoadCompEventInfo";delete _pWebLoadCompEventInfo;}if(!nexacro.WebUserNotifyEventInfo){nexacro.WebUserNotifyEventInfo=function(_a,_b,_c){this.id=this.eventid=_c||"onusernotify";this.fromobject=this.fromreferenceobject=_a;this.userdata=_b;};var _pWebUserNotifyEventInfo=nexacro._createPrototype(nexacro.Event,nexacro.WebUserNotifyEventInfo);nexacro.WebUserNotifyEventInfo.prototype=_pWebUserNotifyEventInfo;_pWebUserNotifyEventInfo._type_name="WebUserNotifyEventInfo";delete _pWebUserNotifyEventInfo;}nexacro.WebView=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pWebView=nexacro._createPrototype(nexacro.Component,nexacro.WebView);nexacro.WebView.prototype=_pWebView;_pWebView._type_name="WebView";_pWebView._ifrm_elem=null;_pWebView.window=null;_pWebView.document=null;_pWebView._p_url="";_pWebView._p_setupurl="";_pWebView._p_useurlhistory=true;_pWebView._url="";_pWebView._setupUrl="";_pWebView._current_url="";_pWebView._p_accessibilityrole="webview";_pWebView._p_accessibilityleavemessage="";_pWebView._scriptcallbacklist=[];_pWebView._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"oncontextmenu":1,"onloadcompleted":1,"onusernotify":1,"ondevicebuttonup":1};_pWebView.on_get_accessibility_label=function(){return this.id;};_pWebView.on_create_contents=function(){var _a=this.getElement();if(_a){this._ifrm_elem=new nexacro._WebViewPluginElement(_a);this._ifrm_elem.setElementSize(this._getClientWidth(),this._getClientHeight());}};_pWebView.on_create_contents_command=function(){return "";};_pWebView.on_attach_contents_handle=function(_a){this.on_created_contents(_a);return;};_pWebView.on_created_contents=function(_a){var _b=this._ifrm_elem;if(_b){_b.component=this;_b.create(_a);_b.initEvent();this.document=_b._document;this.window=_b._winodw;nexacro._observeSysEvent(_b.handle,"mouseover","onmouseover",this._webview_mouseover);}if(this._url===""){this._url="about:blank";}this.on_apply_url();this.on_apply_setupurl();this._on_apply_accessibilityleavemessage();};_pWebView.on_destroy_contents=function(){var _a=this._ifrm_elem;if(_a){nexacro._stopSysObserving(_a.handle,"mouseover","onmouseover",this._webview_mouseover);this.window=null;this.document=null;_a.destroy();this._ifrm_elem=null;}};_pWebView.on_update_position=function(_a,_b,_c){nexacro.Component.prototype.on_update_position.call(this,_a,_b,_c);var _d=this._ifrm_elem;if(_d){_d.on_update_position();}};_pWebView.on_change_containerRect=function(_a,_b){var _c=this._ifrm_elem;if(_c){_c.setElementSize(_a,_b);}};_pWebView.on_fire_onloadcompleted=function(_a,_b){if(this.onloadcompleted&&this.onloadcompleted._has_handlers){var _c=new nexacro.WebLoadCompEventInfo(_a,_b);_c.eventid="onloadcompleted";return this.onloadcompleted._fireEvent(this,_c);}return true;};_pWebView.fireUserNotify=function(_a){if(_a.target){_a.target.on_fire_onusernotify(_a.target,_a.data);}};_pWebView.on_fire_onusernotify=function(_a,_b){if(this.onusernotify&&this.onusernotify._has_handlers){var _c=new nexacro.WebUserNotifyEventInfo(_a,_b);_c.eventid="onusernotify";return this.onusernotify._fireEvent(this,_c);}return true;};_pWebView.on_ondevicebuttonup_default_action=function(_a){if(_a==2){this.goBack();}};_pWebView._getDlgCode=function(_a){var _b=this._ifrm_elem;if(_b){if((!_b._prev_outfocus_message_elem||(_b._prev_outfocus_message_elem._killfocus_flag==true&&_a==nexacro.Event.KEY_UP))||(!_b._next_outfocus_message_elem||(_b._next_outfocus_message_elem._killfocus_flag==true&&_a==nexacro.Event.KEY_DOWN))){this._want_arrow=false;}else{this._want_arrow=true;}}return {want_tab:true,want_return:true,want_escape:false,want_chars:false,want_arrows:this._want_arrow};};_pWebView.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f){var _g=nexacro.Event;if(_a==_g.KEY_TAB){this._getWindow()._keydown_element._event_stop=false;if(nexacro._Browser=="Runtime"){var _h=this._getRootComponent(this);var _i=this._getForm().getNextComponent(_h,true);if(_i){_i.setFocus();}}}else if(nexacro._enableaccessibility){var _j=this._ifrm_elem;if(_j){_j._setElementInternalFocus(_a);}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f);};_pWebView._apply_setfocus=function(_a){var _b=this._ifrm_elem;if(_b){_b._setElementFocus();}};_pWebView._webview_mouseover=function(){if(this._linked_element&&!this._linked_element._document){nexacro._initDragInfo();nexacro._cur_track_info=null;}};_pWebView.set_text=function(_a){_a=nexacro._toString(_a);if(_a&&_a!=this._p_text){this._p_text=_a;this._displaytext=_a.replace(/ /g,"\u00a0");this.on_apply_text(_a);}};_pWebView.set_enable=function(_a){_a=nexacro._toBoolean(_a);if(this._p_enable!=_a){this._p_enable=_a;if(this._is_created){var _b=(this._p_parent._real_enable&&_a);if(this._real_enable!=_b){this._real_enable=_b;this._changeStatus("disabled",!_b);this.on_apply_prop_enable(this._real_enable);}}}};_pWebView.callMethod=function(){var _a=this._ifrm_elem;if(_a){return nexacro._WebViewPluginElement.prototype.callMethod.apply(_a,arguments);}};_pWebView.set_visible=function(_a){if(_a===undefined||_a===null){return;}_a=nexacro._toBoolean(_a);nexacro.Component.prototype.set_visible.call(this,_a);var _b=this._ifrm_elem;if(_b){_b.setElementVisible(_a);}};_pWebView.set_cookiesynctype=function(){};_pWebView.set_url=function(_a){if(_a==undefined){return;}var _b=_a.toString();if(_b!="about:blank"&&_b.match(/http:\/\/|file:\/\/|https:\/\//gi)==null){_b="http://"+_b;}this._url=_b;this._p_url=_a;this.on_apply_url();};_pWebView.set_setupurl=function(_a){if(_a==undefined){return;}var _b=_a.toString();if(_b!="about:blank"&&_b.match(/http:\/\/|file:\/\/|https:\/\//gi)==null){_b="http://"+_b;}this._setupurl=_b;this._p_setupurl=_a;this.on_apply_setupurl();};_pWebView.set_useurlhistory=function(_a){this._p_useurlhistory=nexacro._toBoolean(_a);};_pWebView.set_accessibilityleavemessage=function(_a){this._p_accessibilityleavemessage=_a;this._on_apply_accessibilityleavemessage();};_pWebView.on_apply_url=function(){if(this._url==="http://"||this._url==="file://"||this._url==="https://"||this._url===""){return;}var _a=this._ifrm_elem;if(_a){_a._setUrl(this._url,this._p_useurlhistory);}};_pWebView.on_apply_setupurl=function(){if(this._setupurl==="http://"||this._setupurl==="file://"||this._setupurl==="https://"||this._setupurl===""){return;}var _a=this._ifrm_elem;if(_a){_a._setInstallUrl(this._setupurl);}};_pWebView.on_apply_accessibility=function(){nexacro.Component.prototype.on_apply_accessibility.call(this);this._on_apply_accessibilityleavemessage();};_pWebView.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(this._ifrm_elem){this._ifrm_elem.setElementEnable(_a);}};_pWebView._properties=[{name:"text"},{name:"enable"},{name:"visible"},{name:"cookiesynctype"},{name:"url"},{name:"setupurl"},{name:"useurlhistory"},{name:"accessibilityleavemessage"}];nexacro._defineProperties(_pWebView,_pWebView._properties);_pWebView.reload=function(){var _a=this._ifrm_elem;if(_a){if(this._isCrossDomain(this._current_url)){var _b=this._url;_a._setUrl("");_a._setUrl(_b);}else{_a._setGo();}}};_pWebView.goBack=function(){var _a=this._ifrm_elem;if(_a){if(!this._isCrossDomain(this._current_url)){return _a._setBack();}}};_pWebView.goForward=function(){var _a=this._ifrm_elem;if(_a){if(!this._isCrossDomain(this._current_url)){return _a._setForward();}}};_pWebView.on_load_handler=function(_a){if(this._current_url!=_a){this._current_url=_a;}this._current_url=_a;this.document=this._ifrm_elem._getDoc();if(_a!="about:blank"){this.on_fire_onloadcompleted(this,_a==""?this._p_url:_a);}};_pWebView.callScript=function(_a){var _b=this._ifrm_elem;if(_b){{return nexacro._WebViewPluginElement.prototype.injectScript.apply(_b,arguments);}}};_pWebView.callScriptAsync=function(_a){var _b;var _c=this._ifrm_elem;if(_c){if(!this._isCrossDomain(this._current_url)||this._current_url==""){_b=nexacro._WebViewPluginElement.prototype.injectScriptAndReturnPromise.apply(_c,arguments);}}if(!_b||!(_b instanceof Promise)){_b=new Promise(function(_d,_e){_e("Failed to execute method 'callscript' on WebView.");});}return _b;};_pWebView.addScriptOnDocumentCreated=function(){};_pWebView.removeScriptOnDocumentCreated=function(){};_pWebView.clearScriptOnDocumentCreated=function(){};_pWebView.addEventHandler=function(_a,_b,_c){if(_a in this._event_list==false){this._event_list[_a]=1;}return nexacro.Component.prototype.addEventHandler.call(this,_a,_b,_c);};_pWebView.removeEventHandler=function(_a,_b,_c){return nexacro.Component.prototype.removeEventHandler.call(this,_a,_b,_c);};_pWebView._isCrossDomain=function(_a){if(_a==""){return true;}var _b=this._getRootForm();var _c=_b._getRefFormBaseUrl();if(_c.match(/^(file):\/\//)){return false;}if(nexacro._isSameOrigin(_a,_c)){return false;}return true;};_pWebView._on_apply_accessibilityleavemessage=function(){var _a=this._p_accessibilityleavemessage;if(_a){var _b=this._ifrm_elem;if(_b){_b._setElementLeaveMessage(_a);}}};_pWebView.updateWindow=function(){var _a=this._ifrm_elem;if(_a){_a.updateWindow();}};delete _pWebView;}if(!nexacro.CheckBoxSet){nexacro.CheckBoxSet=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._selectinfo={index:-1,text:"",value:undefined,obj:null};this._scroll_vpos_queue=[];this._select_multi={"items":[],"map":{},"keys":[],"length":0,"lastselected":null};this._selectinfo_list=[];this._items=[];this._buffer_pages=[];this._initInnerdatasetInfo();};var _pCheckBoxSet=nexacro._createPrototype(nexacro.Component,nexacro.CheckBoxSet);nexacro.CheckBoxSet.prototype=_pCheckBoxSet;_pCheckBoxSet._type_name="CheckBoxSet";_pCheckBoxSet._text_elem=null;_pCheckBoxSet._temp_item=null;_pCheckBoxSet._p_codecolumn="";_pCheckBoxSet._p_columncount=0;_pCheckBoxSet._p_datacolumn="";_pCheckBoxSet._p_direction="horizontal";_pCheckBoxSet._p_index="-1";_pCheckBoxSet._p_innerdataset=null;_pCheckBoxSet._p_rowcount=0;_pCheckBoxSet._p_readonly=false;_pCheckBoxSet._p_readonlycolumn="";_pCheckBoxSet._p_value=undefined;_pCheckBoxSet._p_text="";_pCheckBoxSet._p_textseparator=",";_pCheckBoxSet._p_acceptvaluetype="allowinvalid";_pCheckBoxSet._innerdataset=null;_pCheckBoxSet._contents_maxwidth=0;_pCheckBoxSet._contents_maxheight=0;_pCheckBoxSet._page_rowcount=0;_pCheckBoxSet._page_rowcount_min=0;_pCheckBoxSet._shiftKey=false;_pCheckBoxSet._ctrlKey=false;_pCheckBoxSet._altKey=false;_pCheckBoxSet._lbtnDownIdx=-1;_pCheckBoxSet._want_tab=false;_pCheckBoxSet._want_arrow=true;_pCheckBoxSet._shift_select_base_index=null;_pCheckBoxSet._is_shift_first_pressed=true;_pCheckBoxSet._is_first_focus=false;_pCheckBoxSet._calc_scroll=false;_pCheckBoxSet._cnt_resetscroll=0;_pCheckBoxSet._keep_scrolling=false;_pCheckBoxSet._is_listtype=true;_pCheckBoxSet._touch_scrolling=false;_pCheckBoxSet._overeditemindex=-1;_pCheckBoxSet._use_readonly_status=true;_pCheckBoxSet._accessibility_index=-1;_pCheckBoxSet._p_accessibilityrole="checkboxset";_pCheckBoxSet._p_accessibilityaction="";_pCheckBoxSet._p_accessibilitydesclevel="all";_pCheckBoxSet._p_accessibilitydescription="";_pCheckBoxSet._p_accessibilityenable=true;_pCheckBoxSet._p_accessibilitylabel="";_pCheckBoxSet.itemaccessibility=null;_pCheckBoxSet._p_itemaccessibilityrole="checkboxsetitem";_pCheckBoxSet._p_itemaccessibilityenable=true;_pCheckBoxSet._p_itemaccessibilitylabel="";_pCheckBoxSet._p_itemaccessibilitydescription="";_pCheckBoxSet._p_itemaccessibilityaction="";_pCheckBoxSet._p_itemaccessibilitydesclevel="all";_pCheckBoxSet._event_list={"onclick":1,"ondblclick":1,"onkeypress":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onlongpress":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"onrbuttondown":1,"onrbuttonup":1,"onitemclick":1,"onitemdblclick":1,"canitemchange":1,"onitemchanged":1,"oninnerdatachanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"onitemmouseenter":1,"onvscroll":1,"onhscroll":1,"onmousedown":1,"onmouseup":1,"onmousewheel":1};_pCheckBoxSet.on_create_contents=function(){var _a=this.getElement();if(_a){if(!this._p_innerdataset){this._createCheckBoxSetTextElement();}else{this._redrawCheckBoxSetItem();}if(this._p_fittocontents!="none"){this._on_apply_fittocontents();}}};_pCheckBoxSet.on_created_contents=function(_a){if(!this._innerdataset&&this._p_innerdataset){this._setInnerDatasetStr(this._p_innerdataset);}if(this._p_fittocontents!="none"){this._update_position();}var _b=this._text_elem;if(_b){_b.create(_a);}var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].on_created(_a);}if(nexacro._enableaccessibility){this.on_apply_prop_accessibilitylabel();this.on_apply_prop_itemaccessibilityenable();}};_pCheckBoxSet.on_destroy_contents=function(){this._destroyCheckBoxSetTextElement();this._destroyCheckBoxSetItemControl();this._removeEventHandlerToInnerDataset();this._selectinfo=null;this._select_multi=null;this._selectinfo_list.length=0;this._scroll_vpos_queue=null;};_pCheckBoxSet._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onload",this._on_dataset_onload,this);this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);this._innerdataset=null;}};_pCheckBoxSet.on_create_contents_command=function(){if(!this._innerdataset&&this._p_innerdataset){this._setInnerDatasetStr(this._p_innerdataset);}var _a="";var _b=this._text_elem;if(_b){_a+=_b.createCommand();}var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_a+=_c[_e].createCommand();}return _a;};_pCheckBoxSet.on_attach_contents_handle=function(_a){var _b=this._text_elem;if(_b){_b.attachHandle(_a);}var _c=this._items;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){_c[_e].attachHandle(_a);}if(this._p_fittocontents!="none"){this._update_position();}if(nexacro._enableaccessibility){this.on_apply_prop_accessibilitylabel();this.on_apply_prop_itemaccessibilityenable();}};_pCheckBoxSet.on_change_containerRect=function(_a,_b){if(this._is_created_contents){var _c=this._text_elem;if(_c){_c.setElementSize(_a,_b);}else{this._recalcLayout();}}};_pCheckBoxSet.on_change_containerPos=function(){};_pCheckBoxSet.on_getBindableProperties=function(){return "value";};_pCheckBoxSet.on_killfocus_basic_action=function(){nexacro.Component.prototype.on_killfocus_basic_action.call(this);if(nexacro._enableaccessibility){var _a=this._accessibility_index;var _b=this._getItem(_a);if(_b){_b._changeStatus("mouseover",false);}}};_pCheckBoxSet.on_apply_prop_enable=function(_a){var _b=this._getContentsItem();if(_b){var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d]._setEnable(_a);}}};_pCheckBoxSet.on_apply_prop_cssclass=function(){var _a=this._getContentsItem();var _b=_a.length;for(var _c=0;_c<_b;_c++ ){_a[_c].on_apply_cssclass();}};_pCheckBoxSet.on_init_bindSource=function(_a,_b,_c){if(this._is_created&&this._is_subcontrol){this._redrawListBoxContents(true);this._onRecalcScrollSize();}if(_b=="value"){this.set_value(undefined);}};_pCheckBoxSet.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){var _e=_b.getColumn(_c,_d);_e=this._convertValueType(_e,true);_b=this._innerdataset;var _f=this._p_codecolumn;var _g=this._p_datacolumn==""?_f:this._p_datacolumn;var _h=nexacro.getEnvironment();var _i=_h.multivalueseparator?_h.multivalueseparator:",";var _j=this._p_textseparator;var _k=_e?_e.split(_i):_e;var _l,_m,_n,_o;if(_b&&_f){if(_k==undefined){_n=_k;if(this._p_value!=_n){_l="-1";_m="";this._setIndex(_l);this._setText(_m);this._setValue(_n);this._doSelect(-1,false,true);}}else{var _p=[];for(_o=0;_o<_k.length;_o++ ){_n=_k[_o];_l=_b.findRow(_f,_n);if(_l>-1){_m=_b.getColumn(_l,_g);_p.push(_l);if(_o==0){this._p_index=_l.toString();this._p_text=_m;this._p_value=_n;}else{this._p_index+=","+_l;this._p_text+=_j+_m;this._p_value+=_i+_n;}}}this._doSelect(_p,false,true);}}}};_pCheckBoxSet._getDlgCode=function(_a,_b,_c,_d){var _e,_f;var _g=this.hscrollbar;var _h=this.vscrollbar;if(_a&&(_a==nexacro.Event.KEY_TAB)){_e=this._want_tab;}else{_f=this._want_arrow;}if(nexacro._enableaccessibility){this._want_arrow=true;}if(this._is_first_focus){this._is_first_focus=false;}if(_c){if(_a==nexacro.Event.KEY_LEFT){if(_g){_f=_g.pos>_g.min?true:false;}else{_f=false;}}else if(_a==nexacro.Event.KEY_UP){if(_h){_f=_h.pos>_h.min?true:false;}else{_f=false;}}else if(_a==nexacro.Event.KEY_RIGHT){if(_g){_f=_g.pos<_g.max?true:false;}else{_f=false;}}else if(_a==nexacro.Event.KEY_DOWN){if(_h){_f=_h.pos<_h.max?true:false;}else{_f=false;}}}return {want_tab:_e,want_return:false,want_escape:false,want_chars:false,want_arrows:_f};};_pCheckBoxSet._setFocus=function(_a,_b,_c){this._focus_direction=_b;var _d=this.setFocus(_a,_c);this._focus_direction=-1;return _d;};_pCheckBoxSet._on_focus=function(_a,_b,_c,_d,_e,_f){var _g=false;var _h=this._focus_direction;if(_b=="tabkey"){_h=0;}else if(_b=="shifttabkey"){_h=1;}else if(_b=="downkey"){_h=2;}else if(_b=="upkey"){_h=3;}if(_a===false){this._focus_direction=-1;this._want_arrow=true;}if(_h>=0){_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(_a==false){if(this._last_focused){this._do_defocus(this._last_focused,false);}var _i,_j;var _k=this._getInnerdatasetInfo("_rowcount");if(nexacro._enableaccessibility){this._accessibility_index=-1;if(_k){if(_h<2){if(_h===0){this._accessibility_index=0;}else{this._accessibility_index=_k -1;}this._is_first_focus=true;this._refreshScroll(this._accessibility_index,_h);_j=this._getItem(this._accessibility_index);if(_j){_j._on_focus(true);}}else{if(_h==2){this._is_first_focus=true;if(!this._isAccessibilityEnable()){this._accessibility_index=0;_i=this._getItem(this._accessibility_index);if(_i){_i._on_focus(true);}}else{this._accessibility_index=-1;}}else if(_h==3){this._is_first_focus=true;this._accessibility_index=_k -1;_i=this._getItem(this._accessibility_index);if(_i){_i._on_focus(true);}}}}this._shift_select_base_index=this._accessibility_index;}}}else{_g=nexacro.Component.prototype._on_focus.call(this,_a,_b,_c,_d,_e,_f);if(this._last_focused){this._do_defocus(this._last_focused,false);}else if(this._select_multi.lastselected===undefined&&this._accessibility_index>-1){this._getItem(this._accessibility_index)._changeStatus("focused",false);}}return _g;};_pCheckBoxSet._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=this._innerdataset;var _g=this._items;var _h=_g.length;if(_f&&_h){var _i=this._p_direction;var _j;var _k=this._p_columncount;var _l=this._p_rowcount;var _m=_f.getRowCount();var _n=1;var _o=_m;var _p,_q;var _r;var _s=0;if((_k==-1&&_l==0)||(_k==-1&&_l==-1&&_i=="horizontal")){for(_p=0;_p<_h;_p++ ){_r=_g[_p]._on_getFitSize();if(_i=="horizontal"){_c=Math.max(_c,_r[1]);_b+=_r[0];}else{_c+=_r[1];_b=Math.max(_b,_r[0]);}}}else if((_k==0&&_l==-1)||(_k==-1&&_l==-1&&_i=="vertical")){for(_p=0;_p<_h;_p++ ){_r=_g[_p]._on_getFitSize();if(_i=="horizontal"){_c+=_r[1];_b=Math.max(_b,_r[0]);}else{_c=Math.max(_c,_r[1]);_b+=_r[0];}}}else{if(_i=="horizontal"){_j="col";if(_k>0){_n=_k;}else if((_k==0&&_l==0)||(_k<0&&_l<0)){_n=_o;}else if(_k==0&&_l==_m){_n=1;}else if(_k<0&&(_k<_l)&&(_l>1)){_n=Math.ceil(_o/_l);}else if(_l>0){_n=Math.ceil(_m/_l);if((_n* _l)<_m){_n++ ;}}else{_n=_m;}if(_n>_m){_n=_m;}_o=parseInt(_m/_n)|0;if((_m>_n)&&(_m%_n)>0){_o++ ;}}else{if(_l>0){_o=_l;_j="row";}else if((_k==0&&_l==0)||(_k<0&&_l<0)){_n=1;_j="col";}else if(_k>0){_o=parseInt(_m/_k);if((_k* _o)<_m){_o++ ;}_j="row";}else{_o=1;_j="row";}if(_o>0){_n=parseInt(_m/_o)|0;}else{_j="col";_n=_k;}if(_n<=0){_n=1;}if(_j=="row"&&(_m>_o)&&(_m%_o)>0){_n++ ;}}var _t=[];for(_p=0;_p<_n;_p++ ){_t[_p]=0;}if(_j=="col"){for(_p=0;_p<_o;_p++ ){for(_q=0;_q<_n;_q++ ){if(_m<=_s){break;}_r=_g[_s]._on_getFitSize();if(_t[_q]<_r[0]){_t[_q]=_r[0];}_s++ ;}}}else{for(_p=0;_p<_n;_p++ ){for(_q=0;_q<_o;_q++ ){if(_m<=_s){break;}_r=_g[_s]._on_getFitSize();if(_t[_p]<_r[0]){_t[_p]=_r[0];}_s++ ;}}}for(_p=0;_p<_n;_p++ ){_b+=_t[_p];}if(_r){_c+=_r[1]* _o;}}}return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pCheckBoxSet.on_get_accessibility_label=function(){var _a="";if(!this._is_first_focus){_a=this._p_text?this._p_text:this._p_value;}return _a?_a:"";};_pCheckBoxSet.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this._redrawCheckBoxSetItem();};_pCheckBoxSet.set_text=nexacro._emptyFn;_pCheckBoxSet._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pCheckBoxSet.set_value=function(_a){if(!nexacro._isString(_a)&&_a!=undefined){return;}var _b=_a;if(_b==undefined){this._p_value=undefined;}else{var _c=nexacro.getEnvironment();var _d=_c.multivalueseparator?_c.multivalueseparator:",";_b=_b.split(_d);if(this._p_acceptvaluetype=="ignoreinvalid"){var _e=this._innerdataset;var _f=this._p_codecolumn||this._p_datacolumn;if(_e){_b=_b.filter(function(_g,_h){return _e.findRow(_f,_g)>-1&&_b.indexOf(_g)===_h;});if(_b.length==0){return;}}}this._p_value=_b.join(_d);}this._change_by_script=true;this.on_apply_value(_b);this._change_by_script=false;};_pCheckBoxSet.on_apply_value=function(_a){var _b="";var _c="";var _d=this._innerdataset;var _e=this._p_codecolumn||this._p_datacolumn;var _f=this._p_datacolumn||_e;if(_d&&_e){var _g,_h,_i=[];var _j=nexacro.getEnvironment();var _k=_j.multivalueseparator?_j.multivalueseparator:",";var _l=this._p_textseparator;if(_a==undefined){_g=_d.findRow(_e,_a);if(_g>-1){_h=_d.getColumn(_g,_f);}this._setIndex(_g);this._setText(_h);this._doSelect(_g,false,true);}else{if(!nexacro._isArray(_a)){_a=_a.split(_k);}for(var _m=0;_m<_a.length;_m++ ){_g=_d.findRow(_e,_a[_m]).toString();if(_g>-1){_h=_d.getColumn(_g,_f);if(_m==0){_b=_g;_c=_h;}else{_b+=","+_g;_c+=_l+_h;}_i.push(_g);}}this._setIndex(_b);this._setText(_c);this._doSelect(_i,false,true);}if(!this.applyto_bindSource("value",this._p_value)){return;}}};_pCheckBoxSet.set_index=function(_a){if(!nexacro._isString(_a)||_a.length==0){return;}var _b=_a.replace(/\s+/g,"");if(_b=="-1"){this._p_index="-1";}else{_b=_b.split(",").map(function(_d){return  +_d;});var _c=this._innerdataset;if(_c){_b=_b.filter(function(_d,_e){return _d>-1&&_d<_c.getRowCount()&&!isNaN(_d)&&_b.indexOf(_d)==_e;});}if(_b.length==0){return;}this._p_index=_b.join(",");}this._change_by_script=true;this.on_apply_index(_b);this._change_by_script=false;};_pCheckBoxSet.on_apply_index=function(_a){var _b="";var _c="";var _d=this._innerdataset;var _e=this._p_codecolumn||this._p_datacolumn;var _f=this._p_datacolumn||_e;if(_d&&_e){var _g,_h;var _i=nexacro.getEnvironment();var _j=_i.multivalueseparator?_i.multivalueseparator:",";var _k=this._p_textseparator;if(_a=="-1"){this._p_text="";this._p_value=undefined;this._select_clear(true);}else{if(!nexacro._isArray(_a)){_a=_a.split(",");}for(var _l=0;_l<_a.length;_l++ ){_g=_d.getColumn(_a[_l],_e);_h=_d.getColumn(_a[_l],_f);if(_l==0){_c=_h;_b=_g;}else{_c+=_k+_h;_b+=_j+_g;}}this._setValue(_b);this._setText(_c);this._doSelect(_a,false,true);}if(!this.applyto_bindSource("value",this._p_value)){return;}}};_pCheckBoxSet.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(this._p_innerdataset!=_a||(this._p_innerdataset&&!this._innerdataset)){this._setInnerDatasetStr(_a);this.on_apply_innerdataset(this._innerdataset);}};_pCheckBoxSet.on_apply_innerdataset=function(_a){if(_a){_a._setEventHandler("onload",this._on_dataset_onload,this);_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);}this._parseInnerDataset();var _b=this.getElement();if(_b){if(!this._is_subcontrol){this._destroyCheckBoxSetItemControl();if(_a){this._redrawCheckBoxSetItem();}else{this._createCheckBoxSetTextElement();}}else{this._redrawListBoxContents(!this._keep_scrolling);this._onRecalcScrollSize();}}};_pCheckBoxSet.set_codecolumn=function(_a){if(this._p_codecolumn!=_a){this._p_codecolumn=_a;this.on_apply_codecolumn(_a);}};_pCheckBoxSet.on_apply_codecolumn=function(_a){var _b=this.getElement();var _c=this._innerdataset;if(_b&&_c){this.on_apply_index(this._p_index);if(!this._p_datacolumn){this.on_apply_datacolumn(this._p_datacolumn);}this._updateItemInfo();}};_pCheckBoxSet.set_datacolumn=function(_a){if(this._p_datacolumn!=_a){this._p_datacolumn=_a;this.on_apply_datacolumn(_a);}};_pCheckBoxSet.on_apply_datacolumn=function(_a){var _b=this.getElement();var _c=this._innerdataset;if(_b&&_c){var _d;var _e=[];var _f=_a==""?this._p_codecolumn:_a;var _g,_h;var _i=this._items;for(_g=0,_h=_i.length;_g<_h;_g++ ){_d=_c.getColumn(_g,_f);if(_d){_i[_g].set_text(_d);}else{_i[_g].set_text("");}}if(this._select_multi&&this._select_multi.length>0){var _e=[];var _j=this._select_multi.items;var _k=this._select_multi.length;for(_g=0;_g<_k;_g++ ){_d=_c.getColumn(_j[_g],_f);_e.push(_d);}this._setText(_e);}this._updateItemInfo();}};_pCheckBoxSet.set_readonlycolumn=function(_a){if(this._p_readonlycolumn!=_a){this._p_readonlycolumn=_a?_a:"";this.on_apply_readonlycolumn(this._p_readonlycolumn);}};_pCheckBoxSet.on_apply_readonlycolumn=function(_a){var _b=this.getElement();var _c=this._innerdataset;var _d;if(_b&&_c){var _e=this._getContentsItem();var _f=_e.length;for(var _g=0;_g<_f;_g++ ){_d=this._p_readonly?this._p_readonly:_c.getColumn(_g,_a);_e[_g].set_readonly(_d);}}};_pCheckBoxSet.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);this._setAccessibilityFlagReadOnly(_a);}};_pCheckBoxSet.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this._innerdataset;var _c=this._p_readonlycolumn;var _d;var _e=this._getContentsItem();var _f=_e.length;for(var _g=0;_g<_f;_g++ ){_d=!_b||_a?_a:_b.getColumn(_g,_c);_e[_g].set_readonly(_d);}};_pCheckBoxSet.set_itemheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_itemheight!=_a){this._p_itemheight=_a;this.on_apply_itemheight(_a);}};_pCheckBoxSet.on_apply_itemheight=function(_a){var _b=this.getElement();if(_b){this._redrawListBoxContents(false);this._onRecalcScrollSize();}};_pCheckBoxSet.set_itemaccessibilityrole=function(_a){if(_a){this._p_itemaccessibilityrole=_a;this.on_apply_itemaccessibilityrole(_a);}else{this._p_itemaccessibilityrole="";this.on_apply_itemaccessibilityrole(" ");}};_pCheckBoxSet.on_apply_itemaccessibilityrole=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityrole(_a?_a:this._p_itemaccessibilityrole);}};_pCheckBoxSet.set_itemaccessibilitylabel=function(_a){if(_a){this._p_itemaccessibilitylabel=_a;this.on_apply_itemaccessibilitylabel(_a);}else{this._p_itemaccessibilitylabel="";this.on_apply_itemaccessibilitylabel(" ");}};_pCheckBoxSet.on_apply_itemaccessibilitylabel=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitylabel(_a?_a:this._p_itemaccessibilitylabel);}};_pCheckBoxSet.set_itemaccessibilityenable=function(_a){if(_a){this._p_itemaccessibilityenable=_a;this.on_apply_itemaccessibilityenable(_a);}else{this._p_itemaccessibilityenable=true;this.on_apply_itemaccessibilityenable(true);}};_pCheckBoxSet.on_apply_itemaccessibilityenable=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityenable(_a?_a:this._p_itemaccessibilityenable);}};_pCheckBoxSet.set_itemaccessibilitydescription=function(_a){if(_a){this._p_itemaccessibilitydescription=_a;this.on_apply_itemaccessibilitydescription(_a);}else{this._p_itemaccessibilitydescription="";this.on_apply_itemaccessibilitydescription(" ");}};_pCheckBoxSet.on_apply_itemaccessibilitydescription=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitydescription(_a?_a:this._p_itemaccessibilitydescription);}};_pCheckBoxSet.set_itemaccessibilityaction=function(_a){if(_a){this._p_itemaccessibilityaction=_a;this.on_apply_itemaccessibilityaction(_a);}else{this._p_itemaccessibilityaction="";this.on_apply_itemaccessibilityaction(" ");}};_pCheckBoxSet.on_apply_itemaccessibilityaction=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilityaction(_a?_a:this._p_itemaccessibilityaction);}};_pCheckBoxSet.set_itemaccessibilitydesclevel=function(_a){if(_a){this._p_itemaccessibilitydesclevel=_a;this.on_apply_itemaccessibilitydesclevel(_a);}else{this._p_itemaccessibilitydesclevel="";this.on_apply_itemaccessibilitydesclevel(" ");}};_pCheckBoxSet.on_apply_itemaccessibilitydesclevel=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].set_accessibilitydesclevel(_a?_a:this._p_itemaccessibilitydesclevel);}};_pCheckBoxSet.set_acceptvaluetype=function(_a){var _b=["allowinvalid","ignoreinvalid"];if(_b.indexOf(_a)==-1){return;}this._p_acceptvaluetype=_a;};_pCheckBoxSet.set_columncount=function(_a){if(isNaN(_a= +_a)||_a<-1){return;}if(this._p_columncount!=_a){this._p_columncount=_a;this.on_apply_columncount(_a);}};_pCheckBoxSet.on_apply_columncount=function(){this._recalcLayout();};_pCheckBoxSet.set_rowcount=function(_a){if(isNaN(_a= +_a)||_a<-1){return;}if(this._p_rowcount!=_a){this._p_rowcount=_a;this.on_apply_rowcount(_a);}};_pCheckBoxSet.on_apply_rowcount=function(){this._recalcLayout();};_pCheckBoxSet.set_direction=function(_a){var _b=["horizontal","vertical"];if(_b.indexOf(_a)==-1){return;}if(this._p_direction!=_a){this._p_direction=_a;this.on_apply_direction(_a);}};_pCheckBoxSet.on_apply_direction=function(){this._recalcLayout();};_pCheckBoxSet.set_textseparator=function(_a){if(this._p_textseparator!=_a){if(_a==""||_a==undefined){this._p_textseparator=",";}else{this._p_textseparator=nexacro._toString(_a);}this.on_apply_textseparator();}};_pCheckBoxSet.on_apply_textseparator=function(){var _a=this._innerdataset;var _b=this._p_datacolumn||this._p_codecolumn;if(_a&&_b){var _c=this._select_multi.items;var _d=_c.length;if(_d>0){var _e="";for(var _f=0;_f<_d;_f++ ){if(_f==0){_e+=_a.getColumn(_c[_f],this._p_datacolumn||this._p_codecolumn);}else{_e+=this._p_textseparator+_a.getColumn(_c[_f],this._p_datacolumn||this._p_codecolumn);}}this._setText(_e);}}};_pCheckBoxSet._properties=[{name:"itemheight"},{name:"columncount"},{name:"codecolumn"},{name:"datacolumn"},{name:"direction"},{name:"index"},{name:"innerdataset"},{name:"rowcount"},{name:"readonly"},{name:"readonlycolumn"},{name:"value"},{name:"text"},{name:"textseparator"},{name:"locale"},{name:"backgroundcolumn"},{name:"bordercolumn"},{name:"datecolumn"},{name:"textcolorcolumn"},{name:"acceptvaluetype"},{name:"multiselect"},{name:"accessibilityrole"},{name:"accessibilityaction"},{name:"accessibilitydesclevel"},{name:"accessibilitydescription"},{name:"accessibilityenable"},{name:"accessibilitylabel"},{name:"itemaccessibility"},{name:"itemaccessibilityrole"},{name:"itemaccessibilityenable"},{name:"itemaccessibilitylabel"},{name:"itemaccessibilitydescription"},{name:"itemaccessibilityaction"},{name:"itemaccessibilitydesclevel"}];nexacro._defineProperties(_pCheckBoxSet,_pCheckBoxSet._properties);_pCheckBoxSet.getCount=function(){return this._getInnerdatasetInfo("_rowcount");};_pCheckBoxSet.getSelectedCount=function(){return this._select_multi.length;};_pCheckBoxSet.getSelect=function(_a){if(_a<0||_a>=this.getCount()||isNaN(_a)){return -1;}var _b=this._select_multi.items;var _c=this._select_multi.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d]==_a){return true;}}return false;};_pCheckBoxSet.getSelectedItems=function(){if(this._select_multi&&this._select_multi.length>0){var _a=this._select_multi.items;var _b=[];for(var _c=0,_d=_a.length;_c<_d;_c++ ){_b[_c]=_a[_c];}_b.sort(function(_e,_f){return _e-_f;});return _b;}else{return [];}};_pCheckBoxSet.clearSelect=function(){if(this._select_multi&&this._select_multi.length>0){this._change_by_script=true;this._select_clear();this._change_by_script=false;}};_pCheckBoxSet.redraw=function(){this._redrawListBoxContents(true);this._onRecalcScrollSize();};_pCheckBoxSet.setSelect=function(_a,_b){_b=nexacro._toBoolean(_b);_a=parseInt(_a)|0;this._change_by_script=true;if(_a>=0){var _c=this._getItem(_a);if(_c){if(_c.readonly){return;}_c.set_selected(_b);}if(_b==true){this._select_add(_a);}else{this._select_remove(_a);}}else{this._select_clear();}this._change_by_script=false;};_pCheckBoxSet.updateToDataset=function(){return this.applyto_bindSource("value",this._p_value);};_pCheckBoxSet.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";this.on_apply_innerdataset(this._innerdataset);}else if(_a instanceof nexacro.Dataset||(typeof _a=="object"&&_a._type_name=="Dataset")){this._innerdataset=_a;this._p_innerdataset=_a.id;this._keep_scrolling=(this._p_innerdataset!=_a.id)?false:true;this.on_apply_innerdataset(this._innerdataset);}};_pCheckBoxSet.getInnerDataset=function(){return this._innerdataset;};_pCheckBoxSet.selectAll=function(){var _a=this._innerdataset.rowcount;if(_a<=this._select_multi.length){return;}this._change_by_script=true;this._select_all();this._change_by_script=false;};_pCheckBoxSet.setSelectRange=function(_a,_b,_c){_c=nexacro._toBoolean(_c);_a=parseInt(_a)|0;_b=parseInt(_b)|0;var _d;var _e=[];var _f=this._items;if(_a>_b){for(_d=_a;_b<=_d;_d-- ){if(_f[_d]&&_f[_d].readonly==false){_e.push(_d);}}}else{for(_d=_a;_d<=_b;_d++ ){if(_f[_d]&&_f[_d].readonly==false){_e.push(_d);}}}this._change_by_script=true;if(_c==true){this._do_select(_e,true,true);this._insertIndex(_e);}else{this._do_deselect(_e,true);this._removeindex(_e);}this._change_by_script=false;};_pCheckBoxSet.setSelectItems=function(_a,_b){_b=nexacro._toBoolean(_b);var _c;var _d=[];var _e=this._innerdataset.rowcount;var _f=this._items;for(_c=0;_c<_a.length;_c++ ){if(_a[_c]>=_e||_a[_c]<0){continue;}if(_f[_a[_c]].readonly==false){_d.push(_a[_c]);}}this._change_by_script=true;if(_b==true){this._do_select(_d,true,true);this._insertIndex(_d);}else{this._do_deselect(_d,true);this._removeindex(_d);}this._change_by_script=false;};_pCheckBoxSet._on_dataset_onload=function(_a,_b){if(_b.reason==0){if(!this._is_subcontrol){this._redrawCheckBoxSetItem();}else{this._redrawListBoxContents(true);this._onRecalcScrollSize();}}};_pCheckBoxSet._on_dataset_onvaluechanged=function(_a,_b){this._parseInnerDataset();if(this._is_created){if(!this._is_subcontrol){this._redrawCheckBoxSetItem();}else{this._redrawListBoxContents(true);this._onRecalcScrollSize();}this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pCheckBoxSet._on_dataset_onrowsetchanged=function(_a,_b){this._parseInnerDataset();if(this._is_created){if(!this._is_subcontrol){this._redrawCheckBoxSetItem();}else{this._redrawListBoxContents(true);this._onRecalcScrollSize();}}};_pCheckBoxSet._on_item_onlbuttondown=function(_a,_b){if(_a.readonly){return false;}if(nexacro._enableaccessibility){if(this._accessibility_index>-1){var _c=this._getItem(this._accessibility_index);if(_c._status=="focused"){_c._changeStatus("focused",false);}}}var _d=this._statusmap?this._statusmap['focused']:false;_a._changeUserStatus("selected",true);if(_d){_a._changeStatus("focused",true);}this._shiftKey=_b.shiftkey;this._ctrlKey=_b.ctrlkey;this._altKey=_b.altkey;this._selectinfo.obj=_a;this._selectinfo.index=_a.index;this._selectinfo.text=_a.text;this._selectinfo.value=_a.value;if(nexacro._isTouchInteraction){this._selectinfo_list[this._selectinfo_list.length]=this._selectinfo;}this._lbtnDownIdx=_a.index;};_pCheckBoxSet._on_item_ondblclick=function(_a,_b){if(this._p_readonly||!this._p_enableevent){return false;}return this.on_fire_onitemdblclick(this,this._p_index,this._p_text,this._p_value,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty);};_pCheckBoxSet._on_beforescroll=function(_a,_b,_c,_d,_e,_f){if(_e=="trackstart"||_e=="tracklastover"||_e=="trackfirstover"){return true;}if(nexacro._Browser=="Runtime"||(navigator.userAgent.indexOf("Android 4.1")>-1||navigator.userAgent.indexOf("Android 4.2")>-1||navigator.userAgent.indexOf("Android 4.3")>-1)){this._adjustScrollRows_callback(true,_d);}else{if(_f=="fling"||_f=="slide"||_e=="track"){if(!this._aniframe_rowscroll){var _g=this;this._scroll_vpos_queue=[];this._aniframe_rowscroll=new nexacro.AnimationFrame(this,function(){_g._adjustScrollRows_callback();});}var _h=this._scroll_vpos_queue.push(_d);if(_h==1){this._aniframe_rowscroll.start();}}else{this._adjustScrollRows_callback(true,_d);}}return true;};_pCheckBoxSet._adjustScrollRows_callback=function(_a,_b){if(_b==undefined){_b=this.vscrollbar?this.vscrollbar._pos:0;}if(_a){this._scroll_vpos_queue=[];}else{this._scroll_vpos_queue.pop();if(this._scroll_vpos_queue.length>0){this._aniframe_rowscroll.start();}}var _c=this._getItemHeight();var _d=this._getInnerdatasetInfo("_rowcount");var _e=_c?Math.floor(_b/_c):0;var _f=_e+this._page_rowcount;if(_f>=_d){_f=_d -1;}if(this._touch_scrolling){this._createListBoxContents(_e,_f,true);this._control_element.setElementVScrollPos(_b);}else{this._createListBoxContents(_e,_f);this._control_element.setElementVScrollPos(_b);}};_pCheckBoxSet._setVScrollDefaultAction=function(_a){if(this.scrolltype=="none"||this.scrolltype=="horizontal"){return false;}var _b=this.getElement();if(_b){var _c=this._getItemHeight();var _d=this._vscroll_pos;var _e=_d+_c;if(_a>0){_e=_d-_c;if(_e<0){_e=0;}}if(_e>_b.vscroll_limit){_e=_b.vscroll_limit;}this._scrollTo(this._hscroll_pos,_e,true,true,undefined,"mousewheel_v");if(_d!=this._vscroll_pos){return true;}}return false;};_pCheckBoxSet.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){if(nexacro._enableaccessibility){var _h;var _i=this._accessibility_index;var _j=this._getInnerdatasetInfo("_rowcount");if(_a==nexacro.Event.KEY_UP){if(_i<0){this._want_arrow=false;}else{this._accessibility_index=_i+=-1;this._refreshScroll(_i,_d?1:0);_h=this._getItem(_i);if(_h){_h._on_focus(true);}else{if(_i==-1){if(this._isAccessibilityEnable()){var _k=this._last_focused;if(_k){this._do_defocus(_k,true);}else{this._do_defocus(this);}this._on_focus(true);}else{this._want_arrow=false;}}}}}else if(_a==nexacro.Event.KEY_DOWN){if((_i+1)>=_j){this._want_arrow=false;}else{this._accessibility_index=_i+=1;this._refreshScroll(_i,_d?1:0);_h=this._getItem(_i);if(_h){_h._on_focus(true);}}}else if(_a==nexacro.Event.KEY_PAGE_UP){if(_i<0){this._want_arrow=false;}else{_i=_i<0?0:_i;this._accessibility_index=_i-=this._page_rowcount;this._refreshScroll(_i,_d?1:0,_a);_h=this._getItem(_i);if(_h){_h._on_focus(true);}else{if(_i==-1){if(this._isAccessibilityEnable()){var _k=this._last_focused;if(_k){this._do_defocus(_k,true);}else{this._do_defocus(this);}this._on_focus(true);}else{this._want_arrow=false;}}}}}else if(_a==nexacro.Event.KEY_PAGE_DOWN){if((_i+this._page_rowcount)>_j){this._want_arrow=false;}else{_i=_i<0?0:_i;this._accessibility_index=_i+=this._page_rowcount;this._refreshScroll(_i,_d?1:0,_a);_h=this._getItem(_i);if(_h){_h._on_focus(true);}}}else if(_a==nexacro.Event.KEY_HOME){if(_i<0){this._want_arrow=false;}else{this._accessibility_index=_i=0;this._refreshScroll(_i,_d?1:0,_a);_h=this._getItem(_i);if(_h){_h._on_focus(true);}}}else if(_a==nexacro.Event.KEY_END){if((_i+this._page_rowcount)>_j){this._want_arrow=false;}else{this._accessibility_index=_i=_j -1;this._refreshScroll(_i,_d?1:0,_a);_h=this._getItem(_i);if(_h){_h._on_focus(true);}}}}return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pCheckBoxSet.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this._is_alive){return;}return nexacro.Component.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};_pCheckBoxSet.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(_l&&(_l instanceof nexacro.ScrollBarControl||(_l.parent&&_l.parent instanceof nexacro.ScrollBarControl))){return;}var _o=this._getWindow().findComponent(_m);var _p=this._selectinfo;var _q=nexacro.Component.prototype.on_fire_sys_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);var _r=_p.obj;if(_r){var _s;if(this._contains(_m)){this.on_fire_onitemclick(this,_o.index,_o.text,_o.value,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_n);if(nexacro._enableaccessibility){if(this._accessibility_index>-1){var _t=this._getItem(this._accessibility_index);if(_p.index!=this._accessibility_index&&_t&&_t._selected==true){this._deselect_all(true);_t._changeUserStatus("selected",false);}}else{if(_p){this._accessibility_index=_p.index;}}}_s=_r;var _u=_s.index;this._select_withmouseevent(_u);if(!this._shiftKey){this._shift_select_base_index=_u;}}else{if(!_r.selected){_r._changeUserStatus("selected",false);}}}return _q;};_pCheckBoxSet.on_fire_sys_onslidestart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._touch_scrolling=true;return nexacro.Component.prototype.on_fire_sys_onslidestart.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pCheckBoxSet.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){var _j=nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);if(this.selectscrollmode=="select"){if(this._innerdataset){var _k=-1;if(_c[0].target&&_c[0].target.parent){_k=_c[0].target.parent.index;}if(this._lbtnDownIdx>-1&&_k>-1){this._deselect_all(true);var _l=this._lbtnDownIdx;var _m=_k;var _n=_k;if(!nexacro._isNumber(_l)){_l=0;}if(!nexacro._isNumber(_m)){_m=this._getInnerdatasetInfo("_rowcount");}if(_l>_m){var _o=_m;_m=_l;_l=_o;_n=_o;}var _p=[];for(var _q=_l;_q<=_m;_q++ ){_p.push(_q);}this._doMultiSelect(_p,true);this._insertIndex(_n);}}return true;}return _j;};_pCheckBoxSet.on_fire_sys_onslideend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._touch_scrolling=false;return nexacro.Component.prototype.on_fire_sys_onslideend.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pCheckBoxSet.on_fire_sys_onflingstart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._touch_scrolling=true;return nexacro.Component.prototype.on_fire_sys_onflingstart.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pCheckBoxSet.on_fire_sys_onflingend=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){this._touch_scrolling=false;return nexacro.Component.prototype.on_fire_sys_onflingend.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);};_pCheckBoxSet.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this._p_readonly){return false;}if(this.onitemclick&&this.onitemclick._has_handlers){var _p=new nexacro.ItemClickEventInfo(_a,"onitemclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);var _q=this.onitemclick._fireEvent(this,_p);return nexacro._toBoolean(_q);}return false;};_pCheckBoxSet.on_fire_canitemchange=function(_a,_b,_c,_d,_e,_f,_g){if(this.canitemchange&&this.canitemchange._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"canitemchange",_b,_c,_d,_e,_f,_g);var _i=this.canitemchange._fireCheckEvent(this,_h);return nexacro._toBoolean(_i);}return true;};_pCheckBoxSet.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(!this._selectinfo){return false;}this._selectinfo.obj=null;this._selectinfo.index=_a.index;this._selectinfo.text=_a.text;this._selectinfo.value=_a.value;var _h=this._selectinfo;_h.index=_e;_h.text=_f;_h.value=_g;if(this.onitemchanged&&this.onitemchanged._has_handlers){var _i=new nexacro.ItemChangeEventInfo(this,"onitemchanged",_b,_c,_d,_e,_f,_g);var _j=this.onitemchanged._fireEvent(this,_i);return nexacro._toBoolean(_j);}return false;};_pCheckBoxSet.on_fire_onitemdblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this._p_readonly){return false;}if(this.onitemdblclick&&this.onitemdblclick._has_handlers){var _p=new nexacro.ItemClickEventInfo(_a,"onitemdblclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);var _q=this.onitemdblclick._fireEvent(this,_p);return nexacro._toBoolean(_q);}return false;};_pCheckBoxSet.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pCheckBoxSet.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=false;var _e=this._getContentsItem();if(_e&&_e.length>0){var _f=null;if(_a>0){this._overeditemindex++ ;}else{this._overeditemindex-- ;}_f=this._getItemByRealIdx(_e,this._overeditemindex).obj;if(_f){_d=true;_f._setAccessibilityNotifyEvent();}}return _d;};_pCheckBoxSet.on_keydown_basic_action=function(){};_pCheckBoxSet.on_keydown_default_action=function(_a,_b,_c,_d,_e){if(this._p_readonly){return;}var _f=this._getInnerdatasetInfo("_rowcount");if(!_f){return;}this._shiftKey=_d;this._ctrlKey=_c;this._altKey=_b;if(!this._shiftKey){}var _g;var _h=this._select_multi;this._last_keydown_keycode=_a;if(_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_LEFT){if(!nexacro._enableaccessibility){this._select_withkeyupevent(_d);_g=_h.items[_h.length-1];if(_g!=null){if(_g>-1){if(this._last_focused){this._do_defocus(this._last_focused);}}}}}else if(_a==nexacro.Event.KEY_DOWN||_a==nexacro.Event.KEY_RIGHT){if(!nexacro._enableaccessibility){this._select_withkeydownevent(_d);}}else if(_a===nexacro.Event.KEY_SPACE||_a===nexacro.Event.KEY_ENTER){var _i=this._get_rowobj_status("mouseover","status")||this._get_rowobj_status("selected","userstatus",this._select_multi.lastselected);if(_i){cur_index=_i.index;if(_i._userstatusmap.selected==true){this._do_deselect(cur_index,true);this._removeindex(cur_index);}else{this._do_select(cur_index,true,true);this._insertIndex(cur_index);}this._set_last_selectfocused(cur_index);}}};_pCheckBoxSet.on_keyup_basic_action=function(){};_pCheckBoxSet.on_keyup_default_action=function(_a,_b,_c,_d,_e){if(_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN||_a==nexacro.Event.KEY_LEFT||_a==nexacro.Event.KEY_RIGHT){var _f=this._get_rowobj_status("mouseover","status")||this._get_rowobj_status("selected","userstatus",this._select_multi.lastselected);if(_f){var _g=_f.index;if(!this._shiftKey){this._shift_select_base_index=_g;}}}else if(_a==nexacro.Event.KEY_SHIFT){this._is_shift_first_pressed=true;}};_pCheckBoxSet.on_item_onmousemove=function(_a,_b){if(this._overeditemindex>-1){var _c=this._getItem(this._overeditemindex);if(_c){_c._changeStatus("mouseover",false);}this._overeditemindex=-1;}};_pCheckBoxSet._redrawListBoxContents=function(_a){this._redrawListBoxContentsBefore();var _b=this._getInnerdatasetInfo("_rowcount");if(_b){var _c=this._getItemHeight();var _d=this._getClientHeight();var _e=_c?_d/_c:0;if(nexacro._enableaccessibility&&(nexacro._isMobile&&nexacro._isMobile())){_e=_b;}this._page_rowcount=Math.ceil(_e);this._page_rowcount_min=Math.floor(_e);var _f=0;var _g=0;if(_a){_g=_b -1;if(_g>=this._page_rowcount){_g=this._page_rowcount>0?this._page_rowcount-1:0;}}else{_f=this._get_first_visible_row();_g=this._get_last_visible_row(true);}this._recalcContentsMaxSize();this._createListBoxContents(_f,_g);if(this._p_value!==undefined){this.on_apply_value(this._p_value);}else if(this._p_index!=-1){this.on_apply_index(this._p_index);}}this._redrawListBoxContentsAfter();};_pCheckBoxSet._redrawListBoxContentsBefore=function(){this._destroyListBoxContents();};_pCheckBoxSet._redrawListBoxContentsAfter=nexacro._emptyFn;_pCheckBoxSet._createListBoxContents=function(_a,_b,_c){var _d=this._isRange(_a,_b);var _e=this._getInnerdatasetInfo("_rowcount");var _f=this._page_rowcount;var _g=this._buffer_pages;var _h,_i;var _j,_k;var _l,_m;var _n=_e -1;if(_c){switch(_d){case 0:if(_f==0){return;}if(_b==_n||(_b<_f -1)){_m=1;}else{_m=2;}for(_l=0;_l<_m;_l++ ){_i=_a+(_l* _f);if(_i+_f>_n){_f=_n-_i+1;}this._addListBoxBufferPage(_f,_i);}break;case 1:do{_h=_g[0];_j=_h[0];if(_j.index<_f){_i=0;_f=_j.index;}else{_i=_j.index-_f;}this._insertListBoxBufferPage(0,_f,_i);}while(_i>_a)break;case 2:_h=_g[_g.length-1];_k=_h[_h.length-1];_i=_k.index+1;if(_i+_f>_n){_f=_n-_k.index;}this._addListBoxBufferPage(_f,_i);break;}}else{switch(_d){case 0:if(_f==0){return;}if(_b==_n||(_b<_f -1)){_m=1;}else{_m=2;}this._clearListBoxBufferPage();for(_l=0;_l<_m;_l++ ){_i=_a+(_l* _f);if(_i+_f>_n){_f=_n-_i+1;}this._addListBoxBufferPage(_f,_i);}break;case 1:_h=_g[0];_j=_h[0];_i=_a-_f+1;if(_i<0){_i=0;_f=_j.index;}if(_g.length==2){this._removeListBoxBufferPage(this._buffer_pages.length-1);this._insertListBoxBufferPage(0,_f,_i);this._adjustListBoxBufferPage(0);}else if(_g.length==1){this._insertListBoxBufferPage(0,_f,_i);this._adjustListBoxBufferPage(0);}break;case 2:if(_g.length==2){this._removeListBoxBufferPage(0);_h=_g[0];_k=_h[_h.length-1];_i=_k.index+1;if(_i+_f>_n){_f=_n-_k.index;}this._addListBoxBufferPage(_f,_i);}break;case 3:this._resetListBoxBufferPage(_a,_b);break;}}};_pCheckBoxSet._destroyListBoxContents=function(){this._clearListBoxBufferPage();this._contents_maxwidth=0;this._contents_maxheight=0;};_pCheckBoxSet._addListBoxBufferPage=function(_a,_b){var _c,_d;var _e=[];for(_c=0;_c<_a;_c++ ){_d=this._createListItemControl(_b);_e.push(_d);_b++ ;}this._buffer_pages.push(_e);};_pCheckBoxSet._insertListBoxBufferPage=function(_a,_b,_c){var _d,_e;var _f=[];for(_d=0;_d<_b;_d++ ){_e=this._createListItemControl(_c);_f.push(_e);_c++ ;}this._buffer_pages.splice(_a,0,_f);};_pCheckBoxSet._adjustListBoxBufferPage=function(_a){var _b=this._buffer_pages[_a];var _c=this._buffer_pages[_a -1];var _d=this._buffer_pages[_a+1];var _e,_f;var _g,_h;var _i;if(_c){_g=_b[0].index;_f=_c[_c.length-1].index;if(_g -1!=_f){_e=_g-this._page_rowcount;this._removeListBoxBufferPage(_a -1);this._insertListBoxBufferPage(_a -1,this._page_rowcount,_e);}}if(_d){_h=_b[_b.length-1].index;_i=_d[0].index;if(_h+1!=_i){this._removeListBoxBufferPage(_a+1);this._insertListBoxBufferPage(_a+1,this._page_rowcount,_h+1);}}};_pCheckBoxSet._removeListBoxBufferPage=function(_a){if(this._buffer_pages[_a]){var _b=this._buffer_pages.splice(_a,1)[0];for(var _c in _b){if(_b.hasOwnProperty(_c)){if(_b[_c]){_b[_c].destroy();_b[_c]=null;}}}}};_pCheckBoxSet._clearListBoxBufferPage=function(){var _a,_b;var _c=this._buffer_pages;for(_a in _c){if(_c.hasOwnProperty(_a)){for(_b in _c[_a]){if(_c[_a].hasOwnProperty(_b)){if(_c[_a][_b]){_c[_a][_b].destroy();_c[_a][_b]=null;}}}}_c[_a]=null;}this._buffer_pages=[];};_pCheckBoxSet._resetListBoxBufferPage=function(_a,_b){var _c;var _d=this._buffer_pages;var _e=_d.length;if(_e>2){var _f;var _g,_h;for(_f=0;_f<_e;_f++ ){_c=_d[_f];if(_c[0].index<=_a&&_c[_c.length-1].index>=_a){_g=_f;}if(_c[0].index<=_b&&_c[_c.length-1].index>=_b){_h=_f;}}if(_g==_h){if(_g==0){_h+=1;}else{if(_h==(_e -1)){_g-=1;}}}while(_e){_e-- ;if(_g!=_e&&_h!=_e){this._removeListBoxBufferPage(_e);}}}};_pCheckBoxSet._recalcLayout=function(){var _a=this.getElement();if(_a){var _b=this._innerdataset;var _c=this._items;var _d=_c.length;if(_b&&_d){var _e;var _f=this._p_fittocontents;var _g=this._p_direction;var _h=this._p_columncount;var _i=this._p_rowcount;var _j=_b.getRowCount();var _k=1;var _l=_j;var _m=this._getClientWidth();var _n=this._getClientHeight();var _o=0;var _p=0;var _q,_r;var _s,_t;var _u,_v,_w=0;var _x=[];var _y=[];var _z=1;var _aa=1;if((_h==-1&&_i==0)||(_h==-1&&_i==-1&&_g=="horizontal")){_l=1;_k=0;var _ab=0;for(_s=0;_s<_d;_s++ ){_v=_c[_s]._on_getFitSize();_ab+=_v[0];if(_m<_ab){_l++ ;_ab=_v[0];_k=1;}else{_k++ ;_z=_z>_k?_z:_k;}}_k=_z;_w=0;for(_s=0;_s<_l;_s++ ){_o=0;for(_t=0;_t<_k;_t++ ){if(_j<=_w){break;}_u=_c[_w];if(_u===undefined){break;}_v=_u._on_getFitSize();_r=_n/_l;_u.move(_o,_p,_v[0],_r);_o+=_v[0];if(_o>_m){break;}_w++ ;}_p+=_r;}}else if((_h==0&&_i==-1)||(_h==-1&&_i==-1&&_g=="vertical")){_l=0;_k=1;var _ac=0;for(_s=0;_s<_d;_s++ ){_v=_c[_s]._on_getFitSize();_ac+=_v[1];if(_n<_ac){_k++ ;_ac=_v[1];_l=1;}else{_l++ ;_aa=_aa>_l?_aa:_l;}}_l=_aa;_w=0;for(_s=0;_s<_k;_s++ ){_p=0;for(_t=0;_t<_l;_t++ ){if(_j<=_w){break;}_u=_c[_w];if(_u===undefined){break;}_v=_u._on_getFitSize();_q=_m/_k;_u.move(_o,_p,_q,_v[1]);_p+=_v[1];if(_p>_n){break;}_w++ ;}_o+=_q;}}else{if(_g=="horizontal"){if(_h>0){_k=_h;}else if((_h==0&&_i==0)||(_h<0&&_i<0)){_k=_l;}else if(_h==0&&_i==_j){_k=1;}else if(_h<0&&(_h<_i)&&(_i>1)){_k=Math.ceil(_l/_i);}else if(_i>0){_k=Math.ceil(_l/_i);if((_k* _i)<_l){_k++ ;_l=(((_k* _i)-_l)>=_k)?_i -1:_i;}}else{_k=_l;}if(_k>_l){_k=_l;}_e="col";_l=parseInt(_j/_k)|0;if((_j>_k)&&(_j%_k)>0){_l++ ;}}else{if(_i>0){_l=_i;_e="row";}else if((_h==0&&_i==0)||(_h<0&&_i<0)){_k=1;_e="col";}else if(_h>0){_l=parseInt(_j/_h);if((_h* _l)<_j){_l++ ;}_e="row";}else{_l=1;_e="row";}if(_l>0){_k=parseInt(_j/_l)|0;}else{_k=_h;_e="col";}if(_k<=0){_k=1;}if(_e=="row"&&(_j>_l)&&(_j%_l)>0){_k++ ;}}_q=_m/_k;_r=_n/_l;if(_e=="col"){if(_f=="none"){for(_s=0;_s<_l;_s++ ){for(_t=0;_t<_k;_t++ ){if(_j<=_w){break;}_u=_c[_w];if(_u===undefined){break;}_u.move((_q* _t),(_r* _s),_q,_r);_w++ ;}_p+=_r;}}else{for(_s=0;_s<_l;_s++ ){for(_t=0;_t<_k;_t++ ){if(_j<=_w){break;}_u=_c[_w];if(_u===undefined){break;}_v=_u._on_getFitSize();_x[_t]=_x[_t]?Math.max(_x[_t],_v[0]):_v[0];_y[_s]=_y[_s]?Math.max(_y[_s],_v[1]):_v[1];_w++ ;}}_w=0;for(_s=0;_s<_l;_s++ ){for(_t=0;_t<_k;_t++ ){if(_j<=_w){break;}_u=_c[_w];if(_u===undefined){break;}if(_f=="both"){_u.move(_o,_p,_x[_t],_y[_s]);_o+=_x[_t];}else if(_f=="width"){_u.move(_o,(_r* _s),_x[_t],_r);_o+=_x[_t];}else if(_f=="height"){_u.move((_q* _t),_p,_q,_y[_s]);}_w++ ;}_o=0;if(_f=="both"||_f=="height"){_p+=_y[_s];}else{_p+=_r;}}}}else{if(_f=="none"){for(_s=0;_s<_k;_s++ ){for(_t=0;_t<_l;_t++ ){if(_j<=_w){break;}_u=_c[_w];if(_u===undefined){break;}_u.move((_q* _s),(_r* _t),_q,_r);_w++ ;}_p+=_r;}}else{for(_s=0;_s<_k;_s++ ){for(_t=0;_t<_l;_t++ ){if(_j<=_w){break;}_u=_c[_w];if(_u===undefined){break;}_v=_u._on_getFitSize();_x[_s]=_x[_s]?Math.max(_x[_s],_v[0]):_v[0];_y[_t]=_y[_t]?Math.max(_y[_t],_v[1]):_v[1];_w++ ;}}_w=0;for(_s=0;_s<_k;_s++ ){for(_t=0;_t<_l;_t++ ){if(_j<=_w){break;}_u=_c[_w];if(_u===undefined){break;}if(_f=="both"){_u.move(_o,_p,_x[_s],_y[_t]);_p+=_y[_s];}else if(_f=="width"){_u.move(_o,(_r* _t),_x[_s],_r);_p+=_y[_s];}else if(_f=="height"){_u.move((_q* _s),_p,_q,_y[_t]);}_w++ ;}_p=0;if(_f=="both"||_f=="width"){_o+=_x[_s];}else{_o+=_q;}}}}}}}};_pCheckBoxSet._recalcContentsMaxSize=function(){var _a=this._getClientWidth();var _b=this._getClientHeight();if(_a==0||_b==0){this._contents_maxwidth=0;this._contents_maxheight=0;return;}var _c=this._getItemHeight();var _d=this._getInnerdatasetInfo("_rowcount");var _e=this._getInnerdatasetInfo("_max_width");var _f=this._getInnerdatasetInfo("_max_height");this._scroll_default_value=_f;if(this._contents_maxwidth!=_e||this._contents_maxheight!=(_c* _d)){this._contents_maxwidth=_e;this._contents_maxheight=_c* _d;if(this._is_created){this._onRecalcScrollSize();}}};_pCheckBoxSet._parseInnerDataset=function(){this._initInnerdatasetInfo();var _a=this._innerdataset;if(_a){var _b=this._p_codecolumn;var _c=this._p_datacolumn;var _d=_a.getRowCount();if(_d&&(_b||_c)){_b=_b==""?_c:_b;_c=_c==""?_b:_c;var _e=this._temp_item;var _f=_e?_e._getCurrentStyleInheritValue("font"):null;var _g=this._getReferenceAbsoluteFont(_f);var _h="";var _i=0;var _j=[0,0];for(var _k=0,_l,_m;_k<_d;_k++ ){_l=_a.getColumn(_k,_c);_m=_a.getColumn(_k,_b);_m=this._convertValueType(_m,true);this._setInnerdatasetInfoRowData({text:_l,value:_m});if(_f){_j=nexacro._getTextSize(_l,_f,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,_g);}if(_i<_j[0]){_i=_j[0];_h=_l;}}if(_e){_e.set_text(_h);_j=_e._on_getFitSize();_i=_j[0];this._text_height=_j[1];this._setInnerdatasetInfoMaxSize(_i,_j[1]);}this._setInnerdatasetInfoRowCount(_d);}}};_pCheckBoxSet._doSelect=function(_a,_b,_c){if(typeof _a==="number"){_a=[_a];}this._doMultiSelect(_a,_b,_c);};_pCheckBoxSet._doSingleSelect=function(_a,_b){var _c=[false];this._on_select_change(_a,true,"singleselect",_c,_b);if(_c[0]){if(!_b){this._set_last_selectfocused(_a);}}};_pCheckBoxSet._doMultiSelect=function(_a,_b,_c){var _d=_a[_a.length-1];var _e=_a.length;var _f=this._select_multi;var _g=_f.length;if(!_b&&_g){var _h=_f.items;var _i=[];var _j=0;var _k=_f.length-1;if(_j<=_k){for(;_j<=_k;_j++ ){_i[_i.length]=_h[_j];}}else{for(;_j>=_k;_j-- ){_i[_i.length]=_h[_j];}}if(this._do_deselect(_i,_c)===false){return;}}var _l=[false];var _m=0,_n;for(;_m<_e;_m++ ){_n=_a[_m];if(_b&&this._is_selected(_n)){continue;}this._on_select_change(_n,true,"multiselect",_l,_c);}this._set_last_selectfocused(_d,_c);};_pCheckBoxSet._select_withmouseevent=function(_a){var _b=this._select_multi;var _c=_b?_b.length:0;var _d=this._getItem(_a);var _e;if(this._shiftKey){var _f=this._items;var _g=this._shift_select_base_index?this._shift_select_base_index:0;var _h=_a;var _i=[];if(_g>_h){for(_e=_g;_h<=_e;_e-- ){if(_f[_e].readonly==false){_i.push(_e);}}}else{for(_e=_g;_e<=_h;_e++ ){if(_f[_e].readonly==false){_i.push(_e);}}}if(!_d.selected){this._do_select(_i,true,true);this._insertIndex(_i);}else{this._do_deselect(_i,true);this._removeindex(_i);}this._shift_select_base_index=_h;}else{if(!_d){return;}if(!_d.selected){_d.set_selected(true);this._select_add(_a);}else{_d.set_selected(false);this._select_remove(_a);}this._set_last_selectfocused(_a);}};_pCheckBoxSet._select_withkeyupevent=function(_a){var _b=this._getInnerdatasetInfo("_rowcount");var _c=this._get_rowobj_status("mouseover","status")||this._get_rowobj_status("selected","userstatus",this._select_multi.lastselected);var _d,_e,_f;var _g=this._items;if(!_c){_d=1;}else{_d=_c.index;}for(_f=_d -1;_f>=-1;_f-- ){if(_f==-1){if(_a){_f=_d;}else{_f=_b -1;}}if(_g[_f].readonly==false){_e=_f;break;}if(_f==_d){_e=-1;break;}}if(_a){if(this._is_shift_first_pressed&&_d>-1){this._shift_select_base_index=_d;this._is_shift_first_pressed=false;}if(_d>this._shift_select_base_index){this._do_deselect(_d,true);this._removeindex(_d);}else if(_d<this._shift_select_base_index){this._do_select(_e,true,true);this._insertIndex(_e);}else{var _h=_d==_e?[_d]:[_d,_e];if(this._p_index.toString()!=_h.toString()){this._select_clear(true);this._do_select(_h,true,true);this._changeIndex(_h);}}}this._change_status_item_from_key(_d,_e);};_pCheckBoxSet._select_withkeydownevent=function(_a){var _b=this._getInnerdatasetInfo("_rowcount");var _c=this._get_rowobj_status("mouseover","status")||this._get_rowobj_status("selected","userstatus",this._select_multi.lastselected);var _d,_e,_f;var _g=this._items;if(!_c){_d=-1;}else{_d=_c.index;}for(_f=_d+1;_f<=_g.length;_f++ ){if(_f==_b){if(_a||_d==-1){_f=_d;}else{_f=0;}}if(_f==-1){_e=-1;break;}if(_g[_f].readonly==false){_e=_f;break;}}if(_a){if(this._is_shift_first_pressed&&_d>-1){this._shift_select_base_index=_d;this._is_shift_first_pressed=false;}if(_d<this._shift_select_base_index){this._do_deselect(_d,true);this._removeindex(_d);}else if(_d>this._shift_select_base_index){this._do_select(_e,true,true);this._insertIndex(_e);}else{var _h=_d==_e?[_d]:[_d,_e];if(this._p_index.toString()!=_h.toString()){this._select_clear(true);this._do_select(_h,true,true);this._changeIndex(_h);}}}this._change_status_item_from_key(_d,_e);};_pCheckBoxSet._do_scroll=function(_a){var _b=this._get_first_visible_row();var _c=this._getItemHeight();var _d=this.vscrollbar;var _e=this._vscroll_pos;if(_d){var _f=_b;if(_a=="down"){_f+=1;}else if("up"){if(_e<=_f* _c){_f-=1;}}if(_f>-1){this._scrollTo(null,_f* _c);}}};_pCheckBoxSet._select_add=function(_a,_b){if(_a<0||_a>this._innerdataset.getRowCount()-1){return;}var _c=_a+"";var _d=this._select_multi;var _e=_d.map[_c];if(typeof _e!='undefined'){return this._select_replace(_c,_a);}_d.map[_c]=_a;_d.length++ ;_d.items.push(_a);_d.keys.push(_c);this._insertIndex(_a,undefined,_b);if(this._p_parent._is_control_component){this._p_parent._p_parent._p_index=this._p_index;this._p_parent._p_parent._p_text=this._p_text;this._p_parent._p_parent._p_value=this._p_value;}if(this._p_parent._is_abstract){this._p_parent._p_index=this._p_index;this._p_parent._p_text=this._p_text;this._p_parent._p_value=this._p_value;}};_pCheckBoxSet._select_replace=function(_a,_b){var _c=this._select_indexOfkey(_a);var _d=this._select_multi;_d.items[_c]=_b;_d.map[_a]=_b;};_pCheckBoxSet._select_indexOfkey=function(_a){_a+="";return nexacro._indexOf(this._select_multi.keys,_a);};_pCheckBoxSet._select_remove=function(_a,_b){var _c=this._select_indexOfkey(_a);var _d=this._select_multi;if(_c<_d.length&&_c>=0){_d.length-- ;_d.items.splice(_c,1);var _e=_d.keys[_c];if(typeof _e!='undefined'){_d.map[_e]=undefined;}_d.keys.splice(_c,1);this._removeindex(_a,undefined,_b);return _a;}return false;};_pCheckBoxSet._select_indexOf=function(_a){return nexacro._indexOf(this._select_multi.items,_a);};_pCheckBoxSet._select_clear=function(_a){var _b=[];var _c=this._getContentsItem();for(var _d=0;_d<_c.length;_d++ ){if(_c[_d].readonly==false){_b.push(_d);}}this._do_deselect(_b,true);this._removeindex(_b,undefined,_a);};_pCheckBoxSet._select_range=function(_a,_b,_c,_d){if(!_c){this._deselect_all(true);}var _e;var _f=[];var _g=this._items;if(!nexacro._isNumber(_a)){_a=0;}if(!nexacro._isNumber(_b)){_b=this._getInnerdatasetInfo("_rowcount");}if(_a>_b){for(_e=_a;_b<=_e;_e-- ){if(_g[_e].readonly==false){_f.push(_e);}}}else{for(_e=_a;_e<=_b;_e++ ){if(_g[_e].readonly==false){_f.push(_e);}}}this._doMultiSelect(_f,true,true);this._insertIndex(_f);};_pCheckBoxSet._deselect_all=function(_a){var _b=this._getInnerdatasetInfo("_rowcount");for(var _c=0;_c<_b;_c++ ){this._do_deselect(_c,_a);}};_pCheckBoxSet._do_select=function(_a,_b,_c){if(this._p_readonly){return false;}if(typeof _a==="number"){_a=[_a];}this._doMultiSelect(_a,_b,_c);};_pCheckBoxSet._do_deselect=function(_a,_b){if(nexacro._isNumber(_a)){_a=[_a];}else if(!nexacro._isArray(_a)){_a=[_a];}var _c=_a.length;var _d,_e=0,_f=0;var _g=[0];for(;_e<_c;_e++ ){_d=_a[_e];if(this._is_selected(_d)){ ++_f;this._on_select_change(_d,false,"deselect",_g,_b);}}return _g[0]===_f;};_pCheckBoxSet._select_commit=function(_a,_b,_c,_d){var _e=this._select_multi;var _f=_e.length;switch(_a){case "deselect": ++(_c[0]);this._select_remove(_b,_d);break;case "singleselect":var _g=_e.lastselected;this._select_add(_b);if(_g!=_b&&_f>0&&this._do_deselect(_g)===false){return false;}_c[0]=true;break;case "multiselect":this._select_add(_b,_d);_c[0]=true;break;}};_pCheckBoxSet._set_last_selectfocused=function(_a,_b){var _c=this._select_multi.lastselected;this._select_multi.lastselected=_a;if(_a!==_c){}};_pCheckBoxSet._on_select_change=function(_a,_b,_c,_d,_e){if(this._select_commit(_c,_a,_d,_e)!==false){var _f=this._getItem(_a);if(_f){if(_b){_f.set_selected(true);}else{_f.set_selected(false);}if(nexacro._enableaccessibility){_f._setAccessibilityInfoIndex(_a+1);_f._setAccessibilityInfoCount(this._getInnerdatasetInfo("_rowcount"));}}}};_pCheckBoxSet._on_last_selectfocuschanged=function(_a,_b){if(_a>-1){var _c=this.getElement();if(_c){var _d=this._get_first_visible_row();var _e=this._get_last_visible_row(true);var _f=this.vscrollbar;if(_f){var _g=_f.pos;if(_a<=_d){_g=_a* this._getItemHeight();}else if(_a>=_e){_g=(_a+1)* this._getItemHeight()-_c.client_height;}if(_f.pos!=_g){_f.set_pos(_g);}}else{var _h=this._getItem(_a);if(_h){var _i=_h.getElement();if(_i){_i.setElementFocus();}}}}}};_pCheckBoxSet._do_defocus=function(_a,_b){var _c=this._getWindow();_c._removeFromCurrentFocusPath(_a,true);if(_b){_c._removeFromCurrentFocusPath(this,true);}};_pCheckBoxSet._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pCheckBoxSet._createListItem=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return new nexacro._CheckBoxSetItemControl(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pCheckBoxSet._select_all=function(){var _a=this._innerdataset.rowcount;if(_a<=this._select_multi.length){return;}this._select_range(0,_a -1,true);};_pCheckBoxSet._createCheckBoxSetItemControl=function(){var _a=this._innerdataset;if(_a){var _b=_a.getRowCount();if(_b>0){var _c,_d,_e,_f;var _g=this._is_created?false:true;var _h=this._p_codecolumn;var _i=this._p_datacolumn==""?_h:this._p_datacolumn;var _j=this._p_readonlycolumn;for(var _k=0;_k<_b;_k++ ){_d=_a.getColumn(_k,_i);_e=_a.getColumn(_k,_h);_e=this._convertValueType(_e,true);_f=this._p_readonly?this._p_readonly:_a.getColumn(_k,_j);_c=new nexacro._CheckBoxSetItemControl("item_"+_k,0,0,0,0,null,null,null,null,null,null,this);_c.set_value(_e);_c.set_text(_d);_c.set_index(_k);_c.set_readonly(_f);_c._setItemInfo(_k,_e);_c.createComponent(_g);_c._setEventHandler("onlbuttondown",this._on_item_onlbuttondown,this);_c._setEventHandler("ontouchstart",this._on_item_onlbuttondown,this);_c._setEventHandler("ondblclick",this._on_item_ondblclick,this);_c._setEventHandler("onmousemove",this.on_item_onmousemove,this);if(nexacro._enableaccessibility){_c._setAccessibilityInfoIndex(_k);_c._setAccessibilityInfoCount(_b);}this._items[_k]=_c;}}}};_pCheckBoxSet._destroyCheckBoxSetItemControl=function(){var _a,_b;var _c=this._items;for(_a=0,_b=_c.length;_a<_b;_a++ ){_c[_a].destroy();_c[_a]=null;}this._items=[];};_pCheckBoxSet._destroyCheckBoxSetTextElement=function(){var _a=this._text_elem;if(_a){_a.destroy();this._text_elem=null;}};_pCheckBoxSet._createCheckBoxSetTextElement=function(){var _a=this.getElement();var _b=this._text_elem;if(!_b&&_a){_b=this._text_elem=new nexacro.TextBoxElement(_a);_b.setElementSize(this._getClientWidth(),this._getClientHeight());if(this._p_textAlign){_b.setElementTextAlign(this._p_textAlign);}if(this.verticalAlign){_b.setElementVerticalAlign(this.verticalAlign);}_b.setElementText(this.name);if(this._is_created){_b.create(this._getWindow());}}};_pCheckBoxSet._redrawCheckBoxSetItem=function(){this._destroyCheckBoxSetTextElement();this._destroyCheckBoxSetItemControl();this._createCheckBoxSetItemControl();if(this._p_value!=undefined){this.on_apply_value(this._p_value);}else if(this._p_index!=-1){this.on_apply_index(this._p_index);}this._recalcLayout();};_pCheckBoxSet._updateItemInfo=function(){var _a=this._innerdataset;if(!_a){return;}var _b=_a.getRowCount();if(_b>0){var _c=this._p_codecolumn;for(var _f=0;_f<_b;_f++ ){var _d=_a.getColumn(_f,_c);_d=this._convertValueType(_d,true);var _e=this._items[_f];_e._setItemInfo(_f,_d);if(nexacro._enableaccessibility){_e._setAccessibilityInfoIndex(_f);_e._setAccessibilityInfoCount(_b);}this._items[_f]=_e;}}};_pCheckBoxSet._change_status_item_from_key=function(_a,_b){var _c=this._getItem(_a);var _d=this._getItem(_b);if(_c){_c._changeStatus("mouseover",false);}if(_d){_d._changeStatus("mouseover",true);this._overeditemindex=_d.index;}};_pCheckBoxSet._get_rowobj_status=function(_a,_b,_c){var _d=this._items;if(_d){for(var _e=0,_f=_d.length;_e<_f;_e++ ){if((_c)&&_c==_d[_e].index){return _d[_e];}if(_d[_e]&&((_b=="status"&&_d[_e]._status==_a)||(_b=="userstatus"&&_d[_e]._userstatus==_a))){if(!_c){return _d[_e];}}}}return null;};_pCheckBoxSet._changeIndex=function(_a,_b,_c){if(!_c){var _d=this._innerdataset;var _e=(this._p_codecolumn||this._p_datacolumn);if(_d&&_e){var _f,_g,_h,_i,_j,_k,_l,_m,_n;var _o,_p,_q;var _r=nexacro.getEnvironment();var _s=_r.multivalueseparator?_r.multivalueseparator:",";var _t=this._p_textseparator;_i=this._p_index;_j=this._p_text;_k=this._p_value;_l=_m=_n="";if(typeof _a=="number"){_a=[_a];}for(_q=0;_q<_a.length;_q++ ){_f=parseInt(_a[_q],10)|0;_o=_d.getColumn(_f,this._p_datacolumn||this._p_codecolumn);_p=_d.getColumn(_f,this._p_codecolumn||this._p_datacolumn);_p=this._convertValueType(_p,true);_h=_o==undefined?"":_o;_g=_p;if(_q==0){_l=_f.toString();_m=_h;_n=_g;}else{_l+=","+_f;_m+=_t+_h;_n+=_s+_g;}}if(_b==undefined){_b=this._change_by_script;}if(_b!=true){if(this.on_fire_canitemchange(this,_i,_j,_k,_l,_m,_n)!=false){this._setIndex(_l);this._setText(_m);this._setValue(_n);this.applyto_bindSource("value",this._p_value);this.on_fire_onitemchanged(this,_i,_j,_k,_l,_m,_n);return true;}}else{this._setIndex(_l);this._setText(_m);this._setValue(_n);this.applyto_bindSource("value",this._p_value);return true;}}}return false;};_pCheckBoxSet._insertIndex=function(_a,_b,_c){if(!_c){var _d=this._innerdataset;var _e=(this._p_codecolumn||this._p_datacolumn);if(_d&&_e){var _f,_g,_h,_i,_j,_k,_l,_m,_n;var _o,_p,_q,_r;var _s=nexacro.getEnvironment();var _t=_s.multivalueseparator?_s.multivalueseparator:",";var _u=this._p_textseparator;_i=_l=this._p_index;_j=_m=this._p_text;_k=_n=this._p_value;if(typeof _a=="number"){_a=[_a];}if(_i=="-1"){_r=_a;}else{var _v=_i.split(",");_r=_a.filter(function(_g,_q){return _v.indexOf(_g+"")==-1&&_a.indexOf(_g)==_q;});}if(_r.length==0){return false;}for(_q=0;_q<_r.length;_q++ ){_f=parseInt(_r[_q],10)|0;_o=_d.getColumn(_f,this._p_datacolumn||this._p_codecolumn);_p=_d.getColumn(_f,this._p_codecolumn||this._p_datacolumn);_p=this._convertValueType(_p,true);_h=_o==undefined?"":_o;_g=_p;if(_l=="-1"){_l=_f.toString();_m=_h;_n=_g;}else{_l+=","+_f;_m+=_u+_h;_n+=_t+_g;}}if(_b==undefined){_b=this._change_by_script;}if(_b!=true){if(this.on_fire_canitemchange(this,_i,_j,_k,_l,_m,_n)!=false){this._setIndex(_l);this._setText(_m);this._setValue(_n);this.applyto_bindSource("value",this._p_value);this.on_fire_onitemchanged(this,_i,_j,_k,_l,_m,_n);return true;}}else{this._setIndex(_l);this._setText(_m);this._setValue(_n);this.applyto_bindSource("value",this._p_value);return true;}}}return false;};_pCheckBoxSet._removeindex=function(_a,_b,_c){if(!_c){var _d=this._innerdataset;var _e=(this._p_codecolumn||this._p_datacolumn);if(_d&&_e){var _f,_g,_h,_i,_j,_k,_l,_m,_n;var _o,_p,_q,_r;var _s=nexacro.getEnvironment();var _t=_s.multivalueseparator?_s.multivalueseparator:",";var _u=this._p_textseparator;_i=this._p_index;_j=this._p_text;_k=this._p_value;_l=this._p_index=="-1"?this._p_index:this._p_index.split(",");_m=this._p_text==""?this._p_text:this._p_text.split(_u);_n=this._p_value==undefined?this._p_value:this._p_value.split(_t);if(typeof _a=="number"){_a=[_a];}if(_i=="-1"){return false;}else{_r=_a.filter(function(_g,_q){return _i.indexOf(_g)!=-1&&_a.indexOf(_g)==_q;});}if(_r.length==0){return false;}for(_q=0;_q<_r.length;_q++ ){_f=parseInt(_r[_q],10)|0;_o=_d.getColumn(_f,this._p_datacolumn||this._p_codecolumn);_p=_d.getColumn(_f,this._p_codecolumn||this._p_datacolumn);_p=this._convertValueType(_p,true);_h=_o==undefined?"":_o;_g=_p;_l.splice(_l.indexOf(_f.toString()),1);_m.splice(_m.indexOf(_h),1);_n.splice(_n.indexOf(_g),1);}if(_l.length==0){_l="-1";_m="";_n=undefined;}else{_l=_l.join(",");_m=_m.join(_u);_n=_n.join(_t);}if(_b==undefined){_b=this._change_by_script;}if(_b!=true){if(this.on_fire_canitemchange(this,_i,_j,_k,_l,_m,_n)!=false){this._setIndex(_l);this._setText(_m);this._setValue(_n);this.applyto_bindSource("value",this._p_value);this.on_fire_onitemchanged(this,_i,_j,_k,_l,_m,_n);return true;}}else{this._setIndex(_l);this._setText(_m);this._setValue(_n);this.applyto_bindSource("value",this._p_value);return true;}}}return false;};_pCheckBoxSet._setValue=function(_a){if(_a==undefined||_a.length==0){this._p_value=undefined;}else{this._p_value=_a;}};_pCheckBoxSet._setIndex=function(_a){if(_a=="-1"||_a.length==0){this._p_index="-1";}else{this._p_index=_a;}};_pCheckBoxSet._setText=function(_a){if(!_a||_a.length==0){this._p_text="";}else{this._p_text=_a;}};_pCheckBoxSet._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");this._innerdataset=this._findDataset(_a);this._p_innerdataset=_a;}};_pCheckBoxSet._setItemAccessibility=function(_a){var _b;if(nexacro._Browser=="Runtime"){_b=this._getAccessibilityRole();}else{_b=this._p_itemaccessibilityrole;}if(_b){_a.set_accessibilityrole(_b);}var _c=this._p_itemaccessibilityenable;if(_c!==undefined){_a.set_accessibilityenable(_c);}var _d=this._p_itemaccessibilitylabel;if(_d!==undefined){_a.set_accessibilitylabel(_d);}var _e=this._p_itemaccessibilitydescription;if(_e){_a.set_accessibilitydescription(_e);}var _f=this._p_itemaccessibilityaction;if(_f){_a.set_accessibilityaction(_f);}var _g=this._p_itemaccessibilitydesclevel;if(_g){_a.set_accessibilitydesclevel(_g);}};_pCheckBoxSet._getItem=function(_a){var _b;var _c=this._items;if(_c.length>0&&_a>=0){_b=_c[_a];}return _b;};_pCheckBoxSet._getItemHeight=function(){var _a=this._p_itemheight;if(_a!==undefined){return _a;}var _b=this._temp_item;if(_b){return _b._on_getFitSize()[1];}return 0;};_pCheckBoxSet._getContentsItem=function(){return this._items;};_pCheckBoxSet._getContentsCount=function(){var _a=0;var _b=this._buffer_pages;for(var _c in _b){if(_b[_c]){_a+=_b[_c].length;}}return _a;};_pCheckBoxSet._isRange=function(_a,_b){var _c=0;var _d,_e;var _f=this._buffer_pages;for(var _g in _f){_d=_f[_g];for(var _h in _d){_e=_d[_h];if(_e){if(_e.index==_b){_c+=1;}if(_e.index==_a){_c+=2;}}}}return _c;};_pCheckBoxSet._get_first_visible_row=function(){var _a=this._getItemHeight();var _b=(this.vscrollbar)?this.vscrollbar.pos:0;return _a?Math.floor(_b/_a):0;};_pCheckBoxSet._get_last_visible_row=function(_a){var _b=this._getInnerdatasetInfo("_rowcount");var _c=_a?this._page_rowcount-1:this._page_rowcount_min-1;var _d=this._get_first_visible_row()+_c;var _e=_b -1;if(_d>=_e){_d=_e;}return _d;};_pCheckBoxSet._get_page_from_rowidx=function(_a){var _b=this._page_rowcount;return _b?Math.floor(_a/this._page_rowcount)+1:1;};_pCheckBoxSet._refreshScroll=function(_a,_b,_c){var _d=this.getElement();if(_d){var _e=_d.scroll_top==undefined?0:_d.scroll_top;var _f,_g,_h;var _i=this._getItemHeight();var _j=this._getInnerdatasetInfo("_rowcount");var _k=this._page_rowcount;var _l=this._vscroll_pos;var _m=this.vscrollbar?this.vscrollbar.max:0;if(_c){if(_c==nexacro.Event.KEY_PAGE_UP){_l=_l-(_i* _k);if(_l<0){_l=0;}this.vscrollbar.set_pos(_l);}else if(_c==nexacro.Event.KEY_PAGE_DOWN){_l=_l+(_i* _k);if(_l>_m){_l=_m;}this.vscrollbar.set_pos(_l);}else if(_c==nexacro.Event.KEY_HOME){this.vscrollbar.set_pos(0);}else if(_c==nexacro.Event.KEY_END){this.vscrollbar.set_pos(_m);}}else{if(_a>=_j){return;}_g=(_a<0?0:_a)* _i;_h=_g+_i;if((_h>this._getClientHeight()+_e)&&_b===0){_f=_e+_i;}else if(_g<_e){_f=_g;}if(this.vscrollbar&&_f>=0){this.vscrollbar.set_pos(_f);}}}};_pCheckBoxSet._getNextAccessibilityOrderIndex=function(_a){var _b=this._getInnerdatasetInfo("_rowcount");var _c=this._accessibility_index+_a;if(_c<0||_c>=_b){_c=-1;}return _c;};_pCheckBoxSet._is_selected=function(_a){return this._select_indexOf(_a)!==-1;};_pCheckBoxSet._initInnerdatasetInfo=function(){this._innerdataset_info={_rowcount:0,_rows:[],_max_width:0,_max_height:0};};_pCheckBoxSet._getInnerdatasetInfo=function(_a){if(this._innerdataset_info&&this._innerdataset_info[_a]){if(_a=="_rows"){if(arguments.length==2){return this._innerdataset_info["_rows"][arguments[1]];}}else{return this._innerdataset_info[_a];}}return null;};_pCheckBoxSet._setInnerdatasetInfoRowCount=function(_a){this._innerdataset_info._rowcount=_a;};_pCheckBoxSet._setInnerdatasetInfoRowData=function(_a){this._innerdataset_info._rows.push(_a);};_pCheckBoxSet._getTextHeight=function(){var _a=this._getInnerdatasetInfo("_max_height");return _a?_a:this._text_height;};_pCheckBoxSet._setInnerdatasetInfoMaxSize=function(_a,_b){this._innerdataset_info._max_width=_a;this._innerdataset_info._max_height=_b;};delete _pCheckBoxSet;nexacro._CheckBoxSetItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.CheckBox.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCheckBoxSetItemControl=nexacro._createPrototype(nexacro.CheckBox,nexacro._CheckBoxSetItemControl);nexacro._CheckBoxSetItemControl.prototype=_pCheckBoxSetItemControl;_pCheckBoxSetItemControl._type_name="CheckBoxControl";_pCheckBoxSetItemControl._p_index="";_pCheckBoxSetItemControl._p_value=undefined;_pCheckBoxSetItemControl._p_selected=false;_pCheckBoxSetItemControl._p_wordWrap="none";_pCheckBoxSetItemControl._is_focus_accept=false;_pCheckBoxSetItemControl._is_simple_control=true;_pCheckBoxSetItemControl._is_subcontrol=true;_pCheckBoxSetItemControl._use_selected_status=true;_pCheckBoxSetItemControl._use_readonly_status=true;_pCheckBoxSetItemControl._p_accessibilityrole="checkboxsetitem";_pCheckBoxSetItemControl._event_list={"onclick":1,"ondblclick":1,"onflingstart":1,"onfling":1,"onflingend":1,"onlbuttondown":1,"onlbuttonup":1,"onlongpress":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onmousedown":1,"onmouseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"onrbuttondown":1,"onrbuttonup":1};_pCheckBoxSetItemControl._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){};_pCheckBoxSetItemControl.on_getIDCSSSelector=function(){return "checkboxsetitem";};_pCheckBoxSetItemControl._apply_setfocus=function(_a){if(!this._p_parent._is_subcontrol&&this._p_parent._status=="focused"){nexacro.Component.prototype._apply_setfocus.call(this,_a);}};_pCheckBoxSetItemControl._isFocusAcceptable=function(){return nexacro._enableaccessibility;};_pCheckBoxSetItemControl.on_tap_default_action=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;var _h=this._getWindow().findComponent(_a);var _i=_g._selectinfo_list;while(_i.length){var _j=_i[0].obj;if(_j){var _k;if(this._contains(_h)){if(_a){var _l=_g._getCurrentStyleBorder();var _m=_l?_l._getBorderLeftWidth():0;var _n=_l?_l._getBorderTopWidth():0;_b=_b-((_a.scroll_left?_a.scroll_left:0)-_m);_c=_c-((_a.scroll_top?_a.scroll_top:0)-_n);if(_b<0){_b=_m;}if(_c<0){_c=_n;}}var _o=_g._getClientXY(_b,_c);_g.on_fire_onitemclick(_g,_h.index,_h.text,_h.value,undefined,_g._altKey,_g._ctrlKey,_g._shiftKey,_d,_e,_b,_c,_o[0],_o[1]);_k=_j;_g._select_withmouseevent(_k.index);}else{if(!_j.selected){_j._changeUserStatus("selected",false);}}}_i.shift();}};_pCheckBoxSetItemControl.set_index=function(_a){if(_a!==this._p_index){this._p_index=parseInt(_a,10);}};_pCheckBoxSetItemControl.set_value=function(_a){if(_a!==this._p_value){this._p_value=_a;}};_pCheckBoxSetItemControl.set_selected=function(_a){if(_a!=this._p_selected){this._p_selected=_a;this.on_apply_selected();}};_pCheckBoxSetItemControl.on_apply_selected=function(){var _a=this._p_parent._statusmap?this._p_parent._statusmap['focused']:false;if(this._p_selected){this._changeUserStatus("selected",true);if(_a){this._changeStatus("focused",true);}}else{if(this._status=="focused"){this._changeStatus("focused",false);}this._changeUserStatus("selected",false);}};_pCheckBoxSetItemControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_readonly){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pCheckBoxSetItemControl.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);};_pCheckBoxSetItemControl.on_fire_sys_onflingstart=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){return false;};_pCheckBoxSetItemControl._properties=[{name:"index"},{name:"value"},{name:"selected"}];nexacro._defineProperties(_pCheckBoxSetItemControl,_pCheckBoxSetItemControl._properties);_pCheckBoxSetItemControl._setItemInfo=function(_a,_b){this._index=_a;this._value=_b;};delete _pCheckBoxSetItemControl;}if(!nexacro.MultiCombo){nexacro.MultiCombo=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._onlydisplay=_m;this._select_multi={"items":[],"map":{},"keys":[],"length":0,"lastselected":null,"tagselect":-1};};var _pMultiCombo=nexacro._createPrototype(nexacro.Component,nexacro.MultiCombo);nexacro.MultiCombo.prototype=_pMultiCombo;_pMultiCombo._type_name="MultiCombo";_pMultiCombo._p_dropbutton=null;_pMultiCombo._p_multicombolist=null;_pMultiCombo._p_multicombotagbox=null;_pMultiCombo._p_multicombotext=null;_pMultiCombo._popupcontrol=null;_pMultiCombo._p_value=undefined;_pMultiCombo._p_index="-1";_pMultiCombo._p_text="";_pMultiCombo._p_codecolumn="";_pMultiCombo._p_datacolumn="";_pMultiCombo._p_readonlycolumn="";_pMultiCombo._p_innerdataset="";_pMultiCombo._p_autoselect=false;_pMultiCombo._p_autoskip=false;_pMultiCombo._initsoftkeyboard=undefined;_pMultiCombo._p_usesoftkeyboard=true;_pMultiCombo._p_displaynulltext="";_pMultiCombo._p_imemode="none";_pMultiCombo._p_readonly=false;_pMultiCombo._p_usecontextmenu=true;_pMultiCombo._p_displayrowcount=undefined;_pMultiCombo._p_buttonsize=undefined;_pMultiCombo._p_itemheight=undefined;_pMultiCombo._p_type="dropdown";_pMultiCombo._p_popuptype="normal";_pMultiCombo._p_popupsize=undefined;_pMultiCombo._p_acceptvaluetype="allowinvalid";_pMultiCombo._p_tagboxitemhorizontalgap=undefined;_pMultiCombo._p_tagboxitemverticalgap=undefined;_pMultiCombo._p_tagboxscrollbartype="default";_pMultiCombo._p_tagboxscrollbarsize=null;_pMultiCombo._p_tagboxscrollindicatorsize=null;_pMultiCombo._p_tagbuttonsize=undefined;_pMultiCombo._p_showselectallcheckbox=false;_pMultiCombo._p_selectallcheckboxheight=undefined;_pMultiCombo._p_edittype="text";_pMultiCombo._p_textseparator=",";_pMultiCombo._p_counttextformat="";_pMultiCombo._is_close_popup_by_select=false;_pMultiCombo._isFiredOnInput=false;_pMultiCombo._innerdataset="";_pMultiCombo._filtereddataset="";_pMultiCombo._default_value=undefined;_pMultiCombo._default_text="";_pMultiCombo._default_index=-1;_pMultiCombo._has_inputElement=true;_pMultiCombo._processing_keyfilter=false;_pMultiCombo._tagmode=false;_pMultiCombo._use_readonly_status=true;_pMultiCombo._is_editable_control=true;_pMultiCombo._event_list={"oneditclick":1,"onitemclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmousemove":1,"onmouseleave":1,"onmove":1,"onsize":1,"canitemchange":1,"onitemchanged":1,"oninput":1,"onmousewheel":1,"oncontextmenu":1,"ondropdown":1,"oncloseup":1,"oninnerdatachanged":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"ondevicebuttonup":1};_pMultiCombo._p_accessibilityrole="multicombobox";_pMultiCombo.on_create_contents=function(){var _a=this.getElement();if(_a){if(this._p_edittype=="singletag"||this._p_edittype=="multitag"){this._tagmode=true;this._createMultiComboTagBoxControl();}else{this._tagmode=false;this._createMultiComboTextControl();}this._p_dropbutton=new nexacro._MultiComboButtonControl("dropbutton",0,0,0,0,null,null,null,null,null,null,this);this._p_dropbutton.createComponent();}};_pMultiCombo.on_created_contents=function(_a){if(this._p_innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this._p_innerdataset);this.on_apply_innerdataset(this._innerdataset);}this.on_apply_autoskip(this._p_autoskip);this.on_apply_displaynulltext(this._p_displaynulltext);this.on_apply_imemode(this._p_imemode);this.on_apply_autoselect(this._p_autoselect);this.on_apply_usecontextmenu(this._p_usecontextmenu);if(!this._onlydisplay){var _b=(this._p_value==undefined&&this._p_index=="-1");if(_b){this.on_apply_value(this._p_value);}else{if(this._p_index!="-1"){this.on_apply_index(this._p_index);}else if(this._p_value!==undefined){this.on_apply_value(this._p_value);}else if(this._p_text!==""){this.on_apply_text(this._p_text);}}}this.redraw();this._recalcLayout();this._setEventHandlerToDropButton();this._setEventHandlerToMultiComboTagBox();this._setEventHandlerToMultiComboText();if(this._p_dropbutton){this._p_dropbutton.on_created(_a);}if(this._p_multicombotagbox){this._p_multicombotagbox.on_created(_a);}if(this._p_multicombotext){this._p_multicombotext.on_created(_a);this._p_multicombotext._setReadonlyView(true);}if(nexacro._enableaccessibility){this._want_arrows=false;this._setAccessibilityStatAutoComplete("list");if(!nexacro._isDesktop()){this._p_multicombotext._setAccessibilityStatHidden(true);this._p_dropbutton._setAccessibilityStatHidden(true);}}this.on_apply_type(this._p_type);};_pMultiCombo.on_destroy_contents=function(){if(this._p_dropbutton){this._p_dropbutton.destroy();this._p_dropbutton=null;}if(this._p_multicombotagbox){this._p_multicombotagbox.destroy();this._p_multicombotagbox=null;}if(this._p_multicombotext){this._p_multicombotext.destroy();this._p_multicombotext=null;}if(this._p_multicombolist){this._p_multicombolist.destroy();this._p_multicombolist=null;}if(this._popupcontrol){this._popupcontrol.destroy();this._popupcontrol=null;}this._removeEventHandlerToInnerDataset();this._select_multi=null;};_pMultiCombo._removeEventHandlerToInnerDataset=function(){if(this._innerdataset){this._innerdataset._removeEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);this._innerdataset._removeEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);this._innerdataset=null;}if(this._filtereddataset){this._filtereddataset.destroy();this._filtereddataset=null;}};_pMultiCombo.on_create_contents_command=function(){this.on_apply_autoskip(this._p_autoskip);this.on_apply_displaynulltext(this._getStringResourceProperty(this._p_displaynulltext));this.on_apply_imemode(this._p_imemode);this.on_apply_autoselect(this._p_autoselect);this.on_apply_usecontextmenu(this._p_usecontextmenu);var _a=(this._p_value==undefined&&this._p_index=="-1");if(_a){this.on_apply_value(this._p_value);}else{if(this._p_index!="-1"){this.on_apply_index(this._p_index);}else if(this._p_value!==undefined){this.on_apply_value(this._p_value);}else if(this._p_text!==""){this.on_apply_text(this._p_text);}}this.redraw();this._recalcLayout();this._setEventHandlerToDropButton();this._setEventHandlerToMultiComboTagBox();this._setEventHandlerToMultiComboText();var _b="";if(this._p_multicombotagbox){_b+=this._p_multicombotagbox.createCommand();}if(this._p_multicombotext){_b+=this._p_multicombotext.createCommand();}if(this._p_dropbutton){_b+=this._p_dropbutton.createCommand();}return _b;};_pMultiCombo.on_attach_contents_handle=function(_a){if(this._p_dropbutton){this._p_dropbutton.attachHandle(_a);this._p_dropbutton._setAccessibilityStatHidden(true);}if(this._p_multicombotagbox){this._p_multicombotagbox.attachHandle(_a);this._p_multicombotagbox._setAccessibilityStatHidden(true);}if(this._p_multicombotext){this._p_multicombotext.attachHandle(_a);this._p_multicombotext._setReadonlyView(true);this._p_multicombotext._setAccessibilityStatHidden(true);}if(nexacro._enableaccessibility){this._want_arrows=false;this._setAccessibilityStatAutoComplete("list");}this.on_apply_type(this._p_type);};_pMultiCombo.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pMultiCombo.on_change_containerPos=function(_a,_b){this._recalcLayout();};_pMultiCombo._getInputElement=function(){var _a=this._tagmode?this._p_multicombotagbox.tagboxedit:this._p_multicombotext;return _a?_a._getInputElement():null;};_pMultiCombo._apply_setfocus=function(_a){if(this._tagmode){var _b=this._p_multicombotagbox.tagboxedit;if(_b){_b._changeStatus("focused",true);_b._on_focus(true,_a);}}else{var _c=this._p_multicombotext;if(_c){_c._changeStatus("focused",true);_c._on_focus(true,_a);}}};_pMultiCombo.on_apply_prop_enable=function(_a){_a=(_a!=null)?_a:this._isEnable();if(this._p_multicombotagbox){this._p_multicombotagbox._setEnable(_a);}if(this._p_multicombotext){this._p_multicombotext._setEnable(_a);}if(this._p_dropbutton&&!this._isReadOnly()){this._p_dropbutton._setEnable(_a);}if(this._p_multicombolist){this._p_multicombolist._setEnable(_a);}};_pMultiCombo.on_apply_prop_cssclass=function(){if(this._p_multicombotagbox){this._p_multicombotagbox.on_apply_cssclass();}if(this._p_multicombotext){this._p_multicombotext.on_apply_cssclass();}if(this._p_dropbutton){this._p_dropbutton.on_apply_cssclass();}if(this._p_multicombolist){this._p_multicombolist.on_apply_cssclass();}};_pMultiCombo.on_apply_prop_stringresource=function(){if(!nexacro._StringResource){return;}nexacro.Component.prototype.on_apply_prop_stringresource.call(this);this.on_apply_displaynulltext(this._getStringResourceProperty(this._p_displaynulltext));};_pMultiCombo.on_init_bindSource=function(_a,_b,_c){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}this._setValue(undefined);this._setIndex("-1");this._setText("");this.redraw();};_pMultiCombo.on_change_bindSource=function(_a,_b,_c,_d){if(_a=="value"){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}var _e=_b.getColumn(_c,_d);_e=this._convertValueType(_e,true);_b=this._selectDataset();var _f=nexacro.getEnvironment();var _g=_f.multivalueseparator?_f.multivalueseparator:",";var _h=this._p_textseparator;var _i=_e?_e.split(_g):_e;var _j,_k,_l,_m;if(_b){var _n=this._select_multi;var _o=_n.length;var _p=[];for(_m=0;_m<_o;_m++ ){_p[_p.length]=_n.items[_m];}for(_m=0;_m<_p.length;_m++ ){this._select_remove(_p[_m]);}if(_i==undefined){_l=_i;if(this._p_value!=_l){_j="-1";_k="";this._setIndex(_j);this._setText(_k);this._setValue(_l);this._select_add(_j);this.redraw();}}else{var _q=[];for(_m=0;_m<_i.length;_m++ ){_l=_i[_m];_j=this._getIndexFromValue(_b,_l);if(_j>-1){_k=this._getItemText(_j);_q.push(_j);if(_m==0){this._p_index=_j.toString();this._p_text=_k;this._p_value=_l;}else{this._p_index+=","+_j;this._p_text+=_h+_k;this._p_value+=_g+_l;}this._select_add(_j);}}this.redraw();}}}};_pMultiCombo.on_getBindableProperties=function(){return "value";};_pMultiCombo._getDragData=function(){var _a=this._p_multicombotext;if(_a){return _a.getSelectedText();}};_pMultiCombo._getDlgCode=function(_a,_b,_c,_d){if((_a==nexacro.Event.KEY_UP||_a==nexacro.Event.KEY_DOWN)&&(_c||_b)){return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:true};}return {want_tab:false,want_return:false,want_escape:false,want_chars:false,want_arrows:this._want_arrows};};_pMultiCombo.on_get_accessibility_label=function(){return "";};_pMultiCombo._getAccessibilityReadLabel=function(_a){var _b=nexacro.Component.prototype._getAccessibilityReadLabel.call(this);if(_a&&this._p_multicombotext._input_element&&this._status!="focus"){if(!this._p_multicombotext._input_element._wantAccessibilityAdditionalLabel||!this._p_multicombotext._input_element._wantAccessibilityAdditionalLabel()){_b=this._p_text+" "+_b;}}return _b;};_pMultiCombo.on_update_position=function(_a,_b,_c){var _d=this._control_element;if(_d){if(_b){_d.setElementPosition(this._adjust_left,this._adjust_top);this.on_fire_onmove(this._adjust_left,this._adjust_top);}if(_a||_c){_d.setElementSize(this._adjust_width,this._adjust_height,_c);if(_a){this.on_fire_onsize(this._adjust_width,this._adjust_height);}}if(this._p_multicombotagbox){this._p_multicombotagbox._onRecalcScrollSize();}}};_pMultiCombo.set_text=function(_a){if(!nexacro._isString(_a)){return;}var _b=this._p_textseparator;var _c=_a.split(_b);var _d=this._innerdataset;var _e=this._p_datacolumn==""?this._p_codecolumn:this._p_datacolumn;if(_d){_c=_c.filter(function(_f,_g){return _d.findRow(_e,_f)>-1&&_c.indexOf(_f)==_g;});}if(!_d||(!this._p_datacolumn&&!this._p_codecolumn)){this._p_text=_a;this.on_apply_text(_a);}else{if(_c.length==0){this._p_text="";}else{this._p_text=_c.join(_b);}this.on_apply_text(_c);}};_pMultiCombo.on_apply_text=function(_a){var _b="";var _c="";var _d=this._selectDataset();if(!_d||(!this._p_datacolumn&&!this._p_codecolumn)){if(this._p_value){this._setTextValue(_a);}else{if(this._p_displaynulltext||_a==""){this._setTextValue(undefined);}else{this._setTextValue(_a);}}}else{var _e,_f,_g;var _h=this._select_multi;var _i=_h.length;var _j=[];var _k=nexacro.getEnvironment();var _l=_k.multivalueseparator?_k.multivalueseparator:",";var _m=this._p_textseparator;for(_g=0;_g<_i;_g++ ){_j[_j.length]=_h.items[_g];}for(_g=0;_g<_j.length;_g++ ){this._select_remove(_j[_g]);}if(_a==""){this._p_index="-1";this._p_value=undefined;}else{if(!nexacro._isArray(_a)){_a=_a.split(_m);}for(_g=0;_g<_a.length;_g++ ){_e=this._getIndexFromText(_d,_a[_g]).toString();_f=this._getItemValue(_e);this._select_add(_e);if(_g==0){_b=_e;_c=_f;}else{_b+=","+_e;_c+=_l+_f;}}this._setIndex(_b);this._setValue(_c);}if(!this.applyto_bindSource("value",this._p_value)){return;}this.redraw();}};_pMultiCombo.set_value=function(_a){if(!nexacro._isString(_a)&&_a!=undefined){return;}var _b=_a;if(_b==undefined){this._p_value=undefined;}else{var _c=nexacro.getEnvironment();var _d=_c.multivalueseparator?_c.multivalueseparator:",";_b=_b.split(_d);if(this._p_acceptvaluetype=="ignoreinvalid"){var _e=this._innerdataset;var _f=this._p_codecolumn||this._p_datacolumn;if(_e){_b=_b.filter(function(_g,_h){return _e.findRow(_f,_g)>-1&&_b.indexOf(_g)===_h;});if(_b.length==0){return;}}}this._p_value=_b.join(_d);}this.on_apply_value(_b);this.redraw();};_pMultiCombo.on_apply_value=function(_a){var _b=this.getElement();if(_b){var _c="";var _d="";var _e=this._selectDataset();if(_e){var _f,_g,_h;var _i=this._select_multi;var _j=_i.length;var _k=[];var _l=nexacro.getEnvironment();var _m=_l.multivalueseparator?_l.multivalueseparator:",";var _n=this._p_textseparator;for(_h=0;_h<_j;_h++ ){_k[_k.length]=_i.items[_h];}for(_h=0;_h<_k.length;_h++ ){this._select_remove(_k[_h]);}if(_a==undefined){_f=this._getIndexFromValue(_e,_a).toString();if(_f>-1){_g=this._getItemText(_f);}this._select_add(_f);this._setIndex(_f);this._setText(_g);}else{if(!nexacro._isArray(_a)){_a=_a.split(_m);}for(_h=0;_h<_a.length;_h++ ){_f=this._getIndexFromValue(_e,_a[_h]).toString();if(_f>-1){_g=this._getItemText(_f);this._select_add(_f);if(_h==0){_c=_f;_d=_g;}else{_c+=","+_f;_d+=_n+_g;}}}this._setIndex(_c);this._setText(_d);}if(!this.applyto_bindSource("value",this._p_value)){return;}}}};_pMultiCombo.set_index=function(_a){if(!nexacro._isString(_a)||_a.length==0){return;}var _b=_a.replace(/\s+/g,"");if(_b=="-1"){this._p_index="-1";}else{_b=_b.split(",").map(function(_d){return  +_d;});var _c=this._innerdataset;if(_c){_b=_b.filter(function(_d,_e){return _d>-1&&_d<_c.getRowCount()&&!isNaN(_d)&&_b.indexOf(_d)==_e;});}if(_b.length==0){return;}this._p_index=_b.join(",");}this.on_apply_index(_b);this.redraw();};_pMultiCombo.on_apply_index=function(_a){var _b=this.getElement();if(_b){var _c="";var _d="";var _e=this._innerdataset;if(_e){var _f,_g,_h;var _i=this._select_multi;var _j=_i.length;var _k=[];var _l=nexacro.getEnvironment();var _m=_l.multivalueseparator?_l.multivalueseparator:",";var _n=this._p_textseparator;for(_h=0;_h<_j;_h++ ){_k[_k.length]=_i.items[_h];}for(_h=0;_h<_k.length;_h++ ){this._select_remove(_k[_h]);}if(_a=="-1"){this._p_text="";this._p_value=undefined;}else{if(!nexacro._isArray(_a)){_a=_a.split(",");}for(_h=0;_h<_a.length;_h++ ){this._select_add(_a[_h]);_f=this._getItemText(_a[_h]);_g=this._getItemValue(_a[_h]);if(_h==0){_d=_f;_c=_g;}else{_d+=_n+_f;_c+=_m+_g;}}this._setText(_d);this._setValue(_c);}if(!this.applyto_bindSource("value",this._p_value)){return;}}else{this._p_index="-1";this._p_text="";this._p_value=undefined;}}};_pMultiCombo.set_displaynulltext=function(_a){_a=nexacro._toString(_a).replace(/&quot;/g,"\"");if(this._p_displaynulltext!=_a){this._p_displaynulltext=_a;this.on_apply_displaynulltext(_a);}};_pMultiCombo.on_apply_displaynulltext=function(_a){if(this._tagmode){var _b=this._p_multicombotagbox.tagboxedit;if(_b){_b.set_displaynulltext(_a);}}else{var _c=this._p_multicombotext;if(_c){_c.set_displaynulltext(_a);}}};_pMultiCombo.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly();}};_pMultiCombo._isReadOnly=function(){return this._p_readonly;};_pMultiCombo.on_apply_readonly=function(){var _a=this._isReadOnly();this._changeStatus("readonly",_a);var _b=this._p_multicombotext;if(_b){if(!this._onlydisplay){_b.set_readonly(_a);}else{_b._changeStatus("readonly",_a);}_b._setReadonlyView(true);if(nexacro._enableaccessibility){_b._setAccessibilityFlagReadOnly(_a);}}var _c=this._p_multicombotagbox;if(_c){_c.set_readonly(_a);}var _d=this._p_dropbutton;if(_d){_d._setEnable(this._isEnable()&&!_a);}var _e=this._p_multicombolist;if(_e){_e.set_readonly(_a);}};_pMultiCombo.set_autoselect=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoselect!=_a){this._p_autoselect=_a;this.on_apply_autoselect(_a);}};_pMultiCombo.on_apply_autoselect=function(_a){if(this._tagmode){var _b=this._p_multicombotagbox.tagboxedit;if(_b){_b.set_autoselect(_a);}}};_pMultiCombo.set_autoskip=function(_a){_a=nexacro._toBoolean(_a);if(this._p_autoskip!=_a){this._p_autoskip=_a;this.on_apply_autoskip(_a);}};_pMultiCombo.on_apply_autoskip=function(_a){var _b=this._p_multicombotext;if(_b){_b.set_autoskip(_a);}};_pMultiCombo.set_usesoftkeyboard=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this._p_usesoftkeyboard){this._p_usesoftkeyboard=_a;if(!this._initsoftkeyboard){this._initsoftkeyboard=true;}this.on_apply_usesoftkeyboard();}};_pMultiCombo.on_apply_usesoftkeyboard=function(){if(this._tagmode){var _a=this._p_multicombotagbox.tagboxedit;if(_a){_a.set_usesoftkeyboard(this._getUseSoftKeyboardValue(this._initsoftkeyboard));}}else{var _b=this._p_multicombolist;if(_b){var _c=_b.multicomboedit;if(_c){_c.set_usesoftkeyboard(this._getUseSoftKeyboardValue(this._initsoftkeyboard));}}}};_pMultiCombo.set_imemode=function(_a){var _b=["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"];if(_b.indexOf(_a)==-1){return;}if(this._p_imemode!=_a){this._p_imemode=_a;this.on_apply_imemode(_a);}};_pMultiCombo.on_apply_imemode=function(_a){if(this._tagmode){var _b=this._p_multicombotagbox.tagboxedit;if(_b){_b.set_imemode(_a);}}else{var _c=this._p_multicombolist;if(_c){var _d=_c.multicomboedit;if(_d){_d.set_imemode(_a);}}}};_pMultiCombo.set_type=function(_a){var _b=["dropdown","search","filter","filterlike","caseisearch","caseifilter","caseifilterlike"];if(_b.indexOf(_a)==-1){return;}if(this._p_type!=_a){this._p_type=_a;this.on_apply_type(_a);}};_pMultiCombo.on_apply_type=function(_a){if(this._filtereddataset){this._filtereddataset.filter("");}var _b=this.getElement();if(_b){if(this._tagmode){var _c=this._p_multicombotagbox;if(_c){_c._recalcLayout();}}}this.on_apply_readonly();this.on_apply_autoselect(this._p_autoselect);};_pMultiCombo.set_popuptype=function(_a){var _b=["normal","center","system","none"];if(_b.indexOf(_a)==-1){return;}if(this._p_popuptype!=_a){this._p_popuptype=_a;this.on_apply_popuptype(_a);}};_pMultiCombo.on_apply_popuptype=function(_a){var _b=this._popupcontrol;if(_b){_b._setType(_a);}};_pMultiCombo.set_popupsize=function(_a){if(this._p_popupsize!=_a){this._p_popupsize=_a;}};_pMultiCombo.set_usecontextmenu=function(_a){_a=nexacro._toBoolean(_a);if(this._p_usecontextmenu!=_a){this._p_usecontextmenu=_a;this.on_apply_usecontextmenu(_a);}};_pMultiCombo.set_acceptvaluetype=function(_a){var _b=["allowinvalid","ignoreinvalid"];if(_b.indexOf(_a)==-1){return;}this._p_acceptvaluetype=_a;};_pMultiCombo.on_apply_usecontextmenu=function(_a){if(this._tagmode){var _b=this._p_multicombotagbox.tagboxedit;if(_b){_b.set_usecontextmenu(_a);}}else{var _c=this._p_multicombotext;if(_c){_c.set_usecontextmenu(_a);}}};_pMultiCombo.set_innerdataset=function(_a){if(typeof _a!="string"){this.setInnerDataset(_a);return;}if(this._p_innerdataset!=_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";}else{_a=_a.replace("@","");var _b=this._findDataset(_a);this._innerdataset=_b?_b:"";this._p_innerdataset=_a;}this.on_apply_innerdataset(this._innerdataset);}else if(this._p_innerdataset&&!this._innerdataset){this._setInnerDatasetStr(this._p_innerdataset);this.on_apply_innerdataset(this._innerdataset);}};_pMultiCombo.on_apply_innerdataset=function(_a){if(this._p_multicombolist){var _b=this._p_multicombolist.checkboxset;if(_b){_b.setInnerDataset(_a);}}if(_a){_a._setEventHandler("onvaluechanged",this._on_dataset_onvaluechanged,this);_a._setEventHandler("onrowsetchanged",this._on_dataset_onrowsetchanged,this);if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}if(this._p_index!=="-1"){this._recheckIndex();}else if(this._p_value!==undefined){this._recheckValue();}else if(this._p_text!==""){this._recheckText();}this.redraw();}};_pMultiCombo.set_codecolumn=function(_a){if(this._p_codecolumn!=_a){this._p_codecolumn=_a;this.on_apply_codecolumn(_a);}};_pMultiCombo.on_apply_codecolumn=function(_a){if(this._p_multicombolist){var _b=this._p_multicombolist.checkboxset;if(_b){_b.set_codecolumn(_a);}}if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}if(this._is_created){if(this._p_index!=="-1"){this._recheckIndex();}else if(this._p_value!==undefined){this._recheckValue();}else if(this._p_text!==""){this._recheckText();}this.redraw();}};_pMultiCombo.set_datacolumn=function(_a){if(this._p_datacolumn!=_a){this._p_datacolumn=_a;this.on_apply_datacolumn(_a);}};_pMultiCombo.on_apply_datacolumn=function(_a){if(this._p_multicombolist){var _b=this._p_multicombolist.checkboxset;if(_b){_b.set_datacolumn(this._p_datacolumn);}}if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}if(this._is_created){if(this._p_index!=="-1"){this._recheckIndex();}else if(this._p_value!==undefined){this._recheckValue();}else if(this._p_text!==""){this._recheckText();}this.redraw();}};_pMultiCombo.set_readonlycolumn=function(_a){if(this._p_readonlycolumn!=_a){this._p_readonlycolumn=_a?_a:"";this.on_apply_readonlycolumn(this._p_readonlycolumn);}};_pMultiCombo.on_apply_readonlycolumn=function(_a){if(this._p_multicombolist){var _b=this._p_multicombolist.checkboxset;if(_b){_b.set_readonlycolumn(_a);}}if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}};_pMultiCombo.set_buttonsize=function(_a){if(this._p_buttonsize!=_a){this._p_buttonsize=_a;this.on_apply_buttonsize(_a);}};_pMultiCombo.on_apply_buttonsize=function(_a){this._recalcLayout();};_pMultiCombo.set_displayrowcount=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)||_a<0){return;}}if(this._p_displayrowcount!=_a){this._p_displayrowcount=_a;}};_pMultiCombo.set_itemheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_itemheight!=_a){this._p_itemheight=_a;this.on_apply_itemheight(_a);}};_pMultiCombo.on_apply_itemheight=function(_a){if(this._p_multicombolist){var _b=this._p_multicombolist.checkboxset;if(_b){_b.set_itemheight(_a);}}};_pMultiCombo.set_visible=function(_a){nexacro.Component.prototype.set_visible.call(this,_a);if(!this._p_visible&&this._isPopupVisible()){this._closePopup();}};_pMultiCombo.set_scrollbarbarminsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this.on_apply_scrollbarbarminsize(_a);};_pMultiCombo.on_apply_scrollbarbarminsize=function(_a){if(this._p_scrollbarbarminsize!=_a){this._p_scrollbarbarminsize=_a;if(this._p_multicombolist){var _b=this._p_multicombolist.checkboxset;if(_b){_b.set_scrollbarbarminsize(_a);}}}};_pMultiCombo.set_scrollbardecbuttonsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this.on_apply_scrollbardecbuttonsize(_a);};_pMultiCombo.on_apply_scrollbardecbuttonsize=function(_a){if(this._p_scrollbardecbuttonsize!=_a){this._p_scrollbardecbuttonsize=_a;if(this._p_multicombolist){var _b=this._p_multicombolist.checkboxset;if(_b){_b.set_scrollbardecbuttonsize(_a);}}}};_pMultiCombo.set_scrollbarbaroutsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this.on_apply_scrollbarbaroutsize(_a);};_pMultiCombo.on_apply_scrollbarbaroutsize=function(_a){if(this._p_scrollbarbaroutsize!=_a){this._p_scrollbarbaroutsize=_a;if(this._p_multicombolist){var _b=this._p_multicombolist.checkboxset;if(_b){_b.set_scrollbarbaroutsize(_a);}}}};_pMultiCombo.set_scrollbarincbuttonsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this.on_apply_scrollbarincbuttonsize(_a);};_pMultiCombo.on_apply_scrollbarincbuttonsize=function(_a){if(this._p_scrollbarincbuttonsize!=_a){this._p_scrollbarincbuttonsize=_a;if(this._p_multicombolist){var _b=this._p_multicombolist.checkboxset;if(_b){_b.set_scrollbarincbuttonsize(_a);}}}};_pMultiCombo.set_scrollbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this.on_apply_scrollbarsize(_a);};_pMultiCombo.on_apply_scrollbarsize=function(_a){if(this._p_scrollbarsize!=_a){this._p_scrollbarsize=_a;if(this._p_multicombolist){var _b=this._p_multicombolist.checkboxset;if(_b){_b.set_scrollbarsize(_a);}}}};_pMultiCombo.set_scrollbartrackbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this.on_apply_scrollbartrackbarsize(_a);};_pMultiCombo.on_apply_scrollbartrackbarsize=function(_a){if(this._p_scrollbartrackbarsize!=_a){this._p_scrollbartrackbarsize=_a;if(this._p_multicombolist){var _b=this._p_multicombolist.checkboxset;if(_b){_b.set_scrollbartrackbarsize(_a);}}}};_pMultiCombo.set_showselectallcheckbox=function(_a){_a=nexacro._toBoolean(_a);if(this._p_showselectallcheckbox!=_a){this._p_showselectallcheckbox=_a;if(this._p_multicombolist){this.on_apply_showselectallcheckbox();}}};_pMultiCombo.on_apply_showselectallcheckbox=function(){var _a;if(!this.isDropdown()){_a=this._selectDataset(true);if((this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike")&&_a.rowcount==0){_a=this._innerdataset;}this._popupcontrol.destroy();this._popupcontrol=null;this._p_multicombolist.destroy();this._p_multicombolist=null;this._createPopupListBoxControl(_a);}};_pMultiCombo.set_selectallcheckboxheight=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)){return;}}if(this._p_selectallcheckboxheight!=_a){this._p_selectallcheckboxheight=_a;}};_pMultiCombo.set_edittype=function(_a){var _b=["text","singletag","multitag","count"];if(_b.indexOf(_a)==-1){return;}if(this._p_edittype!=_a){this._p_edittype=_a;this.on_apply_edittype(_a);}};_pMultiCombo.on_apply_edittype=function(){var _a=this.getElement();if(_a){if(this._p_edittype=="singletag"||this._p_edittype=="multitag"){this._tagmode=true;this._createMultiComboTagBoxControl();this._setEventHandlerToMultiComboTagBox();}else{this._tagmode=false;this._createMultiComboTextControl();this._setEventHandlerToMultiComboText();}this._recalcLayout();this.redraw();}};_pMultiCombo.set_textseparator=function(_a){if(this._p_textseparator!=_a){if(_a==""||_a==undefined){this._p_textseparator=",";}else{this._p_textseparator=nexacro._toString(_a);}this.on_apply_textseparator();}};_pMultiCombo.on_apply_textseparator=function(){var _a=this._select_multi.items;var _b=_a.length;if(_b>0){var _c="";for(var _d=0;_d<_b;_d++ ){if(_d==0){_c+=this._getItemText(_a[_d]);}else{_c+=this._p_textseparator+this._getItemText(_a[_d]);}}this._setText(_c);}if(this._p_edittype=="text"){this._setMultiComboTextValue();}};_pMultiCombo.set_counttextformat=function(_a){if(_a&&!/\[\#\]|\[\*\]/.test(_a)){return;}_a=nexacro._toString(_a);if(this._p_counttextformat!=_a){this._p_counttextformat=_a;this.on_apply_counttextformat(_a);}};_pMultiCombo.on_apply_counttextformat=function(_a){if(this._p_multicombotext&&this._p_edittype=="count"){this._setMultiComboCountValue();}};_pMultiCombo.set_tagboxitemhorizontalgap=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)||_a<0){return;}}if(this._p_tagboxitemhorizontalgap!=_a){this._p_tagboxitemhorizontalgap=_a;this.on_apply_tagboxitemhorizontalgap();}};_pMultiCombo.on_apply_tagboxitemhorizontalgap=function(_a){if(this._tagmode){var _b=this._p_multicombotagbox;if(_b){_b._recalcLayout();}}};_pMultiCombo.set_tagboxitemverticalgap=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)||_a<0){return;}}if(this._p_tagboxitemverticalgap!=_a){this._p_tagboxitemverticalgap=_a;this.on_apply_tagboxitemverticalgap();}};_pMultiCombo.on_apply_tagboxitemverticalgap=function(_a){if(this._tagmode){var _b=this._p_multicombotagbox;if(_b){_b._recalcLayout();}}};_pMultiCombo.set_tagboxscrollbartype=function(_a){var _b=["default","auto","autoindicator","fixed","indicator","none"];if(_b.indexOf(_a)==-1){return;}if(this._p_tagboxscrollbartype!=_a){this._p_tagboxscrollbartype=_a;this.on_apply_tagboxscrollbartype(_a);}};_pMultiCombo.on_apply_tagboxscrollbartype=function(_a){var _b=this._p_multicombotagbox;if(_b){_b.set_scrollbartype(_a);}};_pMultiCombo.set_tagboxscrollbarsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this.on_apply_tagboxscrollbarsize(_a);};_pMultiCombo.on_apply_tagboxscrollbarsize=function(_a){if(this._p_tagboxscrollbarsize!=_a){this._p_tagboxscrollbarsize=_a;var _b=this._p_multicombotagbox;if(_b){_b.set_scrollbarsize(_a);}}};_pMultiCombo.set_tagboxscrollindicatorsize=function(_a){if(_a!==undefined){_a=parseInt(_a);if(isNaN(_a)){return;}}this.on_apply_tagboxscrollindicatorsize(_a);};_pMultiCombo.on_apply_tagboxscrollindicatorsize=function(_a){if(this._p_tagboxscrollindicatorsize!=_a){this._p_tagboxscrollindicatorsize=_a;var _b=this._p_multicombotagbox;if(_b){_b.set_scrollindicatorsize(_a);}}};_pMultiCombo.set_tagbuttonsize=function(_a){if(this._p_tagbuttonsize!=_a){this._p_tagbuttonsize=_a;this.on_apply_tagbuttonsize(_a);}};_pMultiCombo.on_apply_tagbuttonsize=function(){if(this._tagmode){var _a=this._p_multicombotagbox;if(_a){_a._recalcLayout();}}};_pMultiCombo.on_apply_font=function(_a){if(!this._isEnableRedraw()){return;}var _b=this._control_element;if(_b){_b.setElementFont(_a);this.redraw();};};_pMultiCombo._properties=[{name:"value"},{name:"index"},{name:"text"},{name:"codecolumn"},{name:"datacolumn"},{name:"readonlycolumn"},{name:"innerdataset"},{name:"autoselect"},{name:"autoskip"},{name:"usesoftkeyboard"},{name:"displaynulltext"},{name:"imemode"},{name:"readonly"},{name:"usecontextmenu"},{name:"displayrowcount"},{name:"buttonsize"},{name:"itemheight"},{name:"type"},{name:"popuptype"},{name:"popupsize"},{name:"acceptvaluetype"},{name:"tagboxitemhorizontalgap"},{name:"tagboxitemverticalgap"},{name:"tagboxscrollbartype"},{name:"tagboxscrollbarsize"},{name:"tagboxscrollindicatorsize"},{name:"tagbuttonsize"},{name:"showselectallcheckbox"},{name:"selectallcheckboxheight"},{name:"edittype"},{name:"textseparator"},{name:"counttextformat"},{name:"scrollbarbarminsize"},{name:"scrollbardecbuttonsize"},{name:"scrollbarsize"},{name:"scrollbarbaroutsize"},{name:"scrollbarincbuttonsize"},{name:"scrollbartrackbarsize"},{name:"dropbutton",readonly:true},{name:"multicombolist",readonly:true},{name:"multicombotagbox",readonly:true},{name:"multicombotext",readonly:true}];nexacro._defineProperties(_pMultiCombo,_pMultiCombo._properties);_pMultiCombo.dropdown=function(){var _a;if(!this._p_enable||this._p_readonly||!this._p_visible){return false;}if(this._tagmode){var _b=this._p_multicombotagbox.tagboxedit;if(_b){var _c=_b?_b._input_element:null;if(_c&&_c._is_accept_touch&&!_c._is_accept_touch()){return false;}}}if(!this.isDropdown()){_a=this._selectDataset(true);if((this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike")&&_a.rowcount==0){_a=this._innerdataset;}}else{return false;}var _d=this._find_lastFocused();if(_d instanceof nexacro.Div){_d=_d._getLastFocused();}if(_d!=this){this.setFocus(false);}this._showPopup(_a,this._p_index,1);};_pMultiCombo.isDropdown=function(){return this._isPopupVisible();};_pMultiCombo.getCaretPos=function(){if(this._p_readonly){return -1;}if(this._tagmode){var _a=this._p_multicombotagbox.tagboxedit;if(_a){return _a.getCaretPos();}}else{var _b=this._p_multicombotext;if(_b){return _b.getCaretPos();}}return -1;};_pMultiCombo.getSelect=function(_a){if(_a<0||_a>=this.getCount()||isNaN(_a)){return -1;}var _b=this._select_multi.items;var _c=_b.length;for(var _d=0;_d<_c;_d++ ){if(_b[_d]==_a){return true;}}return false;};_pMultiCombo.setSelect=function(_a,_b){_b=nexacro._toBoolean(_b);_a=parseInt(_a)|0;if(_a>=0){var _c=this._getItemReadonly(_a);if(_c){return;}if(_b==true){this._select_add(_a);this._insertIndex(_a,true);}else{this._select_remove(_a);this._removeindex(_a,true);}}else{this._clear_all(true);}this.redraw();};_pMultiCombo.getSelectedText=function(){if(this.getElement()&&this._p_multicombotext){return this._p_multicombotext.getSelectedText();}return "";};_pMultiCombo.setSelectedText=function(_a){if(this._tagmode&&this._p_type!="dropdown"){var _b=this._p_multicombotagbox.tagboxedit;if(_b){return _b.setSelectedText(_a);}}};_pMultiCombo.getInnerDataset=function(){return this._innerdataset;};_pMultiCombo.setInnerDataset=function(_a){this._removeEventHandlerToInnerDataset();if(!_a){this._innerdataset=null;this._p_innerdataset="";this.on_apply_innerdataset(null);}else if(_a instanceof nexacro.Dataset||(typeof _a=="object"&&_a._type_name=="Dataset")){this._innerdataset=_a;this._p_innerdataset=_a.id;this.on_apply_innerdataset(_a);if(this._is_created){this._recheckIndex();this.redraw();}}};_pMultiCombo.getCount=function(){if(this.getElement()){if(this._p_multicombolist){var _a=this._p_multicombolist.checkboxset;if(_a){return _a.getCount();}}else if(this._innerdataset){return this._innerdataset.getRowCount();}}return 0;};_pMultiCombo.redraw=function(){if(this._p_text||!nexacro._isNull(this._p_value)){this._setEditValue("");}else{this._setEditValue(undefined);}if(this._p_edittype=="text"){this._setMultiComboTextValue();}else if(this._p_edittype=="count"){this._setMultiComboCountValue();}else if(this._p_edittype=="singletag"||this._p_edittype=="multitag"){this._setMultiComboTagBoxValue();if(this._p_multicombotagbox){this._p_multicombotagbox._setScrollMaxPos();if(this._select_multi.tagselect!=-1){this._p_multicombotagbox._multicombotags[this._select_multi.tagselect]._changeUserStatus("selected",true);}}}};_pMultiCombo.updateToDataset=function(){return this.applyto_bindSource("value",this._p_value);};_pMultiCombo.getSelectedCount=function(){return this._select_multi.length;};_pMultiCombo.getSelectedItems=function(){if(this._select_multi&&this._select_multi.length>0){var _a=this._select_multi.items;var _b=[];for(var _c=0,_d=_a.length;_c<_d;_c++ ){_b[_c]=_a[_c];}_b.sort(function(_e,_f){return _e-_f;});return _b;}};_pMultiCombo.selectAll=function(){var _a=this._innerdataset.rowcount;if(_a<this._select_multi.length){return;}this._select_all(true);this.redraw();};_pMultiCombo.clearSelect=function(){if(this._select_multi&&this._select_multi.length>0){this._clear_all(true);this.redraw();}};_pMultiCombo.setSelectRange=function(_a,_b,_c){_c=nexacro._toBoolean(_c);_a=parseInt(_a)|0;_b=parseInt(_b)|0;var _d,_e;var _f=[];if(_a>_b){if(_c==true){for(_d=_a;_d>=_b;_d-- ){_e=this._getItemReadonly(_d);if(!_e){this._select_add(_d);_f.push(_d);}}this._insertIndex(_f,true);}else{for(_d=_a;_d>=_b;_d-- ){_e=this._getItemReadonly(_d);if(!_e){this._select_remove(_d);_f.push(_d);}}this._removeindex(_f,true);}}else{if(_c==true){for(_d=_a;_d<=_b;_d++ ){_e=this._getItemReadonly(_d);if(!_e){this._select_add(_d);_f.push(_d);}}this._insertIndex(_f,true);}else{for(_d=_a;_d<=_b;_d++ ){_e=this._getItemReadonly(_d);if(!_e){this._select_remove(_d);_f.push(_d);}}this._removeindex(_f,true);}}this.redraw();};_pMultiCombo.setSelectItems=function(_a,_b){_b=nexacro._toBoolean(_b);var _c,_d;var _e=[];if(_b==true){for(_c=0;_c<_a.length;_c++ ){_d=this._getItemReadonly(_a[_c]);if(_d){continue;}this._select_add(_a[_c]);_e.push(_a[_c]);}this._insertIndex(_e,true);}else{for(_c=0;_c<_a.length;_c++ ){_d=this._getItemReadonly(_a[_c]);if(_d){continue;}this._select_remove(_a[_c]);_e.push(_a[_c]);}this._removeindex(_e,true);}this.redraw();};_pMultiCombo._on_activate=function(){nexacro.Component.prototype._on_activate.call(this);if(this._tagmode){var _a=this._p_multicombotagbox.tagboxedit;if(_a){nexacro.Edit.prototype._on_activate.call(_a);}}else{var _b=this._p_multicombotext;if(_b){nexacro.Edit.prototype._on_activate.call(_b);}}};_pMultiCombo._on_dropdown=function(){if(this._p_readonly){return;}if(this._tagmode){var _a=this._p_multicombotagbox.tagboxedit;if(_a){var _b=_a?_a._input_element:null;if(_b&&_b._is_accept_touch&&!_b._is_accept_touch()){return false;}}}var _c=this._selectDataset(true);var _d=this._p_index;if(this._isPopupVisible()){this._closePopup();}else{if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._clearFilteredDataset();}this._showPopup(_c,_d,1);}};_pMultiCombo._on_dataset_onvaluechanged=function(_a,_b){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}this._recheckValue();this.redraw();if(this._is_created){this.on_fire_oninnerdatachanged(_a,_b.oldvalue,_b.newvalue,_b.columnid,_b.col,_b.row);}};_pMultiCombo._on_dataset_onrowsetchanged=function(_a,_b){if(_b.reason==nexacro.NormalDataset.REASON_FILTER){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){this._createFilteredDataset();}this._recheckValue();}else if(_b.reason==nexacro.NormalDataset.REASON_ASSIGN||_b.reason==nexacro.NormalDataset.REASON_CLEARDATA){this.set_index("-1");this._recheckIndex();}else if(_b.reason==nexacro.NormalDataset.REASON_COPY||_b.reason==nexacro.NormalDataset.REASON_ENABLEEVENT){if(this._p_index!="-1"){this._recheckIndex();}else if(this._p_value!==undefined){this._recheckValue();}else if(this._p_text!==""){this._recheckText();}}this.redraw();};_pMultiCombo._on_multicombotext_onlbuttondown=function(_a,_b){if(this._p_readonly||(nexacro._isTouchInteraction&&nexacro._SupportTouch)){return;}var _c=this._p_multicombotext;var _d=_c?_c._input_element:null;if(_d&&_d._is_accept_touch&&!_d._is_accept_touch()){return false;}var _e=this._selectDataset(true);var _f=this._p_index;if(this._isPopupVisible()){this._closePopup();}else{this._showPopup(_e,_f,1);}};_pMultiCombo._on_edit_onlbuttondown=function(_a,_b){if(this._p_readonly||(nexacro._isTouchInteraction&&nexacro._SupportTouch)){return;}if(this._tagmode){var _c=this._p_multicombotagbox.tagboxedit;if(_c){var _d=_c?_c._input_element:null;if(_d&&_d._is_accept_touch&&!_d._is_accept_touch()){return false;}}}var _e=this._selectDataset(true);var _f=this._p_index;if(this._isPopupVisible()){this._closePopup();}else{this._showPopup(_e,_f,1);}};_pMultiCombo._on_multicombotext_onkeydown=function(_a,_b){var _c=this._p_multicombolist&&this._p_multicombolist.checkboxset;if(this._p_readonly){return false;}var _d=this._selectDataset();var _e=this._p_datacolumn;var _f=this._p_codecolumn;if(!_d||(!_e&&!_f)){return;}var _g=_b.keycode;var _h;var _i;var _j;var _k=null;var _l="";var _m=_d.getRowCount();var _n;var _o=this._select_multi;var _p;if(this._isPopupVisible()){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){for(_p=0;_p<this._filtereddataset._viewRecords.length;_p++ ){if(_o.lastselected==this._filtereddataset._viewRecords[_p]._rawidx){_n=_p;}}_k=_c._get_rowobj_status("mouseover","status")||_c._get_rowobj_status("selected","userstatus",_n);if(_k){_h=_k.index;}}else{_k=_c._get_rowobj_status("mouseover","status")||_c._get_rowobj_status("selected","userstatus",_o.lastselected);if(_k){_h=_k.index;}}}if(_g==nexacro.Event.KEY_ESC){if(this._isPopupVisible()){this._closePopup();}}else if(_g==nexacro.Event.KEY_UP){if(this._isPopupVisible()){if(!_b.altkey){if(_h!=undefined){for(_p=_h -1;_p>=0;_p-- ){_j=this._getRawIndex(_d,_p);if(!this._getItemReadonly(_j)){_i=_p;break;}}if(_i==undefined){_i=_h;}_c._refreshScroll(_i,1);_c._select_withkeyupevent(_b.shiftkey,_h,_i);}}}}else if(_g==nexacro.Event.KEY_DOWN){if(this._isPopupVisible()){if(!_b.altkey){if(_h==undefined){for(_p=0;_p<_m;_p++ ){_j=this._getRawIndex(_d,_p);if(!this._getItemReadonly(_j)){_h=_p;_i=_p;break;}}}else{for(_p=_h+1;_p<_m;_p++ ){_j=this._getRawIndex(_d,_p);if(!this._getItemReadonly(_j)){_i=_p;break;}}if(_i==undefined){_i=_h;}}}if(_h!=undefined&&_i!=undefined){_c._refreshScroll(_i,0);_c._select_withkeydownevent(_b.shiftkey,_h,_i);}}else{var _q=this._p_multicombotext;var _r=_q?_q._input_element:null;if(_b.altkey&&(!_r||(_r&&(!_r._is_accept_touch||(_r._is_accept_touch&&_r._is_accept_touch()))))){this._showPopup(_d,_h,1);}}}else if(_g==nexacro.Event.KEY_ENTER){if(_h>=0){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){_j=this._getRawIndex(_d,_h);_j=(_j==-1)?_h:_j;_d.set_filterstr("");_h=_j;}else{_j=_h;}}else{_j=_h;}this.redraw();if(this._isPopupVisible()){if(_h>-1){_c._select_add(_h);this._insertIndex(_h);this._p_multicombotext.set_value();this.redraw();}this._is_close_popup_by_select=true;this._closePopup();this._is_close_popup_by_select=false;if(this._p_autoskip){this._setFocusToNextComponent();}}}else if(_g==nexacro.Event.KEY_PAGE_UP){if(this._isPopupVisible()){var _s=_h;if(_s<0){_s=0;}_i=_h-_c._page_rowcount;if(_i<=0){_i=0;}_l=_d.getColumn(_i,_e||_f);_l=_l==undefined?"":_l;_c._refreshScroll(null,null,_g);_c._change_status_item_from_key(_h,_i);}}else if(_g==nexacro.Event.KEY_PAGE_DOWN){if(this._isPopupVisible()){var _s=_h;if(_s<0){_s=0;}_i=_s+_c._page_rowcount;if(_i>=_m){_i=_m -1;}_l=_d.getColumn(_i,_e||_f);_l=_l==undefined?"":_l;_c._refreshScroll(null,null,_g);_c._change_status_item_from_key(_s,_i);}}else if(_g==nexacro.Event.KEY_HOME){if(this._isPopupVisible()&&this._p_type=="dropdown"){var _s=_h;if(_s<0){_s=0;}_i=0;_l=_d.getColumn(_i,_e||_f);_l=_l==undefined?"":_l;_c._refreshScroll(null,null,_g);_c._change_status_item_from_key(_s,_i);}}else if(_g==nexacro.Event.KEY_END){if(this._isPopupVisible()&&this._p_type=="dropdown"){var _s=_h;if(_s<0){_s=0;}_i=_m -1;_l=_d.getColumn(_i,_e||_f);_l=_l==undefined?"":_l;_c._refreshScroll(null,null,_g);_c._change_status_item_from_key(_s,_i);}}else if((_g==nexacro.Event.KEY_SPACE)&&_b.ctrlkey){if(this._isPopupVisible()&&_k){if(this._p_type=="dropdown"){_c._select_withmouseevent(_h);}else if(this._p_type=="search"||this._p_type=="caseisearch"){_c._select_withmouseevent(_k.index,_k);}else{_c._select_withmouseevent(this._filtereddataset._viewRecords[_k.index]._rawidx,_k);}this.redraw();}}else if((_g==65)&&_b.altkey){if(this._select_multi.length!=this._innerdataset.rowcount){this._select_all();}else{this._clear_all();}this.redraw();}};_pMultiCombo._on_edit_onkeydown=function(_a,_b){var _c=this._p_multicombolist&&this._p_multicombolist.checkboxset;if(this._p_readonly){return false;}var _d=this._selectDataset();var _e=this._p_datacolumn;var _f=this._p_codecolumn;var _g=this._p_datacolumn||this._p_codecolumn;if(!_d||(!_e&&!_f)){return;}var _h=_b.keycode;var _i;var _j;var _k;var _l=null;var _m="";var _n=_d.getRowCount();var _o=nexacro._enableaccessibility;var _p;var _q=this._select_multi;var _r;if(this._isPopupVisible()){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){for(_r=0;_r<this._filtereddataset._viewRecords.length;_r++ ){if(_q.lastselected==this._filtereddataset._viewRecords[_r]._rawidx){_p=_r;}}_l=_c._get_rowobj_status("mouseover","status")||_c._get_rowobj_status("selected","userstatus",_p);if(_l){_i=_l.index;}}else{_l=_c._get_rowobj_status("mouseover","status")||_c._get_rowobj_status("selected","userstatus",_q.lastselected);if(_l){_i=_l.index;}}}if(_h==nexacro.Event.KEY_ESC){if(this._isPopupVisible()){this._closePopup();}}else if(_h==nexacro.Event.KEY_UP){if(this._isPopupVisible()){if(!_b.altkey){if(_i!=undefined){for(_r=_i -1;_r>=0;_r-- ){_k=this._getRawIndex(_d,_r);if(!this._getItemReadonly(_k)){_j=_r;break;}}if(_j==undefined){_j=_i;}_c._refreshScroll(_j,1);_c._select_withkeyupevent(_b.shiftkey,_i,_j);}}}}else if(_h==nexacro.Event.KEY_DOWN){if(this._isPopupVisible()){if(!_b.altkey){if(_i==undefined){for(_r=0;_r<_n;_r++ ){_k=this._getRawIndex(_d,_r);if(!this._getItemReadonly(_k)){_i=_r;_j=_r;break;}}}else{for(_r=_i+1;_r<_n;_r++ ){_k=this._getRawIndex(_d,_r);if(!this._getItemReadonly(_k)){_j=_r;break;}}if(_j==undefined){_j=_i;}}}if(_i!=undefined&&_j!=undefined){_c._refreshScroll(_j,0);_c._select_withkeydownevent(_b.shiftkey,_i,_j);}}else{if(this._tagmode){var _s=this._p_multicombotagbox.tagboxedit;if(_s){var _t=_s?_s._input_element:null;if(_b.altkey&&(!_t||(_t&&(!_t._is_accept_touch||(_t._is_accept_touch&&_t._is_accept_touch()))))){this._showPopup(_d,_i,1);}}}}}else if(_h==nexacro.Event.KEY_ENTER){if(_i>=0){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){_k=this._getRawIndex(_d,_i);_k=(_k==-1)?_i:_k;_d.set_filterstr("");_i=_k;}else{_k=_i;}}else{_k=_i;}this.redraw();if(this._isPopupVisible()){if(_i>-1){_c._select_add(_i);this._insertIndex(_i);this.redraw();}this._is_close_popup_by_select=true;this._closePopup();this._is_close_popup_by_select=false;if(this._p_autoskip){this._setFocusToNextComponent();}}}else if(_h==nexacro.Event.KEY_PAGE_UP){if(this._isPopupVisible()){var _u=_i;if(_u<0){_u=0;}_j=_i-_c._page_rowcount;if(_j<=0){_j=0;}_m=_d.getColumn(_j,_e||_f);_m=_m==undefined?"":_m;_c._refreshScroll(null,null,_h);_c._change_status_item_from_key(_i,_j);}}else if(_h==nexacro.Event.KEY_PAGE_DOWN){if(this._isPopupVisible()){var _u=_i;if(_u<0){_u=0;}_j=_u+_c._page_rowcount;if(_j>=_n){_j=_n -1;}_m=_d.getColumn(_j,_e||_f);_m=_m==undefined?"":_m;_c._refreshScroll(null,null,_h);_c._change_status_item_from_key(_u,_j);}}else if(_h==nexacro.Event.KEY_HOME){if(this._isPopupVisible()&&this._p_type=="dropdown"){var _u=_i;if(_u<0){_u=0;}_j=0;_m=_d.getColumn(_j,_e||_f);_m=_m==undefined?"":_m;_c._refreshScroll(null,null,_h);_c._change_status_item_from_key(_u,_j);}}else if(_h==nexacro.Event.KEY_END){if(this._isPopupVisible()&&this._p_type=="dropdown"){var _u=_i;if(_u<0){_u=0;}_j=_n -1;_m=_d.getColumn(_j,_e||_f);_m=_m==undefined?"":_m;_c._refreshScroll(null,null,_h);_c._change_status_item_from_key(_u,_j);}}else if((_h==nexacro.Event.KEY_SPACE)&&_b.ctrlkey){if(this._isPopupVisible()&&_l){if(this._p_type=="dropdown"){_c._select_withmouseevent(_i);}else if(this._p_type=="search"||this._p_type=="caseisearch"){_c._select_withmouseevent(_l.index,_l);}else{var _d=this._selectDataset();_i=this._getRawIndex(_d,_l.index);_c._select_withmouseevent(_i,_l);}this.redraw();}}else if((_h==65)&&_b.altkey){if(this._select_multi.length!=this._innerdataset.rowcount){this._select_all();}else{this._clear_all();}this.redraw();}};_pMultiCombo._on_multicombotext_onkeyup=function(_a,_b){var _c=this._p_multicombolist&&this._p_multicombolist.checkboxset;if(this._p_readonly){return false;}var _d=this._selectDataset();var _e=this._p_datacolumn;var _f=this._p_codecolumn;if(!_d||(!_e&&!_f)){return;}var _g=_b.keycode;if(_g==nexacro.Event.KEY_UP||_g==nexacro.Event.KEY_DOWN){if(this._isPopupVisible()){var _h=_c._get_rowobj_status("mouseover","status")||_c._get_rowobj_status("selected","userstatus");if(_h){var _i=_h.index;if(!_b.shiftkey&&!_b.altkey){_c._shift_select_base_index=_i;}}}}else if(_g==nexacro.Event.KEY_SHIFT){if(this._isPopupVisible()){_c._is_shift_first_pressed=true;}}};_pMultiCombo._on_edit_onkeyup=function(_a,_b){var _c=this._p_multicombolist&&this._p_multicombolist.checkboxset;if(this._p_readonly){return false;}var _d=this._selectDataset();var _e=this._p_datacolumn;var _f=this._p_codecolumn;if(!_d||(!_e&&!_f)){return;}var _g=_b.keycode;if(_g==nexacro.Event.KEY_UP||_g==nexacro.Event.KEY_DOWN){if(this._isPopupVisible()){var _h=_c._get_rowobj_status("mouseover","status")||_c._get_rowobj_status("selected","userstatus");if(_h){var _i=_h.index;if(!_b.shiftkey&&!_b.altkey){_c._shift_select_base_index=_i;}}}}else if(_g==nexacro.Event.KEY_SHIFT){if(this._isPopupVisible()){_c._is_shift_first_pressed=true;}}};_pMultiCombo._on_edit_oninput=function(_a,_b){if(this._p_readonly||!this._isEnable()){return false;}this._isFiredOnInput=true;this.on_fire_oninput();var _c;if(this._tagmode){_c=this._p_multicombotagbox.tagboxedit;}else{_c=this._p_multicombolist.multicomboedit;}var _d=_c?_c._input_element:null;if(_d&&(_d._is_accept_touch&&!_d._is_accept_touch())){if(this._isPopupVisible()){this._closePopup();}this._isFiredOnInput=false;return false;}var _e=this._selectDataset();if(this._p_multicombotagbox){_c._processing_keyfilter=true;}if(_e){var _f=this._p_datacolumn||this._p_codecolumn;var _g=_c._p_text;var _h=_g;var _i=_g.lastIndexOf(this._p_textseparator);_g=_g.substr(_i+1);var _j=this._p_type;if(_j!="dropdown"){if(!this._p_multicombolist){this._createPopupListBoxControl(_e);}}var _k=this._p_multicombolist&&this._p_multicombolist.checkboxset;switch(_j){case "search":case "caseisearch":var _l;if(this._p_type=="caseisearch"){_l=_e.findRowExpr(_f+".match(/^"+_g+"/i)");if(_g==""){_l=-1;}}else{_l=_e.findRowAs(_f,_g);}if(_l>=0){if(this._p_edittype=="singletag"||this._p_edittype=="multitag"){this._showPopup(_e,_l);}else{var _m=this._innerdataset.rowcount;for(var _v=0;_v<_m;_v++ ){var _n=_k._getItem(_v);if(_n){_n._changeStatus("mouseover",false);}}}var _o=_k._getItem(_l);if(_o&&!_o.readonly){_o._changeStatus("mouseover",true);_k._set_last_selectfocused(_l);}}else{if(this._isPopupVisible()){if(this._p_edittype=="singletag"||this._p_edittype=="multitag"){this._closePopup();}else{var _m=this._innerdataset.rowcount;for(var _v=0;_v<_m;_v++ ){var _o=_k._getItem(_v);if(_o){_o._changeStatus("mouseover",false);}}}}}break;case "filter":case "filterlike":case "caseifilter":case "caseifilterlike":var _p;var _q="";var _r="";var _s=_g.length;var _l;for(var _v=0;_v<_s;_v++ ){_p=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;var _t=_g.charAt(_v);if(_p.test(_t)){_q+="\\";}_q+=_t;}_r=new nexacro.ExprParser()._transferWhitespace(_q);if(this._p_type=="filter"){_e.set_filterstr(_f+".match(/^("+_r+")/)");_l=_e.findRowAs(_f,_q);}else if(this._p_type=="filterlike"){_e.set_filterstr(_f+".indexOf('"+_q+"') > -1");_l=_e.findRowExpr(_f+".indexOf('"+_q+"') > -1");}else if(this._p_type=="caseifilter"){_e.set_filterstr(_f+".match(/^("+_r+")/i)");_l=_e.findRowExpr(_f+".match(/^("+_r+")/i)");}else{_e.set_filterstr(_f+".match(/("+_r+")/i)");_l=_e.findRowExpr(_f+".match(/("+_r+")/i)");}if(_g&&_e.getRowCount()>0){this._showPopup(_e,0);var _u=this._getWindow();if(_u){if(nexacro._Browser=="Runtime"&&(nexacro._SystemType.toLowerCase()=="win32"||nexacro._SystemType.toLowerCase()=="win64")){nexacro._flushCommand(_u);}}var _o=_k._getItem(_l);if(_o&&!_o.readonly){_o._changeStatus("mouseover",true);_k._set_last_selectfocused(_l);}}else{if(this._isPopupVisible()){this._closePopup();this._showPopup(_e,_l,1);}}break;default:break;}}this._isFiredOnInput=false;};_pMultiCombo._on_edit_oneditclick=function(_a,_b){this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_a,_a,_b.metakey);};_pMultiCombo._on_multicombotext_oneditclick=function(_a,_b){this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_a,_a,_b.metakey);};_pMultiCombo._on_edit_mobile_oneditclick=function(_a,_b){if(!this._p_readonly){var _c=(this._p_multicombotagbox&&this._p_multicombotagbox.tagboxedit)||(this._p_multicombolist&&this._p_multicombolist.multicomboedit);var _d=_c?_c._input_element:null;if(_d&&_d._is_accept_touch&&!_d._is_accept_touch()){}else{var _e=this._selectDataset(true);var _f=this._p_index;if(this._isPopupVisible()){this._closePopup();}else{if(this._p_type=="dropdown"){this._showPopup(_e,_f,1);}}}}this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_a,_a,_b.metakey);};_pMultiCombo._on_multicombotext_mobile_oneditclick=function(_a,_b){var _c=this._p_multicombotext;var _d=_c?_c._input_element:null;if(_d&&_d._is_accept_touch&&!_d._is_accept_touch()){}else{var _e=this._selectDataset(true);var _f=this._p_index;if(this._isPopupVisible()){this._closePopup();}else{if(this._p_type=="dropdown"){this._showPopup(_e,_f,1);}}}this.on_fire_oneditclick(_a,_b.caretpos,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_a,_a,_b.metakey);};_pMultiCombo._on_drop_onlbuttondown=function(_a,_b){if(_b.button=="lbutton"){this._on_dropdown();}};_pMultiCombo._on_drop_mobile_onclick=function(_a,_b){this._on_dropdown();};_pMultiCombo._on_drop_onclick=function(_a,_b){if(_b.button=="touch"){this._on_dropdown();}};_pMultiCombo._on_tagbox_onkeydown=function(_a,_b){var _c=_b.keycode;var _d=this._p_multicombotagbox;var _e=_d._multicombotags;var _f=this._select_multi.tagselect;var _g=this._select_multi.items;var _h,_i;if(_g.length==0){return;}if(_f!=-1){_h=_g.indexOf(_f);_i=_f;}else{_h=_g.indexOf(_g[_g.length-1]);_i=_g[_g.length-1];}if(_c==37||_c==39||_c==46){var _j=this.getCaretPos();if(_j!=0){return;}switch(_c){case 37:if(_h==0||_i<0){if(_f==-1){_e[_i]._changeUserStatus("selected",true);this._select_multi.tagselect=_f=_g[_g.length-1];}break;}if(_f==-1){_e[_i]._changeUserStatus("selected",true);this._select_multi.tagselect=_f=_g[_g.length-1];}else{_h-=1;_e[_f]._changeUserStatus("selected",false);_e[_g[_h]]._changeUserStatus("selected",true);this._select_multi.tagselect=_f=_g[_h];}var _k=_e[_f];_d._scrollTo(_k.left,_k.top);break;case 39:if(_f==-1){break;}if(_f==_g[_g.length-1]){if(this._p_type=="dropdown"){break;}_e[_f]._changeUserStatus("selected",false);this._select_multi.tagselect=_f=-1;_d.tagboxedit._apply_setfocus();var _k=_d._multicombotags[_g[_g.length-1]];}else{_h+=1;_e[_f]._changeUserStatus("selected",false);_e[_g[_h]]._changeUserStatus("selected",true);this._select_multi.tagselect=_f=_g[_h];var _k=_e[_f];}_d._scrollTo(_k.left,_k.top);break;case 46:var _l=_f;if(_f==-1){break;}if(_f==_g[_g.length-1]){_h-=1;_e[_f]._changeUserStatus("selected",false);if(_g.length!=1){_e[_g[_h]]._changeUserStatus("selected",true);this._select_multi.tagselect=_f=_g[_h];}}else{_h+=1;_e[_f]._changeUserStatus("selected",false);_e[_g[_h]]._changeUserStatus("selected",true);this._select_multi.tagselect=_f=_g[_h];var _k=_e[_f];}if(!this._p_enable||this._p_readonly||!this._p_visible){return false;}if(this._getItemReadonly(_l)){return false;}if(this._isPopupVisible()){this._p_multicombolist.checkboxset._select_withmouseevent(_l,_a);}else{this._select_remove(_l);this._removeindex(_l);}this._p_multicombotagbox._destroyMulticomboTag(_l);this._recalcLayout();this.redraw();if(this._select_multi.tagselect==-1){_d.tagboxedit._apply_setfocus();}}}};_pMultiCombo._on_tagbox_onlbuttondown=function(_a,_b){var _c=_b.fromreferenceobject instanceof nexacro.ScrollBarControl;var _d=_b.fromreferenceobject.parent instanceof nexacro.ScrollBarControl;var _e=_b.fromreferenceobject instanceof nexacro._MultiComboTagButtonControl;var _f=_b.fromreferenceobject instanceof nexacro.Static;var _g=_b.fromreferenceobject instanceof nexacro._TagBoxControl;var _h=this._p_multicombotagbox.tagboxedit;if(_c||_d||_e||_f||_g){return;}else if(_h.width){_h._apply_setfocus();return;}_h._apply_setfocus();if(_b.button=="lbutton"){this._on_dropdown();}};_pMultiCombo._on_tagbox_mobile_onclick=function(_a,_b){var _c=_b.fromreferenceobject instanceof nexacro.ScrollBarControl;var _d=_b.fromreferenceobject.parent instanceof nexacro.ScrollBarControl;var _e=_b.fromreferenceobject instanceof nexacro._MultiComboTagButtonControl;var _f=_b.fromreferenceobject instanceof nexacro.Static;var _g=_b.fromreferenceobject instanceof nexacro._TagBoxControl;var _h=this._p_multicombotagbox.tagboxedit;if(_c||_d||_e||_f||_g){return;}else if(_h.width){_h._apply_setfocus();return;}_h._apply_setfocus();if(_b.button=="lbutton"){this._on_dropdown();}};_pMultiCombo._on_list_onitemclick=function(_a,_b){if(!this._p_multicombolist){return false;}var _c=_b.index;var _d=_b.itemtext;var _e=_b.itemvalue;this.on_fire_onitemclick(_a,_c,_d,_e,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.metakey);if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){var _f=this._selectDataset();_c=this._getRawIndex(_f,_b.index);if(_c!=this._p_index){_d=this._getItemText(_c);_e=this._getItemValue(_c);}}var _g=this._p_multicombolist&&this._p_multicombolist.checkboxset;_g._select_withmouseevent(_c,_a);this._is_close_popup_by_select=true;this.redraw();if(_f&&_f._p_filterstr!=""){_f.set_filterstr("");var _h=this._popupcontrol;if(_h){_h._popupAuto();}_g._redrawListBoxContents(true);_g._onRecalcScrollSize();}if(this._tagmode){this._p_multicombotagbox.tagboxedit._apply_setfocus();}else{if(this._p_type!="dropdown"&&this._isPopupVisible()){this._p_multicombolist.multicomboedit._apply_setfocus();}else{this._p_multicombotext._apply_setfocus();}}if(this._isPopupVisible()){if(this._p_autoskip){this._setFocusToNextComponent();}}this._is_close_popup_by_select=false;};_pMultiCombo._on_list_oncloseup=function(_a,_b){var _c=this._getWindow();if(_c&&this._track_capture){_c._releaseCaptureLock(this);}if(!this._isFiredOnInput){if(this._p_displaynulltext!=""&&nexacro._isNull(this._p_value)){this._setEditValue(undefined);}else{this._setEditValue("");}this._clearFilteredDataset();var _d=this._p_multicombotext;if(_d){_d._apply_setfocus("focus");}}this._changeStatus("mouseover",false);if(this._p_dropbutton){this._p_dropbutton._changeStatus("mouseover",false);}if(this._p_multicombotext){this._p_multicombotext._changeStatus("mouseover",false);}if(this._p_multicombotagbox){this._p_multicombotagbox._changeStatus("mouseover",false);}this.on_fire_oncloseup(this,this._default_index,this._default_text,this._default_value,this._p_index,this._p_text,this._p_value,this._is_close_popup_by_select);};_pMultiCombo.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){this._changeStatus("focused",true);if(nexacro._enableaccessibility){this._setAccessibilityStatFocus(_b);}this._apply_setfocus(_b);};_pMultiCombo.on_killfocus_basic_action=function(_a,_b){nexacro.Component.prototype.on_killfocus_basic_action.call(this);var _c=this._p_multicombotext;if(_c){_c._changeStatus("focused",false);if(nexacro._enableaccessibility){if(nexacro._Browser=="Runtime"){_c._is_subfocused=false;}}if(this._p_text!=this._p_multicombotext._p_text){_c.setCaretPos(0);}}if(this._select_multi.tagselect!=-1){this._p_multicombotagbox._multicombotags[this._select_multi.tagselect]._changeUserStatus("selected",false);this._select_multi.tagselect=-1;}this.redraw();if(this._isPopupVisible()){this._closePopup();}};_pMultiCombo.on_fire_sys_onaccessibilitygesture=function(_a,_b,_c){var _d=false;if(this._isPopupVisible()){var _e=this._p_multicombolist&&this._p_multicombolist.checkboxset;var _f=null;var _g=_e._getContentsCount();if(_g){if(_a){_e._overeditemindex++ ;}else{_e._overeditemindex-- ;}if(_e._overeditemindex<0||_e._overeditemindex>_g -1){if(this._isPopupVisible()){this._closePopup();}_e._overeditemindex=-1;}else{_f=_e._getItem(_e._overeditemindex);}}if(_f){_d=true;_f._setAccessibilityNotifyEvent();}}return _d;};_pMultiCombo.on_fire_sys_onslide=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.prototype.on_fire_sys_onslide.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);return (this._popupcontrol&&this._popupcontrol._is_popup())?true:false;};_pMultiCombo.on_fire_sys_onfling=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.prototype.on_fire_sys_onfling.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);return (this._popupcontrol&&this._popupcontrol._is_popup())?true:false;};_pMultiCombo.on_fire_oneditclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.oneditclick&&this.oneditclick._has_handlers){var _p=new nexacro.EditClickEventInfo(_a,"oneditclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o);return this.oneditclick._fireEvent(this,_p);}return true;};_pMultiCombo.on_fire_onitemclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.onitemclick&&this.onitemclick._has_handlers){var _p=new nexacro.ItemClickEventInfo(_a,"onitemclick",_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this.onitemclick._fireEvent(this,_p);}return false;};_pMultiCombo.on_fire_canitemchange=function(_a,_b,_c,_d,_e,_f,_g){if(this.canitemchange&&this.canitemchange._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"canitemchange",_b,_c,_d,_e,_f,_g);var _i=this.canitemchange._fireCheckEvent(this,_h);return nexacro._toBoolean(_i);}return true;};_pMultiCombo.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(this.onitemchanged&&this.onitemchanged._has_handlers){var _h=new nexacro.ItemChangeEventInfo(this,"onitemchanged",_b,_c,_d,_e,_f,_g);this.onitemchanged._fireEvent(this,_h);}};_pMultiCombo.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f,_g,_h){var _i;if(this.oncloseup&&this.oncloseup._has_handlers){var _j=new nexacro.ComboCloseUpEventInfo(this,"oncloseup",_b,_c,_d,_e,_f,_g,_h);_i=this.oncloseup._fireEvent(this,_j);_i=nexacro._toBoolean(_i);}return _i;};_pMultiCombo.on_fire_ondropdown=function(_a){if(this.ondropdown&&this.ondropdown._has_handlers){var _b=new nexacro.EventInfo(this,"ondropdown");return this.ondropdown._fireCheckEvent(this,_b);}return true;};_pMultiCombo.on_fire_oninput=function(){if(this.oninput&&this.oninput._has_handlers){var _a=new nexacro.InputEventInfo(this,"oninput");return this.oninput._fireEvent(this,_a);}return true;};_pMultiCombo.on_fire_oninnerdatachanged=function(_a,_b,_c,_d,_e,_f){if(this.oninnerdatachanged&&this.oninnerdatachanged._has_handlers){var _g=new nexacro.InnerdataChangedEventInfo(_a,"oninnerdatachanged",_b,_c,_d,_e,_f);return this.oninnerdatachanged._fireEvent(this,_g);}return true;};_pMultiCombo.on_fire_sys_onrbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.isDropdown()){var _o=this._p_multicombolist&&this._p_multicombolist.checkboxset;if(_o){var _p=_o._selectinfo_list;if(this._scroll_proc){if(_p.length){var _q=_p.length-1;var _r=_p[_q];if(_r.index!=this._p_index){_r.obj._stat_change("notselect","normal");_p.splice(_q,1);}}return;}while(_p.length){var _s=_p[0].obj;if(_s){if(!_s.selected){_s._stat_change("notselect","normal");}}_p.shift();}}}return;};_pMultiCombo._on_tagbutton_onclick=function(_a,_b){if(!this._p_enable||this._p_readonly||!this._p_visible){return false;}if(this._getItemReadonly(_a)){return false;}if(this._isPopupVisible()){var _c=this._p_multicombolist&&this._p_multicombolist.checkboxset;if(_c){_c._select_withmouseevent(_a,_b);}}else{this._select_remove(_a);this._removeindex(_a);}this._p_multicombotagbox._destroyMulticomboTag(_a);this._recalcLayout();this.redraw();};_pMultiCombo._createMultiComboTagBoxControl=function(){if(this._p_multicombotext){this._p_multicombotext.destroy();this._p_multicombotext=null;}var _a=this._p_multicombotagbox;if(!_a){_a=this._p_multicombotagbox=new nexacro._MultiComboTagBoxControl("multicombotagbox",0,0,0,0,null,null,null,null,null,null,this);_a.createComponent();_a.set_scrollbartype(this._p_tagboxscrollbartype);_a.set_scrollbarsize(this._p_tagboxscrollbarsize);_a.set_scrollindicatorsize(this._p_tagboxscrollindicatorsize);}if(this._p_edittype=="singletag"){_a.set_scrolltype("horizontal");}else{_a.set_scrolltype("vertical");}};_pMultiCombo._createMultiComboTextControl=function(){if(this._p_multicombotagbox){this._p_multicombotagbox.destroy();this._p_multicombotagbox=null;}var _a=this._p_multicombotext;if(!_a){_a=this._p_multicombotext=new nexacro.Edit("multicombotext",0,0,0,0,null,null,null,null,null,null,this,this._onlydisplay);_a._setControl();_a.createComponent(true);if(this._is_created){_a.on_created();}_a._setReadonlyView(true);_a.set_displaynulltext(this._p_displaynulltext);_a.set_readonly(this._p_readonly);_a.set_usecontextmenu(this._p_usecontextmenu);}};_pMultiCombo._createListBoxControl=function(_a){var _b=this._p_multicombolist;if(!_b){_b=this._p_multicombolist=new nexacro._MultiComboListControl("multicombolist",0,0,0,0,null,null,null,null,null,null,this);_b._setPopupContains(true);_b.createComponent(true);if(!this._tagmode&&this._p_type!="dropdown"){_b._createPopupEditControl();}if(this._p_showselectallcheckbox){_b._createSelectAllCheckBoxControl();}}_b._createCheckBoxSetControl(_a);};_pMultiCombo._createdListBoxControl=function(){var _a=this._p_multicombolist;if(_a&&!_a._is_created){_a.on_created();if(_a.multicomboedit){_a._createdPopupEditControl();}if(_a.selectallcheckbox){_a._createdSelectAllCheckBoxControl();}if(_a.checkboxset){_a._createdCheckBoxSetControl();}}};_pMultiCombo._createPopupControl=function(){var _a=this._popupcontrol;if(!_a){_a=this._popupcontrol=new nexacro._MultiComboPopupControl("multicombopopup",0,0,0,0,null,null,null,null,null,null,this);_a._setType(this._p_popuptype);_a.createComponent(true);}};_pMultiCombo._createdPopupControl=function(_a){var _b=this._popupcontrol;if(_b&&!_b._is_created){_b._attach(_a);_b.on_created();}};_pMultiCombo._createPopupListBoxControl=function(_a){if(!this._isUsableDataset(_a)){return;}this._createPopupControl();this._createListBoxControl(_a);this._createdPopupControl(this._p_multicombolist);this._createdListBoxControl();};_pMultiCombo._createFilteredDataset=function(){var _a=this._innerdataset;var _b=this._filtereddataset;var _c=this._p_codecolumn;var _d=this._p_datacolumn;var _e=this._p_readonlycolumn;var _f=this._p_multicombolist&&this._p_multicombolist.checkboxset;if(_a&&(!(_c in _a.colinfos)||!(_d in _a.colinfos))){return;}if(!this._isUsableDataset(_a)){return;}if(!_b){_b=this._filtereddataset=new nexacro.Dataset("filter_"+this.id);}_b.set_enableevent(false);_b.clear();_b.addColumn(_c,"string");_b.addColumn(_d,"string");_b.addColumn(_e,"string");for(var _g=0,_h=_a.getRowCount();_g<_h;_g++ ){_b.insertRow(_g);_b.setColumn(_g,_c,_a.getColumn(_g,_c));_b.setColumn(_g,_d,_a.getColumn(_g,_d));_b.setColumn(_g,_e,_a.getColumn(_g,_e));}_b.set_enableevent(true);if(_f){_f._redrawListBoxContents(false);_f._onRecalcScrollSize();}};_pMultiCombo._recalcLayout=function(){if(this._is_created_contents){var _a=this._p_dropbutton;var _b=this._p_multicombotext;var _c=this._p_multicombotagbox;var _d=this._getClientLeft();var _e=this._getClientTop();var _f=this._getClientWidth();var _g=this._getClientHeight();var _h=this._p_buttonsize;var _i,_j;if(_h==undefined){_i=_g;_j=_g;}else{if(typeof (_h)=="number"){_i=_j=_h;}else{_h=_h.split(" ");_i= +_h[0];_j=(_h[1])? +_h[1]:_g;}}if(_i>_f){_i=_f;}if(_j>_g){_j=_g;}if(_b){var _k,_l;_k=_f-_i;_l=_g;_b.move(_d,_e,_k,_l,null,null);}if(_c){var _m,_n;_m=_f-_i;_n=_g;_c.move(_d,_e,_m,_n,null,null);_c._recalcLayout();}if(_a){var _o=_f-_i;var _p=_e;if(_j<_g){_p=(_g-_j)/2;}_a.move(_o,_p,_i,_j,null,null);}}};_pMultiCombo._recheckIndex=function(){var _a=this._p_index;var _b="";var _c="";var _d="";var _e=this._innerdataset;if(_e&&_a!="-1"){var _f=nexacro.getEnvironment();var _g=_f.multivalueseparator?_f.multivalueseparator:",";var _h=this._p_textseparator;_a=_a.split(",");var _i,_j,_k;for(var _l=0;_l<_a.length;_l++ ){_i=_a[_l];_k=this._getItemValue(_i);if(_k){_j=this._getItemText(_i);if(_b==""){_b=_i.toString();_c=_j;_d=_k;}else{_b+=","+_i;_c+=_h+_j;_d+=_g+_k;}}else{this._select_remove(_i);}}}else{_b="-1";}this._setIndex(_b);this._setText(_c);this._setValue(_d);};_pMultiCombo._recheckValue=function(){var _a=this._p_value;var _b="";var _c="";var _d="";var _e=this._innerdataset;if(_e&&_a){var _f=nexacro.getEnvironment();var _g=_f.multivalueseparator?_f.multivalueseparator:",";var _h=this._p_textseparator;_a=_a.split(_g);var _i,_j,_k;for(var _l=0;_l<_a.length;_l++ ){_k=_a[_l];_i=this._getIndexFromValue(_e,_k);if(_i>-1){_j=this._getItemText(_i);if(_b==""){_b=_i.toString();_c=_j;_d=_k;}else{_b+=","+_i;_c+=_h+_j;_d+=_g+_k;}}}}else{_d=undefined;}this._setIndex(_b);this._setText(_c);this._setValue(_d);};_pMultiCombo._recheckText=function(){var _a=this._p_text;var _b=[];var _c=[];var _d=[];var _e=this._innerdataset;if(_e){var _f=nexacro.getEnvironment();var _g=_f.multivalueseparator?_f.multivalueseparator:",";var _h=this._p_textseparator;_a=_a.split(_h);var _i,_j,_k;for(var _l=0;_l<_a.length;_l++ ){_j=_a[_l];_i=this._getIndexFromText(_e,_j);if(_i){_k=this._getItemValue(_i);if(_b==""){_b=_i.toString();_c=_j;_d=_k;}else{_b+=","+_i;_c+=_h+_j;_d+=_g+_k;}}}}else{_c="";}this._setIndex(_b);this._setText(_c);this._setValue(_d);};_pMultiCombo._selectDataset=function(_a){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){if(!this._filtereddataset){this._createFilteredDataset();}else{if(_a){this._clearFilteredDataset();}}return this._filtereddataset;}else{return this._innerdataset;}};_pMultiCombo._showPopup=function(_a,_b,_c){this._on_showPopup(_a,_b);};_pMultiCombo._on_showPopup=function(_a,_b){if(!this._p_visible){return;}if(this._isPopupVisible()){this._closePopup();}var _c=this._getWindow();var _d=this._innerdataset.rowcount;if(this.on_fire_ondropdown(this)){if((this.ondropdown&&this.dropdown.preventable&&this.ondropdown.defaultprevented)||!this._isUsableDataset(_a)||this._getPopupType()=="none"){return;}_b=(_d==this._innerdataset.rowcount)?_b:this._p_index;this._createPopupListBoxControl(_a);var _e=this._popupcontrol;if(_e){_e._popupAuto();}var _f=this._p_multicombolist;var _g=this._p_multicombotext;if(_f){var _h=_f.checkboxset;if(_h){_h._redrawListBoxContents(false);_h._onRecalcScrollSize();var _i=_h._getInnerdatasetInfo("_rowcount");_h._on_last_selectfocuschanged(_i -1);if(!_b||_b=="-1"){_h._refreshScroll(0,1);}else{_h._refreshScroll(this._select_multi.items[this._select_multi.items.length-1],1);}if(_c){_c._setCaptureLock(this,true,false);}if(nexacro._enableaccessibility){this._setAccessibilityStatExpanded(true);if(nexacro._accessibilitytype==4){_h.setFocus(false);}else if(nexacro._accessibilitytype==5){this._want_arrows=true;_h._setAccessibilityNotifyEvent();}if(nexacro._Browser=="Runtime"){if(_g){_g._setAccessibilityLabel(this._p_text);_g._setAccessibilityDescription("");_g._setAccessibilityAction("");_g.setFocus(true);}}}if(!this._isFiredOnInput){if(this._tagmode){var _j=this.multicombotagbox.tagboxedit;if(_j){_j._apply_setfocus("focus");}}else{var _k=_f.multicomboedit;if(_k){_k._apply_setfocus("focus");}}}}}}};_pMultiCombo._applyZoomPopup=function(){if(this._popupcontrol&&this._popupcontrol._is_popup()){if(this._p_enable===false||this._p_readonly===true||this._p_visible===false){return;}var _a=this._selectDataset();if(_a){if(_a.getRowCount()<=0){_a=this._innerdataset;}this._showPopup(_a,this._p_index);}}};_pMultiCombo._closePopup=function(){var _a=this._getWindow();if(_a){_a._releaseCaptureLock(this);}var _b=this._popupcontrol;if(_b){_b._closePopup();nexacro._refreshWindow(_a.handle);}if(nexacro._enableaccessibility){this._want_arrows=false;this._setAccessibilityStatExpanded(false);var _c=this._p_multicombolist&&this._p_multicombolist.checkboxset;if(_c){_c._overeditemindex=-1;}if(nexacro._Browser=="Runtime"){var _d=this._p_multicombotext;if(_d){_d.on_apply_accessibility();}}}};_pMultiCombo._setContents=function(_a){var _b=nexacro._parseXMLDocument(_a);var _c=_b.getElementsByTagName("Dataset")[0];if(!_c){return false;}var _d=_c.attributes[0].value;var _e=new nexacro.NormalDataset(_d,this);if(_c.firstChild){var _f=_c.firstChild;var _g="";while(_f){if(_c.nodeType==1){_g+=nexacro._documentToXml(_f);}_f=_f.nextSibling;}_e._setContents(_g);}this.set_innerdataset(_e);return true;};_pMultiCombo._select_indexOfkey=function(_a){_a+="";return nexacro._indexOf(this._select_multi.keys,_a);};_pMultiCombo._select_replace=function(_a,_b){var _c=this._select_indexOfkey(_a);var _d=this._select_multi;_d.items[_c]=_b;_d.map[_a]=_b;};_pMultiCombo._select_add=function(_a){if(_a<0||_a>this._innerdataset.getRowCount()-1){return;}_a= +_a;var _b=_a+"";var _c=this._select_multi;var _d=this._select_indexOfkey(_a);if(_d<0){_c.map[_b]=_a;_c.length++ ;_c.items.push(_a);_c.keys.push(_b);_c.lastselected=_a;_c.tagselect=-1;}};_pMultiCombo._select_remove=function(_a){var _b=this._select_indexOfkey(_a);var _c=this._select_multi;if(_b<_c.length&&_b>=0){_c.length-- ;_c.items.splice(_b,1);var _d=_c.keys[_b];if(typeof _d!='undefined'){_c.map[_d]=undefined;}_c.keys.splice(_b,1);_c.lastselected=_c.items[_c.items.length-1];if(_c.tagselect==_a){_c.tagselect=-1;}return _a;}return false;};_pMultiCombo._clear_all=function(_a,_b){var _c=this._p_multicombolist&&this._p_multicombolist.checkboxset;var _d=this._select_multi.items;var _e=this._select_multi.length;var _f=[];for(var _i=_e -1;_i>=0;_i-- ){var _g=_d[_i];if(!this._getItemReadonly(_g)){if(_c){var _h=_c._getItem(_g);if(_h){_h.set_selected(false);}}this._select_remove(_g);_f.push(_g);}}this._removeindex(_f,_a,_b);};_pMultiCombo._select_all=function(_a){var _b=this._p_multicombolist&&this._p_multicombolist.checkboxset;var _c=this._innerdataset.rowcount;var _d=[];for(var _f=0;_f<_c;_f++ ){if(!this._getItemReadonly(_f)){if(_b){var _e=_b._getItem(_f);if(_e){_e.set_selected(true);}}this._select_add(_f);_d.push(_f);}}this._insertIndex(_d,_a);};_pMultiCombo._changeIndex=function(_a,_b,_c){if(!_c){var _d,_e,_f,_g,_h,_i,_j,_k,_l,_m;var _n=nexacro.getEnvironment();var _o=_n.multivalueseparator?_n.multivalueseparator:",";var _p=this._p_textseparator;_g=this._p_index;_h=this._p_text;_i=this._p_value;_j=_k=_l="";if(typeof _a==="number"){_a=[_a];}for(_m=0;_m<_a.length;_m++ ){_d=_a[_m].toString();_f=this._getItemText(_d);_e=this._getItemValue(_d);if(_m==0){_j=_d;_k=_f;_l=_e;}else{_j+=","+_d;_k+=_p+_f;_l+=_o+_e;}}if(_b!=true){if(this.on_fire_canitemchange(this,_g,_h,_i,_j,_k,_l)!=false){this._setIndex(_j);this._setText(_k);this._setValue(_l);this.applyto_bindSource("value",this._p_value);this.on_fire_onitemchanged(this,_g,_h,_i,_j,_k,_l);}}else{this._setIndex(_j);this._setText(_k);this._setValue(_l);this.applyto_bindSource("value",this._p_value);}}};_pMultiCombo._insertIndex=function(_a,_b,_c){if(!_c){var _d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n;var _o=nexacro.getEnvironment();var _p=_o.multivalueseparator?_o.multivalueseparator:",";var _q=this._p_textseparator;_g=_j=this._p_index;_h=_k=this._p_text;_i=_l=this._p_value;if(typeof _a==="number"){_a=[_a];}if(_g=="-1"){_n=_a;}else{var _r=_g.split(",");_n=_a.filter(function(_e,_m){return _r.indexOf(_e+"")==-1&&_a.indexOf(_e)==_m;});}if(_n.length==0){return false;}for(_m=0;_m<_n.length;_m++ ){_d=_n[_m].toString();_f=this._getItemText(_d);_e=this._getItemValue(_d);if(_j=="-1"){_j=_d;_k=_f;_l=_e;}else{_j+=","+_d;_k+=_q+_f;_l+=_p+_e;}}if(_b!=true){if(this.on_fire_canitemchange(this,_g,_h,_i,_j,_k,_l)!=false){this._setIndex(_j);this._setText(_k);this._setValue(_l);this.applyto_bindSource("value",this._p_value);this.on_fire_onitemchanged(this,_g,_h,_i,_j,_k,_l);}}else{this._setIndex(_j);this._setText(_k);this._setValue(_l);this.applyto_bindSource("value",this._p_value);}}};_pMultiCombo._removeindex=function(_a,_b,_c){if(!_c){var _d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n;var _o=nexacro.getEnvironment();var _p=_o.multivalueseparator?_o.multivalueseparator:",";var _q=this._p_textseparator;_g=this._p_index;_h=this._p_text;_i=this._p_value;_j=this._p_index=="-1"?this._p_index:this._p_index.split(",");_k=this._p_text==""?this._p_text:this._p_text.split(_q);_l=this._p_value==undefined?this._p_value:this._p_value.split(_p);if(typeof _a==="number"){_a=[_a];}if(_g=="-1"){return false;}else{_n=_a.filter(function(_e,_m){return _g.indexOf(_e)!=-1&&_a.indexOf(_e)==_m;});}if(_n.length==0){return false;}for(_m=0;_m<_n.length;_m++ ){_d=_n[_m].toString();_f=this._getItemText(_d);_e=this._getItemValue(_d);_j.splice(_j.indexOf(_d),1);if(_k){_k.splice(_k.indexOf(_f),1);}if(_l){_l.splice(_l.indexOf(_e),1);}}if(_j.length==0){_j="-1";_k="";_l=undefined;}else{_j=_j.join(",");_k=_k.join(_q);_l=_l.join(_p);}if(_b!=true){if(this.on_fire_canitemchange(this,_g,_h,_i,_j,_k,_l)!=false){this._setIndex(_j);this._setText(_k);this._setValue(_l);this.applyto_bindSource("value",this._p_value);this.on_fire_onitemchanged(this,_g,_h,_i,_j,_k,_l);}}else{this._setIndex(_j);this._setText(_k);this._setValue(_l);this.applyto_bindSource("value",this._p_value);}}};_pMultiCombo._convertValueType=function(_a,_b){var _c;if(_b){_c=nexacro.Component.prototype._convertValueType.call(this,_a);}else{_c=nexacro._isNull(_a)?_a:nexacro._toString(_a);}return _c;};_pMultiCombo._setValue=function(_a){if(_a==undefined||_a.length==0){this._p_value=undefined;}else{this._p_value=_a;}};_pMultiCombo._setEditValue=function(_a,_b){if(this._tagmode){var _c=this._p_multicombotagbox.tagboxedit;if(_c){var _d=_c._p_value;if(_d!=_a){_c._setValue(_a);if(nexacro._enableaccessibility){_c._updateAccessibilityLabel();if(_a){if(nexacro._Browser=="Runtime"&&_c._status=="focused"){_c._setAccessibilityLabel(_a);_c._notifyAccessibility(_a,"notify");}}}}}}else{var _e=this._p_multicombolist;if(_e){var _f=_e.multicomboedit;if(_f){var _d=_f._p_value;if(_d!=_a){_f._setValue(_a);}}}}};_pMultiCombo._setTextValue=function(_a){var _b=this._p_multicombotext;if(_b){var _c=_b._p_value;if(_c!=_a){_b._setValue(_a);}}};_pMultiCombo._setIndex=function(_a){if(_a=="-1"||_a.length==0){this._p_index="-1";}else{this._p_index=_a;}};_pMultiCombo._setText=function(_a){if(!_a||_a.length==0){this._p_text="";}else{this._p_text=_a;}};_pMultiCombo._setDefaultProps=function(_a,_b,_c){this._default_value=_b;this._default_text=_c;this._default_index=_a;};_pMultiCombo._setEventHandlerToMultiComboText=function(){var _a=this._p_multicombotext;if(_a){var _b=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_b){_a._setEventHandler("oneditclick",this._on_multicombotext_mobile_oneditclick,this);this._setEventHandler("onkeydown",this._on_multicombotext_onkeydown,this);this._setEventHandler("onkeyup",this._on_multicombotext_onkeyup,this);}else{_a._setEventHandler("onlbuttondown",this._on_multicombotext_onlbuttondown,this);_a._setEventHandler("oneditclick",this._on_multicombotext_oneditclick,this);_a._setEventHandler("onkeydown",this._on_multicombotext_onkeydown,this);_a._setEventHandler("onkeyup",this._on_multicombotext_onkeyup,this);}}};_pMultiCombo._setEventHandlerToDropButton=function(){var _a=this._p_dropbutton;if(_a){if(nexacro._isTouchInteraction&&nexacro._SupportTouch){_a._setEventHandler("onclick",this._on_drop_mobile_onclick,this);}else{_a._setEventHandler("onclick",this._on_drop_onclick,this);_a._setEventHandler("onlbuttondown",this._on_drop_onlbuttondown,this);}}};_pMultiCombo._setEventHandlerToMultiComboTagBox=function(){var _a=this._p_multicombotagbox;if(_a){if(nexacro._isTouchInteraction&&nexacro._SupportTouch){_a._setEventHandler("onclick",this._on_tagbox_mobile_onclick,this);}else{_a._setEventHandler("onlbuttondown",this._on_tagbox_onlbuttondown,this);_a._setEventHandler("onkeydown",this._on_tagbox_onkeydown,this);}var _b=_a.tagboxedit;if(_b){var _c=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_c){_b._setEventHandler("oneditclick",this._on_edit_mobile_oneditclick,this);this._setEventHandler("onkeydown",this._on_edit_onkeydown,this);this._setEventHandler("onkeyup",this._on_edit_onkeyup,this);}else{_b._setEventHandler("onlbuttondown",this._on_edit_onlbuttondown,this);_b._setEventHandler("oneditclick",this._on_edit_oneditclick,this);_b._setEventHandler("onkeydown",this._on_edit_onkeydown,this);_b._setEventHandler("onkeyup",this._on_edit_onkeyup,this);}_b._setEventHandler("oninput",this._on_edit_oninput,this);}}};_pMultiCombo._setEventHandlerToListBox=function(){var _a=this._p_multicombolist&&this._p_multicombolist.checkboxset;if(_a){_a._setEventHandler("onitemclick",this._on_list_onitemclick,this);_a._setEventHandler("canitemchange",this.on_notify_list_canitemchange,this);_a._setEventHandler("onitemchanged",this.on_notify_list_onitemchanged,this);}};_pMultiCombo._setInnerDatasetStr=function(_a){this._removeEventHandlerToInnerDataset();if(_a){_a=_a.replace("@","");var _b=this._findDataset(_a);this._innerdataset=_b?_b:"";this._p_innerdataset=_a;}else{this._innerdataset=null;this._p_innerdataset="";}};_pMultiCombo._setDefaultCaret=function(){if(this._tagmode){var _a=this._p_multicombotagbox.tagboxedit;if(_a){_a.setCaretPos();}}};_pMultiCombo._setFocusToNextComponent=function(){var _a=this._getRootComponent(this);var _b=this._getForm().getNextComponent(_a,true);if(_b){_b.setFocus();if(_b._is_editable_control){_b._setDefaultCaret();}}};_pMultiCombo._getColumn=function(_a,_b,_c){return _a.getColumn(_b,_c);};_pMultiCombo._getRowCount=function(_a){return _a.getRowCount();};_pMultiCombo._getItemValue=function(_a){var _b=this._innerdataset;var _c=this._p_codecolumn||this._p_datacolumn;if(_b&&_c){var _d=this._getColumn(_b,_a,_c);if(_d==undefined&&(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike")&&this._filtereddataset){_d=this._filtereddataset.getColumn(_a,_c);}return this._convertValueType(_d,true);}return null;};_pMultiCombo._getItemText=function(_a){var _b=this._innerdataset;var _c=this._p_datacolumn||this._p_codecolumn;if(_b&&_c){var _d=this._getColumn(_b,_a,_c);if(_d==undefined&&(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike")&&this._filtereddataset){_d=this._filtereddataset.getColumn(_a,_c);}return nexacro._toString(_d);}return null;};_pMultiCombo._getItemReadonly=function(_a){var _b=this._innerdataset;var _c=this._p_readonlycolumn;if(_b){if(_c){var _d=this._getColumn(_b,_a,_c);if(_d==undefined&&(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike")&&this._filtereddataset){_d=this._filtereddataset.getColumn(_a,_c);}return nexacro._toBoolean(_d);}else{if(_a<0||_a>=this._getRowCount(_b)){return true;}}}return null;};_pMultiCombo._getIndexFromValue=function(_a,_b){if(_b instanceof nexacro.Decimal){_b=_b.toString();}var _c=this._p_codecolumn||this._p_datacolumn;if(!_a._isValidColumn(_c)){return -1;}var _d=this._getRowCount(_a);for(var _h=0;_h<_d;_h++ ){var _e=this._getItemValue(_h);if(_e instanceof nexacro.Decimal){_e=_e.toString();}if(_b==_e){var _f=_b;var _g=_e;if(_f===0){_f=_f+"";}if(_g===0){_g=_g+"";}if(_f==_g){return _h;}}}return -1;};_pMultiCombo._getIndexFromText=function(_a,_b){var _c=this._getRowCount(_a);for(var _d=0;_d<_c;_d++ ){if(this._getItemText(_d)==_b){return _d;}}return -1;};_pMultiCombo._getRawToListindex=function(_a){if(this._p_type=="filter"||this._p_type=="filterlike"||this._p_type=="caseifilter"||this._p_type=="caseifilterlike"){var _b=this._getFilteredDataset();var _c=_b._viewRecords;var _d=_c.length;for(var _e=0;_e<_d;_e++ ){if(_c[_e]._rawidx==_a){return _e;}}}return _a;};_pMultiCombo._getRawIndex=function(_a,_b){var _c=this._innerdataset;if(_b==-1||(_a._viewRecords.length<=_b)){return -1;}var _d=_a._viewRecords[_b]._rawidx;var _e=_c._rawRecords;var _f=_e.length;for(var _g=0;_g<_f;_g++ ){if(_e[_g]._rawidx==_d){return _d;}}return -1;};_pMultiCombo._getPopupType=function(){return this._p_popuptype?this._p_popuptype:"normal";};_pMultiCombo._isUsableDataset=function(_a){if(!_a){return false;}else{if(_a.getRowCount<=0){return false;}if(!this._p_datacolumn&&!this._p_codecolumn){return false;}}return true;};_pMultiCombo._isPopupVisible=function(){var _a=this._popupcontrol;if(_a){return _a._is_popup();}return false;};_pMultiCombo._clearFilteredDataset=function(){if(this._filtereddataset){this._filtereddataset.set_filterstr("");}};_pMultiCombo._setAccessibilityInfoByHover=function(_a){if(this._isPopupVisible()){var _b=this._p_multicombolist&&this._p_multicombolist.checkboxset;return _b._setAccessibilityInfoByHover(_a);}else{return this._setAccessibilityNotifyEvent();}};_pMultiCombo._clearAccessibilityInfoByHover=function(){var _a=this._p_multicombolist&&this._p_multicombolist.checkboxset;if(_a){_a._clearAccessibilityInfoByHover();}};_pMultiCombo._getPopupSizeArr=function(){var _a=this._p_popupsize;if(!_a){return;}_a=_a.split(/\s+/);var _b= +_a[0];var _c=_a[1]? +_a[1]:undefined;return {width:_b,height:_c};};_pMultiCombo._cancelEvent=function(){this._processing_keyfilter=false;};_pMultiCombo._setMultiComboTextValue=function(){if(this._p_multicombotagbox){this._p_multicombotagbox.destroy();this._p_multicombotagbox=null;}var _a=this._p_multicombotext;if(_a){var _b=this._select_multi;if(_b.length>0){var _c="";for(var _d=0;_d<_b.length;_d++ ){if(this._p_type=="dropdown"){if(_d==_b.length-1){_c+=this._getItemText(_b.items[_d]);}else{_c+=this._getItemText(_b.items[_d])+this._p_textseparator;}}else{if(_d==_b.length){_c+=this._getItemText(_b.items[_d]);}else{_c+=this._getItemText(_b.items[_d])+this._p_textseparator;}}}this._setTextValue(_c);}else{this._setTextValue(undefined);}}};_pMultiCombo._setMultiComboCountValue=function(){if(this._p_multicombotagbox){this._p_multicombotagbox.destroy();this._p_multicombotagbox=null;}var _a=this._p_multicombotext;if(_a){var _b=this._innerdataset?this._innerdataset.rowcount:0;var _c=this.getSelectedCount();if(this._p_counttextformat){var _d=this._p_counttextformat;_d=_d.replace(/\[\*\]/g,_b);_d=_d.replace(/\[\#\]/g,_c);_a.set_value(_d);}else{_a.set_value(_c+" item(s) selected");}}};_pMultiCombo._setMultiComboTagBoxValue=function(){var _a=this._p_multicombotagbox;if(_a){_a._setMultiComboTagValue();}};delete _pMultiCombo;nexacro._MultiComboEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Edit.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);};var _pMultiComboEditControl=nexacro._createPrototype(nexacro.Edit,nexacro._MultiComboEditControl);nexacro._MultiComboEditControl.prototype=_pMultiComboEditControl;_pMultiComboEditControl._type_name="EditControl";_pMultiComboEditControl._is_subcontrol=true;_pMultiComboEditControl._is_subfocused=false;_pMultiComboEditControl._p_accessibilityrole="multicombobox";_pMultiComboEditControl._getFromComponent=function(_a){var _b=_a.parent;if(_b&&_b._isPopupVisible()){return _b;}else{return nexacro.Component.prototype._getFromComponent.call(this,_a);}};_pMultiComboEditControl._apply_setfocus=function(_a,_b){this._processing_updateToDataset=false;var _c=this._input_element;if(_c){if(!this._onlydisplay){_c.on_apply_imeSet();_c.on_apply_force_imeSet();if(_a){this._default_value=this._p_value;this._default_text=this._p_text;}var _d=_c._last_selection_range;if(_d&&!this._p_autoselect){this._caret_pos={begin:_d[0],end:_d[1]};}this._changeUserStatus("nulltext",false);_c.setElementFocus(_a,_b);var _e=_c.getElementText();if(_e!=this._p_text){this._default_text=this._p_text=_e;}if(!this._p_autoselect){if(this._caret_pos==-1){if(this._change_value){_c.setElementSetSelect(this._p_value?this._p_value.length:0);}else{if(nexacro._isDesktop()||_c._is_sys_focused){if(nexacro._Browser!="Runtime"&&(_a=="focus"||_a=="lbuttondown")){_c._use_timer=true;}_c.setElementSetSelect(0,0);if(nexacro._Browser!="Runtime"&&(_a=="focus"||_a=="lbuttondown")){_c._use_timer=false;}}}}}}else{if(_a){this._default_value=this._p_value;this._default_text=this._p_text;}this._changeUserStatus("nulltext",false);}if(!this._p_parent._p_edittype){this._p_parent._setScrollMaxPos();if(this._p_parent._p_parent._select_multi.tagselect!=-1){this._p_parent._p_parent._p_multicombotagbox._multicombotags[this._p_parent._p_parent._select_multi.tagselect]._changeUserStatus("selected",false);this._p_parent._p_parent._select_multi.tagselect=-1;}}}};_pMultiComboEditControl.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){if(this._p_readonly||!this._isEnable()){return;}var _g=this._input_element;if(_g){this._processing_keyfilter=true;if(nexacro._enableaccessibility){if(nexacro._Browser=="Runtime"){this._is_subfocused=true;}}if(nexacro._OS=="Mac OS"||nexacro._OS=="OSX"){_c=_f;}if(_a==nexacro.KeyCode_ImeInput&&this._imedisable){_g.stopSysEvent();return;}else if(!_b&&!_d&&_c&&_a==90){if(_g.isComposing()){_g.setCompositionComplete();}if(this._undostack&&this._p_parent._p_type!="dropdown"){this._undostack.undo();_g.stopSysEvent();return;}}else if(!_b&&!_d&&_c&&_a==89){if(this._undostack){this._undostack.redo();_g.stopSysEvent();return;}}if(this._undostack){var _h=_g.getElementCaretPos();if(_h&&_h!=-1){this._undostack.update(_h.begin,_h.end);}}}};if(nexacro._Browser=="Runtime"){_pMultiComboEditControl.on_keyup_basic_action=function(){this._processing_keyfilter=false;};}else{_pMultiComboEditControl.on_keyup_basic_action=function(){this._processing_keyfilter=true;};}_pMultiComboEditControl.set_value=function(_a){nexacro.Edit.prototype.set_value.call(this,_a);this._setAccessibilityValue(this._p_text,false);};_pMultiComboEditControl.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._p_parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this._p_parent,_l,_m);};delete _pMultiComboEditControl;nexacro._MultiComboButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pMultiComboButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._MultiComboButtonControl);nexacro._MultiComboButtonControl.prototype=_pMultiComboButtonControl;_pMultiComboButtonControl._type_name="ButtonControl";_pMultiComboButtonControl._is_subcontrol=true;_pMultiComboButtonControl._is_focus_accept=false;_pMultiComboButtonControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;if(_g){var _h=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_h){nexacro.Component.prototype.on_focus_basic_action.call(this,_a,_b,_c,_d,_e,_f);}else{_g._apply_setfocus(_b);}}if(nexacro._enableaccessibility){this._setAccessibilityStatFocus(_b);}};_pMultiComboButtonControl._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){if(!this._is_alive){return;}if(this._p_visible&&this._p_parent._isEnable()&&this._p_enableevent){var _k=this._getClientXY(_f,_g);this.on_fire_onclick(_b,_c,_d,_e,_h,_i,_f,_g,_k[0],_k[1],this,this,_j);this.on_click_basic_action(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j);}};delete _pMultiComboButtonControl;nexacro._MultiComboCheckBoxSetControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.CheckBoxSet.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._overedItem=null;this._select_multi=this._p_parent._p_parent._select_multi;};var _pMultiComboCheckBoxSetControl=nexacro._createPrototype(nexacro.CheckBoxSet,nexacro._MultiComboCheckBoxSetControl);nexacro._MultiComboCheckBoxSetControl.prototype=_pMultiComboCheckBoxSetControl;_pMultiComboCheckBoxSetControl._type_name="CheckBoxSetControl";_pMultiComboCheckBoxSetControl._is_subcontrol=true;_pMultiComboCheckBoxSetControl._overeditemindex=-1;_pMultiComboCheckBoxSetControl._is_scrollable=true;_pMultiComboCheckBoxSetControl._event_list={"onitemclick":1,"onitemdblclick":1,"onkeydown":1,"onkeyup":1,"onkillfocus":1,"onsetfocus":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmousedown":1,"onmouseup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onsize":1,"canitemchange":1,"onitemchanged":1,"oncloseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"onvscroll":1,"onhscroll":1,"ondevicebuttonup":1};_pMultiComboCheckBoxSetControl.on_create_contents=function(){this._temp_item=new nexacro._CheckBoxSetItemControl("_temp_item",0,0,0,0,null,null,null,null,null,null,this);this._temp_item.createComponent();};_pMultiComboCheckBoxSetControl.on_created_contents=function(_a){if(this._p_innerdataset){if(!this._innerdataset){this._setInnerDatasetStr(this._p_innerdataset);}this.on_apply_innerdataset(this._innerdataset);}this._redrawListBoxContents(true);var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].on_created(_a);}this._selectinfo.obj=null;this._selectinfo.index=this._p_index;this._selectinfo.text=this._p_text;this._selectinfo.value=this._p_value;if(nexacro._enableaccessibility){this._want_arrow=true;this.on_apply_prop_accessibilitylabel();}this._is_created=true;this._onRecalcScrollSize();};_pMultiComboCheckBoxSetControl.on_destroy_contents=function(){var _a=this._temp_item;if(_a){_a.destroy();}this._temp_item=null;this._destroyListBoxContents();this._buffer_pages=null;this._removeEventHandlerToInnerDataset();this._selectinfo=null;this._select_multi=null;this._selectinfo_list.length=0;this._scroll_vpos_queue=null;};_pMultiComboCheckBoxSetControl.on_create_contents_command=function(){if(this._p_innerdataset){if(!this._innerdataset){this._setInnerDatasetStr(this._p_innerdataset);}this._parseInnerDataset();}this._redrawListBoxContents(true);var _a="";var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_a+=_b[_d].createCommand();}return _a;};_pMultiComboCheckBoxSetControl.on_attach_contents_handle=function(_a){var _b=this._getContentsItem();var _c=_b.length;for(var _d=0;_d<_c;_d++ ){_b[_d].attachHandle(_a);}this._selectinfo.obj=null;this._selectinfo.index=this._p_index;this._selectinfo.text=this._p_text;this._selectinfo.value=this._p_value;if(nexacro._enableaccessibility){this.on_apply_prop_accessibilitylabel();}this._is_created=true;this._onRecalcScrollSize();};_pMultiComboCheckBoxSetControl.on_change_containerRect=function(){if(this._is_created_contents){var _a=this._getItemHeight();var _b=this._getClientHeight();var _c=_a?_b/_a:0;if(this._page_rowcount!=_c){this._redrawListBoxContents(false);}else{this._recalcLayout();}if(!this._calc_scroll){this._onRecalcScrollSize();}else{this._cnt_resetscroll++ ;this._onResetScrollBar();}}};_pMultiComboCheckBoxSetControl._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f=this._getInnerdatasetInfo("_rowcount");var _g=this._getInnerdatasetInfo("_max_width");var _h=this._getInnerdatasetInfo("_max_height");_b+=_g;_c+=_h* _f;return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pMultiComboCheckBoxSetControl._onRecalcScrollSize=function(){var _a=this.getElement();if(_a){var _b=this._getClientWidth();var _c=this._getClientHeight();var _d=Math.max(this._contents_maxwidth,_b);var _e=Math.max(this._contents_maxheight,_c);this._calc_scroll=true;_a.setElementScrollMaxSize(_d,_e);if(!this._cnt_resetscroll){this._onResetScrollBar();}this._calc_scroll=false;this._cnt_resetscroll=0;}};_pMultiComboCheckBoxSetControl.on_apply_index=function(_a){var _b="";var _c;var _d=this._getInnerdatasetInfo("_rows",_a);if(_d){_c=_d.value;_b=_d.text;}if(this._p_value!=_c){this._setValue(_c);this._setText(_b);}};_pMultiComboCheckBoxSetControl.on_apply_value=function(_a){var _b=this._innerdataset;var _c=this._p_codecolumn;var _d=this._p_datacolumn==""?_c:this._p_datacolumn;if(_b&&_c){var _e=_b.findRow(_c,_a);var _f="";if(_e>-1){_f=_b.getColumn(_e,_d);}this._setIndex(_e);this._setText(_f);}};_pMultiComboCheckBoxSetControl.on_apply_codecolumn=function(_a){if(this._is_created){this._parseInnerDataset();this._redrawListBoxContents(!this._keep_scrolling);this._onRecalcScrollSize();}};_pMultiComboCheckBoxSetControl.on_apply_datacolumn=function(_a){if(this._is_created){this._parseInnerDataset();this._redrawListBoxContents(!this._keep_scrolling);this._onRecalcScrollSize();}};_pMultiComboCheckBoxSetControl.on_notify_item_onlbuttondown=function(_a,_b){};_pMultiComboCheckBoxSetControl.on_notify_item_onlbuttonup=function(_a,_b){var _c=this._upitem;if(_c){if(nexacro._isTouchInteraction&&nexacro._SupportTouch){var _d=this._getWindow();var _e=_d?_d._gesture_manager:null;if(_e&&_e._is_ondrag){return;}}if((_c.index>=0)&&this._contains(_c)){_a=_c;}else{return;}this._shiftKey=_b.shiftkey;if(!this._shiftKey){this._shift_select_base_index=_a.index;}this.on_fire_onitemclick(_a,_a.index,_a.text,_a.value,_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.metakey);}};_pMultiComboCheckBoxSetControl.on_notify_item_ontouchstart=function(_a,_b){};_pMultiComboCheckBoxSetControl.on_notify_item_ontouchend=function(_a,_b){var _c=(_b.changedtouchinputinfos&&_b.changedtouchinputinfos[0])?_b.changedtouchinputinfos[0]:null;if(_c){_b.button="lbutton";_b.altkey=false;_b.ctrlkey=false;_b.shiftkey=false;_b.metakey=false;_b.screenx=_c.screenx;_b.screeny=_c.screeny;_b.canvasx=_c.canvasx;_b.canvasy=_c.canvasy;_b.clientx=_c.clientx;_b.clienty=_c.clienty;}this.on_notify_item_onlbuttonup(_a,_b);};_pMultiComboCheckBoxSetControl.on_notify_listbox_onkeydown=function(_a,_b){};_pMultiComboCheckBoxSetControl.on_notify_item_onmouseenter=function(_a,_b){};_pMultiComboCheckBoxSetControl.on_notify_item_onmouseleave=function(_a,_b){};_pMultiComboCheckBoxSetControl.on_notify_item_onmousemove=function(_a,_b){if(this._overeditemindex>-1){var _c=this._getItem(this._overeditemindex);if(_c){_c._changeStatus("mouseover",false);}this._overeditemindex=-1;}};_pMultiComboCheckBoxSetControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;if(_g){if(nexacro._enableaccessibility){_g._setAccessibilityStatFocus(_b);}_g._apply_setfocus(_b);}};_pMultiComboCheckBoxSetControl.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){return nexacro.Component.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);};_pMultiComboCheckBoxSetControl.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){return nexacro.Component.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_n);};_pMultiComboCheckBoxSetControl.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.Component.prototype.on_fire_sys_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pMultiComboCheckBoxSetControl.on_fire_sys_ontouchstart=function(_a,_b,_c,_d){nexacro.Component.prototype.on_fire_sys_ontouchstart.call(this,_a,_b,_c,_d);};_pMultiComboCheckBoxSetControl.on_fire_sys_ontouchend=function(_a,_b,_c,_d){nexacro.Component.prototype.on_fire_sys_ontouchend.call(this,_a,_b,_c,_d);};_pMultiComboCheckBoxSetControl.on_fire_sys_ontouchcancel=function(_a,_b,_c,_d){};_pMultiComboCheckBoxSetControl.on_fire_oncloseup=function(_a){var _b=this._get_rowobj_status("mouseover","status");if(_b){_b._changeStatus("mouseover",false);}if(this.oncloseup&&this.oncloseup._has_handlers){return this.oncloseup._fireEvent(this);}return false;};_pMultiComboCheckBoxSetControl._set_last_selectfocused=function(_a,_b){var _c=this._select_multi.lastselected;this._select_multi.lastselected=_a;if(_a!==_c){this._on_last_selectfocuschanged(_a,_b);}};_pMultiComboCheckBoxSetControl._select_add=function(_a,_b){var _c=this._p_parent;var _d=_c.parent;var _e=_a+"";var _f=this._select_multi;var _g=_f.map[_e];if(typeof _g!='undefined'){return this._select_replace(_e,_a);}_f.map[_e]=_a;_f.length++ ;_f.items.push(_a);_f.keys.push(_e);_f.lastselected=_a;_f.tagselect=-1;this._changeIndex(_a,undefined,_b);if(_c._is_control_component){_d._p_index=_c._p_index;_d._p_text=_c._p_text;_d._p_value=_c._p_value;}if(_c._is_abstract){_d=_c._p_index;_d=_c._p_text;_d=_c._p_value;}};_pMultiComboCheckBoxSetControl._select_remove=function(_a){var _b=this._p_parent;var _c=_b.parent;var _d=this._select_indexOfkey(_a);var _e=this._select_multi;if(_d<_e.length&&_d>=0){_e.length-- ;_e.items.splice(_d,1);var _f=_e.keys[_d];if(typeof _f!='undefined'){_e.map[_f]=undefined;}_e.keys.splice(_d,1);_e.lastselected=_e.items[_e.items.length-1];if(!this.multiselect&&_e.length==0){this._p_index="-1";this._p_text="";if(!this._do_not_change_value){this._p_value=undefined;}}if(_e.tagselect==_a){_e.tagselect=-1;}return _a;}return false;};_pMultiComboCheckBoxSetControl._select_withmouseevent=function(_a,_b){var _c,_d,_e;var _f=this._p_parent;var _g=_f.parent;var _h=[];var _i=_g._filtereddataset._viewRecords;if(this._shiftKey){if(this._innerdataset._rawRecords!=this._innerdataset._viewRecords){for(_e=0;_e<_i.length;_e++ ){if(_a==_i[_e]._rawidx){_c=_e;break;}}_d=this._getItem(_c);var _j=this._shift_select_base_index<_i.length?this._shift_select_base_index:0;var _k=_c;if(!nexacro._isNumber(_j)){_j=0;}if(!nexacro._isNumber(_k)){_k=this._getInnerdatasetInfo("_rowcount");}if(_j>_k){for(_e=_j;_k<=_e;_e-- ){var _l=this._getItem(_e);if(_l.readonly==false){if(!_d.selected){_l.set_selected(true);}else{_l.set_selected(false);}_h.push(_i[_e]._rawidx);}}}else{for(_e=_j;_e<=_k;_e++ ){var _l=this._getItem(_e);if(_l.readonly==false){if(!_d.selected){_l.set_selected(true);}else{_l.set_selected(false);}_h.push(_i[_e]._rawidx);}}}if(_d.selected){this._do_select(_h,true,true);_g._insertIndex(_h);}else{this._do_deselect(_h,true);_g._removeindex(_h);}this._shift_select_base_index=_k;}else{var _m=this._getContentsItem();var _j=this._shift_select_base_index?this._shift_select_base_index:0;var _k=_a;_d=this._getItem(_a);if(_j>_k){for(_e=_j;_k<=_e;_e-- ){if(_m[_e].readonly==false){_h.push(_e);}}}else{for(_e=_j;_e<=_k;_e++ ){if(_m[_e].readonly==false){_h.push(_e);}}}if(!_d.selected){this._do_select(_h,true,true);_g._insertIndex(_h);}else{this._do_deselect(_h,true);_g._removeindex(_h);}this._shift_select_base_index=_k;}}else{if(_g._p_type=="search"||_g._p_type=="caseisearch"){}if(this._innerdataset._rawRecords!=this._innerdataset._viewRecords&&(_g._p_type=="filter"||_g._p_type=="filterlike"||_g._p_type=="caseifilter"||_g._p_type=="caseifilterlike")){for(_e=0;_e<_i.length;_e++ ){if(_a==_i[_e]._rawidx){_c=_e;}}_d=this._getItem(_c);}else{_d=this._getItem(_a);}if(!_d){return;}if(!_d.selected){_d.set_selected(true);this._is_clicked=true;this._select_add(_a);this._is_clicked=false;_g._insertIndex(_a);}else{_d.set_selected(false);this._is_clicked=true;this._select_remove(_a);this._is_clicked=false;_g._removeindex(_a);}for(_e=0;_e<this._innerdataset.rowcount;_e++ ){var _n=this._getItem(_e);if(_n){_n._changeStatus("mouseover",false);}}}this._set_last_selectfocused(_a);};_pMultiComboCheckBoxSetControl._select_withkeyupevent=function(_a,_b,_c){var _d=this._p_parent;var _e=_d.parent;this._is_clicked=true;if(_a){var _f=[];if(this._is_shift_first_pressed&&_b>-1){this._shift_select_base_index=_b;this._is_shift_first_pressed=false;}if(_e._p_type=="dropdown"||_e._p_type=="search"||_e._p_type=="caseisearch"){if(_b>this._shift_select_base_index){this._do_deselect(_b,true);_e._removeindex(_b);}else if(_b<this._shift_select_base_index){this._do_select(_c,true,true);_e._insertIndex(_c);}else{_f=_b==_c?[_b]:[_b,_c];if(_e._p_index.toString()!=_f.toString()){_e._clear_all(true,true);this._do_select(_f,true,true);_e._changeIndex(_f);}}_e.redraw();}else{var _g=this._getItem(_b);var _h=this._getItem(_c);var _i=_e._filtereddataset._viewRecords[_b]._rawidx;var _j=_e._filtereddataset._viewRecords[_c]._rawidx;if(_b>this._shift_select_base_index){_g.set_selected(false);this._select_remove(_i);_e._removeindex(_i);}else if(_b<this._shift_select_base_index){_h.set_selected(true);this._select_add(_j);_e._insertIndex(_j);}else{_f=_i==_j?[_i]:[_i,_j];if(_e._p_index.toString()!=_f.toString()){_e._clear_all(true,true);_g.set_selected(true);_h.set_selected(true);this._select_add(_i);this._select_add(_j);_e._changeIndex(_f);}}_e.redraw();}}this._change_status_item_from_key(_b,_c);this._is_clicked=false;};_pMultiComboCheckBoxSetControl._select_withkeydownevent=function(_a,_b,_c){var _d=this._p_parent;var _e=_d.parent;this._is_clicked=true;if(_a){var _f=[];if(this._is_shift_first_pressed&&_b>-1){this._shift_select_base_index=_b;this._is_shift_first_pressed=false;}if(_e._p_type=="dropdown"||_e._p_type=="search"||_e._p_type=="caseisearch"){if(_b<this._shift_select_base_index){this._do_deselect(_b,true);_e._removeindex(_b);}else if(_b>this._shift_select_base_index){this._do_select(_c,true,true);_e._insertIndex(_c);}else{_f=_b==_c?[_b]:[_b,_c];if(_e._p_index.toString()!=_f.toString()){_e._clear_all(true,true);this._do_select(_f,true,true);_e._changeIndex(_f);}}_e.redraw();}else if(_b!=-1){var _g=this._getItem(_b);var _h=this._getItem(_c);var _i=_e._filtereddataset._viewRecords[_b]._rawidx;var _j=_e._filtereddataset._viewRecords[_c]._rawidx;if(_b<this._shift_select_base_index){_g.set_selected(false);this._select_remove(_i);_e._removeindex(_i);}else if(_b>this._shift_select_base_index){_h.set_selected(true);this._select_add(_j);_e._insertIndex(_j);}else{_f=_i==_j?[_i]:[_i,_j];if(_e._p_index.toString()!=_f.toString()){_e._clear_all(true,true);_g.set_selected(true);_h.set_selected(true);this._select_add(_i);this._select_add(_j);_e._changeIndex(_f);}}_e.redraw();}}this._change_status_item_from_key(_b,_c);this._is_clicked=false;};_pMultiComboCheckBoxSetControl._redrawListBoxContentsAfter=nexacro._emptyFn;_pMultiComboCheckBoxSetControl._createListItemControl=function(_a){var _b=this._innerdataset;if(!_b){return null;}var _c=this._p_datacolumn?this._p_datacolumn:this._datacolumn;var _d=this._p_codecolumn?this._p_codecolumn:this._codecolumn;var _e=this._p_readonlycolumn;var _f=_b.getColumn(_a,_c);_f=nexacro._toString(_f);var _g=_b.getColumn(_a,_d);_g=this._convertValueType(_g,true);var _h=_b.getColumn(_a,_e);var _i=this._getItemHeight();var _j=this._getClientWidth();var _k=this._createListItem("item_"+_a,0,_a* _i,Math.max(this._contents_maxwidth,_j),_i,null,null,null,null,null,null,this);_k.set_value(_g);_k.set_text(_f);_k.set_index(_a);_k.set_selected(false);_k.set_readonly(_h);this._select_multi=this._p_parent._p_parent._select_multi;var _l=_b._viewRecords[_a]._rawidx;if(_b._viewRecords!=_b._rawRecords){for(var _m=0;_m<this._select_multi.length;_m++ ){if(this._select_multi.items[_m]==_b._rawRecords[_l]._rawidx){_k.set_selected(true);}}}else{for(var _m=0;_m<this._select_multi.length;_m++ ){if(_a==this._select_multi.items[_m]){_k.set_selected(true);}}}if(nexacro._enableaccessibility){this._setItemAccessibility(_k);}_k._setEventHandler("onlbuttondown",this.on_notify_item_onlbuttondown,this);_k._setEventHandler("onlbuttonup",this.on_notify_item_onlbuttonup,this);_k._setEventHandler("ontouchstart",this.on_notify_item_ontouchstart,this);_k._setEventHandler("ontouchend",this.on_notify_item_ontouchend,this);_k._setEventHandler("onmouseenter",this.on_notify_item_onmouseenter,this);_k._setEventHandler("onmouseleave",this.on_notify_item_onmouseleave,this);_k._setEventHandler("onmousemove",this.on_notify_item_onmousemove,this);_k.createComponent(this._is_created?false:true);return _k;};_pMultiComboCheckBoxSetControl._change_status_item_from_key=function(_a,_b){var _c=this._getItem(_a);var _d=this._getItem(_b);if(_c){_c._changeStatus("mouseover",false);}if(_d){_d._changeStatus("mouseover",true);this._overeditemindex=_d.index;}};_pMultiComboCheckBoxSetControl._selectAll=function(_a){var _b=this._select_multi;var _c=_b?_b.length:0;var _d=this._getItem(_a);if(_d){_d.set_selected(true);_d._changeStatus("mouseover",false);}this._is_clicked=true;this._select_add(_a);this._is_clicked=false;};_pMultiComboCheckBoxSetControl._clearAll=function(_a){var _b=this._select_multi;var _c=_b?_b.length:0;var _d=this._getItem(_a);if(_d){_d.set_selected(false);_d._changeStatus("mouseover",false);}var _e=this._p_index;var _f;if(this._select_multi&&this._select_multi.length>0){if(this._p_index==_a){var _g=this._select_multi.items;_f=_g.indexOf(this._p_index);if(_f>0){_e=_g[_f -1];}}}for(var _h=0;_h<_c;_h++ ){if(_a===_b.items[_h]){this._is_clicked=true;this._select_remove(_a);this._is_clicked=false;}}if(this._select_multi&&this._select_multi.length==0){this._changeIndex(-1);}else if(this._select_multi&&this._select_multi.length>0){this._changeIndex(_e);}};_pMultiComboCheckBoxSetControl._createListItem=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return new nexacro._MultiComboListItemControl(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pMultiComboCheckBoxSetControl._on_select_change=function(_a,_b,_c,_d,_e){var _f=this._p_parent;if((_f._p_type=="search"||_f._p_type=="caseisearch")&&_f._isFiredOnInput){var _g=this._getItem(_a);if(_g){if(_b){_g.set_selected(true);}else{_g.set_selected(false);}if(nexacro._enableaccessibility){_g._setAccessibilityInfoIndex(_a+1);_g._setAccessibilityInfoCount(this._getInnerdatasetInfo("_rowcount"));}}}else{if(this._select_commit(_c,_a,_d,_e)!==false){var _g=this._getItem(_a);if(_g){if(_b){_g.set_selected(true);}else{_g.set_selected(false);}if(nexacro._enableaccessibility){_g._setAccessibilityInfoIndex(_a+1);_g._setAccessibilityInfoCount(this._getInnerdatasetInfo("_rowcount"));}}}}};_pMultiComboCheckBoxSetControl._changeIndex=function(_a){if(this._p_index!=_a){var _b=this._innerdataset;var _c=parseInt(_a,10)|0;if(_b&&(this._p_codecolumn||this._p_datacolumn)){var _d=_b.getColumn(_c,this._p_datacolumn||this._p_codecolumn);var _e=_b.getColumn(_c,this._p_codecolumn||this._p_datacolumn);var _f=_d==undefined?"":nexacro._toString(_d);var _g=_e;this._p_text=_f;this._p_value=_g;this._selectinfo.obj=null;this._selectinfo.index=_c;this._selectinfo.text=_f;this._selectinfo.value=_g;return true;}}return false;};_pMultiComboCheckBoxSetControl._getItem=function(_a){var _b=this._buffer_pages;var _c,_d;var _e,_f;for(_e in _b){_c=_b[_e];for(_f in _c){_d=_c[_f];if(_d&&(_d.index==_a)){return _d;}}}return null;};_pMultiComboCheckBoxSetControl._getContentsItem=function(){var _a=[];var _b=this._buffer_pages;for(var _c in _b){if(_b[_c]&&_b.hasOwnProperty(_c)){_a=_a.concat(_b[_c]);}}return _a;};_pMultiComboCheckBoxSetControl._get_rowobj_status=function(_a,_b,_c){var _d=this._buffer_pages;if(_d){var _e,_f;for(var _g=0,_h=_d.length;_g<_h;_g++ ){_e=_d[_g];if(_e){for(var _i=0,_j=_e.length;_i<_j;_i++ ){_f=_e[_i];if((_c)&&_c==_f.index){return _f;}if(_f&&((_b=="status"&&_f._status==_a)||(_b=="userstatus"&&_f._userstatus==_a))){if(!_c){return _f;}}}}}}return null;};_pMultiComboCheckBoxSetControl._get_all_rowobj_status=function(_a,_b){var _c=[];var _d=this._buffer_pages;if(_d){var _e,_f;for(var _g=0,_h=_d.length;_g<_h;_g++ ){_e=_d[_g];if(_e){for(var _i=0,_j=_e.length;_i<_j;_i++ ){_f=_e[_i];if(_f&&((_b=="status"&&_f._status==_a)||(_b=="userstatus"&&_f._userstatus==_a))){_c.push(_f);}}}}}return _c;};delete _pMultiComboCheckBoxSetControl;nexacro._MultiComboListItemControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._CheckBoxSetItemControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pMultiComboListItemControl=nexacro._createPrototype(nexacro._CheckBoxSetItemControl,nexacro._MultiComboListItemControl);nexacro._MultiComboListItemControl.prototype=_pMultiComboListItemControl;_pMultiComboListItemControl._redrawListBoxContents=function(_a){this._redrawListBoxContentsBefore();var _b=this._getInnerdatasetInfo("_rowcount");if(_b){var _c=this._p_parent._getItemHeight();var _d=this._p_parent._getClientHeight();var _e=_c?_d/_c:0;if(nexacro._enableaccessibility&&(nexacro._isMobile&&nexacro._isMobile())){_e=_b;}this._page_rowcount=Math.ceil(_e);this._page_rowcount_min=Math.floor(_e);var _f=0;var _g=0;if(_a){_g=_b -1;if(_g>=this._page_rowcount){_g=this._page_rowcount>0?this._page_rowcount-1:0;}}else{_f=this._get_first_visible_row();_g=this._get_last_visible_row(true);}this._recalcContentsMaxSize();this._createListBoxContents(_f,_g);if(this._p_value!==undefined){this.on_apply_value(this._p_value);}else if(this._p_index!=-1){this.on_apply_index(this._p_index);}}this._redrawListBoxContentsAfter();};_pMultiComboListItemControl._on_getFitSize=function(){var _a=this.getElement();if(_a){var _b=0;var _c=0;var _d=this._getCurrentStyleBorder();if(_d){_b+=_d._getBorderWidth();_c+=_d._getBorderHeight();}var _e=this._getCurrentStylePadding();if(_e){_b+=_e.left+_e.right;_c+=_e.top+_e.bottom;}var _f;if(this._displaytext&&this._displaytext!==""){_f=this._displaytext;}else{_f=this._p_text;}var _g=this._getCurrentStyleInheritValue("font");var _h=this._getReferenceAbsoluteFont(_g);var _i=this._getCurrentStyleInheritValue("wordSpacing");var _j=this._getCurrentStyleInheritValue("letterSpacing");var _k=nexacro._getTextSize(_f?_f:"<가",_g,false,undefined,"none",_i,_j,undefined,undefined,undefined,_h);_b+=Math.ceil(this._p_textwidth!=null?this._p_textwidth:_k[0]);_c+=Math.ceil(_k[1]);return [_b,_c];}return [this._adjust_width,this._adjust_height];};_pMultiComboListItemControl.on_fire_sys_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=this._p_parent;if(_o){var _p=this._getWindow();var _q=_p.findComponent(_m);if(_q.readonly){return;}_o._upitem=_q;}return nexacro.Component.prototype.on_fire_sys_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pMultiComboListItemControl.on_fire_sys_ontouchend=function(_a,_b,_c,_d){var _e=this._p_parent;if(_e){var _f;var _g=this._getWindow();var _h=_a?_a[0]:null;if(_h){var _i=_h.target;_f=_g.findComponent(_i);}else{_f=_g.findComponent(_c);}if(_f.readonly){return;}_e._upitem=_f;}return nexacro.Component.prototype.on_fire_sys_ontouchend.call(this,_a,_b,_c,_d);};_pMultiComboListItemControl.on_tap_basic_action=function(_a,_b,_c,_d,_e,_f){return;};delete _pMultiComboListItemControl;nexacro._MultiComboPopupControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.PopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pMultiComboPopupControl=nexacro._createPrototype(nexacro.PopupControl,nexacro._MultiComboPopupControl);nexacro._MultiComboPopupControl.prototype=_pMultiComboPopupControl;_pMultiComboPopupControl._type_name="popupMultiCombo";_pMultiComboPopupControl._popupAuto=function(){var _a={};if(this._type=="center"){_a=this._getPopupPositionCenter();var _b=this._getRootFrame();if(_b){this._popupBy(_b,_a.left,_a.top,_a.width,_a.height,true);}}else{_a=this._getPopupPosition();this._popupBy(this._p_parent,_a.left,_a.top,_a.width,_a.height);}};_pMultiComboPopupControl._setType=function(_a){this._type=_a;};_pMultiComboPopupControl._getElementPosition=function(){var _a=this._p_parent;if(_a){return nexacro._getElementPositionInFrame(_a.getElement());}return {};};_pMultiComboPopupControl._getPopupParentPos=function(){var _a=this._p_parent;var _b=[_a._adjust_width,_a._adjust_height];var _c=nexacro._getElementPositionInFrame(_a.getElement());var _d=0,_e=0;if(nexacro._Browser=="MobileSafari"){var _f=this._getRootFrame();if(_f){var _g=nexacro._getElementPositionInFrame(_f.getElement());_e=_g.y<0?_g.y* (-1):0;}}return {"x":_c.x,"y":_c.y,"width":_b[0],"height":_b[1],"xgap":_d,"ygap":_e};};_pMultiComboPopupControl._getPopupPosition=function(){var _a=0;var _b=0;var _c=0;var _d=0;var _e=0;var _f=0;var _g=this._p_parent;var _h=this._attached_comp;var _i=this._getRootFrame();if(_g&&_h&&_i){var _j=_h.checkboxset;var _k=_h.multicomboedit;var _l=_h.selectallcheckbox;if(_j){var _m=this._getWindow();var _n=3;var _o=this._getPopupParentPos();var _p={"x":_o.x,"y":_o.y};var _q=[_o.width,_o.height];_e=_o.xgap;_f=_o.ygap;var _r=_g._getVScrollBarSize();var _s=_g._p_displayrowcount;var _t=_g._selectDataset()?_g._selectDataset().getRowCount():0;var _u=_g._getPopupSizeArr();var _v=_h._getCurrentStyleBorder();_v=_v?_v._getBorderHeight():0;var _w=_h._getCurrentStylePadding();_w=_w?_w.top+_w.bottom:0;var _x=_v+_w;var _y;var _z;var _aa=_j._on_getFitSize();var _ab=_j._getItemHeight();var _ac=_j._getCurrentStyleBorder();_ac=_ac?_ac._getBorderHeight():0;var _ad=_j._getCurrentStylePadding();_ad=_ad?_ad.top+_ad.bottom:0;var _ae=_ac+_ad;var _af=0;if(_k){if(_g._p_type!="dropdown"&&(_g._p_edittype=="text"||_g._p_edittype=="count")){var _ag=_j._getTextHeight();var _ah=_k._getCurrentStylePadding();_ah=_ah?_ah.top+_ah.bottom:0;var _ai=_k._getCurrentStyleBorder();_ai=_ai?_ai._getBorderHeight():0;_af=_ag+_ah+_ai;}}var _aj=[0,0];var _ak=0;if(_l){_aj=_l._on_getFitSize();var _al=_l._getCurrentStyleBorder();_al=_al?_al._getBorderHeight():0;var _am=_l._getCurrentStylePadding();_am=_am?_am.top+_am.bottom:0;if(this._p_parent._p_selectallcheckboxheight!=undefined){_ak=this._p_parent._p_selectallcheckboxheight;}else{_ak=_aj[1];}}var _an=nexacro._getElementPositionInFrame(_i.getElement());var _ao=nexacro._allow_default_pinchzoom?nexacro._getWindowOffsetPosition(_m).left:_an.x;var _ap=nexacro._getWindowHandleClientHeight(_m.handle);if(nexacro._Browser=="Runtime"){_ap=Math.round(_ap/nexacro._getDevicePixelRatio(_i.getElement()));}var _aq=_p.y;var _ar=_ap-(_p.y+_q[1]);_b=_q[1];if(_u){_c=_u.width;_d=_u.height?_u.height:_d;}else{_c=Math.max(_q[0],_aa[0],_aj[0]);}if(_s==null){_y=_af+_ak+(_t<_n?_t:_n)* _ab+_ae+_x;_z=_d?_d:_af+_ak+(_t* _ab)+_ae+_x;if(_ar>_y){if(_ar>_z){_d=_z;}else{_d=_ar;if(!_u){if(_c==_aa[0]){_c+=_r;}}}}else{if(_aq>_y){if(_aq>_z){_b= -_z;_d=_z;}else{_b= -_aq;_d=_aq;}}else{if(_ar>_aq){_d=_ar;}else{_b= -_aq;_d=_aq;}}}}else{if(_t>_s){_t=_s;if(!_u&&_c<=_aa[0]+_r){_c=_aa[0]+_r;}}_y=_af+_ak+(_t* _ab+_ae)+_x;if(_ar>_y){if(_d==0){_d=_y;}}else{if(_aq>_y){_b= -_y;_d=_y;}else{if(_ar>_aq){_d=_ar;}else{_b= -_aq;_d=_aq;}}}}var _as=_m?nexacro._getWindowHandleClientWidth(_m.handle):0;if(_p.x<_ao){_a+=_ao-_p.x;}else if(_p.x+_c>_ao+_as){_a-=(_p.x+_c)-(_ao+_as);if(_a<(_ao-_p.x)){_a=_ao-_p.x;}}}}return {left:_a+_e,top:_b+_f,width:_c,height:_d};};_pMultiComboPopupControl._getPopupPositionCenter=function(){var _a=0;var _b=0;var _c=0;var _d=0;var _e=0;var _f=0;var _g=this._p_parent;var _h=this._attached_comp;if(_g&&_h){var _i=_h.checkboxset;var _j=_h.multicomboedit;var _k=_h.selectallcheckbox;if(_i){var _l=0;var _m=this._getWindow();if(_m){if(nexacro._OS=="iOS"&&nexacro._Browser=="MobileSafari"){_e=_m.handle.innerWidth;_f=_m.handle.innerHeight;var _n=nexacro._getWindowDestinationHandle(_m.handle).scrollTop;if(_n>0){_l+=_n* 2;}}else{_e=nexacro._getWindowHandleClientWidth(_m.handle);_f=nexacro._getWindowHandleClientHeight(_m.handle);}}if(nexacro._Browser=="Runtime"){_e=Math.round(_e/nexacro._getDevicePixelRatio(_g.getElement()));_f=Math.round(_f/nexacro._getDevicePixelRatio(_g.getElement()));}var _o=_g._getVScrollBarSize();var _p=_g._p_displayrowcount;var _q=_g._selectDataset()?_g._selectDataset().getRowCount():0;var _r=_g._getPopupSizeArr();var _s=_h._getCurrentStyleBorder();_s=_s?_s._getBorderHeight():0;var _t=_h._getCurrentStylePadding();_t=_t?_t.top+_t.bottom:0;var _u=_s+_t;var _v=_i._on_getFitSize();var _w=_i._getItemHeight();var _x=_i._getCurrentStyleBorder();_x=_x?_x._getBorderHeight():0;var _y=_i._getCurrentStylePadding();_y=_y?_y.top+_y.bottom:0;var _z=_x+_y;var _aa=0;if(_j){if(_g._p_type!="dropdown"&&(_g._p_edittype=="text"||_g._p_edittype=="count")){var _ab=_i._getTextHeight();var _ac=_j._getCurrentStylePadding();_ac=_ac?_ac.top+_ac.bottom:0;var _ad=_j._getCurrentStyleBorder();_ad=_ad?_ad._getBorderHeight():0;_aa=_ab+_ac+_ad;}}var _ae=[0,0];var _af=0;if(_k){_ae=_k._on_getFitSize();var _ag=_k._getCurrentStyleBorder();_ag=_ag?_ag._getBorderHeight():0;var _ah=_k._getCurrentStylePadding();_ah=_ah?_ah.top+_ah.bottom:0;if(this._p_parent._p_selectallcheckboxheight!=undefined){_af=this._p_parent._p_selectallcheckboxheight;}else{_af=_ae[1];}}_c=_r?_r.width:Math.max(_v[0],_ae[0]);if(_r&&_r.height){_d=_r.height;}else{_d=_aa+_af+(_q* _w)+_z+_u;}if(_p==null){if(_d>_f){_d=_f;_c+=_o;}}else{if(_q>_p){_d=_aa+_af+(_p* _w)+_z+_u;if(_d>_f){_d=_f;}_c+=_o;}else{if(_d>_f){_d=_f;_c+=_o;}}}_a=((_e/2)-(_c/2));_b=((_f/2)-(_d/2));_b=_b<0?0:_b;_b+=_l;}}return {left:_a,top:_b,width:_c,height:_d};};_pMultiComboPopupControl._setZoom=function(_a){var _b=this.getElement();if(_b.setElementZoom){_b.setElementZoom(_a* 100);}else if(nexacro.ScrollableControlElement.prototype.setElementZoom){nexacro.ScrollableControlElement.prototype.setElementZoom.call(_b,_a* 100);}};delete _pMultiComboPopupControl;nexacro._MultiComboTagBoxControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pMultiComboTagBoxControl=nexacro._createPrototype(nexacro.Component,nexacro._MultiComboTagBoxControl);nexacro._MultiComboTagBoxControl.prototype=_pMultiComboTagBoxControl;_pMultiComboTagBoxControl._type_name="MultiComboTagBoxControl";_pMultiComboTagBoxControl.tagboxedit=null;_pMultiComboTagBoxControl._multicombotags=null;_pMultiComboTagBoxControl._contents_maxwidth=0;_pMultiComboTagBoxControl._contents_maxheight=0;_pMultiComboTagBoxControl._is_subcontrol=true;_pMultiComboTagBoxControl._is_scrollable=true;_pMultiComboTagBoxControl._touch_scrolling=true;_pMultiComboTagBoxControl._keep_scrolling=true;_pMultiComboTagBoxControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this._p_parent._select_multi;if(!_b){return;}for(var _c=0;_c<_b.length;_c++ ){this._createMultiComboTagControl(_b.items[_c]);}if(!this.tagboxedit){this.tagboxedit=new nexacro._MultiComboEditControl("tagboxedit",0,0,0,0,null,null,null,null,null,null,this,this._onlydisplay);this.tagboxedit.createComponent();}}};_pMultiComboTagBoxControl.on_created_contents=function(_a){var _b=this._p_parent;if(this._multicombotags){var _c=_b._select_multi;for(var _e=0;_e<_c.length;_e++ ){this._multicombotags[_c.items[_e]].on_created(_a);}this._onRecalcScrollSize();}var _d=this.tagboxedit;if(_d){_d.on_created(_a);_d.set_displaynulltext(_b._p_displaynulltext);_d.set_readonly(_b._p_readonly);_d.set_usecontextmenu(_b._p_usecontextmenu);}};_pMultiComboTagBoxControl.on_destroy_contents=function(){if(this._multicombotags){for(var _a in this._multicombotags){this._multicombotags[_a].destroy();}this._multicombotags=null;}if(this.tagboxedit){this.tagboxedit.destroy();this.tagboxedit=null;}this._removeEventHandlerToInnerDataset();};_pMultiComboTagBoxControl._removeEventHandlerToInnerDataset=function(){};_pMultiComboTagBoxControl.on_create_contents_command=function(){var _a="";if(this._multicombotags){var _b=this._p_parent._select_multi;for(var _c=0;_c<_b.length;_c++ ){_a+=this._multicombotags[_b.items[_c]].createCommand();}}if(this.tagboxedit){_a+=this.tagboxedit.createCommand();}return _a;};_pMultiComboTagBoxControl.on_attach_contents_handle=function(_a){if(this._multicombotags){var _b=this._p_parent._select_multi;for(var _c=0;_c<_b.length;_c++ ){this._multicombotags[_b.items[_c]].attachHandle(_a);this._multicombotags[_b.items[_c]]._setAccessibilityStatHidden(true);}}if(this.tagboxedit){this.tagboxedit.attachHandle(_a);}};_pMultiComboTagBoxControl.on_apply_prop_enable=function(_a){if(this.tagboxedit){this.tagboxedit._setEnable(_a);}if(this._multicombotags){var _b=this._multicombotags;if(_b){for(var _c in _b){_b[_c]._setEnable(_a);}}}};_pMultiComboTagBoxControl._onRecalcScrollSize=function(){var _a=this.getElement();if(_a){var _b=this._getClientWidth();var _c=this._getClientHeight();var _d=Math.max(this._contents_maxwidth,_b);var _e=Math.max(this._contents_maxheight,_c);this._calc_scroll=true;_a.setElementScrollMaxSize(_d,_e);if(!this._cnt_resetscroll){this._onResetScrollBar();}this._calc_scroll=false;this._cnt_resetscroll=0;}};_pMultiComboTagBoxControl.on_change_containerRect=function(){if(this._is_created_contents){this._recalcLayout();if(!this._calc_scroll){this._cnt_resetscroll++ ;this._onResetScrollBar();}}};_pMultiComboTagBoxControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pMultiComboTagBoxControl.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this.tagboxedit;if(_b){_b.set_readonly(_a);}var _c=this._multicombotags;if(_c){for(var _d in _c){_c[_d].set_readonly(_a);}}};_pMultiComboTagBoxControl._createMultiComboTagControl=function(_a){var _b=this._p_parent;if(!this._multicombotags){this._multicombotags={};}this._multicombotags[_a]=this._createMultiComboTag("tagboxitem"+_a,0,0,0,0,null,null,null,null,null,null,this);this._multicombotags[_a].set_index(_a);this._multicombotags[_a].set_value(_b._getItemValue(_a));this._multicombotags[_a].set_text(_b._getItemText(_a));this._multicombotags[_a].createComponent(this._is_created?false:true);};_pMultiComboTagBoxControl._createMultiComboTag=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){return new nexacro._TagBoxControl(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};_pMultiComboTagBoxControl.on_getIDCSSSelector=function(){return "multicombotagbox";};_pMultiComboTagBoxControl._recalcLayout=function(){if(this._is_created_contents){var _a=this._getClientWidth();var _b=this._getClientHeight();var _c=this._p_parent;var _d=this._multicombotags;var _e=this.tagboxedit;var _f=0,_g=0,_h=0,_i=0;if(_e){if(_c._p_type!="dropdown"){var _j=_e._getCurrentStylePadding();var _k=_e._getCurrentStyleBorder();}}if(_d){var _l=_c._select_multi;var _m=_c._p_tagboxitemhorizontalgap!=undefined?_c._p_tagboxitemhorizontalgap:5;var _n=_c._p_tagboxitemverticalgap!=undefined?_c._p_tagboxitemverticalgap:5;var _o=_d[_l.items[0]];var _p=_o._getCurrentStylePadding();var _q=_p?_p.left+_p.right:0;var _r=_p?_p.top+_p.bottom:0;var _s=_o._getCurrentStyleBorder();var _t=_s?_s._getBorderWidth():0;var _u=_s?_s._getBorderHeight():0;if(!_o.tagtext.text){_o.tagtext.set_text(" ");}var _v=_o.tagtext._on_getFitSize();var _w;var _x=_v[1];var _y=0;var _z=0;var _aa=_c._p_tagbuttonsize;var _ab,_ac,_ad,_ae;if(_aa==undefined){_ab=_c._displaymode?0:_x;_ac=_x;}else{if(typeof (dropbutton_size)=="number"){_ab=_c._displaymode?0:_aa;_ac=_aa;}else{_aa=_aa.split(" ");_ab=_c._displaymode?0: +_aa[0];_ac=(_aa[1])? +_aa[1]: +_aa[0];}}if(_ac>_x){_x=_ac;_z=(_ac-_x)/2;_ae=0;}else if(_ac<_x){_z=0;_ae=(_x-_ac)/2;}else{_z=0;_ae=0;}var _af;var _ag=Math.max(_x,_ac)+_r+_u;var _ah=0;var _ai=0;var _aj=0;var _ak=_ag+_n;if(_e){if(_c._p_type!="dropdown"){var _al=_j?_j.left+_j.right:0;var _k=_e._getCurrentStyleBorder();var _am=_k?_k._getBorderWidth():0;_f=_a/3+_al+_am;_g=_ag;}}for(var _av=0;_av<_l.length;_av++ ){var _an=_d[_l.items[_av]];if(!_an.tagtext.text){_an.tagtext.set_text(" ");}_v=_an.tagtext._on_getFitSize();_w=_v[0];_ad=_y+_w;_af=_w+_ab+_q+_t;if(_af>_a&&_c._p_edittype=="multitag"){_af=_a;_w=_af-_ab-_q;_ad=_y+_w;}_aj+=(_af+_m);if(_c._p_edittype=="multitag"){if(_aj-_m>_a){_ah=0;_ai=_ak;_aj=_af+_m;_ak+=(_ag+_n);}}_an.tagtext.move(_y,_z,_w,_x,null,null);if(!_c._displaymode){_an.tagbutton.move(_ad,_ae,_ab,_ac,null,null);}_an.move(_ah,_ai,_af,_ag,null,null);_ah=_aj;}if(_e){if(_c._p_type!="dropdown"){if(_c._p_edittype=="singletag"){_h=_aj;_i=0;_aj+=(_f+_m);}else if(_c._p_edittype=="multitag"){_h=_aj;_i=_ak-_ag-_n;_aj+=(_f+_m);if(_aj-_m>_a){_h=0;_i=_ak;_aj=_f+_m;_ak+=(_g+_n);}}_e.move(_h,_i,_f,_g,null,null);}}_aj-=_m;_ak-=_n;if(_c._p_edittype=="singletag"){this._contents_maxwidth=_aj;this._contents_maxheight=_b;}else{this._contents_maxwidth=_a;this._contents_maxheight=_ak;}}else{if(_e){if(_c._p_type!="dropdown"){var _ao=_e._getCurrentStyleInheritValue("font");var _ap=_e._getReferenceAbsoluteFont(_ao);var _aq=_e._getCurrentStyleInheritValue("wordSpacing");var _ar=_e._getCurrentStyleInheritValue("letterSpacing");var _as=nexacro._getTextSize("A",_ao,false,undefined,"none",_aq,_ar,undefined,undefined,undefined,_ap);var _at=_j?_j.top+_j.bottom:0;var _au=_k?_k._getBorderHeight():0;_f=_a;_g=_as[1]+_at+_au;_e.move(_h,_i,_f,_g,null,null);}}this._contents_maxheight=_b;this._contents_maxwidth=_a;}this._onRecalcScrollSize();}};_pMultiComboTagBoxControl._setScrollMaxPos=function(){if(this._is_created){var _a=this._p_parent;if(_a._p_edittype=="singletag"&&this.hscrollbar){var _b=this.hscrollbar.max;this.hscrollbar.set_pos(_b);}else if(_a._p_edittype=="multitag"&&this.vscrollbar){var _c=this.vscrollbar.max;this.vscrollbar.set_pos(_c);}}};_pMultiComboTagBoxControl._setMultiComboTagValue=function(){var _a=this._p_parent._select_multi;if(this._multicombotags){this._destroyMulticomboTags();}for(var _b=0;_b<_a.length;_b++ ){this._createMultiComboTagControl(_a.items[_b]);}this._recalcLayout();};_pMultiComboTagBoxControl._destroyMulticomboTags=function(){if(this._multicombotags){for(var _a in this._multicombotags){this._multicombotags[_a].destroy();}}this._multicombotags=null;};_pMultiComboTagBoxControl._destroyMulticomboTag=function(_a){this._multicombotags[_a].destroy();delete this._multicombotags[_a];var _b=this._p_parent._select_multi.tagselect;if(_a==_b){this._p_parent._select_multi.tagselect=-1;}if(Object.keys(this._multicombotags).length<=0){this._multicombotags=null;}};delete _pMultiComboTagBoxControl;nexacro._TagBoxControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pTagBoxControl=nexacro._createPrototype(nexacro.Component,nexacro._TagBoxControl);nexacro._TagBoxControl.prototype=_pTagBoxControl;_pTagBoxControl._type_name="TagBoxControl";_pTagBoxControl.tagtext=null;_pTagBoxControl.tagbutton=null;_pTagBoxControl._p_index="";_pTagBoxControl._p_value=undefined;_pTagBoxControl._is_subcontrol=true;_pTagBoxControl._use_selected_status=true;_pTagBoxControl._event_list={"onclick":1,"ondblclick":1,"onflingstart":1,"onfling":1,"onflingend":1,"onlbuttondown":1,"onlbuttonup":1,"onlongpress":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onmousedown":1,"onmouseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"onrbuttondown":1,"onrbuttonup":1};_pTagBoxControl.on_getIDCSSSelector=function(){return "tagboxitem";};_pTagBoxControl.on_create_contents=function(){var _a=this.getElement();if(_a){var _b=this.tagtext=new nexacro.Static("tagtext",0,0,0,0,null,null,null,null,null,null,this);this.tagtext._setControl();this.tagtext.createComponent();_b.set_text(this._p_text);if(this._p_parent._displaymode){return;}var _c=this.tagbutton=new nexacro._MultiComboTagButtonControl("tagbutton",0,0,0,0,null,null,null,null,null,null,this);this.tagbutton.createComponent();_c._setEventHandlerToTagButton();}};_pTagBoxControl.on_created_contents=function(_a){this.tagtext.on_created(_a);if(this._p_parent._displaymode){return;}this.tagbutton.on_created(_a);};_pTagBoxControl.on_destroy_contents=function(){if(this.tagtext){this.tagtext.destroy();this.tagtext=null;}if(this.tagbutton){this.tagbutton.destroy();this.tagbutton=null;}};_pTagBoxControl.on_create_contents_command=function(){var _a="";if(this.tagtext){_a+=this.tagtext.createCommand();}if(this.tagbutton){_a+=this.tagbutton.createCommand();}return _a;};_pTagBoxControl.on_attach_contents_handle=function(_a){if(this.tagtext){this.tagtext.attachHandle(_a);this.tagtext._setAccessibilityStatHidden(true);}if(this.tagbutton){this.tagbutton.attachHandle(_a);this.tagbutton._setAccessibilityStatHidden(true);}};_pTagBoxControl.on_apply_prop_enable=function(_a){if(this.tagtext){this.tagtext._setEnable(_a);}if(this.tagbutton){this.tagbutton._setEnable(_a);}};_pTagBoxControl.set_index=function(_a){if(_a!==this._p_index){this._p_index=parseInt(_a,10);}};_pTagBoxControl.set_value=function(_a){if(_a!==this._p_value){this._p_value=_a;}};_pTagBoxControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pTagBoxControl.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this.tagtext;if(_b){_b._setEnable(this._isEnable()&&!_a);}var _c=this.tagbutton;if(_c){_c._setEnable(this._isEnable()&&!_a);}};delete _pTagBoxControl;nexacro._MultiComboTagButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Button.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pMultiComboTagButtonControl=nexacro._createPrototype(nexacro.Button,nexacro._MultiComboTagButtonControl);nexacro._MultiComboTagButtonControl.prototype=_pMultiComboTagButtonControl;_pMultiComboTagButtonControl._is_subcontrol=true;_pMultiComboTagButtonControl._on_tagbutton_onclick=function(_a,_b){var _c=this._p_parent;var _d=_c.parent;var _e=_d.parent;var _f=_a.parent;_e._on_tagbutton_onclick(this._p_parent._p_index,_f);};_pMultiComboTagButtonControl._setEventHandlerToTagButton=function(){this._setEventHandler("onclick",this._on_tagbutton_onclick,this);};delete _pMultiComboTagButtonControl;nexacro._SelectAllCheckBoxControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.CheckBox.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pSelectAllCheckBoxControl=nexacro._createPrototype(nexacro.CheckBox,nexacro._SelectAllCheckBoxControl);nexacro._SelectAllCheckBoxControl.prototype=_pSelectAllCheckBoxControl;_pSelectAllCheckBoxControl._type_name="CheckBoxControl";_pSelectAllCheckBoxControl._p_selected=false;_pSelectAllCheckBoxControl._is_subcontrol=true;_pSelectAllCheckBoxControl._event_list={"onclick":1,"ondblclick":1,"onflingstart":1,"onfling":1,"onflingend":1,"onlbuttondown":1,"onlbuttonup":1,"onlongpress":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onmousedown":1,"onmouseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"onrbuttondown":1,"onrbuttonup":1};_pSelectAllCheckBoxControl._on_click=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j){var _k=this._p_parent;var _l=_k._p_parent;var _m=_l._innerdataset.rowcount;if(_l._select_multi.length>_m/2){this.set_selected(false);_l._clear_all();}else{this.set_selected(true);_l._select_all();}_l.redraw();};_pSelectAllCheckBoxControl._apply_setfocus=function(_a){if(!this._p_parent._is_subcontrol&&this._p_parent._status=="focused"){nexacro.Component.prototype._apply_setfocus.call(this,_a);}};_pSelectAllCheckBoxControl.set_selected=function(_a){if(_a!=this._p_selected){this._p_selected=_a;this.on_apply_selected();}};_pSelectAllCheckBoxControl.on_apply_selected=function(){var _a=this._p_parent._statusmap?this._p_parent._statusmap['focused']:false;if(this._p_selected){this._changeUserStatus("selected",true);if(_a){this._changeStatus("focused",true);}}else{if(this._status=="focused"){this._changeStatus("focused",false);}this._changeUserStatus("selected",false);}};delete _pSelectAllCheckBoxControl;nexacro._MultiComboListControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pMultiComboListControl=nexacro._createPrototype(nexacro.Component,nexacro._MultiComboListControl);nexacro._MultiComboListControl.prototype=_pMultiComboListControl;_pMultiComboListControl._type_name="MultiComboListControl";_pMultiComboListControl._p_index="";_pMultiComboListControl._p_value=undefined;_pMultiComboListControl._is_subcontrol=true;_pMultiComboListControl._event_list={"onclick":1,"ondblclick":1,"onitemclick":1,"onitemdblclick":1,"onflingstart":1,"onfling":1,"onflingend":1,"onlbuttondown":1,"onlbuttonup":1,"onlongpress":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"onmove":1,"onmousedown":1,"onmouseup":1,"oncloseup":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1,"oncontextmenu":1,"onrbuttondown":1,"onrbuttonup":1};_pMultiComboListControl.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f,_g,_h){var _i=this.checkboxset;if(_i){var _j=_i._get_rowobj_status("mouseover","status");if(_j){_j._changeStatus("mouseover",false);}}if(this.oncloseup&&this.oncloseup._has_handlers){return this.oncloseup._fireEvent(this);}return false;};_pMultiComboListControl.on_destroy_contents=function(){if(this.multicomboedit){this.multicomboedit.destroy();this.multicomboedit=null;}if(this.selectallcheckbox){this.selectallcheckbox.destroy();this.selectallcheckbox=null;}if(this.checkboxset){this.checkboxset.destroy();this.checkboxset=null;}};_pMultiComboListControl.on_create_contents_command=function(){var _a="";if(this.multicomboedit){_a+=this.multicomboedit.createCommand();}if(this.selectallcheckbox){_a+=this.selectallcheckbox.createCommand();}if(this.checkboxset){_a+=this.checkboxset.createCommand();}return _a;};_pMultiComboListControl.on_getIDCSSSelector=function(){return "multicombolist";};_pMultiComboListControl.on_change_containerRect=function(_a,_b){this._recalcLayout();};_pMultiComboListControl.on_apply_prop_enable=function(_a){if(this.multicomboedit){this.multicomboedit._setEnable(_a);}if(this.selectallcheckbox){this.selectallcheckbox._setEnable(_a);}if(this.checkboxset){this.checkboxset._setEnable(_a);}};_pMultiComboListControl._setScrollMaxPos=function(){return;};_pMultiComboListControl._createPopupEditControl=function(){var _a=this._p_parent;var _b=this.multicomboedit;if(!_b){_b=this.multicomboedit=new nexacro._MultiComboEditControl("multicomboedit",0,0,0,0,null,null,null,null,null,null,this);_b.set_usecontextmenu(_a._p_usecontextmenu);_b._setPopupContains(true);_b.createComponent(true);}};_pMultiComboListControl._createCheckBoxSetControl=function(_a){var _b=this._p_parent;var _c=_b._p_datacolumn;var _d=_b._p_codecolumn;var _e=_b._p_readonlycolumn;var _f=this.checkboxset;if(!_f){_f=this.checkboxset=new nexacro._MultiComboCheckBoxSetControl("checkboxset",0,0,0,0,null,null,null,null,null,null,this);_f.set_scrolltype("vertical");var _g=this._getVScrollBarType()||"auto";_f.set_scrollbartype("none "+_g);_f.setInnerDataset(_a);_f.set_codecolumn(_d);_f.set_datacolumn(_c);_f.set_readonlycolumn(_e);_f.set_index(_b._p_index);_f.set_itemheight(_b._p_itemheight);_f.set_cssclass(_b._p_cssclass);_f.set_scrollbarbarminsize(_b._p_scrollbarbarminsize);_f.set_scrollbardecbuttonsize(_b._p_scrollbardecbuttonsize);_f.set_scrollbarbaroutsize(_b._p_scrollbarbaroutsize);_f.set_scrollbarincbuttonsize(_b._p_scrollbarincbuttonsize);_f.set_scrollbarsize(_b._p_scrollbarsize);_f.set_scrollbartrackbarsize(_b._p_scrollbartrackbarsize);_f._setPopupContains(true);_f.createComponent(true);}else{if(_f._is_created){if(_f._innerdataset!=_a){_f.setInnerDataset(_a);}}}};_pMultiComboListControl._createSelectAllCheckBoxControl=function(_a){var _b=this.selectallcheckbox;if(!_b){_b=this.selectallcheckbox=new nexacro._SelectAllCheckBoxControl("selectallcheckbox",0,0,0,0,null,null,null,null,null,null,this);_b.set_text(nexacro._toString("SELECT ALL"));_b._setPopupContains(true);_b.createComponent(true);}};_pMultiComboListControl._createdPopupEditControl=function(){var _a=this.multicomboedit;if(_a&&!_a._is_created){_a.on_created();this._setEventHandlerToMultiComboEdit();}};_pMultiComboListControl._createdCheckBoxSetControl=function(_a){var _b=this.checkboxset;if(_b&&!_b._is_created){this._setEventHandler("oncloseup",this._p_parent._on_list_oncloseup,this._p_parent);_b._setEventHandler("onitemclick",this._p_parent._on_list_onitemclick,this._p_parent);_b.on_created();}};_pMultiComboListControl._createdSelectAllCheckBoxControl=function(_a){var _b=this.selectallcheckbox;if(_b&&!_b._is_created){_b.on_created();}};_pMultiComboListControl._setEventHandlerToMultiComboEdit=function(){var _a=this.multicomboedit;if(_a){var _b=(nexacro._isTouchInteraction&&nexacro._SupportTouch);if(_b){_a._setEventHandler("oneditclick",this._p_parent._on_edit_mobile_oneditclick,this._p_parent);this._setEventHandler("onkeydown",this._p_parent._on_edit_onkeydown,this._p_parent);this._setEventHandler("onkeyup",this._p_parent._on_edit_onkeyup,this._p_parent);}else{_a._setEventHandler("oneditclick",this._p_parent._on_edit_oneditclick,this._p_parent);_a._setEventHandler("onkeydown",this._p_parent._on_edit_onkeydown,this._p_parent);_a._setEventHandler("onkeyup",this._p_parent._on_edit_onkeyup,this._p_parent);}_a._setEventHandler("oninput",this._p_parent._on_edit_oninput,this._p_parent);}};_pMultiComboListControl.set_readonly=function(_a){_a=nexacro._toBoolean(_a);if(this._p_readonly!=_a){this._p_readonly=_a;this.on_apply_readonly(_a);}};_pMultiComboListControl.on_apply_readonly=function(_a){this._changeStatus("readonly",_a);var _b=this.multicomboedit;if(_b){_b.set_readonly(_a);}var _c=this.selectallcheckbox;if(_c){_c.set_readonly(_a);}var _d=this.checkboxset;if(_d){_d.set_readonly(_a);}};_pMultiComboListControl.on_focus_basic_action=function(_a,_b,_c,_d,_e,_f){var _g=this._p_parent;if(_g){if(nexacro._enableaccessibility){_g._setAccessibilityStatFocus(_b);}_g._apply_setfocus(_b);}};_pMultiComboListControl._recalcLayout=function(){if(this._is_created_contents){var _a=this.checkboxset;var _b=this.multicomboedit;var _c=this.selectallcheckbox;var _d=this._getClientWidth();var _e=this._getClientHeight();var _f=0;var _g=0;if(_b){if(this._p_parent._p_type!="dropdown"&&(this._p_parent._p_edittype=="text"||this._p_parent._p_edittype=="count")){var _h=_a._getTextHeight();var _i=_b._getCurrentStylePadding();_i=_i?_i.top+_i.bottom:0;var _j=_b._getCurrentStyleBorder();_j=_j?_j._getBorderHeight():0;_f=_h+_i+_j;_b.move(0,0,_d,_f);}}if(_c){if(this._p_parent._p_selectallcheckboxheight!=undefined){_g=this._p_parent._p_selectallcheckboxheight;}else{_g=_c._on_getFitSize()[1];}_c.move(0,_f,_d,_g);}if(_a){_a.move(0,_f+_g,_d,_e-_f-_g);}}};delete _pMultiComboListControl;}if(!nexacro.CellInfo){nexacro.CellInfo=function(_a,_b,_c,_d,_e){this._p_parent=_b;this.id=this.name=_a;this._type=_d;this._view=_c;this._cellidx=_e;this._col=0;this._colspan=0;this._row=0;this._rowspan=0;this._area="";this._endcol=false;this._subcells=[];this._isSubCell=false;this._maskstringtypeobj=new nexacro._EditMaskTypeString();this._masknumbertypeobj=new nexacro._GridMaskTypeNumber();this._key_direction=null;this._blinked_status=[];this._value=undefined;this._allocatePropertys(this._property_map);};var _pCellInfo=nexacro._createPrototype(nexacro.Object,nexacro.CellInfo);nexacro.CellInfo.prototype=_pCellInfo;_pCellInfo._type_name="CellInfo";nexacro._CELLINFO_PMAP_PROPNAME=0;nexacro._CELLINFO_PMAP_CTRLPROPNAME=1;nexacro._CELLINFO_PMAP_EXPRBIND=2;nexacro._CELLINFO_PMAP_DEFTVALUE=3;nexacro._CELLINFO_PMAP_STYLE=4;nexacro._CELLINFO_PMAP_VALTYPE=5;nexacro._CELLINFO_PMAP_ENUMVAL=6;_pCellInfo._property_map=[];_pCellInfo._property_map_cell=[["cssclass",null,true,"",true],["displaytype",null,true,"normal",false],["edittype",null,true,"none",false],["tooltiptype",null,false,"default",false],["tooltiptext",null,true,undefined,false],["autosizecol",null,false,"default",false,2,["none","limitmin","limitmax","default"]],["autosizerow",null,false,"default",false,2,["none","limitmin","limitmax","default"]],["displayexpdec",null,true,-1,false,0],["locale",null,true,"",false],["text",null,true,null,false],["expr",null,true,null,false],["subsumtext",null,true,null,false],["controlautosizingtype",null,true,"both",false,2,["none","width","height","both"]],["rtl","rtl",true,undefined,false],["accessibilityaction","accessibilityaction",false,null,false],["accessibilitydesclevel","accessibilitydesclevel",false,"all",false],["accessibilitydescription","accessibilitydescription",false,null,false],["accessibilityenable","accessibilityenable",true,true,false,1],["accessibilitylabel","accessibilitylabel",true,null,false],["accessibilityrole","accessibilityrole",false,"gridcell",false],["color","color",false,null,true],["font","font",false,null,true],["wordSpacing","wordSpacing",false,null,true],["letterSpacing","letterSpacing",false,null,true],["textDecoration","textDecoration",false,null,true],["wordWrap",null,true,null,true],["borderRadius","borderRadius",false,null,true],["border","border",false,null,true],["background","background",false,null,true],["edge","edge",false,null,true],["cursor","cursor",false,null,true],["opacity","opacity",false,null,true],["boxShadow","boxShadow",false,null,true],["padding","padding",false,null,true],["textAlign","textAlign",false,null,true],["verticalAlign","verticalAlign",false,null,true]];_pCellInfo._property_map_checkbox=[["checkboxsize",null,true,-1,false,0],["checkboxtruevalue","truevalue",true,null,false],["checkboxfalsevalue","falsevalue",true,null,false]];_pCellInfo._property_map_radioitem=[["radioitemsize",null,true,-1,false,0],["radioitemcodevalue","codevalue",false,-1,false,0],];_pCellInfo._property_map_edit=[["editmaxlength",null,true,-1,false,0],["editautoselect","autoselect",true,false,false],["editautoskip","autoskip",true,false,false],["editimemode","imemode",true,"none",false,2,["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"]],["edituseime","useime",true,"global",false,2,["global","local","local,keep","none"]],["editinputfilter","inputfilter",true,"none",false],["editinputmode","inputmode",true,"normal",false],["editinputtype","inputtype",true,"normal",false],["editimeaction","imeaction",true,"none",false,2,["none","done","go","search","send","next","previous"]]];_pCellInfo._property_map_maskedit=[["maskeditautoselect","autoselect",true,false,false],["maskeditlimitbymask","limitbymask",true,"decimal",false,2,["none","integer","decimal","both"]],["maskeditformat","format",true,"",false],["maskeditmaskchar","maskchar",false,"_",false],["maskeditclipmode","clipmode",true,"includespace",false,2,["includespace","excludespace"]],["maskeditautoskip","autoskip",true,false,false],["maskedittrimtype","trimtype",true,"none",false,2,["none","left","right","both"]],["maskeditpostfixtext","postfixtext",true,"",false],["maskedittype","type",true,"number",false,2,["number","string"]],["maskeditimeaction","imeaction",true,"none",false,2,["none","done","go","search","send","next","previous"]]];_pCellInfo._property_map_textarea=[["textareaacceptsenter",null,true,false,false],["textareaacceptstab",null,true,false,false],["textareamaxlength",null,true,-1,false,0],["textareaautoselect","autoselect",true,false,false],["textareaimemode","imemode",true,"none",false,2,["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"]],["textareainputfilter","inputfilter",true,"none",false],["textareainputmode","inputmode",true,"normal",false],["textareainputtype","inputtype",true,"normal",false],["textareascrollbarsize",null,true,undefined,false,0],["textareascrollbartype",null,true,"auto",false],["textareascrolltype",null,true,"both",false,2,["none","both","horizontal","vertical"]],["textareaautoskip","autoskip",true,false,false],["textareauseime","useime",true,"global",false,2,["global","local","local,keep","none"]]];_pCellInfo._property_map_combo=[["combocodecol","codecolumn",true,"",false],["combodatacol","datacolumn",true,"",false],["combodataset","innerdataset",true,"",false],["combodisplaynulltext",null,true,"",false],["combodisplaynulltype",null,true,"none",false,2,["none","nulltext"]],["combodisplayrowcount","displayrowcount",true,undefined,false,0],["combotype","type",true,"dropdown",false,2,["dropdown","search","filter","filterlike","caseisearch","caseifilter","caseifilterlike"]],["comboitemheight","itemheight",true,undefined,false,0],["combopopuptype",null,true,"",false,2,["normal","center","system","none"]],["comboscrollbarsize",null,true,undefined,false,0],["combobuttonsize",null,true,undefined,false],["comboautoselect","autoselect",true,false,false],["comboimemode","imemode",true,"none",false,2,["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"]],["combopopupsize",null,true,undefined,false]];_pCellInfo._property_map_multicombo=[["multicombocodecol","codecolumn",true,"",false],["multicombodatacol","datacolumn",true,"",false],["multicombodataset","innerdataset",true,"",false],["multicombodisplaynulltext",null,true,"",false],["multicombodisplaynulltype",null,true,"none",false,2,["none","nulltext"]],["multicombodisplayrowcount","displayrowcount",true,undefined,false,0],["multicombotype","type",true,"dropdown",false,2,["dropdown","search","filter","filterlike","caseisearch","caseifilter","caseifilterlike"]],["multicomboitemheight","itemheight",true,undefined,false,0],["multicombopopuptype",null,true,"",false,2,["normal","center","system","none"]],["multicomboscrollbarsize",null,true,undefined,false,0],["multicombobuttonsize",null,true,undefined,false],["multicomboautoselect","autoselect",true,false,false],["multicomboimemode","imemode",true,"none",false,2,["none","alpha","alpha,full","hangul","hangul,full","katakana","katakana,full","hiragana","direct"]],["multicombopopupsize",null,true,undefined,false],["multicombocounttextformat","counttextformat",true,"",false],["multicomboedittype","edittype",true,"text",false,2,["text","count","singletag","multitag"]],["multicombotextseparator","textseparator",false,",",false],["multicomboreadonlycolumn","readonlycolumn",true,",",false],["multicomboshowselectallcheckbox","showselectallcheckbox",true,false,false]];_pCellInfo._property_map_calendar=[["calendardataset","innerdataset",true,"",false],["calendardisplaynulltext",null,true,"",false],["calendardisplaynulltype",null,true,"default",false,2,["default","none","nulltext","nullmask"]],["calendardisplayinvalidtext",null,true,"invalid value",false],["calendardisplayinvalidtype",null,true,"default",false,2,["default","none","invalidtext"]],["calendarbackgroundcol","backgroundcolumn",true,"",false],["calendarbordercol","bordercolumn",true,"",false],["calendardatecol","datecolumn",true,"",false],["calendartextcolorcol","textcolorcolumn",true,"",false],["calendardaysize","daysize",true,undefined,false],["calendarheadformat","headformat",true,"yyyy.MM",false],["calendardateformat",null,true,"yyyy-MM-dd ddd",false],["calendareditformat",null,true,"yyyy-MM-dd",false],["calendarweekformat","weekformat",true,undefined,false],["calendarpopupsize",null,true,undefined,false],["calendarpopuptype",null,true,undefined,false,2,["normal","center","system","none"]],["calendarbuttonsize",null,true,undefined,false],["calendarheadheight","headheight",true,undefined,false,0],["calendarshowmonthspin","showmonthspin",true,false,false,1],["calendarshowyearspin","showyearspin",true,false,false,1],["calendartype","type",true,"normal",false],["calendarusetrailingday","usetrailingday",true,false,false],["calendarautoselect","autoselect",true,false,false]];_pCellInfo._property_map_progressbar=[["progressbarblockgap","blockgap",true,undefined,false],["progressbarblocksize","blocksize",true,undefined,false],["progressbardirection","direction",true,"forward",false],["progressbarsmooth","smooth",true,false,false]];_pCellInfo._property_map_image=[["imagestretch","stretch",true,"none",false,2,["none","fit","fixaspectratio"]]];_pCellInfo._property_map_tree=[["treecheck",null,true,"",false],["treecollapseimage",null,true,"",false],["treeexpandimage",null,true,"",false],["treeitemimage",null,true,"",false],["treelevel",null,true,"",false],["treestartlevel",null,true,0,false,0],["treestate",null,true,"",false]];_pCellInfo._property_map_expand=[["expandchar",null,true,"",false],["expandimage",null,true,"",false],["expandshow",null,true,"hide",false,2,["hide","show"]],["expandsize",null,true,16,false,0]];_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_cell);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_checkbox);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_radioitem);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_edit);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_maskedit);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_textarea);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_combo);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_multicombo);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_calendar);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_progressbar);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_image);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_tree);_pCellInfo._property_map=_pCellInfo._property_map.concat(_pCellInfo._property_map_expand);_pCellInfo._setCellChildControlProperty=function(_a,_b,_c){var _d=this["_property_map_"+_a];var _e,_f,_g;for(var _h=0,_i=_d.length;_h<_i;_h++ ){_g=_d[_h][nexacro._CELLINFO_PMAP_CTRLPROPNAME];if(_g!=null){_f=_d[_h][nexacro._CELLINFO_PMAP_PROPNAME];_e=this._getAttrValue(this["_p_"+_f],_c);_b["set_"+_g](_e);}}};_pCellInfo._setCellControlProperty=function(_a,_b){var _c=this._property_map_cell;var _d,_e,_f;for(var _g=0,_h=_c.length;_g<_h;_g++ ){_f=_c[_g][nexacro._CELLINFO_PMAP_CTRLPROPNAME];if(_f!=null){_e=_c[_g][nexacro._CELLINFO_PMAP_PROPNAME];_d=this._getAttrValue(this["_p_"+_e],_b);if(_d===undefined||_d===null){if(_e=="rtl"){_a.on_apply_prop_rtl();}if(_a._setted_computed_style[_e]!==undefined&&_a._setted_computed_style[_e]!==null){_d=_a._setted_computed_style[_e];}}_a["set_"+_f](_d);}}};_pCellInfo._setCellControlPropertyForAutosize=function(_a,_b,_c){var _d,_e;if(nexacro._isArray(_c)){for(var _f=0;_f<_c.length;_f++ ){_e=_c[_f];switch(_e){case "font":case "wordSpacing":case "letterSpacing":case "border":case "padding":case "wordWrap":break;default:continue;}_d=this._getAttrValue(this["_p_"+_e],_b);_a["set_"+_e](_d);}}else{switch(_c){case "font":case "wordSpacing":case "letterSpacing":case "border":case "padding":case "wordWrap":break;default:return;}_d=this._getAttrValue(this["_p_"+_c],_b);_a["set_"+_c](_d);}};_pCellInfo._use_displaytype_controls=["buttoncontrol","checkboxcontrol","imagecontrol","treeitemcontrol","combocontrol","multicombocontrol","calendarcontrol","editcontrol","maskeditcontrol","textareacontrol","progressbarcontrol","radioitemcontrol"];_pCellInfo._chkExistSubControl=function(_a){var _b=this._use_displaytype_controls;for(var _c=0,_d=_b.length;_c<_d;_c++ ){if(_b[_c]==_a){return _a;}}return "";};_pCellInfo._getDefaultPropVal=function(_a){var _b=this._property_map;var _c,_d;for(var _e=0,_f=_b.length;_e<_f;_e++ ){_c=_b[_e][nexacro._CELLINFO_PMAP_PROPNAME];_d=_b[_e][nexacro._CELLINFO_PMAP_DEFTVALUE];if(_c==_a){return _d;}}return undefined;};_pCellInfo._allocatePropertys=function(_a){var _b,_c,_d;for(var _e=0;_e<_a.length;_e++ ){_b=_a[_e][nexacro._CELLINFO_PMAP_PROPNAME];_c=_a[_e][nexacro._CELLINFO_PMAP_EXPRBIND];_d=_a[_e][nexacro._CELLINFO_PMAP_DEFTVALUE];if(_c){this["_p_"+_b]=new nexacro.BindableValue(_d);this["_p_"+_b]._propname=_b;}else{this["_p_"+_b]=_d;}}};nexacro._makeCellInfoPropertySetter=function(_a,_b){var _c,_d,_e,_f,_g,_h,_i="";function enumjoin(_j){var _k="\""+_j[0]+"\"";for(var _l=1;_l<_j.length;_l++ ){_k+=",\""+_j[_l]+"\"";}return _k;}_c="$PTYPE$._properties = [\n";for(var _k=0;_k<_b.length;_k++ ){_d=_b[_k][nexacro._CELLINFO_PMAP_PROPNAME];_e=_b[_k][nexacro._CELLINFO_PMAP_EXPRBIND];_g=_b[_k][nexacro._CELLINFO_PMAP_VALTYPE];_h=_b[_k][nexacro._CELLINFO_PMAP_STYLE];_c+="{ name: \""+_d+"\" },\n";if(_e){_f="$PTYPE$.set_$ATTR$ = function (v)\n";_f+="{\n";_f+="    if (v != this._p_$ATTR$._value)\n";_f+="    {\n";if(_g==0){_f+="        this._p_$ATTR$._set_intval(v);\n";}else if(_g==2){_f+="        this._p_$ATTR$._set_enumval(v, ["+enumjoin(_b[_k][nexacro._CELLINFO_PMAP_ENUMVAL])+"]);\n";}else{_f+="        this._p_$ATTR$._set(v);\n";}_f+="        this._afterProcBindTypeProp();\n";if(_h){_f+="        this._changedStyle(\""+_d+"\");\n";}_f+="    }\n";_f+="};\n\n";}else{_f="$PTYPE$.set_$ATTR$ = function (v)\n";_f+="{\n";if(_g==2){_f+="    var val = this._p_$ATTR$;\n";_f+="    switch (v)\n";_f+="    {\n";var _j=_b[_k][nexacro._CELLINFO_PMAP_ENUMVAL];for(var _l=0;_l<_j.length;_l++ ){_f+="        case \""+_j[_l]+"\":\n";}_f+="            val = v;\n";_f+="    }\n";_f+="    if (val != this._p_$ATTR$)\n";}else{_f+="    if (v != this._p_$ATTR$)\n";}_f+="    {\n";_f+="        this._p_$ATTR$ = v;\n";if(_h){_f+="        this._changedStyle(\""+_d+"\");\n";}_f+="    }\n";_f+="};\n\n";}if(typeof (_a)=="object"){_f=_f.replace(/\$PTYPE\$/g,"arguments[0]").replace(/\$ATTR\$/g,_d);}else{_f=_f.replace(/\$PTYPE\$/g,_a).replace(/\$ATTR\$/g,_d);}_i+=_f;}_c+="];\n";_i+=_c;if(typeof (_a)=="object"){_i=_i.replace(/\$PTYPE\$/g,"arguments[0]");}else{_i=_i.replace(/\$PTYPE\$/g,_a);}new Function(_i)(arguments[0]);};nexacro._makeCellInfoPropertySetter("_pCellInfo",_pCellInfo._property_map);nexacro._makePropertyDesignSetter=function(_a,_b){var _c;var _d="";for(var _e=0;_e<_b.length;_e++ ){_c=_b[_e][nexacro._CELLINFO_PMAP_PROPNAME];_d+="$PTYPE$.design_set_"+_c+" = function (v)\n";_d+="{\n";_d+="        try\n";_d+="        {\n";_d+="            this._refinfo.set_"+_c+"(v);\n";_d+="            this._updateAll();\n";_d+="            this._apply_normalproperty(\""+_c+"\", v);\n";_d+="        }\n";_d+="        catch(e)\n";_d+="        {\n";_d+="           if (e.obj)\n";_d+="           {\n";_d+="               trace(e.message);\n";_d+="           }\n";_d+="           else\n";_d+="           {\n";_d+="               var msg = nexacro._getExceptionMessage(e);\n";_d+="               trace(msg);\n";_d+="           }\n";_d+="        }\n";_d+="};\n\n";_d+="$PTYPE$.design_get_"+_c+" = function ()\n";_d+="{\n";_d+="        var prop = this._refinfo._p_"+_c+";\n";_d+="        if (prop)\n";_d+="        {\n";_d+="            if (nexacro._isNumber(prop) || prop._bindtype == undefined)\n";_d+="                return prop;\n";_d+="            else\n";_d+="                return prop._value;\n";_d+="        }\n";_d+="        return prop;\n";_d+="};\n\n";}if(typeof (_a)=="object"){_d=_d.replace(/\$PTYPE\$/g,"arguments[0]");}else{_d=_d.replace(/\$PTYPE\$/g,_a);}new Function(_d)(arguments[0]);};_pCellInfo._addPropertyMap=function(_a,_b,_c){this._property_map=this._property_map.concat(_b);nexacro._makeCellInfoPropertySetter(_a,_b);if(_c){nexacro._makePropertyDesignSetter(_a,_b);}};_pCellInfo.set_id=function(_a){this.id=this.name=_a;};_pCellInfo.set_name=function(_a){};_pCellInfo.set_displaytype=function(_a){if(_a!=this._p_displaytype){var _b=this._p_displaytype._value;this._p_displaytype._set(_a);this._afterProcBindTypeProp();if(this._view){if(_b=="treeitemcontrol"){this._view._removeTreeCellinfo(this);}if(_a=="treeitemcontrol"){this._view._setTreeCellinfo(this);}}}};_pCellInfo.set_maskeditmaskchar=function(_a){if(!_a){_a="_";}var _b=_a.toString().charAt(0);if(_b!=this._p_maskeditmaskchar){this._p_maskeditmaskchar=_b;this._afterProcBindTypeProp();}};_pCellInfo.set_cssclass=function(_a){if(_a!=this._p_cssclass._value){this._p_cssclass._set(_a);this._afterProcBindTypeProp();}};_pCellInfo.set_expr=function(_a){if(_a!=this._p_expr._value){var _b;if(typeof _a!=='string'){_b=_a.toString();}else{_b=_a;}var _c=_b.substr(0,4).toUpperCase();if(_c!=""&&_c!="EXPR"){_a="EXPR:"+_a;}this._p_expr._set(_a);this._afterProcBindTypeProp();}};nexacro._defineProperties(_pCellInfo,_pCellInfo._properties);_pCellInfo.destroy=function(){this._p_parent=null;var _a;var _b=this._subcells.length;for(_a=0;_a<_b;_a++ ){this._subcells[_a].destroy();}this._subcells=null;this._maskstringtypeobj=null;this._masknumbertypeobj=null;var _c=this._property_map;var _d;for(_a=0;_a<_c.length;_a++ ){_d=_c[_a][nexacro._CELLINFO_PMAP_PROPNAME];this["_p_"+_d]=null;}this._property_map=null;this._key_direction=null;this._blinked_status=null;};_pCellInfo._getBindDataset=function(){if(this._view){return this._view._getBindDataSet?this._view._getBindDataSet():this._view._binddataset;}return null;};_pCellInfo._getExprCacheFn=function(_a){if(this._view){return this._view._getExprFuncByCtx?this._view._getExprFuncByCtx(_a):this._view._exprcache[_a];}};_pCellInfo._setExprCacheFn=function(_a,_b){if(this._view){return this._view._setExprFuncByCtx?this._view._setExprFuncByCtx(_a,_b):this._view._exprcache[_a]=_b;}};_pCellInfo._getValue=function(_a,_b){if(_b){if(this._p_expr._value!=""&&this._p_expr._value!=null){return this._getAttrValue(this._p_expr,_a);}}return this._getAttrValue(this._p_text,_a);};_pCellInfo._getDisplaytype=function(_a){var _b=this._p_displaytype;var _c=this._getAttrValue(_b,_a);if(_c===undefined){_c="normal";}if(_c=="normal"){var _d=this.text;if(_d&&_d._bindtype==1){var _e=this._getBindDataset();if(!_e){return "text";}var _f=_d._bindexpr;var _g=_e._getColumnType(_f);switch(_g){case 1:case 9:return "text";case 2:case 3:case 4:return "number";case 5:return "date";case 6:return "time";case 7:return "datetime";default:return "none";}}else{return "text";}}return _c;};_pCellInfo._getEdittype=function(_a){var _b=this._p_edittype;var _c=this._getAttrValue(_b,_a);if(_c=="normal"){var _d=this.text;if(_d._bindtype==1){var _e=this._getBindDataset();if(!_e){return "text";}var _f=_d._bindexpr;var _g=_e._getColumnType(_f);if(!_g){return "text";}var _h=_g;switch(_h){case 1:case 2:case 3:case 4:case 9:return "text";case 5:case 6:case 7:return "date";case 8:return "none";}}else{return "text";}}return _c;};_pCellInfo._getWordwrap=function(_a){var _b=this._getAttrValue(this._p_wordWrap,_a);return _b;};_pCellInfo._getAttrValue=function(_a,_b,_c){if(_a==undefined){return undefined;}if(_a._bindtype==undefined){return _a;}else if(_a._bindtype==0){if(_b==-1&&_a._propname=="text"){if(this._value!=undefined){return this._value;}else{return _a._value;}}else{return _a._value;}}else{var _d=this._getBindDataset();if(_d==null){return undefined;}if(_a._bindtype==1){return _d.getColumn(_b,_a._bindexpr);}else{var _e=_a._bindexpr;var _f=_a._value;var _g=/BIND\s*:/i;var _h=_g.exec(_f);var _i=-1;if(_h&&_h.index>=0){_i=_h.index;}if(_i>=0){_e=_e.substring(_i,_e.length);if(_c){_e=_d.getColumnNF(_b,_e);}else{_e=_d.getColumn(_b,_e);}}var _j=this._getExprCacheFn(_e);if(_j==null){_j=_d._createExprFunc(_e);this._setExprCacheFn(_e,_j);}if((typeof _j)=="function"){_d.__getParsedRow(_d._viewRecords[_b]);this.col=this._col;this.row=this._row;return _j.call(this,_b,_b,this._view,_d,_d._viewRecords,_d._viewRecords[_b],[]);}}}return undefined;};_pCellInfo._setAttrValue=function(_a,_b,_c){if(_a._bindtype==1){var _d=this._getBindDataset();if(_d){_d.setColumn(_b,_a._bindexpr,_c);}}};_pCellInfo._getDefaultTextAlign=function(_a,_b){var _c;switch(_a){case "normal":_a=this._getDisplaytype(_b);if(_a=="number"){_c="right";}else if(_a=="date"||_a=="time"||_a=="datetime"){_c="center";}else{_c="left";}break;case "mask":var _d=this._getAttrValue(this._p_maskedittype,_b);if(_d=="number"){_c="right";}else{_c="left";}break;case "number":case "exponent":case "currency":_c="right";break;default:_c="center";break;}return _c;};_pCellInfo._getCheckboxsize=function(_a){var _b=this._getAttrValue(this._p_checkboxsize,_a);if((_b===""||_b<0)&&this._view){_b=this._view.cellcheckboxsize;}return _b;};_pCellInfo._getRadioitemsize=function(_a){var _b=this._getAttrValue(this._p_radioitemsize,_a);if((_b===""||_b<0)&&this._view){_b=this._view.cellradioitemsize;}return _b;};_pCellInfo._getControlButtonsize=function(_a,_b){var _c=this._getAttrValue(this["_p_"+_b+"buttonsize"],_a);if(_c==null&&this._view){_c=this._view["_p_cell"+_b+"buttonsize"];}return _c;};_pCellInfo._getControlScrollbarsize=function(_a,_b){var _c=this._getAttrValue(this["_p_"+_b+"scrollbarsize"],_a);if(_c==null||_c<0){if(this._view){_c=this._view["_p_cell"+_b+"scrollbarsize"];}}else{_c=parseInt(_c,10);}if(_c==null||_c<0){_c=undefined;}return _c;};_pCellInfo._getControlPopuptype=function(_a,_b){var _c=this._getAttrValue(this["_p_"+_b+"popuptype"],_a);if(!_c&&this._view){_c=this._view["_p_cell"+_b+"popuptype"];}return _c;};_pCellInfo._getControlPopupsize=function(_a,_b){var _c=this._getAttrValue(this["_p_"+_b+"popupsize"],_a);if(!_c&&this._view){_c=this._view["_p_cell"+_b+"popupsize"];}return _c;};_pCellInfo._afterProcBindTypeProp=function(){};_pCellInfo._changedStyle=function(_a){};_pCellInfo._getTooltipText=function(_a){var _b=this._getAttrValue(this._p_tooltiptext,_a);return _b;};_pCellInfo._getTreeCheck=function(_a){return this._getAttrValue(this._p_treecheck,_a);};_pCellInfo._getTreeCollapseImage=function(_a){return this._getAttrValue(this._p_treecollapseimage,_a);};_pCellInfo._getTreeExpandImage=function(_a){return this._getAttrValue(this._p_treeexpandimage,_a);};_pCellInfo._getTreeItemImage=function(_a){return this._getAttrValue(this._p_treeitemimage,_a);};_pCellInfo._getTreeLevel=function(_a){var _b=this._getAttrValue(this._p_treelevel,_a);_b=parseInt(_b)|0;return _b;};_pCellInfo._getTreeStartLevel=function(_a){var _b=this._getAttrValue(this._p_treestartlevel,_a);_b=parseInt(_b)|0;return _b;};_pCellInfo._getTreeState=function(_a){return this._getAttrValue(this._p_treestate,_a);};_pCellInfo._setTreeCheck=function(_a,_b){return this._setTreeBindValue(this._p_treecheck,_a,_b);};_pCellInfo._setTreeCollapseImage=function(_a,_b){return this._setTreeBindValue(this._p_treecollapseimage,_a,_b);};_pCellInfo._setTreeExpandImage=function(_a,_b){return this._setTreeBindValue(this._p_treeexpandimage,_a,_b);};_pCellInfo._setTreeItemImage=function(_a,_b){return this._setTreeBindValue(this._p_treeitemimage,_a,_b);};_pCellInfo._setTreeLevel=function(_a,_b){return this._setTreeBindValue(this._p_treelevel,_a,_b);};_pCellInfo._setTreeStartLevel=function(_a,_b){return this._setTreeBindValue(this._p_treestartlevel,_a,_b);};_pCellInfo._setTreeState=function(_a,_b){return this._setTreeBindValue(this._p_treestate,_a,_b);};_pCellInfo._setTreeBindValue=function(_a,_b,_c){if(_a._bindtype==1){var _d=this._getBindDataset();if(_d){_d._treeBindChanged=true;_d.setColumn(_b,_c);}}};_pCellInfo._setValue=function(_a){if(this._value!=_a){this._value=_a;return true;}return false;};_pCellInfo._getLocale=function(_a){var _b=this._getAttrValue(this._p_locale,_a);if(!_b&&this._view){_b=this._view._getLocale();}return _b;};_pCellInfo._getDisplayTypeValue=function(_a){var _b=this._p_displaytype;var _c=this._getAttrValue(_b,_a);if(_c===undefined){_c="normal";}return _c;};_pCellInfo._getDisplayText=function(_a){var _b=this._getBindDataset();if(_b&&this.subsumtext._value!==null&&this.subsumtext._value!==undefined&&_b.getRowType(_a)==16){var _c=this._getAttrValue(this._p_subsumtext,_a);return nexacro._toString(_c);}var _d=this._getDisplayTypeValue(_a);if(_d=="normal"){var _e=this.text;if(_e._bindtype==1){if(!_b){return "";}var _f=_e._bindexpr;var _g=_b._getColumnType(_f);switch(_g){case 1:case 9:return this._getDisplayText_text(_a);case 2:case 3:case 4:return this._getDisplayText_localenumber(_a);case 5:return this._getDisplayText_date(_a,0);case 6:return this._getDisplayText_date(_a,1);case 7:return this._getDisplayText_date(_a,2);default:return "";}}}else{if(_d=="mask"||_d=="maskeditcontrol"){var _h=this._getAttrValue(this._p_maskedittype,_a);if(_h=="number"){return this._getDisplayText_masknumber(_a);}else{return this._getDisplayText_maskstring(_a);}}else if(_d=="number"){return this._getDisplayText_localenumber(_a);}else if(_d=="currency"){return this._getDisplayText_currency(_a);}else if(_d=="date"){return this._getDisplayText_date(_a);}else if(_d=="calendarcontrol"){return this._getDisplayText_date(_a,null,true);}else if(_d=="combotext"){return this._getDisplayText_combo(_a);}else if(_d=="combocontrol"){return this._getDisplayText_combo(_a,true);}else if(_d=="multicombocontrol"){return this._getDisplayText_multicombo(_a,true);}else if(_d=="none"){return "";}}return this._getDisplayText_text(_a);};_pCellInfo._getTextValueForDisp=function(_a){if(this._p_expr._value!=""&&this._p_expr._value!=null){return this._getAttrValue(this._p_expr,_a);}return this._getAttrValue(this._p_text,_a);};_pCellInfo._getDisplayText_text=function(_a){var _b=this._getTextValueForDisp(_a);if(_b!=null){if(typeof _b!=='string'){_b=_b.toString();}}_b=nexacro._getTextTemplateValue(_b);return _b;};_pCellInfo._getDisplayText_maskstring=function(_a){var _b=this._getTextValueForDisp(_a);var _c=this._getAttrValue(this._p_maskeditformat,_a);if(_b!=null){if(typeof _b!=='string'){_b=_b.toString();}}if(_c&&_c.length){var _d=this._maskstringtypeobj;var _e=this._getAttrValue(this._p_maskeditmaskchar,_a);var _f=this._getLocale(_a);var _g=this._getAttrValue(this._p_maskeditpostfixtext,_a);_d.setLocale(_f);_d.setMask(_c);_d.setMaskChar(_e);_d.setPostfixtext(_g);_b=_d.applyMask(_b);}return _b;};_pCellInfo._getDisplayText_masknumber=function(_a){var _b=this._getTextValueForDisp(_a);var _c=this._getAttrValue(this._p_maskeditformat,_a);if(_c&&_c.length){var _d=this._getLocale(_a);var _e=this._masknumbertypeobj;var _f=this._getAttrValue(this._p_maskeditlimitbymask,_a);var _g=this._getAttrValue(this._p_maskeditpostfixtext,_a);if(_c==="."){_e.setUseGrouping(true);}_e.setLimitType(_f);_e.setLocale(_d);_e.setMask(_c);_e.setPostfixtext(_g);_b=_e.applyMask(_b);}else{_b=nexacro._toString(_b);}return _b;};_pCellInfo._getDisplayText_number=function(_a){var _b=this._getTextValueForDisp(_a);var _c=this._getAttrValue(this._p_maskeditlimitbymask,_a);var _d=this._getLocale(_a);var _e=this._masknumbertypeobj;_e.setUseGrouping(true);_e.setLimitType(_c);_e.setLocale(_d);_e.setMask("");_b=_e.applyMask(_b);return _b;};_pCellInfo._getDisplayText_localenumber=function(_a){var _b=this._getTextValueForDisp(_a);var _c=this._getLocale(_a);if(_b instanceof nexacro.Decimal){if(_b.isNaNOrInf()){return "";}return _b.toLocaleString(_c);}else if(isFinite(_b)){return (new nexacro.Number(_b)).toLocaleString(_c);}return "";};_pCellInfo._getDisplayText_currency=function(_a){var _b=this._getTextValueForDisp(_a);var _c=this._getLocale(_a);if(_b instanceof nexacro.Decimal){if(_b.isNaNOrInf()){return "";}_b=_b.toLocaleCurrencyString(_c);}else if(isFinite(_b)){_b=(new nexacro.Number(_b)).toLocaleCurrencyString(_c);}else{_b="";}return _b;};_pCellInfo._getDisplayText_date=function(_a,_b,_c){var _d=this._getTextValueForDisp(_a);var _e=undefined;var _f=false;var _g=false;var _h;switch(_b){case 0:_h="yyyy-MM-dd";break;case 1:_h="hh:mm:ss";break;case 2:_h="yyyy-MM-dd hh:mm:ss";break;default:_h=this._getAttrValue(this._p_calendardateformat,_a);break;}_d=(_d)?_d:"";if(_d.constructor==Date){_e=_d;}else{var _i;var _j;var _k;if(typeof _d!=='string'){_i=_d.toString();}else{_i=_d;}if(_i.search(/\S/)>-1){if(_b==undefined){var _l=this._getAttrValue(this._p_calendareditformat,_a);if(_l&&_l.length){if(_l=="LONGDATE"||_l=="SHORTDATE"){_b=2;}else{var _m=new nexacro._EditMaskTypeDate();_m.setDateMask(_l);_m.setEditMask(_l);_b=_m.getEditFormatType();}}else{if(_i.length==8){_b=0;}else if(_i.length==6||_i.length==9){_b=1;}else{_b=2;}}}_e=this.__parseDate(_i,_b);if(_e&&(_e._isInvalidDate?_e._isInvalidDate():isNaN(_e.valueOf()))){_j=this._getAttrValue(this._p_calendardisplayinvalidtype,_a);if((_j=="invalidtext"||_j=="default")&&!_c){return this._getAttrValue(this._p_calendardisplayinvalidtext,_a);}return _i;}}else{_k=this._getAttrValue(this._p_calendardisplaynulltype,_a);if(_k=="nulltext"&&!_c){return this._getAttrValue(this._p_calendardisplaynulltext,_a);}else if(_k=="nullmask"&&!_c){_f=true;}else if(_k=="default"){}else{return "";}}}if(_e==null){_g=true;_e=new nexacro.Date();_e.setFullYear(0);_e.setMonth(0);_e.setDate(1);}var _n;var _o=this._getLocale(_a);var _p=nexacro.Locale.getLocaleInfo(_o);var _q;if(_h=="SHORTDATE"||_h=="LONGDATE"){if(_h=="SHORTDATE"){_q=_p.shortdate_format;}else{_q=_p.longdate_format;}if(_q==""){_q=nexacro.Locale._default_shortdate_format;}var _r=((this._view&&!this._view._isRtl())&&_p.direction=="rtl")?true:false;_n=_e.getLocaleFormatString(_o,_q,_r);}else{var _s=_e.getFullYear();if(_s==0){_s="0000";}else{_s=_s.toString().padLeft(4,"0");}var _t=_e.getMonth()+1;var _u=_p.month_names_short[_e.getMonth()];var _v=_p.month_names_long[_e.getMonth()];_t=(_t<10?"0":"")+_t;var _w=_p.weekday_names_long[_e.getDay()];var _x=_p.weekday_names_short[_e.getDay()];var _y=_e.getDate();_y=(_y<10?"0":"")+_y;var _z=_e.getYear()%100;_z=(_z<10?"0":"")+_z;var _aa= +_t;var _ab= +_y;var _ac=_e.getHours();_ac=(_ac<10?"0":"")+_ac;var _ad= +_ac;var _ae=_e.getMinutes();_ae=(_ae<10?"0":"")+_ae;var _af= +_ae;var _ag=_e.getSeconds();_ag=(_ag<10?"0":"")+_ag;var _ah= +_ag;var _ai=_e.getMilliseconds();_ai=(_ai<10?"00":_ai<100?"0":"")+_ai;if(_g){_ac=_ad="00";_ae=_af="00";_ag=_ah="00";_ai="000";}_q=_h;if(_q==null||_q.length==0||!_q.match(/[yMdHhms]/)){_q="yyyy-MM-dd ddd";}if(_f){var _aj="_";var _ak=_aj+_aj;var _al=_ak+_aj;var _am=_al+_aj;_n=_q.replace("yyyy",_am);_n=_n.replace("MMMM","lunari");_n=_n.replace("MMM",_al);_n=_n.replace("MM",_ak);_n=_n.replace("ddd","week");_n=_n.replace("dd",_ak);_n=_n.replace("yy",_ak);_n=_n.replace("M",_aj);_n=_n.replace("d",_aj);_n=_n.replace("tt",_ak);_n=_n.replace("HH",_ak);_n=_n.replace("hh",_ak);_n=_n.replace("H",_aj);_n=_n.replace("h",_aj);_n=_n.replace("mm",_ak);_n=_n.replace("m",_aj);_n=_n.replace("sss",_al);_n=_n.replace("ss",_ak);_n=_n.replace("s",_aj);_n=_n.replace("lunari",_am);_n=_n.replace("week",_al);}else{var _an=false;var _ao=_ac;var _ap="오전";if(_ac>12&&_ac<25){_ao=_ac<22?"0"+(_ac -12):_ac -12;_ap="오후";}_n=_q.replace("tt",_ap);_n=_n.replace("HH",_ac);_n=_n.replace("hh",_ao);_n=_n.replace("H",_ad);_n=_n.replace("h",_ad);_n=_n.replace("mm",_ae);_n=_n.replace("m",_af);_n=_n.replace("sss",_ai);_n=_n.replace("ss",_ag);_n=_n.replace("s",_ah);_n=_n.replace("dddd","weekL");_n=_n.replace("ddd","week");_n=_n.replace("yyyy",_s);_n=_n.replace("MMMM","lunari");if(_n.indexOf("MMM")>-1){_n=_n.replace("MMM",_u);_an=true;}_n=_n.replace("MM",_t);_n=_n.replace("dd",_y);_n=_n.replace("yy",_z);if(!_an){_n=_n.replace("M",_aa);}_n=_n.replace("d",_ab);_n=_n.replace("lunari",_v);_n=_n.replace("weekL",_w);_n=_n.replace("week",_x);}}return _n;};_pCellInfo.__parseDate=function(_a,_b){var _c;var _d=new nexacro._EditMaskTypeDate();if(/[^0-9]/.test(_a)){_c=new Date(_a);}else{_c=_d.convertToDateObject(_a,_b);}if(_c){if(isNaN(_c.valueOf())){return _c;}switch(_b){case 0:_c=new nexacro.Date(_c.getFullYear(),_c.getMonth(),_c.getDate());break;case 1:_c=new nexacro.Date(_c.getFullYear(),_c.getMonth(),_c.getDate(),_c.getHours(),_c.getMinutes(),_c.getSeconds(),_c.getMilliseconds());_c._timeonly=true;break;case 2:_c=new nexacro.Date(_c.getFullYear(),_c.getMonth(),_c.getDate(),_c.getHours(),_c.getMinutes(),_c.getSeconds(),_c.getMilliseconds());break;default:break;}}return _c;};_pCellInfo._getDisplayText_combo=function(_a,_b){var _c=this._getAttrValue(this._p_combodataset,_a);var _d=this._getAttrValue(this._p_combocodecol,_a);var _e=this._getAttrValue(this._p_combodatacol,_a);if(_c&&_c.length&&_d&&_d.length&&_e&&_e.length){var _f=this._findDataset(_c);if(_f){var _g=this._getTextValueForDisp(_a);var _h=_f.lookupNF(_d,_g,_e);if(_h){if(typeof _h!=='string'){return _h.toString();}else{return _h;}}}}if(this.combodisplaynulltype._value=="nulltext"&&!_b){return this._getAttrValue(this._p_combodisplaynulltext,_a);}return "";};_pCellInfo._getDisplayText_multicombo=function(_a,_b){var _c=this._getAttrValue(this._p_multicombodataset,_a);var _d=this._getAttrValue(this._p_multicombocodecol,_a);var _e=this._getAttrValue(this._p_multicombodatacol,_a);if(_c&&_c.length&&_d&&_d.length&&_e&&_e.length){var _f=this._findDataset(_c);if(_f){var _g=this._getTextValueForDisp(_a);var _h=_f.lookupNF(_d,_g,_e);if(_h){if(typeof _h!=='string'){return _h.toString();}else{return _h;}}}}if(this.multicombodisplaynulltype._value=="nulltext"&&!_b){return this._getAttrValue(this._p_multicombodisplaynulltext,_a);}return "";};_pCellInfo._findDataset=function(_a){var _b=this._view;if(_b){return _b._findDataset(_a);}return null;};_pCellInfo._loadXmlElement=function(_a,_b,_c){var _d=_a.getAttribute("col"),_e=_a.getAttribute("row"),_f=_a.getAttribute("colspan"),_g=_a.getAttribute("rowspan");this._col=(_d==null?0:parseInt(_d));this._row=(_e==null?0:parseInt(_e));this._colspan=(_f==null?1:parseInt(_f));this._rowspan=(_g==null?1:parseInt(_g));var _h,_i;var _j;var _k=_a.attributes;var _l=_k.length;for(_j=0;_j<_l;_j++ ){_h=_k[_j].name;_i=_a.getAttribute(_h);this._loadingxml=true;if(this["set_"+_h]){if(_i!==null&&_i!==undefined){this["set_"+_h](_i);}}else if(this.hasOwnProperty(_h)==false){switch(_h){case "col":case "row":case "colspan":case "rowspan":break;default:this["_p_"+_h]=new nexacro.BindableValue(undefined);this["_p_"+_h]._propname=_h;this._addPropertyMap(this,[[_h,null,true,undefined,false]],true);if(_i!==null&&_i!==undefined){this["set_"+_h](_i);}break;}}this._loadingxml=false;}if(!_c){var _m=_a.getElementsByTagName("Cell"),_n,_o;if(!_b){_b=nexacro.CellInfo;}for(_j=0,_l=_m.length;_j<_l;_j++ ){_o=_m[_j];_n=new _b((this._type+this._cellidx+"_sub"+_j),this._p_parent,this._view,this._type,_j);_n._loadXmlElement(_o,true);_n._isSubCell=true;this._subcells[_j]=_n;}}};_pCellInfo._getXmlString=function(){var _a="";if(this._isSubCell){_a+="    ";}_a+="<Cell col=\""+this._col;_a+="\" row=\""+this._row;if(this._colspan>1){_a+="\" colspan=\""+this._colspan;}if(this._rowspan>1){_a+="\" rowspan=\""+this._rowspan;}var _b=this._property_map;var _c,_d,_e;var _f;var _g=_b.length;for(_f=0;_f<_g;_f++ ){_c=_b[_f][nexacro._CELLINFO_PMAP_PROPNAME];_d=_b[_f][nexacro._CELLINFO_PMAP_EXPRBIND];_e=_b[_f][nexacro._CELLINFO_PMAP_DEFTVALUE];if(_d){if(this["_p_"+_c]._value!=_e){_a+="\" "+_c+"=\""+(typeof (this["_p_"+_c]._value)=="string"?nexacro._encodeXml(this["_p_"+_c]._value):this["_p_"+_c]._value);}}else{if(this["_p_"+_c]!=_e){_a+="\" "+_c+"=\""+(typeof (this["_p_"+_c])=="string"?nexacro._encodeXml(this["_p_"+_c]):this["_p_"+_c]);}}}var _h=this._subcells;if(_h.length>0){_a+="\">\n";for(_f=0,_g=_h.length;_f<_g;_f++ ){_a+=_h[_f]._getXmlString(true);}_a+="</Cell>\n";}else{_a+="\"/>\n";}return _a;};_pCellInfo._hasEditor=function(_a){var _b=this._getEdittype(_a);switch(_b){case "none":return false;case "normal":case "text":case "combo":case "multicombo":case "date":case "mask":case "textarea":case "button":case "readonly":return true;}return false;};delete _pCellInfo;}if(!nexacro._CellControl){nexacro._CellControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_h);var _m=["onexpandup","onexpanddown","oninput","ondropdown","oncloseup"];this._view=_k;this._rowidx=(_l!=undefined)?_l:-9;this._p_tabstop=false;this._cellidx=_j;this._refinfo=_i?_i:this._makeCellInfo(_a,null,_k,_a,_j);this.subcells=[];this.parentcell=(_h instanceof nexacro._CellControl)?_h:null;this.selected=false;this._p_accessibilityrole="gridcell";this._subComp=null;this._text_elem=null;this._curDisplayType="";this._expand_width=0;this._expandCtrl=null;this._isSubCell=(this.parentcell)?true:false;this._fakecell=false;this._hideInner=false;this._is_real_upelem=null;this._editor=null;this._client_mode="";this._disp_show=true;this._writable=false;this._setted_computed_style={};this._use_flex_text_node=(_k&&_k._use_flex_text_node)?_k._use_flex_text_node:false;this._static_create=false;this._cellExpandObj="_CellExpandControl";this._cellButtonObj="_CellButtonControl";this._cellCheckBoxObj="_CellCheckboxControl";this._cellImageObj="_CellImageControl";this._cellComboObj="_CellComboControl";this._cellMultiComboObj="_CellMultiComboControl";this._cellCalendarObj="_CellCalendarControl";this._cellEditObj="_CellEditControl";this._cellTextAreaObj="_CellTextAreaControl";this._cellProgressBarObj="_CellProgressBarControl";this._cellMaskEditObj="_CellMaskEditControl";this._cellTreeObj="_CellTreeControl";this._cellRadioItemObj="_CellRadioItemControl";for(var _n=0,_o=_m.length;_n<_o;_n++ ){this._event_list[_m[_n]]=1;}};var _pCellControl=nexacro._createPrototype(nexacro.Component,nexacro._CellControl);nexacro._CellControl.prototype=_pCellControl;_pCellControl._type_name="CellControl";_pCellControl._is_subcontrol=true;_pCellControl._is_tablecell=true;_pCellControl._is_simple_control=true;_pCellControl._use_selected_status=true;_pCellControl._use_readonly_status=true;_pCellControl._is_use_auto_selected_status=true;_pCellControl._avail_left=0;_pCellControl._avail_top=0;_pCellControl._avail_width=0;_pCellControl._avail_height=0;_pCellControl.init=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){nexacro.Component.prototype.init.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null);var _l=this._refinfo;_l.id=_h.name=_a;_l._view=_j;_l._type="";_l._cellidx=_i;};_pCellControl._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro.Component.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellControl._changeCell=function(_a){var _b=this._refinfo;var _c=this._cellidx;this._refinfo=_a._refinfo;this._cellidx=_a._cellidx;_a._refinfo=_b;_a._cellidx=_c;var _d=this._adjust_left;var _e=this._adjust_top;var _f=this._adjust_width;var _g=this._adjust_height;this.move(_a._adjust_left,_a._adjust_top,_a._adjust_width,_a._adjust_height);_a.move(_d,_e,_f,_g);};_pCellControl._makeCellInfo=function(_a,_b,_c,_d,_e){return new nexacro.CellInfo(_a,_b,_c,_d,_e);};_pCellControl._apply_normalproperty=function(_a,_b){};_pCellControl._getDisplaytype=function(){var _a=this._getDataRow();return this._refinfo._getDisplaytype(_a);};_pCellControl._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};if(this._text_elem){_b=this._text_elem._getComputedStyleAlign(_a);}return _b;};_pCellControl.on_create_contents=function(){this._disp_show=this._updateDisplayer();if(nexacro._enableaccessibility){this._on_create_accessibility_contents();}};_pCellControl.on_created_contents=function(_a){var _b=this._control_element;if(_b){if(_b.setInnerHTML&&this._view._use_innerhtml&&!this._p_parent._is_nc_control){this._is_create_commandstr=true;var _c=this.on_create_contents_command();_b.setInnerHTML(_c);this.on_attach_contents_handle(_a);this._is_created=true;}else{var _d=this.subcells;var _e=_d.length;if(_e==0){var _f=this._subComp;if(_f){_f.on_created(_a);}}var _g=this._text_elem;if(_g){_g.create(_a);}var _h=this._expandCtrl;if(_h){_h.on_created();}for(var _i=0;_i<_e;_i++ ){_d[_i].on_created();}}if(nexacro._enableaccessibility){this._on_created_accessibility_contents(_a);}if(!this._adjust_width||!this._adjust_height){this._setDisplay(false);}}};_pCellControl._on_changeStatus=function(_a,_b){this._status_changing=true;nexacro.Component.prototype._on_changeStatus.call(this,_a,_b);this._status_changing=false;};_pCellControl.on_changeStatus=function(_a,_b,_c,_d,_e){if(this._isSubCell){return _d;}return nexacro.Component.prototype.on_changeStatus.call(this,_a,_b,_c,_d,_e);};_pCellControl.on_create_contents_command=function(_a){var _b="";var _c=this._control_element;if(_c){var _d=this.subcells;var _e=_d.length;if(_e==0){var _f=this._subComp;if(_f){_b+=_f.createCommand();}}else{for(var _i=0;_i<_e;_i++ ){_b+=_d[_i].createCommand();}}var _g=this._text_elem;if(_g){_b+=_g.createCommand();}var _h=this._expandCtrl;if(_h){_b+=_h.createCommand();}}return _b;};_pCellControl.on_attach_contents_handle=function(_a){var _b=this.subcells;var _c=_b.length;for(var _g=0;_g<_c;_g++ ){_b[_g].attachHandle(_a);}var _d=this._subComp;if(_d){_d.attachHandle(_a);}var _e=this._expandCtrl;if(_e){_e.attachHandle(_a);}var _f=this._text_elem;if(_f){_f.attachHandle(_a);}if(nexacro._enableaccessibility){this._on_attach_accessibility_contents_handle(_a);}if(!this._adjust_width||!this._adjust_height){this._setDisplay(false);}};_pCellControl.destroyComponent=function(){nexacro.Component.prototype.destroyComponent.call(this);if(this._text_elem){this._text_elem.destroy();this._text_elem=null;}this._refinfo=this._view=this.parentcell=this._band=this._is_real_upelem=null;};_pCellControl.on_destroy_contents=function(){this._destroyDisplayer();if(this._expandCtrl){this._expandCtrl.destroy();this._expandCtrl=null;}var _a=this.subcells;var _b=_a.length;var _c;if(this.id=="tempcell"){for(_c=0;_c<_b;_c++ ){if(_a[_c]){_a[_c].destroy();}}}else{for(_c=0;_c<_b;_c++ ){_a[_c].destroy();}}this.subcells=null;if(this._tempdestroyeditor){this._tempdestroyeditor.destroy();this._tempdestroyeditor=null;}if(this._editor){this._editor.destroy();this._editor=null;}if(this._tempdestroyeditor_list){for(_c=0;_c<this._tempdestroyeditor_list.length;_c++ ){this._tempdestroyeditor_list[_c].destroy();}this._tempdestroyeditor_list=null;}this._setted_computed_style=null;};_pCellControl._makeEventInfoBase=function(_a){var _b=this;var _c=null;if(_b.parentcell){_c=_b;_b=_b.parentcell;}var _d={cell:-1,col:-1,row:-9,subrow:-1,mergecell:-1,mergecol:-1,mergerow:-1,pivotindex:-9,eventid:"",id:""};if(_a){_d.eventid=_d.id=_a;}_d.cell=_b._cellidx;_d.col=_b._refinfo._col;_d.row=_b._getDataRow();_d.subrow=_b._refinfo._row;_d.cellid=_b.id;if(_c){_d.mergecell=_c._cellidx;_d.mergecol=_c._refinfo._col;_d.mergerow=_c._refinfo._row;}return _d;};_pCellControl.on_fire_onexpandup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onexpandup&&this.onexpandup._has_handlers){var _n=this._makeEventInfoBase("onexpandup");_n.button=_a;_n.altkey=_b;_n.ctrlkey=_c;_n.shiftkey=_d;_n.metakey=_m;_n.screenX=_e;_n.screenY=_f;_n.canvasX=_g;_n.canvasY=_h;_n.clientX=_i;_n.clientY=_j;_n.fromobject=_k;_n.fromreferenceobject=_l;return this.onexpandup._fireEvent(this,_n);}return false;};_pCellControl.on_fire_onexpanddown=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this.onexpandup&&this.onexpandup._has_handlers){var _n=this._makeEventInfoBase("onexpanddown");_n.button=_a;_n.altkey=_b;_n.ctrlkey=_c;_n.shiftkey=_d;_n.metakey=_m;_n.screenX=_e;_n.screenY=_f;_n.canvasX=_g;_n.canvasY=_h;_n.clientX=_i;_n.clientY=_j;_n.fromobject=_k;_n.fromreferenceobject=_l;return this.onexpandup._fireEvent(this,_n);}return false;};_pCellControl.on_fire_oninput=function(_a){if(this.oninput&&this.oninput._has_handlers){var _b=this._makeEventInfoBase("oninput");_b.from_refer_comp=_a;return this.oninput._fireEvent(this,_b);}return true;};_pCellControl.on_fire_ondropdown=function(_a){if(this.ondropdown&&this.ondropdown._has_handlers){var _b=this._makeEventInfoBase("ondropdown");_b.value=this.__evtvalue(_a);return this.ondropdown._fireCheckEvent(this,_b);}return true;};_pCellControl.on_fire_oncloseup=function(_a,_b,_c,_d,_e){if(this.oncloseup&&this.oncloseup._has_handlers){var _f=this._makeEventInfoBase("oncloseup");_f.value=this.__evtvalue(_a,_e);return this.oncloseup._fireEvent(this,_f);}return true;};_pCellControl.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.onclick&&this.onclick._has_handlers){var _o=_l;while(_o&&_o instanceof nexacro.Component){if(_o instanceof nexacro._CellControl){break;}var _p=_o._getRecalcCanvasXY(_l._control_element,_g,_h);_g=_p[0];_h=_p[1];if(this._subComp==_o){break;}_o=_o._p_parent;}if(this._subComp==_k){var _q=this._getCurrentStylePadding();if(_q){_g+=_q.left;_h+=_q.top;_i+=_q.left;_j+=_q.top;}}_g+=this._adjust_left;_h+=this._adjust_top;_i+=this._adjust_left;_j+=this._adjust_top;var _r=this._makeEventInfoBase("onclick");_r.button=_a;_r.altkey=_b;_r.ctrlkey=_c;_r.shiftkey=_d;_r.metakey=_m;_r.screenx=_e;_r.screeny=_f;_r.canvasx=_g;_r.canvasy=_h;_r.clientx=_i;_r.clienty=_j;_r.fromobject=_k;_r.fromreferenceobject=_l;_r.clickitem=_n||"";return this.onclick._fireEvent(this,_r);}return false;};_pCellControl.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){if(this.ondblclick&&this.ondblclick._has_handlers){var _o=_l;while(_o&&_o instanceof nexacro.Component){if(_o instanceof nexacro._CellControl){break;}var _p=_o._getRecalcCanvasXY(_l._control_element,_g,_h);_g=_p[0];_h=_p[1];if(this._subComp==_o){break;}_o=_o._p_parent;}if(this._subComp==_k){var _q=this._getCurrentStylePadding();if(_q){_g+=_q.left;_h+=_q.top;_i+=_q.left;_j+=_q.top;}}_g+=this._adjust_left;_h+=this._adjust_top;_i+=this._adjust_left;_j+=this._adjust_top;var _r=this._makeEventInfoBase("ondblclick");_r.button=_a;_r.altkey=_b;_r.ctrlkey=_c;_r.shiftkey=_d;_r.metakey=_m;_r.screenx=_e;_r.screeny=_f;_r.canvasx=_g;_r.canvasy=_h;_r.clientx=_i;_r.clienty=_j;_r.fromobject=_k;_r.fromreferenceobject=_l;_r.clickitem=_n||"";return this.ondblclick._fireEvent(this,_r);}return false;};_pCellControl._common_fire_lbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o,_p){var _q=this._getWindow();var _r=_q._cur_ldown_elem;var _s=_q.findComponent(_r,0,0)[0];var _t=_q.findComponent(_o,0,0)[0];if(_r!=_o){while(_s){if(_s instanceof nexacro._CellControl){break;}_s=_s._p_parent;}while(_t){if(_t instanceof nexacro._CellControl){break;}_t=_t._p_parent;}if(_s==_t){var _u="";if(this._editor){_u="control";}this.on_fire_onclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_p,_u);}}};_pCellControl.on_fire_user_ontouchend=function(_a,_b,_c,_d){this._common_fire_lbuttonup(_a,_b,"",false,false,false,-1,-1,-1,-1,-1,-1,_c,_d,null);return nexacro.Component.prototype.on_fire_user_ontouchend.call(this,_a,_b,_c,_d);};_pCellControl.on_fire_user_onlbuttonup=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){this._common_fire_lbuttonup(null,null,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);return nexacro.Component.prototype.on_fire_user_onlbuttonup.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pCellControl._on_imeaction=function(_a,_b,_c,_d,_e,_f){if(!this._is_alive){return;}if(this._p_visible&&this._isEnable()&&this.enableevent){this.on_fire_onimeaction(_b,_c,_d,_e,this,this,_f);var _g=this._getFromComponent(this);if(_g&&(!_g.oncellimeaction||(_g.oncellimeaction&&!_g.oncellimeaction.defaultprevented))){this.on_imeaction_default_action(_a,_b,_c,_d,_e,_f);}}};_pCellControl.on_imeaction_default_action=function(_a,_b,_c,_d,_e,_f){if(this._subComp){var _g=this._getRootComponent(this);if(this._subComp.imeaction=="next"){var _h=this._getForm().getNextComponent(_g,true);if(_h){_h.setFocus();}}else if(this._subComp.imeaction=="previous"){var _i=this._getForm().getPrevComponent(_g,true);if(_i){if(_i instanceof Array){_i=_i[0];}_i.setFocus();}}}};_pCellControl.on_fire_onimeaction=function(_a,_b,_c,_d,_e,_f,_g){return this._view.on_fire_onimeaction(this,_a,_b,_c,_d,_e,_f,_g);};_pCellControl.__evtvalue=function(_a,_b){var _c="";if(_a&&_a.value){_c=_a.value;}else if(_b){_c=_b;}return _c;};_pCellControl._destroyDisplayer=function(_a){if(this._subComp){if(_a){var _b=this._subComp;nexacro._OnceCallbackTimer.callonce(this,function(){if(_b){_b.destroy();}});_b.set_visible(false);this._subComp=null;}else{this._subComp.destroy();this._subComp=null;}}};_pCellControl._getBindDataset=function(){return this._view?(this._view._getBindDataSet?this._view._getBindDataSet():this._view._binddataset):null;};_pCellControl._applyEditorDataset=function(_a,_b){if(!this._editor||!this._writable){return;}var _c=this._getBindDataset();if(_c){var _d=this._getDataRow();var _e=this._refinfo._p_text._bindexpr;var _f=this._editor._getValueData();var _g=this._view;if(this._refinfo._p_text._bindtype==1){_g._is_async_recreate=_a;_g._dsEventOccured=true;var _h={status:""};_c.setColumn(_d,_e,_f,_h);if(_h.status=="cancolumnchange"){this._editor.set_value(_b);}_g._is_async_recreate=false;_g._dsEventOccured=false;}}};_pCellControl._getDataRow=function(){return this._rowidx;};_pCellControl._isFakeCell=function(){var _a=this._getDataRow();var _b=this._getBindDataset();var _c=(_b)?_b.rowcount:0;if(_c<=_a||_a<-2){return true;}return false;};_pCellControl.on_change_containerRect=function(_a,_b){this._updateAvailableArea();};_pCellControl.on_getIDCSSSelector=function(){if(this._isSubCell){return "subcell";}return "cell";};_pCellControl._getClassCSSSelector=function(){var _a=nexacro.Component.prototype._getClassCSSSelector.call(this);if(this._rowidx>=0&&this._rowidx%2){if(!_a){_a=[];}_a.push("oddcell");}return _a;};_pCellControl._getElementClassCSSSelector=function(){var _a=this._getClassCSSSelector(this);if(_a){_a.push("dummy");_a.push("dummy");_a.push("dummy");}return _a;};_pCellControl._apply_setfocus=function(_a,_b){if(_b||nexacro._enableaccessibility){nexacro.Component.prototype._apply_setfocus.call(this,_a);}};_pCellControl.on_apply_prop_tooltip=function(){var _a=this._getDataRow();this._p_tooltiptext=this._refinfo._getTooltipText(_a);this._p_tooltiptype=this._refinfo._p_tooltiptype;nexacro.Component.prototype.on_apply_prop_tooltip.call(this);};_pCellControl.on_fire_onsize=function(_a,_b){if(_a&&_b){this._setDisplay(true);}var _c=nexacro.Component.prototype.on_fire_onsize.call(this,_a,_b);if(!_a||!_b){this._setDisplay(false);}return _c;};_pCellControl._setDisplay=function(_a){if(this._control_element){this._control_element.setElementDisplay((_a)?"":"none");}};_pCellControl.on_apply_text=function(){var _a=this._text_elem;if(_a){var _b=this._refinfo;var _c=this._getDataRow();var _d=_b._getDisplayTypeValue(_c);var _e=nexacro._toString(this._displaytext);if(_d=="decoratetext"){_a.setElementDecorateText(_e);}else{if(_a.decoration!=""){_a.decoration="";_a.text=null;}if(!_a.text&&_e){_a.setElementText(_e);if(this._expandCtrl&&this._expandCtrl._is_created){this._control_element.bringToFrontElement(this._expandCtrl._control_element);}}else{_a.setElementText(_e);}}}};_pCellControl.on_apply_wordWrap=function(){var _a=this._text_elem;if(_a){var _b=this._getDataRow();var _c=this._refinfo._getWordwrap(_b);var _d=null;if(nexacro._Browser=="Runtime"){if(this._cssselector){_d=this._cssselector.enabled;}}if(_d&&(_d.wordWrap!=null&&_d.wordWrap!=undefined)&&_c==null){_a.setElementWordWrap(_d.wordWrap);}else{_a.setElementWordWrap(_c);}}};_pCellControl.on_apply_textAlign=function(_a){var _b=this._text_elem;if(_b){_b.setElementTextAlign(_a);}if(this._subComp){if(this._subComp._setAlign){this._subComp._setAlign(_a,this.verticalAlign);}else{this._subComp.set_textAlign(_a);}}};_pCellControl.on_apply_verticalAlign=function(_a){var _b=this._text_elem;if(_b){_b.setElementVerticalAlign(_a);}if(this._subComp){if(this._subComp._setAlign){this._subComp._setAlign(this.textAlign,_a);}else{this._subComp.set_verticalAlign(_a);}}};_pCellControl._needToggle=function(){var _a=this._getDataRow();var _b=this._refinfo;var _c=_b._getDisplaytype(_a);var _d=_b._getEdittype(_a);var _e=this._view;if(nexacro._toBoolean(_e._p_readonly)){return;}if(_d=="checkbox"){if(_c=="checkboxcontrol"){if(this._subComp){this._subComp._toggleCheck();}}else{var _f=_b._getValue(_a);_f=nexacro._toBoolean(_f);_f=(_f)?0:1;if(_b.text._bindtype==1){var _g=this._getBindDataset();_e._dsEventOccured=true;_g.setColumn(_a,_b.text._bindexpr,_f);if(nexacro._enableaccessibility){this._setAccessibilityStatChecked(nexacro._toBoolean(_f));}_e._dsEventOccured=false;}}}else if(_d=="radioitem"){if(_c=="radioitemcontrol"){if(this._subComp){this._subComp._itemSelect();}}else{var _f=_b.radioitemcodevalue;if(_b.text._bindtype==1){var _g=this._getBindDataset();_e._dsEventOccured=true;_g.setColumn(_a,_b.text._bindexpr,_f);if(nexacro._enableaccessibility){this._setAccessibilityStatChecked(nexacro._toBoolean(_f));}_e._dsEventOccured=false;}}}};_pCellControl.on_apply_subControlAlign=function(_a,_b){var _c=this._subComp._adjust_width;var _d=this._subComp._adjust_height;var _e=this._getAvailableRect();var _f=_e.left,_g=_e.top;var _h=_e.width,_i=_e.height;switch(_a){case "left":break;case "right":_f+=(_h-_c);break;default:_f+=((_h-_c)/2);break;}switch(_b){case "top":break;case "bottom":_g+=(_i-_d);break;default:_g+=((_i-_d)/2);break;}this._subComp.move(_f,_g,this._subComp._adjust_width,this._subComp._adjust_height);};_pCellControl.on_apply_textDecoration=function(_a){var _b=this._refinfo;if(!_a&&_b.textDecoration){if(this.textDecoration!=_b.textDecoration){this.textDecoration=_b.textDecoration;_a=nexacro.TextDecorationObject(this.textDecoration);this._textdecoration=_a;}else{_a=this._textdecoration;}}if(this._text_elem){this._text_elem.setElementTextDecoration(_a);}else if(this._subComp){this._subComp.set_textDecoration(this.textDecoration);}};_pCellControl._hideInnerElement=function(){var _a=this.subcells;for(var _b=0,_c=_a.length;_b<_c;_b++ ){_a[_b].set_visible(false);}if(this._subComp){this._subComp.set_visible(false);}else if(this._text_elem){this._text_elem.setElementVisible(false);}this._hideInner=true;this.__showExpand(false);if(this._curDisplayType=="treeitemcontrol"){this._subComp._treeline_visible(false);}};_pCellControl._isShowEditor=function(){if(this._editor){return this._editor._p_visible;}return false;};_pCellControl._isEnterDownable=function(){var _a=this._refinfo;var _b=this._getDataRow();var _c=_a._getEdittype(_b);if((this._curDisplayType=="checkboxcontrol"&&_c=="checkbox")||(this._curDisplayType=="radioitemcontrol"&&_c=="radioitem")){return true;}else if(_c=="button"){return false;}else if(this._isShowEditor()){return true;}return false;};_pCellControl._showInnerElement=function(){var _a=this.subcells;for(var _b=0,_c=_a.length;_b<_c;_b++ ){_a[_b].set_visible(true);}if(this._isShowEditor()==false){if(this._subComp){this._subComp.set_visible(true);}else if(this._text_elem){this._text_elem.setElementVisible(true);}}this._hideInner=false;this.__showExpand(true);if(this._curDisplayType=="treeitemcontrol"){this._subComp._treeline_visible(true);}};_pCellControl.__showExpand=function(_a){if(!this._expandCtrl){return;}if(this._fakecell){this._expandCtrl.set_visible(false);return;}var _b=this._refinfo;var _c=this._getDataRow();var _d=_b._getAttrValue(_b._p_expandshow,_c);if(_d=="show"){if(_a==false){this._expandCtrl.set_visible(this.selected);}else{this._expandCtrl.set_visible(true);}}else{this._expandCtrl.set_visible(false);}this._updateAvailableArea();};_pCellControl._createDisplayer=function(_a){var _b=this._view;var _c=this._refinfo;switch(_a){case "buttoncontrol":this._createButtonDisplayer();break;case "checkboxcontrol":this._createCheckboxDisplayer();break;case "imagecontrol":this._createImageDisplayer();break;case "treeitemcontrol":this._createTreeDisplayer();if(_b){_b._treeCellinfo=_c;}break;case "combocontrol":this._createComboDisplayer();break;case "multicombocontrol":this._createMultiComboDisplayer();break;case "calendarcontrol":this._createCalendarDisplayer();break;case "maskeditcontrol":this._createMaskEditDisplayer();break;case "textareacontrol":this._createTextAreaDisplayer();break;case "progressbarcontrol":this._createBarDisplayer();break;case "editcontrol":this._createEditDisplayer();break;case "radioitemcontrol":this._createRadioItemDisplayer();break;default:this._createTextDisplayer();break;}if(this._subComp){this._subComp.on_changeUserStatus=function(_d,_e,_f,_g,_h){if(this._displaymode){if(_d=="nulltext"&&_e){return _d;}else{return _f;}}return _f;};}this._curDisplayType=_a;this.on_apply_textAlign(_c.textAlign);this.on_apply_verticalAlign(_c.verticalAlign);if(_b&&_b._applyCellSelection){_b._applyCellSelection();}};_pCellControl._isChangeDisplayer=function(_a){var _b=this._view;var _c=this._curDisplayType;if((_a!=_c)||(_b&&_b._changeDisplayer)){return true;}return false;};_pCellControl._updateDisplayer=function(){var _a=true;var _b=this._view;var _c=this._refinfo;var _d=this._getDataRow();var _e=_c._getDisplayTypeValue(_d);if(_e===undefined){_e="normal";}if(_c._p_displaytype._bindtype>0&&_e==="treeitemcontrol"){if(!_b._hasTree&&_b._setTreeCellinfo){_b._setTreeCellinfo(_c,(this.id=="tempcell"));_b._useexprtree=true;}}var _f=_c._getAttrValue(_c._p_expandshow,_d);var _g=_c._getAttrValue(_c._p_expandsize,_d);if(_g!==0&&!_g){_g=16;}if(_f=="show"){if(!this._expandCtrl){this._createExpandDisplayer();}else{if(this._expand_width!=_g){this._expandCtrl.destroy();this._expandCtrl=null;this._createExpandDisplayer();}}this._changeClientmode("expand");}else{if(this._expandCtrl){this._expand_width=0;this._expandCtrl.destroy();this._expandCtrl=null;this._changeClientmode("text");}}if(this._isChangeDisplayer(_e)){if(this._curDisplayType!=""){this._destroyDisplayer(_b?_b._lbuttondown_proc:null);}this._createDisplayer(_e);if(_b&&_b._lbuttondown_proc){var _h=this._getWindow();if(_h._cur_ldown_elem&&_h._cur_ldown_elem.parent==null&&this._p_parent!=null){_h._cur_ldown_elem=this;}}var _i=_c._getDefaultTextAlign(_e,_d);var _j=this._text_elem;if(_j){_j.setElementTextAlignByClassCSSSelector(_i);}if(this._is_created&&this._subComp&&!this._subComp._is_created){this._subComp.on_created();}this._updateEditor();}else{this.on_apply_wordWrap();}var _k=_b?_b._isFakeCell(_d):this._isFakeCell();if(_k&&_b){if(_b.fillareatype=="datarow"){if(!this._isDisplayDataType(_e)){if(_e!="date"){_a=false;if(_k!=this._fakecell||_b._resetfillarea){this._hideInnerElement();this._fakecell=_k;}}}}else if(_b.fillareatype=="linerow"){_a=false;if(_k!=this._fakecell||_b._resetfillarea){this._hideInnerElement();this._fakecell=_k;}}else if(_b.fillareatype=="controlrow"){if(this._isDisplayDataType(_e)){_a=false;if(_k!=this._fakecell||_b._resetfillarea){this._hideInnerElement();this._fakecell=_k;}}}}else{if(_k!=this._fakecell){this._showInnerElement();this._fakecell=_k;}}return _a;};_pCellControl._isUpdateArea=function(){return true;};_pCellControl.on_apply_select=function(_a){this._updateAll();};_pCellControl._isSelectedColor=function(){var _a=this._view?this._view.useselcolor:false;return (this.selected&&((_a==undefined)?true:_a));};_pCellControl._getRemoveLine=function(){var _a,_b,_c,_d;if(this._isSubCell){_a=true;_b=true;_c=true;_d=true;}else{_a=true;_b=true;_c=false;_d=false;}return [_a,_b,_c,_d];};_pCellControl.__update=function(_a,_b,_c){if(!this._is_alive){return false;}var _d=this._refinfo;if(!_d._property_map){return false;}var _e=this._view;var _f=false;if(this._p_parent._rowidx>=0){if(this._rowidx!=this._p_parent._rowidx){var _g=this._rowidx;this._rowidx=this._p_parent._rowidx;if((this._rowidx%2)!=(_g%2)){_f=true;}this._updateEditor();}}var _h=this._getDataRow();var _i=_d._getAttrValue(_d._p_cssclass,_h);if(this._p_cssclass!=_i){this.set_cssclass(_i);}else{if(_f){this.on_apply_cssclass();}}_d._setCellControlProperty(this,_h);var _j=this._control_element;if(_j){if(!_c&&this._isUpdateArea()==false){return false;}var _k=_e?!!_e._p_readonly:false;if(this._is_use_auto_selected_status){this._changeUserStatus("selected",this._isSelectedColor());}if(_d._blinked_status[_h]){this._changeUserStatus("blinked",true);}else{this._changeUserStatus("blinked",false);}this._changeStatus("readonly",_k);this._disp_show=this._updateDisplayer();if(!_b&&_a){this._changeStatus(_a,true);}this._displaytext=this._getDisplayText();this.on_apply_text();this.on_apply_textDecoration();var _l=this._subComp;if(_l){_l._updateAll(true,_k);}if(this._expandCtrl){this._expandCtrl._updateAll(true,_k);}this.on_apply_prop_tooltip();if(nexacro._enableaccessibility){this.on_apply_accessibility();}}return true;};_pCellControl._updateAll=function(_a,_b,_c){if(this.__update(_a,_b,_c)){var _d=this._control_element;if(_d){var _e=this._getRemoveLine();var _f,_g,_h,_i;_f=_e[0];_g=_e[1];_h=_e[2];_i=_e[3];if(this.subcells.length>0){for(var _j=0,_k=this.subcells.length;_j<_k;_j++ ){this.subcells[_j]._updateAll();}}else{if(this._disp_show&&this._hideInner){this._showInnerElement();}}if(!_b){this._control_element.setElementBorderNone(_f,_g,_h,_i,this._isRtl(this._view?this._view:undefined));}if(_d._mode=="text"){this._changeClientmode("text");}}}};_pCellControl.on_apply_border=function(_a){nexacro.Component.prototype.on_apply_border.call(this,_a);var _b=this._control_element;if(_b){_b._refreshBorderNone();}};_pCellControl._updateAllEx=function(_a,_b){if(!this._is_alive){return false;}var _c=this._refinfo;var _d=this._view;var _e=false;if(this._p_parent._rowidx>=0){if(this._rowidx!=this._p_parent._rowidx){var _f=this._rowidx;this._rowidx=this._p_parent._rowidx;if((this._rowidx%2)!=(_f%2)){_e=true;}}}var _g=_b;var _h=_c._getAttrValue(_c._p_cssclass,_g);if(this._p_cssclass!=_h){this.set_cssclass(_h);}else{if(_e){this.on_apply_cssclass();}}_c._setCellControlPropertyForAutosize(this,_g,_a);var _i=this._control_element;if(_i){var _j=_d?!!_d._p_readonly:false;if(this._is_use_auto_selected_status){this._changeUserStatus("selected",this._isSelectedColor());}this._changeStatus("readonly",_j);this._disp_show=this._updateDisplayer();this._displaytext=this._getDisplayText();this.on_apply_text();this.on_apply_textDecoration();var _k=this._subComp;if(_k){_k._updateAll(true,_j);}if(this._expandCtrl){this._expandCtrl._updateAll(true,_j);}var _l=this._getRemoveLine();var _m,_n,_o,_p;_m=_l[0];_n=_l[1];_o=_l[2];_p=_l[3];this._control_element.setElementBorderNone(_m,_n,_o,_p,this._isRtl(this._view?this._view:undefined));}return true;};_pCellControl.on_apply_prop_cssclass=function(){if(this._editor){this._editor.on_apply_cssclass();}if(this._subComp){this._subComp.on_apply_cssclass();}if(this._expandCtrl){this._expandCtrl.on_apply_cssclass();}};_pCellControl.on_apply_cursor=function(_a){nexacro.Component.prototype.on_apply_cursor.call(this,_a);if(this._subComp){this._subComp.set_cursor(_a);}};_pCellControl._getAvailableRect=function(){var _a={left:0,top:0,right:0,bottom:0,width:0,height:0};_a.left=this._getClientLeft();_a.top=this._getClientTop();_a.right=this._getClientLeft()+this._getClientWidth();_a.bottom=this._getClientTop()+this._getClientHeight();_a.width=this._getClientWidth();_a.height=this._getClientHeight();var _b=this._expandCtrl;if(_b&&_b._p_visible){_a.width-=_b.width;_a.right-=_b.width;}return _a;};_pCellControl._changeClientmode=function(_a){var _b=this._control_element;if(_b){if(this._refinfo._subcells.length){_a="normal";}else if(_a=="expand"){if(this._client_mode!="normal"){_a="expandtext";}else{_a="normal";}}else if(_a=="text"){if(this._expandCtrl){_a="expandtext";}}if(_a=="text"||_a=="expandtext"){if(!this._text_elem){var _c=this._curDisplayType;if(!_c){var _d=this._getDataRow();_c=this._refinfo._getDisplayTypeValue(_d);}if(this._use_flex_text_node&&_c!="decoratetext"){this._text_elem=new nexacro.TextBoxVirtualFlexElement(_b,_a);}else{this._text_elem=new nexacro.TextBoxElement(_b,"text");}}}else{if(this._text_elem){this._text_elem.destroy();this._text_elem=null;}}this._updateAvailableArea(true);this._client_mode=_a;}};_pCellControl._createExpandDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._refinfo;var _c=this._getDataRow();var _d=this._getCurrentStyleBorder();var _e=this._getCurrentStylePadding();this._expand_width=_b._getAttrValue(_b._p_expandsize,_c);var _f=this._adjust_width-this._expand_width-((_d)?_d.right._width:0)-((_e)?_e.right:0);var _g=this._getClientTop();var _h=_f+this._expand_width;var _i=_g+this._getClientHeight();if(_f<0){_f=this._getClientLeft();_h=_f+this._getClientWidth();}var _j=this._expandCtrl=new nexacro[this._cellExpandObj](this,_f,_g,_h,_i);_j.createComponent();}};_pCellControl._createTextDisplayer=function(){var _a=this._control_element;if(_a){this._changeClientmode("text");var _b=this._text_elem;if(_b){if(!this._is_created){this._displaytext=this._getDisplayText();this.on_apply_text();}else{_b.create(this._getWindow());}this.on_apply_textDecoration();this.on_apply_wordWrap();}}};_pCellControl._createButtonDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=new nexacro[this._cellButtonObj]("cellbutton",_b.left,_b.top,_b.width,_b.height,this,true);_c.createComponent(true);var _d=this._getDataRow();var _e=this._refinfo._getWordwrap(_d);_c.set_wordWrap(_e);this._subComp=_c;}};_pCellControl._createCheckboxDisplayer=function(){var _a=this._control_element;if(_a){this._changeClientmode("normal");var _b=new nexacro[this._cellCheckBoxObj]("cellcheckbox",0,0,0,0,this,true);_b.createComponent(true);_b._skip_mobile_tabfocus=true;this._subComp=_b;}};_pCellControl._createRadioItemDisplayer=function(){var _a=this._control_element;if(_a){this._changeClientmode("normal");var _b=new nexacro[this._cellRadioItemObj]("cellradioitem",0,0,0,0,this,true);_b.createComponent(true);_b._skip_mobile_tabfocus=true;this._subComp=_b;}};_pCellControl._createImageDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=new nexacro[this._cellImageObj]("cellimage",_b.left,_b.top,_b.width,_b.height,this);_c.createComponent(true);this._subComp=_c;}};_pCellControl._createComboDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=new nexacro[this._cellComboObj]("cellcombo",_b.left,_b.top,_b.width,_b.height,this,true);_c.createComponent(true);_c.comboedit._input_element._isUseDelCaret=true;this._subComp=_c;}};_pCellControl._createMultiComboDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=new nexacro[this._cellMultiComboObj]("cellmulticombo",_b.left,_b.top,_b.width,_b.height,this,true);_c.createComponent(true);if(!this._tagmode){_c.multicombotext._input_element._isUseDelCaret=true;}else{_c.multicomboedit._input_element._isUseDelCaret=true;}this._subComp=_c;}};_pCellControl._createCalendarDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=this._subComp=new nexacro[this._cellCalendarObj]("cellcalendar",_b.left,_b.top,_b.width,_b.height,this,true);_c._setAccessibilityEnable(false);_c.createComponent(true);_c.calendaredit._input_element._isUseDelCaret=true;this._subComp=_c;}};_pCellControl._createEditDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=this._subComp=new nexacro[this._cellEditObj]("celledit",_b.left,_b.top,_b.width,_b.height,this,true);_c.createComponent(true);_c._input_element._isUseDelCaret=true;this._subComp=_c;}};_pCellControl._createMaskEditDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=this._subComp=new nexacro[this._cellMaskEditObj]("cellmaskedit",_b.left,_b.top,_b.width,_b.height,this,true,true);_c.createComponent(true);_c._input_element._isUseDelCaret=true;this._subComp=_c;}};_pCellControl._createTextAreaDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=this._subComp=new nexacro[this._cellTextAreaObj]("celltextarea",_b.left,_b.top,_b.width,_b.height,this,true);_c.createComponent(true);_c._input_element._isUseDelCaret=true;var _d=this._getDataRow();var _e=this._refinfo._getWordwrap(_d);_c.set_wordWrap(_e);this._subComp=_c;}};_pCellControl._createBarDisplayer=function(){var _a=this._control_element;if(_a){var _b=this._getControlRect();this._changeClientmode("normal");var _c=this._subComp=new nexacro[this._cellProgressBarObj]("cellprogressbar",_b.left,_b.top,_b.width,_b.height,this,true);_c.createComponent(true);this._subComp=_c;}};_pCellControl._createTreeDisplayer=function(_a,_b){var _c=this._control_element;if(_c){var _d=this._getControlRect();var _e=_d.left;var _f=_d.top;var _g=_d.width;var _h=_d.height;this._changeClientmode("normal");var _i=this._subComp=new nexacro[this._cellTreeObj]("celltreeitem",_e,_f,_g,_h,null,null,this);_i.createComponent(true);this._subComp=_i;}};_pCellControl._updateAvailableArea=function(_a){var _b=this._getAvailableRect();var _c=this._subComp;var _d=_b.left;var _e=_b.top;var _f=_b.width;var _g=_b.height;if(!_a){if(this._avail_left==_d&&this._avail_top==_e&&this._avail_width==_f&&this._avail_height==_g){return false;}}if(_c){if(this._curDisplayType=="checkboxcontrol"||this._curDisplayType=="radioitemcontrol"){this.on_apply_subControlAlign("center","middle");}else{var _h=this._getControlRect();_c.move(_h.left,_h.top,_h.width,_h.height);}}if(this._text_elem){this._text_elem.setElementMove(_d,_e,_f,_g);}if(this._editor&&this._isConditionEditor()){this._editor.move(_d,_e,_f,_g);}var _i=this._expandCtrl;if(_i){var _j=this._getClientWidth()+this._getClientLeft()-this._expand_width;var _k=_b.top;var _l=this._expand_width;var _m=_b.height;if(_j<0){_j=_b.left;_l=this._getClientWidth();}_i.move(_j,_k,_l,_m);}this._avail_left=_b.left;this._avail_top=_b.top;this._avail_width=_b.width;this._avail_height=_b.height;return true;};_pCellControl._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellControl._getDisplayText=function(){if(this._refinfo){var _a=this._getDataRow();var _b=this._refinfo._getDisplayText(_a);_b=this._getStringResourceProperty(_b);return _b;}return "";};_pCellControl._isDisplayDataType=function(_a){if(_a=="number"||_a=="exponent"||_a=="currency"||_a=="normal"||_a=="text"||_a=="decoratetext"||_a=="mask"||_a=="combotext"||_a=="date"){return true;}return false;};_pCellControl._updateEditor=function(){var _a=this._text_elem;var _b=this._editor;if(_b){if(this._isConditionEditor()){if(_a){_a.setElementVisible(false);}if(this._subComp){this._subComp.set_visible(false);}var _c=this._getControlRect();_b.move(_c.left,_c.top,_c.width,_c.height);}else{if(_a){_a.setElementVisible(true);}if(this._subComp){this._subComp.set_visible(true);}_b.move(-10,-10,0,0);}}};_pCellControl._isConditionEditor=function(){return true;};_pCellControl._getAutoEnter=function(){return this._view.autoenter;};_pCellControl._getAutoUpdateType=function(){return this._view.autoupdatetype;};_pCellControl._showEditor=function(){if(this._isShowEditor()&&!nexacro._enableaccessibility){return;}var _a=this._text_elem;var _b;var _c=this._view;if(_a){_a.setElementVisible(false);}if(this._subComp){this._subComp._changeStatus("mouseover",false);if(nexacro._isTouchInteraction){nexacro._OnceCallbackTimer.callonce(this,function(){if(this._editor!=null){this._subComp.set_visible(false);}});}else{this._subComp.set_visible(false);}}if(nexacro._enableaccessibility&&this._isShowEditor()){_b=this._editor;if(_b){_b.set_height(this._getControlRect().height);}}else{_b=this._createEditor();_b._EditUpdateAll();_b.set_visible(true);}_b._setFocus(false);if(!_b._p_autoselect){if(_b.setCaretPos){_b.setCaretPos(0);}else if(_b.comboedit&&_b.comboedit.setCaretPos){_b.comboedit.setCaretPos(0);}else if(_b.multicomboedit&&_b.multicomboedit.setCaretPos){_b.multicomboedit.setCaretPos(0);}}if(nexacro._isTouchInteraction||(_c&&_c.selectchangetype=="up")){_b._setFocus(false);}if(_c&&_c.autoenter=="select"&&_c._lbuttondown_proc){_b._user_push=true;_b._changeStatus("focused",true);_b._is_pushed_area=true;_b._is_push=true;}else{_b._changeStatus("focused",true);}this._editor=_b;};_pCellControl._hideEditor=function(){var _a=this._text_elem;if(!this._hideInner){if(_a){_a.setElementVisible(true);}if(this._subComp){this._subComp.set_visible(true);}}var _b;if(this._editor){_b=this._editor._getValueData();this._destroyEditor();}return _b;};_pCellControl._hasEditor=function(){return this._refinfo._hasEditor(this._getDataRow());};_pCellControl._destroyEditor=function(){var _a=false;var _b=this._getWindow();if(_b){_a=!(_b._indexOfCurrentFocusPaths(this)>-1);}var _c;if(this._editor){if(!this._tempdestroyeditor_list){this._tempdestroyeditor_list=[];}if(this._static_create){this._editor.set_height(0);return;}else{if(this._tempdestroyeditor){this._tempdestroyeditor_list.push(this._tempdestroyeditor);}}_c=this._tempdestroyeditor=this._editor;if(nexacro._Browser=="Safari"){nexacro._OnceCallbackTimer.callonce(_c,function(){_c.set_visible(false);});}else{_c.set_visible(false);if(this._control_element&&!_a){this._control_element.setElementFocus();}}if(nexacro._enableaccessibility&&this._tempdestroyeditor){this._tempdestroyeditor_list.push(this._tempdestroyeditor);}if(this._tempdestroyeditor_list){nexacro._OnceCallbackTimer.callonce(this,function(){var _d=null;var _e=this._tempdestroyeditor_list.length;for(var _f=0;_f<_e;_f++ ){_d=this._tempdestroyeditor_list.pop();if(_d){_d.destroy();}}});}this._editor=null;}else if(this._tempdestroyeditor&&nexacro._Browser=="Runtime"&&nexacro._OS=="Windows"){_c=this._tempdestroyeditor;_c.set_visible(false);this._tempdestroyeditor.destroy();this._tempdestroyeditor=null;}};_pCellControl._getFormatSize=function(){return null;};_pCellControl._getControlRect=function(){var _a=this._getAvailableRect();var _b=this._getFormatSize();var _c=this._refinfo;var _d=_c._getAttrValue(_c._p_controlautosizingtype,this._getDataRow());if(_b!=null){var _e=_a.left,_f=_a.top;var _g,_h,_i,_j;var _k=this._getCurrentStyleBorder();var _l=this._getCurrentStylePadding();var _m=_b[0]-(_k?_k.left._width+_k.right._width:0)-(_l?_l.left+_l.right:0);var _n=_b[1]-(_k?_k.top._width+_k.bottom._width:0)-(_l?_l.top+_l.bottom:0);if(_d=="none"){_g=_m;if(_g<_a.width){_e+=(_a.width-_g)/2;}_i=_e+_g;_h=_n;if(_h<_a.height){_f+=(_a.height-_h)/2;}_j=_f+_h;_a.left=_e;_a.top=_f;_a.width=_g;_a.height=_h;_a.right=_i;_a.bottom=_j;}else if(_d=="width"){_h=_n;if(_h<_a.height){_f+=(_a.height-_h)/2;}_j=_f+_h;_a.top=_f;_a.height=_h;_a.bottom=_j;}else if(_d=="height"){_g=_m;if(_g<_a.width){_e+=(_a.width-_g)/2;}_i=_e+_g;_a.left=_e;_a.width=_g;_a.right=_i;}}return _a;};_pCellControl._createidx=0;_pCellControl._createEditor=function(){if(this._static_create&&!this._isComponentKeydownAction()){return this._editor;}var _a=this._refinfo;var _b=this._getDataRow();var _c=_a._getEdittype(_b);var _d=this["_createEditor_"+_c];if(_d==null){_d=this._createEditor_text;}this._destroyEditor();this._editor=_d.call(this);this._editor._update_datarow=this._getDataRow();this._createidx++ ;return this._editor;};_pCellControl._createEditor_text=function(){var _a=this._getDataRow();var _b=this._getControlRect();var _c=this._refinfo;var _d=new nexacro[this._cellEditObj]("celledit"+this._createidx,_b.left,_b.top,_b.width,_b.height,this);var _e=_c._getValue(_a);var _f=_c._getAttrValue(_c._p_editmaxlength,_a);var _g=this._getBindDataset();if(_f==0){_f=_g?_g._getColumnSize(_c.text._bindtype==1?_c.text._bindexpr:0):0;}_d.set_maxlength(_f);_d.set_value(_e);if(_d._view){var _h=_d._view._initsoftkeyboard;_d.set_usesoftkeyboard(_d._view._getUseSoftKeyboardValue(_h));}_d.createComponent();this._writable=true;return _d;};_pCellControl._createEditor_mask=function(){var _a=this._getControlRect();var _b=this._refinfo;var _c=new nexacro[this._cellMaskEditObj]("cellmaskedit"+this._createidx,_a.left,_a.top,_a.width,_a.height,this);var _d=this._getDataRow();var _e=_b._getValue(_d);var _f=_b._getLocale(_d);var _g=_b._getAttrValue(_b._p_maskeditformat,_d);var _h=_b._getAttrValue(_b._p_maskedittype,_d);_c.set_type(_h);if(_g){_c.set_format(_g);}_c.set_locale(_f);_c.set_value(_e);if(_c._view){var _i=_c._view._initsoftkeyboard;_c.set_usesoftkeyboard(_c._view._getUseSoftKeyboardValue(_i));}_c.createComponent();this._writable=true;return _c;};_pCellControl._createEditor_combo=function(){var _a=this._getControlRect();var _b=new nexacro[this._cellComboObj]("cellcombo"+this._createidx,_a.left,_a.top,_a.width,_a.height,this);if(_b._view){var _c=_b._view._initsoftkeyboard;_b.set_usesoftkeyboard(_b._view._getUseSoftKeyboardValue(_c));}_b.createComponent();_b._child_editor=_b.comboedit;this._writable=true;return _b;};_pCellControl._createEditor_multicombo=function(){var _a=this._getControlRect();var _b=new nexacro[this._cellMultiComboObj]("cellmulticombo"+this._createidx,_a.left,_a.top,_a.width,_a.height,this);if(_b._view){var _c=_b._view._initsoftkeyboard;_b.set_usesoftkeyboard(_b._view._getUseSoftKeyboardValue(_c));}_b.createComponent();_b._child_editor=_b.multicomboedit;this._writable=true;return _b;};_pCellControl._createEditor_date=function(){var _a=this._getDataRow();var _b=this._getControlRect();var _c=this._refinfo;var _d=new nexacro[this._cellCalendarObj]("cellcalendar"+this._createidx,_b.left,_b.top,_b.width,_b.height,this);var _e=_c._getValue(_a);var _f=_c._getAttrValue(_c._p_calendarpopuptype,_a);var _g=_c._getAttrValue(_c._p_calendardateformat,_a);var _h=_c._getAttrValue(_c._p_calendareditformat,_a);var _i=_c._getLocale(_a);if(this._displaymode==true&&!_e){_e=_c._getDisplayText(_a);}if(_d._view){var _j=_d._view._initsoftkeyboard;_d.set_usesoftkeyboard(_d._view._getUseSoftKeyboardValue(_j));}_d.createComponent();_d._child_editor=_d.calendaredit;_d._is_value_changed=false;if(!_g){_g=nexacro.Calendar.prototype.dateformat;}if(!_h){_h=nexacro.Calendar.prototype.editformat;}_d.set_popuptype(_f);_d.set_dateformat(_g);_d.set_editformat(_h);_d.set_locale(_i);_d.set_value(_e);_d._recalcLayout();this._writable=true;return _d;};_pCellControl._createEditor_textarea=function(_a){var _b=this._getDataRow();var _c=this._getControlRect();var _d=this._refinfo;var _e=new nexacro[this._cellTextAreaObj]("celltextarea"+this._createidx,_c.left,_c.top,_c.width,_c.height,this);var _f;if(_e._displaymode==true||_a){_f=_d._getDisplayText(_b);}else{_f=_d._getValue(_b);}var _g=_d._getWordwrap(_b);var _h=_d._getAttrValue(_d._p_textareamaxlength,_b);var _i=this._getBindDataset();var _j=_d._getAttrValue(_d._p_textareascrollbartype,_b);var _k=_d._getAttrValue(_d._p_textareascrolltype,_b);if(_h==0){_h=_i?_i._getColumnSize(_d._col):0;}_e.set_maxlength(_h);_e.set_wordWrap(_g);_e.set_value(_f);_e.set_scrollbartype(_j);_e.set_scrolltype(_k);if(_e._view){var _l=_e._view._initsoftkeyboard;_e.set_usesoftkeyboard(_e._view._getUseSoftKeyboardValue(_l));}_e.createComponent();if(_a){_e.set_readonly(true);}this._writable=!_a;return _e;};_pCellControl._createEditor_readonly=function(){return this._createEditor_textarea(true);};_pCellControl._createEditor_button=function(){var _a=this._getControlRect();var _b=new nexacro[this._cellButtonObj]("cellbutton"+this._createidx,_a.left,_a.top,_a.width,_a.height,this);_b.createComponent();this._writable=false;return _b;};_pCellControl._setSubControlFocus=function(_a){var _b=this;var _c=this._subComp;var _d=this._view;var _e=_b._refinfo._getEdittype(_b._getDataRow());if((_e=="checkbox"||_e=="radioitem")&&(_c&&_c._is_alive)){if(_a){if(nexacro._isTouchInteraction||(_d.selectchangetype&&_d.selectchangetype=="up")){_c._apply_setfocus("touch");}_c._changeStatus("focused",true);if(nexacro._enableaccessibility){_c._setFocus(false);}if(_d){_d._FocuedCell=_b;}}else{_c._changeStatus("focused",false);if(_d){_d._FocuedCell=null;}}}};_pCellControl._isEditable=function(){if(this._editor){return (this._editor._p_visible&&this._editor._adjust_width>0);}return false;};_pCellControl._getTreeStatus=function(){};_pCellControl._getComputedStyleWithProp=function(_a){var _b;if(_a=="background"){_b=this._control_element._getComputedStyleBackgroundColor();}else if(_a=="textAlign"||_a=="verticalAlign"){var _c=this._getCurrentStyleAlign();_b=_c[_a];}else if(_a=="font"||_a=="color"||_a=="wordSpacing"||_a=="letterSpacing"){_b=this._getCurrentStyleInheritValue(_a,"enabled");}else if(_a=="border"){_b=this._getCurrentStyleBorder();}else if(_a=="textDecoration"||_a=="borderRadius"||_a=="cursor"||_a=="opacity"){if(_a=="textDecoration"){_a="-nexa-text-decoration";}if(_a=="borderRadius"){_a="border-radius";}_b=nexacro._getStyleProperty(this,_a);}else{_b=this._getCSSStyleValue(_a,"enabled");}return _b;};_pCellControl._getComputedStyle=function(_a){var _b={"styles":{},"subcomp":{"styles":null}};var _c=this._computed_prop_list;var _d;for(var _e=0,_f=_c.length;_e<_f;_e++ ){_d=_c[_e];_b.styles[_d]=this._getComputedStyleWithProp(_d);}if(_a&&this._subComp){_b.subcomp=this._subComp._getComputedStyle();}return _b;};_pCellControl._setComputedStyle=function(_a){var _b=this._computed_prop_list;var _c=this._subComp;for(var _g=0;_g<_b.length;_g++ ){var _d=_b[_g];var _e="set_"+_d;if(_a.styles){var _f=_a.styles[_d];_f=_f&&_f.value?_f.value:_f;if(this[_e]){this[_e].call(this,_f);this._setted_computed_style[_d]=_f;}}}if(_c){_c._setComputedStyle(_a.subcomp);}};_pCellControl.on_apply_padding=function(_a){var _b=this._control_element;if(_b){this._updateAvailableArea();}};_pCellControl.on_apply_prop_enable=function(_a){if(_a==null){_a=this._isEnable();}nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);if(this._subComp){this._subComp._setEnable(_a);}if(this._expandCtrl){this._expandCtrl._setEnable(_a);}var _b=this.subcells;var _c=_b?_b.length:0;for(var _d=0;_d<_c;_d++ ){_b[_d]._setEnable(_a);}};_pCellControl.on_apply_prop_rtl=function(){if(this._is_created){return;}var _a=this.rtl=this._refinfo._getAttrValue(this._refinfo._p_rtl,this._getDataRow());if(nexacro._isBoolean(_a)){this._rtl=nexacro._toBoolean(_a);}else{this._rtl=undefined;}nexacro.Component.prototype.on_apply_prop_rtl.call(this);if(this._subComp){this._subComp.on_apply_prop_rtl();}};_pCellControl._getPositionInRootComponent=nexacro._emptyFn;nexacro._CellExpandControl=function(_a,_b,_c,_d,_e,_f){nexacro.Button.call(this,"cellexpandbutton",_b,_c,_d-_b,_e-_c,null,null,null,null,null,null,_a);this._controlmode=(_f)?true:false;this._view=_a._view;this._cellobj=_a;this._cellinfo=_a._refinfo;this._setControl();};var _pCellExpand=nexacro._createPrototype(nexacro.Button,nexacro._CellExpandControl);nexacro._CellExpandControl.prototype=_pCellExpand;_pCellExpand._is_subcontrol=true;_pCellExpand.on_destroy_contents=function(){nexacro.Button.prototype.on_destroy_contents.call(this);this._view=null;this._cellobj=null;this._cellinfo=null;};_pCellExpand._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellExpand._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;var _c=this._control_element;if(_c){if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}var _d=this._cellobj._getDataRow();if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}if(this._cellinfo){var _e=this._cellinfo._getAttrValue(this._cellinfo._p_expandimage,_d);if(_e){this.set_icon(_e);}var _f=this._cellinfo._getAttrValue(this._cellinfo._p_expandchar,_d);this.set_text(_f);}}};_pCellExpand._setAlign=function(_a,_b){var _c=this._text_elem;if(_c){if(_a){this.set_textAlign(_a);}if(_b){this.set_verticalAlign(_b);}}};_pCellExpand.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"expandbutton");};_pCellExpand.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"expandbutton");};_pCellExpand.on_get_accessibility_label=function(){return this.text;};nexacro._CellButtonControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Button.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f);this._p_tabstop=false;this._clickevt_able=true;this._displaymode=(_g)?true:false;this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellButton=nexacro._createPrototype(nexacro.Button,nexacro._CellButtonControl);nexacro._CellButtonControl.prototype=_pCellButton;_pCellButton._is_subcontrol=true;_pCellButton.on_getIDCSSSelector=function(){return "cellbutton";};_pCellButton._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro.Button.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellButton.on_destroy_contents=function(){nexacro.Button.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellButton._apply_setfocus=function(_a){if(!this._displaymode||nexacro._enableaccessibility){nexacro.Button.prototype._apply_setfocus.call(this,_a);}};_pCellButton._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellButton.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Button.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellButton.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Button.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellButton._EditUpdateAll=function(){if(this._control_element){this._updateAll();var _a=this._cellobj._getDataRow();var _b=this._cellinfo._getWordwrap(_a);this.set_wordWrap(_b);}};_pCellButton._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();if(_a){return;}var _e;if(this._displaymode==true){_e=_b._getDisplayText(_d);}else{_e=_b._getValue(_d,this._displaymode);}if(_e!=null){this.set_text(_e);}else{this.set_text("");}};_pCellButton._getValueData=function(){};_pCellButton._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellButton.on_get_accessibility_label=function(){return this.text;};_pCellButton._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var _a=this._computed_prop_list;_a=_a.toString();var _b={"styles":null};var _c=nexacro._getComputedStyleProperties(this._control_element,_a,null,true);_b.styles=(new Function("return "+_c))();return _b;};_pCellButton._setComputedStyle=function(_a){var _b=this._computed_prop_list;for(var _e=0;_e<_b.length;_e++ ){var _c=_b[_e];var _d="set_"+_c;if(_a.styles){if(this[_d]){this[_d].call(this,_a.styles[_c]);}}}};_pCellButton._getCurrentStyleAlign=function(_a){return this._cellobj._getCurrentStyleAlign(_a);};_pCellButton.on_fire_user_onkeyup=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Component.prototype.on_fire_user_onkeyup.call(this,_a,_b,_c,_d,_e,_f,_g);if(_a==13||_a==32){this.click();}return _h;};nexacro._CellProgressBarControl=function(_a,_b,_c,_d,_e,_f,_g){nexacro.ProgressBar.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f);this._p_tabstop=false;this._p_max=100;this._p_min=0;this._p_step=1;this._controlmode=(_g)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellBar=nexacro._CellProgressBarControl.prototype=nexacro._createPrototype(nexacro.ProgressBar,nexacro._CellProgressBarControl);_pCellBar._is_subcontrol=true;_pCellBar._properties=[{name:"pos"},];_pCellBar._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro.ProgressBar.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellBar._apply_dblclick_event=function(){var _a=this._progressbaritems;if(_a){for(var _b=0;_b<_a.length;_b++ ){_a[_b].on_fire_ondblclick=function(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro._ProgressBarItemControl.prototype.on_fire_ondblclick.call(this,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this._p_parent.on_fire_ondblclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o,"control");return true;};}}if(this.progressstartcap){this.progressstartcap.on_fire_ondblclick=function(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro._Icon.prototype.on_fire_ondblclick.call(this,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this._p_parent.on_fire_ondblclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o,"control");return true;};}if(this.progressendcap){this.progressendcap.on_fire_ondblclick=function(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro._Icon.prototype.on_fire_ondblclick.call(this,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this._p_parent.on_fire_ondblclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o,"control");return true;};}if(this._progressbartext){this._progressbartext.on_fire_ondblclick=function(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){nexacro.Static.prototype.on_fire_ondblclick.call(this,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);this._p_parent.on_fire_ondblclick(_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,this,_n,_o,"control");return true;};}};_pCellBar.set_pos=function(_a){nexacro.ProgressBar.prototype.set_pos.call(this,_a);this._apply_dblclick_event();};_pCellBar.on_destroy_contents=function(){nexacro.ProgressBar.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellBar.set_text=function(_a){var _b=nexacro.Component.prototype.set_text.call(this,_a);var _c=parseInt(this._displaytext);_c=isNaN(_c)?0:_c;this.set_pos(_c);return _b;};_pCellBar._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellBar.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellBar.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellBar._getDisplayText=function(){if(this._p_parent){return this._p_parent._getDisplayText();}return "";};_pCellBar._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellBar._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();_b._setCellChildControlProperty("progressbar",this,_d);if(_a){return;}var _e=_b._getDisplayText(_d);if(_e!=null){this.set_text(_e);}else{this.set_text("");}};_pCellBar._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var _a=this._computed_prop_list;_a=_a.toString();var _b={"styles":null,"progressbaritem":{styles:null},"progressbartext":{styles:null},"progressstartcap":{styles:null},"progressendcap":{styles:null}};var _c=nexacro._getComputedStyleProperties(this._control_element,_a,null,true);_b.styles=(new Function("return "+_c))();if(this.progressbaritem){_c=nexacro._getComputedStyleProperties(this.progressbaritem._control_element,_a,null,true);_b.progressbaritem.styles=(new Function("return "+_c))();}if(this.progressbartext){_c=nexacro._getComputedStyleProperties(this.progressbartext._control_element,_a,null,true);_b.progressbartext.styles=(new Function("return "+_c))();}if(this.progressstartcap){_c=nexacro._getComputedStyleProperties(this.progressstartcap._control_element,_a,null,true);_b.progressstartcap.styles=(new Function("return "+_c))();}if(this.progressendcap){_c=nexacro._getComputedStyleProperties(this.progressendcap._control_element,_a,null,true);_b.progressendcap.styles=(new Function("return "+_c))();}return _b;};_pCellBar._setComputedStyle=function(_a){var _b=this._computed_prop_list;var _c=this.progressbaritem;var _d=this.progressbartext;var _e=this.progressstartcap;var _f=this.progressendcap;for(var _i=0;_i<_b.length;_i++ ){var _g=_b[_i];var _h="set_"+_g;if(_a.styles){if(this[_h]){this[_h].call(this,_a.styles[_g]);}}if(_c){if(_a.progressbaritem.styles){if(_c[_h]){_c[_h].call(_c,_a.progressbaritem.styles[_g]);}}}if(_d){if(_a.progressbartext.styles){if(_d[_h]){_d[_h].call(_d,_a.progressbartext.styles[_g]);}}}if(_e){if(_a.progressstartcap.styles){if(_e[_h]){_e[_h].call(_e,_a.progressstartcap.styles[_g]);}}}if(_f){if(_a.progressendcap.styles){if(_f[_h]){_f[_h].call(_f,_a.progressendcap.styles[_g]);}}}}};_pCellBar._getCurrentStyleAlign=function(_a){return this._cellobj._getCurrentStyleAlign(_a);};nexacro._defineProperties(_pCellBar,_pCellBar._properties);nexacro._CellEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Edit.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f,_g);this._p_tabstop=false;if(_g){this._displaymode=true;this._p_readonly=true;}else{this._displaymode=false;}this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellEdit=nexacro._createPrototype(nexacro.Edit,nexacro._CellEditControl);nexacro._CellEditControl.prototype=_pCellEdit;_pCellEdit._is_subcontrol=true;_pCellEdit.on_getIDCSSSelector=function(){return "celledit";};_pCellEdit._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro.Edit.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellEdit.on_destroy_contents=function(){nexacro.Edit.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellEdit._apply_setfocus=function(_a,_b,_c){if(this._view._onceTime_focus&&!_c){nexacro._OnceCallbackTimer.callonce(this,function(){var _e=this._getWindow();if(!_e||!_e._isActiveLayerComponent(this)){return;}this._apply_setfocus(_a,_b,true);},0);return;}var _d=this._caret_pos;if(this._caret_pos==-1){this._caret_pos=this._input_element._last_selection_range;}nexacro.Edit.prototype._apply_setfocus.call(this,_a,_b);this._caret_pos=_d;};_pCellEdit.setOnlyElementFocus=function(){if(this._input_element){this._input_element._applyElementFocus();}};_pCellEdit.on_fire_oninput=function(){nexacro.Edit.prototype.on_fire_oninput.call(this);return this._cellobj.on_fire_oninput(this);};_pCellEdit.on_fire_onimeaction=function(_a,_b,_c,_d,_e,_f,_g){nexacro.Edit.prototype.on_fire_onimeaction.call(this,_a,_b,_c,_d,_e,_f,_g);return this._cellobj.on_fire_onimeaction(_a,_b,_c,_d,_e,_f,_g);};_pCellEdit.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.Edit.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellEdit.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._displaymode){this.setSelect(0,0);}nexacro.Edit.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellEdit.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pCellEdit._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellEdit._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellEdit._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();_b._setCellChildControlProperty("edit",this,_d);if(this._view){this.set_usesoftkeyboard(this._view._getUseSoftKeyboardValue(this._view._initsoftkeyboard));}if(_a){return;}var _e;if(this._displaymode==true){_e=_b._getDisplayText(_d);}else{_e=_b._getValue(_d);}this.set_value(_e);};_pCellEdit._setEditingValue=function(_a){return this.set_value(_a);};_pCellEdit._EditUpdateAll=function(){this._updateAll();};_pCellEdit._getEditingText=function(){return this.text;};_pCellEdit._getEditingValue=function(){return this._p_value;};_pCellEdit._getValueData=function(){return this._p_value;};_pCellEdit._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var _a=this._computed_prop_list;_a=_a.toString();var _b={"styles":null};var _c=nexacro._getComputedStyleProperties(this._control_element,_a,null,true);_b.styles=(new Function("return "+_c))();return _b;};_pCellEdit._setComputedStyle=function(_a){var _b=this._computed_prop_list;for(var _e=0;_e<_b.length;_e++ ){var _c=_b[_e];var _d="set_"+_c;if(_a.styles){if(this[_d]){this[_d].call(this,_a.styles[_c]);}}}};_pCellEdit._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};if(this._input_element){_b=this._input_element._getComputedStyleAlign(_a);}return _b;};nexacro._CellTextAreaControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.TextArea.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f,_g);this._p_tabstop=false;if(_g){this._displaymode=true;this._p_readonly=true;}else{this._displaymode=false;}this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellTextArea=nexacro._createPrototype(nexacro.TextArea,nexacro._CellTextAreaControl);nexacro._CellTextAreaControl.prototype=_pCellTextArea;_pCellTextArea._is_subcontrol=true;_pCellTextArea.on_getIDCSSSelector=function(){return "celltextarea";};_pCellTextArea._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro.TextArea.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellTextArea.on_destroy_contents=function(){nexacro.TextArea.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellTextArea._apply_setfocus=function(_a,_b,_c){if(this._view._onceTime_focus&&!_c){nexacro._OnceCallbackTimer.callonce(this,function(){var _e=this._getWindow();if(!_e||!_e._isActiveLayerComponent(this)){return;}this._apply_setfocus(_a,_b,true);},0);return;}var _d=this._caret_pos;if(this._caret_pos==-1){this._caret_pos=this._input_element._last_selection_range;}nexacro.TextArea.prototype._apply_setfocus.call(this,_a,_b);this._caret_pos=_d;};_pCellTextArea.setOnlyElementFocus=_pCellEdit.setOnlyElementFocus;_pCellTextArea.on_fire_oninput=function(){nexacro.TextArea.prototype.on_fire_oninput.call(this);return this._cellobj.on_fire_oninput(this);};_pCellTextArea.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.TextArea.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellTextArea.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._displaymode){this.setSelect(0,0);}nexacro.TextArea.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellTextArea.on_keydown_basic_action=function(_a,_b,_c,_d,_e,_f){nexacro.TextArea.prototype.on_keydown_basic_action.call(this,_a,_b,_c,_d,_e,_f);var _g=this._cellinfo;var _h=this._cellobj;var _i=_h._getDataRow();var _j=_g._getAttrValue(_g._p_textareaacceptsenter,_i);_j=nexacro._toBoolean(_j);if(_a==nexacro.Event.KEY_ENTER&&(_c||_b)){if(_j==false){var _k=this._input_element;var _l=this.getCaretPos();var _m=this.text;var _n=_m.split("");_n.splice(_l,0,"\n");var _o=_n.join("");var _p=_l+"\n".length;if(_k&&(this.maxlength==0||_o.length<=this.maxlength)){var _q=this._getCurrentStyleInheritValue("font");var _r=this._getReferenceAbsoluteFont(_q);function callback(){_k.updateElementText(_o,_p);if(this.scrollbartype=="none"&&(this.scrolltype=="both"||this.scrolltype=="vertical")){var _s=nexacro._getTextSize("A",_q,false,undefined,"none",this._getCurrentStyleInheritValue("wordSpacing"),this._getCurrentStyleInheritValue("letterSpacing"),undefined,undefined,undefined,_r);var _t=this._getCaretLine();var _u=this.getElement();var _v=_u.getClientHeight();var _w=(_s[1]* _t)-_v;if(_w>0){_k.setElementVScrollPos(_w);var _x=_w+(_s[1]-(_w%_s[1]));_k.setElementVScrollPos(_x);}}}if(nexacro._OS=="Android"&&nexacro._Browser=="Runtime"){nexacro._OnceCallbackTimer.callonce(this,callback,50);}else{nexacro._OnceCallbackTimer.callonce(this,callback,0);}_k.stopSysEvent();}}}};_pCellTextArea.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pCellTextArea._isEnable=_pCellEdit._isEnable;_pCellTextArea._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellTextArea._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();var _e;if(!_a){if(this._displaymode==true||this._p_readonly){_e=_b._getDisplayText(_d);}else{_e=_b._getValue(_d);}this.set_value(_e);}_b._setCellChildControlProperty("textarea",this,_d);if(this._displaymode==true){this.set_scrollbartype("none");}else{_e=_b._getAttrValue(_b._p_textareascrollbartype,_d);if(_e!=null){this.set_scrollbartype(_e);}else{this.set_scrollbartype("none");}}_e=_b._getAttrValue(_b._p_textareascrolltype,_d);if(_e!=null){this.set_scrolltype(_e);}else{this.set_scrolltype("none");}_e=_b._getControlScrollbarsize(_d,"textarea");if(_e!=null){this.set_scrollbarsize(_e);}if(this._view){this.set_usesoftkeyboard(this._view._getUseSoftKeyboardValue(this._view._initsoftkeyboard));}};_pCellTextArea._setEditingValue=function(_a){return this.set_value(_a);};_pCellTextArea._EditUpdateAll=function(){if(this._control_element){var _a=this._cellobj._getDataRow();this._updateAll();var _b=this._cellinfo._getWordwrap(_a);this.set_wordWrap(_b);}};_pCellTextArea._getEditingText=function(){return this.text;};_pCellTextArea._getEditingValue=function(){return this._p_value;};_pCellTextArea._getValueData=function(){return this._p_value;};_pCellTextArea._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var _a=this._computed_prop_list;_a=_a.toString();var _b={"styles":null,"hscrollbar":{styles:null,"decbutton":{styles:null},"incbutton":{styles:null},"trackbar":{styles:null}},"vscrollbar":{styles:null,"decbutton":{styles:null},"incbutton":{styles:null},"trackbar":{styles:null}}};var _c=nexacro._getComputedStyleProperties(this._control_element,_a,null,true);_b.styles=(new Function("return "+_c))();if(this.hscrollbar){_c=nexacro._getComputedStyleProperties(this.hscrollbar._control_element,_a,null,true);_b.hscrollbar.styles=(new Function("return "+_c))();_c=nexacro._getComputedStyleProperties(this.hscrollbar.decbutton._control_element,_a,null,true);_b.hscrollbar.decbutton.styles=(new Function("return "+_c))();_c=nexacro._getComputedStyleProperties(this.hscrollbar.incbutton._control_element,_a,null,true);_b.hscrollbar.incbutton.styles=(new Function("return "+_c))();_c=nexacro._getComputedStyleProperties(this.hscrollbar.trackbar._control_element,_a,null,true);_b.hscrollbar.trackbar.styles=(new Function("return "+_c))();}if(this.vscrollbar){_c=nexacro._getComputedStyleProperties(this.vscrollbar._control_element,_a,null,true);_b.vscrollbar.styles=(new Function("return "+_c))();_c=nexacro._getComputedStyleProperties(this.vscrollbar.decbutton._control_element,_a,null,true);_b.vscrollbar.decbutton.styles=(new Function("return "+_c))();_c=nexacro._getComputedStyleProperties(this.vscrollbar.incbutton._control_element,_a,null,true);_b.vscrollbar.incbutton.styles=(new Function("return "+_c))();_c=nexacro._getComputedStyleProperties(this.vscrollbar.trackbar._control_element,_a,null,true);_b.vscrollbar.trackbar.styles=(new Function("return "+_c))();}return _b;};_pCellTextArea._setComputedStyle=function(_a){var _b=this._computed_prop_list;var _c=this.hscrollbar;var _d=this.vscrollbar;for(var _g=0;_g<_b.length;_g++ ){var _e=_b[_g];var _f="set_"+_e;if(_a.styles){if(this[_f]){this[_f].call(this,_a.styles[_e]);}}if(_c){if(_a.hscrollbar.styles){if(_c[_f]){_c[_f].call(_c,_a.hscrollbar.styles[_e]);}}if(_a.hscrollbar.decbutton.styles){if(_c.decbutton[_f]){_c.decbutton[_f].call(_c.decbutton,_a.hscrollbar.decbutton.styles[_e]);}}if(_a.hscrollbar.incbutton.styles){if(_c.incbutton[_f]){_c.incbutton[_f].call(_c.incbutton,_a.hscrollbar.incbutton.styles[_e]);}}if(_a.hscrollbar.trackbar.styles){if(_c.trackbar[_f]){_c.trackbar[_f].call(_c.trackbar,_a.hscrollbar.trackbar.styles[_e]);}}}if(_d){if(_a.vscrollbar.styles){if(_d[_f]){_d[_f].call(_d,_a.vscrollbar.styles[_e]);}}if(_a.vscrollbar.decbutton.styles){if(_d.decbutton[_f]){_d.decbutton[_f].call(_d.decbutton,_a.vscrollbar.decbutton.styles[_e]);}}if(_a.vscrollbar.incbutton.styles){if(_d.incbutton[_f]){_d.incbutton[_f].call(_d.incbutton,_a.vscrollbar.incbutton.styles[_e]);}}if(_a.vscrollbar.trackbar.styles){if(_d.trackbar[_f]){_d.trackbar[_f].call(_d.trackbar,_a.vscrollbar.trackbar.styles[_e]);}}}}};_pCellTextArea._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};if(this._input_element){_b=this._input_element._getComputedStyleAlign(_a);}return _b;};nexacro._CellMaskEditControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.MaskEdit.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f,_g);this._displaymode=(_g)?true:false;this._p_tabstop=false;this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellMaskEdit=nexacro._createPrototype(nexacro.MaskEdit,nexacro._CellMaskEditControl);nexacro._CellMaskEditControl.prototype=_pCellMaskEdit;_pCellMaskEdit._is_subcontrol=true;_pCellMaskEdit.on_getIDCSSSelector=function(){return "cellmaskedit";};_pCellMaskEdit._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro.MaskEdit.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellMaskEdit.on_destroy_contents=function(){nexacro.MaskEdit.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellMaskEdit._apply_setfocus=function(_a,_b,_c){if(this._view._onceTime_focus&&!_c){nexacro._OnceCallbackTimer.callonce(this,function(){var _e=this._getWindow();if(!_e||!_e._isActiveLayerComponent(this)){return;}this._apply_setfocus(_a,_b,true);},0);return;}var _d=this._caret_pos;if(this._caret_pos==-1){this._caret_pos=this._input_element._last_selection_range;}nexacro.MaskEdit.prototype._apply_setfocus.call(this,_a,_b);this._caret_pos=_d;};_pCellMaskEdit.setOnlyElementFocus=_pCellEdit.setOnlyElementFocus;_pCellMaskEdit.on_fire_oninput=function(){nexacro.MaskEdit.prototype.on_fire_oninput.call(this);return this._cellobj.on_fire_oninput(this);};_pCellMaskEdit.on_fire_onimeaction=function(_a,_b,_c,_d,_e,_f,_g){nexacro.MaskEdit.prototype.on_fire_onimeaction.call(this,_a,_b,_c,_d,_e,_f,_g);return this._cellobj.on_fire_onimeaction(_a,_b,_c,_d,_e,_f,_g);};_pCellMaskEdit.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.MaskEdit.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellMaskEdit.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._displaymode){this.setSelect(0,0);}nexacro.MaskEdit.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");return true;};_pCellMaskEdit._isEnable=_pCellEdit._isEnable;_pCellMaskEdit._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellMaskEdit._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();var _e=_b._getBindDataset();_b._setCellChildControlProperty("maskedit",this,_d);if(!_a){var _f;if(_e&&_b._p_subsumtext._value!=""&&_e.getRowType(_d)==16){_f=_b._getAttrValue(_b._p_subsumtext,_d);}else{_f=_b._getValue(_d,this._displaymode);}this.set_value(_f);}if(this._view){this.set_usesoftkeyboard(this._view._getUseSoftKeyboardValue(this._view._initsoftkeyboard));}};_pCellMaskEdit._setEditingValue=function(_a){return this.set_value(_a);};_pCellMaskEdit._EditUpdateAll=function(){this._updateAll();};_pCellMaskEdit._getEditingText=function(){return this.text;};_pCellMaskEdit._getEditingValue=function(){return this._p_value;};_pCellMaskEdit._getValueData=function(){return this._p_value;};_pCellMaskEdit._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var _a=this._computed_prop_list;_a=_a.toString();var _b={"styles":null};var _c=nexacro._getComputedStyleProperties(this._control_element,_a,null,true);_b.styles=(new Function("return "+_c))();return _b;};_pCellMaskEdit._setComputedStyle=function(_a){var _b=this._computed_prop_list;for(var _e=0;_e<_b.length;_e++ ){var _c=_b[_e];var _d="set_"+_c;if(_a.styles){if(this[_d]){this[_d].call(this,_a.styles[_c]);}}}};_pCellMaskEdit._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};if(this._input_element){_b=this._input_element._getComputedStyleAlign(_a);}return _b;};nexacro._CellCalendarPopupControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._CalendarPopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCellCalendarPopupControl=nexacro._createPrototype(nexacro._CalendarPopupControl,nexacro._CellCalendarPopupControl);nexacro._CellCalendarPopupControl.prototype=_pCellCalendarPopupControl;_pCellCalendarPopupControl._is_subcontrol=true;_pCellCalendarPopupControl._getPopupParentPos=function(){var _a=this._p_parent;var _b;var _c;if(_a._p_parent._getPositionInRootComponent){var _d=_a._p_parent._getPositionInRootComponent(_a);_b=_d[0];_c=_d[1];var _e=[_b.width,_b.height];var _f=nexacro._getElementPositionInFrame(_a.getElement(),true);var _g=0;var _h=0;if(0>_c.orgl){_g=Math.abs(_c.orgl);}if(0>_c.orgt){_h=Math.abs(_c.orgt);}return {"x":_f.x,"y":_f.y,"width":_e[0],"height":_e[1],"xgap":_g,"ygap":_h};}else{return nexacro._CalendarPopupControl.prototype._getPopupParentPos.call(this);}};nexacro._CellCalendarControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Calendar.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f,_g);this._p_tabstop=false;this.ondropdown="grid";this._p_readonly=this._displaymode=(_g)?true:false;this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellCalendar=nexacro._createPrototype(nexacro.Calendar,nexacro._CellCalendarControl);nexacro._CellCalendarControl.prototype=_pCellCalendar;_pCellCalendar._is_subcontrol=true;_pCellCalendar.on_getIDCSSSelector=function(){return "cellcalendar";};_pCellCalendar.on_create_contents=function(){nexacro.Calendar.prototype.on_create_contents.call(this);if(this._displaymode){if(this.calendaredit){this.calendaredit.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._CalendarEditControl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._p_parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};}if(this.dropbutton){this.dropbutton.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._CalendarDropButtonControl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._p_parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};}}};_pCellCalendar.on_destroy_contents=function(){nexacro.Calendar.prototype.on_destroy_contents.call(this);this._child_editor=null;this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellCalendar._apply_setfocus=function(_a){if(!this._displaymode||nexacro._enableaccessibility){return nexacro.Calendar.prototype._apply_setfocus.call(this,_a);}};_pCellCalendar.setOnlyElementFocus=function(){if(this.calendaredit&&this.calendaredit._input_element){this.calendaredit._input_element._applyElementFocus();}};_pCellCalendar._getPopupSizeArr=function(){if(this.type!="monthonly"){return nexacro.Calendar.prototype._getPopupSizeArr.call(this);}var _a=this.popupsize;if(!_a){_a=this.getOffsetWidth()+" "+this.getOffsetHeight();}_a=_a.split(/\s+/);var _b= +_a[0];var _c=_a[1]? +_a[1]:_b;return {width:_b,height:_c};};_pCellCalendar._confirmValue=function(){if(this._p_readonly){return;}var _a=this.calendaredit;var _b=this.datepicker;switch(this.type){case "normal":if(this._isPopupVisible()){var _c={keycode:13};_b._changeDate(_a,_c);_b.on_fire_ondayclick(_b._value);}else{if(this._p_value!=_a._p_value){this._on_value_change(this._p_value,_a._p_value);}else if(this.text!=_a.text){this._setValue(this._p_value);}}this._setZeroCaret();break;case "spin":if(this._p_value!=_a._p_value){this._on_value_change(this._p_value,_a._p_value);}else if(this.text!=_a.text){this._setValue(this._p_value);}this._setZeroCaret();break;default:break;}};_pCellCalendar._setValueCtrl=function(_a,_b,_c){this._currentformat="editformat";var _d=this.calendaredit;if(_d&&_d._p_value!=undefined){var _e=this._p_value;var _f=this.text;var _g,_h;if(_b!=undefined){_g=_c;_h=_d.text;}else{_g=_d._p_value;_h=_d.text;}if(_e!=_g.trim()){if(_a){if(!this._on_value_change(_e,_g)){_g=_e;}}this._setValue(_g);_d._setValue(_g);this._default_value=this._p_value;this._default_text=this.text;}}};_pCellCalendar._on_value_change=function(_a,_b){this._is_value_changed=true;return nexacro.Calendar.prototype._on_value_change.call(this,_a,_b);};_pCellCalendar._createPopupControl=function(){var _a=this._popupcontrol;if(!_a){_a=this._popupcontrol=new nexacro._CellCalendarPopupControl("calendarpopup",0,0,0,0,null,null,null,null,null,null,this);_a.createComponent(true);}};_pCellCalendar.on_fire_oninput=function(){nexacro.Calendar.prototype.on_fire_oninput.call(this);return this._cellobj.on_fire_oninput(this);};_pCellCalendar.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f){this._cellobj.on_fire_oncloseup(_a,_b,_c,_d,_e,_f);};_pCellCalendar.on_fire_ondropdown=function(_a){return this._cellobj.on_fire_ondropdown(_a);};_pCellCalendar.on_fire_sys_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=nexacro.Calendar.prototype.on_fire_sys_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);if(this._view){if(this._isPopupVisible()){this._view._is_editor_keyaction=false;}else{this._view._is_editor_keyaction=true;}}return _h;};_pCellCalendar.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){nexacro.Calendar.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};_pCellCalendar.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._displaymode){this.setSelect(0,0);}nexacro.Calendar.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};_pCellCalendar._on_edit_oneditclick=function(_a,_b){nexacro.Calendar.prototype._on_edit_oneditclick.call(this,_a,_b);if(this._displaymode){return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");}};_pCellCalendar._on_edit_onkeydown=function(_a,_b){if(!this._displaymode&&this._p_visible){return nexacro.Calendar.prototype._on_edit_onkeydown.call(this,_a,_b);}else{return false;}};_pCellCalendar._on_drop_onclick=function(_a,_b){nexacro.Calendar.prototype._on_drop_onclick.call(this,_a,_b);if(this._displaymode){return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");}};_pCellCalendar.on_fire_onchanged=function(_a,_b,_c,_d,_e){if(!_a._displaymode){var _f=this._cellobj._getAutoUpdateType();if(_f=="dateselect"||_f=="itemselect"||this._cellobj._band.id=="head"){this._cellobj._applyEditorDataset(true,_c);}return (nexacro.Calendar.prototype.on_fire_onchanged.call(this,_a,_b,_c,_d,_e));}};_pCellCalendar.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pCellCalendar._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellCalendar._getDisplayText=function(){if(this._p_parent){return this._p_parent._getDisplayText();}return "";};_pCellCalendar._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){if(this._is_created){this.on_apply_readonly(_b);}}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellCalendar._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=this._view;var _e=_c._getDataRow();var _f=_b._getBindDataset();var _g=_b._getAttrValue(_b._p_calendardateformat,_e);if(!_g){_g=nexacro.Calendar.prototype.dateformat;}this.set_dateformat(_g);var _h=_b._getAttrValue(_b._p_calendareditformat,_e);if(!_h){_h=nexacro.Calendar.prototype.editformat;}this.set_editformat(_h);var _i=_b._getLocale(_e);this.set_locale(_i);if(_d){this.set_usesoftkeyboard(_d._getUseSoftKeyboardValue(_d._initsoftkeyboard));}var _j;if(_f&&_b._p_subsumtext._value!=""&&_f.getRowType(_e)==16){_j=_b._getAttrValue(_b._p_subsumtext,_e);}else{_j=_b._getValue(_e,true);}var _k=_j;if(!_a){if(this._displaymode==true&&nexacro._isNull(_k)){var _l=this._masktypeobj;_k=_b._getDisplayText(_e);_k=_l.removeMask(_k.split(''),true);_k=_l.changeNormalizeValue(_k);}this.set_value(_k);}var _m=_b._getControlButtonsize(_e,"calendar");this.set_buttonsize(_m);var _n=_b._getControlPopuptype(_e,"calendar");if(_n){this.set_popuptype(_n);}if(this._displaymode==true){if(nexacro._isNull(_j)){var _o=_b._getAttrValue(_b._p_calendardisplaynulltype,_e);if(_o!="default"){if(!_a){this.set_value(_j);}if(_o=="nulltext"){_k=_b._getAttrValue(_b._p_calendardisplaynulltext,_e);this.set_displaynulltext(_k);}else if(_o=="nullmask"){this.set_displaynulltext("");}else{this.set_displaynulltext("");this.set_dateformat("");}}}else{if(this._isInvalidValue(_j)){var _p=_b._getAttrValue(_b._p_calendardisplayinvalidtype,_e);if(!_a){this.set_value(_j);}this.set_dateformat("");this.set_displayinvalidtext("");if(_p=="invalidtext"||_p=="default"){_k=_b._getAttrValue(_b._p_calendardisplayinvalidtext,_e);if(_k!=null){this.set_displayinvalidtext(_k);}}else{this.set_displayinvalidtext(_j);}}}}var _q=_b._getControlPopupsize(_e,"calendar");if(_q){this.set_popupsize(_q);}if(this._view){if(this._view._is_update_inner_dataset){this.innerdataset=null;}}_b._setCellChildControlProperty("calendar",this,_e);};_pCellCalendar._setEditingValue=function(_a){return this.calendaredit.set_value(_a);};_pCellCalendar._EditUpdateAll=function(){this._updateAll();};_pCellCalendar._getEditingText=function(){return this.calendaredit.text;};_pCellCalendar._getEditingValue=function(){return this.calendaredit._p_value;};_pCellCalendar._getValueData=function(){this._setValueCtrl(true);return this._p_value;};_pCellCalendar._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro.Calendar.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellCalendar._getChildren=function(){return [this.calendaredit,this.dropbutton];};_pCellCalendar._on_dataset_onvaluechanged=function(_a,_b){if(!this._displaymode){nexacro.Calendar.prototype._on_dataset_onvaluechanged.call(this,_a,_b);}};_pCellCalendar._on_dataset_onrowsetchanged=function(_a,_b){if(!this._displaymode){nexacro.Calendar.prototype._on_dataset_onrowsetchanged.call(this,_a,_b);}else if(_b.reason!=nexacro.NormalDataset.REASON_FILTER&&_b.reason!=nexacro.NormalDataset.REASON_SORTGROUP){this._p_value=undefined;this._updateAll();}};_pCellCalendar._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var _a=this._computed_prop_list;_a=_a.toString();var _b={"styles":null,"calendaredit":{styles:null},"dropbutton":{styles:null},"calendarspinupbutton":{styles:null},"calendarspindownbutton":{styles:null}};var _c=nexacro._getComputedStyleProperties(this._control_element,_a,null,true);_b.styles=(new Function("return "+_c))();if(this.calendaredit){_c=nexacro._getComputedStyleProperties(this.calendaredit._control_element,_a,null,true);_b.calendaredit.styles=(new Function("return "+_c))();}if(this.dropbutton){_c=nexacro._getComputedStyleProperties(this.dropbutton._control_element,_a,null,true);_b.dropbutton.styles=(new Function("return "+_c))();}if(this.calendarspinupbutton){_c=nexacro._getComputedStyleProperties(this.calendarspinupbutton._control_element,_a,null,true);_b.calendarspinupbutton.styles=(new Function("return "+_c))();}if(this.calendarspindownbutton){_c=nexacro._getComputedStyleProperties(this.calendarspindownbutton._control_element,_a,null,true);_b.calendarspindownbutton.styles=(new Function("return "+_c))();}return _b;};_pCellCalendar._setComputedStyle=function(_a){var _b=this._computed_prop_list;var _c=this.calendaredit;var _d=this.dropbutton;var _e=this.calendarspinupbutton;var _f=this.calendarspindownbutton;for(var _i=0;_i<_b.length;_i++ ){var _g=_b[_i];var _h="set_"+_g;if(_a.styles){if(this[_h]){this[_h].call(this,_a.styles[_g]);}}if(_c){if(_a.calendaredit.styles){if(_c[_h]){_c[_h].call(_c,_a.calendaredit.styles[_g]);}}}if(_d){if(_a.dropbutton.styles){if(_d[_h]){_d[_h].call(_d,_a.dropbutton.styles[_g]);}}}if(_e){if(_a.calendarspinupbutton.styles){if(_e[_h]){_e[_h].call(_e,_a.calendarspinupbutton.styles[_g]);}}}if(_f){if(_a.calendarspindownbutton.styles){if(_f[_h]){_f[_h].call(_f,_a.calendarspindownbutton.styles[_g]);}}}}};_pCellCalendar._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};var _c=this.calendaredit;if(_c&&_c._input_element){_b=_c._input_element._getComputedStyleAlign(_a);}return _b;};_pCellCalendar._setAccessibilityInputLabel=nexacro._emptyFn;_pCellCalendar.on_apply_readonly=function(_a){nexacro.Calendar.prototype.on_apply_readonly.call(this,this._view._p_readonly);};_pCellCalendar._isReadOnly=function(){return this._view._p_readonly;};nexacro._CellComboPopupControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._ComboPopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCellComboPopupControl=nexacro._createPrototype(nexacro._ComboPopupControl,nexacro._CellComboPopupControl);nexacro._CellComboPopupControl.prototype=_pCellComboPopupControl;_pCellComboPopupControl._is_subcontrol=true;_pCellComboPopupControl._getPopupParentPos=function(){var _a=this._p_parent;var _b;var _c;if(_a._p_parent._getPositionInRootComponent){var _d=_a._p_parent._getPositionInRootComponent(_a);_b=_d[0];_c=_d[1];var _e=[_b.width,_b.height];var _f=nexacro._getElementPositionInFrame(_a.getElement(),true);var _g=0;var _h=0;if(0>_c.orgl){_g=Math.abs(_c.orgl);}if(0>_c.orgt){_h=Math.abs(_c.orgt);}return {"x":_f.x,"y":_f.y,"width":_e[0],"height":_e[1],"xgap":_g,"ygap":_h};}else{return nexacro._ComboPopupControl.prototype._getPopupParentPos.call(this);}};nexacro._CellComboControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Combo.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f,_g);this._p_tabstop=false;if(_g){this._displaymode=true;this._p_readonly=true;}else{this._displaymode=false;}this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellCombo=nexacro._createPrototype(nexacro.Combo,nexacro._CellComboControl);nexacro._CellComboControl.prototype=_pCellCombo;_pCellCombo._is_subcontrol=true;_pCellCombo.on_getIDCSSSelector=function(){return "cellcombo";};_pCellCombo.on_create_contents=function(){nexacro.Combo.prototype.on_create_contents.call(this);if(this._displaymode){this.comboedit.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._ComboEditControl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._p_parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};this.dropbutton.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._ComboButtonControl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._p_parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};}};_pCellCombo.setOnlyElementFocus=function(){if(this.comboedit&&this.comboedit._input_element){this.comboedit._input_element._applyElementFocus();}};_pCellCombo.on_destroy_contents=function(){nexacro.Combo.prototype.on_destroy_contents.call(this);this._child_editor=null;this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellCombo._apply_setfocus=function(_a){if(!this._displaymode||nexacro._enableaccessibility){return nexacro.Combo.prototype._apply_setfocus.call(this,_a);}};_pCellCombo.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Combo.prototype.on_fire_oncloseup.call(this,_a,_b,_c,_d,_e,_f,_g,_h);this._cellobj.on_fire_oncloseup(_a,_c,_f,_d,_g,_h);};_pCellCombo.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._view;if(_h){if(_a==nexacro.Event.KEY_DOWN||_a==nexacro.Event.KEY_UP||(_a==nexacro.Event.KEY_DOWN&&_b)){_h._is_editor_keyaction=false;}}nexacro.Combo.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);if(!this._displaymode){return this._cellobj.on_fire_user_onkeydown(_a,_b,_c,_d,_e,_f,_g);}};_pCellCombo.on_fire_user_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(this.onmousewheel&&this.onmousewheel._has_handlers){var _p=new nexacro.MouseWheelEventInfo(this,"onmousewheel",_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_b,_m,_n,_o);return this.onmousewheel._fireUserEvent(this,_p);}else if(!this._displaymode&&this._grid){var _q=this._grid;_q.on_fire_user_onmousewheel(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_q,_n,_o);return (!_q.onmousewheel||(_q.onmousewheel&&!_q.onmousewheel.defaultprevented))?false:true;}return false;};_pCellCombo.on_fire_sys_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(!this._displaymode){return nexacro.Combo.prototype.on_fire_sys_onmousewheel.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}};_pCellCombo.on_fire_ondropdown=function(_a){return this._cellobj.on_fire_ondropdown(_a);};_pCellCombo.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.Combo.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};_pCellCombo.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._displaymode){this.setSelect(0,0);}nexacro.Combo.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};_pCellCombo._on_edit_oneditclick=function(_a,_b){nexacro.Combo.prototype._on_edit_oneditclick.call(this,_a,_b);if(this._displaymode){return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");}};_pCellCombo._on_edit_onkeydown=function(_a,_b){if(!this._displaymode&&this._p_visible){return nexacro.Combo.prototype._on_edit_onkeydown.call(this,_a,_b);}else{return false;}};_pCellCombo._on_drop_onclick=function(_a,_b){nexacro.Combo.prototype._on_drop_onclick.call(this,_a,_b);if(this._displaymode){return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");}};_pCellCombo.on_fire_oninput=function(){nexacro.Combo.prototype.on_fire_oninput.call(this);return this._cellobj.on_fire_oninput(this);};_pCellCombo.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){var _l=nexacro.Component.prototype.on_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);if(this._isPopupVisible()&&this==_j){this._closePopup();}return _l;};_pCellCombo.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(!_a._displaymode){var _h=this._cellobj._getAutoUpdateType();if(_h=="comboselect"||_h=="itemselect"||this._cellobj._band.id=="head"){this._cellobj._applyEditorDataset(true,_d);}return (nexacro.Combo.prototype.on_fire_onitemchanged.call(this,_a,_b,_c,_d,_e,_f,_g));}};_pCellCombo.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pCellCombo._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellCombo._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){if(this._is_created){this.on_apply_readonly(_b);}}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellCombo._confirmValue=function(){if(this._p_readonly){return;}var _a=this.combolist;var _b=this._selectDataset();var _c=this._default_value;var _d=this._default_text;var _e=this._default_index;var _f=this._p_value;var _g=this.text;var _h=this.index;var _i,_j;if(this._isPopupVisible()){_j=_a._get_rowobj_status("mouseover","status")||_a._get_rowobj_status("selected","userstatus");if(_j){_h=_j.index;}}if(_h>=0){if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){_i=this._getRawIndex(_b,_h);_i=(_i==-1)?_h:_i;_b.set_filterstr("");}else{_i=_h;}}else{_i=_h;}if(this.index!=_i){_f=this._getItemValue(_i);_g=this._getItemText(_i);_h=_i;if(!this._on_value_change(_e,_d,_c,_h,_g,_f)){this._setEditValue(this.text);_f=_c;_g=_d;_h=_e;}}this._setDefaultProps(_h,_f,_g);};_pCellCombo._setProperty=function(_a){var _b=this._cellinfo,_c=this._cellobj;var _d=_c._getDataRow();var _e=_b._getControlButtonsize(_d,"combo");this.set_buttonsize(_e);var _f=_b._getControlPopuptype(_d,"combo");if(_f){this.set_popuptype(_f);}var _g=_b._getControlScrollbarsize(_d,"combo");if(_g!=null){this.set_scrollbarsize(_g);}var _h=_b._getControlPopupsize(_d,"combo");if(_h){this.set_popupsize(_h);}var _i;_i=_b._getAttrValue(_b._p_combodisplaynulltype,_d);if(_i=="nulltext"){_i=_b._getAttrValue(_b._p_combodisplaynulltext,_d);this.set_displaynulltext(_i);}else{this.set_displaynulltext("");}if(this._view){if(this._view._is_update_inner_dataset){this.innerdataset=null;}}_b._setCellChildControlProperty("combo",this,_d);if(!_a){_i=_b._getAttrValue(_b._p_text,_d,this._displaymode);var _j=this._p_value;this.set_value(_i);if(!_i){if(this._displaymode==true){var _k=_b._getDisplayText(_d);this.set_text(_k);}if(_i===undefined&&_j===undefined){if(this.applyto_bindSource("value",_i)){this._p_value=_i;this.on_apply_value(_i);this.redraw();}}}}if(this._view){this.set_usesoftkeyboard(this._view._getUseSoftKeyboardValue(this._view._initsoftkeyboard));}};_pCellCombo._selectDataset=function(_a){if(this._displaymode){return this._innerdataset;}return nexacro.Combo.prototype._selectDataset.call(this,_a);};_pCellCombo._getColumn=function(_a,_b,_c){if(this._displaymode){return _a.getColumnNF(_b,_c);}else{return _a.getColumn(_b,_c);}};_pCellCombo._getRowCount=function(_a){if(this._displaymode){return _a.getRowCountNF();}else{return _a.getRowCount();}};_pCellCombo._setEditingValue=function(_a){return this.comboedit.set_value(_a);};_pCellCombo.on_apply_text=function(_a){if(this._displaymode==true){if(!nexacro._isNull(this._p_value)){var _b=this._cellinfo,_c=this._cellobj;var _d=_c._getDataRow();var _e=_b._getAttrValue(_b._p_combodisplaynulltype,_d);if(_e=="nulltext"){if(this.index<0){this._setEditValue(undefined);}else{this._setEditValue(_a);}}}else{if(this.displaynulltext||_a==""){this._setEditValue(undefined);}else{this._setEditValue(_a);}}}else{return nexacro.Combo.prototype.on_apply_text.call(this,_a);}};_pCellCombo._EditUpdateAll=function(){this._updateAll();};_pCellCombo._getEditingText=function(){return this.comboedit.text;};_pCellCombo._getEditingValue=function(){return this.comboedit._p_value;};_pCellCombo._getValueData=function(){return this._p_value;};_pCellCombo._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro.Combo.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellCombo._getChildren=function(){return [this.comboedit,this.dropbutton];};_pCellCombo._on_dataset_onvaluechanged=function(_a,_b){if(!this._displaymode){nexacro.Combo.prototype._on_dataset_onvaluechanged.call(this,_a,_b);}};_pCellCombo._on_dataset_onrowsetchanged=function(_a,_b){if(!this._displaymode){nexacro.Combo.prototype._on_dataset_onrowsetchanged.call(this,_a,_b);}else if(_b.reason!=nexacro.NormalDataset.REASON_FILTER&&_b.reason!=nexacro.NormalDataset.REASON_SORTGROUP){this._p_value=undefined;this._updateAll();}};_pCellCombo._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var _a=this._computed_prop_list;_a=_a.toString();var _b={"styles":null,"comboedit":{styles:null},"dropbutton":{styles:null}};var _c=nexacro._getComputedStyleProperties(this._control_element,_a,null,true);_b.styles=(new Function("return "+_c))();if(this.comboedit){_c=nexacro._getComputedStyleProperties(this.comboedit._control_element,_a,null,true);_b.comboedit.styles=(new Function("return "+_c))();}if(this.dropbutton){_c=nexacro._getComputedStyleProperties(this.dropbutton._control_element,_a,null,true);_b.dropbutton.styles=(new Function("return "+_c))();}return _b;};_pCellCombo._setComputedStyle=function(_a){var _b=this._computed_prop_list;var _c=this.comboedit;var _d=this.dropbutton;for(var _g=0;_g<_b.length;_g++ ){var _e=_b[_g];var _f="set_"+_e;if(_a.styles){if(this[_f]){this[_f].call(this,_a.styles[_e]);}}if(_c){if(_a.comboedit.styles){if(_c[_f]){_c[_f].call(_c,_a.comboedit.styles[_e]);}}}if(_d){if(_a.dropbutton.styles){if(_d[_f]){_d[_f].call(_d,_a.dropbutton.styles[_e]);}}}}};_pCellCombo._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};var _c=this.comboedit;if(_c&&_c._input_element){_b=this.comboedit._input_element._getComputedStyleAlign(_a);}return _b;};_pCellCombo._setAccessibilityInputLabel=nexacro._emptyFn;_pCellCombo._isReadOnly=function(){return this._view._p_readonly;};_pCellCombo._createPopupControl=function(){var _a=this._popupcontrol;if(!_a){_a=this._popupcontrol=new nexacro._CellComboPopupControl("combopopup",0,0,0,0,null,null,null,null,null,null,this);_a._setType(this.popuptype);_a.createComponent(true);}};nexacro._CellMultiComboPopupControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro._MultiComboPopupControl.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);};var _pCellMultiComboPopupControl=nexacro._createPrototype(nexacro._MultiComboPopupControl,nexacro._CellMultiComboPopupControl);nexacro._CellMultiComboPopupControl.prototype=_pCellMultiComboPopupControl;_pCellMultiComboPopupControl._is_subcontrol=true;_pCellMultiComboPopupControl._getPopupParentPos=function(){var _a=this._p_parent;var _b;var _c;if(_a._p_parent._getPositionInRootComponent){var _d=_a._p_parent._getPositionInRootComponent(_a);_b=_d[0];_c=_d[1];var _e=[_b.width,_b.height];var _f=nexacro._getElementPositionInFrame(_a.getElement(),true);var _g=0;var _h=0;if(0>_c.orgl){_g=Math.abs(_c.orgl);}if(0>_c.orgt){_h=Math.abs(_c.orgt);}return {"x":_f.x,"y":_f.y,"width":_e[0],"height":_e[1],"xgap":_g,"ygap":_h};}else{return nexacro._MultiComboPopupControl.prototype._getPopupParentPos.call(this);}};nexacro._CellMultiComboControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.MultiCombo.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f,_g);this._p_tabstop=false;if(_g){this._displaymode=true;this._p_readonly=true;}else{this._displaymode=false;}this._controlmode=(_h)?true:false;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._setControl();};var _pCellMultiCombo=nexacro._createPrototype(nexacro.MultiCombo,nexacro._CellMultiComboControl);nexacro._CellMultiComboControl.prototype=_pCellMultiCombo;_pCellMultiCombo._is_subcontrol=true;_pCellMultiCombo.on_getIDCSSSelector=function(){return "cellmulticombo";};_pCellMultiCombo.on_create_contents=function(){nexacro.MultiCombo.prototype.on_create_contents.call(this);if(this._displaymode){if(!this._tagmode){this.multicombotext.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._MultiComboEditControl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._p_parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};}else{this.multicomboedit.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._MultiComboEditControl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._p_parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};}this.dropbutton.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro._MultiComboButtonControl.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._p_parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};}};_pCellMultiCombo.setOnlyElementFocus=function(){if(this.multicomboedit&&this.multicomboedit._input_element){this.multicomboedit._input_element._applyElementFocus();}};_pCellMultiCombo.on_destroy_contents=function(){nexacro.MultiCombo.prototype.on_destroy_contents.call(this);this._child_editor=null;this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellMultiCombo._apply_setfocus=function(_a){if(!this._displaymode||nexacro._enableaccessibility){return nexacro.MultiCombo.prototype._apply_setfocus.call(this,_a);}};_pCellMultiCombo.on_fire_oncloseup=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.MultiCombo.prototype.on_fire_oncloseup.call(this,_a,_b,_c,_d,_e,_f,_g,_h);this._cellobj.on_fire_oncloseup(_a,_c,_f,_d,_g,_h);};_pCellMultiCombo.on_fire_user_onkeydown=function(_a,_b,_c,_d,_e,_f,_g){var _h=this._view;if(_h){if(_a==nexacro.Event.KEY_DOWN||_a==nexacro.Event.KEY_UP||(_a==nexacro.Event.KEY_DOWN&&_b)){_h._is_editor_keyaction=false;}}nexacro.MultiCombo.prototype.on_fire_user_onkeydown.call(this,_a,_b,_c,_d,_e,_f,_g);if(!this._displaymode){return this._cellobj.on_fire_user_onkeydown(_a,_b,_c,_d,_e,_f,_g);}};_pCellMultiCombo.on_fire_sys_onmousewheel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o){if(!this._displaymode){return nexacro.MultiCombo.prototype.on_fire_sys_onmousewheel.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);}};_pCellMultiCombo.on_fire_ondropdown=function(_a){return this._cellobj.on_fire_ondropdown(_a);};_pCellMultiCombo.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.MultiCombo.prototype.on_fire_onclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};_pCellMultiCombo.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){nexacro.MultiCombo.prototype.on_fire_ondblclick.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m);this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"control");return true;};_pCellMultiCombo._on_edit_oneditclick=function(_a,_b){nexacro.MultiCombo.prototype._on_edit_oneditclick.call(this,_a,_b);if(this._displaymode){return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");}};_pCellMultiCombo._on_edit_onkeydown=function(_a,_b){if(!this._displaymode&&this._p_visible){return nexacro.MultiCombo.prototype._on_edit_onkeydown.call(this,_a,_b);}else{return false;}};_pCellMultiCombo._on_drop_onclick=function(_a,_b){nexacro.MultiCombo.prototype._on_drop_onclick.call(this,_a,_b);if(this._displaymode){return this._cellobj.on_fire_onclick(_b.button,_b.altkey,_b.ctrlkey,_b.shiftkey,_b.screenx,_b.screeny,_b.canvasx,_b.canvasy,_b.clientx,_b.clienty,_b.fromobject,_b.fromreferenceobject,_b.metakey,"control");}};_pCellMultiCombo.on_fire_oninput=function(){nexacro.MultiCombo.prototype.on_fire_oninput.call(this);return this._cellobj.on_fire_oninput(this);};_pCellMultiCombo.on_lbuttondown_basic_action=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k){var _l=nexacro.Component.prototype.on_lbuttondown_basic_action.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k);if(this._isPopupVisible()&&this==_j){this._closePopup();}return _l;};_pCellMultiCombo.on_fire_onitemchanged=function(_a,_b,_c,_d,_e,_f,_g){if(!_a._displaymode){var _h=this._cellobj._getAutoUpdateType();if(_h=="comboselect"||_h=="itemselect"||this._cellobj._band.id=="head"){this._cellobj._applyEditorDataset(true,_d);}return (nexacro.MultiCombo.prototype.on_fire_onitemchanged.call(this,_a,_b,_c,_d,_e,_f,_g));}};_pCellMultiCombo.on_getBindableProperties=function(){if(!this._displaymode){return "value";}};_pCellMultiCombo._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellMultiCombo._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){if(this._is_created){this.on_apply_readonly(_b);}}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellMultiCombo._confirmValue=function(){if(this._p_readonly){return;}var _a=this.multicombolist;var _b=this._selectDataset();var _c=this._default_value;var _d=this._default_text;var _e=this._default_index;var _f=this._p_value;var _g=this.text;var _h=this.index;var _i,_j;if(this._isPopupVisible()){_j=_a._get_rowobj_status("mouseover","status")||_a._get_rowobj_status("selected","userstatus");if(_j){_h=_j.index;}}if(_h>=0){if(this.type=="filter"||this.type=="filterlike"||this.type=="caseifilter"||this.type=="caseifilterlike"){_i=this._getRawIndex(_b,_h);_i=(_i==-1)?_h:_i;_b.set_filterstr("");}else{_i=_h;}}else{_i=_h;}if(this.index!=_i){_f=this._getItemValue(_i);_g=this._getItemText(_i);_h=_i;if(!this._on_value_change(_e,_d,_c,_h,_g,_f)){this._setEditValue(this.text);_f=_c;_g=_d;_h=_e;}}this._setDefaultProps(_h,_f,_g);};_pCellMultiCombo._setProperty=function(_a){var _b=this._cellinfo,_c=this._cellobj;var _d=_c._getDataRow();var _e=_b._getControlButtonsize(_d,"multicombo");this.set_buttonsize(_e);var _f=_b._getControlPopuptype(_d,"multicombo");if(_f){this.set_popuptype(_f);}var _g=_b._getControlScrollbarsize(_d,"multicombo");if(_g!=null){this.set_scrollbarsize(_g);}var _h=_b._getControlPopupsize(_d,"multicombo");if(_h){this.set_popupsize(_h);}var _i;_i=_b._getAttrValue(_b._p_multicombodisplaynulltype,_d);if(_i=="nulltext"){_i=_b._getAttrValue(_b._p_multicombodisplaynulltext,_d);this.set_displaynulltext(_i);}else{this.set_displaynulltext("");}if(this._view){if(this._view._is_update_inner_dataset){this.innerdataset=null;}}_b._setCellChildControlProperty("multicombo",this,_d);if(!_a){_i=_b._getAttrValue(_b._p_text,_d,this._displaymode);var _j=this._p_value;this.set_value(_i);if(_i===undefined&&_j===undefined){if(this.applyto_bindSource("value",_i)){this._p_value=_i;this.on_apply_value(_i);this.redraw();}}}if(this._view){this.set_usesoftkeyboard(this._view._getUseSoftKeyboardValue(this._view._initsoftkeyboard));}};_pCellMultiCombo._selectDataset=function(_a){if(this._displaymode){return this._innerdataset;}return nexacro.MultiCombo.prototype._selectDataset.call(this,_a);};_pCellMultiCombo._getColumn=function(_a,_b,_c){if(this._displaymode){return _a.getColumnNF(_b,_c);}else{return _a.getColumn(_b,_c);}};_pCellMultiCombo._getRowCount=function(_a){if(this._displaymode){return _a.getRowCountNF();}else{return _a.getRowCount();}};_pCellMultiCombo._setEditingValue=function(_a){return this.comboedit.set_value(_a);};_pCellMultiCombo.on_apply_text=function(_a){if(this._displaymode==true){if(!nexacro._isNull(this._p_value)){var _b=this._cellinfo,_c=this._cellobj;var _d=_c._getDataRow();var _e=_b._getAttrValue(_b._p_multicombodisplaynulltype,_d);if(_e=="nulltext"){if(this.index<0){this._setEditValue(undefined);}else{this._setEditValue(_a);}}}else{if(this.displaynulltext||_a==""){this._setEditValue(undefined);}else{this._setEditValue(_a);}}}else{return nexacro.MultiCombo.prototype.on_apply_text.call(this,_a);}};_pCellMultiCombo._EditUpdateAll=function(){this._updateAll();};_pCellMultiCombo._getEditingText=function(){return this.multicomboedit.text;};_pCellMultiCombo._getEditingValue=function(){return this.multicomboedit._p_value;};_pCellMultiCombo._getValueData=function(){return this._p_value;};_pCellMultiCombo._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro.MultiCombo.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellMultiCombo._getChildren=function(){return [this.multicomboedit,this.dropbutton];};_pCellMultiCombo._on_dataset_onvaluechanged=function(_a,_b){if(!this._displaymode){nexacro.MultiCombo.prototype._on_dataset_onvaluechanged.call(this,_a,_b);}};_pCellMultiCombo._on_dataset_onrowsetchanged=function(_a,_b){if(!this._displaymode){nexacro.MultiCombo.prototype._on_dataset_onrowsetchanged.call(this,_a,_b);}else if(_b.reason!=nexacro.NormalDataset.REASON_FILTER&&_b.reason!=nexacro.NormalDataset.REASON_SORTGROUP){this._p_value=undefined;this._updateAll();}};_pCellMultiCombo._getComputedStyle=function(){if(!nexacro._getComputedStyleProperties){return;}var _a=this._computed_prop_list;_a=_a.toString();var _b={"styles":null,"multicomboedit":{styles:null},"dropbutton":{styles:null}};var _c=nexacro._getComputedStyleProperties(this._control_element,_a,null,true);_b.styles=(new Function("return "+_c))();if(this.multicomboedit){_c=nexacro._getComputedStyleProperties(this.multicomboedit._control_element,_a,null,true);_b.multicomboedit.styles=(new Function("return "+_c))();}if(this.dropbutton){_c=nexacro._getComputedStyleProperties(this.dropbutton._control_element,_a,null,true);_b.dropbutton.styles=(new Function("return "+_c))();}return _b;};_pCellMultiCombo._setComputedStyle=function(_a){var _b=this._computed_prop_list;var _c=this.multicomboedit;var _d=this.dropbutton;for(var _g=0;_g<_b.length;_g++ ){var _e=_b[_g];var _f="set_"+_e;if(_a.styles){if(this[_f]){this[_f].call(this,_a.styles[_e]);}}if(_c){if(_a.multicomboedit.styles){if(_c[_f]){_c[_f].call(_c,_a.multicomboedit.styles[_e]);}}}if(_d){if(_a.dropbutton.styles){if(_d[_f]){_d[_f].call(_d,_a.dropbutton.styles[_e]);}}}}};_pCellMultiCombo._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};var _c=this.multicomboedit;if(_c&&_c._input_element){_b=this.multicomboedit._input_element._getComputedStyleAlign(_a);}return _b;};_pCellMultiCombo._setAccessibilityInputLabel=nexacro._emptyFn;_pCellMultiCombo._isReadOnly=function(){return this._view._p_readonly;};_pCellMultiCombo._createPopupControl=function(){var _a=this._popupcontrol;if(!_a){_a=this._popupcontrol=new nexacro._CellMultiComboPopupControl("multicombopopup",0,0,0,0,null,null,null,null,null,null,this);_a._setType(this.popuptype);_a.createComponent(true);}};nexacro._CellCheckboxControlBase=function(_a,_b,_c,_d,_e,_f){nexacro.CheckBox.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f);this._p_tabstop=false;this._is_usetextbox=false;var _g=_f;while(_g){if(_g._refinfo){this._cellobj=_g;this._cellinfo=_g._refinfo;this._view=_g._view;break;}_g=_g._p_parent;}this.checked=false;this._setControl();};var _pCellCheckboxBase=nexacro._createPrototype(nexacro.CheckBox,nexacro._CellCheckboxControlBase);nexacro._CellCheckboxControlBase.prototype=_pCellCheckboxBase;_pCellCheckboxBase._is_subcontrol=true;_pCellCheckboxBase._apply_setfocus=function(_a,_b){};_pCellCheckboxBase._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro.CheckBox.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellCheckboxBase.on_create_contents=function(){this._adjustAlign();nexacro.CheckBox.prototype.on_create_contents.call(this);};_pCellCheckboxBase.on_destroy_contents=function(){nexacro.CheckBox.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellCheckboxBase.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._p_parent.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellCheckboxBase.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._p_parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellCheckboxBase._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellCheckboxBase._on_icon_onload=function(_a,_b,_c){if(this._cellinfo&&this._cellobj){nexacro._IconText.prototype._on_icon_onload.call(this,_a,_b,_c);this._adjustAlign(undefined,undefined,_b,_c);}};_pCellCheckboxBase._adjustAlign=function(_a,_b,_c,_d){var _e=this._cellobj._getAvailableRect();var _f=_e.left;var _g=_e.top;var _h=_e.right;var _i=_e.bottom;var _j=_e.width;var _k=_e.height;var _l=this._cellobj._getDataRow();var _m=this._cellinfo._getCheckboxsize(_l);if(_m<0||_m==undefined){var _n=this._on_getFitSize(_c,_d);_m=_n[1];}if(!_a){_a="center";}if(!_b){_b="middle";}if(_a=="center"){_f+=((_j-_m)/2);}else if(_a=="right"){_f=_h-_m;}if(_b=="middle"){_g+=((_k-_m)/2);}else if(_b=="bottom"){_g=_i-_m;}this.move(_f,_g,_m,_m);};_pCellCheckboxBase._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._adjustAlign();this._setProperty();};_pCellCheckboxBase._getCheckValue=function(){var _a=this._cellinfo;var _b=this._cellobj;var _c=_b._getDataRow();var _d=_a._getTextValueForDisp(_c);return _d;};_pCellCheckboxBase._setProperty=function(_a){var _b=this._cellinfo,_c=this._cellobj;var _d=_c._getDataRow();_b._setCellChildControlProperty("checkbox",this,_d);if(_a){return;}var _e=this._getCheckValue();if(!nexacro._isNull(this.falsevalue)&&!nexacro._isNull(this.truevalue)&&this.truevalue!=_e){_e=this.falsevalue;}this._p_value=false;this.set_value(_e);this.checked=this._isChecked(_e);this._cellobj._setAccessibilityStatChecked(this.checked);};_pCellCheckboxBase.set_value=function(_a){_a=this._changeValue(_a);this._setValue(_a);this.on_apply_value();};_pCellCheckboxBase.on_get_accessibility_label=function(){return "";};_pCellCheckboxBase._getComputedStyle=function(){var _a={"styles":null};return _a;};_pCellCheckboxBase._setComputedStyle=function(_a){};_pCellCheckboxBase._getCurrentStyleAlign=function(_a){return this._cellobj._getCurrentStyleAlign(_a);};_pCellCheckboxBase._on_getFitSize=function(_a,_b){var _c=this.getElement();if(_c){var _d=0;var _e=0;var _f=this._getCurrentStyleBorder();if(_f){_d+=_f._getBorderWidth();_e+=_f._getBorderHeight();}var _g=this._icon||this._getCSSStyleValue("icon");if(_g){var _h=this.iconPosition||this._getCSSStyleValue("iconPosition");var _i;if(_a!=undefined&&_b!=undefined){_i={width:_a,height:_b};}else{_i=nexacro._getImageSize(_g.url,this._on_icon_onload,this,this._view?this._view._getRefFormBaseUrl():undefined,_g.value)||{width:0,height:0};}if(_h=="top"||_h=="bottom"){_e+=_i.height;_d=Math.max(_d,_i.width);}else{_d+=_i.width;_e=Math.max(_e,_i.height);}}return [_d,_e];}return [this._adjust_width,this._adjust_height];};nexacro._CellCheckboxControl=function(_a,_b,_c,_d,_e,_f,_g){nexacro._CellCheckboxControlBase.call(this,_a,_b,_c,_d,_e,_f);this._controlmode=(_g)?true:false;};var _pCellCheckbox=nexacro._createPrototype(nexacro._CellCheckboxControlBase,nexacro._CellCheckboxControl);nexacro._CellCheckboxControl.prototype=_pCellCheckbox;_pCellCheckbox.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this._is_alive){return;}if(this._cellobj._isFakeCell()){return false;}if(this._view&&this._view.selectchangetype!="down"){if(nexacro._toBoolean(this._view._p_readonly)==false){this._toggleCheck();}}return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellCheckbox.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._cellobj._isFakeCell()){return false;}return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellCheckbox._toggleCheck=function(){var _a=this._cellobj;var _b=this._cellinfo;var _c=this._view;var _d=_a._getDataRow();var _e=_b._getEdittype(_d);var _f=this._grid;if(_c&&_e=="checkbox"){var _g=this._isChecked(this._p_value);if(_g){_g=nexacro._isNull(this.falsevalue)?0:this.falsevalue;}else{_g=nexacro._isNull(this.truevalue)?1:this.truevalue;}if(_b.text._bindtype==1){_c._dsEventOccured=true;var _h=_a._getBindDataset();if(_h&&_h.setColumn(_d,_b.text._bindexpr,_g)){_g=_b._getTextValueForDisp(_d);this.set_value(_g);}_c._dsEventOccured=false;}else if(_d==-1){this.set_value(_g);var _i;if(this._cellobj._isSubCell){_i=this._cellobj._p_parent._cellidx;}else{_i=_b._cellidx;}var _j=_b._value;if(_b._setValue(this._p_value)){_f._on_fire_onheadvaluechanged(_j,this._p_value,_i);}}}};_pCellCheckbox._getDisplayText=function(){if(this._p_parent){return this._p_parent._getDisplayText();}return "";};_pCellCheckbox._getCurrentStyleAlign=function(_a){return this._cellobj._getCurrentStyleAlign(_a);};nexacro._CellRadioItemControl=function(_a,_b,_c,_d,_e,_f,_g){nexacro._RadioItemControl.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f);this._controlmode=(_g)?true:false;this._p_tabstop=false;this._is_usetextbox=false;var _h=_f;while(_h){if(_h._refinfo){this._cellobj=_h;this._cellinfo=_h._refinfo;this._view=_h._view;break;}_h=_h._p_parent;}};var _pCellRadioItem=nexacro._createPrototype(nexacro._RadioItemControl,nexacro._CellRadioItemControl);nexacro._CellRadioItemControl.prototype=_pCellRadioItem;_pCellRadioItem._properties=[{name:"value"},{name:"codevalue"},];_pCellRadioItem.on_getIDCSSSelector=function(){return "cellradioitem";};_pCellRadioItem._apply_setfocus=function(_a,_b){};_pCellRadioItem._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro.CheckBox.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellRadioItem.on_create_contents=function(){this._adjustAlign();nexacro._RadioItemControl.prototype.on_create_contents.call(this);};_pCellRadioItem.on_destroy_contents=function(){nexacro._RadioItemControl.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellRadioItem._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellRadioItem._on_icon_onload=function(_a,_b,_c){nexacro._RadioItemControl.prototype._on_icon_onload.call(this,_a,_b,_c);this._adjustAlign(undefined,undefined,_b,_c);};_pCellRadioItem._adjustAlign=function(_a,_b,_c,_d){var _e=this._cellobj._getAvailableRect();var _f=_e.left;var _g=_e.top;var _h=_e.right;var _i=_e.bottom;var _j=_e.width;var _k=_e.height;var _l=this._cellobj._getDataRow();var _m=this._cellinfo._getRadioitemsize(_l);if(_m<0||_m==undefined){var _n=this._on_getFitSize(_c,_d);_m=_n[1];}if(!_a){_a="center";}if(!_b){_b="middle";}if(_a=="center"){_f+=((_j-_m)/2);}else if(_a=="right"){_f=_h-_m;}if(_b=="middle"){_g+=((_k-_m)/2);}else if(_b=="bottom"){_g=_i-_m;}this.move(_f,_g,_m,_m);};_pCellRadioItem._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._adjustAlign();this._setProperty();};_pCellRadioItem._getRadioItemValue=function(){var _a=this._cellinfo;var _b=this._cellobj;var _c=_b._getDataRow();var _d=_a._getTextValueForDisp(_c);return _d;};_pCellRadioItem._setProperty=function(_a){var _b=this._cellinfo,_c=this._cellobj;var _d=_c._getDataRow();_b._setCellChildControlProperty("radioitem",this,_d);if(_a){return;}var _e=this._getRadioItemValue();this.set_value(_e);this._cellobj._setAccessibilityStatChecked(!!this._p_value);};_pCellRadioItem.set_value=function(_a){this._p_value=_a;this.on_apply_value();};_pCellRadioItem.set_codevalue=function(_a){this._p_codevalue=_a;this.on_apply_value();};_pCellRadioItem.on_apply_value=function(){this._changeUserStatus("selected",this._p_codevalue==this._p_value);};_pCellRadioItem.on_get_accessibility_label=function(){return "";};_pCellRadioItem._getComputedStyle=function(){var _a={"styles":null};return _a;};_pCellRadioItem._setComputedStyle=function(_a){};_pCellRadioItem._getCurrentStyleAlign=function(_a){return this._cellobj._getCurrentStyleAlign(_a);};_pCellRadioItem._on_getFitSize=function(_a,_b){var _c=this.getElement();if(_c){var _d=0;var _e=0;var _f=this._getCurrentStyleBorder();if(_f){_d+=_f._getBorderWidth();_e+=_f._getBorderHeight();}var _g=this._icon||this._getCSSStyleValue("icon");if(_g){var _h=this.iconPosition||this._getCSSStyleValue("iconPosition");var _i;if(_a!==undefined&&_b!==undefined){_i={width:_a,height:_b};}else{_i=nexacro._getImageSize(_g.url,this._on_icon_onload,this,this._view?this._view._getRefFormBaseUrl():undefined,_g.value)||{width:0,height:0};}if(_h=="top"||_h=="bottom"){_e+=_i.height;_d=Math.max(_d,_i.width);}else{_d+=_i.width;_e=Math.max(_e,_i.height);}}return [_d,_e];}return [this._adjust_width,this._adjust_height];};_pCellRadioItem.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(!this._is_alive){return;}if(this._cellobj._isFakeCell()){return false;}if(this._view&&this._view.selectchangetype!="down"){if(nexacro._toBoolean(this._view._p_readonly)==false){this._itemSelect();}}return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellRadioItem.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){if(this._cellobj._isFakeCell()){return false;}return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"control");};_pCellRadioItem._itemSelect=function(){var _a=this._cellobj;var _b=this._cellinfo;var _c=this._view;var _d=_a._getDataRow();var _e=_b._getEdittype(_d);if(_c&&_e=="radioitem"){if(_b.text._bindtype==1){_c._dsEventOccured=true;var _f=_a._getBindDataset();if(_f&&_f.setColumn(_d,_b.text._bindexpr,this._p_codevalue)){var _g=_b._getTextValueForDisp(_d);this.set_value(_g);}_c._dsEventOccured=false;}}};_pCellRadioItem.isChecked=function(){return (this._p_codevalue==this._p_value);};_pCellRadioItem._getDisplayText=function(){if(this._p_parent){return this._p_parent._getDisplayText();}return "";};nexacro._defineProperties(_pCellRadioItem,_pCellRadioItem._properties);nexacro._CellImageControl=function(_a,_b,_c,_d,_e,_f){nexacro._ImageAreaControl.call(this,_a,_b,_c,_d,_e,null,null,null,null,null,null,_f);this._p_tabstop=false;this._p_imagewidth=0;this._p_imageheight=0;this._view=_f._view;this._cellinfo=_f._refinfo;this._cellobj=_f;this._img_elem=null;this._img_type="url";this._p_accessibilityrole="image";};var _pCellImage=nexacro._createPrototype(nexacro._ImageAreaControl,nexacro._CellImageControl);nexacro._CellImageControl.prototype=_pCellImage;_pCellImage._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro._ImageAreaControl.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellImage.on_destroy_contents=function(){nexacro._ImageAreaControl.prototype.on_destroy_contents.call(this);this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellImage.on_apply_text=function(){this.set_image(this._getDisplayText());};_pCellImage.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._p_parent.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,"cellimage");};_pCellImage.on_fire_user_ontouchstart=function(_a,_b,_c,_d){return this._p_parent.on_fire_user_ontouchstart(_a,_b,this,_d);};_pCellImage.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m){return this._p_parent.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,this,_l,_m,"cellimage");};_pCellImage.on_fire_onsize=function(_a,_b){if(this._complete){this.__apply_text();}return nexacro._ImageAreaControl.prototype.on_fire_onsize.call(this,_a,_b);};_pCellImage._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellImage._getDisplayText=function(){if(this._p_parent){return this._p_parent._getDisplayText();}return "";};_pCellImage._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}if(!_a){this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}this._setProperty();};_pCellImage._setProperty=function(_a){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();if(!_a){this.on_apply_text();}_b._setCellChildControlProperty("image",this,_d);};_pCellImage._adjustAlign=function(_a,_b){if(!_a){_a="center";}if(!_b){_b="middle";}this.set_imagealign(_a+" "+_b);this._updateElementPositions();};_pCellImage.on_get_accessibility_label=function(){return this.text;};_pCellImage._getComputedStyle=function(){var _a={"styles":null};return _a;};_pCellImage._setComputedStyle=function(_a){};_pCellImage._getCurrentStyleAlign=function(_a){return this._cellobj._getCurrentStyleAlign(_a);};nexacro._CellTreeControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_h);this._p_tabstop=false;this._view=_h._view;this._cellinfo=_h._refinfo;this._cellobj=_h;this._leftline_ctrls=[];this._btnimg_ctrl=null;this._chk_ctrl=null;this._img_ctrl=null;this._text_ctrl=null;this._displaytext="";this._upline_ctrl=null;this._downline_ctrl=null;this._clicktarget=null;this._checkboxObj="_CellCheckboxControlBase";};var _pCellTree=nexacro._createPrototype(nexacro.Component,nexacro._CellTreeControl);nexacro._CellTreeControl.prototype=_pCellTree;_pCellTree._is_subcontrol=true;_pCellTree._type_name="CellTreeItemControl";_pCellTree._apply_setfocus=function(_a){};_pCellTree._getDlgCode=function(_a,_b,_c,_d){var _e=nexacro.Component.prototype._getDlgCode.call(this,_a,_b,_c,_d);_e.want_tab=(this._view?this._view._acceptstab:_e.want_tab);return _e;};_pCellTree.on_create_contents=function(){this._createLines(true);this._createCheckbox(true);this._createImage(true);this._createButton(true);this._createText(true);};_pCellTree._createLines=function(_a){if(!this._view||!this._view.treeuseline){return;}if(!this._rightline_ctrl){this._rightline_ctrl=new nexacro._CellTreeLineControl("treerightline",0,0,0,0,null,null,this._p_parent);this._childctrl_setevent(this._rightline_ctrl);this._rightline_ctrl.createComponent(_a);}if(!this._upline_ctrl){this._upline_ctrl=new nexacro._CellTreeLineControl("treeupline",0,0,0,0,null,null,this._p_parent);this._childctrl_setevent(this._upline_ctrl);this._upline_ctrl.createComponent(_a);}if(!this._downline_ctrl){this._downline_ctrl=new nexacro._CellTreeLineControl("treedownline",0,0,0,0,null,null,this._p_parent);this._childctrl_setevent(this._downline_ctrl);this._downline_ctrl.createComponent(_a);}};_pCellTree._createCheckbox=function(_a){if(!this._view&&!this._view.treeusecheckbox){return;}if(!this._chk_ctrl){this._chk_ctrl=new nexacro[this._checkboxObj]("treeitemcheckbox",0,0,0,0,this);this._childctrl_setevent(this._chk_ctrl);this._chk_ctrl._getCheckValue=function(){var _b=this._cellinfo;var _c=this._cellobj;var _d=_c._getDataRow();if(_b.treecheck._bindtype>0){return _b._getAttrValue(_b._p_treecheck,_d);}else{return this._view._treeChecked[_d];}};if(nexacro._enableaccessibility){this._chk_ctrl.accessibilityenable=false;}this._chk_ctrl.createComponent(_a);}};_pCellTree._createImage=function(_a){if(!this._view||!this._view.treeuseimage){return;}if(!this._img_ctrl){this._img_ctrl=new nexacro._TreeItemIconControl("treeitemimage",0,0,0,0,null,null,this);this._childctrl_setevent(this._img_ctrl);if(nexacro._enableaccessibility){this._img_ctrl.accessibilityenable=false;}this._img_ctrl.createComponent(_a);}};_pCellTree._createButton=function(_a){this._btnimg_ctrl=new nexacro._TreeItemIconControl("treeitembutton",0,0,0,0,null,null,this);this._childctrl_setevent(this._btnimg_ctrl);if(nexacro._enableaccessibility){this._btnimg_ctrl.accessibilityenable=false;}this._btnimg_ctrl.createComponent(_a);};_pCellTree._createText=function(_a){this._text_ctrl=new nexacro._TreeItemTextControl("treeitemtext",0,0,0,0,null,null,null,null,null,null,this);this._text_ctrl._setControl();this._childctrl_setevent(this._text_ctrl);this._text_ctrl.createComponent(_a);};_pCellTree._childctrl_setevent=function(_a){_a.on_fire_onclick=function(_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=this.id;if(_o=="treeitemtext"||_o=="treeitemimage"){_o="";}return this._p_parent.on_fire_onclick(_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_a.on_fire_ondblclick=function(_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){var _o=this.id;if(_o=="treeitemtext"||_o=="treeitemimage"){_o="";}return this._p_parent.on_fire_ondblclick(_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n,_o);};_a._on_last_lbuttonup=function(){return this._p_parent._on_last_lbuttonup();};};_pCellTree.on_created_contents=function(_a){var _b=this._leftline_ctrls;for(var _c=0,_d=_b.length;_c<_d;_c++ ){_b[_c].on_created(_a);}if(this._rightline_ctrl){this._rightline_ctrl.on_created(_a);}if(this._upline_ctrl){this._upline_ctrl.on_created(_a);}if(this._downline_ctrl){this._downline_ctrl.on_created(_a);}if(this._btnimg_ctrl){this._btnimg_ctrl.on_created(_a);}if(this._chk_ctrl){this._chk_ctrl.on_created(_a);}if(this._img_ctrl){this._img_ctrl.on_created(_a);}if(this._text_ctrl){this._text_ctrl.on_created(_a);}this._on_created_accessibility_contents(_a);this._is_created=true;};_pCellTree.on_attach_contents_handle=_pCellTree.on_created_contents;_pCellTree.on_destroy_contents=function(){var _a=this._leftline_ctrls;for(var _b=0,_c=_a.length;_b<_c;_b++ ){_a[_b].destroy();}this._leftline_ctrls=null;if(this._rightline_ctrl){this._rightline_ctrl.destroy();this._rightline_ctrl=null;}if(this._upline_ctrl){this._upline_ctrl.destroy();this._upline_ctrl=null;}if(this._downline_ctrl){this._downline_ctrl.destroy();this._downline_ctrl=null;}if(this._btnimg_ctrl){this._btnimg_ctrl.destroy();this._btnimg_ctrl=null;}if(this._chk_ctrl){this._chk_ctrl.destroy();this._chk_ctrl=null;}if(this._img_ctrl){this._img_ctrl.destroy();this._img_ctrl=null;}if(this._text_ctrl){this._text_ctrl.destroy();this._text_ctrl=null;}this._clicktarget=null;this._view=null;this._cellinfo=null;this._cellobj=null;};_pCellTree.on_apply_text=function(){var _a=this._text_ctrl;if(_a){_a.set_text(this._displaytext);}};_pCellTree.on_fire_ondblclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){return this._cellobj.on_fire_ondblclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pCellTree.on_fire_onclick=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n){return this._cellobj.on_fire_onclick(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l,_m,_n);};_pCellTree._isEditTypeTree=function(){var _a=this._cellobj;var _b=this._cellinfo;var _c=_a._getDataRow();var _d=_b._getEdittype(_c);return (_d=="tree");};_pCellTree._getLineHeight=function(){var _a=this._p_parent._adjust_height;var _b=this._p_parent._getCurrentStyleBorder();var _c=(_b)?_b.bottom._width:0;return _a-_c;};_pCellTree._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellTree._load_image=function(_a,_b){var _c=(_b)?_b.toString():null;if(this._control_element&&_c){if(_c!="none"){_c=nexacro._getURIValue(_c);_c=nexacro._getImageLocation(_c,this._getRefFormBaseUrl());_a._load_url=_c;var _d=nexacro._getImageSize(_c,this._on_loadImage,this,this._getRefFormBaseUrl(),_b.value);if(_d){this._on_loadImage(_c,_d.width,_d.height);}}}};_pCellTree._on_loadImage=function(_a,_b,_c){var _d=false;var _e,_f;if(this._btnimg_ctrl&&this._btnimg_ctrl._load_url==_a){_e=this._btnimg_ctrl._adjust_width;_f=this._btnimg_ctrl._adjust_height;if(_e!=_b||_f!=_c){_d=true;this._btnimg_ctrl.move(this._btnimg_ctrl._adjust_left,this._btnimg_ctrl._adjust_top,_b,_c);}}if(this._img_ctrl&&this._img_ctrl._load_url==_a){_e=this._img_ctrl._adjust_width;_f=this._img_ctrl._adjust_height;if(_e!=_b||_f!=_c){_d=true;this._img_ctrl.move(this._img_ctrl._adjust_left,this._img_ctrl._adjust_top,_b,_c);}}if(_d){this._adjustSubCompAlign(this._lvl);}};_pCellTree._changeTreeStatus=function(_a,_b){this._userstatus=_a;if(this._img_ctrl){this._img_ctrl._changeUserStatus(_a,_b);}if(_a!="leaf"&&this._btnimg_ctrl){this._btnimg_ctrl._changeUserStatus(_a,_b);}};_pCellTree._buttonUpdate=function(_a){var _b=this._view;if(_b&&_b.treeusebutton!=this._treeusebutton){if(_b.treeusebutton=="use"){this._btnimg_ctrl.set_visible(true);}else{this._btnimg_ctrl.set_visible(false);}this._treeusebutton=_b.treeusebutton;}var _c;if(_a==2||_a==3||_a==-1){_c=this._btnimg_ctrl._getCSSStyleValue("icon","expand");this._load_image(this._btnimg_ctrl,_c);this._btnimg_ctrl.set_visible(false);this._btnimg_ctrl._tmpw=this._btnimg_ctrl.width;this._btnimg_ctrl._tmph=this._btnimg_ctrl.height;this._btnimg_ctrl.move(this._btnimg_ctrl._adjust_left,this._btnimg_ctrl._adjust_top,0,0);}else{_c=this._btnimg_ctrl._getCSSStyleValue("icon",this._userstatus);this._load_image(this._btnimg_ctrl,_c);}};_pCellTree._checkUpdate=function(_a){var _b=this._view;if(_b&&_b.treeusecheckbox!=this._treeusecheckbox){if(this._chk_ctrl){this._chk_ctrl.set_visible(_b.treeusecheckbox);}else{this._createCheckbox();}this._treeusecheckbox=_b.treeusecheckbox;}if(_b){this._chk_ctrl._changeStatus("readonly",_b._p_readonly);}if(this._chk_ctrl){var _c=this._chk_ctrl.width;var _d=this._chk_ctrl.height;this._chk_ctrl.set_value(_a);this._chk_ctrl._adjustAlign("center","middle",_c,_d);}this._adjustSubCompAlign(this._lvl);};_pCellTree._imageUpdate=function(_a){var _b=this._view;if(_b&&_b.treeuseimage!=this._treeuseimage){if(this._img_ctrl){this._img_ctrl.set_visible(_b.treeuseimage);}else{this._createImage();}this._treeuseimage=_b.treeuseimage;}if(this._img_ctrl){var _c=this._img_ctrl._getCSSStyleValue("icon",this._userstatus);this._load_image(this._img_ctrl,_c);if(_c&&_c!="none"){this._img_ctrl.set_visible(_b?_b.treeuseimage:true);}else{this._img_ctrl.set_visible(false);}}this._adjustSubCompAlign(this._lvl);};_pCellTree._lineUpdate=function(_a,_b){var _c=this._view;if(_c&&_c.treeuseline!=this._treeuseline){this._createLines();if(this._rightline_ctrl){this._rightline_ctrl.set_visible(_c.treeuseline);}if(this._upline_ctrl){this._upline_ctrl.set_visible(_c.treeuseline);}if(this._downline_ctrl){this._downline_ctrl.set_visible(_c.treeuseline);}this._treeuseline=_c.treeuseline;}var _d=this._cellinfo._getTreeStartLevel(_a);var _e=(_c&&_c._hasSameNextNode[_a])?_c._hasSameNextNode[_a][1]:false;var _f=(_d>=_b)?true:false;this._createLeftLine(_a);var _g;if(this._rightline_ctrl){_g=this._rightline_ctrl;_g._set_line(false,true);}if(this._upline_ctrl){_g=this._upline_ctrl;_g._set_line(!_f,false);}if(this._downline_ctrl&&!_f&&_e){_g=this._downline_ctrl;_g._set_line(true,false);}else if(this._downline_ctrl){this._downline_ctrl.set_visible(false);}this._treeline_visible(!this._cellobj._hideInner);};_pCellTree._createLeftLine=function(_a){var _b=this._view;var _c;if(!_b||!_b.treeuseline){var _d=this._leftline_ctrls.length;for(_c=0;_c<_d;_c++ ){this._leftline_ctrls[_c].destroy();}this._leftline_ctrls=[];return;}var _e=this._cellinfo._getTreeLevel(_a);var _f=_e -1;var _g;_c=0;var _h=this._leftline_ctrls;while(_b._rootlevel<_f){_g=this.__isNextSameLevelInSameParent(_f,_a);if(_g){var _i=this._getLineHeight();var _j=_h[_c];if(!_j){_j=new nexacro._CellTreeLineControl("treeleftline",0,0,1,_i,null,null,this._p_parent);_j.createComponent();this._leftline_ctrls[_c]=_j;}else{_j.set_height(_i);}_j._set_line(true,false);_j._depth=_f;_c++ ;}_f-- ;}while(_h.length>_c){_h[_h.length-1].destroy();_h.splice(_h.length-1,1);}};_pCellTree._toggleItem=function(_a,_b){var _c=this._view;if(!_c||_a){if(this._btnimg_ctrl){this._btnimg_ctrl.set_visible(false);}if(this._rightline_ctrl){this._rightline_ctrl.set_visible(false);}if(this._upline_ctrl){this._upline_ctrl.set_visible(false);}if(this._downline_ctrl){this._downline_ctrl.set_visible(false);}if(this._chk_ctrl){this._chk_ctrl.set_visible(false);}if(this._img_ctrl){this._img_ctrl.set_visible(false);}if(this._text_ctrl){this._text_ctrl.set_visible(false);}}else{if(_c.treeusebutton=="use"){this._btnimg_ctrl.set_visible(true);}else{this._btnimg_ctrl.set_visible(false);}if(_b==2||_b==3||_b==-1){this._btnimg_ctrl.set_visible(false);this._btnimg_ctrl.move(this._btnimg_ctrl._adjust_left,this._btnimg_ctrl._adjust_top,0,0);}if(this._rightline_ctrl){this._rightline_ctrl.set_visible(_c.treeuseline);}if(this._upline_ctrl){this._upline_ctrl.set_visible(_c.treeuseline);}if(this._downline_ctrl){this._downline_ctrl.set_visible(_c.treeuseline);}if(this._chk_ctrl){this._chk_ctrl.set_visible(_c.treeusecheckbox);}if(this._img_ctrl){this._img_ctrl.set_visible(_c.treeuseimage);}if(this._text_ctrl){this._text_ctrl.set_visible(true);}}};_pCellTree.on_apply_prop_tooltip=function(){var _a=this._cellobj._getDataRow();this._p_tooltiptext=this._cellinfo._getTooltipText(_a);this._p_tooltiptype=this._cellinfo._p_tooltiptype;nexacro.Component.prototype.on_apply_prop_tooltip.call(this);};_pCellTree._treeline_visible=function(_a){var _b;var _c=this._leftline_ctrls.length;if(_a){for(_b=0;_b<_c;_b++ ){this._leftline_ctrls[_b]._control_element.setElementVisible(this._leftline_ctrls[_b]._p_visible);}if(this._rightline_ctrl){this._rightline_ctrl._control_element.setElementVisible(this._rightline_ctrl._p_visible);}if(this._upline_ctrl){this._upline_ctrl._control_element.setElementVisible(this._upline_ctrl._p_visible);}if(this._downline_ctrl){this._downline_ctrl._control_element.setElementVisible(this._downline_ctrl._p_visible);}}else{for(_b=0;_b<_c;_b++ ){this._leftline_ctrls[_b]._control_element.setElementVisible(false);}if(this._rightline_ctrl){this._rightline_ctrl._control_element.setElementVisible(false);}if(this._upline_ctrl){this._upline_ctrl._control_element.setElementVisible(false);}if(this._downline_ctrl){this._downline_ctrl._control_element.setElementVisible(false);}}};_pCellTree.on_apply_prop_cssclass=function(){if(this._chk_ctrl){this._chk_ctrl.on_apply_cssclass();}if(this._img_ctrl){this._img_ctrl.on_apply_cssclass();}if(this._text_ctrl){this._text_ctrl.on_apply_cssclass();}if(this._btnimg_ctrl){this._btnimg_ctrl.on_apply_cssclass();}};_pCellTree.on_apply_prop_enable=function(_a){if(this._chk_ctrl){this._chk_ctrl._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}if(this._img_ctrl){this._img_ctrl._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}if(this._text_ctrl){this._text_ctrl._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}if(this._btnimg_ctrl){this._btnimg_ctrl._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}};_pCellTree.on_apply_prop_rtl=function(){nexacro.Component.prototype.on_apply_prop_rtl.call(this);if(this._chk_ctrl){this._chk_ctrl.on_apply_prop_rtl();}if(this._img_ctrl){this._img_ctrl.on_apply_prop_rtl();}if(this._text_ctrl){this._text_ctrl.on_apply_prop_rtl();}if(this._btnimg_ctrl){this._btnimg_ctrl.on_apply_prop_rtl();}};_pCellTree._updateAll=function(_a,_b){this._cellinfo=this._p_parent._refinfo;if(this._control_element){if(_b!==undefined){if(this.on_apply_readonly){this.on_apply_readonly(_b);}else{this._changeStatus("readonly",_b);}}var _c=this._view;var _d=this._cellobj;var _e=_d._getDataRow();var _f=1;var _g=0;var _h=0;if(_c&&!_d._isFakeCell()){_f=_c._getTreeStats(_e);_g=_c._getTreeCheck(_e);_h=_c._getTreeLevel?_c._getTreeLevel(_e):this._cellinfo._getTreeLevel(_e);}if(_e==null||_e==-9){this._toggleItem(true,_f);return;}else{this._toggleItem(false,_f);}if(!_a){this._apply_status(_d._oldstatus,_d._status,_d._olduserstatus,_d._userstatus);}this._lvl=_h;if(_f==0){this._changeTreeStatus("collapse",true);}else if(_f==1){this._changeTreeStatus("expand",true);}else if(_f>=2){this._changeTreeStatus("leaf",true);}this._buttonUpdate(_f);this._lineUpdate(_e,_h);this._checkUpdate(_g);this._imageUpdate(_f);var _i=this._p_parent._getDisplayText();if(this._displaytext!=_i){this._text_ctrl.set_text(_i);this._displaytext=_i;}this.on_apply_prop_tooltip();this._adjustSubCompAlign(_h);}};_pCellTree._getCurrentStyleAlign=function(_a){var _b={textAlign:"center",verticalAlign:"middle"};if(this._text_ctrl&&this._text_ctrl._cell_elem){_b=this._text_ctrl._cell_elem._getComputedStyleAlign(_a);}return _b;};_pCellTree._adjustSubCompAlign=function(_a){var _b=this._p_parent;var _c=this._cellinfo;var _d=_b._getControlRect();var _e=_d.width;var _f=_d.height;var _g=_b._getDataRow();var _h=_c._getTreeStartLevel(_g);var _i=9;var _j=16;var _k=_a -1;_a-=_h;if(_a<0){_a=0;}var _l=_b._adjust_top;var _m=_b._getCurrentStylePadding();var _n=((_m)?_m.left:0);var _o=this._getLineHeight();var _p=(_a* _j)+_i;var _q=_p;var _r=_l;var _s=0;var _t=(_o/2);var _u=_t;var _v=this._leftline_ctrls;var _w=_v.length;var _x=0;var _y;for(var _ap=0;_x<_w;_ap++ ){if(_k==_v[_x]._depth){_y=_v[_x++ ]._control_element;_y.setElementPosition(_p-(_j* (_ap+1))+_n,_r);}if(_k-- <0){break;}}var _z=0;var _aa=0;if(this._btnimg_ctrl){var _ab=this._btnimg_ctrl.width;if(_ab<=0&&this._btnimg_ctrl._tmpw){_ab=this._btnimg_ctrl._tmpw;}var _ac=this._btnimg_ctrl.height;if(_ac<=0&&this._btnimg_ctrl._tmph){_ac=this._btnimg_ctrl._tmph;}var _ad=_p-(_ab/2);if(_ad<0){_ad=_p-(_i/2);}if(!this._rightline_ctrl||!this._rightline_ctrl._p_visible){_ad-=((_ab/2)* _a);}var _ae=((_f-_ac)/2);if(this._btnimg_ctrl._p_visible){_u=((_o-_ac)/2);_z=_ab;_aa=_ac;_p=_ad+_ab;}else{if(!this._view.treeuseline){_p=_ad+_ab;}}_s=_ab;this._btnimg_ctrl.move(_ad,_ae,_ab,_ac);}else{_s=_i;}if(this._rightline_ctrl&&this._rightline_ctrl._p_visible){this._rightline_ctrl.move(_p+_n,_r,_s-(_z/2),_t);_p=this._rightline_ctrl.left+this._rightline_ctrl.width-_n;}else{_p+=1;}if(this._upline_ctrl&&this._upline_ctrl._p_visible){this._upline_ctrl.move(_q+_n,_r,_s,_u);}if(this._downline_ctrl&&this._downline_ctrl._p_visible){_r=_l+_u+_aa;var _af=_u+_r;var _ag=_o+_l;if(_af>_ag){_u=_ag-_r;}this._downline_ctrl.move(_q+_n,_r,_s,_u);}if(this._chk_ctrl&&this._chk_ctrl._p_visible){var _ah=this._chk_ctrl.width;var _ai=this._chk_ctrl.height;var _aj=_p;var _ak=((_f-_ai)/2);_p+=_ah;this._chk_ctrl.move(_aj,_ak,_ah,_ai);}if(this._img_ctrl&&this._img_ctrl._p_visible){_p+=1;var _al=this._img_ctrl._adjust_width;var _am=this._img_ctrl._adjust_height;var _an=null;var _ao=null;if(_al>0&&_am>0){_an=_p;_ao=((_f-_am)/2);_p+=_al;}else{}this._img_ctrl.move(_an,_ao,_al,_am);_p+=5;}else{_p+=4;}if(this._text_ctrl){this._text_ctrl.move(_p,0,_e-_p,_f);}};_pCellTree._setAlign=function(_a,_b){if(_a){this._text_ctrl.set_textAlign(_a);}if(_b){this._text_ctrl.set_verticalAlign(_b);}};if(nexacro._Browser=="Runtime"){_pCellTree.on_change_containerRect=function(_a,_b){if(this._lvl||this._isRtl()){this._adjustSubCompAlign(this._lvl);}};}else{_pCellTree.on_change_containerRect=function(_a,_b){if(this._lvl){this._adjustSubCompAlign(this._lvl);}};}_pCellTree._getComputedStyle=function(){var _a={"styles":null};return _a;};_pCellTree._setComputedStyle=function(_a){};nexacro._TreeItemIconControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro._Icon.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_h);};var _pTreeItemIcon=nexacro._createPrototype(nexacro._Icon,nexacro._TreeItemIconControl);nexacro._TreeItemIconControl.prototype=_pTreeItemIcon;_pTreeItemIcon._is_subcontrol=true;_pTreeItemIcon._type_name="TreeItemIconControl";_pTreeItemIcon.on_changeUserStatus=function(_a,_b,_c,_d,_e){return _a;};nexacro._TreeItemTextControl=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Static.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_l);};var _pTreeItemTextControl=nexacro._createPrototype(nexacro.Static,nexacro._TreeItemTextControl);nexacro._TreeItemTextControl.prototype=_pTreeItemTextControl;nexacro._CellTreeLineControl=function(_a,_b,_c,_d,_e,_f,_g,_h){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,null,null,null,null,_h);this._p_tabstop=false;this._is_simple_control=true;this._is_nc_control=true;this._view=_h._view;this._depth=-1;this._showleft=false;this._showbottom=false;};var _pCellTreeLine=nexacro._createPrototype(nexacro.Component,nexacro._CellTreeLineControl);nexacro._CellTreeLineControl.prototype=_pCellTreeLine;_pCellTreeLine._is_subcontrol=true;_pCellTreeLine._type_name="CellTreeLineControl";_pCellTreeLine.on_destroy_contents=function(){this._view=null;};_pCellTreeLine._isEnable=function(){if(this._view&&this._view._enable!==undefined){return this._view._enable;}if(this._p_parent&&this._p_parent._isEnable){return this._p_parent._isEnable();}return true;};_pCellTreeLine._set_line=function(_a,_b){var _c=this._control_element;if(_c){this._showleft=_a;this._showbottom=_b;this._apply_status(this._oldstatus,this._status,this._olduserstatus,this._userstatus);}};_pCellTreeLine._on_apply_status=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.prototype._on_apply_status.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);var _j=false,_k=false,_l=false,_m=false;if(this.id=="treerightline"){_j=true;_l=true;_k=true;}else if(this.id=="treeleftline"||this.id=="treeupline"||"treedownline"){_l=true;_k=true;_m=true;}if(!this._showbottom){_m=true;}if(!this._showleft){_j=true;}this._control_element.setElementBorderNone(_j,_k,_l,_m);};_pCellTreeLine.on_getIDCSSSelector=function(){return "celltreeline";};delete _pCellControl;delete _pSubCellControl;delete _pCellExpand;delete _pCellButton;delete _pCellBar;delete _pCellEdit;delete _pCellTextArea;delete _pCellMaskEdit;delete _pCellCalendar;delete _pCellCombo;delete _pCellMultiCombo;delete _pCellCheckboxBase;delete _pCellCheckbox;delete _pCellRadioItem;delete _pCellImage;delete _pCellTree;delete _pTreeItemIcon;delete _pTreeItemTextControl;delete _pCellTreeLine;}if(!nexacro.Panel){nexacro.Panel=function(_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i,_j,_k,_l);this._p_items=new nexacro.Collection();if(this._p_parent){this._init();}};var _pPanel=nexacro._createPrototype(nexacro.Component,nexacro.Panel);nexacro.Panel.prototype=_pPanel;_pPanel._type_name="Panel";_pPanel._p_tabstop=false;_pPanel._p_type="horizontal";_pPanel._p_spacing="";_pPanel._p_horizontalgap=undefined;_pPanel._p_verticalgap=undefined;_pPanel._p_flexwrap="nowrap";_pPanel._p_flexmainaxisalign="start";_pPanel._p_flexcrossaxisalign="start";_pPanel._p_flexcrossaxiswrapalign="start";_pPanel._p_tabletemplate="1* / 1*";_pPanel._p_tabletemplatearea="";_pPanel._p_tabledirection="horizontal";_pPanel._p_tablecellalign="start start";_pPanel._p_tablecellincompalign="start start";_pPanel._p_tablecellmovingtype="autofill";_pPanel._is_focus_accept=true;_pPanel._is_panel=true;_pPanel._is_simple_control=true;_pPanel._is_eventinfo_control=false;_pPanel._is_container=true;_pPanel._is_flexible_container=true;_pPanel._is_flexible_container_calculation=false;_pPanel._is_initLayoutManager=false;_pPanel._default_width=-1;_pPanel._default_height=-1;_pPanel._fit_height=-1;_pPanel._fit_width=-1;_pPanel._prop_map_layoutalign_basic=["start","center","end"];_pPanel._prop_map_layoutalign_space=["spacebetween","spacearound","spaceevenly"];_pPanel._p_accessibilityrole="none";_pPanel._p_accessibilityenable=false;_pPanel._event_list={"onclick":1,"onkillfocus":1,"onsetfocus":1,"onkeydown":1,"onkeyup":1,"onlbuttondown":1,"onlbuttonup":1,"onrbuttondown":1,"onrbuttonup":1,"onmouseenter":1,"onmouseleave":1,"onmousemove":1,"ondrag":1,"ondragenter":1,"ondragleave":1,"ondragmove":1,"ondrop":1,"onmove":1,"onsize":1,"oncontextmenu":1,"onmouseup":1,"onmousedown":1,"ontouchstart":1,"ontouchmove":1,"ontouchend":1};_pPanel.on_create_contents=function(){if(!this._p_items){this._p_items=new nexacro.Collection();}var _a=new Layout("default","",0,0,this,function(_d){});_a.set_type(this._p_type);this._addLayout(_a.name,_a);this._calcFittocontentsSize();if(this._p_fittocontents!="none"){this.on_apply_fittocontents();}var _b=nexacro._getLayoutManager();if(_b){var _c=_b._fluidlayoutmanager;if(_c){this._setInnerFlexibleFlag(true,_c.getLayoutArrangeType());}}};_pPanel.on_created_contents=function(_a){var _b=this._p_items;for(var _e=0,_f=_b._p_length;_e<_f;_e++ ){var _c=_b[_e];_c._attachPanel();_c._on_apply_itemPosition(false);}this._on_apply_layoutProp();var _d=nexacro._getLayoutManager();if(_d){_d.calcFluidLayoutContents(this);}if(!this._p_visible){this._applyElementVisible(this._p_visible);}};_pPanel.on_create_contents_command=function(){var _a="";var _b=this._p_items;for(var _e=0,_f=_b._p_length;_e<_f;_e++ ){var _c=_b[_e];if(_c){var _d=_c._getComponent();if(_d&&_d._is_group){_a+=_d.createCommand();_c._is_createcommand=true;}}}return _a;};_pPanel.on_attach_contents_handle=function(_a){var _b=this._p_items;for(var _h=0,_i=_b._p_length;_h<_i;_h++ ){var _c=_b[_h];_c._on_apply_itemLayoutProperties();if(!_c._is_createcommand){_c._attachPanel(_h);_c._on_apply_itemPosition(false);}else{var _d=this.getElement();var _e=_c._getComponent();var _f=_e.getElement();if(_d&&_f){_f.owner_elem=_d;}}_c._is_createcommand=false;}this._on_apply_layoutProp();var _g=nexacro._getLayoutManager();if(_g){_g.calcFluidLayoutContents(this);}if(!this._p_visible){this._applyElementVisible(this._p_visible);}this._update_position(this._isRtl());};_pPanel._recalcitemPosition=function(){var _a=this._p_items;for(var _c=0,_d=_a._p_length;_c<_d;_c++ ){var _b=_a[_c];if(this.getItemIndex(_b.id)>-1){_b._on_apply_itemPosition(false);}}this._recalculateLayout();};_pPanel.on_after_created=function(){};_pPanel.destroy=function(_a){if(!this._is_alive){return;}var _b=this._isFluidContainer();var _c=this._p_items;for(var _f=0,_g=_c._p_length;_f<_g;_f++ ){var _d=_c[_f]._getComponent();if(_d&&_d._is_alive&&_d._is_created){_d.destroy();}}var _e=this.destroyComponent(_a);if(!this._is_subcontrol){if(_b){this._update_position_fluid(true);}}return _e;};_pPanel.on_destroy_contents=function(){var _a=this._p_items;for(var _c=0,_d=_a._p_length;_c<_d;_c++ ){var _b=_a[_c];_b.destroy();_b=null;}};_pPanel.on_change_containerRect=function(_a,_b){if(!this._is_created){return;}this._is_calculated=false;if(this._is_flexible_container){this._on_change_containerRect_fluid(_a,_b);}else{this._on_change_containerRect_static(_a,_b);}};_pPanel._on_change_containerRect_static=function(_a,_b){var _c;var _d=this._p_items;var _e=this._isRtl();for(var _f=0,_g=_d._p_length;_f<_g;_f++ ){_c=_d[_f]._getComponent();if(_c&&_c._control_element){_c._update_position(_e);}}};_pPanel._on_change_containerRect_fluid=function(){if(this._is_calc){return;}this._is_calc=true;var _a=this._p_items;var _b=this._isRtl();for(var _e=0,_f=_a._p_length;_e<_f;_e++ ){var _c=_a[_e]._getComponent();if(_c&&_c._control_element){_c._update_position(_b);}}var _d=nexacro._getLayoutManager();if(_d){_d.calcFluidLayoutContents(this);}this._is_calc=false;};_pPanel._on_init=function(){};_pPanel._init=function(){this._initLayoutManager();};_pPanel._on_apply_text=nexacro._emptyFn;_pPanel.removeChild=nexacro._emptyFn;_pPanel._setContents=function(_a){var _b=0;var _c,_d;var _e=true;if(!_a){return;}if(this._p_items.length>0){this._clear();}if((typeof _a)=="object"){_b=1;}if(_b==1){try{var _f=_a;for(_c=0,_d=_f.length;_c<_d;_c++ ){var _g=_f[_c];if(_g.id){this.addItem(_g.id,_g.componentid?_g.componentid:"");}}}catch(e){return;}}else{var _h=nexacro._parseXMLDocument(_a);if(_h){var _i=_h.childNodes[0];if(_i){var _j=_i.childNodes;for(_c=0;_c<_j.length;_c++ ){var _k=_j[_c];if(_k&&_k.attributes){var _l=_k.getAttribute("id");var _m=_k.getAttribute("componentid");if(_l){if(_m&&this._getIndexByComponetid(_m)<0&&this.getItemIndex(_l)<0){var _n=this._addItem(_l,_m);var _e=_n[0];var _o=_n[1];if(_e>-1&&_o){_o._attachPanel();_o._on_apply_itemPosition(false);}}}}}}}}this._update_position_fluid(true);return _e;};_pPanel.set_type=function(_a){var _b=["horizontal","vertical","table"];if(_b.indexOf(_a)==-1){_a="horizontal";}if(this._p_type!=_a){this._p_type=_a;this.on_apply_type();}};_pPanel.on_apply_type=function(){var _a=this._p_type;var _b=this._layout;if(_b){_b.set_type(_a);}var _c=this.getElement();if(_c){_c._setElementLayoutType(_a);this._recalculateLayout();}};_pPanel.set_spacing=function(_a){if(this._p_spacing!=_a){this._p_spacing=_a;this._spacing=new nexacro.PaddingObject(_a);this.on_apply_spacing();}};_pPanel.on_apply_spacing=function(){var _a=this._layout;if(_a){_a.set_spacing(this._p_spacing);}var _b=this.getElement();if(_b){_b._setElementLayoutSpacing(this._spacing);this._recalculateLayout();}};_pPanel.set_horizontalgap=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)||_a<0){return;}}if(this._p_horizontalgap!=_a){this._p_horizontalgap=_a;this.on_apply_horizontalgap();}};_pPanel.on_apply_horizontalgap=function(){var _a=this._layout;if(_a){_a.set_horizontalgap(this._p_horizontalgap);}var _b=this.getElement();if(_b){_b._setElementLayoutHorizontalGap(this._p_horizontalgap);this._recalculateLayout();}};_pPanel.set_verticalgap=function(_a){if(_a!==undefined){if(isNaN(_a= +_a)||_a<0){return;}}if(this._p_verticalgap!=_a){this._p_verticalgap=_a;this.on_apply_verticalgap();}};_pPanel.on_apply_verticalgap=function(){var _a=this._layout;if(_a){_a.set_verticalgap(this._p_verticalgap);}var _b=this.getElement();if(_b){_b._setElementLayoutVerticalGap(this._p_verticalgap);this._recalculateLayout();}};_pPanel.set_flexwrap=function(_a){var _b=["nowrap","wrap"];if(_b.indexOf(_a)==-1){return;}if(this._p_flexwrap!=_a){this._p_flexwrap=_a;this.on_apply_flexwrap();}};_pPanel.on_apply_flexwrap=function(){var _a=this._layout;if(_a){_a.set_flexwrap(this._p_flexwrap);}var _b=this.getElement();if(_b){_b._setElementFlexWrap(this._p_flexwrap);this._recalculateLayout();}};_pPanel.set_flexmainaxisalign=function(_a){var _b=this._prop_map_layoutalign_basic.concat(this._prop_map_layoutalign_space);if(_b.indexOf(_a)==-1){return;}if(this._p_flexmainaxisalign!=_a){this._p_flexmainaxisalign=_a;this.on_apply_flexmainaxisalign();}};_pPanel.on_apply_flexmainaxisalign=function(){var _a=this._layout;if(_a){_a.set_flexmainaxisalign(this._p_flexmainaxisalign);}var _b=this.getElement();if(_b){_b._setElementFlexMainAxisAlign(this._p_flexmainaxisalign);this._recalculateLayout();}};_pPanel.set_flexcrossaxisalign=function(_a){var _b=this._prop_map_layoutalign_basic;if(_b.indexOf(_a)==-1){return;}if(this._p_flexcrossaxisalign!=_a){this._p_flexcrossaxisalign=_a;this.on_apply_flexcrossaxisalign();}};_pPanel.on_apply_flexcrossaxisalign=function(){var _a=this._layout;if(_a){_a.set_flexcrossaxisalign(this._p_flexcrossaxisalign);}var _b=this.getElement();if(_b){_b._setElementFlexCrossAxisAlign(this._p_flexcrossaxisalign);this._recalculateLayout();}};_pPanel.set_flexcrossaxiswrapalign=function(_a){var _b=this._prop_map_layoutalign_basic.concat(this._prop_map_layoutalign_space);if(_b.indexOf(_a)==-1){return;}if(this._p_flexcrossaxiswrapalign!=_a){this._p_flexcrossaxiswrapalign=_a;this.on_apply_flexcrossaxiswrapalign();}};_pPanel.on_apply_flexcrossaxiswrapalign=function(){var _a=this._layout;if(_a){_a.set_flexcrossaxiswrapalign(this._p_flexcrossaxiswrapalign);}var _b=this.getElement();if(_b){_b._setElementFlexCrossAxisWrapAlign(this._p_flexcrossaxiswrapalign);this._recalculateLayout();}};_pPanel.set_tabletemplate=function(_a){if(_a&&this._p_tabletemplate!=_a){this._p_tabletemplate=_a;this.on_apply_tabletemplate();}};_pPanel._setDefaultTabletemplate=function(_a){this._tabletemplate=_a;};_pPanel.on_apply_tabletemplate=function(){v=this._p_tabletemplate;if(!this._tabletemplate){this._tabletemplate=v;}var _a=this._layout;if(_a){_a.set_tabletemplate(v);}var _b=this.getElement();if(_b){_b._setElementTableTemplate(this._p_tabletemplate);this._recalculateLayout();}};_pPanel.set_tabletemplatearea=function(_a){if(this._p_tabletemplatearea!=_a){this._p_tabletemplatearea=_a;this.on_apply_tabletemplatearea();}};_pPanel.on_apply_tabletemplatearea=function(_a){var _b=this._layout;if(_b){_b.set_tabletemplatearea(this._p_tabletemplatearea);}var _c=this.getElement();if(_c){_c._setElementTableTemplateArea(this._p_tabletemplatearea);this._recalculateLayout();}};_pPanel.set_tablecellmovingtype=function(_a){var _b=["none","autofit","autofill"];if(_b.indexOf(_a)==-1){return;}if(this._p_tablecellmovingtype!=_a){this._p_tablecellmovingtype=_a;}};_pPanel.set_tabledirection=function(_a){var _b=["horizontal","vertical"];if(_b.indexOf(_a)==-1){return;}if(this._p_tabledirection!=_a){this._p_tabledirection=_a;this.on_apply_tabledirection();}};_pPanel.on_apply_tabledirection=function(){var _a=this._layout;if(_a){_a.set_tabledirection(this._p_tabledirection);}var _b=this.getElement();if(_b){_b._setElementTableDirection(this._p_tabledirection);this._recalculateLayout();}};_pPanel.set_tablecellalign=function(_a){if(this._p_tablecellalign!=_a){this._p_tablecellalign=_a;this.on_apply_tablecellalign();}};_pPanel.on_apply_tablecellalign=function(_a){var _b=this._layout;if(_b){_b.set_tablecellalign(this._p_tablecellalign);}var _c=this.getElement();if(_c){_c._setElementTableCellAlign(this._p_tablecellalign);}this._recalculateLayout();};_pPanel.set_tablecellincompalign=function(_a){if(this._p_tablecellincompalign!=_a){this._p_tablecellincompalign=_a;this.on_apply_tablecellincompalign();}};_pPanel.on_apply_tablecellincompalign=function(){var _a=this._layout;if(_a){_a.set_tablecellincompalign(this._p_tablecellincompalign);}var _b=this.getElement();if(_b){_b._setElementTableCellinCompAlign(this._p_tablecellincompalign);this._recalculateLayout();}};_pPanel.on_apply_fittocontents=function(){this._on_apply_fittocontents();var _a=nexacro._getLayoutManager();if(_a){this._calced_container=false;_a.setContainerFitType(this,this._p_fittocontents);if(this._is_created){_a.calcLayout(this);}}};_pPanel.on_apply_prop_enable=function(_a){nexacro.Component.prototype.on_apply_prop_enable.call(this,_a);var _b=this._p_items;if(_b){for(var _h=0,_i=_b._p_length;_h<_i;_h++ ){var _c=_b[_h];var _d=_c._getComponent();if(_d){_d._setEnable(_a);}}}if(_a==true){var _e=this._getRootForm();var _f=this.parent;while(_f){var _g=_f._p_binds;if(_g&&_g.length>0){_f._applyBinditemEnable(_g);}if(_e==_f||_f instanceof nexacro.ChildFrame){break;}_f=_f._getParentForm();}}};_pPanel.set_items=_pPanel._setContents;_pPanel._properties=[{name:"flexcrossaxisalign"},{name:"flexcrossaxiswrapalign"},{name:"flexmainaxisalign"},{name:"flexwrap"},{name:"horizontalgap"},{name:"spacing"},{name:"tablecellalign"},{name:"tablecellincompalign"},{name:"tabledirection"},{name:"tabletemplate"},{name:"tabletemplatearea"},{name:"verticalgap"},{name:"items"},{name:"type"},{name:"fittocontents"}];nexacro._defineProperties(_pPanel,_pPanel._properties);_pPanel.addItem=function(_a,_b){var _c=-1;var _d;if(_b&&this._getIndexByComponetid(_b)<0&&this.getItemIndex(_a)<0){var _e=this._addItem(_a,_b);_c=_e[0];_d=_e[1];if(_c>-1&&_d){_d._attachPanel();_d._on_apply_itemPosition();}}return _c;};_pPanel._getItembyIndex=function(_a){var _b=this._p_items;if(_b){var _c=_b.get_id(_a);for(var _e=0,_f=_b._p_length;_e<_f;_e++ ){var _d=_b[_e];if(_d.id==_c){return _d;}}}return null;};_pPanel.removeItem=function(_a){var _b=this._p_items;if(_b){for(var _f=0,_g=_b._p_length;_f<_g;_f++ ){var _c=_b[_f];if(_c.id==_a){var _d=this._p_items.delete_item(_f);var _e=_c._getComponent();if(_e){this._update_removeitem(_e);}return _d;}}}return null;};_pPanel.insertItem=function(_a,_b,_c){var _d;var _e=-1;if(_c&&this._getIndexByComponetid(_c)<0&&this.getItemIndex(_b)<0){var _f=this._insertItem(_a,_b,_c);_e=_f[0];_d=_f[1];if(_e>-1){_d._attachPanel(_a);_d._on_apply_itemPosition();}}return _e;};_pPanel.getItemCount=function(){return this._p_items._p_length;};_pPanel.getItem=function(_a){var _b=this._p_items;if(_b){for(var _d=0,_e=_b._p_length;_d<_e;_d++ ){var _c=_b[_d];if(_c.id==_a){return _c;}}}return null;};_pPanel.getItemIDByComponent=function(_a){if(!_a){return "";}var _b=_a.id;var _c=this._p_items;if(_c){for(var _e=0,_f=_c._p_length;_e<_f;_e++ ){var _d=_c[_e];if(_d._p_componentid==_b){return _d.id;}}}return "";};_pPanel.getItemIndex=function(_a){var _b=this._p_items;if(_b){var _c=_b.indexOf(_a);return _c>-1?_c:-1;}return -1;};_pPanel.getComponentByID=function(_a){var _b=null;var _c=this._p_items;if(_c){var _d=_c.indexOf(_a);if(_d>-1){var _e=this._getItembyIndex(_d);if(_e){_b=_e._getComponent();}}}return _b;};_pPanel.setContents=function(_a){var _b=this._setContents(_a);return _b;};_pPanel._refreshControl=function(){var _a=this._p_items;var _b=0,_c=0,_d=0,_e=0;var _f="horizontal";var _g=this._p_parent;if(_g){var _h=nexacro._getLayoutManager();_f=_h.getLayoutType(_g);}var _i=0;if(_f==1){for(var _r=0,_s=_a.length;_r<_s;_r++ ){var _j=_a[_r]._getComponent();_b=_b>_j._p_left?_j._p_left:_b;_c=_c>_j._p_top?_j._p_top:_c;_d+= +_j._p_width;_j.move(_i,_c);_i+=_d;_e= +_j._p_height>_e? +_j._p_height:_e;}this.move(_b,_c,_d,_e);}else if(_f==3){var _k;var _l,_m,_n,_o;for(var _r=0,_s=_a.length;_r<_s;_r++ ){var _j=_a[_r]._getComponent();var _p=this._getTablecellarea(_j._p_tablecellarea);if(_r==0){_l=_p[2];_m=_p[3];_n=_p[0];_o=_p[1];}else{_l=_p[2]>_l?_l:_p[2];_m=_p[3]<_m?_m:_p[3];_n=_p[0]>_n?_n:_p[0];_o=_p[1]<_o?_o:_p[1];}}this.resize("100%","100%");_k=_n+" "+_o+" / "+_l+" "+_m;this.set_tablecellarea(_k);for(var _r=0,_s=_a.length;_r<_s;_r++ ){var _j=_a[_r];_b=_b>_j._p_left?_j._p_left:_b;_c=_c>_j._p_top?_j._p_top:_c;var _q=_j._control_element;if(_q){_q._layoutbasis=null;}_j.move(_i,_c,"50%","100%");_i+=_j._adjust_width;}}};_pPanel._recalculateLayout=function(){var _a=nexacro._getLayoutManager();if(_a){_a.calcFluidLayoutContents(this);}};_pPanel._getTablecellarea=function(_a){if(_a){var _b=[];var _c=_a.split("/");_c.forEach(function(_d,_e,_f){_d=_d.trim();var _g=_d.split(" ");if(_g.length==1){_b.push( +_d);_b.push( +_d);}else if(_g.length==2){if(_g[0]>_g[1]){_g.push(_g.shift());}_g.forEach(function(_d){_b.push( +_d);});}});return _b;}return;};_pPanel._getIndexByComponetid=function(_a){var _b=this._p_items;if(_b){for(var _d=0,_e=_b._p_length;_d<_e;_d++ ){var _c=_b[_d];if(_c.componentid==_a){return _d;}}}return -1;};_pPanel._addItem=function(_a,_b){var _c=-1;var _d=new nexacro.PanelItem(_a,this);_d.set_componentid(_b);_c=this._p_items.add_item(_a,_d);return [_c,_d];};_pPanel._insertItem=function(_a,_b,_c){var _d=new nexacro.PanelItem(_b,this);_d.set_componentid(_c);_a=this._p_items.insert_item(_a,_b,_d);return [_a,_d];};_pPanel._removeItem=function(_a){var _b=this._p_items;if(_b){for(var _d=0,_e=_b._p_length;_d<_e;_d++ ){var _c=_b[_d];if(_c._p_componentid==_a){return this._p_items.delete_item(_d);}}}return null;};_pPanel._getNewPanelItemId=function(){var _a=this._p_items;if(_a){var _b=_a._p_length;var _c=_b;for(var _f=0;_f<_b;_f++ ){var _d="PanelItem"+_c<10?"0"+_c:_c;var _e=this.getComponentByID(_d);if(!_e){return _d;}_c++ ;}}return "";};_pPanel._initLayoutManager=function(){if(this._is_subcontrol){return;}var _a=nexacro._getLayoutManager();if(_a){_a.createLayoutContainerInfo(this);this._is_initLayoutManager=true;}};_pPanel._addLayout=function(_a,_b){if(!_b){return;}this._layout=_b;var _c=nexacro._getLayoutManager(this);if(_c){_c.addLayoutList(this,_b);}};_pPanel._unGroup=function(){if(!this._is_alive){return;}this._clear(true);this.destroyComponent();return true;};_pPanel._clear=function(_a){if(!this._is_alive){return;}var _b=this._p_items;if(_b){for(var _f=_b._p_length-1;_f>-1;_f-- ){var _c=_b[_f];this._p_items.delete_item(_f);var _d=_c._getComponent();if(_d){this._update_removeitem(_d);}if(_a&&this._is_group){var _e=this._group_panel;if(_e){_e.addItem(this._getNewPanelItemId(),_d.id);}}}}return true;};_pPanel._update_removeitem=function(_a){var _b=this._getForm();var _c=_b.getElement();var _d=_a.getElement();if(_c&&_d){this._setGroup(_a,false);_d._removeFromContainer();_b._addChildToContainer(_a);var _e=nexacro._getLayoutManager();var _f=_e._fluidlayoutmanager;var _g=_f.getLayoutArrangeType();var _h=_e.getLayoutType(_b);if(_h==0){_a._restorePosition();_d.setElementLayoutFluidPos(false);}if(_g==1){_e.calcFluidLayoutContents(this);}_e.calcFluidLayoutContents(_b);if(_a._p_enable!=this._real_enable){_a._setEnable(_a._p_enable);}}};_pPanel._setGroup=function(_a,_b){var _c=nexacro._getLayoutManager();if(!_a||!_c){return;}if(_b==true){_a._group_panel=this;_a._is_group=true;}else{_a._group_panel=null;_a._is_group=false;}_c.updateLayoutContainerInfo(_a);};_pPanel._setLayoutContentsMaxRect=function(_a,_b){this._contents_max_rect=[_a,_b];};_pPanel._getLayoutContentsMaxRect=function(){return this._contents_max_rect;};_pPanel._getComponents=function(){var _a=new nexacro.Collection();var _b=this._p_items;for(var _e=0,_f=_b._p_length;_e<_f;_e++ ){var _c=_b[_e];var _d=_c._getComponent();if(_d){_a.add_item(_d.id,_d);}}return _a;};_pPanel._on_apply_layoutProp=function(){var _a=this._layout;if(!_a){return;}var _b=this.getElement();if(_b){var _c=this._p_type;if(_c){_a.set_type(_c);_b._setElementLayoutType(_c);}if(this._p_spacing){var _d=this._spacing;_a.set_spacing(_d);_b._setElementLayoutSpacing(_d);}var _e=this._p_horizontalgap;if(_e){_a.set_horizontalgap(_e);_b._setElementLayoutHorizontalGap(_e);}var _f=this._p_verticalgap;if(_f){_a.set_verticalgap(_f);_b._setElementLayoutVerticalGap(_f);}if(_c=="table"){var _g=this._p_tabletemplate;if(_g){_a.set_tabletemplate(_g);_b._setElementTableTemplate(_g);}var _h=this._p_tabletemplatearea;if(_h){_a.set_tabletemplatearea(_h);_b._setElementTableTemplateArea(_h);}var _i=this._p_tabledirection;if(_i){_a.set_tabledirection(_i);_b._setElementTableDirection(_i);}var _j=this._p_tablecellalign;if(_j){_a.set_tablecellalign(_j);_b._setElementTableCellAlign(_j);}var _k=this._p_tablecellincompalign;if(_k){_a.set_tablecellincompalign(_k);_b._setElementTableCellinCompAlign(_k);}}else{var _l=this._p_flexwrap;if(_l){_a.set_flexwrap(_l);_b._setElementFlexWrap(_l);}var _m=this._p_flexmainaxisalign;if(_m){_a.set_flexmainaxisalign(_m);_b._setElementFlexMainAxisAlign(_m);}var _n=this._p_flexcrossaxiswrapalign;if(_n){_a.set_flexcrossaxiswrapalign(_n);_b._setElementFlexCrossAxisWrapAlign(_n);}var _o=this._p_flexcrossaxisalign;if(_o){_a.set_flexcrossaxisalign(_o);_b._setElementFlexCrossAxisAlign(_o);}}this._recalculateLayout();}};_pPanel._areConsecutive=function(_a){if(!_a){return false;}var _b=false;var _c,_d,_e,_f,_g,_h,_i;var _j=this._getComponents();var _k=_a.replace(/\s/g,"").split(",");var _l=_k.length;var _m=[];var _n=nexacro._getLayoutManager();var _o=_n.getLayoutType(this);var _p=_n._fluidlayoutmanager;var _q=0,_r=0;if(_p&&_p._tabletemplate_rect){var _s=_p._tabletemplate_rect;_q=_s.length;_r=_s[0].length;}if(_o==0){for(_c=0;_c<_l;_c++ ){_g=_k[_c];_h=_j.indexOf(_g);if(_h<0){return false;}_i=_j[_g];if(_i._is_group){return false;}}_b=true;}else if(_o==1||_o==2){for(_c=0;_c<_l;_c++ ){_g=_k[_c];_h=this._getIndexByComponetid(_g);if(_h>-1){_m.push(_h);}else{return false;}}if(_m.length>0){_m.sort();for(_c=1;_c<_l;_c++ ){if(_m[_c]!=_m[_c -1]+1){return false;}}_b=true;}}else if(_o==3){var _t=-1,_u=-1,_v=-1,_w=-1;for(_c=0;_c<_r;_c++ ){var _x=[];for(_d=0;_d<_q;_d++ ){_x.push(false);}_m.push(_x);}for(_c=0;_c<_l;_c++ ){_g=_k[_c];_h=_j.indexOf(_g);if(_h>-1){_i=_j[_g];var _y=_i._getTablecellareaCoordinate();for(_e=_y[2];_e<=_y[3];_e++ ){for(_f=_y[0];_f<=_y[1];_f++ ){_m[_f][_e]=true;}}if(_c==0){_u=_y[0];_w=_y[1];_t=_y[2];_v=_y[3];}else{if(_y[0]<_u){_u=_y[0];}if(_y[1]>_w){_w=_y[1];}if(_y[2]<_t){_t=_y[2];}if(_y[3]>_v){_v=_y[3];}}}}if(_t<0||_u<0){return false;}for(_c=_t;_c<=_v;_c++ ){for(_d=_u;_d<=_w;_d++ ){if(!_m[_d][_c]){return false;}}}_b=true;}return _b;};_pPanel._getSizeInfo=function(){var _a;var _b=this._p_width;var _c=this._p_height;var _d,_e;var _f,_g;var _h=this._getParentComponent();var _i=_h?_h._p_fittocontents:"none";if(this._calced_container){switch(this._p_fittocontents){case "width":_a=this._on_getFitSize();_b=_d=_a[0];_f=this._getAdjustFitPositionHeight(_c,_i);if(_f!=_c){this._fit_height=_e=_c=_f;}break;case "height":_a=this._on_getFitSize();_c=_e=_a[1];_g=this._getAdjustFitPositionWidth(_b,_i);if(_g!=_b){this._fit_width=_d=_b=_g;}break;case "both":_a=this._on_getFitSize();_b=_d=_a[0];_f=this._getAdjustFitPositionHeight(_c,_i);if(_f!=_c){this._fit_height=_e=_c=_f;}_c=_e=_a[1];_g=this._getAdjustFitPositionWidth(_b,_i);if(_g!=_b){this._fit_width=_d=_b=_g;}break;default:_f=this._getAdjustFitPositionHeight(_c,_i);if(_f!=_c){this._fit_height=_e=_c=_f;}_g=this._getAdjustFitPositionWidth(_b,_i);if(_g!=_b){this._fit_width=_d=_b=_g;}break;}}return [_b,_c,_d,_e];};_pPanel._on_getFitSize=function(){if(!this._is_created){return [this._adjust_width,this._adjust_height];}var _a=0,_b=0;var _c=nexacro._getLayoutManager();if(_c){if(!this._is_calculated){_c.calcFluidLayoutContents(this);}}var _d=_c.getContentsMaxRect(this);if(_d){_a+=_d[0];_b+=_d[1];}var _e=this._on_getFitSize_style();_a+=_e[0];_b+=_e[1];return [_a,_b];};_pPanel._on_getFluidHorizontalContainerSize=function(_a){var _b=0;var _c=0;var _d=this._minwidth;var _e=this._maxwidth;var _f=this._minheight;var _g=this._maxheight;var _h=this._getCurrentStyleBorder();switch(this._p_fittocontents){case "width":_b=_h?_a[0]+_h._getBorderWidth():_a[0];_c=this._adjust_height;break;case "height":_b=this._adjust_width;_c=_h?_a[1]+_h._getBorderHeight():_a[1];break;case "both":_b=_h?_a[0]+_h._getBorderWidth():_a[0];_c=_h?_a[1]+_h._getBorderHeight():_a[1];break;case "none":default:_b=this._adjust_width;_c=this._adjust_height;break;}if(_d!=null&&(_b<_d)){_b=(_d<0)?0:_d;}else if(_e!=null&&(_b>_e)){_b=(_e<0)?0:_e;}if(_f!=null&&(_c<_f)){_c=(_f<0)?0:_f;}else if(_g!=null&&(_c>_g)){_c=(_g<0)?0:_g;}return [_b,_c];};_pPanel._on_getFluidVerticalContainerSize=_pPanel._on_getFluidHorizontalContainerSize;_pPanel._on_getFluidTableContainerSize=_pPanel._on_getFluidHorizontalContainerSize;_pPanel._initComponent=function(){this._initUniqueID();if(!this._is_initLayoutManager){this._init();}};_pPanel._getForm=function(){var _a=this._p_parent;for(var _b=0;_b<10;_b++ ){if(_a&&(!_a._is_form||_a._is_panel)){_a=_a._p_parent;}else{break;}}return _a;};_pPanel._getRootForm=function(){var _a=this._p_parent;for(var _b=0;_b<10;_b++ ){if(_a&&(!_a._is_form||_a._is_panel||(_a instanceof nexacro._InnerForm))){_a=_a._p_parent;}else{break;}}return _a;};_pPanel._removeChildFromContainer=function(_a){if(!_a){return;}var _b=_a.id;if(_b){this.getElement().removeChildElement(_a.getElement());}};_pPanel._addChildToContainer=function(_a){if(!_a){return;}var _b=_a.id;if(_b){var _c=this.getElement();if(_c){_c.appendChildElement(_a.getElement());}}};_pPanel._setInnerFlexibleFlag=function(_a,_b){if(_a!=this._is_flexible_container){this._is_flexible_container=_a;}this._is_flexible_container_calculation=_a?!!_b:false;};_pPanel=null;}if(!nexacro.PanelItem){nexacro.PanelItem=function(_a,_b){nexacro._EventSinkObject.call(this,_a,_b);};var _pPanelItem=nexacro._createPrototype(nexacro._EventSinkObject,nexacro.PanelItem);nexacro.PanelItem.prototype=_pPanelItem;_pPanelItem._type_name="PanelItem";_pPanelItem.set_componentid=function(_a){if(this._p_compoentid!=_a){this._p_componentid=_a;this.on_apply_componentid(_a);}};_pPanelItem.on_apply_componentid=function(_a){var _b=this._p_parent;if(_b){var _c=_b._getForm();if(_c){var _d=_c._p_components[_a];if(_d){this._component=_d;}}}};_pPanelItem._properties=[{name:"itemid"},{name:"componentid"}];nexacro._defineProperties(_pPanelItem,_pPanelItem._properties);_pPanelItem._getComponent=function(_a){if(this._component){return this._component;}if(!_a){_a=this._p_componentid;}var _b=this._p_parent;if(_b){var _c=_b._p_parent;for(var _e=0;_e<10;_e++ ){if(_c&&_c._is_panel){_c=_b._p_parent;}else{break;}}if(_c){var _d=_c._p_components[_a];if(_d){return (this._component=_d);}}}return null;};_pPanelItem._attachPanel=function(_a){var _b=this._p_parent;var _c=_b._getForm();var _d=this._getComponent(this._p_componentid);if(!_d){return;}var _e=_d._group_panel;_b._setGroup(_d,true);if(!_c){return;}var _f=_d.getElement();if(_f){var _g=nexacro._getLayoutManager();var _h=_g.getLayoutType(_d._getForm());if(_d._p_visible&&_h==0){_d._initControlElementLayoutProps();}if(_d._is_alive){var _i=_b.getElement();if(_i){if(!this._is_createcommand){if(_d._is_group&&_e&&_e!=_b){_e._removeItem(_d.id);_e._removeChildFromContainer(_d);}else{_c._removeChildFromContainer(_d);}if(_a>-1){var _j=this._getNextComponent(_a+1,_b);if(_j){_i.insertChildElement(_f,_j.getElement());}else{_b._addChildToContainer(_d);}}else{_b._addChildToContainer(_d);}}_f.setParentElement(_i);}}}};_pPanelItem._getNextComponent=function(_a,_b){if(!_b){_b=this._p_parent;}var _c=_b.getItemCount();for(var _f=_a;_f<_c;_f++ ){var _d=_b._getItembyIndex(_f);if(_d){var _e=_d._getComponent();if(_e&&_e._group_panel==_b){return _e;}}}return null;};_pPanelItem._on_apply_itemPosition=function(_a){if(this._is_createcommand){return;}var _b=this._getComponent(this._p_componentid);if(!_b){return;}var _c=this._p_parent;var _d=_b.getElement();if(_d){var _e=nexacro._getLayoutManager();var _f=_e._fluidlayoutmanager;var _g=_e.getLayoutType(_b._getForm());var _h=_f.getLayoutArrangeType();if(_b._p_fittocontents!="both"){_b._on_apply_fittocontents();}if(_h==0){_d.setElementSize(_b._width,_b._height);_b._initControlElementLayoutProps();if(_g==0&&_b._p_visible){_b._setAdjustPosition(0,0);_d._setElementLayoutPosition();_d.clearElementPosition();}if(_a!==false){_b._update_position_fluid(false);}}else{if(_a!==false){_b._update_position_fluid(false);if(_g==0){_e.calcFluidLayoutContents(_c);}else{_c._update_position_fluid(false);}}}if(_b._p_enable!=_c._real_enable){_b._setEnable(_c._real_enable);}}};_pPanelItem._on_apply_itemLayoutProperties=function(){var _a=this._getComponent(this._p_componentid);if(_a){_a._refreshLayoutInfo();}};_pPanelItem=null;}